var vF=Object.defineProperty;var nC=n=>{throw TypeError(n)};var yF=(n,e,t)=>e in n?vF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ve=(n,e,t)=>yF(n,typeof e!="symbol"?e+"":e,t),J_=(n,e,t)=>e.has(n)||nC("Cannot "+t);var h=(n,e,t)=>(J_(n,e,"read from private field"),t?t.call(n):e.get(n)),M=(n,e,t)=>e.has(n)?nC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),R=(n,e,t,r)=>(J_(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),I=(n,e,t)=>(J_(n,e,"access private method"),t);var tr=(n,e,t,r)=>({set _(i){R(n,e,i,t)},get _(){return h(n,e,r)}});function _F(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Zp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var MR={exports:{}},Py={},LR={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg=Symbol.for("react.element"),wF=Symbol.for("react.portal"),EF=Symbol.for("react.fragment"),AF=Symbol.for("react.strict_mode"),bF=Symbol.for("react.profiler"),SF=Symbol.for("react.provider"),TF=Symbol.for("react.context"),CF=Symbol.for("react.forward_ref"),xF=Symbol.for("react.suspense"),RF=Symbol.for("react.memo"),PF=Symbol.for("react.lazy"),rC=Symbol.iterator;function IF(n){return n===null||typeof n!="object"?null:(n=rC&&n[rC]||n["@@iterator"],typeof n=="function"?n:null)}var NR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DR=Object.assign,OR={};function gh(n,e,t){this.props=n,this.context=e,this.refs=OR,this.updater=t||NR}gh.prototype.isReactComponent={};gh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};gh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function FR(){}FR.prototype=gh.prototype;function tb(n,e,t){this.props=n,this.context=e,this.refs=OR,this.updater=t||NR}var nb=tb.prototype=new FR;nb.constructor=tb;DR(nb,gh.prototype);nb.isPureReactComponent=!0;var iC=Array.isArray,VR=Object.prototype.hasOwnProperty,rb={current:null},jR={key:!0,ref:!0,__self:!0,__source:!0};function BR(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)VR.call(e,r)&&!jR.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:eg,type:n,key:s,ref:o,props:i,_owner:rb.current}}function kF(n,e){return{$$typeof:eg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ib(n){return typeof n=="object"&&n!==null&&n.$$typeof===eg}function MF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var sC=/\/+/g;function Z_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?MF(""+n.key):e.toString(36)}function _m(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case eg:case wF:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Z_(o,0):r,iC(i)?(t="",n!=null&&(t=n.replace(sC,"$&/")+"/"),_m(i,e,t,"",function(c){return c})):i!=null&&(ib(i)&&(i=kF(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sC,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",iC(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Z_(s,a);o+=_m(s,e,t,l,i)}else if(l=IF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Z_(s,a++),o+=_m(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dg(n,e,t){if(n==null)return n;var r=[],i=0;return _m(n,r,"","",function(s){return e.call(t,s,i++)}),r}function LF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Dn={current:null},wm={transition:null},NF={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:wm,ReactCurrentOwner:rb};function UR(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Dg,forEach:function(n,e,t){Dg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Dg(n,function(){e++}),e},toArray:function(n){return Dg(n,function(e){return e})||[]},only:function(n){if(!ib(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ae.Component=gh;Ae.Fragment=EF;Ae.Profiler=bF;Ae.PureComponent=tb;Ae.StrictMode=AF;Ae.Suspense=xF;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NF;Ae.act=UR;Ae.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=DR({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rb.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)VR.call(e,l)&&!jR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:eg,type:n.type,key:i,ref:s,props:r,_owner:o}};Ae.createContext=function(n){return n={$$typeof:TF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:SF,_context:n},n.Consumer=n};Ae.createElement=BR;Ae.createFactory=function(n){var e=BR.bind(null,n);return e.type=n,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(n){return{$$typeof:CF,render:n}};Ae.isValidElement=ib;Ae.lazy=function(n){return{$$typeof:PF,_payload:{_status:-1,_result:n},_init:LF}};Ae.memo=function(n,e){return{$$typeof:RF,type:n,compare:e===void 0?null:e}};Ae.startTransition=function(n){var e=wm.transition;wm.transition={};try{n()}finally{wm.transition=e}};Ae.unstable_act=UR;Ae.useCallback=function(n,e){return Dn.current.useCallback(n,e)};Ae.useContext=function(n){return Dn.current.useContext(n)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(n){return Dn.current.useDeferredValue(n)};Ae.useEffect=function(n,e){return Dn.current.useEffect(n,e)};Ae.useId=function(){return Dn.current.useId()};Ae.useImperativeHandle=function(n,e,t){return Dn.current.useImperativeHandle(n,e,t)};Ae.useInsertionEffect=function(n,e){return Dn.current.useInsertionEffect(n,e)};Ae.useLayoutEffect=function(n,e){return Dn.current.useLayoutEffect(n,e)};Ae.useMemo=function(n,e){return Dn.current.useMemo(n,e)};Ae.useReducer=function(n,e,t){return Dn.current.useReducer(n,e,t)};Ae.useRef=function(n){return Dn.current.useRef(n)};Ae.useState=function(n){return Dn.current.useState(n)};Ae.useSyncExternalStore=function(n,e,t){return Dn.current.useSyncExternalStore(n,e,t)};Ae.useTransition=function(){return Dn.current.useTransition()};Ae.version="18.3.1";LR.exports=Ae;var A=LR.exports;const no=Zp(A),$R=_F({__proto__:null,default:no},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DF=A,OF=Symbol.for("react.element"),FF=Symbol.for("react.fragment"),VF=Object.prototype.hasOwnProperty,jF=DF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BF={key:!0,ref:!0,__self:!0,__source:!0};function zR(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VF.call(e,r)&&!BF.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:OF,type:n,key:s,ref:o,props:i,_owner:jF.current}}Py.Fragment=FF;Py.jsx=zR;Py.jsxs=zR;MR.exports=Py;var k=MR.exports,HR={exports:{}},wr={},WR={exports:{}},GR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,H){var X=B.length;B.push(H);e:for(;0<X;){var ne=X-1>>>1,J=B[ne];if(0<i(J,H))B[ne]=H,B[X]=J,X=ne;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],X=B.pop();if(X!==H){B[0]=X;e:for(var ne=0,J=B.length,re=J>>>1;ne<re;){var ge=2*(ne+1)-1,Fe=B[ge],be=ge+1,ce=B[be];if(0>i(Fe,X))be<J&&0>i(ce,Fe)?(B[ne]=ce,B[be]=X,ne=be):(B[ne]=Fe,B[ge]=X,ne=ge);else if(be<J&&0>i(ce,X))B[ne]=ce,B[be]=X,ne=be;else break e}}return H}function i(B,H){var X=B.sortIndex-H.sortIndex;return X!==0?X:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,g=!1,m=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var H=t(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=B)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=t(c)}}function P(B){if(v=!1,S(B),!m)if(t(l)!==null)m=!0,W(O);else{var H=t(c);H!==null&&U(P,H.startTime-B)}}function O(B,H){m=!1,v&&(v=!1,_(T),T=-1),g=!0;var X=p;try{for(S(H),f=t(l);f!==null&&(!(f.expirationTime>H)||B&&!F());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var J=ne(f.expirationTime<=H);H=n.unstable_now(),typeof J=="function"?f.callback=J:f===t(l)&&r(l),S(H)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var ge=t(c);ge!==null&&U(P,ge.startTime-H),re=!1}return re}finally{f=null,p=X,g=!1}}var j=!1,C=null,T=-1,x=5,L=-1;function F(){return!(n.unstable_now()-L<x)}function V(){if(C!==null){var B=n.unstable_now();L=B;var H=!0;try{H=C(!0,B)}finally{H?D():(j=!1,C=null)}}else j=!1}var D;if(typeof E=="function")D=function(){E(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=V,D=function(){$.postMessage(null)}}else D=function(){w(V,0)};function W(B){C=B,j||(j=!0,D())}function U(B,H){T=w(function(){B(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){m||g||(m=!0,W(O))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var X=p;p=H;try{return B()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=p;p=B;try{return H()}finally{p=X}},n.unstable_scheduleCallback=function(B,H,X){var ne=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,B={id:u++,callback:H,priorityLevel:B,startTime:X,expirationTime:J,sortIndex:-1},X>ne?(B.sortIndex=X,e(c,B),t(l)===null&&B===t(c)&&(v?(_(T),T=-1):v=!0,U(P,X-ne))):(B.sortIndex=J,e(l,B),m||g||(m=!0,W(O))),B},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(B){var H=p;return function(){var X=p;p=H;try{return B.apply(this,arguments)}finally{p=X}}}})(GR);WR.exports=GR;var UF=WR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $F=A,_r=UF;function Y(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qR=new Set,Hd={};function ec(n,e){Ju(n,e),Ju(n+"Capture",e)}function Ju(n,e){for(Hd[n]=e,n=0;n<e.length;n++)qR.add(e[n])}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rw=Object.prototype.hasOwnProperty,zF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oC={},aC={};function HF(n){return rw.call(aC,n)?!0:rw.call(oC,n)?!1:zF.test(n)?aC[n]=!0:(oC[n]=!0,!1)}function WF(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function GF(n,e,t,r){if(e===null||typeof e>"u"||WF(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){an[n]=new On(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];an[e]=new On(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){an[n]=new On(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){an[n]=new On(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){an[n]=new On(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){an[n]=new On(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){an[n]=new On(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){an[n]=new On(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){an[n]=new On(n,5,!1,n.toLowerCase(),null,!1,!1)});var sb=/[\-:]([a-z])/g;function ob(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sb,ob);an[e]=new On(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sb,ob);an[e]=new On(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sb,ob);an[e]=new On(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){an[n]=new On(n,1,!1,n.toLowerCase(),null,!1,!1)});an.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){an[n]=new On(n,1,!1,n.toLowerCase(),null,!0,!0)});function ab(n,e,t,r){var i=an.hasOwnProperty(e)?an[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GF(e,t,i,r)&&(t=null),r||i===null?HF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Qs=$F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Og=Symbol.for("react.element"),Pc=Symbol.for("react.portal"),Ic=Symbol.for("react.fragment"),lb=Symbol.for("react.strict_mode"),iw=Symbol.for("react.profiler"),KR=Symbol.for("react.provider"),XR=Symbol.for("react.context"),cb=Symbol.for("react.forward_ref"),sw=Symbol.for("react.suspense"),ow=Symbol.for("react.suspense_list"),ub=Symbol.for("react.memo"),ao=Symbol.for("react.lazy"),YR=Symbol.for("react.offscreen"),lC=Symbol.iterator;function Hh(n){return n===null||typeof n!="object"?null:(n=lC&&n[lC]||n["@@iterator"],typeof n=="function"?n:null)}var ut=Object.assign,e0;function id(n){if(e0===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);e0=e&&e[1]||""}return`
`+e0+n}var t0=!1;function n0(n,e){if(!n||t0)return"";t0=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{t0=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?id(n):""}function qF(n){switch(n.tag){case 5:return id(n.type);case 16:return id("Lazy");case 13:return id("Suspense");case 19:return id("SuspenseList");case 0:case 2:case 15:return n=n0(n.type,!1),n;case 11:return n=n0(n.type.render,!1),n;case 1:return n=n0(n.type,!0),n;default:return""}}function aw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ic:return"Fragment";case Pc:return"Portal";case iw:return"Profiler";case lb:return"StrictMode";case sw:return"Suspense";case ow:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case XR:return(n.displayName||"Context")+".Consumer";case KR:return(n._context.displayName||"Context")+".Provider";case cb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ub:return e=n.displayName||null,e!==null?e:aw(n.type)||"Memo";case ao:e=n._payload,n=n._init;try{return aw(n(e))}catch{}}return null}function KF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return aw(e);case 8:return e===lb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function QR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XF(n){var e=QR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Fg(n){n._valueTracker||(n._valueTracker=XF(n))}function JR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=QR(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function fv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function lw(n,e){var t=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function cC(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Qo(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ZR(n,e){e=e.checked,e!=null&&ab(n,"checked",e,!1)}function cw(n,e){ZR(n,e);var t=Qo(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?uw(n,e.type,t):e.hasOwnProperty("defaultValue")&&uw(n,e.type,Qo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function uC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function uw(n,e,t){(e!=="number"||fv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var sd=Array.isArray;function $c(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Qo(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function hw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function hC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Y(92));if(sd(t)){if(1<t.length)throw Error(Y(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Qo(t)}}function eP(n,e){var t=Qo(e.value),r=Qo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function dC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function tP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?tP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vg,nP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Vg=Vg||document.createElement("div"),Vg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Wd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YF=["Webkit","ms","Moz","O"];Object.keys(xd).forEach(function(n){YF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),xd[e]=xd[n]})});function rP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||xd.hasOwnProperty(n)&&xd[n]?(""+e).trim():e+"px"}function iP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=rP(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var QF=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fw(n,e){if(e){if(QF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function pw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gw=null;function hb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mw=null,zc=null,Hc=null;function fC(n){if(n=rg(n)){if(typeof mw!="function")throw Error(Y(280));var e=n.stateNode;e&&(e=Ny(e),mw(n.stateNode,n.type,e))}}function sP(n){zc?Hc?Hc.push(n):Hc=[n]:zc=n}function oP(){if(zc){var n=zc,e=Hc;if(Hc=zc=null,fC(n),e)for(n=0;n<e.length;n++)fC(e[n])}}function aP(n,e){return n(e)}function lP(){}var r0=!1;function cP(n,e,t){if(r0)return n(e,t);r0=!0;try{return aP(n,e,t)}finally{r0=!1,(zc!==null||Hc!==null)&&(lP(),oP())}}function Gd(n,e){var t=n.stateNode;if(t===null)return null;var r=Ny(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Y(231,e,typeof t));return t}var vw=!1;if(Us)try{var Wh={};Object.defineProperty(Wh,"passive",{get:function(){vw=!0}}),window.addEventListener("test",Wh,Wh),window.removeEventListener("test",Wh,Wh)}catch{vw=!1}function JF(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Rd=!1,pv=null,gv=!1,yw=null,ZF={onError:function(n){Rd=!0,pv=n}};function e2(n,e,t,r,i,s,o,a,l){Rd=!1,pv=null,JF.apply(ZF,arguments)}function t2(n,e,t,r,i,s,o,a,l){if(e2.apply(this,arguments),Rd){if(Rd){var c=pv;Rd=!1,pv=null}else throw Error(Y(198));gv||(gv=!0,yw=c)}}function tc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function uP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function pC(n){if(tc(n)!==n)throw Error(Y(188))}function n2(n){var e=n.alternate;if(!e){if(e=tc(n),e===null)throw Error(Y(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return pC(i),n;if(s===r)return pC(i),e;s=s.sibling}throw Error(Y(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(t.alternate!==r)throw Error(Y(190))}if(t.tag!==3)throw Error(Y(188));return t.stateNode.current===t?n:e}function hP(n){return n=n2(n),n!==null?dP(n):null}function dP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=dP(n);if(e!==null)return e;n=n.sibling}return null}var fP=_r.unstable_scheduleCallback,gC=_r.unstable_cancelCallback,r2=_r.unstable_shouldYield,i2=_r.unstable_requestPaint,wt=_r.unstable_now,s2=_r.unstable_getCurrentPriorityLevel,db=_r.unstable_ImmediatePriority,pP=_r.unstable_UserBlockingPriority,mv=_r.unstable_NormalPriority,o2=_r.unstable_LowPriority,gP=_r.unstable_IdlePriority,Iy=null,Oi=null;function a2(n){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(Iy,n,void 0,(n.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:u2,l2=Math.log,c2=Math.LN2;function u2(n){return n>>>=0,n===0?32:31-(l2(n)/c2|0)|0}var jg=64,Bg=4194304;function od(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vv(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=od(a):(s&=o,s!==0&&(r=od(s)))}else o=t&~i,o!==0?r=od(o):s!==0&&(r=od(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-oi(e),i=1<<t,r|=n[t],e&=~i;return r}function h2(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d2(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-oi(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=h2(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function _w(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function mP(){var n=jg;return jg<<=1,!(jg&4194240)&&(jg=64),n}function i0(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function tg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-oi(e),n[e]=t}function f2(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-oi(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function fb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-oi(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ue=0;function vP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var yP,pb,_P,wP,EP,ww=!1,Ug=[],jo=null,Bo=null,Uo=null,qd=new Map,Kd=new Map,co=[],p2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mC(n,e){switch(n){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":qd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(e.pointerId)}}function Gh(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=rg(e),e!==null&&pb(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function g2(n,e,t,r,i){switch(e){case"focusin":return jo=Gh(jo,n,e,t,r,i),!0;case"dragenter":return Bo=Gh(Bo,n,e,t,r,i),!0;case"mouseover":return Uo=Gh(Uo,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return qd.set(s,Gh(qd.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Kd.set(s,Gh(Kd.get(s)||null,n,e,t,r,i)),!0}return!1}function AP(n){var e=Da(n.target);if(e!==null){var t=tc(e);if(t!==null){if(e=t.tag,e===13){if(e=uP(t),e!==null){n.blockedOn=e,EP(n.priority,function(){_P(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Em(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ew(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);gw=r,t.target.dispatchEvent(r),gw=null}else return e=rg(t),e!==null&&pb(e),n.blockedOn=t,!1;e.shift()}return!0}function vC(n,e,t){Em(n)&&t.delete(e)}function m2(){ww=!1,jo!==null&&Em(jo)&&(jo=null),Bo!==null&&Em(Bo)&&(Bo=null),Uo!==null&&Em(Uo)&&(Uo=null),qd.forEach(vC),Kd.forEach(vC)}function qh(n,e){n.blockedOn===e&&(n.blockedOn=null,ww||(ww=!0,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,m2)))}function Xd(n){function e(i){return qh(i,n)}if(0<Ug.length){qh(Ug[0],n);for(var t=1;t<Ug.length;t++){var r=Ug[t];r.blockedOn===n&&(r.blockedOn=null)}}for(jo!==null&&qh(jo,n),Bo!==null&&qh(Bo,n),Uo!==null&&qh(Uo,n),qd.forEach(e),Kd.forEach(e),t=0;t<co.length;t++)r=co[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<co.length&&(t=co[0],t.blockedOn===null);)AP(t),t.blockedOn===null&&co.shift()}var Wc=Qs.ReactCurrentBatchConfig,yv=!0;function v2(n,e,t,r){var i=Ue,s=Wc.transition;Wc.transition=null;try{Ue=1,gb(n,e,t,r)}finally{Ue=i,Wc.transition=s}}function y2(n,e,t,r){var i=Ue,s=Wc.transition;Wc.transition=null;try{Ue=4,gb(n,e,t,r)}finally{Ue=i,Wc.transition=s}}function gb(n,e,t,r){if(yv){var i=Ew(n,e,t,r);if(i===null)p0(n,e,r,_v,t),mC(n,r);else if(g2(i,n,e,t,r))r.stopPropagation();else if(mC(n,r),e&4&&-1<p2.indexOf(n)){for(;i!==null;){var s=rg(i);if(s!==null&&yP(s),s=Ew(n,e,t,r),s===null&&p0(n,e,r,_v,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else p0(n,e,r,null,t)}}var _v=null;function Ew(n,e,t,r){if(_v=null,n=hb(r),n=Da(n),n!==null)if(e=tc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=uP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return _v=n,null}function bP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s2()){case db:return 1;case pP:return 4;case mv:case o2:return 16;case gP:return 536870912;default:return 16}default:return 16}}var No=null,mb=null,Am=null;function SP(){if(Am)return Am;var n,e=mb,t=e.length,r,i="value"in No?No.value:No.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Am=i.slice(n,1<r?1-r:void 0)}function bm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $g(){return!0}function yC(){return!1}function Er(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$g:yC,this.isPropagationStopped=yC,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$g)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$g)},persist:function(){},isPersistent:$g}),e}var mh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vb=Er(mh),ng=ut({},mh,{view:0,detail:0}),_2=Er(ng),s0,o0,Kh,ky=ut({},ng,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Kh&&(Kh&&n.type==="mousemove"?(s0=n.screenX-Kh.screenX,o0=n.screenY-Kh.screenY):o0=s0=0,Kh=n),s0)},movementY:function(n){return"movementY"in n?n.movementY:o0}}),_C=Er(ky),w2=ut({},ky,{dataTransfer:0}),E2=Er(w2),A2=ut({},ng,{relatedTarget:0}),a0=Er(A2),b2=ut({},mh,{animationName:0,elapsedTime:0,pseudoElement:0}),S2=Er(b2),T2=ut({},mh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),C2=Er(T2),x2=ut({},mh,{data:0}),wC=Er(x2),R2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k2(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=I2[n])?!!e[n]:!1}function yb(){return k2}var M2=ut({},ng,{key:function(n){if(n.key){var e=R2[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=bm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?P2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yb,charCode:function(n){return n.type==="keypress"?bm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),L2=Er(M2),N2=ut({},ky,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),EC=Er(N2),D2=ut({},ng,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yb}),O2=Er(D2),F2=ut({},mh,{propertyName:0,elapsedTime:0,pseudoElement:0}),V2=Er(F2),j2=ut({},ky,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),B2=Er(j2),U2=[9,13,27,32],_b=Us&&"CompositionEvent"in window,Pd=null;Us&&"documentMode"in document&&(Pd=document.documentMode);var $2=Us&&"TextEvent"in window&&!Pd,TP=Us&&(!_b||Pd&&8<Pd&&11>=Pd),AC=" ",bC=!1;function CP(n,e){switch(n){case"keyup":return U2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var kc=!1;function z2(n,e){switch(n){case"compositionend":return xP(e);case"keypress":return e.which!==32?null:(bC=!0,AC);case"textInput":return n=e.data,n===AC&&bC?null:n;default:return null}}function H2(n,e){if(kc)return n==="compositionend"||!_b&&CP(n,e)?(n=SP(),Am=mb=No=null,kc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TP&&e.locale!=="ko"?null:e.data;default:return null}}var W2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!W2[n.type]:e==="textarea"}function RP(n,e,t,r){sP(r),e=wv(e,"onChange"),0<e.length&&(t=new vb("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Id=null,Yd=null;function G2(n){jP(n,0)}function My(n){var e=Nc(n);if(JR(e))return n}function q2(n,e){if(n==="change")return e}var PP=!1;if(Us){var l0;if(Us){var c0="oninput"in document;if(!c0){var TC=document.createElement("div");TC.setAttribute("oninput","return;"),c0=typeof TC.oninput=="function"}l0=c0}else l0=!1;PP=l0&&(!document.documentMode||9<document.documentMode)}function CC(){Id&&(Id.detachEvent("onpropertychange",IP),Yd=Id=null)}function IP(n){if(n.propertyName==="value"&&My(Yd)){var e=[];RP(e,Yd,n,hb(n)),cP(G2,e)}}function K2(n,e,t){n==="focusin"?(CC(),Id=e,Yd=t,Id.attachEvent("onpropertychange",IP)):n==="focusout"&&CC()}function X2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return My(Yd)}function Y2(n,e){if(n==="click")return My(e)}function Q2(n,e){if(n==="input"||n==="change")return My(e)}function J2(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ci=typeof Object.is=="function"?Object.is:J2;function Qd(n,e){if(ci(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!rw.call(e,i)||!ci(n[i],e[i]))return!1}return!0}function xC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function RC(n,e){var t=xC(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=xC(t)}}function kP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?kP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function MP(){for(var n=window,e=fv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=fv(n.document)}return e}function wb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Z2(n){var e=MP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&kP(t.ownerDocument.documentElement,t)){if(r!==null&&wb(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=RC(t,s);var o=RC(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var eV=Us&&"documentMode"in document&&11>=document.documentMode,Mc=null,Aw=null,kd=null,bw=!1;function PC(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;bw||Mc==null||Mc!==fv(r)||(r=Mc,"selectionStart"in r&&wb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kd&&Qd(kd,r)||(kd=r,r=wv(Aw,"onSelect"),0<r.length&&(e=new vb("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Mc)))}function zg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Lc={animationend:zg("Animation","AnimationEnd"),animationiteration:zg("Animation","AnimationIteration"),animationstart:zg("Animation","AnimationStart"),transitionend:zg("Transition","TransitionEnd")},u0={},LP={};Us&&(LP=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function Ly(n){if(u0[n])return u0[n];if(!Lc[n])return n;var e=Lc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in LP)return u0[n]=e[t];return n}var NP=Ly("animationend"),DP=Ly("animationiteration"),OP=Ly("animationstart"),FP=Ly("transitionend"),VP=new Map,IC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ha(n,e){VP.set(n,e),ec(e,[n])}for(var h0=0;h0<IC.length;h0++){var d0=IC[h0],tV=d0.toLowerCase(),nV=d0[0].toUpperCase()+d0.slice(1);ha(tV,"on"+nV)}ha(NP,"onAnimationEnd");ha(DP,"onAnimationIteration");ha(OP,"onAnimationStart");ha("dblclick","onDoubleClick");ha("focusin","onFocus");ha("focusout","onBlur");ha(FP,"onTransitionEnd");Ju("onMouseEnter",["mouseout","mouseover"]);Ju("onMouseLeave",["mouseout","mouseover"]);Ju("onPointerEnter",["pointerout","pointerover"]);Ju("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rV=new Set("cancel close invalid load scroll toggle".split(" ").concat(ad));function kC(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,t2(r,e,void 0,n),n.currentTarget=null}function jP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;kC(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;kC(i,a,c),s=l}}}if(gv)throw n=yw,gv=!1,yw=null,n}function tt(n,e){var t=e[Rw];t===void 0&&(t=e[Rw]=new Set);var r=n+"__bubble";t.has(r)||(BP(e,n,2,!1),t.add(r))}function f0(n,e,t){var r=0;e&&(r|=4),BP(t,n,r,e)}var Hg="_reactListening"+Math.random().toString(36).slice(2);function Jd(n){if(!n[Hg]){n[Hg]=!0,qR.forEach(function(t){t!=="selectionchange"&&(rV.has(t)||f0(t,!1,n),f0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Hg]||(e[Hg]=!0,f0("selectionchange",!1,e))}}function BP(n,e,t,r){switch(bP(e)){case 1:var i=v2;break;case 4:i=y2;break;default:i=gb}t=i.bind(null,e,t,n),i=void 0,!vw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function p0(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Da(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}cP(function(){var c=s,u=hb(t),f=[];e:{var p=VP.get(n);if(p!==void 0){var g=vb,m=n;switch(n){case"keypress":if(bm(t)===0)break e;case"keydown":case"keyup":g=L2;break;case"focusin":m="focus",g=a0;break;case"focusout":m="blur",g=a0;break;case"beforeblur":case"afterblur":g=a0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=_C;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=E2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=O2;break;case NP:case DP:case OP:g=S2;break;case FP:g=V2;break;case"scroll":g=_2;break;case"wheel":g=B2;break;case"copy":case"cut":case"paste":g=C2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=EC}var v=(e&4)!==0,w=!v&&n==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var E=c,S;E!==null;){S=E;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,_!==null&&(P=Gd(E,_),P!=null&&v.push(Zd(E,P,S)))),w)break;E=E.return}0<v.length&&(p=new g(p,m,null,t,u),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==gw&&(m=t.relatedTarget||t.fromElement)&&(Da(m)||m[$s]))break e;if((g||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,g?(m=t.relatedTarget||t.toElement,g=c,m=m?Da(m):null,m!==null&&(w=tc(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(v=_C,P="onMouseLeave",_="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(v=EC,P="onPointerLeave",_="onPointerEnter",E="pointer"),w=g==null?p:Nc(g),S=m==null?p:Nc(m),p=new v(P,E+"leave",g,t,u),p.target=w,p.relatedTarget=S,P=null,Da(u)===c&&(v=new v(_,E+"enter",m,t,u),v.target=S,v.relatedTarget=w,P=v),w=P,g&&m)t:{for(v=g,_=m,E=0,S=v;S;S=pc(S))E++;for(S=0,P=_;P;P=pc(P))S++;for(;0<E-S;)v=pc(v),E--;for(;0<S-E;)_=pc(_),S--;for(;E--;){if(v===_||_!==null&&v===_.alternate)break t;v=pc(v),_=pc(_)}v=null}else v=null;g!==null&&MC(f,p,g,v,!1),m!==null&&w!==null&&MC(f,w,m,v,!0)}}e:{if(p=c?Nc(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var O=q2;else if(SC(p))if(PP)O=Q2;else{O=X2;var j=K2}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=Y2);if(O&&(O=O(n,c))){RP(f,O,t,u);break e}j&&j(n,p,c),n==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&uw(p,"number",p.value)}switch(j=c?Nc(c):window,n){case"focusin":(SC(j)||j.contentEditable==="true")&&(Mc=j,Aw=c,kd=null);break;case"focusout":kd=Aw=Mc=null;break;case"mousedown":bw=!0;break;case"contextmenu":case"mouseup":case"dragend":bw=!1,PC(f,t,u);break;case"selectionchange":if(eV)break;case"keydown":case"keyup":PC(f,t,u)}var C;if(_b)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else kc?CP(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(TP&&t.locale!=="ko"&&(kc||T!=="onCompositionStart"?T==="onCompositionEnd"&&kc&&(C=SP()):(No=u,mb="value"in No?No.value:No.textContent,kc=!0)),j=wv(c,T),0<j.length&&(T=new wC(T,n,null,t,u),f.push({event:T,listeners:j}),C?T.data=C:(C=xP(t),C!==null&&(T.data=C)))),(C=$2?z2(n,t):H2(n,t))&&(c=wv(c,"onBeforeInput"),0<c.length&&(u=new wC("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=C))}jP(f,e)})}function Zd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function wv(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gd(n,t),s!=null&&r.unshift(Zd(n,s,i)),s=Gd(n,e),s!=null&&r.push(Zd(n,s,i))),n=n.return}return r}function pc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function MC(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Gd(t,s),l!=null&&o.unshift(Zd(t,l,a))):i||(l=Gd(t,s),l!=null&&o.push(Zd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var iV=/\r\n?/g,sV=/\u0000|\uFFFD/g;function LC(n){return(typeof n=="string"?n:""+n).replace(iV,`
`).replace(sV,"")}function Wg(n,e,t){if(e=LC(e),LC(n)!==e&&t)throw Error(Y(425))}function Ev(){}var Sw=null,Tw=null;function Cw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xw=typeof setTimeout=="function"?setTimeout:void 0,oV=typeof clearTimeout=="function"?clearTimeout:void 0,NC=typeof Promise=="function"?Promise:void 0,aV=typeof queueMicrotask=="function"?queueMicrotask:typeof NC<"u"?function(n){return NC.resolve(null).then(n).catch(lV)}:xw;function lV(n){setTimeout(function(){throw n})}function g0(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Xd(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Xd(e)}function $o(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function DC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var vh=Math.random().toString(36).slice(2),Li="__reactFiber$"+vh,ef="__reactProps$"+vh,$s="__reactContainer$"+vh,Rw="__reactEvents$"+vh,cV="__reactListeners$"+vh,uV="__reactHandles$"+vh;function Da(n){var e=n[Li];if(e)return e;for(var t=n.parentNode;t;){if(e=t[$s]||t[Li]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=DC(n);n!==null;){if(t=n[Li])return t;n=DC(n)}return e}n=t,t=n.parentNode}return null}function rg(n){return n=n[Li]||n[$s],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Nc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Y(33))}function Ny(n){return n[ef]||null}var Pw=[],Dc=-1;function da(n){return{current:n}}function nt(n){0>Dc||(n.current=Pw[Dc],Pw[Dc]=null,Dc--)}function Qe(n,e){Dc++,Pw[Dc]=n.current,n.current=e}var Jo={},bn=da(Jo),Gn=da(!1),Ul=Jo;function Zu(n,e){var t=n.type.contextTypes;if(!t)return Jo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function qn(n){return n=n.childContextTypes,n!=null}function Av(){nt(Gn),nt(bn)}function OC(n,e,t){if(bn.current!==Jo)throw Error(Y(168));Qe(bn,e),Qe(Gn,t)}function UP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,KF(n)||"Unknown",i));return ut({},t,r)}function bv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Jo,Ul=bn.current,Qe(bn,n),Qe(Gn,Gn.current),!0}function FC(n,e,t){var r=n.stateNode;if(!r)throw Error(Y(169));t?(n=UP(n,e,Ul),r.__reactInternalMemoizedMergedChildContext=n,nt(Gn),nt(bn),Qe(bn,n)):nt(Gn),Qe(Gn,t)}var as=null,Dy=!1,m0=!1;function $P(n){as===null?as=[n]:as.push(n)}function hV(n){Dy=!0,$P(n)}function fa(){if(!m0&&as!==null){m0=!0;var n=0,e=Ue;try{var t=as;for(Ue=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}as=null,Dy=!1}catch(i){throw as!==null&&(as=as.slice(n+1)),fP(db,fa),i}finally{Ue=e,m0=!1}}return null}var Oc=[],Fc=0,Sv=null,Tv=0,Pr=[],Ir=0,$l=null,Ls=1,Ns="";function Ca(n,e){Oc[Fc++]=Tv,Oc[Fc++]=Sv,Sv=n,Tv=e}function zP(n,e,t){Pr[Ir++]=Ls,Pr[Ir++]=Ns,Pr[Ir++]=$l,$l=n;var r=Ls;n=Ns;var i=32-oi(r)-1;r&=~(1<<i),t+=1;var s=32-oi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ls=1<<32-oi(e)+i|t<<i|r,Ns=s+n}else Ls=1<<s|t<<i|r,Ns=n}function Eb(n){n.return!==null&&(Ca(n,1),zP(n,1,0))}function Ab(n){for(;n===Sv;)Sv=Oc[--Fc],Oc[Fc]=null,Tv=Oc[--Fc],Oc[Fc]=null;for(;n===$l;)$l=Pr[--Ir],Pr[Ir]=null,Ns=Pr[--Ir],Pr[Ir]=null,Ls=Pr[--Ir],Pr[Ir]=null}var vr=null,mr=null,rt=!1,ii=null;function HP(n,e){var t=Lr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function VC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,vr=n,mr=$o(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,vr=n,mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=$l!==null?{id:Ls,overflow:Ns}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Lr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,vr=n,mr=null,!0):!1;default:return!1}}function Iw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function kw(n){if(rt){var e=mr;if(e){var t=e;if(!VC(n,e)){if(Iw(n))throw Error(Y(418));e=$o(t.nextSibling);var r=vr;e&&VC(n,e)?HP(r,t):(n.flags=n.flags&-4097|2,rt=!1,vr=n)}}else{if(Iw(n))throw Error(Y(418));n.flags=n.flags&-4097|2,rt=!1,vr=n}}}function jC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vr=n}function Gg(n){if(n!==vr)return!1;if(!rt)return jC(n),rt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Cw(n.type,n.memoizedProps)),e&&(e=mr)){if(Iw(n))throw WP(),Error(Y(418));for(;e;)HP(n,e),e=$o(e.nextSibling)}if(jC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Y(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){mr=$o(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}mr=null}}else mr=vr?$o(n.stateNode.nextSibling):null;return!0}function WP(){for(var n=mr;n;)n=$o(n.nextSibling)}function eh(){mr=vr=null,rt=!1}function bb(n){ii===null?ii=[n]:ii.push(n)}var dV=Qs.ReactCurrentBatchConfig;function Xh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Y(309));var r=t.stateNode}if(!r)throw Error(Y(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Y(284));if(!t._owner)throw Error(Y(290,n))}return n}function qg(n,e){throw n=Object.prototype.toString.call(e),Error(Y(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function BC(n){var e=n._init;return e(n._payload)}function GP(n){function e(_,E){if(n){var S=_.deletions;S===null?(_.deletions=[E],_.flags|=16):S.push(E)}}function t(_,E){if(!n)return null;for(;E!==null;)e(_,E),E=E.sibling;return null}function r(_,E){for(_=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function i(_,E){return _=Go(_,E),_.index=0,_.sibling=null,_}function s(_,E,S){return _.index=S,n?(S=_.alternate,S!==null?(S=S.index,S<E?(_.flags|=2,E):S):(_.flags|=2,E)):(_.flags|=1048576,E)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,E,S,P){return E===null||E.tag!==6?(E=b0(S,_.mode,P),E.return=_,E):(E=i(E,S),E.return=_,E)}function l(_,E,S,P){var O=S.type;return O===Ic?u(_,E,S.props.children,P,S.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ao&&BC(O)===E.type)?(P=i(E,S.props),P.ref=Xh(_,E,S),P.return=_,P):(P=Im(S.type,S.key,S.props,null,_.mode,P),P.ref=Xh(_,E,S),P.return=_,P)}function c(_,E,S,P){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=S0(S,_.mode,P),E.return=_,E):(E=i(E,S.children||[]),E.return=_,E)}function u(_,E,S,P,O){return E===null||E.tag!==7?(E=Ol(S,_.mode,P,O),E.return=_,E):(E=i(E,S),E.return=_,E)}function f(_,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=b0(""+E,_.mode,S),E.return=_,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Og:return S=Im(E.type,E.key,E.props,null,_.mode,S),S.ref=Xh(_,null,E),S.return=_,S;case Pc:return E=S0(E,_.mode,S),E.return=_,E;case ao:var P=E._init;return f(_,P(E._payload),S)}if(sd(E)||Hh(E))return E=Ol(E,_.mode,S,null),E.return=_,E;qg(_,E)}return null}function p(_,E,S,P){var O=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(_,E,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Og:return S.key===O?l(_,E,S,P):null;case Pc:return S.key===O?c(_,E,S,P):null;case ao:return O=S._init,p(_,E,O(S._payload),P)}if(sd(S)||Hh(S))return O!==null?null:u(_,E,S,P,null);qg(_,S)}return null}function g(_,E,S,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(S)||null,a(E,_,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Og:return _=_.get(P.key===null?S:P.key)||null,l(E,_,P,O);case Pc:return _=_.get(P.key===null?S:P.key)||null,c(E,_,P,O);case ao:var j=P._init;return g(_,E,S,j(P._payload),O)}if(sd(P)||Hh(P))return _=_.get(S)||null,u(E,_,P,O,null);qg(E,P)}return null}function m(_,E,S,P){for(var O=null,j=null,C=E,T=E=0,x=null;C!==null&&T<S.length;T++){C.index>T?(x=C,C=null):x=C.sibling;var L=p(_,C,S[T],P);if(L===null){C===null&&(C=x);break}n&&C&&L.alternate===null&&e(_,C),E=s(L,E,T),j===null?O=L:j.sibling=L,j=L,C=x}if(T===S.length)return t(_,C),rt&&Ca(_,T),O;if(C===null){for(;T<S.length;T++)C=f(_,S[T],P),C!==null&&(E=s(C,E,T),j===null?O=C:j.sibling=C,j=C);return rt&&Ca(_,T),O}for(C=r(_,C);T<S.length;T++)x=g(C,_,T,S[T],P),x!==null&&(n&&x.alternate!==null&&C.delete(x.key===null?T:x.key),E=s(x,E,T),j===null?O=x:j.sibling=x,j=x);return n&&C.forEach(function(F){return e(_,F)}),rt&&Ca(_,T),O}function v(_,E,S,P){var O=Hh(S);if(typeof O!="function")throw Error(Y(150));if(S=O.call(S),S==null)throw Error(Y(151));for(var j=O=null,C=E,T=E=0,x=null,L=S.next();C!==null&&!L.done;T++,L=S.next()){C.index>T?(x=C,C=null):x=C.sibling;var F=p(_,C,L.value,P);if(F===null){C===null&&(C=x);break}n&&C&&F.alternate===null&&e(_,C),E=s(F,E,T),j===null?O=F:j.sibling=F,j=F,C=x}if(L.done)return t(_,C),rt&&Ca(_,T),O;if(C===null){for(;!L.done;T++,L=S.next())L=f(_,L.value,P),L!==null&&(E=s(L,E,T),j===null?O=L:j.sibling=L,j=L);return rt&&Ca(_,T),O}for(C=r(_,C);!L.done;T++,L=S.next())L=g(C,_,T,L.value,P),L!==null&&(n&&L.alternate!==null&&C.delete(L.key===null?T:L.key),E=s(L,E,T),j===null?O=L:j.sibling=L,j=L);return n&&C.forEach(function(V){return e(_,V)}),rt&&Ca(_,T),O}function w(_,E,S,P){if(typeof S=="object"&&S!==null&&S.type===Ic&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Og:e:{for(var O=S.key,j=E;j!==null;){if(j.key===O){if(O=S.type,O===Ic){if(j.tag===7){t(_,j.sibling),E=i(j,S.props.children),E.return=_,_=E;break e}}else if(j.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ao&&BC(O)===j.type){t(_,j.sibling),E=i(j,S.props),E.ref=Xh(_,j,S),E.return=_,_=E;break e}t(_,j);break}else e(_,j);j=j.sibling}S.type===Ic?(E=Ol(S.props.children,_.mode,P,S.key),E.return=_,_=E):(P=Im(S.type,S.key,S.props,null,_.mode,P),P.ref=Xh(_,E,S),P.return=_,_=P)}return o(_);case Pc:e:{for(j=S.key;E!==null;){if(E.key===j)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){t(_,E.sibling),E=i(E,S.children||[]),E.return=_,_=E;break e}else{t(_,E);break}else e(_,E);E=E.sibling}E=S0(S,_.mode,P),E.return=_,_=E}return o(_);case ao:return j=S._init,w(_,E,j(S._payload),P)}if(sd(S))return m(_,E,S,P);if(Hh(S))return v(_,E,S,P);qg(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(t(_,E.sibling),E=i(E,S),E.return=_,_=E):(t(_,E),E=b0(S,_.mode,P),E.return=_,_=E),o(_)):t(_,E)}return w}var th=GP(!0),qP=GP(!1),Cv=da(null),xv=null,Vc=null,Sb=null;function Tb(){Sb=Vc=xv=null}function Cb(n){var e=Cv.current;nt(Cv),n._currentValue=e}function Mw(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Gc(n,e){xv=n,Sb=Vc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zn=!0),n.firstContext=null)}function Or(n){var e=n._currentValue;if(Sb!==n)if(n={context:n,memoizedValue:e,next:null},Vc===null){if(xv===null)throw Error(Y(308));Vc=n,xv.dependencies={lanes:0,firstContext:n}}else Vc=Vc.next=n;return e}var Oa=null;function xb(n){Oa===null?Oa=[n]:Oa.push(n)}function KP(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,xb(e)):(t.next=i.next,i.next=t),e.interleaved=t,zs(n,r)}function zs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var lo=!1;function Rb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ds(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function zo(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zs(n,t)}return i=r.interleaved,i===null?(e.next=e,xb(r)):(e.next=i.next,i.next=e),r.interleaved=e,zs(n,t)}function Sm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,fb(n,t)}}function UC(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Rv(n,e,t,r){var i=n.updateQueue;lo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,v=a;switch(p=e,g=t,v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(g,f,p);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,p=typeof m=="function"?m.call(g,f,p):m,p==null)break e;f=ut({},f,p);break e;case 2:lo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=f):u=u.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hl|=o,n.lanes=o,n.memoizedState=f}}function $C(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var ig={},Fi=da(ig),tf=da(ig),nf=da(ig);function Fa(n){if(n===ig)throw Error(Y(174));return n}function Pb(n,e){switch(Qe(nf,e),Qe(tf,n),Qe(Fi,ig),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=dw(e,n)}nt(Fi),Qe(Fi,e)}function nh(){nt(Fi),nt(tf),nt(nf)}function YP(n){Fa(nf.current);var e=Fa(Fi.current),t=dw(e,n.type);e!==t&&(Qe(tf,n),Qe(Fi,t))}function Ib(n){tf.current===n&&(nt(Fi),nt(tf))}var at=da(0);function Pv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var v0=[];function kb(){for(var n=0;n<v0.length;n++)v0[n]._workInProgressVersionPrimary=null;v0.length=0}var Tm=Qs.ReactCurrentDispatcher,y0=Qs.ReactCurrentBatchConfig,zl=0,lt=null,Nt=null,Wt=null,Iv=!1,Md=!1,rf=0,fV=0;function hn(){throw Error(Y(321))}function Mb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ci(n[t],e[t]))return!1;return!0}function Lb(n,e,t,r,i,s){if(zl=s,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tm.current=n===null||n.memoizedState===null?vV:yV,n=t(r,i),Md){s=0;do{if(Md=!1,rf=0,25<=s)throw Error(Y(301));s+=1,Wt=Nt=null,e.updateQueue=null,Tm.current=_V,n=t(r,i)}while(Md)}if(Tm.current=kv,e=Nt!==null&&Nt.next!==null,zl=0,Wt=Nt=lt=null,Iv=!1,e)throw Error(Y(300));return n}function Nb(){var n=rf!==0;return rf=0,n}function mi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?lt.memoizedState=Wt=n:Wt=Wt.next=n,Wt}function Fr(){if(Nt===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var e=Wt===null?lt.memoizedState:Wt.next;if(e!==null)Wt=e,Nt=n;else{if(n===null)throw Error(Y(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Wt===null?lt.memoizedState=Wt=n:Wt=Wt.next=n}return Wt}function sf(n,e){return typeof e=="function"?e(n):e}function _0(n){var e=Fr(),t=e.queue;if(t===null)throw Error(Y(311));t.lastRenderedReducer=n;var r=Nt,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((zl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,lt.lanes|=u,Hl|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ci(r,e.memoizedState)||(zn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,lt.lanes|=s,Hl|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function w0(n){var e=Fr(),t=e.queue;if(t===null)throw Error(Y(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);ci(s,e.memoizedState)||(zn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function QP(){}function JP(n,e){var t=lt,r=Fr(),i=e(),s=!ci(r.memoizedState,i);if(s&&(r.memoizedState=i,zn=!0),r=r.queue,Db(tI.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Wt!==null&&Wt.memoizedState.tag&1){if(t.flags|=2048,of(9,eI.bind(null,t,r,i,e),void 0,null),Gt===null)throw Error(Y(349));zl&30||ZP(t,e,i)}return i}function ZP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function eI(n,e,t,r){e.value=t,e.getSnapshot=r,nI(e)&&rI(n)}function tI(n,e,t){return t(function(){nI(e)&&rI(n)})}function nI(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ci(n,t)}catch{return!0}}function rI(n){var e=zs(n,1);e!==null&&ai(e,n,1,-1)}function zC(n){var e=mi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sf,lastRenderedState:n},e.queue=n,n=n.dispatch=mV.bind(null,lt,n),[e.memoizedState,n]}function of(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function iI(){return Fr().memoizedState}function Cm(n,e,t,r){var i=mi();lt.flags|=n,i.memoizedState=of(1|e,t,void 0,r===void 0?null:r)}function Oy(n,e,t,r){var i=Fr();r=r===void 0?null:r;var s=void 0;if(Nt!==null){var o=Nt.memoizedState;if(s=o.destroy,r!==null&&Mb(r,o.deps)){i.memoizedState=of(e,t,s,r);return}}lt.flags|=n,i.memoizedState=of(1|e,t,s,r)}function HC(n,e){return Cm(8390656,8,n,e)}function Db(n,e){return Oy(2048,8,n,e)}function sI(n,e){return Oy(4,2,n,e)}function oI(n,e){return Oy(4,4,n,e)}function aI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function lI(n,e,t){return t=t!=null?t.concat([n]):null,Oy(4,4,aI.bind(null,e,n),t)}function Ob(){}function cI(n,e){var t=Fr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Mb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function uI(n,e){var t=Fr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Mb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function hI(n,e,t){return zl&21?(ci(t,e)||(t=mP(),lt.lanes|=t,Hl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zn=!0),n.memoizedState=t)}function pV(n,e){var t=Ue;Ue=t!==0&&4>t?t:4,n(!0);var r=y0.transition;y0.transition={};try{n(!1),e()}finally{Ue=t,y0.transition=r}}function dI(){return Fr().memoizedState}function gV(n,e,t){var r=Wo(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},fI(n))pI(e,t);else if(t=KP(n,e,t,r),t!==null){var i=Mn();ai(t,n,r,i),gI(t,e,r)}}function mV(n,e,t){var r=Wo(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(fI(n))pI(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,ci(a,o)){var l=e.interleaved;l===null?(i.next=i,xb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=KP(n,e,i,r),t!==null&&(i=Mn(),ai(t,n,r,i),gI(t,e,r))}}function fI(n){var e=n.alternate;return n===lt||e!==null&&e===lt}function pI(n,e){Md=Iv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function gI(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,fb(n,t)}}var kv={readContext:Or,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},vV={readContext:Or,useCallback:function(n,e){return mi().memoizedState=[n,e===void 0?null:e],n},useContext:Or,useEffect:HC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Cm(4194308,4,aI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Cm(4194308,4,n,e)},useInsertionEffect:function(n,e){return Cm(4,2,n,e)},useMemo:function(n,e){var t=mi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=mi();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=gV.bind(null,lt,n),[r.memoizedState,n]},useRef:function(n){var e=mi();return n={current:n},e.memoizedState=n},useState:zC,useDebugValue:Ob,useDeferredValue:function(n){return mi().memoizedState=n},useTransition:function(){var n=zC(!1),e=n[0];return n=pV.bind(null,n[1]),mi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=lt,i=mi();if(rt){if(t===void 0)throw Error(Y(407));t=t()}else{if(t=e(),Gt===null)throw Error(Y(349));zl&30||ZP(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,HC(tI.bind(null,r,s,n),[n]),r.flags|=2048,of(9,eI.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=mi(),e=Gt.identifierPrefix;if(rt){var t=Ns,r=Ls;t=(r&~(1<<32-oi(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=rf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=fV++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},yV={readContext:Or,useCallback:cI,useContext:Or,useEffect:Db,useImperativeHandle:lI,useInsertionEffect:sI,useLayoutEffect:oI,useMemo:uI,useReducer:_0,useRef:iI,useState:function(){return _0(sf)},useDebugValue:Ob,useDeferredValue:function(n){var e=Fr();return hI(e,Nt.memoizedState,n)},useTransition:function(){var n=_0(sf)[0],e=Fr().memoizedState;return[n,e]},useMutableSource:QP,useSyncExternalStore:JP,useId:dI,unstable_isNewReconciler:!1},_V={readContext:Or,useCallback:cI,useContext:Or,useEffect:Db,useImperativeHandle:lI,useInsertionEffect:sI,useLayoutEffect:oI,useMemo:uI,useReducer:w0,useRef:iI,useState:function(){return w0(sf)},useDebugValue:Ob,useDeferredValue:function(n){var e=Fr();return Nt===null?e.memoizedState=n:hI(e,Nt.memoizedState,n)},useTransition:function(){var n=w0(sf)[0],e=Fr().memoizedState;return[n,e]},useMutableSource:QP,useSyncExternalStore:JP,useId:dI,unstable_isNewReconciler:!1};function $r(n,e){if(n&&n.defaultProps){e=ut({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Lw(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ut({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Fy={isMounted:function(n){return(n=n._reactInternals)?tc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Mn(),i=Wo(n),s=Ds(r,i);s.payload=e,t!=null&&(s.callback=t),e=zo(n,s,i),e!==null&&(ai(e,n,i,r),Sm(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Mn(),i=Wo(n),s=Ds(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=zo(n,s,i),e!==null&&(ai(e,n,i,r),Sm(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Mn(),r=Wo(n),i=Ds(t,r);i.tag=2,e!=null&&(i.callback=e),e=zo(n,i,r),e!==null&&(ai(e,n,r,t),Sm(e,n,r))}};function WC(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qd(t,r)||!Qd(i,s):!0}function mI(n,e,t){var r=!1,i=Jo,s=e.contextType;return typeof s=="object"&&s!==null?s=Or(s):(i=qn(e)?Ul:bn.current,r=e.contextTypes,s=(r=r!=null)?Zu(n,i):Jo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fy,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function GC(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Fy.enqueueReplaceState(e,e.state,null)}function Nw(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},Rb(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Or(s):(s=qn(e)?Ul:bn.current,i.context=Zu(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Lw(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fy.enqueueReplaceState(i,i.state,null),Rv(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function rh(n,e){try{var t="",r=e;do t+=qF(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function E0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Dw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var wV=typeof WeakMap=="function"?WeakMap:Map;function vI(n,e,t){t=Ds(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Lv||(Lv=!0,Ww=r),Dw(n,e)},t}function yI(n,e,t){t=Ds(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Dw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Dw(n,e),typeof r!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function qC(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new wV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=NV.bind(null,n,e,t),e.then(n,n))}function KC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function XC(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ds(-1,1),e.tag=2,zo(t,e,1))),t.lanes|=1),n)}var EV=Qs.ReactCurrentOwner,zn=!1;function Rn(n,e,t,r){e.child=n===null?qP(e,null,t,r):th(e,n.child,t,r)}function YC(n,e,t,r,i){t=t.render;var s=e.ref;return Gc(e,i),r=Lb(n,e,t,r,s,i),t=Nb(),n!==null&&!zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Hs(n,e,i)):(rt&&t&&Eb(e),e.flags|=1,Rn(n,e,r,i),e.child)}function QC(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Hb(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,_I(n,e,s,r,i)):(n=Im(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Qd,t(o,r)&&n.ref===e.ref)return Hs(n,e,i)}return e.flags|=1,n=Go(s,r),n.ref=e.ref,n.return=e,e.child=n}function _I(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Qd(s,r)&&n.ref===e.ref)if(zn=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(zn=!0);else return e.lanes=n.lanes,Hs(n,e,i)}return Ow(n,e,t,r,i)}function wI(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Bc,dr),dr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Qe(Bc,dr),dr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Qe(Bc,dr),dr|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Qe(Bc,dr),dr|=r;return Rn(n,e,i,t),e.child}function EI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ow(n,e,t,r,i){var s=qn(t)?Ul:bn.current;return s=Zu(e,s),Gc(e,i),t=Lb(n,e,t,r,s,i),r=Nb(),n!==null&&!zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Hs(n,e,i)):(rt&&r&&Eb(e),e.flags|=1,Rn(n,e,t,i),e.child)}function JC(n,e,t,r,i){if(qn(t)){var s=!0;bv(e)}else s=!1;if(Gc(e,i),e.stateNode===null)xm(n,e),mI(e,t,r),Nw(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Or(c):(c=qn(t)?Ul:bn.current,c=Zu(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&GC(e,o,r,c),lo=!1;var p=e.memoizedState;o.state=p,Rv(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Gn.current||lo?(typeof u=="function"&&(Lw(e,t,u,r),l=e.memoizedState),(a=lo||WC(e,t,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XP(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:$r(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Or(l):(l=qn(t)?Ul:bn.current,l=Zu(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&GC(e,o,r,l),lo=!1,p=e.memoizedState,o.state=p,Rv(e,r,o,i);var m=e.memoizedState;a!==f||p!==m||Gn.current||lo?(typeof g=="function"&&(Lw(e,t,g,r),m=e.memoizedState),(c=lo||WC(e,t,c,r,p,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return Fw(n,e,t,r,s,i)}function Fw(n,e,t,r,i,s){EI(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&FC(e,t,!1),Hs(n,e,s);r=e.stateNode,EV.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=th(e,n.child,null,s),e.child=th(e,null,a,s)):Rn(n,e,a,s),e.memoizedState=r.state,i&&FC(e,t,!0),e.child}function AI(n){var e=n.stateNode;e.pendingContext?OC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&OC(n,e.context,!1),Pb(n,e.containerInfo)}function ZC(n,e,t,r,i){return eh(),bb(i),e.flags|=256,Rn(n,e,t,r),e.child}var Vw={dehydrated:null,treeContext:null,retryLane:0};function jw(n){return{baseLanes:n,cachePool:null,transitions:null}}function bI(n,e,t){var r=e.pendingProps,i=at.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Qe(at,i&1),n===null)return kw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=By(o,r,0,null),n=Ol(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=jw(t),e.memoizedState=Vw,n):Fb(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return AV(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Go(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Go(a,s):(s=Ol(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?jw(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Vw,r}return s=n.child,n=s.sibling,r=Go(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Fb(n,e){return e=By({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Kg(n,e,t,r){return r!==null&&bb(r),th(e,n.child,null,t),n=Fb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function AV(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=E0(Error(Y(422))),Kg(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=By({mode:"visible",children:r.children},i,0,null),s=Ol(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&th(e,n.child,null,o),e.child.memoizedState=jw(o),e.memoizedState=Vw,s);if(!(e.mode&1))return Kg(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=E0(s,r,void 0),Kg(n,e,o,r)}if(a=(o&n.childLanes)!==0,zn||a){if(r=Gt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zs(n,i),ai(r,n,i,-1))}return zb(),r=E0(Error(Y(421))),Kg(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=DV.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,mr=$o(i.nextSibling),vr=e,rt=!0,ii=null,n!==null&&(Pr[Ir++]=Ls,Pr[Ir++]=Ns,Pr[Ir++]=$l,Ls=n.id,Ns=n.overflow,$l=e),e=Fb(e,r.children),e.flags|=4096,e)}function ex(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Mw(n.return,e,t)}function A0(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function SI(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rn(n,e,r.children,t),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ex(n,t,e);else if(n.tag===19)ex(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Qe(at,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Pv(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),A0(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Pv(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}A0(e,!0,t,null,s);break;case"together":A0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Hs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Hl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Y(153));if(e.child!==null){for(n=e.child,t=Go(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Go(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function bV(n,e,t){switch(e.tag){case 3:AI(e),eh();break;case 5:YP(e);break;case 1:qn(e.type)&&bv(e);break;case 4:Pb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Qe(Cv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(at,at.current&1),e.flags|=128,null):t&e.child.childLanes?bI(n,e,t):(Qe(at,at.current&1),n=Hs(n,e,t),n!==null?n.sibling:null);Qe(at,at.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return SI(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qe(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,wI(n,e,t)}return Hs(n,e,t)}var TI,Bw,CI,xI;TI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Bw=function(){};CI=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Fa(Fi.current);var s=null;switch(t){case"input":i=lw(n,i),r=lw(n,r),s=[];break;case"select":i=ut({},i,{value:void 0}),r=ut({},r,{value:void 0}),s=[];break;case"textarea":i=hw(n,i),r=hw(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ev)}fw(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};xI=function(n,e,t,r){t!==r&&(e.flags|=4)};function Yh(n,e){if(!rt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function dn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function SV(n,e,t){var r=e.pendingProps;switch(Ab(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(e),null;case 1:return qn(e.type)&&Av(),dn(e),null;case 3:return r=e.stateNode,nh(),nt(Gn),nt(bn),kb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Gg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ii!==null&&(Kw(ii),ii=null))),Bw(n,e),dn(e),null;case 5:Ib(e);var i=Fa(nf.current);if(t=e.type,n!==null&&e.stateNode!=null)CI(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return dn(e),null}if(n=Fa(Fi.current),Gg(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Li]=e,r[ef]=s,n=(e.mode&1)!==0,t){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<ad.length;i++)tt(ad[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":cC(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":hC(r,s),tt("invalid",r)}fw(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wg(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wg(r.textContent,a,n),i=["children",""+a]):Hd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tt("scroll",r)}switch(t){case"input":Fg(r),uC(r,s,!0);break;case"textarea":Fg(r),dC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ev)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=tP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Li]=e,n[ef]=r,TI(n,e,!1,!1),e.stateNode=n;e:{switch(o=pw(t,r),t){case"dialog":tt("cancel",n),tt("close",n),i=r;break;case"iframe":case"object":case"embed":tt("load",n),i=r;break;case"video":case"audio":for(i=0;i<ad.length;i++)tt(ad[i],n);i=r;break;case"source":tt("error",n),i=r;break;case"img":case"image":case"link":tt("error",n),tt("load",n),i=r;break;case"details":tt("toggle",n),i=r;break;case"input":cC(n,r),i=lw(n,r),tt("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=ut({},r,{value:void 0}),tt("invalid",n);break;case"textarea":hC(n,r),i=hw(n,r),tt("invalid",n);break;default:i=r}fw(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?iP(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nP(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Wd(n,l):typeof l=="number"&&Wd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tt("scroll",n):l!=null&&ab(n,s,l,o))}switch(t){case"input":Fg(n),uC(n,r,!1);break;case"textarea":Fg(n),dC(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Qo(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?$c(n,!!r.multiple,s,!1):r.defaultValue!=null&&$c(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Ev)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dn(e),null;case 6:if(n&&e.stateNode!=null)xI(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(t=Fa(nf.current),Fa(Fi.current),Gg(e)){if(r=e.stateNode,t=e.memoizedProps,r[Li]=e,(s=r.nodeValue!==t)&&(n=vr,n!==null))switch(n.tag){case 3:Wg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Wg(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Li]=e,e.stateNode=r}return dn(e),null;case 13:if(nt(at),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&mr!==null&&e.mode&1&&!(e.flags&128))WP(),eh(),e.flags|=98560,s=!1;else if(s=Gg(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Li]=e}else eh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dn(e),s=!1}else ii!==null&&(Kw(ii),ii=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||at.current&1?Ft===0&&(Ft=3):zb())),e.updateQueue!==null&&(e.flags|=4),dn(e),null);case 4:return nh(),Bw(n,e),n===null&&Jd(e.stateNode.containerInfo),dn(e),null;case 10:return Cb(e.type._context),dn(e),null;case 17:return qn(e.type)&&Av(),dn(e),null;case 19:if(nt(at),s=e.memoizedState,s===null)return dn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Yh(s,!1);else{if(Ft!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Pv(n),o!==null){for(e.flags|=128,Yh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Qe(at,at.current&1|2),e.child}n=n.sibling}s.tail!==null&&wt()>ih&&(e.flags|=128,r=!0,Yh(s,!1),e.lanes=4194304)}else{if(!r)if(n=Pv(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Yh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!rt)return dn(e),null}else 2*wt()-s.renderingStartTime>ih&&t!==1073741824&&(e.flags|=128,r=!0,Yh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,t=at.current,Qe(at,r?t&1|2:t&1),e):(dn(e),null);case 22:case 23:return $b(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dr&1073741824&&(dn(e),e.subtreeFlags&6&&(e.flags|=8192)):dn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function TV(n,e){switch(Ab(e),e.tag){case 1:return qn(e.type)&&Av(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return nh(),nt(Gn),nt(bn),kb(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Ib(e),null;case 13:if(nt(at),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));eh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return nt(at),null;case 4:return nh(),null;case 10:return Cb(e.type._context),null;case 22:case 23:return $b(),null;case 24:return null;default:return null}}var Xg=!1,_n=!1,CV=typeof WeakSet=="function"?WeakSet:Set,se=null;function jc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){gt(n,e,r)}else t.current=null}function Uw(n,e,t){try{t()}catch(r){gt(n,e,r)}}var tx=!1;function xV(n,e){if(Sw=yv,n=MP(),wb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;t:for(;;){for(var g;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Tw={focusedElem:n,selectionRange:t},yv=!1,se=e;se!==null;)if(e=se,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,se=n;else for(;se!==null;){e=se;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,w=m.memoizedState,_=e.stateNode,E=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:$r(e.type,v),w);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(P){gt(e,e.return,P)}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}return m=tx,tx=!1,m}function Ld(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Uw(e,t,s)}i=i.next}while(i!==r)}}function Vy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function $w(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function RI(n){var e=n.alternate;e!==null&&(n.alternate=null,RI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Li],delete e[ef],delete e[Rw],delete e[cV],delete e[uV])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function PI(n){return n.tag===5||n.tag===3||n.tag===4}function nx(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||PI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zw(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ev));else if(r!==4&&(n=n.child,n!==null))for(zw(n,e,t),n=n.sibling;n!==null;)zw(n,e,t),n=n.sibling}function Hw(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Hw(n,e,t),n=n.sibling;n!==null;)Hw(n,e,t),n=n.sibling}var nn=null,ri=!1;function to(n,e,t){for(t=t.child;t!==null;)II(n,e,t),t=t.sibling}function II(n,e,t){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(Iy,t)}catch{}switch(t.tag){case 5:_n||jc(t,e);case 6:var r=nn,i=ri;nn=null,to(n,e,t),nn=r,ri=i,nn!==null&&(ri?(n=nn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):nn.removeChild(t.stateNode));break;case 18:nn!==null&&(ri?(n=nn,t=t.stateNode,n.nodeType===8?g0(n.parentNode,t):n.nodeType===1&&g0(n,t),Xd(n)):g0(nn,t.stateNode));break;case 4:r=nn,i=ri,nn=t.stateNode.containerInfo,ri=!0,to(n,e,t),nn=r,ri=i;break;case 0:case 11:case 14:case 15:if(!_n&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Uw(t,e,o),i=i.next}while(i!==r)}to(n,e,t);break;case 1:if(!_n&&(jc(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){gt(t,e,a)}to(n,e,t);break;case 21:to(n,e,t);break;case 22:t.mode&1?(_n=(r=_n)||t.memoizedState!==null,to(n,e,t),_n=r):to(n,e,t);break;default:to(n,e,t)}}function rx(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new CV),e.forEach(function(r){var i=OV.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Br(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,ri=!1;break e;case 3:nn=a.stateNode.containerInfo,ri=!0;break e;case 4:nn=a.stateNode.containerInfo,ri=!0;break e}a=a.return}if(nn===null)throw Error(Y(160));II(s,o,i),nn=null,ri=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){gt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kI(e,n),e=e.sibling}function kI(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Br(e,n),fi(n),r&4){try{Ld(3,n,n.return),Vy(3,n)}catch(v){gt(n,n.return,v)}try{Ld(5,n,n.return)}catch(v){gt(n,n.return,v)}}break;case 1:Br(e,n),fi(n),r&512&&t!==null&&jc(t,t.return);break;case 5:if(Br(e,n),fi(n),r&512&&t!==null&&jc(t,t.return),n.flags&32){var i=n.stateNode;try{Wd(i,"")}catch(v){gt(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ZR(i,s),pw(a,o);var c=pw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?iP(i,f):u==="dangerouslySetInnerHTML"?nP(i,f):u==="children"?Wd(i,f):ab(i,u,f,c)}switch(a){case"input":cw(i,s);break;case"textarea":eP(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?$c(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?$c(i,!!s.multiple,s.defaultValue,!0):$c(i,!!s.multiple,s.multiple?[]:"",!1))}i[ef]=s}catch(v){gt(n,n.return,v)}}break;case 6:if(Br(e,n),fi(n),r&4){if(n.stateNode===null)throw Error(Y(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(v){gt(n,n.return,v)}}break;case 3:if(Br(e,n),fi(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Xd(e.containerInfo)}catch(v){gt(n,n.return,v)}break;case 4:Br(e,n),fi(n);break;case 13:Br(e,n),fi(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bb=wt())),r&4&&rx(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(_n=(c=_n)||u,Br(e,n),_n=c):Br(e,n),fi(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(se=n,u=n.child;u!==null;){for(f=se=u;se!==null;){switch(p=se,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ld(4,p,p.return);break;case 1:jc(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){gt(r,t,v)}}break;case 5:jc(p,p.return);break;case 22:if(p.memoizedState!==null){sx(f);continue}}g!==null?(g.return=p,se=g):sx(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=rP("display",o))}catch(v){gt(n,n.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){gt(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Br(e,n),fi(n),r&4&&rx(n);break;case 21:break;default:Br(e,n),fi(n)}}function fi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(PI(t)){var r=t;break e}t=t.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wd(i,""),r.flags&=-33);var s=nx(n);Hw(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nx(n);zw(n,a,o);break;default:throw Error(Y(161))}}catch(l){gt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function RV(n,e,t){se=n,MI(n)}function MI(n,e,t){for(var r=(n.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||_n;a=Xg;var c=_n;if(Xg=o,(_n=l)&&!c)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?ox(i):l!==null?(l.return=o,se=l):ox(i);for(;s!==null;)se=s,MI(s),s=s.sibling;se=i,Xg=a,_n=c}ix(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):ix(n)}}function ix(n){for(;se!==null;){var e=se;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_n||Vy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_n)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:$r(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$C(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}$C(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Xd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}_n||e.flags&512&&$w(e)}catch(p){gt(e,e.return,p)}}if(e===n){se=null;break}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}}function sx(n){for(;se!==null;){var e=se;if(e===n){se=null;break}var t=e.sibling;if(t!==null){t.return=e.return,se=t;break}se=e.return}}function ox(n){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Vy(4,e)}catch(l){gt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){gt(e,i,l)}}var s=e.return;try{$w(e)}catch(l){gt(e,s,l)}break;case 5:var o=e.return;try{$w(e)}catch(l){gt(e,o,l)}}}catch(l){gt(e,e.return,l)}if(e===n){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var PV=Math.ceil,Mv=Qs.ReactCurrentDispatcher,Vb=Qs.ReactCurrentOwner,Nr=Qs.ReactCurrentBatchConfig,Ne=0,Gt=null,Tt=null,sn=0,dr=0,Bc=da(0),Ft=0,af=null,Hl=0,jy=0,jb=0,Nd=null,$n=null,Bb=0,ih=1/0,rs=null,Lv=!1,Ww=null,Ho=null,Yg=!1,Do=null,Nv=0,Dd=0,Gw=null,Rm=-1,Pm=0;function Mn(){return Ne&6?wt():Rm!==-1?Rm:Rm=wt()}function Wo(n){return n.mode&1?Ne&2&&sn!==0?sn&-sn:dV.transition!==null?(Pm===0&&(Pm=mP()),Pm):(n=Ue,n!==0||(n=window.event,n=n===void 0?16:bP(n.type)),n):1}function ai(n,e,t,r){if(50<Dd)throw Dd=0,Gw=null,Error(Y(185));tg(n,t,r),(!(Ne&2)||n!==Gt)&&(n===Gt&&(!(Ne&2)&&(jy|=t),Ft===4&&uo(n,sn)),Kn(n,r),t===1&&Ne===0&&!(e.mode&1)&&(ih=wt()+500,Dy&&fa()))}function Kn(n,e){var t=n.callbackNode;d2(n,e);var r=vv(n,n===Gt?sn:0);if(r===0)t!==null&&gC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&gC(t),e===1)n.tag===0?hV(ax.bind(null,n)):$P(ax.bind(null,n)),aV(function(){!(Ne&6)&&fa()}),t=null;else{switch(vP(r)){case 1:t=db;break;case 4:t=pP;break;case 16:t=mv;break;case 536870912:t=gP;break;default:t=mv}t=BI(t,LI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function LI(n,e){if(Rm=-1,Pm=0,Ne&6)throw Error(Y(327));var t=n.callbackNode;if(qc()&&n.callbackNode!==t)return null;var r=vv(n,n===Gt?sn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Dv(n,r);else{e=r;var i=Ne;Ne|=2;var s=DI();(Gt!==n||sn!==e)&&(rs=null,ih=wt()+500,Dl(n,e));do try{MV();break}catch(a){NI(n,a)}while(!0);Tb(),Mv.current=s,Ne=i,Tt!==null?e=0:(Gt=null,sn=0,e=Ft)}if(e!==0){if(e===2&&(i=_w(n),i!==0&&(r=i,e=qw(n,i))),e===1)throw t=af,Dl(n,0),uo(n,r),Kn(n,wt()),t;if(e===6)uo(n,r);else{if(i=n.current.alternate,!(r&30)&&!IV(i)&&(e=Dv(n,r),e===2&&(s=_w(n),s!==0&&(r=s,e=qw(n,s))),e===1))throw t=af,Dl(n,0),uo(n,r),Kn(n,wt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:xa(n,$n,rs);break;case 3:if(uo(n,r),(r&130023424)===r&&(e=Bb+500-wt(),10<e)){if(vv(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Mn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=xw(xa.bind(null,n,$n,rs),e);break}xa(n,$n,rs);break;case 4:if(uo(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-oi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PV(r/1960))-r,10<r){n.timeoutHandle=xw(xa.bind(null,n,$n,rs),r);break}xa(n,$n,rs);break;case 5:xa(n,$n,rs);break;default:throw Error(Y(329))}}}return Kn(n,wt()),n.callbackNode===t?LI.bind(null,n):null}function qw(n,e){var t=Nd;return n.current.memoizedState.isDehydrated&&(Dl(n,e).flags|=256),n=Dv(n,e),n!==2&&(e=$n,$n=t,e!==null&&Kw(e)),n}function Kw(n){$n===null?$n=n:$n.push.apply($n,n)}function IV(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!ci(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function uo(n,e){for(e&=~jb,e&=~jy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-oi(e),r=1<<t;n[t]=-1,e&=~r}}function ax(n){if(Ne&6)throw Error(Y(327));qc();var e=vv(n,0);if(!(e&1))return Kn(n,wt()),null;var t=Dv(n,e);if(n.tag!==0&&t===2){var r=_w(n);r!==0&&(e=r,t=qw(n,r))}if(t===1)throw t=af,Dl(n,0),uo(n,e),Kn(n,wt()),t;if(t===6)throw Error(Y(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,xa(n,$n,rs),Kn(n,wt()),null}function Ub(n,e){var t=Ne;Ne|=1;try{return n(e)}finally{Ne=t,Ne===0&&(ih=wt()+500,Dy&&fa())}}function Wl(n){Do!==null&&Do.tag===0&&!(Ne&6)&&qc();var e=Ne;Ne|=1;var t=Nr.transition,r=Ue;try{if(Nr.transition=null,Ue=1,n)return n()}finally{Ue=r,Nr.transition=t,Ne=e,!(Ne&6)&&fa()}}function $b(){dr=Bc.current,nt(Bc)}function Dl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,oV(t)),Tt!==null)for(t=Tt.return;t!==null;){var r=t;switch(Ab(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Av();break;case 3:nh(),nt(Gn),nt(bn),kb();break;case 5:Ib(r);break;case 4:nh();break;case 13:nt(at);break;case 19:nt(at);break;case 10:Cb(r.type._context);break;case 22:case 23:$b()}t=t.return}if(Gt=n,Tt=n=Go(n.current,null),sn=dr=e,Ft=0,af=null,jb=jy=Hl=0,$n=Nd=null,Oa!==null){for(e=0;e<Oa.length;e++)if(t=Oa[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Oa=null}return n}function NI(n,e){do{var t=Tt;try{if(Tb(),Tm.current=kv,Iv){for(var r=lt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Iv=!1}if(zl=0,Wt=Nt=lt=null,Md=!1,rf=0,Vb.current=null,t===null||t.return===null){Ft=1,af=e,Tt=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=KC(o);if(g!==null){g.flags&=-257,XC(g,o,a,s,e),g.mode&1&&qC(s,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){qC(s,c,e),zb();break e}l=Error(Y(426))}}else if(rt&&a.mode&1){var w=KC(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),XC(w,o,a,s,e),bb(rh(l,a));break e}}s=l=rh(l,a),Ft!==4&&(Ft=2),Nd===null?Nd=[s]:Nd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=vI(s,l,e);UC(s,_);break e;case 1:a=l;var E=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ho===null||!Ho.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=yI(s,a,e);UC(s,P);break e}}s=s.return}while(s!==null)}FI(t)}catch(O){e=O,Tt===t&&t!==null&&(Tt=t=t.return);continue}break}while(!0)}function DI(){var n=Mv.current;return Mv.current=kv,n===null?kv:n}function zb(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Gt===null||!(Hl&268435455)&&!(jy&268435455)||uo(Gt,sn)}function Dv(n,e){var t=Ne;Ne|=2;var r=DI();(Gt!==n||sn!==e)&&(rs=null,Dl(n,e));do try{kV();break}catch(i){NI(n,i)}while(!0);if(Tb(),Ne=t,Mv.current=r,Tt!==null)throw Error(Y(261));return Gt=null,sn=0,Ft}function kV(){for(;Tt!==null;)OI(Tt)}function MV(){for(;Tt!==null&&!r2();)OI(Tt)}function OI(n){var e=jI(n.alternate,n,dr);n.memoizedProps=n.pendingProps,e===null?FI(n):Tt=e,Vb.current=null}function FI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=TV(t,e),t!==null){t.flags&=32767,Tt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ft=6,Tt=null;return}}else if(t=SV(t,e,dr),t!==null){Tt=t;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=n}while(e!==null);Ft===0&&(Ft=5)}function xa(n,e,t){var r=Ue,i=Nr.transition;try{Nr.transition=null,Ue=1,LV(n,e,t,r)}finally{Nr.transition=i,Ue=r}return null}function LV(n,e,t,r){do qc();while(Do!==null);if(Ne&6)throw Error(Y(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Y(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(f2(n,s),n===Gt&&(Tt=Gt=null,sn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Yg||(Yg=!0,BI(mv,function(){return qc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Nr.transition,Nr.transition=null;var o=Ue;Ue=1;var a=Ne;Ne|=4,Vb.current=null,xV(n,t),kI(t,n),Z2(Tw),yv=!!Sw,Tw=Sw=null,n.current=t,RV(t),i2(),Ne=a,Ue=o,Nr.transition=s}else n.current=t;if(Yg&&(Yg=!1,Do=n,Nv=i),s=n.pendingLanes,s===0&&(Ho=null),a2(t.stateNode),Kn(n,wt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Lv)throw Lv=!1,n=Ww,Ww=null,n;return Nv&1&&n.tag!==0&&qc(),s=n.pendingLanes,s&1?n===Gw?Dd++:(Dd=0,Gw=n):Dd=0,fa(),null}function qc(){if(Do!==null){var n=vP(Nv),e=Nr.transition,t=Ue;try{if(Nr.transition=null,Ue=16>n?16:n,Do===null)var r=!1;else{if(n=Do,Do=null,Nv=0,Ne&6)throw Error(Y(331));var i=Ne;for(Ne|=4,se=n.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:Ld(8,u,s)}var f=u.child;if(f!==null)f.return=u,se=f;else for(;se!==null;){u=se;var p=u.sibling,g=u.return;if(RI(u),u===c){se=null;break}if(p!==null){p.return=g,se=p;break}se=g}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ld(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,se=_;break e}se=s.return}}var E=n.current;for(se=E;se!==null;){o=se;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,se=S;else e:for(o=E;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vy(9,a)}}catch(O){gt(a,a.return,O)}if(a===o){se=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,se=P;break e}se=a.return}}if(Ne=i,fa(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(Iy,n)}catch{}r=!0}return r}finally{Ue=t,Nr.transition=e}}return!1}function lx(n,e,t){e=rh(t,e),e=vI(n,e,1),n=zo(n,e,1),e=Mn(),n!==null&&(tg(n,1,e),Kn(n,e))}function gt(n,e,t){if(n.tag===3)lx(n,n,t);else for(;e!==null;){if(e.tag===3){lx(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ho===null||!Ho.has(r))){n=rh(t,n),n=yI(e,n,1),e=zo(e,n,1),n=Mn(),e!==null&&(tg(e,1,n),Kn(e,n));break}}e=e.return}}function NV(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Mn(),n.pingedLanes|=n.suspendedLanes&t,Gt===n&&(sn&t)===t&&(Ft===4||Ft===3&&(sn&130023424)===sn&&500>wt()-Bb?Dl(n,0):jb|=t),Kn(n,e)}function VI(n,e){e===0&&(n.mode&1?(e=Bg,Bg<<=1,!(Bg&130023424)&&(Bg=4194304)):e=1);var t=Mn();n=zs(n,e),n!==null&&(tg(n,e,t),Kn(n,t))}function DV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),VI(n,t)}function OV(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),VI(n,t)}var jI;jI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Gn.current)zn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return zn=!1,bV(n,e,t);zn=!!(n.flags&131072)}else zn=!1,rt&&e.flags&1048576&&zP(e,Tv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xm(n,e),n=e.pendingProps;var i=Zu(e,bn.current);Gc(e,t),i=Lb(null,e,r,n,i,t);var s=Nb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qn(r)?(s=!0,bv(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rb(e),i.updater=Fy,e.stateNode=i,i._reactInternals=e,Nw(e,r,n,t),e=Fw(null,e,r,!0,s,t)):(e.tag=0,rt&&s&&Eb(e),Rn(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(xm(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=VV(r),n=$r(r,n),i){case 0:e=Ow(null,e,r,n,t);break e;case 1:e=JC(null,e,r,n,t);break e;case 11:e=YC(null,e,r,n,t);break e;case 14:e=QC(null,e,r,$r(r.type,n),t);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),Ow(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),JC(n,e,r,i,t);case 3:e:{if(AI(e),n===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,XP(n,e),Rv(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=rh(Error(Y(423)),e),e=ZC(n,e,r,t,i);break e}else if(r!==i){i=rh(Error(Y(424)),e),e=ZC(n,e,r,t,i);break e}else for(mr=$o(e.stateNode.containerInfo.firstChild),vr=e,rt=!0,ii=null,t=qP(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(eh(),r===i){e=Hs(n,e,t);break e}Rn(n,e,r,t)}e=e.child}return e;case 5:return YP(e),n===null&&kw(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Cw(r,i)?o=null:s!==null&&Cw(r,s)&&(e.flags|=32),EI(n,e),Rn(n,e,o,t),e.child;case 6:return n===null&&kw(e),null;case 13:return bI(n,e,t);case 4:return Pb(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=th(e,null,r,t):Rn(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),YC(n,e,r,i,t);case 7:return Rn(n,e,e.pendingProps,t),e.child;case 8:return Rn(n,e,e.pendingProps.children,t),e.child;case 12:return Rn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Qe(Cv,r._currentValue),r._currentValue=o,s!==null)if(ci(s.value,o)){if(s.children===i.children&&!Gn.current){e=Hs(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ds(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Mw(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Mw(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rn(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gc(e,t),i=Or(i),r=r(i),e.flags|=1,Rn(n,e,r,t),e.child;case 14:return r=e.type,i=$r(r,e.pendingProps),i=$r(r.type,i),QC(n,e,r,i,t);case 15:return _I(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),xm(n,e),e.tag=1,qn(r)?(n=!0,bv(e)):n=!1,Gc(e,t),mI(e,r,i),Nw(e,r,i,t),Fw(null,e,r,!0,n,t);case 19:return SI(n,e,t);case 22:return wI(n,e,t)}throw Error(Y(156,e.tag))};function BI(n,e){return fP(n,e)}function FV(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(n,e,t,r){return new FV(n,e,t,r)}function Hb(n){return n=n.prototype,!(!n||!n.isReactComponent)}function VV(n){if(typeof n=="function")return Hb(n)?1:0;if(n!=null){if(n=n.$$typeof,n===cb)return 11;if(n===ub)return 14}return 2}function Go(n,e){var t=n.alternate;return t===null?(t=Lr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Im(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Hb(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ic:return Ol(t.children,i,s,e);case lb:o=8,i|=8;break;case iw:return n=Lr(12,t,e,i|2),n.elementType=iw,n.lanes=s,n;case sw:return n=Lr(13,t,e,i),n.elementType=sw,n.lanes=s,n;case ow:return n=Lr(19,t,e,i),n.elementType=ow,n.lanes=s,n;case YR:return By(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case KR:o=10;break e;case XR:o=9;break e;case cb:o=11;break e;case ub:o=14;break e;case ao:o=16,r=null;break e}throw Error(Y(130,n==null?n:typeof n,""))}return e=Lr(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ol(n,e,t,r){return n=Lr(7,n,r,e),n.lanes=t,n}function By(n,e,t,r){return n=Lr(22,n,r,e),n.elementType=YR,n.lanes=t,n.stateNode={isHidden:!1},n}function b0(n,e,t){return n=Lr(6,n,null,e),n.lanes=t,n}function S0(n,e,t){return e=Lr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function jV(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i0(0),this.expirationTimes=i0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wb(n,e,t,r,i,s,o,a,l){return n=new jV(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Lr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rb(s),n}function BV(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pc,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function UI(n){if(!n)return Jo;n=n._reactInternals;e:{if(tc(n)!==n||n.tag!==1)throw Error(Y(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(n.tag===1){var t=n.type;if(qn(t))return UP(n,t,e)}return e}function $I(n,e,t,r,i,s,o,a,l){return n=Wb(t,r,!0,n,i,s,o,a,l),n.context=UI(null),t=n.current,r=Mn(),i=Wo(t),s=Ds(r,i),s.callback=e??null,zo(t,s,i),n.current.lanes=i,tg(n,i,r),Kn(n,r),n}function Uy(n,e,t,r){var i=e.current,s=Mn(),o=Wo(i);return t=UI(t),e.context===null?e.context=t:e.pendingContext=t,e=Ds(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=zo(i,e,o),n!==null&&(ai(n,i,o,s),Sm(n,i,o)),o}function Ov(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function cx(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Gb(n,e){cx(n,e),(n=n.alternate)&&cx(n,e)}function UV(){return null}var zI=typeof reportError=="function"?reportError:function(n){console.error(n)};function qb(n){this._internalRoot=n}$y.prototype.render=qb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Y(409));Uy(n,e,null,null)};$y.prototype.unmount=qb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Wl(function(){Uy(null,n,null,null)}),e[$s]=null}};function $y(n){this._internalRoot=n}$y.prototype.unstable_scheduleHydration=function(n){if(n){var e=wP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<co.length&&e!==0&&e<co[t].priority;t++);co.splice(t,0,n),t===0&&AP(n)}};function Kb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ux(){}function $V(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ov(o);s.call(c)}}var o=$I(e,r,n,0,null,!1,!1,"",ux);return n._reactRootContainer=o,n[$s]=o.current,Jd(n.nodeType===8?n.parentNode:n),Wl(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ov(l);a.call(c)}}var l=Wb(n,0,!1,null,null,!1,!1,"",ux);return n._reactRootContainer=l,n[$s]=l.current,Jd(n.nodeType===8?n.parentNode:n),Wl(function(){Uy(e,l,t,r)}),l}function Hy(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ov(o);a.call(l)}}Uy(e,o,n,i)}else o=$V(t,e,n,i,r);return Ov(o)}yP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=od(e.pendingLanes);t!==0&&(fb(e,t|1),Kn(e,wt()),!(Ne&6)&&(ih=wt()+500,fa()))}break;case 13:Wl(function(){var r=zs(n,1);if(r!==null){var i=Mn();ai(r,n,1,i)}}),Gb(n,1)}};pb=function(n){if(n.tag===13){var e=zs(n,134217728);if(e!==null){var t=Mn();ai(e,n,134217728,t)}Gb(n,134217728)}};_P=function(n){if(n.tag===13){var e=Wo(n),t=zs(n,e);if(t!==null){var r=Mn();ai(t,n,e,r)}Gb(n,e)}};wP=function(){return Ue};EP=function(n,e){var t=Ue;try{return Ue=n,e()}finally{Ue=t}};mw=function(n,e,t){switch(e){case"input":if(cw(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Ny(r);if(!i)throw Error(Y(90));JR(r),cw(r,i)}}}break;case"textarea":eP(n,t);break;case"select":e=t.value,e!=null&&$c(n,!!t.multiple,e,!1)}};aP=Ub;lP=Wl;var zV={usingClientEntryPoint:!1,Events:[rg,Nc,Ny,sP,oP,Ub]},Qh={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HV={bundleType:Qh.bundleType,version:Qh.version,rendererPackageName:Qh.rendererPackageName,rendererConfig:Qh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=hP(n),n===null?null:n.stateNode},findFiberByHostInstance:Qh.findFiberByHostInstance||UV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qg.isDisabled&&Qg.supportsFiber)try{Iy=Qg.inject(HV),Oi=Qg}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zV;wr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kb(e))throw Error(Y(200));return BV(n,e,null,t)};wr.createRoot=function(n,e){if(!Kb(n))throw Error(Y(299));var t=!1,r="",i=zI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wb(n,1,!1,null,null,t,!1,r,i),n[$s]=e.current,Jd(n.nodeType===8?n.parentNode:n),new qb(e)};wr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Y(188)):(n=Object.keys(n).join(","),Error(Y(268,n)));return n=hP(e),n=n===null?null:n.stateNode,n};wr.flushSync=function(n){return Wl(n)};wr.hydrate=function(n,e,t){if(!zy(e))throw Error(Y(200));return Hy(null,n,e,!0,t)};wr.hydrateRoot=function(n,e,t){if(!Kb(n))throw Error(Y(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=zI;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=$I(e,null,n,1,t??null,i,!1,s,o),n[$s]=e.current,Jd(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new $y(e)};wr.render=function(n,e,t){if(!zy(e))throw Error(Y(200));return Hy(null,n,e,!1,t)};wr.unmountComponentAtNode=function(n){if(!zy(n))throw Error(Y(40));return n._reactRootContainer?(Wl(function(){Hy(null,null,n,!1,function(){n._reactRootContainer=null,n[$s]=null})}),!0):!1};wr.unstable_batchedUpdates=Ub;wr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!zy(t))throw Error(Y(200));if(n==null||n._reactInternals===void 0)throw Error(Y(38));return Hy(n,e,t,!1,r)};wr.version="18.3.1-next-f1338f8080-20240426";function HI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HI)}catch(n){console.error(n)}}HI(),HR.exports=wr;var Wy=HR.exports,WI,hx=Wy;WI=hx.createRoot,hx.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lf(){return lf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lf.apply(this,arguments)}var Oo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Oo||(Oo={}));const dx="popstate";function WV(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Xw("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:qI(i)}return qV(e,t,null,n)}function Vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function GI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GV(){return Math.random().toString(36).substr(2,8)}function fx(n,e){return{usr:n.state,key:n.key,idx:e}}function Xw(n,e,t,r){return t===void 0&&(t=null),lf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?yh(e):e,{state:t,key:e&&e.key||r||GV()})}function qI(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function qV(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Oo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(lf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Oo.Pop;let w=u(),_=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:_})}function p(w,_){a=Oo.Push;let E=Xw(v.location,w,_);c=u()+1;let S=fx(E,c),P=v.createHref(E);try{o.pushState(S,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(P)}s&&l&&l({action:a,location:v.location,delta:1})}function g(w,_){a=Oo.Replace;let E=Xw(v.location,w,_);c=u();let S=fx(E,c),P=v.createHref(E);o.replaceState(S,"",P),s&&l&&l({action:a,location:v.location,delta:0})}function m(w){let _=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof w=="string"?w:qI(w);return E=E.replace(/ $/,"%20"),Vt(_,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,_)}let v={get action(){return a},get location(){return n(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(dx,f),l=w,()=>{i.removeEventListener(dx,f),l=null}},createHref(w){return e(i,w)},createURL:m,encodeLocation(w){let _=m(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:g,go(w){return o.go(w)}};return v}var px;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(px||(px={}));function KV(n,e,t){return t===void 0&&(t="/"),XV(n,e,t,!1)}function XV(n,e,t,r){let i=typeof e=="string"?yh(e):e,s=YI(i.pathname||"/",t);if(s==null)return null;let o=KI(n);YV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=aj(s);a=sj(o[l],c,r)}return a}function KI(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Vt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Fl([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(Vt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),KI(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:rj(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of XI(s.path))i(s,o,l)}),e}function XI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=XI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function YV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ij(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const QV=/^:[\w-]+$/,JV=3,ZV=2,ej=1,tj=10,nj=-2,gx=n=>n==="*";function rj(n,e){let t=n.split("/"),r=t.length;return t.some(gx)&&(r+=nj),e&&(r+=ZV),t.filter(i=>!gx(i)).reduce((i,s)=>i+(QV.test(s)?JV:s===""?ej:tj),r)}function ij(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function sj(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=mx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f&&c&&t&&!r[r.length-1].route.index&&(f=mx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Fl([s,f.pathname]),pathnameBase:fj(Fl([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Fl([s,f.pathnameBase]))}return o}function mx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=oj(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:g}=u;if(p==="*"){let v=a[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const m=a[f];return g&&!m?c[p]=void 0:c[p]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function oj(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),GI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function aj(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function YI(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function lj(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?yh(n):n;return{pathname:t?t.startsWith("/")?t:cj(t,e):e,search:pj(r),hash:gj(i)}}function cj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function T0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hj(n,e){let t=uj(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function dj(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=yh(n):(i=lf({},n),Vt(!i.pathname||!i.pathname.includes("?"),T0("?","pathname","search",i)),Vt(!i.pathname||!i.pathname.includes("#"),T0("#","pathname","hash",i)),Vt(!i.search||!i.search.includes("#"),T0("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=lj(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Fl=n=>n.join("/").replace(/\/\/+/g,"/"),fj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function mj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const QI=["post","put","patch","delete"];new Set(QI);const vj=["get",...QI];new Set(vj);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cf(){return cf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cf.apply(this,arguments)}const Xb=A.createContext(null),yj=A.createContext(null),Gy=A.createContext(null),qy=A.createContext(null),_h=A.createContext({outlet:null,matches:[],isDataRoute:!1}),JI=A.createContext(null);function Ky(){return A.useContext(qy)!=null}function Xy(){return Ky()||Vt(!1),A.useContext(qy).location}function ZI(n){A.useContext(Gy).static||A.useLayoutEffect(n)}function _j(){let{isDataRoute:n}=A.useContext(_h);return n?Mj():wj()}function wj(){Ky()||Vt(!1);let n=A.useContext(Xb),{basename:e,future:t,navigator:r}=A.useContext(Gy),{matches:i}=A.useContext(_h),{pathname:s}=Xy(),o=JSON.stringify(hj(i,t.v7_relativeSplatPath)),a=A.useRef(!1);return ZI(()=>{a.current=!0}),A.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=dj(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Fl([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,s,n])}function Ej(n,e){return Aj(n,e)}function Aj(n,e,t,r){Ky()||Vt(!1);let{navigator:i}=A.useContext(Gy),{matches:s}=A.useContext(_h),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Xy(),u;if(e){var f;let w=typeof e=="string"?yh(e):e;l==="/"||(f=w.pathname)!=null&&f.startsWith(l)||Vt(!1),u=w}else u=c;let p=u.pathname||"/",g=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=KV(n,{pathname:g}),v=xj(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Fl([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Fl([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,t,r);return e&&v?A.createElement(qy.Provider,{value:{location:cf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Oo.Pop}},v):v}function bj(){let n=kj(),e=mj(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:i},t):null,null)}const Sj=A.createElement(bj,null);class Tj extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(_h.Provider,{value:this.props.routeContext},A.createElement(JI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Cj(n){let{routeContext:e,match:t,children:r}=n,i=A.useContext(Xb);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(_h.Provider,{value:e},r)}function xj(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Vt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:g}=t,m=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let g,m=!1,v=null,w=null;t&&(g=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||Sj,l&&(c<0&&p===0?(m=!0,w=null):c===p&&(m=!0,w=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),E=()=>{let S;return g?S=v:m?S=w:f.route.Component?S=A.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,A.createElement(Cj,{match:f,routeContext:{outlet:u,matches:_,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?A.createElement(Tj,{location:t.location,revalidation:t.revalidation,component:v,error:g,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):E()},null)}var ek=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(ek||{}),Fv=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Fv||{});function Rj(n){let e=A.useContext(Xb);return e||Vt(!1),e}function Pj(n){let e=A.useContext(yj);return e||Vt(!1),e}function Ij(n){let e=A.useContext(_h);return e||Vt(!1),e}function tk(n){let e=Ij(),t=e.matches[e.matches.length-1];return t.route.id||Vt(!1),t.route.id}function kj(){var n;let e=A.useContext(JI),t=Pj(Fv.UseRouteError),r=tk(Fv.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Mj(){let{router:n}=Rj(ek.UseNavigateStable),e=tk(Fv.UseNavigateStable),t=A.useRef(!1);return ZI(()=>{t.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,cf({fromRouteId:e},s)))},[n,e])}function Ra(n){Vt(!1)}function Lj(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Oo.Pop,navigator:s,static:o=!1,future:a}=n;Ky()&&Vt(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:s,static:o,future:cf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=yh(r));let{pathname:u="/",search:f="",hash:p="",state:g=null,key:m="default"}=r,v=A.useMemo(()=>{let w=YI(u,l);return w==null?null:{location:{pathname:w,search:f,hash:p,state:g,key:m},navigationType:i}},[l,u,f,p,g,m,i]);return v==null?null:A.createElement(Gy.Provider,{value:c},A.createElement(qy.Provider,{children:t,value:v}))}function Nj(n){let{children:e,location:t}=n;return Ej(Yw(e),t)}new Promise(()=>{});function Yw(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,i)=>{if(!A.isValidElement(r))return;let s=[...e,i];if(r.type===A.Fragment){t.push.apply(t,Yw(r.props.children,s));return}r.type!==Ra&&Vt(!1),!r.props.index||!r.props.children||Vt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yw(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Dj="6";try{window.__reactRouterVersion=Dj}catch{}const Oj="startTransition",vx=$R[Oj];function Fj(n){let{basename:e,children:t,future:r,window:i}=n,s=A.useRef();s.current==null&&(s.current=WV({window:i,v5Compat:!0}));let o=s.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=A.useCallback(f=>{c&&vx?vx(()=>l(f)):l(f)},[l,c]);return A.useLayoutEffect(()=>o.listen(u),[o,u]),A.createElement(Lj,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var yx;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(yx||(yx={}));var _x;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(_x||(_x={}));function Vj(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Yb(...n){return e=>n.forEach(t=>Vj(t,e))}function xt(...n){return A.useCallback(Yb(...n),n)}var Vr=A.forwardRef((n,e)=>{const{children:t,...r}=n,i=A.Children.toArray(t),s=i.find(jj);if(s){const o=s.props.children,a=i.map(l=>l===s?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:l);return k.jsx(Qw,{...r,ref:e,children:A.isValidElement(o)?A.cloneElement(o,void 0,a):null})}return k.jsx(Qw,{...r,ref:e,children:t})});Vr.displayName="Slot";var Qw=A.forwardRef((n,e)=>{const{children:t,...r}=n;if(A.isValidElement(t)){const i=Uj(t);return A.cloneElement(t,{...Bj(r,t.props),ref:e?Yb(e,i):i})}return A.Children.count(t)>1?A.Children.only(null):null});Qw.displayName="SlotClone";var nk=({children:n})=>k.jsx(k.Fragment,{children:n});function jj(n){return A.isValidElement(n)&&n.type===nk}function Bj(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function Uj(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var $j=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vt=$j.reduce((n,e)=>{const t=A.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Vr:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),k.jsx(a,{...o,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Qb(n,e){n&&Wy.flushSync(()=>n.dispatchEvent(e))}var zj="VisuallyHidden",Jb=A.forwardRef((n,e)=>k.jsx(vt.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Jb.displayName=zj;var Hj=Jb,rk={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(rk);var Wj=rk.exports;const kn=Zp(Wj);function sg(n,e=[]){let t=[];function r(s,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:p,children:g,...m}=f,v=(p==null?void 0:p[n][l])||a,w=A.useMemo(()=>m,Object.values(m));return k.jsx(v.Provider,{value:w,children:g})}function u(f,p){const g=(p==null?void 0:p[n][l])||a,m=A.useContext(g);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,Gj(i,...e)]}function Gj(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function he(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}var Ui=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},qj=$R.useId||(()=>{}),Kj=0;function km(n){const[e,t]=A.useState(qj());return Ui(()=>{t(r=>r??String(Kj++))},[n]),e?`radix-${e}`:""}function Qn(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function ik({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=Xj({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Qn(t),l=A.useCallback(c=>{if(s){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else i(c)},[s,n,i,a]);return[o,l]}function Xj({defaultProp:n,onChange:e}){const t=A.useState(n),[r]=t,i=A.useRef(r),s=Qn(e);return A.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}function sk(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Yj="DismissableLayer",Jw="dismissableLayer.update",Qj="dismissableLayer.pointerDownOutside",Jj="dismissableLayer.focusOutside",wx,ok=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ak=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(ok),[u,f]=A.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=A.useState({}),m=xt(e,C=>f(C)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(w),E=u?v.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,P=E>=_,O=tB(C=>{const T=C.target,x=[...c.branches].some(L=>L.contains(T));!P||x||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),j=nB(C=>{const T=C.target;[...c.branches].some(L=>L.contains(T))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return sk(C=>{E===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(wx=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Ex(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=wx)}},[u,p,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Ex())},[u,c]),A.useEffect(()=>{const C=()=>g({});return document.addEventListener(Jw,C),()=>document.removeEventListener(Jw,C)},[]),k.jsx(vt.div,{...l,ref:m,style:{pointerEvents:S?P?"auto":"none":void 0,...n.style},onFocusCapture:he(n.onFocusCapture,j.onFocusCapture),onBlurCapture:he(n.onBlurCapture,j.onBlurCapture),onPointerDownCapture:he(n.onPointerDownCapture,O.onPointerDownCapture)})});ak.displayName=Yj;var Zj="DismissableLayerBranch",eB=A.forwardRef((n,e)=>{const t=A.useContext(ok),r=A.useRef(null),i=xt(e,r);return A.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),k.jsx(vt.div,{...n,ref:i})});eB.displayName=Zj;function tB(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){lk(Qj,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function nB(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1);return A.useEffect(()=>{const i=s=>{s.target&&!r.current&&lk(Jj,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ex(){const n=new CustomEvent(Jw);document.dispatchEvent(n)}function lk(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Qb(i,s):i.dispatchEvent(s)}var C0="focusScope.autoFocusOnMount",x0="focusScope.autoFocusOnUnmount",Ax={bubbles:!1,cancelable:!0},rB="FocusScope",ck=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=A.useState(null),c=Qn(i),u=Qn(s),f=A.useRef(null),p=xt(e,v=>l(v)),g=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let v=function(S){if(g.paused||!a)return;const P=S.target;a.contains(P)?f.current=P:ro(f.current,{select:!0})},w=function(S){if(g.paused||!a)return;const P=S.relatedTarget;P!==null&&(a.contains(P)||ro(f.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const O of S)O.removedNodes.length>0&&ro(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const E=new MutationObserver(_);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),E.disconnect()}}},[r,a,g.paused]),A.useEffect(()=>{if(a){Sx.add(g);const v=document.activeElement;if(!a.contains(v)){const _=new CustomEvent(C0,Ax);a.addEventListener(C0,c),a.dispatchEvent(_),_.defaultPrevented||(iB(cB(uk(a)),{select:!0}),document.activeElement===v&&ro(a))}return()=>{a.removeEventListener(C0,c),setTimeout(()=>{const _=new CustomEvent(x0,Ax);a.addEventListener(x0,u),a.dispatchEvent(_),_.defaultPrevented||ro(v??document.body,{select:!0}),a.removeEventListener(x0,u),Sx.remove(g)},0)}}},[a,c,u,g]);const m=A.useCallback(v=>{if(!t&&!r||g.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(w&&_){const E=v.currentTarget,[S,P]=sB(E);S&&P?!v.shiftKey&&_===P?(v.preventDefault(),t&&ro(S,{select:!0})):v.shiftKey&&_===S&&(v.preventDefault(),t&&ro(P,{select:!0})):_===E&&v.preventDefault()}},[t,r,g.paused]);return k.jsx(vt.div,{tabIndex:-1,...o,ref:p,onKeyDown:m})});ck.displayName=rB;function iB(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ro(r,{select:e}),document.activeElement!==t)return}function sB(n){const e=uk(n),t=bx(e,n),r=bx(e.reverse(),n);return[t,r]}function uk(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function bx(n,e){for(const t of n)if(!oB(t,{upTo:e}))return t}function oB(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function aB(n){return n instanceof HTMLInputElement&&"select"in n}function ro(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&aB(n)&&e&&n.select()}}var Sx=lB();function lB(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Tx(n,e),n.unshift(e)},remove(e){var t;n=Tx(n,e),(t=n[0])==null||t.resume()}}}function Tx(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function cB(n){return n.filter(e=>e.tagName!=="A")}function uB(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var hk=n=>{const{present:e,children:t}=n,r=hB(e),i=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),s=xt(r.ref,dB(i));return typeof t=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};hk.displayName="Presence";function hB(n){const[e,t]=A.useState(),r=A.useRef({}),i=A.useRef(n),s=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=uB(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=Jg(r.current);s.current=a==="mounted"?c:"none"},[a]),Ui(()=>{const c=r.current,u=i.current;if(u!==n){const p=s.current,g=Jg(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Ui(()=>{if(e){const c=f=>{const g=Jg(r.current).includes(f.animationName);f.target===e&&g&&Wy.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=Jg(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function Jg(n){return(n==null?void 0:n.animationName)||"none"}function dB(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ni=function(){return Ni=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ni.apply(this,arguments)};function dk(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function fB(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function R0(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function pB(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var gB=typeof window<"u"?A.useLayoutEffect:A.useEffect,Cx=new WeakMap;function mB(n,e){var t=pB(null,function(r){return n.forEach(function(i){return R0(i,r)})});return gB(function(){var r=Cx.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(a){s.has(a)||R0(a,null)}),s.forEach(function(a){i.has(a)||R0(a,o)})}Cx.set(t,n)},[n]),t}function vB(n){return n}function yB(n,e){e===void 0&&(e=vB);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return i}function _B(n){n===void 0&&(n={});var e=yB(null);return e.options=Ni({async:!0,ssr:!1},n),e}var fk=function(n){var e=n.sideCar,t=dk(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,Ni({},t))};fk.isSideCarExport=!0;function wB(n,e){return n.useMedium(e),fk}var EB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AB(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=EB();return e&&n.setAttribute("nonce",e),n}function bB(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function SB(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var TB=function(){var n=0,e=null;return{add:function(t){n==0&&(e=AB())&&(bB(e,t),SB(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},CB=function(){var n=TB();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},pk=function(){var n=CB(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},xB=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},gc=new WeakMap,Zg=new WeakMap,em={},P0=0,gk=function(n){return n&&(n.host||gk(n.parentNode))},RB=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=gk(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},PB=function(n,e,t,r){var i=RB(e,Array.isArray(n)?n:[n]);em[t]||(em[t]=new WeakMap);var s=em[t],o=[],a=new Set,l=new Set(i),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};i.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var g=p.getAttribute(r),m=g!==null&&g!=="false",v=(gc.get(p)||0)+1,w=(s.get(p)||0)+1;gc.set(p,v),s.set(p,w),o.push(p),v===1&&m&&Zg.set(p,!0),w===1&&p.setAttribute(t,"true"),m||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return u(e),a.clear(),P0++,function(){o.forEach(function(f){var p=gc.get(f)-1,g=s.get(f)-1;gc.set(f,p),s.set(f,g),p||(Zg.has(f)||f.removeAttribute(r),Zg.delete(f)),g||f.removeAttribute(t)}),P0--,P0||(gc=new WeakMap,gc=new WeakMap,Zg=new WeakMap,em={})}},IB=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=xB(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),PB(r,i,t,"aria-hidden")):function(){return null}};const nc={asChild:{type:"boolean"}},kB={width:{type:"string",className:"rt-r-w",customProperties:["--width"],responsive:!0},minWidth:{type:"string",className:"rt-r-min-w",customProperties:["--min-width"],responsive:!0},maxWidth:{type:"string",className:"rt-r-max-w",customProperties:["--max-width"],responsive:!0}},MB={height:{type:"string",className:"rt-r-h",customProperties:["--height"],responsive:!0},minHeight:{type:"string",className:"rt-r-min-h",customProperties:["--min-height"],responsive:!0},maxHeight:{type:"string",className:"rt-r-max-h",customProperties:["--max-height"],responsive:!0}},Zb=["gray","gold","bronze","brown","yellow","amber","orange","tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","lime","mint","sky"],LB=["auto","gray","mauve","slate","sage","olive","sand"],mk={color:{type:"enum",values:Zb,default:void 0}},vk={color:{type:"enum",values:Zb,default:""}},eS={highContrast:{type:"boolean",className:"rt-high-contrast",default:void 0}},NB=["normal","start","end","both"],yk={trim:{type:"enum",className:"rt-r-lt",values:NB,responsive:!0}},DB=["left","center","right"],OB={align:{type:"enum",className:"rt-r-ta",values:DB,responsive:!0}},FB=["wrap","nowrap","pretty","balance"],tS={wrap:{type:"enum",className:"rt-r-tw",values:FB,responsive:!0}},nS={truncate:{type:"boolean",className:"rt-truncate"}},VB=["light","regular","medium","bold"],_k={weight:{type:"enum",className:"rt-r-weight",values:VB,responsive:!0}},rS=["initial","xs","sm","md","lg","xl"];function wk(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Od(n){return typeof n=="object"&&Object.keys(n).some(e=>rS.includes(e))}function jB({className:n,customProperties:e,...t}){const r=Ek({allowArbitraryValues:!0,className:n,...t}),i=BB({customProperties:e,...t});return[r,i]}function Ek({allowArbitraryValues:n,value:e,className:t,propValues:r,parseValue:i=s=>s}){const s=[];if(e){if(typeof e=="string"&&r.includes(e))return xx(t,e,i);if(Od(e)){const o=e;for(const a in o){if(!wk(o,a)||!rS.includes(a))continue;const l=o[a];if(l!==void 0){if(r.includes(l)){const c=xx(t,l,i),u=a==="initial"?c:`${a}:${c}`;s.push(u)}else if(n){const c=a==="initial"?t:`${a}:${t}`;s.push(c)}}}return s.join(" ")}if(n)return t}}function xx(n,e,t){const r=n?"-":"",i=t(e),s=i==null?void 0:i.startsWith("-"),o=s?"-":"",a=s?i==null?void 0:i.substring(1):i;return`${o}${n}${r}${a}`}function BB({customProperties:n,value:e,propValues:t,parseValue:r=i=>i}){let i={};if(!(!e||typeof e=="string"&&t.includes(e))){if(typeof e=="string"&&(i=Object.fromEntries(n.map(s=>[s,e]))),Od(e)){const s=e;for(const o in s){if(!wk(s,o)||!rS.includes(o))continue;const a=s[o];if(!t.includes(a))for(const l of n)i={[o==="initial"?l:`${l}-${o}`]:a,...i}}}for(const s in i){const o=i[s];o!==void 0&&(i[s]=r(o))}return i}}function Rx(...n){let e={};for(const t of n)t&&(e={...e,...t});return Object.keys(e).length?e:void 0}function UB(...n){return Object.assign({},...n)}function pa(n,...e){let t,r;const i={...n},s=UB(...e);for(const o in s){let a=i[o];const l=s[o];if(l.default!==void 0&&a===void 0&&(a=l.default),l.type==="enum"&&![l.default,...l.values].includes(a)&&!Od(a)&&(a=l.default),i[o]=a,"className"in l&&l.className){delete i[o];const c="responsive"in l;if(!a||Od(a)&&!c)continue;if(Od(a)&&(l.default!==void 0&&a.initial===void 0&&(a.initial=l.default),l.type==="enum"&&([l.default,...l.values].includes(a.initial)||(a.initial=l.default))),l.type==="enum"){const u=Ek({allowArbitraryValues:!1,value:a,className:l.className,propValues:l.values,parseValue:l.parseValue});t=kn(t,u);continue}if(l.type==="string"||l.type==="enum | string"){const u=l.type==="string"?[]:l.values,[f,p]=jB({className:l.className,customProperties:l.customProperties,propValues:u,parseValue:l.parseValue,value:a});r=Rx(r,p),t=kn(t,f);continue}if(l.type==="boolean"&&a){t=kn(t,l.className);continue}}}return i.className=kn(t,n.className),i.style=Rx(r,n.style),i}const ba=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],wh={m:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},$B=["span","div","label","p"],zB=["1","2","3","4","5","6","7","8","9"],HB={as:{type:"enum",values:$B,default:"span"},...nc,size:{type:"enum",className:"rt-r-size",values:zB,responsive:!0},..._k,...OB,...yk,...nS,...tS,...mk,...eS},Va=A.forwardRef((n,e)=>{const{children:t,className:r,asChild:i,as:s="span",color:o,...a}=pa(n,HB,wh);return A.createElement(Vr,{"data-accent-color":o,...a,ref:e,className:kn("rt-Text",r)},i?t:A.createElement(s,null,t))});Va.displayName="Text";const WB=["top","right","bottom","left"],Zo=Math.min,pr=Math.max,Vv=Math.round,tm=Math.floor,ea=n=>({x:n,y:n}),GB={left:"right",right:"left",bottom:"top",top:"bottom"},qB={start:"end",end:"start"};function Zw(n,e,t){return pr(n,Zo(e,t))}function Ws(n,e){return typeof n=="function"?n(e):n}function Gs(n){return n.split("-")[0]}function Eh(n){return n.split("-")[1]}function iS(n){return n==="x"?"y":"x"}function sS(n){return n==="y"?"height":"width"}function ta(n){return["top","bottom"].includes(Gs(n))?"y":"x"}function oS(n){return iS(ta(n))}function KB(n,e,t){t===void 0&&(t=!1);const r=Eh(n),i=oS(n),s=sS(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=jv(o)),[o,jv(o)]}function XB(n){const e=jv(n);return[eE(n),e,eE(e)]}function eE(n){return n.replace(/start|end/g,e=>qB[e])}function YB(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function QB(n,e,t,r){const i=Eh(n);let s=YB(Gs(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(eE)))),s}function jv(n){return n.replace(/left|right|bottom|top/g,e=>GB[e])}function JB(n){return{top:0,right:0,bottom:0,left:0,...n}}function Ak(n){return typeof n!="number"?JB(n):{top:n,right:n,bottom:n,left:n}}function Bv(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function Px(n,e,t){let{reference:r,floating:i}=n;const s=ta(e),o=oS(e),a=sS(o),l=Gs(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Eh(e)){case"start":g[o]-=p*(t&&c?-1:1);break;case"end":g[o]+=p*(t&&c?-1:1);break}return g}const ZB=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:f}=Px(c,r,l),p=r,g={},m=0;for(let v=0;v<a.length;v++){const{name:w,fn:_}=a[v],{x:E,y:S,data:P,reset:O}=await _({x:u,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:n,floating:e}});u=E??u,f=S??f,g={...g,[w]:{...g[w],...P}},O&&m<=50&&(m++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):O.rects),{x:u,y:f}=Px(c,p,l)),v=-1)}return{x:u,y:f,placement:p,strategy:i,middlewareData:g}};async function uf(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Ws(e,n),m=Ak(g),w=a[p?f==="floating"?"reference":"floating":f],_=Bv(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(w)))==null||t?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),P=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},O=Bv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:S,strategy:l}):E);return{top:(_.top-O.top+m.top)/P.y,bottom:(O.bottom-_.bottom+m.bottom)/P.y,left:(_.left-O.left+m.left)/P.x,right:(O.right-_.right+m.right)/P.x}}const e4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Ws(n,e)||{};if(c==null)return{};const f=Ak(u),p={x:t,y:r},g=oS(i),m=sS(g),v=await o.getDimensions(c),w=g==="y",_=w?"top":"left",E=w?"bottom":"right",S=w?"clientHeight":"clientWidth",P=s.reference[m]+s.reference[g]-p[g]-s.floating[m],O=p[g]-s.reference[g],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=j?j[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(j)))&&(C=a.floating[S]||s.floating[m]);const T=P/2-O/2,x=C/2-v[m]/2-1,L=Zo(f[_],x),F=Zo(f[E],x),V=L,D=C-v[m]-F,z=C/2-v[m]/2+T,$=Zw(V,z,D),W=!l.arrow&&Eh(i)!=null&&z!==$&&s.reference[m]/2-(z<V?L:F)-v[m]/2<0,U=W?z<V?z-V:z-D:0;return{[g]:p[g]+U,data:{[g]:$,centerOffset:z-$-U,...W&&{alignmentOffset:U}},reset:W}}}),t4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...w}=Ws(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const _=Gs(i),E=ta(a),S=Gs(a)===a,P=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(S||!v?[jv(a)]:XB(a)),j=m!=="none";!p&&j&&O.push(...QB(a,v,m,P));const C=[a,...O],T=await uf(e,w),x=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&x.push(T[_]),f){const z=KB(i,o,P);x.push(T[z[0]],T[z[1]])}if(L=[...L,{placement:i,overflows:x}],!x.every(z=>z<=0)){var F,V;const z=(((F=s.flip)==null?void 0:F.index)||0)+1,$=C[z];if($)return{data:{index:z,overflows:L},reset:{placement:$}};let W=(V=L.filter(U=>U.overflows[0]<=0).sort((U,B)=>U.overflows[1]-B.overflows[1])[0])==null?void 0:V.placement;if(!W)switch(g){case"bestFit":{var D;const U=(D=L.filter(B=>{if(j){const H=ta(B.placement);return H===E||H==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(H=>H>0).reduce((H,X)=>H+X,0)]).sort((B,H)=>B[1]-H[1])[0])==null?void 0:D[0];U&&(W=U);break}case"initialPlacement":W=a;break}if(i!==W)return{reset:{placement:W}}}return{}}}};function Ix(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function kx(n){return WB.some(e=>n[e]>=0)}const n4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Ws(n,e);switch(r){case"referenceHidden":{const s=await uf(e,{...i,elementContext:"reference"}),o=Ix(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:kx(o)}}}case"escaped":{const s=await uf(e,{...i,altBoundary:!0}),o=Ix(s,t.floating);return{data:{escapedOffsets:o,escaped:kx(o)}}}default:return{}}}}};async function r4(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Gs(t),a=Eh(t),l=ta(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=Ws(e,n);let{mainAxis:p,crossAxis:g,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(g=a==="end"?m*-1:m),l?{x:g*u,y:p*c}:{x:p*c,y:g*u}}const i4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await r4(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},s4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:_,y:E}=w;return{x:_,y:E}}},...l}=Ws(n,e),c={x:t,y:r},u=await uf(e,l),f=ta(Gs(i)),p=iS(f);let g=c[p],m=c[f];if(s){const w=p==="y"?"top":"left",_=p==="y"?"bottom":"right",E=g+u[w],S=g-u[_];g=Zw(E,g,S)}if(o){const w=f==="y"?"top":"left",_=f==="y"?"bottom":"right",E=m+u[w],S=m-u[_];m=Zw(E,m,S)}const v=a.fn({...e,[p]:g,[f]:m});return{...v,data:{x:v.x-t,y:v.y-r,enabled:{[p]:s,[f]:o}}}}}},o4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ws(n,e),u={x:t,y:r},f=ta(i),p=iS(f);let g=u[p],m=u[f];const v=Ws(a,e),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const S=p==="y"?"height":"width",P=s.reference[p]-s.floating[S]+w.mainAxis,O=s.reference[p]+s.reference[S]-w.mainAxis;g<P?g=P:g>O&&(g=O)}if(c){var _,E;const S=p==="y"?"width":"height",P=["top","left"].includes(Gs(i)),O=s.reference[f]-s.floating[S]+(P&&((_=o.offset)==null?void 0:_[f])||0)+(P?0:w.crossAxis),j=s.reference[f]+s.reference[S]+(P?0:((E=o.offset)==null?void 0:E[f])||0)-(P?w.crossAxis:0);m<O?m=O:m>j&&(m=j)}return{[p]:g,[f]:m}}}},a4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ws(n,e),u=await uf(e,c),f=Gs(i),p=Eh(i),g=ta(i)==="y",{width:m,height:v}=s.floating;let w,_;f==="top"||f==="bottom"?(w=f,_=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,w=p==="end"?"top":"bottom");const E=v-u.top-u.bottom,S=m-u.left-u.right,P=Zo(v-u[w],E),O=Zo(m-u[_],S),j=!e.middlewareData.shift;let C=P,T=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=E),j&&!p){const L=pr(u.left,0),F=pr(u.right,0),V=pr(u.top,0),D=pr(u.bottom,0);g?T=m-2*(L!==0||F!==0?L+F:pr(u.left,u.right)):C=v-2*(V!==0||D!==0?V+D:pr(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:C});const x=await o.getDimensions(a.floating);return m!==x.width||v!==x.height?{reset:{rects:!0}}:{}}}};function Yy(){return typeof window<"u"}function Ah(n){return bk(n)?(n.nodeName||"").toLowerCase():"#document"}function yr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function qi(n){var e;return(e=(bk(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function bk(n){return Yy()?n instanceof Node||n instanceof yr(n).Node:!1}function ui(n){return Yy()?n instanceof Element||n instanceof yr(n).Element:!1}function $i(n){return Yy()?n instanceof HTMLElement||n instanceof yr(n).HTMLElement:!1}function Mx(n){return!Yy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof yr(n).ShadowRoot}function og(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=hi(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function l4(n){return["table","td","th"].includes(Ah(n))}function Qy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function aS(n){const e=lS(),t=ui(n)?hi(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function c4(n){let e=na(n);for(;$i(e)&&!sh(e);){if(aS(e))return e;if(Qy(e))return null;e=na(e)}return null}function lS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sh(n){return["html","body","#document"].includes(Ah(n))}function hi(n){return yr(n).getComputedStyle(n)}function Jy(n){return ui(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function na(n){if(Ah(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Mx(n)&&n.host||qi(n);return Mx(e)?e.host:e}function Sk(n){const e=na(n);return sh(e)?n.ownerDocument?n.ownerDocument.body:n.body:$i(e)&&og(e)?e:Sk(e)}function hf(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Sk(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=yr(i);if(s){const a=tE(o);return e.concat(o,o.visualViewport||[],og(i)?i:[],a&&t?hf(a):[])}return e.concat(i,hf(i,[],t))}function tE(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Tk(n){const e=hi(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=$i(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=Vv(t)!==s||Vv(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function cS(n){return ui(n)?n:n.contextElement}function Kc(n){const e=cS(n);if(!$i(e))return ea(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Tk(e);let o=(s?Vv(t.width):t.width)/r,a=(s?Vv(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const u4=ea(0);function Ck(n){const e=yr(n);return!lS()||!e.visualViewport?u4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function h4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==yr(n)?!1:e}function Gl(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=cS(n);let o=ea(1);e&&(r?ui(r)&&(o=Kc(r)):o=Kc(n));const a=h4(s,t,r)?Ck(s):ea(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const p=yr(s),g=r&&ui(r)?yr(r):r;let m=p,v=tE(m);for(;v&&r&&g!==m;){const w=Kc(v),_=v.getBoundingClientRect(),E=hi(v),S=_.left+(v.clientLeft+parseFloat(E.paddingLeft))*w.x,P=_.top+(v.clientTop+parseFloat(E.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=S,c+=P,m=yr(v),v=tE(m)}}return Bv({width:u,height:f,x:l,y:c})}function d4(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=qi(r),a=e?Qy(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=ea(1);const u=ea(0),f=$i(r);if((f||!f&&!s)&&((Ah(r)!=="body"||og(o))&&(l=Jy(r)),$i(r))){const p=Gl(r);c=Kc(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function f4(n){return Array.from(n.getClientRects())}function nE(n,e){const t=Jy(n).scrollLeft;return e?e.left+t:Gl(qi(n)).left+t}function p4(n){const e=qi(n),t=Jy(n),r=n.ownerDocument.body,i=pr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=pr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+nE(n);const a=-t.scrollTop;return hi(r).direction==="rtl"&&(o+=pr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function g4(n,e){const t=yr(n),r=qi(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=lS();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function m4(n,e){const t=Gl(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=$i(n)?Kc(n):ea(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Lx(n,e,t){let r;if(e==="viewport")r=g4(n,t);else if(e==="document")r=p4(qi(n));else if(ui(e))r=m4(e,t);else{const i=Ck(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return Bv(r)}function xk(n,e){const t=na(n);return t===e||!ui(t)||sh(t)?!1:hi(t).position==="fixed"||xk(t,e)}function v4(n,e){const t=e.get(n);if(t)return t;let r=hf(n,[],!1).filter(a=>ui(a)&&Ah(a)!=="body"),i=null;const s=hi(n).position==="fixed";let o=s?na(n):n;for(;ui(o)&&!sh(o);){const a=hi(o),l=aS(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||og(o)&&!l&&xk(n,o))?r=r.filter(u=>u!==o):i=a,o=na(o)}return e.set(n,r),r}function y4(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?Qy(e)?[]:v4(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=Lx(e,u,i);return c.top=pr(f.top,c.top),c.right=Zo(f.right,c.right),c.bottom=Zo(f.bottom,c.bottom),c.left=pr(f.left,c.left),c},Lx(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _4(n){const{width:e,height:t}=Tk(n);return{width:e,height:t}}function w4(n,e,t){const r=$i(e),i=qi(e),s=t==="fixed",o=Gl(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ea(0);if(r||!r&&!s)if((Ah(e)!=="body"||og(i))&&(a=Jy(e)),r){const g=Gl(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&(l.x=nE(i));let c=0,u=0;if(i&&!r&&!s){const g=i.getBoundingClientRect();u=g.top+a.scrollTop,c=g.left+a.scrollLeft-nE(i,g)}const f=o.left+a.scrollLeft-l.x-c,p=o.top+a.scrollTop-l.y-u;return{x:f,y:p,width:o.width,height:o.height}}function I0(n){return hi(n).position==="static"}function Nx(n,e){if(!$i(n)||hi(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return qi(n)===t&&(t=t.ownerDocument.body),t}function Rk(n,e){const t=yr(n);if(Qy(n))return t;if(!$i(n)){let i=na(n);for(;i&&!sh(i);){if(ui(i)&&!I0(i))return i;i=na(i)}return t}let r=Nx(n,e);for(;r&&l4(r)&&I0(r);)r=Nx(r,e);return r&&sh(r)&&I0(r)&&!aS(r)?t:r||c4(n)||t}const E4=async function(n){const e=this.getOffsetParent||Rk,t=this.getDimensions,r=await t(n.floating);return{reference:w4(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function A4(n){return hi(n).direction==="rtl"}const b4={convertOffsetParentRelativeRectToViewportRelativeRect:d4,getDocumentElement:qi,getClippingRect:y4,getOffsetParent:Rk,getElementRects:E4,getClientRects:f4,getDimensions:_4,getScale:Kc,isElement:ui,isRTL:A4};function S4(n,e){let t=null,r;const i=qi(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:f,height:p}=n.getBoundingClientRect();if(a||e(),!f||!p)return;const g=tm(u),m=tm(i.clientWidth-(c+f)),v=tm(i.clientHeight-(u+p)),w=tm(c),E={rootMargin:-g+"px "+-m+"px "+-v+"px "+-w+"px",threshold:pr(0,Zo(1,l))||1};let S=!0;function P(O){const j=O[0].intersectionRatio;if(j!==l){if(!S)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{t=new IntersectionObserver(P,{...E,root:i.ownerDocument})}catch{t=new IntersectionObserver(P,E)}t.observe(n)}return o(!0),s}function T4(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=cS(n),u=i||s?[...c?hf(c):[],...hf(e)]:[];u.forEach(_=>{i&&_.addEventListener("scroll",t,{passive:!0}),s&&_.addEventListener("resize",t)});const f=c&&a?S4(c,t):null;let p=-1,g=null;o&&(g=new ResizeObserver(_=>{let[E]=_;E&&E.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let m,v=l?Gl(n):null;l&&w();function w(){const _=Gl(n);v&&(_.x!==v.x||_.y!==v.y||_.width!==v.width||_.height!==v.height)&&t(),v=_,m=requestAnimationFrame(w)}return t(),()=>{var _;u.forEach(E=>{i&&E.removeEventListener("scroll",t),s&&E.removeEventListener("resize",t)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(m)}}const C4=i4,x4=s4,R4=t4,P4=a4,I4=n4,Dx=e4,k4=o4,M4=(n,e,t)=>{const r=new Map,i={platform:b4,...t},s={...i.platform,_c:r};return ZB(n,e,{...i,platform:s})};var Mm=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Uv(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Uv(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Uv(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Pk(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Ox(n,e){const t=Pk(n);return Math.round(e*t)/t}function k0(n){const e=A.useRef(n);return Mm(()=>{e.current=n}),e}function L4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=A.useState(r);Uv(p,r)||g(r);const[m,v]=A.useState(null),[w,_]=A.useState(null),E=A.useCallback(B=>{B!==j.current&&(j.current=B,v(B))},[]),S=A.useCallback(B=>{B!==C.current&&(C.current=B,_(B))},[]),P=s||m,O=o||w,j=A.useRef(null),C=A.useRef(null),T=A.useRef(u),x=l!=null,L=k0(l),F=k0(i),V=k0(c),D=A.useCallback(()=>{if(!j.current||!C.current)return;const B={placement:e,strategy:t,middleware:p};F.current&&(B.platform=F.current),M4(j.current,C.current,B).then(H=>{const X={...H,isPositioned:V.current!==!1};z.current&&!Uv(T.current,X)&&(T.current=X,Wy.flushSync(()=>{f(X)}))})},[p,e,t,F,V]);Mm(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[c]);const z=A.useRef(!1);Mm(()=>(z.current=!0,()=>{z.current=!1}),[]),Mm(()=>{if(P&&(j.current=P),O&&(C.current=O),P&&O){if(L.current)return L.current(P,O,D);D()}},[P,O,D,L,x]);const $=A.useMemo(()=>({reference:j,floating:C,setReference:E,setFloating:S}),[E,S]),W=A.useMemo(()=>({reference:P,floating:O}),[P,O]),U=A.useMemo(()=>{const B={position:t,left:0,top:0};if(!W.floating)return B;const H=Ox(W.floating,u.x),X=Ox(W.floating,u.y);return a?{...B,transform:"translate("+H+"px, "+X+"px)",...Pk(W.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:H,top:X}},[t,a,W.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:D,refs:$,elements:W,floatingStyles:U}),[u,D,$,W,U])}const N4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Dx({element:r.current,padding:i}).fn(t):{}:r?Dx({element:r,padding:i}).fn(t):{}}}},D4=(n,e)=>({...C4(n),options:[n,e]}),O4=(n,e)=>({...x4(n),options:[n,e]}),F4=(n,e)=>({...k4(n),options:[n,e]}),V4=(n,e)=>({...R4(n),options:[n,e]}),j4=(n,e)=>({...P4(n),options:[n,e]}),B4=(n,e)=>({...I4(n),options:[n,e]}),U4=(n,e)=>({...N4(n),options:[n,e]});var $4="Arrow",Ik=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return k.jsx(vt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:k.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ik.displayName=$4;var z4=Ik;function H4(n){const[e,t]=A.useState(void 0);return Ui(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var uS="Popper",[kk,Zy]=sg(uS),[W4,Mk]=kk(uS),Lk=n=>{const{__scopePopper:e,children:t}=n,[r,i]=A.useState(null);return k.jsx(W4,{scope:e,anchor:r,onAnchorChange:i,children:t})};Lk.displayName=uS;var Nk="PopperAnchor",Dk=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Mk(Nk,t),o=A.useRef(null),a=xt(e,o);return A.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:k.jsx(vt.div,{...i,ref:a})});Dk.displayName=Nk;var hS="PopperContent",[G4,q4]=kk(hS),Ok=A.forwardRef((n,e)=>{var ce,Je,Ze,ke,Zn,Ar;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:m,...v}=n,w=Mk(hS,t),[_,E]=A.useState(null),S=xt(e,Se=>E(Se)),[P,O]=A.useState(null),j=H4(P),C=(j==null?void 0:j.width)??0,T=(j==null?void 0:j.height)??0,x=r+(s!=="center"?"-"+s:""),L=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(c)?c:[c],V=F.length>0,D={padding:L,boundary:F.filter(X4),altBoundary:V},{refs:z,floatingStyles:$,placement:W,isPositioned:U,middlewareData:B}=L4({strategy:"fixed",placement:x,whileElementsMounted:(...Se)=>T4(...Se,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[D4({mainAxis:i+T,alignmentAxis:o}),l&&O4({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?F4():void 0,...D}),l&&V4({...D}),j4({...D,apply:({elements:Se,rects:We,availableWidth:ht,availableHeight:it})=>{const{width:di,height:Xi}=We.reference,Yi=Se.floating.style;Yi.setProperty("--radix-popper-available-width",`${ht}px`),Yi.setProperty("--radix-popper-available-height",`${it}px`),Yi.setProperty("--radix-popper-anchor-width",`${di}px`),Yi.setProperty("--radix-popper-anchor-height",`${Xi}px`)}}),P&&U4({element:P,padding:a}),Y4({arrowWidth:C,arrowHeight:T}),p&&B4({strategy:"referenceHidden",...D})]}),[H,X]=jk(W),ne=Qn(m);Ui(()=>{U&&(ne==null||ne())},[U,ne]);const J=(ce=B.arrow)==null?void 0:ce.x,re=(Je=B.arrow)==null?void 0:Je.y,ge=((Ze=B.arrow)==null?void 0:Ze.centerOffset)!==0,[Fe,be]=A.useState();return Ui(()=>{_&&be(window.getComputedStyle(_).zIndex)},[_]),k.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:U?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Fe,"--radix-popper-transform-origin":[(ke=B.transformOrigin)==null?void 0:ke.x,(Zn=B.transformOrigin)==null?void 0:Zn.y].join(" "),...((Ar=B.hide)==null?void 0:Ar.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:k.jsx(G4,{scope:t,placedSide:H,onArrowChange:O,arrowX:J,arrowY:re,shouldHideArrow:ge,children:k.jsx(vt.div,{"data-side":H,"data-align":X,...v,ref:S,style:{...v.style,animation:U?void 0:"none"}})})})});Ok.displayName=hS;var Fk="PopperArrow",K4={top:"bottom",right:"left",bottom:"top",left:"right"},Vk=A.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=q4(Fk,r),o=K4[s.placedSide];return k.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:k.jsx(z4,{...i,ref:t,style:{...i.style,display:"block"}})})});Vk.displayName=Fk;function X4(n){return n!==null}var Y4=n=>({name:"transformOrigin",options:n,fn(e){var w,_,E;const{placement:t,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=jk(t),f={start:"0%",center:"50%",end:"100%"}[u],p=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,g=(((E=i.arrow)==null?void 0:E.y)??0)+l/2;let m="",v="";return c==="bottom"?(m=o?f:`${p}px`,v=`${-l}px`):c==="top"?(m=o?f:`${p}px`,v=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,v=o?f:`${g}px`):c==="left"&&(m=`${r.floating.width+l}px`,v=o?f:`${g}px`),{data:{x:m,y:v}}}});function jk(n){const[e,t="center"]=n.split("-");return[e,t]}var Q4=Lk,Bk=Dk,Uk=Ok,$k=Vk,[e_,CK]=sg("Tooltip",[Zy]),dS=Zy(),zk="TooltipProvider",J4=700,Fx="tooltip.open",[Z4,Hk]=e_(zk),Wk=n=>{const{__scopeTooltip:e,delayDuration:t=J4,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,[o,a]=A.useState(!0),l=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),k.jsx(Z4,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:A.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};Wk.displayName=zk;var Gk="Tooltip",[xK,t_]=e_(Gk),rE="TooltipTrigger",eU=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=t_(rE,t),s=Hk(rE,t),o=dS(t),a=A.useRef(null),l=xt(e,a,i.onTriggerChange),c=A.useRef(!1),u=A.useRef(!1),f=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),k.jsx(Bk,{asChild:!0,...o,children:k.jsx(vt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:he(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:he(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:he(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:he(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:he(n.onBlur,i.onClose),onClick:he(n.onClick,i.onClose)})})});eU.displayName=rE;var tU="TooltipPortal",[RK,nU]=e_(tU,{forceMount:void 0}),oh="TooltipContent",rU=A.forwardRef((n,e)=>{const t=nU(oh,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=t_(oh,n.__scopeTooltip);return k.jsx(hk,{present:r||o.open,children:o.disableHoverableContent?k.jsx(qk,{side:i,...s,ref:e}):k.jsx(iU,{side:i,...s,ref:e})})}),iU=A.forwardRef((n,e)=>{const t=t_(oh,n.__scopeTooltip),r=Hk(oh,n.__scopeTooltip),i=A.useRef(null),s=xt(e,i),[o,a]=A.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:f}=r,p=A.useCallback(()=>{a(null),f(!1)},[f]),g=A.useCallback((m,v)=>{const w=m.currentTarget,_={x:m.clientX,y:m.clientY},E=lU(_,w.getBoundingClientRect()),S=cU(_,E),P=uU(v.getBoundingClientRect()),O=dU([...S,...P]);a(O),f(!0)},[f]);return A.useEffect(()=>()=>p(),[p]),A.useEffect(()=>{if(l&&u){const m=w=>g(w,u),v=w=>g(w,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",v)}}},[l,u,g,p]),A.useEffect(()=>{if(o){const m=v=>{const w=v.target,_={x:v.clientX,y:v.clientY},E=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),S=!hU(_,o);E?p():S&&(p(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,c,p]),k.jsx(qk,{...n,ref:s})}),[sU,oU]=e_(Gk,{isInside:!1}),qk=A.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=t_(oh,t),c=dS(t),{onClose:u}=l;return A.useEffect(()=>(document.addEventListener(Fx,u),()=>document.removeEventListener(Fx,u)),[u]),A.useEffect(()=>{if(l.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),k.jsx(ak,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:k.jsxs(Uk,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[k.jsx(nk,{children:r}),k.jsx(sU,{scope:t,isInside:!0,children:k.jsx(Hj,{id:l.contentId,role:"tooltip",children:i||r})})]})})});rU.displayName=oh;var Kk="TooltipArrow",aU=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=dS(t);return oU(Kk,t).isInside?null:k.jsx($k,{...i,...r,ref:e})});aU.displayName=Kk;function lU(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function cU(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function uU(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function hU(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function dU(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),fU(e)}function fU(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var pU=Wk,Xk=A.createContext(void 0),gU=n=>{const{dir:e,children:t}=n;return k.jsx(Xk.Provider,{value:e,children:t})};function fS(n){const e=A.useContext(Xk);return n||e||"ltr"}function mU(n){switch(n){case"tomato":case"red":case"ruby":case"crimson":case"pink":case"plum":case"purple":case"violet":return"mauve";case"iris":case"indigo":case"blue":case"sky":case"cyan":return"slate";case"teal":case"jade":case"mint":case"green":return"sage";case"grass":case"lime":return"olive";case"yellow":case"amber":case"orange":case"brown":case"gold":case"bronze":return"sand";case"gray":return"gray"}}const Yk=["none","small","medium","large","full"],vU={radius:{type:"enum",values:Yk,default:void 0}},yU=["inherit","light","dark"],_U=["solid","translucent"],wU=["90%","95%","100%","105%","110%"],fr={...nc,hasBackground:{type:"boolean",default:!0},appearance:{type:"enum",values:yU,default:"inherit"},accentColor:{type:"enum",values:Zb,default:"indigo"},grayColor:{type:"enum",values:LB,default:"auto"},panelBackground:{type:"enum",values:_U,default:"translucent"},radius:{type:"enum",values:Yk,default:"medium"},scaling:{type:"enum",values:wU,default:"100%"}},mc=()=>{},iE=A.createContext(void 0),Qk=A.forwardRef((n,e)=>A.useContext(iE)===void 0?A.createElement(pU,{delayDuration:200},A.createElement(gU,{dir:"ltr"},A.createElement(Jk,{...n,ref:e}))):A.createElement(pS,{...n,ref:e}));Qk.displayName="Theme";const Jk=A.forwardRef((n,e)=>{const{appearance:t=fr.appearance.default,accentColor:r=fr.accentColor.default,grayColor:i=fr.grayColor.default,panelBackground:s=fr.panelBackground.default,radius:o=fr.radius.default,scaling:a=fr.scaling.default,hasBackground:l=fr.hasBackground.default,...c}=n,[u,f]=A.useState(t);A.useEffect(()=>f(t),[t]);const[p,g]=A.useState(r);A.useEffect(()=>g(r),[r]);const[m,v]=A.useState(i);A.useEffect(()=>v(i),[i]);const[w,_]=A.useState(s);A.useEffect(()=>_(s),[s]);const[E,S]=A.useState(o);A.useEffect(()=>S(o),[o]);const[P,O]=A.useState(a);return A.useEffect(()=>O(a),[a]),A.createElement(pS,{...c,ref:e,isRoot:!0,hasBackground:l,appearance:u,accentColor:p,grayColor:m,panelBackground:w,radius:E,scaling:P,onAppearanceChange:f,onAccentColorChange:g,onGrayColorChange:v,onPanelBackgroundChange:_,onRadiusChange:S,onScalingChange:O})});Jk.displayName="ThemeRoot";const pS=A.forwardRef((n,e)=>{const t=A.useContext(iE),{asChild:r,isRoot:i,hasBackground:s,appearance:o=(t==null?void 0:t.appearance)??fr.appearance.default,accentColor:a=(t==null?void 0:t.accentColor)??fr.accentColor.default,grayColor:l=(t==null?void 0:t.resolvedGrayColor)??fr.grayColor.default,panelBackground:c=(t==null?void 0:t.panelBackground)??fr.panelBackground.default,radius:u=(t==null?void 0:t.radius)??fr.radius.default,scaling:f=(t==null?void 0:t.scaling)??fr.scaling.default,onAppearanceChange:p=mc,onAccentColorChange:g=mc,onGrayColorChange:m=mc,onPanelBackgroundChange:v=mc,onRadiusChange:w=mc,onScalingChange:_=mc,...E}=n,S=r?Vr:"div",P=l==="auto"?mU(a):l,O=n.appearance==="light"||n.appearance==="dark",j=s===void 0?i||O:s;return A.createElement(iE.Provider,{value:A.useMemo(()=>({appearance:o,accentColor:a,grayColor:l,resolvedGrayColor:P,panelBackground:c,radius:u,scaling:f,onAppearanceChange:p,onAccentColorChange:g,onGrayColorChange:m,onPanelBackgroundChange:v,onRadiusChange:w,onScalingChange:_}),[o,a,l,P,c,u,f,p,g,m,v,w,_])},A.createElement(S,{"data-is-root-theme":i?"true":"false","data-accent-color":a,"data-gray-color":P,"data-has-background":j?"true":"false","data-panel-background":c,"data-radius":u,"data-scaling":f,ref:e,...E,className:kn("radix-themes",{light:o==="light",dark:o==="dark"},E.className)}))});pS.displayName="ThemeImpl";var gS="Avatar",[EU,PK]=sg(gS),[AU,Zk]=EU(gS),eM=A.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,s]=A.useState("idle");return k.jsx(AU,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:k.jsx(vt.span,{...r,ref:e})})});eM.displayName=gS;var tM="AvatarImage",nM=A.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...s}=n,o=Zk(tM,t),a=SU(r),l=Qn(c=>{i(c),o.onImageLoadingStatusChange(c)});return Ui(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?k.jsx(vt.img,{...s,ref:e,src:r}):null});nM.displayName=tM;var rM="AvatarFallback",bU=A.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,s=Zk(rM,t),[o,a]=A.useState(r===void 0);return A.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&s.imageLoadingStatus!=="loaded"?k.jsx(vt.span,{...i,ref:e}):null});bU.displayName=rM;function SU(n){const[e,t]=A.useState("idle");return Ui(()=>{if(!n){t("error");return}let r=!0;const i=new window.Image,s=o=>()=>{r&&t(o)};return t("loading"),i.onload=s("loaded"),i.onerror=s("error"),i.src=n,()=>{r=!1}},[n]),e}var TU=eM,CU=nM;const sE=A.forwardRef((n,e)=>{const{asChild:t,children:r,className:i,...s}=n,o=t?Vr:"blockquote";return A.createElement(Va,{asChild:!0,...s,ref:e,className:kn("rt-Blockquote",i)},A.createElement(o,null,r))});sE.displayName="Blockquote";const Sa=["0","1","2","3","4","5","6","7","8","9"],xU={p:{type:"enum | string",className:"rt-r-p",customProperties:["--p"],values:Sa,responsive:!0},px:{type:"enum | string",className:"rt-r-px",customProperties:["--pl","--pr"],values:Sa,responsive:!0},py:{type:"enum | string",className:"rt-r-py",customProperties:["--pt","--pb"],values:Sa,responsive:!0},pt:{type:"enum | string",className:"rt-r-pt",customProperties:["--pt"],values:Sa,responsive:!0},pr:{type:"enum | string",className:"rt-r-pr",customProperties:["--pr"],values:Sa,responsive:!0},pb:{type:"enum | string",className:"rt-r-pb",customProperties:["--pb"],values:Sa,responsive:!0},pl:{type:"enum | string",className:"rt-r-pl",customProperties:["--pl"],values:Sa,responsive:!0}},M0=["visible","hidden","clip","scroll","auto"],RU=["static","relative","absolute","fixed","sticky"],Jh=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],PU=["0","1"],IU=["0","1"],kU={...xU,...kB,...MB,position:{type:"enum",className:"rt-r-position",values:RU,responsive:!0},inset:{type:"enum | string",className:"rt-r-inset",customProperties:["--inset"],values:Jh,responsive:!0},top:{type:"enum | string",className:"rt-r-top",customProperties:["--top"],values:Jh,responsive:!0},right:{type:"enum | string",className:"rt-r-right",customProperties:["--right"],values:Jh,responsive:!0},bottom:{type:"enum | string",className:"rt-r-bottom",customProperties:["--bottom"],values:Jh,responsive:!0},left:{type:"enum | string",className:"rt-r-left",customProperties:["--left"],values:Jh,responsive:!0},overflow:{type:"enum",className:"rt-r-overflow",values:M0,responsive:!0},overflowX:{type:"enum",className:"rt-r-ox",values:M0,responsive:!0},overflowY:{type:"enum",className:"rt-r-oy",values:M0,responsive:!0},flexBasis:{type:"string",className:"rt-r-fb",customProperties:["--flex-basis"],responsive:!0},flexShrink:{type:"enum | string",className:"rt-r-fs",customProperties:["--flex-shrink"],values:PU,responsive:!0},flexGrow:{type:"enum | string",className:"rt-r-fg",customProperties:["--flex-grow"],values:IU,responsive:!0},gridArea:{type:"string",className:"rt-r-ga",customProperties:["--grid-area"],responsive:!0},gridColumn:{type:"string",className:"rt-r-gc",customProperties:["--grid-column"],responsive:!0},gridColumnStart:{type:"string",className:"rt-r-gcs",customProperties:["--grid-column-start"],responsive:!0},gridColumnEnd:{type:"string",className:"rt-r-gce",customProperties:["--grid-column-end"],responsive:!0},gridRow:{type:"string",className:"rt-r-gr",customProperties:["--grid-row"],responsive:!0},gridRowStart:{type:"string",className:"rt-r-grs",customProperties:["--grid-row-start"],responsive:!0},gridRowEnd:{type:"string",className:"rt-r-gre",customProperties:["--grid-row-end"],responsive:!0}},MU=["1","2","3","4"],LU=["classic","solid","soft","surface","outline","ghost"],Vx={...nc,size:{type:"enum",className:"rt-r-size",values:MU,default:"2",responsive:!0},variant:{type:"enum",className:"rt-variant",values:LU,default:"solid"},...vk,...eS,...vU,loading:{type:"boolean",className:"rt-loading",default:!1}},L0=["0","1","2","3","4","5","6","7","8","9"],NU={gap:{type:"enum | string",className:"rt-r-gap",customProperties:["--gap"],values:L0,responsive:!0},gapX:{type:"enum | string",className:"rt-r-cg",customProperties:["--column-gap"],values:L0,responsive:!0},gapY:{type:"enum | string",className:"rt-r-rg",customProperties:["--row-gap"],values:L0,responsive:!0}},DU=["div","span"],OU=["none","inline-flex","flex"],FU=["row","column","row-reverse","column-reverse"],VU=["start","center","end","baseline","stretch"],jU=["start","center","end","between"],BU=["nowrap","wrap","wrap-reverse"],UU={as:{type:"enum",values:DU,default:"div"},...nc,display:{type:"enum",className:"rt-r-display",values:OU,responsive:!0},direction:{type:"enum",className:"rt-r-fd",values:FU,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:VU,responsive:!0},justify:{type:"enum",className:"rt-r-jc",values:jU,parseValue:$U,responsive:!0},wrap:{type:"enum",className:"rt-r-fw",values:BU,responsive:!0},...NU};function $U(n){return n==="between"?"space-between":n}const Os=A.forwardRef((n,e)=>{const{className:t,asChild:r,as:i="div",...s}=pa(n,UU,kU,wh);return A.createElement(r?Vr:i,{...s,ref:e,className:kn("rt-Flex",t)})});Os.displayName="Flex";const zU=["1","2","3"],HU={size:{type:"enum",className:"rt-r-size",values:zU,default:"2",responsive:!0},loading:{type:"boolean",default:!0}},iM=A.forwardRef((n,e)=>{const{className:t,children:r,loading:i,...s}=pa(n,HU,wh);if(!i)return r;const o=A.createElement("span",{...s,ref:e,className:kn("rt-Spinner",t)},A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}));return r===void 0?o:A.createElement(Os,{asChild:!0,position:"relative",align:"center",justify:"center"},A.createElement("span",null,A.createElement("span",{"aria-hidden":!0,style:{display:"contents",visibility:"hidden"},inert:void 0},r),A.createElement(Os,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},A.createElement("span",null,o))))});iM.displayName="Spinner";function WU(n,e){if(n!==void 0)return typeof n=="string"?e(n):Object.fromEntries(Object.entries(n).map(([t,r])=>[t,e(r)]))}function GU(n){switch(n){case"1":return"1";case"2":case"3":return"2";case"4":return"3"}}const sM=A.forwardRef((n,e)=>{const{size:t=Vx.size.default}=n,{className:r,children:i,asChild:s,color:o,radius:a,disabled:l=n.loading,...c}=pa(n,Vx,wh);return A.createElement(s?Vr:"button",{"data-disabled":l||void 0,"data-accent-color":o,"data-radius":a,...c,ref:e,className:kn("rt-reset","rt-BaseButton",r),disabled:l},n.loading?A.createElement(A.Fragment,null,A.createElement("span",{style:{display:"contents",visibility:"hidden"},"aria-hidden":!0},i),A.createElement(Jb,null,i),A.createElement(Os,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},A.createElement("span",null,A.createElement(iM,{size:WU(t,GU)})))):i)});sM.displayName="BaseButton";const oE=A.forwardRef(({className:n,...e},t)=>A.createElement(sM,{...e,ref:t,className:kn("rt-Button",n)}));oE.displayName="Button";const qU=["1","2","3","4","5"],KU=["surface","classic","ghost"],XU={...nc,size:{type:"enum",className:"rt-r-size",values:qU,default:"1",responsive:!0},variant:{type:"enum",className:"rt-variant",values:KU,default:"surface"}},oM=A.forwardRef((n,e)=>{const{asChild:t,className:r,...i}=pa(n,XU,wh);return A.createElement(t?Vr:"div",{ref:e,...i,className:kn("rt-reset","rt-BaseCard","rt-Card",r)})});oM.displayName="Card";function mS(n){const e=n+"CollectionProvider",[t,r]=sg(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:m,children:v}=g,w=no.useRef(null),_=no.useRef(new Map).current;return k.jsx(i,{scope:m,itemMap:_,collectionRef:w,children:v})};o.displayName=e;const a=n+"CollectionSlot",l=no.forwardRef((g,m)=>{const{scope:v,children:w}=g,_=s(a,v),E=xt(m,_.collectionRef);return k.jsx(Vr,{ref:E,children:w})});l.displayName=a;const c=n+"CollectionItemSlot",u="data-radix-collection-item",f=no.forwardRef((g,m)=>{const{scope:v,children:w,..._}=g,E=no.useRef(null),S=xt(m,E),P=s(c,v);return no.useEffect(()=>(P.itemMap.set(E,{ref:E,..._}),()=>void P.itemMap.delete(E))),k.jsx(Vr,{[u]:"",ref:S,children:w})});f.displayName=c;function p(g){const m=s(n+"CollectionConsumer",g);return no.useCallback(()=>{const w=m.collectionRef.current;if(!w)return[];const _=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((P,O)=>_.indexOf(P.ref.current)-_.indexOf(O.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},p,r]}var N0="rovingFocusGroup.onEntryFocus",YU={bubbles:!1,cancelable:!0},n_="RovingFocusGroup",[aE,aM,QU]=mS(n_),[JU,r_]=sg(n_,[QU]),[ZU,e$]=JU(n_),lM=A.forwardRef((n,e)=>k.jsx(aE.Provider,{scope:n.__scopeRovingFocusGroup,children:k.jsx(aE.Slot,{scope:n.__scopeRovingFocusGroup,children:k.jsx(t$,{...n,ref:e})})}));lM.displayName=n_;var t$=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=n,p=A.useRef(null),g=xt(e,p),m=fS(s),[v=null,w]=ik({prop:o,defaultProp:a,onChange:l}),[_,E]=A.useState(!1),S=Qn(c),P=aM(t),O=A.useRef(!1),[j,C]=A.useState(0);return A.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(N0,S),()=>T.removeEventListener(N0,S)},[S]),k.jsx(ZU,{scope:t,orientation:r,dir:m,loop:i,currentTabStopId:v,onItemFocus:A.useCallback(T=>w(T),[w]),onItemShiftTab:A.useCallback(()=>E(!0),[]),onFocusableItemAdd:A.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:A.useCallback(()=>C(T=>T-1),[]),children:k.jsx(vt.div,{tabIndex:_||j===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...n.style},onMouseDown:he(n.onMouseDown,()=>{O.current=!0}),onFocus:he(n.onFocus,T=>{const x=!O.current;if(T.target===T.currentTarget&&x&&!_){const L=new CustomEvent(N0,YU);if(T.currentTarget.dispatchEvent(L),!L.defaultPrevented){const F=P().filter(W=>W.focusable),V=F.find(W=>W.active),D=F.find(W=>W.id===v),$=[V,D,...F].filter(Boolean).map(W=>W.ref.current);hM($,u)}}O.current=!1}),onBlur:he(n.onBlur,()=>E(!1))})})}),cM="RovingFocusGroupItem",uM=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,...o}=n,a=km(),l=s||a,c=e$(cM,t),u=c.currentTabStopId===l,f=aM(t),{onFocusableItemAdd:p,onFocusableItemRemove:g}=c;return A.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),k.jsx(aE.ItemSlot,{scope:t,id:l,focusable:r,active:i,children:k.jsx(vt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:he(n.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:he(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:he(n.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const v=i$(m,c.orientation,c.dir);if(v!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let _=f().filter(E=>E.focusable).map(E=>E.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const E=_.indexOf(m.currentTarget);_=c.loop?s$(_,E+1):_.slice(E+1)}setTimeout(()=>hM(_))}})})})});uM.displayName=cM;var n$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function r$(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function i$(n,e,t){const r=r$(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return n$[r]}function hM(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function s$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var dM=lM,fM=uM;const o$=["1","2","3","4","5","6","7","8","9"],a$=["auto","always","hover","none"],l$={...nc,size:{type:"enum",className:"rt-r-size",values:o$,responsive:!0},..._k,...yk,...nS,...tS,underline:{type:"enum",className:"rt-underline",values:a$,default:"auto"},...vk,...eS},Kt=A.forwardRef((n,e)=>{const{children:t,className:r,color:i,asChild:s,...o}=pa(n,l$);return A.createElement(Va,{...o,"data-accent-color":i,ref:e,asChild:!0,className:kn("rt-reset","rt-Link",r)},s?t:A.createElement("a",null,t))});Kt.displayName="Link";const c$=["horizontal","vertical"],u$=["1","2","3","4"],h$={orientation:{type:"enum",className:"rt-r-orientation",values:c$,default:"horizontal",responsive:!0},size:{type:"enum",className:"rt-r-size",values:u$,default:"1",responsive:!0},color:{...mk.color,default:"gray"},decorative:{type:"boolean",default:!0}},vS=A.forwardRef((n,e)=>{const{className:t,color:r,decorative:i,...s}=pa(n,h$,wh);return A.createElement("span",{"data-accent-color":r,role:i?void 0:"separator",...s,ref:e,className:kn("rt-Separator",t)})});vS.displayName="Separator";const d$={...nc,...nS,...tS},$v=A.forwardRef((n,e)=>{const{asChild:t,className:r,...i}=pa(n,d$);return A.createElement(t?Vr:"strong",{...i,ref:e,className:kn("rt-Strong",r)})});$v.displayName="Strong";const jx="/assets/PortFolio-CXYOnYlH.png",Bx="/assets/PortFolio%20-%20cartoon-C4WEmp8n.png";var pM={exports:{}},f$="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",p$=f$,g$=p$;function gM(){}function mM(){}mM.resetWarningCache=gM;var m$=function(){function n(r,i,s,o,a,l){if(l!==g$){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:mM,resetWarningCache:gM};return t.PropTypes=t,t};pM.exports=m$();var v$=pM.exports;const li=Zp(v$);var vM={},yM={},_M={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];if(typeof window<"u"){var a;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(a=window).gtag.apply(a,s)}},t=e;n.default=t})(_M);var wM={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function t(a){return a.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(l,c,u){return c>0&&c+l.length!==u.length&&l.search(e)>-1&&u.charAt(c-2)!==":"&&(u.charAt(c+l.length)!=="-"||u.charAt(c-1)==="-")&&u.charAt(c-1).search(/[^\s-]/)<0?l.toLowerCase():l.substr(1).search(/[A-Z]|\../)>-1?l:l.charAt(0).toUpperCase()+l.substr(1)})}function r(a){return typeof a=="string"&&a.indexOf("@")!==-1}var i="REDACTED (Potential Email Address)";function s(a){return r(a)?(console.warn("This arg looks like an email address, redacting."),i):a}function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=a||"";return l&&(u=t(a)),c&&(u=s(u)),u}})(wM);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.GA4=void 0;var e=o(_M),t=o(wM),r=["eventCategory","eventAction","eventLabel","eventValue","hitType"],i=["title","location"],s=["page","hitType"];function o(z){return z&&z.__esModule?z:{default:z}}function a(z,$){if(z==null)return{};var W=l(z,$),U,B;if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(z);for(B=0;B<H.length;B++)U=H[B],!($.indexOf(U)>=0)&&Object.prototype.propertyIsEnumerable.call(z,U)&&(W[U]=z[U])}return W}function l(z,$){if(z==null)return{};var W={},U=Object.keys(z),B,H;for(H=0;H<U.length;H++)B=U[H],!($.indexOf(B)>=0)&&(W[B]=z[B]);return W}function c(z){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},c(z)}function u(z){return g(z)||p(z)||E(z)||f()}function f(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(z){if(typeof Symbol<"u"&&z[Symbol.iterator]!=null||z["@@iterator"]!=null)return Array.from(z)}function g(z){if(Array.isArray(z))return S(z)}function m(z,$){var W=Object.keys(z);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(z);$&&(U=U.filter(function(B){return Object.getOwnPropertyDescriptor(z,B).enumerable})),W.push.apply(W,U)}return W}function v(z){for(var $=1;$<arguments.length;$++){var W=arguments[$]!=null?arguments[$]:{};$%2?m(Object(W),!0).forEach(function(U){x(z,U,W[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(W)):m(Object(W)).forEach(function(U){Object.defineProperty(z,U,Object.getOwnPropertyDescriptor(W,U))})}return z}function w(z,$){return O(z)||P(z,$)||E(z,$)||_()}function _(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(z,$){if(z){if(typeof z=="string")return S(z,$);var W=Object.prototype.toString.call(z).slice(8,-1);if(W==="Object"&&z.constructor&&(W=z.constructor.name),W==="Map"||W==="Set")return Array.from(z);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return S(z,$)}}function S(z,$){($==null||$>z.length)&&($=z.length);for(var W=0,U=new Array($);W<$;W++)U[W]=z[W];return U}function P(z,$){var W=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(W!=null){var U,B,H,X,ne=[],J=!0,re=!1;try{if(H=(W=W.call(z)).next,$!==0)for(;!(J=(U=H.call(W)).done)&&(ne.push(U.value),ne.length!==$);J=!0);}catch(ge){re=!0,B=ge}finally{try{if(!J&&W.return!=null&&(X=W.return(),Object(X)!==X))return}finally{if(re)throw B}}return ne}}function O(z){if(Array.isArray(z))return z}function j(z,$){if(!(z instanceof $))throw new TypeError("Cannot call a class as a function")}function C(z,$){for(var W=0;W<$.length;W++){var U=$[W];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(z,L(U.key),U)}}function T(z,$,W){return $&&C(z.prototype,$),Object.defineProperty(z,"prototype",{writable:!1}),z}function x(z,$,W){return $=L($),$ in z?Object.defineProperty(z,$,{value:W,enumerable:!0,configurable:!0,writable:!0}):z[$]=W,z}function L(z){var $=F(z,"string");return c($)==="symbol"?$:String($)}function F(z,$){if(c(z)!=="object"||z===null)return z;var W=z[Symbol.toPrimitive];if(W!==void 0){var U=W.call(z,$||"default");if(c(U)!=="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(z)}var V=function(){function z(){var $=this;j(this,z),x(this,"reset",function(){$.isInitialized=!1,$._testMode=!1,$._currentMeasurementId,$._hasLoadedGA=!1,$._isQueuing=!1,$._queueGtag=[]}),x(this,"_gtag",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];$._testMode||$._isQueuing?$._queueGtag.push(U):e.default.apply(void 0,U)}),x(this,"_loadGA",function(W,U){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!$._hasLoadedGA){var H=document.createElement("script");H.async=!0,H.src="".concat(B,"?id=").concat(W),U&&H.setAttribute("nonce",U),document.body.appendChild(H),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},$._hasLoadedGA=!0}}),x(this,"_toGtagOptions",function(W){if(W){var U={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},B=Object.entries(W).reduce(function(H,X){var ne=w(X,2),J=ne[0],re=ne[1];return U[J]?H[U[J]]=re:H[J]=re,H},{});return B}}),x(this,"initialize",function(W){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!W)throw new Error("Require GA_MEASUREMENT_ID");var B=typeof W=="string"?[{trackingId:W}]:W;$._currentMeasurementId=B[0].trackingId;var H=U.gaOptions,X=U.gtagOptions,ne=U.nonce,J=U.testMode,re=J===void 0?!1:J,ge=U.gtagUrl;if($._testMode=re,re||$._loadGA($._currentMeasurementId,ne,ge),$.isInitialized||($._gtag("js",new Date),B.forEach(function(ce){var Je=v(v(v({},$._toGtagOptions(v(v({},H),ce.gaOptions))),X),ce.gtagOptions);Object.keys(Je).length?$._gtag("config",ce.trackingId,Je):$._gtag("config",ce.trackingId)})),$.isInitialized=!0,!re){var Fe=u($._queueGtag);for($._queueGtag=[],$._isQueuing=!1;Fe.length;){var be=Fe.shift();$._gtag.apply($,u(be)),be[0]==="get"&&($._isQueuing=!0)}}}),x(this,"set",function(W){if(!W){console.warn("`fieldsObject` is required in .set()");return}if(c(W)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(W).length===0&&console.warn("empty `fieldsObject` given to .set()"),$._gaCommand("set",W)}),x(this,"_gaCommandSendEvent",function(W,U,B,H,X){$._gtag("event",U,v(v({event_category:W,event_label:B,value:H},X&&{non_interaction:X.nonInteraction}),$._toGtagOptions(X)))}),x(this,"_gaCommandSendEventParameters",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];if(typeof U[0]=="string")$._gaCommandSendEvent.apply($,u(U.slice(1)));else{var H=U[0],X=H.eventCategory,ne=H.eventAction,J=H.eventLabel,re=H.eventValue;H.hitType;var ge=a(H,r);$._gaCommandSendEvent(X,ne,J,re,ge)}}),x(this,"_gaCommandSendTiming",function(W,U,B,H){$._gtag("event","timing_complete",{name:U,value:B,event_category:W,event_label:H})}),x(this,"_gaCommandSendPageview",function(W,U){if(U&&Object.keys(U).length){var B=$._toGtagOptions(U),H=B.title,X=B.location,ne=a(B,i);$._gtag("event","page_view",v(v(v(v({},W&&{page_path:W}),H&&{page_title:H}),X&&{page_location:X}),ne))}else W?$._gtag("event","page_view",{page_path:W}):$._gtag("event","page_view")}),x(this,"_gaCommandSendPageviewParameters",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];if(typeof U[0]=="string")$._gaCommandSendPageview.apply($,u(U.slice(1)));else{var H=U[0],X=H.page;H.hitType;var ne=a(H,s);$._gaCommandSendPageview(X,ne)}}),x(this,"_gaCommandSend",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];var H=typeof U[0]=="string"?U[0]:U[0].hitType;switch(H){case"event":$._gaCommandSendEventParameters.apply($,U);break;case"pageview":$._gaCommandSendPageviewParameters.apply($,U);break;case"timing":$._gaCommandSendTiming.apply($,u(U.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(H));break;default:console.warn("Send command doesn't exist: ".concat(H))}}),x(this,"_gaCommandSet",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];typeof U[0]=="string"&&(U[0]=x({},U[0],U[1])),$._gtag("set",$._toGtagOptions(U[0]))}),x(this,"_gaCommand",function(W){for(var U=arguments.length,B=new Array(U>1?U-1:0),H=1;H<U;H++)B[H-1]=arguments[H];switch(W){case"send":$._gaCommandSend.apply($,B);break;case"set":$._gaCommandSet.apply($,B);break;default:console.warn("Command doesn't exist: ".concat(W))}}),x(this,"ga",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];if(typeof U[0]=="string")$._gaCommand.apply($,U);else{var H=U[0];$._gtag("get",$._currentMeasurementId,"client_id",function(X){$._isQueuing=!1;var ne=$._queueGtag;for(H({get:function(ge){return ge==="clientId"?X:ge==="trackingId"?$._currentMeasurementId:ge==="apiVersion"?"1":void 0}});ne.length;){var J=ne.shift();$._gtag.apply($,u(J))}}),$._isQueuing=!0}return $.ga}),x(this,"event",function(W,U){if(typeof W=="string")$._gtag("event",W,$._toGtagOptions(U));else{var B=W.action,H=W.category,X=W.label,ne=W.value,J=W.nonInteraction,re=W.transport;if(!H||!B){console.warn("args.category AND args.action are required in event()");return}var ge={hitType:"event",eventCategory:(0,t.default)(H),eventAction:(0,t.default)(B)};X&&(ge.eventLabel=(0,t.default)(X)),typeof ne<"u"&&(typeof ne!="number"?console.warn("Expected `args.value` arg to be a Number."):ge.eventValue=ne),typeof J<"u"&&(typeof J!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):ge.nonInteraction=J),typeof re<"u"&&(typeof re!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(re)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),ge.transport=re)),$._gaCommand("send",ge)}}),x(this,"send",function(W){$._gaCommand("send",W)}),this.reset()}return T(z,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),z}();n.GA4=V;var D=new V;n.default=D})(yM);(function(n){function e(a){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ReactGAImplementation=void 0;var t=i(yM);function r(a){if(typeof WeakMap!="function")return null;var l=new WeakMap,c=new WeakMap;return(r=function(f){return f?c:l})(a)}function i(a,l){if(a&&a.__esModule)return a;if(a===null||e(a)!=="object"&&typeof a!="function")return{default:a};var c=r(l);if(c&&c.has(a))return c.get(a);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in a)if(p!=="default"&&Object.prototype.hasOwnProperty.call(a,p)){var g=f?Object.getOwnPropertyDescriptor(a,p):null;g&&(g.get||g.set)?Object.defineProperty(u,p,g):u[p]=a[p]}return u.default=a,c&&c.set(a,u),u}var s=t.GA4;n.ReactGAImplementation=s;var o=t.default;n.default=o})(vM);const ga=Zp(vM),D0="G-V5690YXT75",y$=()=>{console.log("Initializing Google Analytics with ID:",D0);try{ga.initialize(D0,{debug:!1,titleCase:!1,gaOptions:{send_page_view:!1}}),console.log("✅ Google Analytics successfully initialized with ID:",D0)}catch(n){console.error("❌ Error initializing Google Analytics:",n)}},ag=(n,e)=>{ga.send({hitType:"pageview",page:n,title:e})},Lm=(n,e,t={})=>{ga.event({action:n,category:"User Interaction",label:e,custom_parameters:{timestamp:new Date().toISOString(),user_agent:navigator.userAgent,screen_resolution:`${screen.width}x${screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`,...t}})},O0=(n,e,t={})=>{ga.event({action:"project_interaction",category:"Projects",label:n,custom_parameters:{action_type:e,project_name:n,timestamp:new Date().toISOString(),...t}})},qo=(n,e,t={})=>{ga.event({action:"button_click",category:"UI Interaction",label:n,custom_parameters:{button_location:e,page_url:window.location.pathname,timestamp:new Date().toISOString(),...t}})},Ux=(n,e,t="click")=>{ga.event({action:"navigation",category:"Site Navigation",label:`${n} -> ${e}`,custom_parameters:{from_page:n,to_page:e,navigation_method:t,timestamp:new Date().toISOString()}})},Zh=(n,e=null,t=null)=>{ga.event({action:"chatbot_interaction",category:"AI Assistant",label:n,custom_parameters:{action_type:n,message_preview:e?e.substring(0,50):null,response_time:t,timestamp:new Date().toISOString()}})},_$=()=>{var e;const n={session_start:new Date().toISOString(),user_agent:navigator.userAgent,language:navigator.language,platform:navigator.platform,screen_resolution:`${screen.width}x${screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,referrer:document.referrer||"direct",is_mobile:window.innerWidth<=768,connection_type:((e=navigator.connection)==null?void 0:e.effectiveType)||"unknown"};return ga.event({action:"session_start",category:"User Session",custom_parameters:n}),n};function lE({isMobile:n}){const[e,t]=A.useState(50),[r,i]=A.useState(!0),s=c=>{const u=c.currentTarget.offsetWidth,f=c.clientX-c.currentTarget.getBoundingClientRect().left,p=Math.min(Math.max(f/u*100,0),100);t(p)},o=()=>{t(50)},a=()=>{i(!r)},l=e>50?150-e:100;return A.useEffect(()=>{ag("/","Home - Adarsh Gella Portfolio")},[]),k.jsxs(Os,{direction:"column",gap:"2",style:{position:"relative"},className:n?"mwebHome":"",children:[n&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"imageContainer",onClick:a,children:k.jsx("img",{src:r?jx:Bx,alt:"Main and Cartoon Image",className:"imageContainer-main",style:{borderRadius:"15px"}})}),k.jsxs(sE,{size:"5",children:["Hi, I'm ",k.jsx($v,{children:"Adarsh Gella!"}),k.jsx("br",{}),"I'm a student at ",k.jsx(Kt,{href:"https://www.utdallas.edu/fact-sheets/ecs/ms-computer-science/",underline:"hover",target:"blank",children:"UTD"}),", currently pursuing a master's in Computer Science.",k.jsx("br",{}),k.jsx("br",{}),"I'm really passionate about front-end development, especially when it comes to creating intuitive and engaging user interfaces.  ",k.jsx("br",{}),"Right now, I'm working on some new ",k.jsx(Kt,{href:"https://github.com/gadarsh043?tab=repositories",underline:"hover",target:"blank",children:"UI projects"})," and also developing content for my ",k.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),".",k.jsx("br",{}),k.jsx("br",{}),"I love exploring new tech, coding, and user experience. When I'm not coding, you'll probably catch me watching a ton of movies or series, capturing moments for my YouTube channel, or just dancing around with my friends.",k.jsx("br",{}),k.jsx("br",{}),"I enjoy sharing insights about coding practices, discussing new ideas, recommending my",k.jsx(Kt,{href:"https://www.imdb.com/user/ur129777024/lists/",underline:"hover",target:"blank",children:" latest movie finds"}),", or talking about my ",k.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),". I'm all in! Hit me up on ",k.jsx(Kt,{href:"https://www.linkedin.com/in/g-adarsh-sonu/",underline:"hover",target:"blank",children:"LinkedIn"}),", ",k.jsx(Kt,{href:"mailto:g.adarsh043@gmail.com",target:"blank",underline:"hover",children:"Gmail"}),", or",k.jsx(Kt,{href:"https://www.instagram.com/g_adarsh_sonu/",underline:"hover",target:"blank",children:" Instagram"}),"—let's connect and chat about what we're into!"]})]}),!n&&k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"imageContainer",onMouseMove:s,onMouseLeave:o,children:[k.jsx("img",{src:jx,alt:"Main Image",className:"imageContainer-main",style:{clipPath:`polygon(0 0, ${e}% 0, ${e}% 100%, 0 100%)`,opacity:`${e+80}%`,borderRadius:"15px"}}),k.jsx("img",{src:Bx,alt:"Cartoon Image",className:"imageContainer-cartoon",style:{opacity:`${l}%`,borderRadius:"15px"}})]}),k.jsx("br",{}),k.jsx("br",{}),k.jsxs(sE,{size:"5",children:["Hi, I'm ",k.jsx($v,{children:"Adarsh Gella!"}),k.jsx("br",{}),"I'm a student at ",k.jsx(Kt,{href:"https://www.utdallas.edu/fact-sheets/ecs/ms-computer-science/",underline:"hover",target:"blank",children:"UTD"}),", currently pursuing a master's in Computer Science. ",k.jsx("br",{}),"I'm really passionate about front-end development, especially when it comes to ",k.jsx("br",{}),"creating intuitive and engaging user interfaces. Right now, I'm working on some new ",k.jsx("br",{}),k.jsx(Kt,{href:"https://github.com/gadarsh043?tab=repositories",underline:"hover",target:"blank",children:"UI projects"})," and also developing content for my ",k.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),".",k.jsx("br",{}),k.jsx("br",{}),"I love exploring new tech, coding, and user experience. When I'm not coding, ",k.jsx("br",{}),"you'll probably catch me watching a ton of movies or series, capturing moments for ",k.jsx("br",{}),"my YouTube channel, or just dancing around with my friends.",k.jsx("br",{}),k.jsx("br",{}),"I enjoy sharing insights about coding practices, discussing new ideas, recommending my ",k.jsx("br",{}),k.jsx(Kt,{href:"https://www.imdb.com/user/ur129777024/lists/",underline:"hover",target:"blank",children:"latest movie finds"}),", or talking about my ",k.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),". I'm all in! Hit me up on ",k.jsx(Kt,{href:"https://www.linkedin.com/in/g-adarsh-sonu/",underline:"hover",target:"blank",children:"LinkedIn"}),", ",k.jsx(Kt,{href:"mailto:g.adarsh043@gmail.com",target:"blank",underline:"hover",children:"Gmail"}),", or ",k.jsx("br",{}),k.jsx(Kt,{href:"https://www.instagram.com/g_adarsh_sonu/",underline:"hover",target:"blank",children:"Instagram"}),"—let's connect and chat about what we're into!"]}),k.jsx("br",{}),k.jsx("br",{})]})]})}lE.propTypes={isMobile:li.bool};const w$="modulepreload",E$=function(n){return"/"+n},$x={},nm=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=E$(l),l in $x)return;$x[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":w$,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Fd={};Fd.d=(n,e)=>{for(var t in e)Fd.o(e,t)&&!Fd.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Fd.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var fe=globalThis.pdfjsLib={};Fd.d(fe,{AbortException:()=>ic,AnnotationEditorLayer:()=>yA,AnnotationEditorParamsType:()=>pe,AnnotationEditorType:()=>xe,AnnotationEditorUIManager:()=>Kl,AnnotationLayer:()=>_z,AnnotationMode:()=>ho,CMapCompressionType:()=>uE,ColorPicker:()=>Xv,DOMSVGFactory:()=>wS,DrawLayer:()=>AA,FeatureTest:()=>Hn,GlobalWorkerOptions:()=>Fs,ImageKind:()=>Nm,InvalidPDFException:()=>AM,MissingPDFException:()=>rc,OPS:()=>zr,Outliner:()=>ZE,PDFDataRangeTransport:()=>vL,PDFDateString:()=>PM,PDFWorker:()=>Yc,PasswordResponses:()=>T$,PermissionFlag:()=>S$,PixelsPerInch:()=>ra,RenderingCancelledException:()=>ES,TextLayer:()=>qv,UnexpectedResponseException:()=>a_,Util:()=>ae,VerbosityLevel:()=>i_,XfaLayer:()=>_L,build:()=>Z3,createValidAbsoluteUrl:()=>P$,fetchData:()=>d_,getDocument:()=>H3,getFilenameFromUrl:()=>j$,getPdfFilenameFromUrl:()=>B$,getXfaPageViewport:()=>U$,isDataScheme:()=>AS,isPdfFile:()=>bS,noContextMenu:()=>Xn,normalizeUnicode:()=>D$,renderTextLayer:()=>D3,setLayerDimensions:()=>ql,shadow:()=>Me,updateTextLayer:()=>O3,version:()=>J3});const An=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),EM=[1,0,0,1,0,0],cE=[.001,0,0,.001,0,0],A$=1e7,F0=1.35,Rr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},ho={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},b$="pdfjs_internal_editor_",xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},pe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},S$={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Nm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Rt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ed={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},i_={ERRORS:0,WARNINGS:1,INFOS:5},uE={NONE:0,BINARY:1},zr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},T$={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let s_=i_.WARNINGS;function C$(n){Number.isInteger(n)&&(s_=n)}function x$(){return s_}function o_(n){s_>=i_.INFOS&&console.log(`Info: ${n}`)}function _e(n){s_>=i_.WARNINGS&&console.log(`Warning: ${n}`)}function ze(n){throw new Error(n)}function Dt(n,e){n||ze(e)}function R$(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function P$(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=N$(n)}catch{}}const r=e?new URL(n,e):new URL(n);if(R$(r))return r}catch{}return null}function Me(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const ma=function(){function e(t,r){this.constructor===e&&ze("Cannot initialize BaseException."),this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class hE extends ma{constructor(e,t){super(e,"PasswordException"),this.code=t}}class dE extends ma{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class AM extends ma{constructor(e){super(e,"InvalidPDFException")}}class rc extends ma{constructor(e){super(e,"MissingPDFException")}}class a_ extends ma{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class I$ extends ma{constructor(e){super(e,"FormatError")}}class ic extends ma{constructor(e){super(e,"AbortException")}}function bM(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ze("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function l_(n){typeof n!="string"&&ze("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function k$(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function yS(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function M$(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function L$(){try{return new Function(""),!0}catch{return!1}}class Hn{static get isLittleEndian(){return Me(this,"isLittleEndian",M$())}static get isEvalSupported(){return Me(this,"isEvalSupported",L$())}static get isOffscreenCanvasSupported(){return Me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Me(this,"platform",{isMac:navigator.platform.includes("Mac")}):Me(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return Me(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const V0=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var js,Dm,fE;class ae{static makeHexColor(e,t,r){return`#${V0[e]}${V0[t]}${V0[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[r,i]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[i,s]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(r+o)/2,l=Math.sqrt((r+o)**2-4*(r*o-s*i))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[r,s,i,o]}static bezierBoundingBox(e,t,r,i,s,o,a,l,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],I(this,js,fE).call(this,e,r,s,a,t,i,o,l,3*(-e+3*(r-s)+a),6*(e-2*r+s),3*(r-e),c),I(this,js,fE).call(this,e,r,s,a,t,i,o,l,3*(-t+3*(i-o)+l),6*(t-2*i+o),3*(i-t),c),c}}js=new WeakSet,Dm=function(e,t,r,i,s,o,a,l,c,u){if(c<=0||c>=1)return;const f=1-c,p=c*c,g=p*c,m=f*(f*(f*e+3*c*t)+3*p*r)+g*i,v=f*(f*(f*s+3*c*o)+3*p*a)+g*l;u[0]=Math.min(u[0],m),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],m),u[3]=Math.max(u[3],v)},fE=function(e,t,r,i,s,o,a,l,c,u,f,p){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&I(this,js,Dm).call(this,e,t,r,i,s,o,a,l,-f/u,p);return}const g=u**2-4*f*c;if(g<0)return;const m=Math.sqrt(g),v=2*c;I(this,js,Dm).call(this,e,t,r,i,s,o,a,l,(-u+m)/v,p),I(this,js,Dm).call(this,e,t,r,i,s,o,a,l,(-u-m)/v,p)},M(ae,js);function N$(n){return decodeURIComponent(escape(n))}let j0=null,zx=null;function D$(n){return j0||(j0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zx=new Map([["ﬅ","ſt"]])),n.replaceAll(j0,(e,t,r)=>t?t.normalize("NFKC"):zx.get(r))}function O$(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return bM(n)}const SM="pdfjs_internal_id_",es={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class c_{constructor(){this.constructor===c_&&ze("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}var Ef;const sT=class sT{constructor({enableHWA:e=!1}={}){M(this,Ef,!1);this.constructor===sT&&ze("Cannot initialize BaseCanvasFactory."),R(this,Ef,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!h(this,Ef)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ze("Abstract method `_createCanvas` called.")}};Ef=new WeakMap;let zv=sT;class u_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===u_&&ze("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),r=this.isCompressed?uE.BINARY:uE.NONE;return this._fetchData(t,r).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){ze("Abstract method `_fetchData` called.")}}class h_{constructor({baseUrl:e=null}){this.constructor===h_&&ze("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){ze("Abstract method `_fetchData` called.")}}class _S{constructor(){this.constructor===_S&&ze("Cannot initialize BaseSVGFactory.")}create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ze("Abstract method `_createSVG` called.")}}const ns="http://www.w3.org/2000/svg",La=class La{};ve(La,"CSS",96),ve(La,"PDF",72),ve(La,"PDF_TO_CSS_UNITS",La.CSS/La.PDF);let ra=La;var Ba,vi,cs,Vn,uy,Ua,oe,gn,_c,wc,Om,TM,pE,Ec,ld,cd,gE,ud;class F$ extends c_{constructor({docId:t,ownerDocument:r=globalThis.document}={}){super();M(this,oe);M(this,Ba);M(this,vi);M(this,cs);M(this,Vn);M(this,uy);M(this,Ua,0);R(this,cs,t),R(this,Vn,r)}addFilter(t){if(!t)return"none";let r=h(this,oe,gn).get(t);if(r)return r;const[i,s,o]=I(this,oe,Om).call(this,t),a=t.length===1?i:`${i}${s}${o}`;if(r=h(this,oe,gn).get(a),r)return h(this,oe,gn).set(t,r),r;const l=`g_${h(this,cs)}_transfer_map_${tr(this,Ua)._++}`,c=`url(#${l})`;h(this,oe,gn).set(t,c),h(this,oe,gn).set(a,c);const u=I(this,oe,Ec).call(this,l);return I(this,oe,cd).call(this,i,s,o,u),c}addHCMFilter(t,r){var m;const i=`${t}-${r}`,s="base";let o=h(this,oe,_c).get(s);if((o==null?void 0:o.key)===i||(o?((m=o.filter)==null||m.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},h(this,oe,_c).set(s,o)),!t||!r))return o.url;const a=I(this,oe,ud).call(this,t);t=ae.makeHexColor(...a);const l=I(this,oe,ud).call(this,r);if(r=ae.makeHexColor(...l),h(this,oe,wc).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const c=new Array(256);for(let v=0;v<=255;v++){const w=v/255;c[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const u=c.join(","),f=`g_${h(this,cs)}_hcm_filter`,p=o.filter=I(this,oe,Ec).call(this,f);I(this,oe,cd).call(this,u,u,u,p),I(this,oe,pE).call(this,p);const g=(v,w)=>{const _=a[v]/255,E=l[v]/255,S=new Array(w+1);for(let P=0;P<=w;P++)S[P]=_+P/w*(E-_);return S.join(",")};return I(this,oe,cd).call(this,g(0,5),g(1,5),g(2,5),p),o.url=`url(#${f})`,o.url}addAlphaFilter(t){let r=h(this,oe,gn).get(t);if(r)return r;const[i]=I(this,oe,Om).call(this,[t]),s=`alpha_${i}`;if(r=h(this,oe,gn).get(s),r)return h(this,oe,gn).set(t,r),r;const o=`g_${h(this,cs)}_alpha_map_${tr(this,Ua)._++}`,a=`url(#${o})`;h(this,oe,gn).set(t,a),h(this,oe,gn).set(s,a);const l=I(this,oe,Ec).call(this,o);return I(this,oe,gE).call(this,i,l),a}addLuminosityFilter(t){let r=h(this,oe,gn).get(t||"luminosity");if(r)return r;let i,s;if(t?([i]=I(this,oe,Om).call(this,[t]),s=`luminosity_${i}`):s="luminosity",r=h(this,oe,gn).get(s),r)return h(this,oe,gn).set(t,r),r;const o=`g_${h(this,cs)}_luminosity_map_${tr(this,Ua)._++}`,a=`url(#${o})`;h(this,oe,gn).set(t,a),h(this,oe,gn).set(s,a);const l=I(this,oe,Ec).call(this,o);return I(this,oe,TM).call(this,l),t&&I(this,oe,gE).call(this,i,l),a}addHighlightHCMFilter(t,r,i,s,o){var E;const a=`${r}-${i}-${s}-${o}`;let l=h(this,oe,_c).get(t);if((l==null?void 0:l.key)===a||(l?((E=l.filter)==null||E.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},h(this,oe,_c).set(t,l)),!r||!i))return l.url;const[c,u]=[r,i].map(I(this,oe,ud).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,m]=[s,o].map(I(this,oe,ud).bind(this));p<f&&([f,p,g,m]=[p,f,m,g]),h(this,oe,wc).style.color="";const v=(S,P,O)=>{const j=new Array(256),C=(p-f)/O,T=S/255,x=(P-S)/(255*O);let L=0;for(let F=0;F<=O;F++){const V=Math.round(f+F*C),D=T+F*x;for(let z=L;z<=V;z++)j[z]=D;L=V+1}for(let F=L;F<256;F++)j[F]=j[L-1];return j.join(",")},w=`g_${h(this,cs)}_hcm_${t}_filter`,_=l.filter=I(this,oe,Ec).call(this,w);return I(this,oe,pE).call(this,_),I(this,oe,cd).call(this,v(g[0],m[0],5),v(g[1],m[1],5),v(g[2],m[2],5),_),l.url=`url(#${w})`,l.url}destroy(t=!1){t&&h(this,oe,_c).size!==0||(h(this,vi)&&(h(this,vi).parentNode.parentNode.remove(),R(this,vi,null)),h(this,Ba)&&(h(this,Ba).clear(),R(this,Ba,null)),R(this,Ua,0))}}Ba=new WeakMap,vi=new WeakMap,cs=new WeakMap,Vn=new WeakMap,uy=new WeakMap,Ua=new WeakMap,oe=new WeakSet,gn=function(){return h(this,Ba)||R(this,Ba,new Map)},_c=function(){return h(this,uy)||R(this,uy,new Map)},wc=function(){if(!h(this,vi)){const t=h(this,Vn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=h(this,Vn).createElementNS(ns,"svg");i.setAttribute("width",0),i.setAttribute("height",0),R(this,vi,h(this,Vn).createElementNS(ns,"defs")),t.append(i),i.append(h(this,vi)),h(this,Vn).body.append(t)}return h(this,vi)},Om=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=c[p]/255;const f=u.join(",");return[f,f,f]}const[r,i,s]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=r[c]/255,a[c]=i[c]/255,l[c]=s[c]/255;return[o.join(","),a.join(","),l.join(",")]},TM=function(t){const r=h(this,Vn).createElementNS(ns,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},pE=function(t){const r=h(this,Vn).createElementNS(ns,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Ec=function(t){const r=h(this,Vn).createElementNS(ns,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),h(this,oe,wc).append(r),r},ld=function(t,r,i){const s=h(this,Vn).createElementNS(ns,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},cd=function(t,r,i,s){const o=h(this,Vn).createElementNS(ns,"feComponentTransfer");s.append(o),I(this,oe,ld).call(this,o,"feFuncR",t),I(this,oe,ld).call(this,o,"feFuncG",r),I(this,oe,ld).call(this,o,"feFuncB",i)},gE=function(t,r){const i=h(this,Vn).createElementNS(ns,"feComponentTransfer");r.append(i),I(this,oe,ld).call(this,i,"feFuncA",t)},ud=function(t){return h(this,oe,wc).style.color=t,SS(getComputedStyle(h(this,oe,wc)).getPropertyValue("color"))};class V$ extends zv{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}async function d_(n,e="text"){if(hd(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class CM extends u_{_fetchData(e,t){return d_(e,this.isCompressed?"arraybuffer":"text").then(r=>({cMapData:r instanceof ArrayBuffer?new Uint8Array(r):l_(r),compressionType:t}))}}class xM extends h_{_fetchData(e){return d_(e,"arraybuffer").then(t=>new Uint8Array(t))}}class wS extends _S{_createSVG(e){return document.createElementNS(ns,e)}}class lg{constructor({viewBox:e,scale:t,rotation:r,offsetX:i=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=i,this.offsetY=s;const a=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,u,f,p;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,u=0,f=0,p=1;break;case 90:c=0,u=1,f=1,p=0;break;case 270:c=0,u=-1,f=-1,p=0;break;case 0:c=1,u=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let g,m,v,w;c===0?(g=Math.abs(l-e[1])*t+i,m=Math.abs(a-e[0])*t+s,v=(e[3]-e[1])*t,w=(e[2]-e[0])*t):(g=Math.abs(a-e[0])*t+i,m=Math.abs(l-e[1])*t+s,v=(e[2]-e[0])*t,w=(e[3]-e[1])*t),this.transform=[c*t,u*t,f*t,p*t,g-c*t*a-f*t*l,m-u*t*a-p*t*l],this.width=v,this.height=w}get rawDims(){const{viewBox:e}=this;return Me(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new lg({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){return ae.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ae.applyTransform([e[0],e[1]],this.transform),r=ae.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return ae.applyInverseTransform([e,t],this.transform)}}class ES extends ma{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function AS(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function bS(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function j$(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function B$(n,e="document.pdf"){if(typeof n!="string")return e;if(AS(n))return _e('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let s=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=r.exec(decodeURIComponent(s))[0]}catch{}return s||e}class Hx{constructor(){ve(this,"started",Object.create(null));ve(this,"times",[])}time(e){e in this.started&&_e(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_e(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function hd(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Xn(n){n.preventDefault()}function RM(n){console.log("Deprecated API usage: "+n)}let Wx;class PM{static toDateObject(e){if(!e||typeof e!="string")return null;Wx||(Wx=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=Wx.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=u,a+=f):c==="+"&&(o-=u,a-=f),new Date(Date.UTC(r,i,s,o,a,l))}}function U$(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new lg({viewBox:s,scale:e,rotation:t})}function SS(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_e(`Not a valid color format: "${n}"`),[0,0,0])}function $$(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,SS(r))}e.remove()}function ot(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform();return[e,t,r,i,s,o]}function ts(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[e,t,r,i,s,o]}function ql(n,e,t=!1,r=!0){if(e instanceof lg){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=n,a=Hn.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,c=`var(--scale-factor) * ${s}px`,u=a?`round(${l}, 1px)`:`calc(${l})`,f=a?`round(${c}, 1px)`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}r&&n.setAttribute("data-main-rotation",e.rotation)}var $a,za,ir,Ha,hy,IM,Ln,kM,MM,Fm,LM,vE;const dy=class dy{constructor(e){M(this,Ln);M(this,$a,null);M(this,za,null);M(this,ir);M(this,Ha,null);R(this,ir,e)}render(){const e=R(this,$a,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=h(this,ir)._uiManager._signal;e.addEventListener("contextmenu",Xn,{signal:t}),e.addEventListener("pointerdown",I(dy,hy,IM),{signal:t});const r=R(this,Ha,document.createElement("div"));r.className="buttons",e.append(r);const i=h(this,ir).toolbarPosition;if(i){const{style:s}=e,o=h(this,ir)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return I(this,Ln,LM).call(this),e}hide(){var e;h(this,$a).classList.add("hidden"),(e=h(this,za))==null||e.hideDropdown()}show(){h(this,$a).classList.remove("hidden")}addAltTextButton(e){I(this,Ln,Fm).call(this,e),h(this,Ha).prepend(e,h(this,Ln,vE))}addColorPicker(e){R(this,za,e);const t=e.renderButton();I(this,Ln,Fm).call(this,t),h(this,Ha).prepend(t,h(this,Ln,vE))}remove(){var e;h(this,$a).remove(),(e=h(this,za))==null||e.destroy(),R(this,za,null)}};$a=new WeakMap,za=new WeakMap,ir=new WeakMap,Ha=new WeakMap,hy=new WeakSet,IM=function(e){e.stopPropagation()},Ln=new WeakSet,kM=function(e){h(this,ir)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},MM=function(e){h(this,ir)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Fm=function(e){const t=h(this,ir)._uiManager._signal;e.addEventListener("focusin",I(this,Ln,kM).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",I(this,Ln,MM).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Xn,{signal:t})},LM=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${h(this,ir).editorType}-button`),I(this,Ln,Fm).call(this,e),e.addEventListener("click",t=>{h(this,ir)._uiManager.delete()},{signal:h(this,ir)._uiManager._signal}),h(this,Ha).append(e)},vE=function(){const e=document.createElement("div");return e.className="divider",e},M(dy,hy);let mE=dy;var Af,Wa,Ga,ca,NM,DM,OM;class z${constructor(e){M(this,ca);M(this,Af,null);M(this,Wa,null);M(this,Ga);R(this,Ga,e)}show(e,t,r){const[i,s]=I(this,ca,DM).call(this,t,r),{style:o}=h(this,Wa)||R(this,Wa,I(this,ca,NM).call(this));e.append(h(this,Wa)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,Wa).remove()}}Af=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,ca=new WeakSet,NM=function(){const e=R(this,Wa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Xn,{signal:h(this,Ga)._signal});const t=R(this,Af,document.createElement("div"));return t.className="buttons",e.append(t),I(this,ca,OM).call(this),e},DM=function(e,t){let r=0,i=0;for(const s of e){const o=s.y+s.height;if(o<r)continue;const a=s.x+(t?s.width:0);if(o>r){i=a,r=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,r]},OM=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=h(this,Ga)._signal;e.addEventListener("contextmenu",Xn,{signal:r}),e.addEventListener("click",()=>{h(this,Ga).highlightSelection("floating_button")},{signal:r}),h(this,Af).append(e)};function Hv(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function H$(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var fy;class W${constructor(){M(this,fy,0)}get id(){return`${b$}${tr(this,fy)._++}`}}fy=new WeakMap;var bf,py,Sr,Sf,_E;const oT=class oT{constructor(){M(this,Sf);M(this,bf,O$());M(this,py,0);M(this,Sr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Me(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return I(this,Sf,_E).call(this,`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return I(this,Sf,_E).call(this,e,e)}async getFromId(e){h(this,Sr)||R(this,Sr,new Map);const t=h(this,Sr).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=h(this,Sr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){h(this,Sr)||R(this,Sr,new Map);const t=h(this,Sr).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${h(this,bf)}_`)}};bf=new WeakMap,py=new WeakMap,Sr=new WeakMap,Sf=new WeakSet,_E=async function(e,t){h(this,Sr)||R(this,Sr,new Map);let r=h(this,Sr).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${h(this,bf)}_${tr(this,py)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(r.url=t,i=await d_(t,"blob")):i=r.file=t,i.type==="image/svg+xml"){const s=oT._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=async()=>{const f=r.svgUrl=o.result;a.src=await s?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){console.error(i),r=null}return h(this,Sr).set(e,r),r&&h(this,Sr).set(r.id,r),r};let yE=oT;var $t,fo,Tf,zt;class G${constructor(e=128){M(this,$t,[]);M(this,fo,!1);M(this,Tf);M(this,zt,-1);R(this,Tf,e)}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),h(this,fo))return;const l={cmd:e,undo:t,post:r,type:s};if(h(this,zt)===-1){h(this,$t).length>0&&(h(this,$t).length=0),R(this,zt,0),h(this,$t).push(l);return}if(o&&h(this,$t)[h(this,zt)].type===s){a&&(l.undo=h(this,$t)[h(this,zt)].undo),h(this,$t)[h(this,zt)]=l;return}const c=h(this,zt)+1;c===h(this,Tf)?h(this,$t).splice(0,1):(R(this,zt,c),c<h(this,$t).length&&h(this,$t).splice(c)),h(this,$t).push(l)}undo(){if(h(this,zt)===-1)return;R(this,fo,!0);const{undo:e,post:t}=h(this,$t)[h(this,zt)];e(),t==null||t(),R(this,fo,!1),R(this,zt,h(this,zt)-1)}redo(){if(h(this,zt)<h(this,$t).length-1){R(this,zt,h(this,zt)+1),R(this,fo,!0);const{cmd:e,post:t}=h(this,$t)[h(this,zt)];e(),t==null||t(),R(this,fo,!1)}}hasSomethingToUndo(){return h(this,zt)!==-1}hasSomethingToRedo(){return h(this,zt)<h(this,$t).length-1}destroy(){R(this,$t,null)}}$t=new WeakMap,fo=new WeakMap,Tf=new WeakMap,zt=new WeakMap;var gy,FM;class cg{constructor(e){M(this,gy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Hn.platform;for(const[r,i,s={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(I(this,gy,FM).call(this,t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(i.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}gy=new WeakSet,FM=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const my=class my{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return $$(e),Me(this,"_colors",e)}convert(e){const t=SS(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,o)=>s===t[o]))return my._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ae.makeHexColor(...t):e}};ve(my,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let wE=my;var ru,sr,Pt,Yt,iu,us,su,Hr,ou,qa,yi,Wr,Ka,Cf,xf,_i,au,po,wi,vy,go,Rf,Xa,Pf,lu,Qt,je,hs,Ya,If,kf,Mf,Lf,Nf,Df,Of,Ff,Vf,jf,Bf,Uf,$f,mo,Ei,ds,zf,ee,Vm,VM,jM,jm,BM,UM,$M,EE,zM,AE,bE,HM,Tn,io,WM,GM,SE,qM,dd,TE;const Uc=class Uc{constructor(e,t,r,i,s,o,a,l,c){M(this,ee);M(this,ru,new AbortController);M(this,sr,null);M(this,Pt,new Map);M(this,Yt,new Map);M(this,iu,null);M(this,us,null);M(this,su,null);M(this,Hr,new G$);M(this,ou,0);M(this,qa,new Set);M(this,yi,null);M(this,Wr,null);M(this,Ka,new Set);M(this,Cf,!1);M(this,xf,null);M(this,_i,null);M(this,au,null);M(this,po,!1);M(this,wi,null);M(this,vy,new W$);M(this,go,!1);M(this,Rf,!1);M(this,Xa,null);M(this,Pf,null);M(this,lu,null);M(this,Qt,xe.NONE);M(this,je,new Set);M(this,hs,null);M(this,Ya,null);M(this,If,null);M(this,kf,this.blur.bind(this));M(this,Mf,this.focus.bind(this));M(this,Lf,this.copy.bind(this));M(this,Nf,this.cut.bind(this));M(this,Df,this.paste.bind(this));M(this,Of,this.keydown.bind(this));M(this,Ff,this.keyup.bind(this));M(this,Vf,this.onEditingAction.bind(this));M(this,jf,this.onPageChanging.bind(this));M(this,Bf,this.onScaleChanging.bind(this));M(this,Uf,this.onRotationChanging.bind(this));M(this,$f,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});M(this,mo,[0,0]);M(this,Ei,null);M(this,ds,null);M(this,zf,null);this._signal=h(this,ru).signal,R(this,ds,e),R(this,zf,t),R(this,iu,r),this._eventBus=i,this._eventBus._on("editingaction",h(this,Vf)),this._eventBus._on("pagechanging",h(this,jf)),this._eventBus._on("scalechanging",h(this,Bf)),this._eventBus._on("rotationchanging",h(this,Uf)),I(this,ee,BM).call(this),I(this,ee,HM).call(this),I(this,ee,EE).call(this),R(this,us,s.annotationStorage),R(this,xf,s.filterFactory),R(this,Ya,o),R(this,au,a||null),R(this,Cf,l),R(this,lu,c||null),this.viewParameters={realScale:ra.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Uc.prototype,t=o=>h(o,ds).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Me(this,"_keyboardManager",new cg([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,ds).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,ds).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,r;(e=h(this,ru))==null||e.abort(),R(this,ru,null),this._signal=null,this._eventBus._off("editingaction",h(this,Vf)),this._eventBus._off("pagechanging",h(this,jf)),this._eventBus._off("scalechanging",h(this,Bf)),this._eventBus._off("rotationchanging",h(this,Uf));for(const i of h(this,Yt).values())i.destroy();h(this,Yt).clear(),h(this,Pt).clear(),h(this,Ka).clear(),R(this,sr,null),h(this,je).clear(),h(this,Hr).destroy(),(t=h(this,iu))==null||t.destroy(),(r=h(this,wi))==null||r.hide(),R(this,wi,null),h(this,_i)&&(clearTimeout(h(this,_i)),R(this,_i,null)),h(this,Ei)&&(clearTimeout(h(this,Ei)),R(this,Ei,null))}async mlGuess(e){var t;return((t=h(this,lu))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!h(this,lu)}get hcmFilter(){return Me(this,"hcmFilter",h(this,Ya)?h(this,xf).addHCMFilter(h(this,Ya).foreground,h(this,Ya).background):"none")}get direction(){return Me(this,"direction",getComputedStyle(h(this,ds)).direction)}get highlightColors(){return Me(this,"highlightColors",h(this,au)?new Map(h(this,au).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){R(this,Pf,e)}editAltText(e){var t;(t=h(this,iu))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){R(this,ou,e-1)}focusMainContainer(){h(this,ds).focus()}findParent(e,t){for(const r of h(this,Yt).values()){const{x:i,y:s,width:o,height:a}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=s&&t<=s+a)return r}return null}disableUserSelect(e=!1){h(this,zf).classList.toggle("noUserSelect",e)}addShouldRescale(e){h(this,Ka).add(e)}removeShouldRescale(e){h(this,Ka).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ra.PDF_TO_CSS_UNITS;for(const t of h(this,Ka))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=t,a=t.toString(),c=I(this,ee,Vm).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(u){t.empty(),h(this,Qt)===xe.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:xe.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const f of h(this,Yt).values())if(f.hasTextLayer(c)){f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o,text:a});break}}}addToAnnotationStorage(e){!e.isEmpty()&&h(this,us)&&!h(this,us).has(e.id)&&h(this,us).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,h(this,po)&&(R(this,po,!1),I(this,ee,jm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of h(this,je))if(t.div.contains(e)){R(this,Xa,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!h(this,Xa))return;const[e,t]=h(this,Xa);R(this,Xa,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){I(this,ee,EE).call(this),I(this,ee,AE).call(this)}removeEditListeners(){I(this,ee,zM).call(this),I(this,ee,bE).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of h(this,Wr))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of h(this,Wr))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=h(this,sr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of h(this,je)){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of h(this,Wr))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){_e(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of r){const c=i.deserialize(l);if(!c)return;s.push(c)}const o=()=>{for(const l of s)I(this,ee,SE).call(this,l);I(this,ee,TE).call(this,s)},a=()=>{for(const l of s)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){_e(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,Qt)!==xe.NONE&&!this.isEditorHandlingKeyboard&&Uc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,po)&&(R(this,po,!1),I(this,ee,jm).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(I(this,ee,UM).call(this),I(this,ee,AE).call(this),I(this,ee,Tn).call(this,{isEditing:h(this,Qt)!==xe.NONE,isEmpty:I(this,ee,dd).call(this),hasSomethingToUndo:h(this,Hr).hasSomethingToUndo(),hasSomethingToRedo:h(this,Hr).hasSomethingToRedo(),hasSelectedEditor:!1})):(I(this,ee,$M).call(this),I(this,ee,bE).call(this),I(this,ee,Tn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!h(this,Wr)){R(this,Wr,e);for(const t of h(this,Wr))I(this,ee,io).call(this,t.defaultPropertiesToUpdate)}}getId(){return h(this,vy).id}get currentLayer(){return h(this,Yt).get(h(this,ou))}getLayer(e){return h(this,Yt).get(e)}get currentPageIndex(){return h(this,ou)}addLayer(e){h(this,Yt).set(e.pageIndex,e),h(this,go)?e.enable():e.disable()}removeLayer(e){h(this,Yt).delete(e.pageIndex)}updateMode(e,t=null,r=!1){if(h(this,Qt)!==e){if(R(this,Qt,e),e===xe.NONE){this.setEditingState(!1),I(this,ee,GM).call(this);return}this.setEditingState(!0),I(this,ee,WM).call(this),this.unselectAll();for(const i of h(this,Yt).values())i.updateMode(e);if(!t&&r){this.addNewEditorFromKeyboard();return}if(t){for(const i of h(this,Pt).values())if(i.annotationElementId===t){this.setSelected(i),i.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==h(this,Qt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var r;if(h(this,Wr)){switch(e){case pe.CREATE:this.currentLayer.addNewEditor();return;case pe.HIGHLIGHT_DEFAULT_COLOR:(r=h(this,Pf))==null||r.updateColor(t);break;case pe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,If)||R(this,If,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of h(this,je))i.updateParams(e,t);for(const i of h(this,Wr))i.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var s;for(const o of h(this,Pt).values())o.editorType===e&&o.show(t);(((s=h(this,If))==null?void 0:s.get(pe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&I(this,ee,io).call(this,[[pe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(h(this,Rf)!==e){R(this,Rf,e);for(const t of h(this,Yt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of h(this,Pt).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return h(this,Pt).get(e)}addEditor(e){h(this,Pt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(h(this,_i)&&clearTimeout(h(this,_i)),R(this,_i,setTimeout(()=>{this.focusMainContainer(),R(this,_i,null)},0))),h(this,Pt).delete(e.id),this.unselect(e),(!e.annotationElementId||!h(this,qa).has(e.annotationElementId))&&((t=h(this,us))==null||t.remove(e.id))}addDeletedAnnotationElement(e){h(this,qa).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return h(this,qa).has(e)}removeDeletedAnnotationElement(e){h(this,qa).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){h(this,sr)!==e&&(R(this,sr,e),e&&I(this,ee,io).call(this,e.propertiesToUpdate))}updateUI(e){h(this,ee,qM)===e&&I(this,ee,io).call(this,e.propertiesToUpdate)}toggleSelected(e){if(h(this,je).has(e)){h(this,je).delete(e),e.unselect(),I(this,ee,Tn).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,je).add(e),e.select(),I(this,ee,io).call(this,e.propertiesToUpdate),I(this,ee,Tn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of h(this,je))t!==e&&t.unselect();h(this,je).clear(),h(this,je).add(e),e.select(),I(this,ee,io).call(this,e.propertiesToUpdate),I(this,ee,Tn).call(this,{hasSelectedEditor:!0})}isSelected(e){return h(this,je).has(e)}get firstSelectedEditor(){return h(this,je).values().next().value}unselect(e){e.unselect(),h(this,je).delete(e),I(this,ee,Tn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,je).size!==0}get isEnterHandled(){return h(this,je).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){h(this,Hr).undo(),I(this,ee,Tn).call(this,{hasSomethingToUndo:h(this,Hr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:I(this,ee,dd).call(this)})}redo(){h(this,Hr).redo(),I(this,ee,Tn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,Hr).hasSomethingToRedo(),isEmpty:I(this,ee,dd).call(this)})}addCommands(e){h(this,Hr).add(e),I(this,ee,Tn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:I(this,ee,dd).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...h(this,je)],t=()=>{for(const i of e)i.remove()},r=()=>{for(const i of e)I(this,ee,SE).call(this,i)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=h(this,sr))==null||e.commitOrRemove()}hasSomethingToControl(){return h(this,sr)||this.hasSelection}selectAll(){for(const e of h(this,je))e.commit();I(this,ee,TE).call(this,h(this,Pt).values())}unselectAll(){if(!(h(this,sr)&&(h(this,sr).commitOrRemove(),h(this,Qt)!==xe.NONE))&&this.hasSelection){for(const e of h(this,je))e.unselect();h(this,je).clear(),I(this,ee,Tn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;h(this,mo)[0]+=e,h(this,mo)[1]+=t;const[i,s]=h(this,mo),o=[...h(this,je)],a=1e3;h(this,Ei)&&clearTimeout(h(this,Ei)),R(this,Ei,setTimeout(()=>{R(this,Ei,null),h(this,mo)[0]=h(this,mo)[1]=0,this.addCommands({cmd:()=>{for(const l of o)h(this,Pt).has(l.id)&&l.translateInPage(i,s)},undo:()=>{for(const l of o)h(this,Pt).has(l.id)&&l.translateInPage(-i,-s)},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),R(this,yi,new Map);for(const e of h(this,je))h(this,yi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,yi))return!1;this.disableUserSelect(!1);const e=h(this,yi);R(this,yi,null);let t=!1;for(const[{x:i,y:s,pageIndex:o},a]of e)a.newX=i,a.newY=s,a.newPageIndex=o,t||(t=i!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(i,s,o,a)=>{if(h(this,Pt).has(i.id)){const l=h(this,Yt).get(a);l?i._setParentAndPosition(l,s,o):(i.pageIndex=a,i.x=s,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:o,newPageIndex:a}]of e)r(i,s,o,a)},undo:()=>{for(const[i,{savedX:s,savedY:o,savedPageIndex:a}]of e)r(i,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(h(this,yi))for(const r of h(this,yi).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||h(this,je).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return h(this,sr)===e}getActive(){return h(this,sr)}getMode(){return h(this,Qt)}get imageManager(){return Me(this,"imageManager",new yE)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,f,p)=>({x:(u-i)/o,y:1-(c+f-r)/s,width:p/o,height:f/s});break;case"180":a=(c,u,f,p)=>({x:1-(c+f-r)/s,y:1-(u+p-i)/o,width:f/s,height:p/o});break;case"270":a=(c,u,f,p)=>({x:1-(u+p-i)/o,y:(c-r)/s,width:p/o,height:f/s});break;default:a=(c,u,f,p)=>({x:(c-r)/s,y:(u-i)/o,width:f/s,height:p/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:p,y:g,width:m,height:v}of f.getClientRects())m===0||v===0||l.push(a(p,g,m,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(h(this,su)||R(this,su,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=h(this,su))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=h(this,su))==null?void 0:i.get(e.data.id);if(!t)return;const r=h(this,us).getRawValue(t);r&&(h(this,Qt)===xe.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}};ru=new WeakMap,sr=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,iu=new WeakMap,us=new WeakMap,su=new WeakMap,Hr=new WeakMap,ou=new WeakMap,qa=new WeakMap,yi=new WeakMap,Wr=new WeakMap,Ka=new WeakMap,Cf=new WeakMap,xf=new WeakMap,_i=new WeakMap,au=new WeakMap,po=new WeakMap,wi=new WeakMap,vy=new WeakMap,go=new WeakMap,Rf=new WeakMap,Xa=new WeakMap,Pf=new WeakMap,lu=new WeakMap,Qt=new WeakMap,je=new WeakMap,hs=new WeakMap,Ya=new WeakMap,If=new WeakMap,kf=new WeakMap,Mf=new WeakMap,Lf=new WeakMap,Nf=new WeakMap,Df=new WeakMap,Of=new WeakMap,Ff=new WeakMap,Vf=new WeakMap,jf=new WeakMap,Bf=new WeakMap,Uf=new WeakMap,$f=new WeakMap,mo=new WeakMap,Ei=new WeakMap,ds=new WeakMap,zf=new WeakMap,ee=new WeakSet,Vm=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},VM=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=I(this,ee,Vm).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(h(this,wi)||R(this,wi,new z$(this)),h(this,wi).show(r,i,this.direction==="ltr"))},jM=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){h(this,hs)&&((s=h(this,wi))==null||s.hide(),R(this,hs,null),I(this,ee,Tn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===h(this,hs))return;if(!I(this,ee,Vm).call(this,e).closest(".textLayer")){h(this,hs)&&((o=h(this,wi))==null||o.hide(),R(this,hs,null),I(this,ee,Tn).call(this,{hasSelectedText:!1}));return}if((a=h(this,wi))==null||a.hide(),R(this,hs,t),I(this,ee,Tn).call(this,{hasSelectedText:!0}),!(h(this,Qt)!==xe.HIGHLIGHT&&h(this,Qt)!==xe.NONE)&&(h(this,Qt)===xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),R(this,po,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=this._signal,c=u=>{u.type==="pointerup"&&u.button!==0||(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),u.type==="pointerup"&&I(this,ee,jm).call(this,"main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}},jm=function(e=""){h(this,Qt)===xe.HIGHLIGHT?this.highlightSelection(e):h(this,Cf)&&I(this,ee,VM).call(this)},BM=function(){document.addEventListener("selectionchange",I(this,ee,jM).bind(this),{signal:this._signal})},UM=function(){const e=this._signal;window.addEventListener("focus",h(this,Mf),{signal:e}),window.addEventListener("blur",h(this,kf),{signal:e})},$M=function(){window.removeEventListener("focus",h(this,Mf)),window.removeEventListener("blur",h(this,kf))},EE=function(){const e=this._signal;window.addEventListener("keydown",h(this,Of),{signal:e}),window.addEventListener("keyup",h(this,Ff),{signal:e})},zM=function(){window.removeEventListener("keydown",h(this,Of)),window.removeEventListener("keyup",h(this,Ff))},AE=function(){const e=this._signal;document.addEventListener("copy",h(this,Lf),{signal:e}),document.addEventListener("cut",h(this,Nf),{signal:e}),document.addEventListener("paste",h(this,Df),{signal:e})},bE=function(){document.removeEventListener("copy",h(this,Lf)),document.removeEventListener("cut",h(this,Nf)),document.removeEventListener("paste",h(this,Df))},HM=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Tn=function(e){Object.entries(e).some(([r,i])=>h(this,$f)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,$f),e)}),h(this,Qt)===xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&I(this,ee,io).call(this,[[pe.HIGHLIGHT_FREE,!0]]))},io=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},WM=function(){if(!h(this,go)){R(this,go,!0);for(const e of h(this,Yt).values())e.enable();for(const e of h(this,Pt).values())e.enable()}},GM=function(){if(this.unselectAll(),h(this,go)){R(this,go,!1);for(const e of h(this,Yt).values())e.disable();for(const e of h(this,Pt).values())e.disable()}},SE=function(e){const t=h(this,Yt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},qM=function(){let e=null;for(e of h(this,je));return e},dd=function(){if(h(this,Pt).size===0)return!0;if(h(this,Pt).size===1)for(const e of h(this,Pt).values())return e.isEmpty();return!1},TE=function(e){for(const t of h(this,je))t.unselect();h(this,je).clear();for(const t of e)t.isEmpty()||(h(this,je).add(t),t.select());I(this,ee,Tn).call(this,{hasSelectedEditor:this.hasSelection})},ve(Uc,"TRANSLATE_SMALL",1),ve(Uc,"TRANSLATE_BIG",10);let Kl=Uc;var fs,ps,Gr,gs,or,cu,qr,Hf,CE;const is=class is{constructor(e){M(this,Hf);M(this,fs,"");M(this,ps,!1);M(this,Gr,null);M(this,gs,null);M(this,or,null);M(this,cu,!1);M(this,qr,null);R(this,qr,e)}static initialize(e){is._l10nPromise||(is._l10nPromise=e)}async render(){const e=R(this,Gr,document.createElement("button"));e.className="altText";const t=await is._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const r=h(this,qr)._uiManager._signal;e.addEventListener("contextmenu",Xn,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),h(this,qr)._uiManager.editAltText(h(this,qr))};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(R(this,cu,!0),i(s))},{signal:r}),await I(this,Hf,CE).call(this),e}finish(){h(this,Gr)&&(h(this,Gr).focus({focusVisible:h(this,cu)}),R(this,cu,!1))}isEmpty(){return!h(this,fs)&&!h(this,ps)}get data(){return{altText:h(this,fs),decorative:h(this,ps)}}set data({altText:e,decorative:t}){h(this,fs)===e&&h(this,ps)===t||(R(this,fs,e),R(this,ps,t),I(this,Hf,CE).call(this))}toggle(e=!1){h(this,Gr)&&(!e&&h(this,or)&&(clearTimeout(h(this,or)),R(this,or,null)),h(this,Gr).disabled=!e)}destroy(){var e;(e=h(this,Gr))==null||e.remove(),R(this,Gr,null),R(this,gs,null)}};fs=new WeakMap,ps=new WeakMap,Gr=new WeakMap,gs=new WeakMap,or=new WeakMap,cu=new WeakMap,qr=new WeakMap,Hf=new WeakSet,CE=async function(){var i;const e=h(this,Gr);if(!e)return;if(!h(this,fs)&&!h(this,ps)){e.classList.remove("done"),(i=h(this,gs))==null||i.remove();return}e.classList.add("done"),is._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(s=>{e.setAttribute("aria-label",s)});let t=h(this,gs);if(!t){R(this,gs,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const s=t.id=`alt-text-tooltip-${h(this,qr).id}`;e.setAttribute("aria-describedby",s);const o=100,a=h(this,qr)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(h(this,or)),R(this,or,null)},{once:!0}),e.addEventListener("mouseenter",()=>{R(this,or,setTimeout(()=>{R(this,or,null),h(this,gs).classList.add("show"),h(this,qr)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),e.addEventListener("mouseleave",()=>{var l;h(this,or)&&(clearTimeout(h(this,or)),R(this,or,null)),(l=h(this,gs))==null||l.classList.remove("show")},{signal:a})}t.innerText=h(this,ps)?await is._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):h(this,fs),t.parentNode||e.append(t);const r=h(this,qr).getImageForAltText();r==null||r.setAttribute("aria-describedby",t.id)},ve(is,"_l10nPromise",null);let Wv=is;var Qa,Kr,mn,uu,Ja,Jt,Za,hu,du,vn,Wf,el,vo,Gf,tl,ms,Ai,fu,pu,Tr,qf,yy,we,xE,Kf,RE,PE,KM,XM,IE,kE,ME,YM,QM,JM,ZM,LE,fd;const qe=class qe{constructor(e){M(this,we);M(this,Qa,null);M(this,Kr,null);M(this,mn,null);M(this,uu,!1);M(this,Ja,!1);M(this,Jt,null);M(this,Za,null);M(this,hu,this.focusin.bind(this));M(this,du,this.focusout.bind(this));M(this,vn,null);M(this,Wf,"");M(this,el,!1);M(this,vo,null);M(this,Gf,!1);M(this,tl,!1);M(this,ms,!1);M(this,Ai,null);M(this,fu,0);M(this,pu,0);M(this,Tr,null);ve(this,"_initialOptions",Object.create(null));ve(this,"_isVisible",!0);ve(this,"_uiManager",null);ve(this,"_focusEventsAllowed",!0);ve(this,"_l10nPromise",null);M(this,qf,!1);M(this,yy,qe._zIndex++);this.constructor===qe&&ze("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=qe.prototype._resizeWithKeyboard,t=Kl.TRANSLATE_SMALL,r=Kl.TRANSLATE_BIG;return Me(this,"_resizerKeyboardManager",new cg([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],qe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new q$({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,r){if(qe._l10nPromise||(qe._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(s=>[s,e.get(s.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),r!=null&&r.strings)for(const s of r.strings)qe._l10nPromise.set(s,e.get(s));if(qe._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);qe._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,qf)}set _isDraggable(e){var t;R(this,qf,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,yy)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):I(this,we,fd).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(h(this,el)?R(this,el,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/o,this.fixAndSetPosition()}translate(e,t){I(this,we,xE).call(this,this.parentDimensions,e,t)}translateInPage(e,t){h(this,vo)||R(this,vo,[this.x,this.y]),I(this,we,xE).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){h(this,vo)||R(this,vo,[this.x,this.y]);const[r,i]=this.parentDimensions;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,l]=this.getBaseTranslation();s+=a,o+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!h(this,vo)&&(h(this,vo)[0]!==this.x||h(this,vo)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=qe,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:i,y:s,width:o,height:a}=this;if(o*=t,a*=r,i*=t,s*=r,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-o,i)),s=Math.max(0,Math.min(r-a,s));break;case 90:i=Math.max(0,Math.min(t-a,i)),s=Math.min(r,Math.max(o,s));break;case 180:i=Math.min(t,Math.max(o,i)),s=Math.min(r,Math.max(a,s));break;case 270:i=Math.min(t,Math.max(a,i)),s=Math.max(0,Math.min(r-o,s));break}this.x=i/=t,this.y=s/=r;const[l,c]=this.getBaseTranslation();i+=l,s+=c;const{style:u}=this.div;u.left=`${(100*i).toFixed(2)}%`,u.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return I(r=qe,Kf,RE).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return I(r=qe,Kf,RE).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this,i=t*e,s=r*e;return Hn.isCSSRoundSupported?[Math.round(i),Math.round(s)]:[i,s]}setDims(e,t){const[r,i]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,h(this,Ja)||(this.div.style.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),s=!h(this,Ja)&&t.endsWith("%");if(i&&s)return;const[o,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!h(this,Ja)&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=h(this,mn))==null||e.finish()}async addEditToolbar(){return h(this,vn)||h(this,tl)?h(this,vn):(R(this,vn,new mE(this)),this.div.append(h(this,vn).render()),h(this,mn)&&h(this,vn).addAltTextButton(await h(this,mn).render()),h(this,vn))}removeEditToolbar(){var e;h(this,vn)&&(h(this,vn).remove(),R(this,vn,null),(e=h(this,mn))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){h(this,mn)||(Wv.initialize(qe._l10nPromise),R(this,mn,new Wv(this)),h(this,Qa)&&(h(this,mn).data=h(this,Qa),R(this,Qa,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=h(this,mn))==null?void 0:e.data}set altTextData(e){h(this,mn)&&(h(this,mn).data=e)}hasAltText(){var e;return!((e=h(this,mn))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=h(this,uu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",h(this,hu),{signal:e}),this.div.addEventListener("focusout",h(this,du),{signal:e});const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*r/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Hv(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(R(this,el,!0),this._isDraggable){I(this,we,YM).call(this,e);return}I(this,we,ME).call(this,e)}moveInDOM(){h(this,Ai)&&clearTimeout(h(this,Ai)),R(this,Ai,setTimeout(()=>{var e;R(this,Ai,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,u=t/i,f=this.x*s,p=this.y*o,g=this.width*s,m=this.height*o;switch(r){case 0:return[f+c+a,o-p-u-m+l,f+c+g+a,o-p-u+l];case 90:return[f+u+a,o-p+c+l,f+u+m+a,o-p+c+g+l];case 180:return[f-c-g+a,o-p+u+l,f-c+a,o-p+u+m+l];case 270:return[f-u-m+a,o-p-c-g+l,f-u+a,o-p-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,o]=e,a=s-r,l=o-i;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-i,l,a];case 180:return[s,t-i,a,l];case 270:return[s,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){R(this,tl,!0)}disableEditMode(){R(this,tl,!1)}isInEditMode(){return h(this,tl)}shouldGetKeyboardEvents(){return h(this,ms)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,r;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",h(this,hu),{signal:e}),(r=this.div)==null||r.addEventListener("focusout",h(this,du),{signal:e})}rotate(e){}serialize(e=!1,t=null){ze("An editor must be serializable")}static deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});i.rotation=e.rotation,R(i,Qa,e.accessibilityData);const[s,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/s,i.y=l/o,i.width=c/s,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",h(this,hu)),this.div.removeEventListener("focusout",h(this,du)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(this,Ai)&&(clearTimeout(h(this,Ai)),R(this,Ai,null)),I(this,we,fd).call(this),this.removeEditToolbar(),h(this,Tr)){for(const e of h(this,Tr).values())clearTimeout(e);R(this,Tr,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(I(this,we,KM).call(this),h(this,Jt).classList.remove("hidden"),Hv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),R(this,Za,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=h(this,Jt).children;if(!h(this,Kr)){R(this,Kr,Array.from(t));const o=I(this,we,QM).bind(this),a=I(this,we,JM).bind(this),l=this._uiManager._signal;for(const c of h(this,Kr)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",I(this,we,ZM).bind(this,u),{signal:l}),qe._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(f=>c.setAttribute("aria-label",f))}}const r=h(this,Kr)[0];let i=0;for(const o of t){if(o===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(h(this,Kr).length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)h(this,Jt).append(h(this,Jt).firstChild);else if(s>i)for(let a=0;a<s-i;a++)h(this,Jt).firstChild.before(h(this,Jt).lastChild);let o=0;for(const a of t){const c=h(this,Kr)[o++].getAttribute("data-resizer-name");qe._l10nPromise.get(`pdfjs-editor-resizer-label-${c}`).then(u=>a.setAttribute("aria-label",u))}}I(this,we,LE).call(this,0),R(this,ms,!0),h(this,Jt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){h(this,ms)&&I(this,we,kE).call(this,h(this,Wf),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){I(this,we,fd).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!h(this,vn)){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=h(this,vn))==null||i.show())});return}(t=h(this,vn))==null||t.show()}unselect(){var e,t,r,i;(e=h(this,Jt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=h(this,vn))==null||i.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return h(this,Gf)}set isEditing(e){R(this,Gf,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){R(this,Ja,!0);const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){h(this,Tr)||R(this,Tr,new Map);const{action:r}=e;let i=h(this,Tr).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),h(this,Tr).delete(r),h(this,Tr).size===0&&R(this,Tr,null)},qe._telemetryTimeout),h(this,Tr).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),R(this,uu,!1)}disable(){this.div&&(this.div.tabIndex=-1),R(this,uu,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Qa=new WeakMap,Kr=new WeakMap,mn=new WeakMap,uu=new WeakMap,Ja=new WeakMap,Jt=new WeakMap,Za=new WeakMap,hu=new WeakMap,du=new WeakMap,vn=new WeakMap,Wf=new WeakMap,el=new WeakMap,vo=new WeakMap,Gf=new WeakMap,tl=new WeakMap,ms=new WeakMap,Ai=new WeakMap,fu=new WeakMap,pu=new WeakMap,Tr=new WeakMap,qf=new WeakMap,yy=new WeakMap,we=new WeakSet,xE=function([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this.fixAndSetPosition()},Kf=new WeakSet,RE=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},PE=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},KM=function(){if(h(this,Jt))return;R(this,Jt,document.createElement("div")),h(this,Jt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");h(this,Jt).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",I(this,we,XM).bind(this,r),{signal:t}),i.addEventListener("contextmenu",Xn,{signal:t}),i.tabIndex=-1}this.div.prepend(h(this,Jt))},XM=function(e,t){var v;t.preventDefault();const{isMac:r}=Hn.platform;if(t.button!==0||t.ctrlKey&&r)return;(v=h(this,mn))==null||v.toggle(!1);const i=I(this,we,kE).bind(this,e),s=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",i,a),window.addEventListener("contextmenu",Xn,{signal:o});const l=this.x,c=this.y,u=this.width,f=this.height,p=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{var w;this.parent.togglePointerEvents(!0),(w=h(this,mn))==null||w.toggle(!0),this._isDraggable=s,window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),window.removeEventListener("pointermove",i,a),window.removeEventListener("contextmenu",Xn),this.parent.div.style.cursor=p,this.div.style.cursor=g,I(this,we,IE).call(this,l,c,u,f)};window.addEventListener("pointerup",m,{signal:o}),window.addEventListener("blur",m,{signal:o})},IE=function(e,t,r,i){const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===t&&a===r&&l===i||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=s,this.y=o;const[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=i,this.x=e,this.y=t;const[c,u]=this.parentDimensions;this.setDims(c*r,u*i),this.fixAndSetPosition()},mustExec:!0})},kE=function(e,t){const[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=qe.MIN_SIZE/r,u=qe.MIN_SIZE/i,f=U=>Math.round(U*1e4)/1e4,p=I(this,we,PE).call(this,this.rotation),g=(U,B)=>[p[0]*U+p[2]*B,p[1]*U+p[3]*B],m=I(this,we,PE).call(this,360-this.rotation),v=(U,B)=>[m[0]*U+m[2]*B,m[1]*U+m[3]*B];let w,_,E=!1,S=!1;switch(e){case"topLeft":E=!0,w=(U,B)=>[0,0],_=(U,B)=>[U,B];break;case"topMiddle":w=(U,B)=>[U/2,0],_=(U,B)=>[U/2,B];break;case"topRight":E=!0,w=(U,B)=>[U,0],_=(U,B)=>[0,B];break;case"middleRight":S=!0,w=(U,B)=>[U,B/2],_=(U,B)=>[0,B/2];break;case"bottomRight":E=!0,w=(U,B)=>[U,B],_=(U,B)=>[0,0];break;case"bottomMiddle":w=(U,B)=>[U/2,B],_=(U,B)=>[U/2,0];break;case"bottomLeft":E=!0,w=(U,B)=>[0,B],_=(U,B)=>[U,0];break;case"middleLeft":S=!0,w=(U,B)=>[0,B/2],_=(U,B)=>[U,B/2];break}const P=w(a,l),O=_(a,l);let j=g(...O);const C=f(s+j[0]),T=f(o+j[1]);let x=1,L=1,[F,V]=this.screenToPageTranslation(t.movementX,t.movementY);if([F,V]=v(F/r,V/i),E){const U=Math.hypot(a,l);x=L=Math.max(Math.min(Math.hypot(O[0]-P[0]-F,O[1]-P[1]-V)/U,1/a,1/l),c/a,u/l)}else S?x=Math.max(c,Math.min(1,Math.abs(O[0]-P[0]-F)))/a:L=Math.max(u,Math.min(1,Math.abs(O[1]-P[1]-V)))/l;const D=f(a*x),z=f(l*L);j=g(..._(D,z));const $=C-j[0],W=T-j[1];this.width=D,this.height=z,this.x=$,this.y=W,this.setDims(r*D,i*z),this.fixAndSetPosition()},ME=function(e){const{isMac:t}=Hn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},YM=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let r,i;const s=this._uiManager._signal;t&&(this.div.classList.add("moving"),r={passive:!0,capture:!0,signal:s},R(this,fu,e.clientX),R(this,pu,e.clientY),i=a=>{const{clientX:l,clientY:c}=a,[u,f]=this.screenToPageTranslation(l-h(this,fu),c-h(this,pu));R(this,fu,l),R(this,pu,c),this._uiManager.dragSelectedEditors(u,f)},window.addEventListener("pointermove",i,r));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",i,r)),R(this,el,!1),this._uiManager.endDragSession()||I(this,we,ME).call(this,e)};window.addEventListener("pointerup",o,{signal:s}),window.addEventListener("blur",o,{signal:s})},QM=function(e){qe._resizerKeyboardManager.exec(this,e)},JM=function(e){var t;h(this,ms)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==h(this,Jt)&&I(this,we,fd).call(this)},ZM=function(e){R(this,Wf,h(this,ms)?e:"")},LE=function(e){if(h(this,Kr))for(const t of h(this,Kr))t.tabIndex=e},fd=function(){if(R(this,ms,!1),I(this,we,LE).call(this,-1),h(this,Za)){const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=h(this,Za);I(this,we,IE).call(this,e,t,r,i),R(this,Za,null)}},M(qe,Kf),ve(qe,"_borderLineWidth",-1),ve(qe,"_colorManager",new wE),ve(qe,"_zIndex",1),ve(qe,"_telemetryTimeout",1e3);let Be=qe;class q$ extends Be{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Gx=3285377520,br=4294901760,pi=65535;class eL{constructor(e){this.h1=e?e&4294967295:Gx,this.h2=e?e&4294967295:Gx}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let v=0,w=e.length;v<w;v++){const _=e.charCodeAt(v);_<=255?t[r++]=_:(t[r++]=_>>>8,t[r++]=_&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,l=0,c=this.h1,u=this.h2;const f=3432918353,p=461845907,g=f&pi,m=p&pi;for(let v=0;v<i;v++)v&1?(a=o[v],a=a*f&br|a*g&pi,a=a<<15|a>>>17,a=a*p&br|a*m&pi,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[v],l=l*f&br|l*g&pi,l=l<<15|l>>>17,l=l*p&br|l*m&pi,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,s){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*f&br|a*g&pi,a=a<<15|a>>>17,a=a*p&br|a*m&pi,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&br|e*36045&pi,t=t*4283543511&br|((t<<16|e>>>16)*2950163797&br)>>>16,e^=t>>>1,e=e*444984403&br|e*60499&pi,t=t*3301882366&br|((t<<16|e>>>16)*3120437893&br)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const NE=Object.freeze({map:null,hash:"",transfer:void 0});var nl,Zt,_y,tL;class TS{constructor(){M(this,_y);M(this,nl,!1);M(this,Zt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=h(this,Zt).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return h(this,Zt).get(e)}remove(e){if(h(this,Zt).delete(e),h(this,Zt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of h(this,Zt).values())if(t instanceof Be)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=h(this,Zt).get(e);let i=!1;if(r!==void 0)for(const[s,o]of Object.entries(t))r[s]!==o&&(i=!0,r[s]=o);else i=!0,h(this,Zt).set(e,t);i&&I(this,_y,tL).call(this),t instanceof Be&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return h(this,Zt).has(e)}getAll(){return h(this,Zt).size>0?yS(h(this,Zt)):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return h(this,Zt).size}resetModified(){h(this,nl)&&(R(this,nl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new nL(this)}get serializable(){if(h(this,Zt).size===0)return NE;const e=new Map,t=new eL,r=[],i=Object.create(null);let s=!1;for(const[o,a]of h(this,Zt)){const l=a instanceof Be?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:NE}get editorStats(){let e=null;const t=new Map;for(const r of h(this,Zt).values()){if(!(r instanceof Be))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:s}=i;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[s]||(e[s]=new Map);for(const[a,l]of Object.entries(i)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}}nl=new WeakMap,Zt=new WeakMap,_y=new WeakSet,tL=function(){h(this,nl)||(R(this,nl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Xf;class nL extends TS{constructor(t){super();M(this,Xf);const{map:r,hash:i,transfer:s}=t.serializable,o=structuredClone(r,s?{transfer:s}:null);R(this,Xf,{map:o,hash:i,transfer:s})}get print(){ze("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,Xf)}}Xf=new WeakMap;var gu;class K${constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){M(this,gu,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),h(this,gu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||h(this,gu).has(e.loadedName))){if(Dt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:s}=e,o=new FontFace(r,i,s);this.addNativeFontFace(o);try{await o.load(),h(this,gu).add(r),t==null||t(e)}catch{_e(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw _e(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Me(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(An||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Me(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Dt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Me(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(P,O){return P.charCodeAt(O)<<24|P.charCodeAt(O+1)<<16|P.charCodeAt(O+2)<<8|P.charCodeAt(O+3)&255}function i(P,O,j,C){const T=P.substring(0,O),x=P.substring(O+j);return T+C+x}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(P,O){if(++c>30){_e("Load test font never loaded."),O();return}if(l.font="30px "+P,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(u.bind(null,P,O))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=i(p,976,f.length,f);const m=16,v=1482184792;let w=r(p,m);for(s=0,o=f.length-3;s<o;s+=4)w=w-v+r(f,s)|0;s<f.length&&(w=w-v+r(f+"XXX",s)|0),p=i(p,m,4,k$(w));const _=`url(data:font/opentype;base64,${btoa(p)});`,E=`@font-face {font-family:"${f}";src:${_}}`;this.insertRule(E);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const P of[e.loadedName,f]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=P,S.append(O)}this._document.body.append(S),u(f,()=>{S.remove(),t.complete()})}}gu=new WeakMap;class X${constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=bM(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),r}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(s){_e(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(s,o){};const i=[];for(let s=0,o=r.length;s<o;)switch(r[s++]){case es.BEZIER_CURVE_TO:{const[a,l,c,u,f,p]=r.slice(s,s+6);i.push(g=>g.bezierCurveTo(a,l,c,u,f,p)),s+=6}break;case es.MOVE_TO:{const[a,l]=r.slice(s,s+2);i.push(c=>c.moveTo(a,l)),s+=2}break;case es.LINE_TO:{const[a,l]=r.slice(s,s+2);i.push(c=>c.lineTo(a,l)),s+=2}break;case es.QUADRATIC_CURVE_TO:{const[a,l,c,u]=r.slice(s,s+4);i.push(f=>f.quadraticCurveTo(a,l,c,u)),s+=4}break;case es.RESTORE:i.push(a=>a.restore());break;case es.SAVE:i.push(a=>a.save());break;case es.SCALE:Dt(i.length===2,"Scale command is only valid at the third position.");break;case es.TRANSFORM:{const[a,l,c,u,f,p]=r.slice(s,s+6);i.push(g=>g.transform(a,l,c,u,f,p)),s+=6}break;case es.TRANSLATE:{const[a,l]=r.slice(s,s+2);i.push(c=>c.translate(a,l)),s+=2}break}return this.compiledGlyphs[t]=function(o,a){i[0](o),i[1](o),o.scale(a,-a);for(let l=2,c=i.length;l<c;l++)i[l](o)}}}if(An){var DE=Promise.withResolvers(),Vd=null;(async()=>{const e=await nm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await nm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await nm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await nm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,o;return new Map(Object.entries({fs:e,http:t,https:r,url:i,canvas:s,path2d:o}))})().then(e=>{Vd=e,DE.resolve()},e=>{_e(`loadPackages: ${e}`),Vd=new Map,DE.resolve()})}class zi{static get promise(){return DE.promise}static get(e){return Vd==null?void 0:Vd.get(e)}}const rL=function(n){return zi.get("fs").promises.readFile(n).then(t=>new Uint8Array(t))};class Y$ extends c_{}class Q$ extends zv{_createCanvas(e,t){return zi.get("canvas").createCanvas(e,t)}}class J$ extends u_{_fetchData(e,t){return rL(e).then(r=>({cMapData:r,compressionType:t}))}}class Z$ extends h_{_fetchData(e){return rL(e)}}const Pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function OE(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class ug{constructor(){this.constructor===ug&&ze("Cannot initialize BaseShadingPattern.")}getPattern(){ze("Abstract method `getPattern` called.")}}class e3 extends ug{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===Pn.STROKE||i===Pn.FILL){const o=t.current.getClippedPathBoundingBox(i,ot(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l,!0),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=ae.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),OE(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(r);s.setTransform(f)}else OE(e,this._bbox),s=this._createGradient(e);return s}}function B0(n,e,t,r,i,s,o,a){const l=e.coords,c=e.colors,u=n.data,f=n.width*4;let p;l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=s,s=o,o=p),l[r+1]>l[i+1]&&(p=r,r=i,i=p,p=o,o=a,a=p),l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=s,s=o,o=p);const g=(l[t]+e.offsetX)*e.scaleX,m=(l[t+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,w=(l[r+1]+e.offsetY)*e.scaleY,_=(l[i]+e.offsetX)*e.scaleX,E=(l[i+1]+e.offsetY)*e.scaleY;if(m>=E)return;const S=c[s],P=c[s+1],O=c[s+2],j=c[o],C=c[o+1],T=c[o+2],x=c[a],L=c[a+1],F=c[a+2],V=Math.round(m),D=Math.round(E);let z,$,W,U,B,H,X,ne;for(let J=V;J<=D;J++){if(J<w){const ce=J<m?0:(m-J)/(m-w);z=g-(g-v)*ce,$=S-(S-j)*ce,W=P-(P-C)*ce,U=O-(O-T)*ce}else{let ce;J>E?ce=1:w===E?ce=0:ce=(w-J)/(w-E),z=v-(v-_)*ce,$=j-(j-x)*ce,W=C-(C-L)*ce,U=T-(T-F)*ce}let re;J<m?re=0:J>E?re=1:re=(m-J)/(m-E),B=g-(g-_)*re,H=S-(S-x)*re,X=P-(P-L)*re,ne=O-(O-F)*re;const ge=Math.round(Math.min(z,B)),Fe=Math.round(Math.max(z,B));let be=f*J+ge*4;for(let ce=ge;ce<=Fe;ce++)re=(z-ce)/(z-B),re<0?re=0:re>1&&(re=1),u[be++]=$-($-H)*re|0,u[be++]=W-(W-X)*re|0,u[be++]=U-(U-ne)*re|0,u[be++]=255}}function t3(n,e,t){const r=e.coords,i=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(s=0;s<l;s++){let u=s*a;for(let f=0;f<c;f++,u++)B0(n,t,r[u],r[u+1],r[u+a],i[u],i[u+1],i[u+a]),B0(n,t,r[u+a+1],r[u+1],r[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(s=0,o=r.length;s<o;s+=3)B0(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class n3 extends ug{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),g=c/f,m=u/p,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/m},w=f+2*2,_=p+2*2,E=r.getCanvas("mesh",w,_,!1),S=E.context,P=S.createImageData(f,p);if(t){const j=P.data;for(let C=0,T=j.length;C<T;C+=4)j[C]=t[0],j[C+1]=t[1],j[C+2]=t[2],j[C+3]=255}for(const j of this._figures)t3(P,j,v);return S.putImageData(P,2,2),{canvas:E.canvas,offsetX:a-2*g,offsetY:l-2*m,scaleX:g,scaleY:m}}getPattern(e,t,r,i){OE(e,this._bbox);let s;if(i===Pn.SHADING)s=ae.singularValueDecompose2dScale(ot(e));else if(s=ae.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=ae.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,i===Pn.SHADING?null:this._background,t.cachedCanvases);return i!==Pn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class r3 extends ug{getPattern(){return"hotpink"}}function i3(n){switch(n[0]){case"RadialAxial":return new e3(n);case"Mesh":return new n3(n);case"Dummy":return new r3}throw new Error(`Unknown IR type: ${n[0]}`)}const qx={COLORED:1,UNCOLORED:2},wy=class wy{constructor(e,t,r,i,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){const t=this.operatorList,r=this.bbox,i=this.xstep,s=this.ystep,o=this.paintType,a=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;o_("TilingType: "+a);const u=r[0],f=r[1],p=r[2],g=r[3],m=ae.singularValueDecompose2dScale(this.matrix),v=ae.singularValueDecompose2dScale(this.baseTransform),w=[m[0]*v[0],m[1]*v[1]],_=this.getSizeAndScale(i,this.ctx.canvas.width,w[0]),E=this.getSizeAndScale(s,this.ctx.canvas.height,w[1]),S=e.cachedCanvases.getCanvas("pattern",_.size,E.size,!0),P=S.context,O=c.createCanvasGraphics(P);O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,o,l);let j=u,C=f,T=p,x=g;return u<0&&(j=0,T+=Math.abs(u)),f<0&&(C=0,x+=Math.abs(f)),P.translate(-(_.scale*j),-(E.scale*C)),O.transform(_.scale,0,0,E.scale,0,0),P.save(),this.clipBbox(O,j,C,T,x),O.baseTransform=ot(O.ctx),O.executeOperatorList(t),O.endDrawing(),{canvas:S.canvas,scaleX:_.scale,scaleY:E.scale,offsetX:j,offsetY:C}}getSizeAndScale(e,t,r){e=Math.abs(e);const i=Math.max(wy.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const o=i-t,a=s-r;e.ctx.rect(t,r,o,a),e.current.updateRectMinMax(ot(e.ctx),[t,r,i,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case qx.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case qx.UNCOLORED:const a=ae.makeHexColor(r[0],r[1],r[2]);i.fillStyle=a,i.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new I$(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,i){let s=r;i!==Pn.SHADING&&(s=ae.transform(s,t.baseTransform),this.matrix&&(s=ae.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};ve(wy,"MAX_PATTERN_SIZE",3e3);let FE=wy;function s3({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=Hn.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],u=r>>3,f=r&7,p=n.length;t=new Uint32Array(t.buffer);let g=0;for(let m=0;m<i;m++){for(const w=e+u;e<w;e++){const _=e<p?n[e]:255;t[g++]=_&128?c:l,t[g++]=_&64?c:l,t[g++]=_&32?c:l,t[g++]=_&16?c:l,t[g++]=_&8?c:l,t[g++]=_&4?c:l,t[g++]=_&2?c:l,t[g++]=_&1?c:l}if(f===0)continue;const v=e<p?n[e++]:255;for(let w=0;w<f;w++)t[g++]=v&1<<7-w?c:l}return{srcPos:e,destPos:g}}const Kx=16,Xx=100,o3=15,Yx=10,Qx=1e3,Bn=16;function a3(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},n.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},n.transform=function(r,i,s,o,a,l){e.transform(r,i,s,o,a,l),this.__originalTransform(r,i,s,o,a,l)},n.setTransform=function(r,i,s,o,a,l){e.setTransform(r,i,s,o,a,l),this.__originalSetTransform(r,i,s,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,o,a){e.bezierCurveTo(t,r,i,s,o,a),this.__originalBezierCurveTo(t,r,i,s,o,a)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class l3{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function rm(n,e,t,r,i,s,o,a,l,c){const[u,f,p,g,m,v]=ot(n);if(f===0&&p===0){const E=o*u+m,S=Math.round(E),P=a*g+v,O=Math.round(P),j=(o+l)*u+m,C=Math.abs(Math.round(j)-S)||1,T=(a+c)*g+v,x=Math.abs(Math.round(T)-O)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(g),S,O),n.drawImage(e,t,r,i,s,0,0,C,x),n.setTransform(u,f,p,g,m,v),[C,x]}if(u===0&&g===0){const E=a*p+m,S=Math.round(E),P=o*f+v,O=Math.round(P),j=(a+c)*p+m,C=Math.abs(Math.round(j)-S)||1,T=(o+l)*f+v,x=Math.abs(Math.round(T)-O)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,S,O),n.drawImage(e,t,r,i,s,0,0,x,C),n.setTransform(u,f,p,g,m,v),[x,C]}n.drawImage(e,t,r,i,s,o,a,l,c);const w=Math.hypot(u,f),_=Math.hypot(p,g);return[w*l,_*c]}function c3(n){const{width:e,height:t}=n;if(e>Qx||t>Qx)return null;const r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o=new Uint8Array(s*(t+1)),a,l,c;const u=e+7&-8;let f=new Uint8Array(u*t),p=0;for(const _ of n.data){let E=128;for(;E>0;)f[p++]=_&E?0:255,E>>=1}let g=0;for(p=0,f[p]!==0&&(o[0]=1,++g),l=1;l<e;l++)f[p]!==f[p+1]&&(o[l]=f[p]?2:1,++g),p++;for(f[p]!==0&&(o[l]=2,++g),a=1;a<t;a++){p=a*u,c=a*s,f[p-u]!==f[p]&&(o[c]=f[p]?1:8,++g);let _=(f[p]?4:0)+(f[p-u]?8:0);for(l=1;l<e;l++)_=(_>>2)+(f[p+1]?4:0)+(f[p-u+1]?8:0),i[_]&&(o[c+l]=i[_],++g),p++;if(f[p-u]!==f[p]&&(o[c+l]=f[p]?2:4,++g),g>r)return null}for(p=u*(t-1),c=a*s,f[p]!==0&&(o[c]=8,++g),l=1;l<e;l++)f[p]!==f[p+1]&&(o[c+l]=f[p]?4:8,++g),p++;if(f[p]!==0&&(o[c+l]=4,++g),g>r)return null;const m=new Int32Array([0,s,-1,0,-s,0,0,0,1]),v=new Path2D;for(a=0;g&&a<=t;a++){let _=a*s;const E=_+e;for(;_<E&&!o[_];)_++;if(_===E)continue;v.moveTo(_%s,a);const S=_;let P=o[_];do{const O=m[P];do _+=O;while(!o[_]);const j=o[_];j!==5&&j!==10?(P=j,o[_]=0):(P=j&51*P>>4,o[_]&=P>>2|P<<2),v.lineTo(_%s,_/s|0),o[_]||--g}while(S!==_);--a}return f=null,o=null,function(_){_.save(),_.scale(1/e,-1/t),_.translate(0,-t),_.fill(v),_.beginPath(),_.restore()}}class Jx{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=EM,this.textMatrixScale=1,this.fontMatrix=cE,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=pn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=ae.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=ae.applyTransform(t,e),i=ae.applyTransform(t.slice(2),e),s=ae.applyTransform([t[0],t[3]],e),o=ae.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],s[0],o[0]),this.minY=Math.min(this.minY,r[1],i[1],s[1],o[1]),this.maxX=Math.max(this.maxX,r[0],i[0],s[0],o[0]),this.maxY=Math.max(this.maxY,r[1],i[1],s[1],o[1])}updateScalingPathMinMax(e,t){ae.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,s,o,a,l,c,u){const f=ae.bezierBoundingBox(t,r,i,s,o,a,l,c,u);u||this.updateRectMinMax(e,f)}getPathBoundingBox(e=Pn.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Pn.STROKE){t||ze("Stroke bounding box must include transform.");const i=ae.singularValueDecompose2dScale(t),s=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;r[0]-=s,r[1]-=o,r[2]+=s,r[3]+=o}return r}updateClipFromPath(){const e=ae.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Pn.FILL,t=null){return ae.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Zx(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%Bn,s=(t-i)/Bn,o=i===0?s:s+1,a=n.createImageData(r,Bn);let l=0,c;const u=e.data,f=a.data;let p,g,m,v;if(e.kind===Nm.GRAYSCALE_1BPP){const w=u.byteLength,_=new Uint32Array(f.buffer,0,f.byteLength>>2),E=_.length,S=r+7>>3,P=4294967295,O=Hn.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(m=p<s?Bn:i,c=0,g=0;g<m;g++){const j=w-l;let C=0;const T=j>S?r:j*8-7,x=T&-8;let L=0,F=0;for(;C<x;C+=8)F=u[l++],_[c++]=F&128?P:O,_[c++]=F&64?P:O,_[c++]=F&32?P:O,_[c++]=F&16?P:O,_[c++]=F&8?P:O,_[c++]=F&4?P:O,_[c++]=F&2?P:O,_[c++]=F&1?P:O;for(;C<T;C++)L===0&&(F=u[l++],L=128),_[c++]=F&L?P:O,L>>=1}for(;c<E;)_[c++]=0;n.putImageData(a,0,p*Bn)}}else if(e.kind===Nm.RGBA_32BPP){for(g=0,v=r*Bn*4,p=0;p<s;p++)f.set(u.subarray(l,l+v)),l+=v,n.putImageData(a,0,g),g+=Bn;p<o&&(v=r*i*4,f.set(u.subarray(l,l+v)),n.putImageData(a,0,g))}else if(e.kind===Nm.RGB_24BPP)for(m=Bn,v=r*m,p=0;p<o;p++){for(p>=s&&(m=i,v=r*m),c=0,g=v;g--;)f[c++]=u[l++],f[c++]=u[l++],f[c++]=u[l++],f[c++]=255;n.putImageData(a,0,p*Bn)}else throw new Error(`bad image kind: ${e.kind}`)}function e1(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%Bn,s=(t-i)/Bn,o=i===0?s:s+1,a=n.createImageData(r,Bn);let l=0;const c=e.data,u=a.data;for(let f=0;f<o;f++){const p=f<s?Bn:i;({srcPos:l}=s3({src:c,srcPos:l,dest:u,width:r,height:p,nonBlackColor:0})),n.putImageData(a,0,f*Bn)}}function td(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function im(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!An){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function t1(n,e){if(e)return!0;const t=ae.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*ra.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const u3=["butt","round","square"],h3=["miter","round","bevel"],d3={},n1={};var ua,VE,jE;const aT=class aT{constructor(e,t,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},l,c){M(this,ua);this.ctx=e,this.current=new Jx(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new l3(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...ot(this.compositeCtx))}this.ctx.save(),im(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ot(this.ctx)}executeOperatorList(e,t,r,i){const s=e.argsArray,o=e.fnArray;let a=t||0;const l=s.length;if(l===a)return a;const c=l-a>Yx&&typeof r=="function",u=c?Date.now()+o3:0;let f=0;const p=this.commonObjs,g=this.objs;let m;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,r),a;if(m=o[a],m!==zr.dependency)this[m].apply(this,s[a]);else for(const v of s[a]){const w=v.startsWith("g_")?p:g;if(!w.has(v))return w.get(v,r),a}if(a++,a===l)return a;if(c&&++f>Yx){if(Date.now()>u)return r(),a;f=0}}}endDrawing(){I(this,ua,VE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),I(this,ua,jE).call(this)}_scaleImage(e,t){const r=e.width,i=e.height;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=i,c="prescale1",u,f;for(;s>2&&a>1||o>2&&l>1;){let p=a,g=l;s>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/p),o>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/g),u=this.cachedCanvases.getCanvas(c,p,g),f=u.context,f.clearRect(0,0,p,g),f.drawImage(e,0,0,a,l,0,0,p,g),e=u.canvas,a=p,l=g,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:i}=e,s=this.current.fillColor,o=this.current.patternFill,a=ot(t);let l,c,u,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const x=l.get(c);if(x&&!o){const L=Math.round(Math.min(a[0],a[2])+a[4]),F=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:x,offsetX:L,offsetY:F}}u=x}u||(f=this.cachedCanvases.getCanvas("maskCanvas",r,i),e1(f.context,e));let p=ae.transform(a,[1/r,0,0,-1/i,0,0]);p=ae.transform(p,[1,0,0,1,0,-i]);const[g,m,v,w]=ae.getAxialAlignedBoundingBox([0,0,r,i],p),_=Math.round(v-g)||1,E=Math.round(w-m)||1,S=this.cachedCanvases.getCanvas("fillCanvas",_,E),P=S.context,O=g,j=m;P.translate(-O,-j),P.transform(...p),u||(u=this._scaleImage(f.canvas,ts(P)),u=u.img,l&&o&&l.set(c,u)),P.imageSmoothingEnabled=t1(ot(P),e.interpolate),rm(P,u,0,0,u.width,u.height,0,0,r,i),P.globalCompositeOperation="source-in";const C=ae.transform(ts(P),[1,0,0,1,-O,-j]);return P.fillStyle=o?s.getPattern(t,this,C,Pn.FILL):s,P.fillRect(0,0,r,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,S.canvas)),{canvas:S.canvas,offsetX:Math.round(O),offsetY:Math.round(j)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=u3[e]}setLineJoin(e){this.ctx.lineJoin=h3[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(...ot(this.suspendedCtx)),td(this.suspendedCtx,s),a3(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),td(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],o=i[1],a=i[2]-s,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,o,a,l,c,u,f){let p=e.canvas,g=l-u,m=c-f;if(o){if(g<0||m<0||g+r>p.width||m+i>p.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,i),_=w.context;_.drawImage(p,-g,-m),o.some(E=>E!==0)&&(_.globalCompositeOperation="destination-atop",_.fillStyle=ae.makeHexColor(...o),_.fillRect(0,0,r,i),_.globalCompositeOperation="source-over"),p=w.canvas,g=m=0}else if(o.some(w=>w!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(g,m,r,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=ae.makeHexColor(...o),e.fillRect(g,m,r,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,c,r,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(p,g,m,r,i,l,c,r,i),t.restore()}save(){this.inSMaskMode?(td(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),td(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,s,o){this.ctx.transform(e,t,r,i,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const i=this.ctx,s=this.current;let o=s.x,a=s.y,l,c;const u=ot(i),f=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,p=f?r.slice(0):null;for(let g=0,m=0,v=e.length;g<v;g++)switch(e[g]|0){case zr.rectangle:o=t[m++],a=t[m++];const w=t[m++],_=t[m++],E=o+w,S=a+_;i.moveTo(o,a),w===0||_===0?i.lineTo(E,S):(i.lineTo(E,a),i.lineTo(E,S),i.lineTo(o,S)),f||s.updateRectMinMax(u,[o,a,E,S]),i.closePath();break;case zr.moveTo:o=t[m++],a=t[m++],i.moveTo(o,a),f||s.updatePathMinMax(u,o,a);break;case zr.lineTo:o=t[m++],a=t[m++],i.lineTo(o,a),f||s.updatePathMinMax(u,o,a);break;case zr.curveTo:l=o,c=a,o=t[m+4],a=t[m+5],i.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],o,a),s.updateCurvePathMinMax(u,l,c,t[m],t[m+1],t[m+2],t[m+3],o,a,p),m+=6;break;case zr.curveTo2:l=o,c=a,i.bezierCurveTo(o,a,t[m],t[m+1],t[m+2],t[m+3]),s.updateCurvePathMinMax(u,l,c,o,a,t[m],t[m+1],t[m+2],t[m+3],p),o=t[m+2],a=t[m+3],m+=4;break;case zr.curveTo3:l=o,c=a,o=t[m+2],a=t[m+3],i.bezierCurveTo(t[m],t[m+1],o,a,o,a),s.updateCurvePathMinMax(u,l,c,t[m],t[m+1],o,a,o,a,p),m+=4;break;case zr.closePath:i.closePath();break}f&&s.updateScalingPathMinMax(u,p),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(t.save(),t.strokeStyle=r.getPattern(t,this,ts(t),Pn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let s=!1;i&&(t.save(),t.fillStyle=r.getPattern(t,this,ts(t),Pn.FILL),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=d3}eoClip(){this.pendingClip=n1}beginText(){this.current.textMatrix=EM,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||cE,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&_e("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const s=r.loadedName||"sans-serif",o=((u=r.systemFontInfo)==null?void 0:u.css)||`"${s}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const l=r.italic?"italic":"normal";let c=t;t<Kx?c=Kx:t>Xx&&(c=Xx),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,s,o){this.current.textMatrix=[e,t,r,i,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,i){const s=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=l&pn.FILL_STROKE_MASK,f=!!(l&pn.ADD_TO_PATH_FLAG),p=o.patternFill&&!a.missingFile;let g;(a.disableFontFace||f||p)&&(g=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||p?(s.save(),s.translate(t,r),s.beginPath(),g(s,c),i&&s.setTransform(...i),(u===pn.FILL||u===pn.FILL_STROKE)&&s.fill(),(u===pn.STROKE||u===pn.FILL_STROKE)&&s.stroke(),s.restore()):((u===pn.FILL||u===pn.FILL_STROKE)&&s.fillText(e,t,r),(u===pn.STROKE||u===pn.FILL_STROKE)&&s.strokeText(e,t,r)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ot(s),x:t,y:r,fontSize:c,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return Me(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,f=e.length,p=r.vertical,g=p?1:-1,m=r.defaultVMetrics,v=i*t.fontMatrix[0],w=t.textRenderingMode===pn.FILL&&!r.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),c>0?s.scale(u,-1):s.scale(u,1);let _;if(t.patternFill){s.save();const j=t.fillColor.getPattern(s,this,ts(s),Pn.FILL);_=ot(s),s.restore(),s.fillStyle=j}let E=t.lineWidth;const S=t.textMatrixScale;if(S===0||E===0){const j=t.textRenderingMode&pn.FILL_STROKE_MASK;(j===pn.STROKE||j===pn.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=S;if(o!==1&&(s.scale(o,o),E/=o),s.lineWidth=E,r.isInvalidPDFjsFont){const j=[];let C=0;for(const T of e)j.push(T.unicode),C+=T.width;s.fillText(j.join(""),0,0),t.x+=C*v*u,s.restore(),this.compose();return}let P=0,O;for(O=0;O<f;++O){const j=e[O];if(typeof j=="number"){P+=g*j*i/1e3;continue}let C=!1;const T=(j.isSpace?l:0)+a,x=j.fontChar,L=j.accent;let F,V,D=j.width;if(p){const $=j.vmetric||m,W=-(j.vmetric?$[1]:D*.5)*v,U=$[2]*v;D=$?-$[0]:D,F=W/o,V=(P+U)/o}else F=P/o,V=0;if(r.remeasure&&D>0){const $=s.measureText(x).width*1e3/i*o;if(D<$&&this.isFontSubpixelAAEnabled){const W=D/$;C=!0,s.save(),s.scale(W,1),F/=W}else D!==$&&(F+=(D-$)/2e3*i/o)}if(this.contentVisible&&(j.isInFont||r.missingFile)){if(w&&!L)s.fillText(x,F,V);else if(this.paintChar(x,F,V,_),L){const $=F+i*L.offset.x/o,W=V-i*L.offset.y/o;this.paintChar(L.fontChar,$,W,_)}}const z=p?D*v-T*c:D*v+T*c;P+=z,C&&s.restore()}p?t.y-=P:t.x+=P*u,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,s=r.fontSize,o=r.fontDirection,a=i.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*o,f=r.fontMatrix||cE,p=e.length,g=r.textRenderingMode===pn.INVISIBLE;let m,v,w,_;if(!(g||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(u,o),m=0;m<p;++m){if(v=e[m],typeof v=="number"){_=a*v*s/1e3,this.ctx.translate(_,0),r.x+=_*u;continue}const E=(v.isSpace?c:0)+l,S=i.charProcOperatorList[v.operatorListId];if(!S){_e(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),t.scale(s,s),t.transform(...f),this.executeOperatorList(S),this.restore()),w=ae.applyTransform([v.width,0],f)[0]*s+E,t.translate(w,0),r.x+=w*u}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,s,o){this.ctx.rect(r,i,s-r,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],i=this.baseTransform||ot(this.ctx),s={createCanvasGraphics:o=>new aT(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new FE(e,r,this.ctx,s,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){const i=ae.makeHexColor(e,t,r);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(e,t,r){const i=ae.makeHexColor(e,t,r);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=i3(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,ts(t),Pn.SHADING);const i=ts(t);if(i){const{width:s,height:o}=t.canvas,[a,l,c,u]=ae.getAxialAlignedBoundingBox([0,0,s,o],i);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ze("Should not call beginInlineImage")}beginImageData(){ze("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ot(this.ctx),t)){const r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.current.updateRectMinMax(ot(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||o_("TODO: Support non-isolated groups."),e.knockout&&_e("Knockout groups not supported.");const r=ot(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=ae.getAxialAlignedBoundingBox(e.bbox,ot(t));const s=[0,0,t.canvas.width,t.canvas.height];i=ae.intersect(i,s)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),c=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,l,c),p=f.context;p.translate(-o,-a),p.transform(...r),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),td(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=ot(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const s=ae.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,s){if(I(this,ua,VE).call(this),im(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[l,c]=ae.singularValueDecompose2dScale(ot(this.ctx)),{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),p=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:g,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),im(this.ctx)}else im(this.ctx),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.endPath()}this.current=new Jx(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),I(this,ua,jE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=c3(e)),i.compiled)){i.compiled(r);return}const s=this._createMaskCanvas(e),o=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=ot(a);a.transform(t,r,i,s,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,f=o.length;u<f;u+=2){const p=ae.transform(l,[t,r,i,s,o[u],o[u+1]]),[g,m]=ae.applyTransform([0,0],p);a.drawImage(c.canvas,g,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:o,width:a,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=u.context;f.save();const p=this.getObject(o,s);e1(f,p),f.globalCompositeOperation="source-in",f.fillStyle=i?r.getPattern(f,this,ts(t),Pn.FILL):r,f.fillRect(0,0,a,l),f.restore(),t.save(),t.transform(...c),t.scale(1,-1),rm(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){_e("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){_e("Dependent image isn't ready yet");return}const o=s.width,a=s.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[t,0,0,r,i[c],i[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,i=this.ctx;if(this.save(),!An){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/t,-1/r);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,r).context;Zx(l,e),s=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(s,ts(i));i.imageSmoothingEnabled=t1(ot(i),e.interpolate),rm(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const s=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,o).context;Zx(l,e),i=this.applyTransferMapsToCanvas(l)}for(const s of t)r.save(),r.transform(...s.transform),r.scale(1,-1),rm(r,i,s.x,s.y,s.w,s.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===n1?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ot(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let o,a;if(r===0&&i===0){const l=Math.abs(t),c=Math.abs(s);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,f=c*e;o=u<1?1/u:1,a=f<1?1/f:1}}else{const l=Math.abs(t*s-r*i),c=Math.hypot(t,r),u=Math.hypot(i,s);if(e===0)o=u/l,a=c/l;else{const f=e*l;o=u>f?u/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[i,s]=this.getScaleForStroking();if(t.lineWidth=r||1,i===1&&s===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(i,s),o.length>0){const a=Math.max(i,s);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ua=new WeakSet,VE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},jE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Xc=aT;for(const n in zr)Xc.prototype[n]!==void 0&&(Xc.prototype[zr[n]]=Xc.prototype[n]);var Yf,Qf;class Fs{static get workerPort(){return h(this,Yf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");R(this,Yf,e)}static get workerSrc(){return h(this,Qf)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");R(this,Qf,e)}}Yf=new WeakMap,Qf=new WeakMap,M(Fs,Yf,null),M(Fs,Qf,"");const sm={UNKNOWN:0,DATA:1,ERROR:2},bt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nr(n){switch(n instanceof Error||typeof n=="object"&&n!==null||ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new ic(n.message);case"MissingPDFException":return new rc(n.message);case"PasswordException":return new hE(n.message,n.code);case"UnexpectedResponseException":return new a_(n.message,n.status);case"UnknownErrorException":return new dE(n.message,n.details);default:return new dE(n.message,n.toString())}}var ji,iL,sL,Bm;class pd{constructor(e,t,r){M(this,ji);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=i=>{const s=i.data;if(s.targetName!==this.sourceName)return;if(s.stream){I(this,ji,sL).call(this,s);return}if(s.callback){const a=s.callbackId,l=this.callbackCapabilities[a];if(!l)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],s.callback===sm.DATA)l.resolve(s.data);else if(s.callback===sm.ERROR)l.reject(nr(s.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[s.action];if(!o)throw new Error(`Unknown action from worker: ${s.action}`);if(s.callbackId){const a=this.sourceName,l=s.sourceName;new Promise(function(c){c(o(s.data))}).then(function(c){r.postMessage({sourceName:a,targetName:l,callback:sm.DATA,callbackId:s.callbackId,data:c})},function(c){r.postMessage({sourceName:a,targetName:l,callback:sm.ERROR,callbackId:s.callbackId,reason:nr(c)})});return}if(s.streamId){I(this,ji,iL).call(this,s);return}o(s.data)},r.addEventListener("message",this._onComObjOnMessage)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:bt.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Dt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:bt.CANCEL,streamId:s,reason:nr(c)}),u.promise}},r)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ji=new WeakSet,iL=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:bt.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:bt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Dt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:bt.ERROR,streamId:t,reason:nr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(a(e.data,l))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:bt.START_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:bt.START_COMPLETE,streamId:t,reason:nr(c)})})},sL=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case bt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(nr(e.reason));break;case bt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(nr(e.reason));break;case bt.PULL:if(!a){s.postMessage({sourceName:r,targetName:i,stream:bt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){var c;l((c=a.onPull)==null?void 0:c.call(a))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:bt.PULL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:r,targetName:i,stream:bt.PULL_COMPLETE,streamId:t,reason:nr(l)})});break;case bt.ENQUEUE:if(Dt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case bt.CLOSE:if(Dt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),I(this,ji,Bm).call(this,o,t);break;case bt.ERROR:Dt(o,"error should have stream controller"),o.controller.error(nr(e.reason)),I(this,ji,Bm).call(this,o,t);break;case bt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(nr(e.reason)),I(this,ji,Bm).call(this,o,t);break;case bt.CANCEL:if(!a)break;new Promise(function(l){var c;l((c=a.onCancel)==null?void 0:c.call(a,nr(e.reason)))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:bt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:r,targetName:i,stream:bt.CANCEL_COMPLETE,streamId:t,reason:nr(l)})}),a.sinkCapability.reject(nr(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Bm=async function(e,t){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var rl,Jf;class f3{constructor({parsedData:e,rawData:t}){M(this,rl);M(this,Jf);R(this,rl,e),R(this,Jf,t)}getRaw(){return h(this,Jf)}get(e){return h(this,rl).get(e)??null}getAll(){return yS(h(this,rl))}has(e){return h(this,rl).has(e)}}rl=new WeakMap,Jf=new WeakMap;const so=Symbol("INTERNAL");var Zf,ep,tp,mu;class p3{constructor(e,{name:t,intent:r,usage:i}){M(this,Zf,!1);M(this,ep,!1);M(this,tp,!1);M(this,mu,!0);R(this,Zf,!!(e&Rr.DISPLAY)),R(this,ep,!!(e&Rr.PRINT)),this.name=t,this.intent=r,this.usage=i}get visible(){if(h(this,tp))return h(this,mu);if(!h(this,mu))return!1;const{print:e,view:t}=this.usage;return h(this,Zf)?(t==null?void 0:t.viewState)!=="OFF":h(this,ep)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==so&&ze("Internal method `_setVisible` called."),R(this,tp,r),R(this,mu,t)}}Zf=new WeakMap,ep=new WeakMap,tp=new WeakMap,mu=new WeakMap;var yo,$e,vu,yu,np,BE;class g3{constructor(e,t=Rr.DISPLAY){M(this,np);M(this,yo,null);M(this,$e,new Map);M(this,vu,null);M(this,yu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,R(this,yu,e.order);for(const r of e.groups)h(this,$e).set(r.id,new p3(t,r));if(e.baseState==="OFF")for(const r of h(this,$e).values())r._setVisible(so,!1);for(const r of e.on)h(this,$e).get(r)._setVisible(so,!0);for(const r of e.off)h(this,$e).get(r)._setVisible(so,!1);R(this,vu,this.getHash())}}isVisible(e){if(h(this,$e).size===0)return!0;if(!e)return o_("Optional content group not defined."),!0;if(e.type==="OCG")return h(this,$e).has(e.id)?h(this,$e).get(e.id).visible:(_e(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return I(this,np,BE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!h(this,$e).has(t))return _e(`Optional content group not found: ${t}`),!0;if(h(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!h(this,$e).has(t))return _e(`Optional content group not found: ${t}`),!0;if(!h(this,$e).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!h(this,$e).has(t))return _e(`Optional content group not found: ${t}`),!0;if(!h(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!h(this,$e).has(t))return _e(`Optional content group not found: ${t}`),!0;if(h(this,$e).get(t).visible)return!1}return!0}return _e(`Unknown optional content policy ${e.policy}.`),!0}return _e(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const r=h(this,$e).get(e);if(!r){_e(`Optional content group not found: ${e}`);return}r._setVisible(so,!!t,!0),R(this,yo,null)}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=h(this,$e).get(i);if(s)switch(r){case"ON":s._setVisible(so,!0);break;case"OFF":s._setVisible(so,!1);break;case"Toggle":s._setVisible(so,!s.visible);break}}R(this,yo,null)}get hasInitialVisibility(){return h(this,vu)===null||this.getHash()===h(this,vu)}getOrder(){return h(this,$e).size?h(this,yu)?h(this,yu).slice():[...h(this,$e).keys()]:null}getGroups(){return h(this,$e).size>0?yS(h(this,$e)):null}getGroup(e){return h(this,$e).get(e)||null}getHash(){if(h(this,yo)!==null)return h(this,yo);const e=new eL;for(const[t,r]of h(this,$e))e.update(`${t}:${r.visible}`);return R(this,yo,e.hexdigest())}}yo=new WeakMap,$e=new WeakMap,vu=new WeakMap,yu=new WeakMap,np=new WeakSet,BE=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let o;if(Array.isArray(s))o=I(this,np,BE).call(this,s);else if(h(this,$e).has(s))o=h(this,$e).get(s).visible;else return _e(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class m3{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Dt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});Dt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,i,s;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new v3(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new y3(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class v3{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=bS(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class y3{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function _3(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),s(u)}if(t=o(n),t){const u=c(t);return s(u)}if(t=r("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),s(u)}function r(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),g=l_(f);f=p.decode(g),e=!1}catch{}}return f}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function o(u){const f=[];let p;const g=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(u))!==null;){let[,v,w,_]=p;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[w,_]}const m=[];for(let v=0;v<f.length&&v in f;++v){let[w,_]=f[v];_=a(_),w&&(_=unescape(_),v===0&&(_=l(_))),m.push(_)}return m.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const g=f[p].indexOf('"');g!==-1&&(f[p]=f[p].slice(0,g),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function l(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),m=u.slice(f+1).replace(/^[^']*'/,"");return i(p,m)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,g,m){if(g==="q"||g==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,w){return String.fromCharCode(parseInt(w,16))}),i(p,m);try{m=atob(m)}catch{}return i(p,m)})}return""}function CS({getResponseHeader:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function xS(n){const e=n("Content-Disposition");if(e){let t=_3(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(bS(t))return t}return null}function f_(n,e){return n===404||n===0&&e.startsWith("file:")?new rc('Missing PDF "'+e+'".'):new a_(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function oL(n){return n===200||n===206}function aL(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function lL(n){const e=new Headers;for(const t in n){const r=n[t];r!==void 0&&e.append(t,r)}return e}function cL(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(_e(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class r1{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new w3(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new E3(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class w3{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=lL(this._stream.httpHeaders);const r=t.url;fetch(r,aL(this._headers,this._withCredentials,this._abortController)).then(i=>{if(!oL(i.status))throw f_(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const s=l=>i.headers.get(l),{allowRangeRequests:o,suggestedLength:a}=CS({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=xS(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ic("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:cL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class E3{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController,this._headers=lL(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${r-1}`);const s=i.url;fetch(s,aL(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!oL(o.status))throw f_(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:cL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const U0=200,$0=206;function A3(n){const e=n.response;return typeof e!="string"?e:l_(e).buffer}class b3{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const i={begin:e,end:t};for(const s in r)i[s]=r[s];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const o=this.httpHeaders[s];o!==void 0&&t.setRequestHeader(s,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=$0):i.expectedStatus=U0,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,t))}onStateChange(e,t){var l,c,u;const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){(l=r.onError)==null||l.call(r,i.status);return}const s=i.status||U0;if(!(s===U0&&r.expectedStatus===$0)&&s!==r.expectedStatus){(c=r.onError)==null||c.call(r,i.status);return}const a=A3(i);if(s===$0){const f=i.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);r.onDone({begin:parseInt(p[1],10),chunk:a})}else a?r.onDone({begin:0,chunk:a}):(u=r.onError)==null||u.call(r,i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class S3{constructor(e){this._source=e,this._manager=new b3(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new T3(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new C3(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class T3{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=o=>t.getResponseHeader(o),{allowRangeRequests:i,suggestedLength:s}=CS({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=xS(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=f_(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class C3{constructor(e,t,r){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=f_(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const uL=/^file:\/\/\/[a-zA-Z]:\//;function x3(n){const e=zi.get("url"),t=e.parse(n);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(n)?e.parse(`file:///${n}`):(t.host||(t.protocol="file:"),t)}class R3{constructor(e){this.source=e,this.url=x3(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new k3(this):new P3(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new M3(this,e,t):new I3(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class hL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ic("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class dL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Gv(n,e){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:e}}class P3 extends hL{constructor(e){super(e);const t=r=>{if(r.statusCode===404){const a=new rc(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(r);const i=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:s,suggestedLength:o}=CS({getResponseHeader:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=o||this._contentLength,this._filename=xS(i)};if(this._request=null,this._url.protocol==="http:"){const r=zi.get("http");this._request=r.request(Gv(this._url,e.httpHeaders),t)}else{const r=zi.get("https");this._request=r.request(Gv(this._url,e.httpHeaders),t)}this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class I3 extends dL{constructor(e,t,r){super(e),this._httpHeaders={};for(const s in e.httpHeaders){const o=e.httpHeaders[s];o!==void 0&&(this._httpHeaders[s]=o)}this._httpHeaders.Range=`bytes=${t}-${r-1}`;const i=s=>{if(s.statusCode===404){const o=new rc(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(s)};if(this._request=null,this._url.protocol==="http:"){const s=zi.get("http");this._request=s.request(Gv(this._url,this._httpHeaders),i)}else{const s=zi.get("https");this._request=s.request(Gv(this._url,this._httpHeaders),i)}this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class k3 extends hL{constructor(e){super(e);let t=decodeURIComponent(this._url.path);uL.test(this._url.href)&&(t=t.replace(/^\//,""));const r=zi.get("fs");r.promises.lstat(t).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(t)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new rc(`Missing PDF "${t}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class M3 extends dL{constructor(e,t,r){super(e);let i=decodeURIComponent(this._url.path);uL.test(this._url.href)&&(i=i.replace(/^\//,""));const s=zi.get("fs");this._setReadableStream(s.createReadStream(i,{start:t,end:r-1}))}}const L3=1e5,Fn=30,N3=.8;var IR,_o,jn,rp,ip,il,vs,sp,op,sl,_u,wu,wo,Eu,ap,Au,ol,lp,cp,Lt,al,ll,Eo,bu,Xs,fL,pL,UE,Bi,Um,gL,mL;let qv=(Lt=class{constructor({textContentSource:e,container:t,viewport:r}){M(this,Xs);M(this,_o,Promise.withResolvers());M(this,jn,null);M(this,rp,!1);M(this,ip,!!((IR=globalThis.FontInspector)!=null&&IR.enabled));M(this,il,null);M(this,vs,null);M(this,sp,0);M(this,op,0);M(this,sl,null);M(this,_u,null);M(this,wu,0);M(this,wo,0);M(this,Eu,Object.create(null));M(this,ap,[]);M(this,Au,null);M(this,ol,[]);M(this,lp,new WeakMap);M(this,cp,null);var l;if(e instanceof ReadableStream)R(this,Au,e);else if(typeof e=="object")R(this,Au,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');R(this,jn,R(this,_u,t)),R(this,wo,r.scale*(globalThis.devicePixelRatio||1)),R(this,wu,r.rotation),R(this,vs,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;R(this,cp,[1,0,0,-1,-o,a+s]),R(this,op,i),R(this,sp,s),I(l=Lt,Bi,gL).call(l),ql(t,r),h(this,_o).promise.catch(()=>{}).then(()=>{h(Lt,bu).delete(this),R(this,vs,null),R(this,Eu,null)})}render(){const e=()=>{h(this,sl).read().then(({value:t,done:r})=>{if(r){h(this,_o).resolve();return}h(this,il)??R(this,il,t.lang),Object.assign(h(this,Eu),t.styles),I(this,Xs,fL).call(this,t.items),e()},h(this,_o).reject)};return R(this,sl,h(this,Au).getReader()),h(Lt,bu).add(this),e(),h(this,_o).promise}update({viewport:e,onBefore:t=null}){var s;const r=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==h(this,wu)&&(t==null||t(),R(this,wu,i),ql(h(this,_u),{rotation:i})),r!==h(this,wo)){t==null||t(),R(this,wo,r);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:I(s=Lt,Bi,Um).call(s,h(this,il))};for(const a of h(this,ol))o.properties=h(this,lp).get(a),o.div=a,I(this,Xs,UE).call(this,o)}}cancel(){var t;const e=new ic("TextLayer task cancelled.");(t=h(this,sl))==null||t.cancel(e).catch(()=>{}),R(this,sl,null),h(this,_o).reject(e)}get textDivs(){return h(this,ol)}get textContentItemsStr(){return h(this,ap)}static cleanup(){if(!(h(this,bu).size>0)){h(this,al).clear();for(const{canvas:e}of h(this,ll).values())e.remove();h(this,ll).clear()}}},_o=new WeakMap,jn=new WeakMap,rp=new WeakMap,ip=new WeakMap,il=new WeakMap,vs=new WeakMap,sp=new WeakMap,op=new WeakMap,sl=new WeakMap,_u=new WeakMap,wu=new WeakMap,wo=new WeakMap,Eu=new WeakMap,ap=new WeakMap,Au=new WeakMap,ol=new WeakMap,lp=new WeakMap,cp=new WeakMap,al=new WeakMap,ll=new WeakMap,Eo=new WeakMap,bu=new WeakMap,Xs=new WeakSet,fL=function(e){var i,s;if(h(this,rp))return;(s=h(this,vs)).ctx??(s.ctx=I(i=Lt,Bi,Um).call(i,h(this,il)));const t=h(this,ol),r=h(this,ap);for(const o of e){if(t.length>L3){_e("Ignoring additional textDivs for performance reasons."),R(this,rp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=h(this,jn);R(this,jn,document.createElement("span")),h(this,jn).classList.add("markedContent"),o.id!==null&&h(this,jn).setAttribute("id",`${o.id}`),a.append(h(this,jn))}else o.type==="endMarkedContent"&&R(this,jn,h(this,jn).parentNode);continue}r.push(o.str),I(this,Xs,pL).call(this,o)}},pL=function(e){var v;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};h(this,ol).push(t);const i=ae.transform(h(this,cp),e.transform);let s=Math.atan2(i[1],i[0]);const o=h(this,Eu)[e.fontName];o.vertical&&(s+=Math.PI/2);const a=h(this,ip)&&o.fontSubstitution||o.fontFamily,l=Math.hypot(i[2],i[3]),c=l*I(v=Lt,Bi,mL).call(v,a,h(this,il));let u,f;s===0?(u=i[4],f=i[5]-c):(u=i[4]+c*Math.sin(s),f=i[5]-c*Math.cos(s));const p="calc(var(--scale-factor)*",g=t.style;h(this,jn)===h(this,_u)?(g.left=`${(100*u/h(this,op)).toFixed(2)}%`,g.top=`${(100*f/h(this,sp)).toFixed(2)}%`):(g.left=`${p}${u.toFixed(2)}px)`,g.top=`${p}${f.toFixed(2)}px)`),g.fontSize=`${p}${(h(Lt,Eo)*l).toFixed(2)}px)`,g.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,h(this,ip)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),_=Math.abs(e.transform[3]);w!==_&&Math.max(w,_)/Math.min(w,_)>1.5&&(m=!0)}if(m&&(r.canvasWidth=o.vertical?e.height:e.width),h(this,lp).set(t,r),h(this,vs).div=t,h(this,vs).properties=r,I(this,Xs,UE).call(this,h(this,vs)),r.hasText&&h(this,jn).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),h(this,jn).append(w)}},UE=function(e){const{div:t,properties:r,ctx:i,prevFontSize:s,prevFontFamily:o}=e,{style:a}=t;let l="";if(h(Lt,Eo)>1&&(l=`scale(${1/h(Lt,Eo)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=a,{canvasWidth:u,fontSize:f}=r;(s!==f||o!==c)&&(i.font=`${f*h(this,wo)}px ${c}`,e.prevFontSize=f,e.prevFontFamily=c);const{width:p}=i.measureText(t.textContent);p>0&&(l=`scaleX(${u*h(this,wo)/p}) ${l}`)}r.angle!==0&&(l=`rotate(${r.angle}deg) ${l}`),l.length>0&&(a.transform=l)},Bi=new WeakSet,Um=function(e=null){let t=h(this,ll).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,ll).set(e,t)}return t},gL=function(){if(h(this,Eo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),R(this,Eo,e.getBoundingClientRect().height),e.remove()},mL=function(e,t){const r=h(this,al).get(e);if(r)return r;const i=I(this,Bi,Um).call(this,t),s=i.font;i.canvas.width=i.canvas.height=Fn,i.font=`${Fn}px ${e}`;const o=i.measureText("");let a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(a){const f=a/(a+l);return h(this,al).set(e,f),i.canvas.width=i.canvas.height=0,i.font=s,f}i.strokeStyle="red",i.clearRect(0,0,Fn,Fn),i.strokeText("g",0,0);let c=i.getImageData(0,0,Fn,Fn).data;l=0;for(let f=c.length-1-3;f>=0;f-=4)if(c[f]>0){l=Math.ceil(f/4/Fn);break}i.clearRect(0,0,Fn,Fn),i.strokeText("A",0,Fn),c=i.getImageData(0,0,Fn,Fn).data,a=0;for(let f=0,p=c.length;f<p;f+=4)if(c[f]>0){a=Fn-Math.floor(f/4/Fn);break}i.canvas.width=i.canvas.height=0,i.font=s;const u=a?a/(a+l):N3;return h(this,al).set(e,u),u},M(Lt,Bi),M(Lt,al,new Map),M(Lt,ll,new Map),M(Lt,Eo,null),M(Lt,bu,new Set),Lt);function D3(){RM("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:n,container:e,viewport:t,...r}=arguments[0],i=Object.keys(r);i.length>0&&_e("Ignoring `renderTextLayer` parameters: "+i.join(", "));const s=new qv({textContentSource:n,container:e,viewport:t}),{textDivs:o,textContentItemsStr:a}=s;return{promise:s.render(),textDivs:o,textContentItemsStr:a}}function O3(){RM("`updateTextLayer`, please use `TextLayer` instead.")}class df{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){var l;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(df.shouldBuildText(a))(l=s==null?void 0:s.attributes)!=null&&l.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const c of s.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const F3=65536,V3=100,j3=5e3,B3=An?Q$:V$,U3=An?J$:CM,$3=An?Y$:F$,z3=An?Z$:xM;function H3(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new $E,{docId:t}=e,r=n.url?W3(n.url):null,i=n.data?G3(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof vL?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:F3;let u=n.worker instanceof Yc?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!AS(n.docBaseUrl)?n.docBaseUrl:null,g=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,v=n.CMapReaderFactory||U3,w=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,_=n.StandardFontDataFactory||z3,E=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,P=n.isEvalSupported!==!1,O=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!An,j=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,C=typeof n.disableFontFace=="boolean"?n.disableFontFace:An,T=n.fontExtraProperties===!0,x=n.enableXfa===!0,L=n.ownerDocument||globalThis.document,F=n.disableRange===!0,V=n.disableStream===!0,D=n.disableAutoFetch===!0,z=n.pdfBug===!0,$=n.enableHWA===!0,W=l?l.length:n.length??NaN,U=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!An&&!C,B=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:v===CM&&_===xM&&g&&w&&hd(g,document.baseURI)&&hd(w,document.baseURI),H=n.canvasFactory||new B3({ownerDocument:L,enableHWA:$}),X=n.filterFactory||new $3({docId:t,ownerDocument:L}),ne=null;C$(f);const J={canvasFactory:H,filterFactory:X};if(B||(J.cMapReaderFactory=new v({baseUrl:g,isCompressed:m}),J.standardFontDataFactory=new _({baseUrl:w})),!u){const Fe={verbosity:f,port:Fs.workerPort};u=Fe.port?Yc.fromPort(Fe):new Yc(Fe),e._worker=u}const re={docId:t,apiVersion:"4.4.168",data:i,password:a,disableAutoFetch:D,rangeChunkSize:c,length:W,docBaseUrl:p,enableXfa:x,evaluatorOptions:{maxImageSize:S,disableFontFace:C,ignoreErrors:E,isEvalSupported:P,isOffscreenCanvasSupported:O,canvasMaxAreaInBytes:j,fontExtraProperties:T,useSystemFonts:U,cMapUrl:B?g:null,standardFontDataUrl:B?w:null}},ge={disableFontFace:C,fontExtraProperties:T,ownerDocument:L,pdfBug:z,styleElement:ne,loadingParams:{disableAutoFetch:D,enableXfa:x}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Fe=u.messageHandler.sendWithPromise("GetDocRequest",re,i?[i.buffer]:null);let be;if(l)be=new m3(l,{disableRange:F,disableStream:V});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");be=(Je=>An?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&hd(Je.url)?new r1(Je):new R3(Je):hd(Je.url)?new r1(Je):new S3(Je))({url:r,length:W,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:F,disableStream:V})}return Fe.then(ce=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Je=new pd(t,ce,u.port),Ze=new Y3(Je,e,be,ge,J);e._transport=Ze,Je.send("Ready",null)})}).catch(e._capability.reject),e}function W3(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(An&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function G3(n){if(An&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return l_(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function i1(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Ey;const Ay=class Ay{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${tr(Ay,Ey)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Ey=new WeakMap,M(Ay,Ey,0);let $E=Ay,vL=class{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class q3{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ao,ys,kr,Ac,$m;class K3{constructor(e,t,r,i=!1){M(this,kr);M(this,Ao,null);M(this,ys,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new Hx:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new yL,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new lg({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=ho.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null}){var S,P;(S=this._stats)==null||S.time("Overall");const f=this._transport.getRenderingIntent(r,i,u),{renderingIntent:p,cacheKey:g}=f;R(this,ys,!1),I(this,kr,$m).call(this),a||(a=this._transport.getOptionalContentConfig(p));let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const v=!!(p&Rr.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(f));const w=O=>{var j;m.renderTasks.delete(_),(this._maybeCleanupAfterRender||v)&&R(this,ys,!0),I(this,kr,Ac).call(this,!v),O?(_.capability.reject(O),this._abortOperatorList({intentState:m,reason:O instanceof Error?O:new Error(O)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new HE({callback:w,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(m.renderTasks||(m.renderTasks=new Set)).add(_);const E=_.task;return Promise.all([m.displayReadyCapability.promise,a]).then(([O,j])=>{var C;if(this.destroyed){w();return}if((C=this._stats)==null||C.time("Rendering"),!(j.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:O,optionalContentConfig:j}),_.operatorListChanged()}).catch(w),E}getOperatorList({intent:e="display",annotationMode:t=ho.ENABLE,printAnnotationStorage:r=null}={}){var l;function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))}const s=this._transport.getRenderingIntent(e,t,r,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let a;return o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>df.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),R(this,ys,!1),I(this,kr,$m).call(this),Promise.all(e)}cleanup(e=!1){R(this,ys,!0);const t=I(this,kr,Ac).call(this,!1);return e&&t&&this._stats&&(this._stats=new Hx),t}_startRenderPage(e,t){var i,s;const r=this._intentStates.get(t);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&I(this,kr,Ac).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r}){const{map:i,transfer:s}=r,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i},s).getReader(),l=this._intentStates.get(t);l.streamReader=a;const c=()=>{a.read().then(({value:u,done:f})=>{if(f){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,l),c())},u=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const f of l.renderTasks)f.operatorListChanged();I(this,kr,Ac).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(u);else if(l.opListReadCapability)l.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof ES){let i=V3;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new ic(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Ao=new WeakMap,ys=new WeakMap,kr=new WeakSet,Ac=function(e=!1){if(I(this,kr,$m).call(this),!h(this,ys)||this.destroyed)return!1;if(e)return R(this,Ao,setTimeout(()=>{R(this,Ao,null),I(this,kr,Ac).call(this,!1)},j3)),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),R(this,ys,!1),!0},$m=function(){h(this,Ao)&&(clearTimeout(h(this,Ao)),R(this,Ao,null))};var cl,by;class X3{constructor(){M(this,cl,new Set);M(this,by,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};h(this,by).then(()=>{for(const i of h(this,cl))i.call(this,r)})}addEventListener(e,t){h(this,cl).add(t)}removeEventListener(e,t){h(this,cl).delete(t)}terminate(){h(this,cl).clear()}}cl=new WeakMap,by=new WeakMap;const ls={isWorkerDisabled:!1,fakeWorkerId:0};An&&(ls.isWorkerDisabled=!0,Fs.workerSrc||(Fs.workerSrc="./pdf.worker.mjs")),ls.isSameOrigin=function(n,e){let t;try{if(t=new URL(n),!t.origin||t.origin==="null")return!1}catch{return!1}const r=new URL(e,t);return t.origin===r.origin},ls.createCDNWrapper=function(n){const e=`await import("${n}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var ul,Su,zm,Tu,Hm;const rr=class rr{constructor({name:e=null,port:t=null,verbosity:r=x$()}={}){M(this,Su);var i;if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=h(rr,ul))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(h(rr,ul)||R(rr,ul,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return An?Promise.all([zi.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new pd("main","worker",e),this._messageHandler.on("ready",function(){}),I(this,Su,zm).call(this)}_initialize(){if(ls.isWorkerDisabled||h(rr,Tu,Hm)){this._setupFakeWorker();return}let{workerSrc:e}=rr;try{ls.isSameOrigin(window.location.href,e)||(e=ls.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new pd("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:s.signal}),r.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}this._messageHandler=r,this._port=t,this._webWorker=t,I(this,Su,zm).call(this)}),r.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{o_("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){ls.isWorkerDisabled||(_e("Setting up fake worker."),ls.isWorkerDisabled=!0),rr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new X3;this._port=t;const r=`fake${ls.fakeWorkerId++}`,i=new pd(r+"_worker",r,t);e.setup(i,t),this._messageHandler=new pd(r,r+"_worker",t),I(this,Su,zm).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=h(rr,ul))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var r;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(r=h(this,ul))==null?void 0:r.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new rr(e)}static get workerSrc(){if(Fs.workerSrc)return Fs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Me(this,"_setupFakeWorkerGlobal",(async()=>h(this,Tu,Hm)?h(this,Tu,Hm):(await import(this.workerSrc)).WorkerMessageHandler)())}};ul=new WeakMap,Su=new WeakSet,zm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Tu=new WeakSet,Hm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},M(rr,Tu),M(rr,ul);let Yc=rr;var _s,bi,Cu,xu,Si,hl,gd;class Y3{constructor(e,t,r,i,s){M(this,hl);M(this,_s,new Map);M(this,bi,new Map);M(this,Cu,new Map);M(this,xu,new Map);M(this,Si,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new yL,this.fontLoader=new K$({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Me(this,"annotationStorage",new TS)}getRenderingIntent(e,t=ho.ENABLE,r=null,i=!1){let s=Rr.DISPLAY,o=NE;switch(e){case"any":s=Rr.ANY;break;case"display":break;case"print":s=Rr.PRINT;break;default:_e(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case ho.DISABLE:s+=Rr.ANNOTATIONS_DISABLE;break;case ho.ENABLE:break;case ho.ENABLE_FORMS:s+=Rr.ANNOTATIONS_FORMS;break;case ho.ENABLE_STORAGE:s+=Rr.ANNOTATIONS_STORAGE,o=(s&Rr.PRINT&&r instanceof nL?r:this.annotationStorage).serializable;break;default:_e(`getRenderingIntent - invalid annotationMode: ${t}`)}return i&&(s+=Rr.OPLIST),{renderingIntent:s,cacheKey:`${s}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=h(this,Si))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of h(this,bi).values())e.push(i._destroy());h(this,bi).clear(),h(this,Cu).clear(),h(this,xu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i;this.commonObjs.clear(),this.fontLoader.clear(),h(this,_s).clear(),this.filterFactory.destroy(),qv.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new ic("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{Dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}Dt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",r=>{const i=Promise.withResolvers(),s=this._fullReader;return s.headersReady.then(()=>{var o;(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),s.onProgress=a=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:a.loaded,total:a.total})}),i.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},i.reject),i.promise}),e.on("GetRangeReader",(r,i)=>{Dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}Dt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new q3(r,this))}),e.on("DocException",function(r){let i;switch(r.name){case"PasswordException":i=new hE(r.message,r.code);break;case"InvalidPDFException":i=new AM(r.message);break;case"MissingPDFException":i=new rc(r.message);break;case"UnexpectedResponseException":i=new a_(r.message,r.status);break;case"UnknownErrorException":i=new dE(r.message,r.details);break;default:ze("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",r=>{if(R(this,Si,Promise.withResolvers()),t.onPassword){const i=s=>{s instanceof Error?h(this,Si).reject(s):h(this,Si).resolve({password:s})};try{t.onPassword(i,r.code)}catch(s){h(this,Si).reject(s)}}else h(this,Si).reject(new hE(r.message,r.code));return h(this,Si).promise}),e.on("DataLoaded",r=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;h(this,bi).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in s){const g=s.error;_e(`Error during font loading: ${g}`),this.commonObjs.resolve(r,g);break}const u=c&&((o=globalThis.FontInspector)!=null&&o.enabled)?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,f=new X$(s,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:p}=s;Dt(p,"The imageRef must be defined.");for(const g of h(this,bi).values())for(const[,m]of g.objs)if((m==null?void 0:m.ref)===p)return m.dataLen?(this.commonObjs.resolve(r,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,o])=>{var l;if(this.destroyed)return;const a=h(this,bi).get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(s){case"Image":a.objs.resolve(r,o),(o==null?void 0:o.dataLen)>A$&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&_e("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=h(this,Cu).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&h(this,xu).set(s.refStr,e);const o=new K3(t,s,this,this._params.pdfBug);return h(this,bi).set(t,o),o});return h(this,Cu).set(t,i),i}getPageIndex(e){return i1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return I(this,hl,gd).call(this,"GetFieldObjects")}hasJSActions(){return I(this,hl,gd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return I(this,hl,gd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return I(this,hl,gd).call(this,"GetOptionalContentConfig").then(t=>new g3(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=h(this,_s).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,o;return{info:i[0],metadata:i[1]?new f3(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return h(this,_s).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of h(this,bi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),h(this,_s).clear(),this.filterFactory.destroy(!0),qv.cleanup()}}cachedPageNumber(e){if(!i1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return h(this,xu).get(t)??null}}_s=new WeakMap,bi=new WeakMap,Cu=new WeakMap,xu=new WeakMap,Si=new WeakMap,hl=new WeakSet,gd=function(e,t=null){const r=h(this,_s).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return h(this,_s).set(e,i),i};const om=Symbol("INITIAL_DATA");var Xr,up,zE;class yL{constructor(){M(this,up);M(this,Xr,Object.create(null))}get(e,t=null){if(t){const i=I(this,up,zE).call(this,e);return i.promise.then(()=>t(i.data)),null}const r=h(this,Xr)[e];if(!r||r.data===om)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=h(this,Xr)[e];return!!t&&t.data!==om}resolve(e,t=null){const r=I(this,up,zE).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in h(this,Xr)){const{data:r}=h(this,Xr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}R(this,Xr,Object.create(null))}*[Symbol.iterator](){for(const e in h(this,Xr)){const{data:t}=h(this,Xr)[e];t!==om&&(yield[e,t])}}}Xr=new WeakMap,up=new WeakSet,zE=function(e){var t;return(t=h(this,Xr))[e]||(t[e]={...Promise.withResolvers(),data:om})};var bo;class Q3{constructor(e){M(this,bo,null);R(this,bo,e),this.onContinue=null}get promise(){return h(this,bo).capability.promise}cancel(e=0){h(this,bo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=h(this,bo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=h(this,bo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}bo=new WeakMap;var So,dl;const Na=class Na{constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){M(this,So,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Q3(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(h(Na,dl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(Na,dl).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:s,background:o}=this.params;this.gfx=new Xc(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),h(this,So)&&(window.cancelAnimationFrame(h(this,So)),R(this,So,null)),h(Na,dl).delete(this._canvas),this.callback(e||new ES(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?R(this,So,window.requestAnimationFrame(()=>{R(this,So,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(Na,dl).delete(this._canvas),this.callback())))}};So=new WeakMap,dl=new WeakMap,M(Na,dl,new WeakSet);let HE=Na;const J3="4.4.168",Z3="19fbc8998";function s1(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function nd(n){return Math.max(0,Math.min(255,255*n))}class o1{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=nd(e),[e,e,e]}static G_HTML([e]){const t=s1(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(nd)}static RGB_HTML(e){return`#${e.map(s1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[nd(1-Math.min(1,e+i)),nd(1-Math.min(1,r+i)),nd(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,o=1-r,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}}class _L{static setupStorage(e,t,r,i,s){const o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var f,p;const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});const a=s!=="richText",l=e.div;if(l.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);o.append(g),a&&df.shouldBuildText(i.name)&&c.push(g)}return{textDivs:c}}const u=[[i,-1,o]];for(;u.length>0;){const[g,m,v]=u.at(-1);if(m+1===g.children.length){u.pop();continue}const w=g.children[++u.at(-1)[1]];if(w===null)continue;const{name:_}=w;if(_==="#text"){const S=document.createTextNode(w.value);c.push(S),v.append(S);continue}const E=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,_):document.createElement(_);if(v.append(E),w.attributes&&this.setAttributes({html:E,element:w,storage:t,intent:s,linkService:r}),((p=w.children)==null?void 0:p.length)>0)u.push([w,-1,E]);else if(w.value){const S=document.createTextNode(w.value);a&&df.shouldBuildText(_)&&c.push(S),E.append(S)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const hg=1e3,ez=9,Xl=new WeakSet;function Vs(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class tz{static create(e){switch(e.data.annotationType){case Rt.LINK:return new wL(e);case Rt.TEXT:return new nz(e);case Rt.WIDGET:switch(e.data.fieldType){case"Tx":return new rz(e);case"Btn":return e.data.radioButton?new bL(e):e.data.checkBox?new sz(e):new oz(e);case"Ch":return new az(e);case"Sig":return new iz(e)}return new sc(e);case Rt.POPUP:return new GE(e);case Rt.FREETEXT:return new RL(e);case Rt.LINE:return new cz(e);case Rt.SQUARE:return new uz(e);case Rt.CIRCLE:return new hz(e);case Rt.POLYLINE:return new PL(e);case Rt.CARET:return new fz(e);case Rt.INK:return new IL(e);case Rt.POLYGON:return new dz(e);case Rt.HIGHLIGHT:return new pz(e);case Rt.UNDERLINE:return new gz(e);case Rt.SQUIGGLY:return new mz(e);case Rt.STRIKEOUT:return new vz(e);case Rt.STAMP:return new kL(e);case Rt.FILEATTACHMENT:return new yz(e);default:return new Et(e)}}}var fl,Ru,Pu,hp,WE;const lT=class lT{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){M(this,hp);M(this,fl,null);M(this,Ru,!1);M(this,Pu,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e!=null&&e.str||t!=null&&t.str||r!=null&&r.str)}get hasPopupData(){return lT._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;h(this,fl)||R(this,fl,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&I(this,hp,WE).call(this,t),(r=h(this,Pu))==null||r.popup.updateEdited(e)}resetEdited(){var e;h(this,fl)&&(I(this,hp,WE).call(this,h(this,fl).rect),(e=h(this,Pu))==null||e.popup.resetEdited(),R(this,fl,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof sc||(s.tabIndex=hg);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.popupRef&&s.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof GE){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,s),s}const{width:a,height:l}=Vs(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(v>0||w>0){const E=`calc(${v}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;o.borderRadius=E}else if(this instanceof bL){const E=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=E}switch(t.borderStyle.style){case ed.SOLID:o.borderStyle="solid";break;case ed.DASHED:o.borderStyle="dashed";break;case ed.BEVELED:_e("Unimplemented border style: beveled");break;case ed.INSET:_e("Unimplemented border style: inset");break;case ed.UNDERLINE:o.borderBottomStyle="solid";break}const _=t.borderColor||null;_?(R(this,Ru,!0),o.borderColor=ae.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):o.borderWidth=0}const c=ae.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:g}=i.rawDims;o.left=`${100*(c[0]-p)/u}%`,o.top=`${100*(c[1]-g)/f}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*a/u}%`,o.height=`${100*l/f}%`):this.setRotation(m,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:o}=Vs(this.data.rect);let a,l;e%180===0?(a=100*s/r,l=100*o/i):(a=100*o/r,l=100*s/i),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],o=s[0],a=s.slice(1);i.target.style[r]=o1[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:o1[`${o}_rgb`](a)})};return Me(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||r[i];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const o=r[i];if(o){const a={detail:{[i]:s},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,w,_,E]=e.subarray(2,6);if(i===v&&s===w&&t===_&&r===E)return}const{style:o}=this.container;let a;if(h(this,Ru)){const{borderColor:v,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=i-t,c=s-r,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const g=u.createElement("clipPath"),m=`clippath_${this.data.id}`;g.setAttribute("id",m),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let v=2,w=e.length;v<w;v+=8){const _=e[v],E=e[v+1],S=e[v+2],P=e[v+3],O=u.createElement("rect"),j=(S-t)/l,C=(s-E)/c,T=(_-S)/l,x=(E-P)/c;O.setAttribute("x",j),O.setAttribute("y",C),O.setAttribute("width",T),O.setAttribute("height",x),g.append(O),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${C}" width="${T}" height="${x}"/>`)}h(this,Ru)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const r=R(this,Pu,new GE({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(r.render())}render(){ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:a}of i){if(s===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Xl.has(c)){_e(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==t&&Xl.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};fl=new WeakMap,Ru=new WeakMap,Pu=new WeakMap,hp=new WeakSet,WE=function(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;r==null||r.splice(0,4,...e);const{width:c,height:u}=Vs(e);t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+l)/o}%`,i===0?(t.width=`${100*c/s}%`,t.height=`${100*u/o}%`):this.setRotation(i)};let Et=lT;var gr,Pa,EL,AL;class wL extends Et{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});M(this,gr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(r.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action),s=!0):t.attachment?(I(this,gr,EL).call(this,i,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(I(this,gr,AL).call(this,i,t.setOCGState),s=!0):t.dest?(this._bindLink(i,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&I(this,gr,Pa).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),I(this,gr,Pa).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const o=i.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),I(this,gr,Pa).call(this)}_bindResetFormAction(t,r){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),I(this,gr,Pa).call(this),!this._fieldObjects){_e('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var f;i==null||i();const{fields:s,refs:o,include:a}=r,l=[];if(s.length!==0||o.length!==0){const p=new Set(o);for(const g of s){const m=this._fieldObjects[g]||[];for(const{id:v}of m)p.add(v)}for(const g of Object.values(this._fieldObjects))for(const m of g)p.has(m.id)===a&&l.push(m)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const c=this.annotationStorage,u=[];for(const p of l){const{id:g}=p;switch(u.push(g),p.type){case"text":{const v=p.defaultValue||"";c.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;c.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";c.setValue(g,{value:v});break}default:continue}const m=document.querySelector(`[data-element-id="${g}"]`);if(m){if(!Xl.has(m)){_e(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}gr=new WeakSet,Pa=function(){this.container.setAttribute("data-internal-link","")},EL=function(t,r,i=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(r.content,r.filename,i),!1},I(this,gr,Pa).call(this)},AL=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),I(this,gr,Pa).call(this)};class nz extends Et{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class sc extends Et{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Hn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}}))})}_setEventListeners(e,t,r,i){var s,o,a;for(const[l,c]of r)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,i),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ae.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||ez,s=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(F0*i))||1,f=c/u;o=Math.min(i,l(f/F0))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/F0))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=ae.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class rz extends sc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),s.setValue(o.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",c??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Xl.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=hg,this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(r,"value",p.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";r.value=u.userValue=g,u.formattedValue=null});let f=p=>{const{formattedValue:g}=u;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{var v;if(u.focused)return;const{target:m}=g;u.userValue&&(m.value=u.userValue),u.lastCommittedValue=m.value,u.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(v){u.userValue=v.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),v.target.value=u.userValue},formattedValue(v){const{formattedValue:w}=v.detail;u.formattedValue=w,w!=null&&v.target!==document.activeElement&&(v.target.value=w),e.setValue(t,{formattedValue:w})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var S;const{charLimit:w}=v.detail,{target:_}=v;if(w===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",w);let E=u.userValue;!E||E.length<=w||(E=E.slice(0,w),_.value=u.userValue=E,e.setValue(t,{value:E}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),r.addEventListener("keydown",g=>{var w;u.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(u.commitKey=3),m===-1)return;const{value:v}=g.target;u.lastCommittedValue!==v&&(u.lastCommittedValue=v,u.userValue=v,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,r.addEventListener("blur",g=>{var v,w;if(!u.focused||!g.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(u.focused=!1);const{value:m}=g.target;u.userValue=m,u.lastCommittedValue!==m&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),p(g)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",g=>{var O;u.lastCommittedValue=null;const{data:m,target:v}=g,{value:w,selectionStart:_,selectionEnd:E}=v;let S=_,P=E;switch(g.inputType){case"deleteWordBackward":{const j=w.substring(0,_).match(/\w*[^\w]*$/);j&&(S-=j[0].length);break}case"deleteWordForward":{const j=w.substring(_).match(/^[^\w]*\w*/);j&&(P+=j[0].length);break}case"deleteContentBackward":_===E&&(S-=1);break;case"deleteContentForward":_===E&&(P+=1);break}g.preventDefault(),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:m||"",willCommit:!1,selStart:S,selEnd:P}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class iz extends sc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class sz extends sc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Xl.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=hg,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class bL extends sc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Xl.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=hg,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const p=u&&f.id===r;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class oz extends wL{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class az extends sc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Xl.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=hg;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of i.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,r.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),s=!1),i.append(f)}let o=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:g}=i;return g?Array.prototype.filter.call(p,m=>m.selected).map(m=>m[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=a(!1);const c=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const g=p.detail.value,m=new Set(Array.isArray(g)?g:[g]);for(const v of i.options)v.selected=m.has(v.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(p){i.multiple=!0},remove(p){const g=i.options,m=p.detail.remove;g[m].selected=!1,i.remove(m),g.length>0&&Array.prototype.findIndex.call(g,w=>w.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},clear(p){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(p){const{index:g,displayValue:m,exportValue:v}=p.detail.insert,w=i.children[g],_=document.createElement("option");_.textContent=m,_.value=v,w?w.before(_):i.append(_),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},items(p){const{items:g}=p.detail;for(;i.length!==0;)i.remove(0);for(const m of g){const{displayValue:v,exportValue:w}=m,_=document.createElement("option");_.textContent=v,_.value=w,i.append(_)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},indices(p){const g=new Set(p.detail.indices);for(const m of p.target.options)m.selected=g.has(m.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),i.addEventListener("input",u=>{var g;const f=a(!0),p=a(!1);e.setValue(t,{value:f}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class GE extends Et{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Et._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new lz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${SM}${r}`).join(",")),this.container}}var Iu,Sy,Ty,ku,pl,pt,ws,gl,dp,fp,Mu,Es,Yr,As,pp,bs,gp,ml,vl,He,Wm,qE,SL,TL,CL,xL,Gm,qm,KE;class lz{constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:f}){M(this,He);M(this,Iu,I(this,He,CL).bind(this));M(this,Sy,I(this,He,KE).bind(this));M(this,Ty,I(this,He,qm).bind(this));M(this,ku,I(this,He,Gm).bind(this));M(this,pl,null);M(this,pt,null);M(this,ws,null);M(this,gl,null);M(this,dp,null);M(this,fp,null);M(this,Mu,null);M(this,Es,!1);M(this,Yr,null);M(this,As,null);M(this,pp,null);M(this,bs,null);M(this,gp,null);M(this,ml,null);M(this,vl,!1);var p;R(this,pt,e),R(this,gp,i),R(this,ws,o),R(this,bs,a),R(this,fp,l),R(this,pl,t),R(this,pp,c),R(this,Mu,u),R(this,dp,r),R(this,gl,PM.toDateObject(s)),this.trigger=r.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",h(this,ku)),g.addEventListener("mouseenter",h(this,Ty)),g.addEventListener("mouseleave",h(this,Sy)),g.classList.add("popupTriggerArea");for(const g of r)(p=g.container)==null||p.addEventListener("keydown",h(this,Iu));h(this,pt).hidden=!0,f&&I(this,He,Gm).call(this)}render(){if(h(this,Yr))return;const e=R(this,Yr,document.createElement("div"));if(e.className="popup",h(this,pl)){const s=e.style.outlineColor=ae.makeHexColor(...h(this,pl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=ae.makeHexColor(...h(this,pl).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=h(this,gp),e.append(t),h(this,gl)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),s.setAttribute("data-l10n-args",JSON.stringify({date:h(this,gl).toLocaleDateString(),time:h(this,gl).toLocaleTimeString()})),t.append(s)}const i=h(this,He,Wm);if(i)_L.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(h(this,ws));e.append(s)}h(this,pt).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let s=0,o=i.length;s<o;++s){const a=i[s];r.append(document.createTextNode(a)),s<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;h(this,ml)||R(this,ml,{contentsObj:h(this,ws),richText:h(this,bs)}),e&&R(this,As,null),t&&(R(this,bs,I(this,He,TL).call(this,t)),R(this,ws,null)),(r=h(this,Yr))==null||r.remove(),R(this,Yr,null)}resetEdited(){var e;h(this,ml)&&({contentsObj:tr(this,ws)._,richText:tr(this,bs)._}=h(this,ml),R(this,ml,null),(e=h(this,Yr))==null||e.remove(),R(this,Yr,null),R(this,As,null))}forceHide(){R(this,vl,this.isVisible),h(this,vl)&&(h(this,pt).hidden=!0)}maybeShow(){h(this,vl)&&(h(this,Yr)||I(this,He,qm).call(this),R(this,vl,!1),h(this,pt).hidden=!1)}get isVisible(){return h(this,pt).hidden===!1}}Iu=new WeakMap,Sy=new WeakMap,Ty=new WeakMap,ku=new WeakMap,pl=new WeakMap,pt=new WeakMap,ws=new WeakMap,gl=new WeakMap,dp=new WeakMap,fp=new WeakMap,Mu=new WeakMap,Es=new WeakMap,Yr=new WeakMap,As=new WeakMap,pp=new WeakMap,bs=new WeakMap,gp=new WeakMap,ml=new WeakMap,vl=new WeakMap,He=new WeakSet,Wm=function(){const e=h(this,bs),t=h(this,ws);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&h(this,bs).html||null},qE=function(){var e,t,r;return((r=(t=(e=h(this,He,Wm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},SL=function(){var e,t,r;return((r=(t=(e=h(this,He,Wm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},TL=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:h(this,He,SL),fontSize:h(this,He,qE)?`calc(${h(this,He,qE)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r},CL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&h(this,Es))&&I(this,He,Gm).call(this)},xL=function(){if(h(this,As)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=h(this,fp);let o=!!h(this,Mu),a=o?h(this,Mu):h(this,pp);for(const m of h(this,dp))if(!a||ae.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const l=ae.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,f=l[0]+u,p=l[1];R(this,As,[100*(f-i)/t,100*(p-s)/r]);const{style:g}=h(this,pt);g.left=`${h(this,As)[0]}%`,g.top=`${h(this,As)[1]}%`},Gm=function(){R(this,Es,!h(this,Es)),h(this,Es)?(I(this,He,qm).call(this),h(this,pt).addEventListener("click",h(this,ku)),h(this,pt).addEventListener("keydown",h(this,Iu))):(I(this,He,KE).call(this),h(this,pt).removeEventListener("click",h(this,ku)),h(this,pt).removeEventListener("keydown",h(this,Iu)))},qm=function(){h(this,Yr)||this.render(),this.isVisible?h(this,Es)&&h(this,pt).classList.add("focused"):(I(this,He,xL).call(this),h(this,pt).hidden=!1,h(this,pt).style.zIndex=parseInt(h(this,pt).style.zIndex)+1e3)},KE=function(){h(this,pt).classList.remove("focused"),!(h(this,Es)||!this.isVisible)&&(h(this,pt).hidden=!0,h(this,pt).style.zIndex=parseInt(h(this,pt).style.zIndex)-1e3)};class RL extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var mp;class cz extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,mp,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:r,height:i}=Vs(t.rect),s=this.svgFactory.create(r,i,!0),o=R(this,mp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,mp)}addHighlightArea(){this.container.classList.add("highlightArea")}}mp=new WeakMap;var vp;class uz extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,vp,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:r,height:i}=Vs(t.rect),s=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,a=R(this,vp,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,vp)}addHighlightArea(){this.container.classList.add("highlightArea")}}vp=new WeakMap;var yp;class hz extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,yp,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:r,height:i}=Vs(t.rect),s=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,a=R(this,yp,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",i/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,yp)}addHighlightArea(){this.container.classList.add("highlightArea")}}yp=new WeakMap;var _p;class PL extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,_p,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:i,popupRef:s}}=this;if(!r)return this.container;const{width:o,height:a}=Vs(t),l=this.svgFactory.create(o,a,!0);let c=[];for(let f=0,p=r.length;f<p;f+=2){const g=r[f]-t[0],m=t[3]-r[f+1];c.push(`${g},${m}`)}c=c.join(" ");const u=R(this,_p,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,_p)}addHighlightArea(){this.container.classList.add("highlightArea")}}_p=new WeakMap;class dz extends PL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class fz extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var wp;class IL extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,wp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:r,borderStyle:i,popupRef:s}}=this,{width:o,height:a}=Vs(t),l=this.svgFactory.create(o,a,!0);for(const c of r){let u=[];for(let p=0,g=c.length;p<g;p+=2){const m=c[p]-t[0],v=t[3]-c[p+1];u.push(`${m},${v}`)}u=u.join(" ");const f=this.svgFactory.createElement(this.svgElementName);h(this,wp).push(f),f.setAttribute("points",u),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),!s&&this.hasPopupData&&this._createPopup(),l.append(f)}return this.container.append(l),this.container}getElementsToTriggerPopup(){return h(this,wp)}addHighlightArea(){this.container.classList.add("highlightArea")}}wp=new WeakMap;class pz extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class gz extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mz extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class vz extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class kL extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ep,Ap,XE;class yz extends Et{constructor(t){var i;super(t,{isRenderable:!0});M(this,Ap);M(this,Ep,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",I(this,Ap,XE).bind(this)),R(this,Ep,i);const{isMac:s}=Hn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&I(this,Ap,XE).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return h(this,Ep)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ep=new WeakMap,Ap=new WeakSet,XE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var bp,yl,Lu,Jl,ML,YE,kR;let _z=(kR=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o}){M(this,Jl);M(this,bp,null);M(this,yl,null);M(this,Lu,new Map);this.div=e,R(this,bp,t),R(this,yl,r),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}async render(e){var o;const{annotations:t}=e,r=this.div;ql(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new wS,annotationStorage:e.annotationStorage||new TS,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Rt.POPUP;if(l){const f=i.get(a.id);if(!f)continue;s.elements=f}else{const{width:f,height:p}=Vs(a.rect);if(f<=0||p<=0)continue}s.data=a;const c=tz.create(s);if(!c.isRenderable)continue;if(!l&&a.popupRef){const f=i.get(a.popupRef);f?f.push(c):i.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),I(this,Jl,ML).call(this,u,a.id),c.annotationEditorType>0&&(h(this,Lu).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}I(this,Jl,YE).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ql(t,{rotation:e.rotation}),I(this,Jl,YE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(h(this,Lu).values())}getEditableAnnotation(e){return h(this,Lu).get(e)}},bp=new WeakMap,yl=new WeakMap,Lu=new WeakMap,Jl=new WeakSet,ML=function(e,t){var i;const r=e.firstChild||e;r.id=`${SM}${t}`,this.div.append(e),(i=h(this,bp))==null||i.moveElementInDOM(this.div,e,r,!1)},YE=function(){if(!h(this,yl))return;const e=this.div;for(const[t,r]of h(this,yl)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r)}h(this,yl).clear()},kR);const am=/\r\n?|\n/g;var Sp,Tp,Cp,xp,Rp,Qr,ar,Pp,lr,Nu,Ct,LL,NL,DL,Km,Bs,Xm,Ym,OL,JE,FL;const Ye=class Ye extends Be{constructor(t){super({...t,name:"freeTextEditor"});M(this,Ct);M(this,Sp,this.editorDivBlur.bind(this));M(this,Tp,this.editorDivFocus.bind(this));M(this,Cp,this.editorDivInput.bind(this));M(this,xp,this.editorDivKeydown.bind(this));M(this,Rp,this.editorDivPaste.bind(this));M(this,Qr);M(this,ar,"");M(this,Pp,`${this.id}-editor`);M(this,lr);M(this,Nu,null);R(this,Qr,t.color||Ye._defaultColor||Be._defaultLineColor),R(this,lr,t.fontSize||Ye._defaultFontSize)}static get _keyboardManager(){const t=Ye.prototype,r=o=>o.isEmpty(),i=Kl.TRANSLATE_SMALL,s=Kl.TRANSLATE_BIG;return Me(this,"_keyboardManager",new cg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(t,r){Be.initialize(t,r,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case pe.FREETEXT_SIZE:Ye._defaultFontSize=r;break;case pe.FREETEXT_COLOR:Ye._defaultColor=r;break}}updateParams(t,r){switch(t){case pe.FREETEXT_SIZE:I(this,Ct,LL).call(this,r);break;case pe.FREETEXT_COLOR:I(this,Ct,NL).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.FREETEXT_SIZE,Ye._defaultFontSize],[pe.FREETEXT_COLOR,Ye._defaultColor||Be._defaultLineColor]]}get propertiesToUpdate(){return[[pe.FREETEXT_SIZE,h(this,lr)],[pe.FREETEXT_COLOR,h(this,Qr)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ye._internalPadding*t,-(Ye._internalPadding+h(this,lr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(xe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",h(this,xp),{signal:t}),this.editorDiv.addEventListener("focus",h(this,Tp),{signal:t}),this.editorDiv.addEventListener("blur",h(this,Sp),{signal:t}),this.editorDiv.addEventListener("input",h(this,Cp),{signal:t}),this.editorDiv.addEventListener("paste",h(this,Rp),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,Pp)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",h(this,xp)),this.editorDiv.removeEventListener("focus",h(this,Tp)),this.editorDiv.removeEventListener("blur",h(this,Sp)),this.editorDiv.removeEventListener("input",h(this,Cp)),this.editorDiv.removeEventListener("paste",h(this,Rp)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=h(this,ar),r=R(this,ar,I(this,Ct,DL).call(this).trimEnd());if(t===r)return;const i=s=>{if(R(this,ar,s),!s){this.remove();return}I(this,Ct,Ym).call(this),this._uiManager.rebuild(this),I(this,Ct,Km).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(t)},mustExec:!1}),I(this,Ct,Km).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,Pp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Be._l10nPromise.get("pdfjs-free-text-default-content").then(s=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",s)}),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${h(this,lr)}px * var(--scale-factor))`,i.color=h(this,Qr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Hv(this,this.div,["dblclick","keydown"]),this.width){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=h(this,Nu);let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,f]=this.pageDimensions,[p,g]=this.pageTranslation;let m,v;switch(this.rotation){case 0:m=t+(a[0]-p)/u,v=r+this.height-(a[1]-g)/f;break;case 90:m=t+(a[0]-p)/u,v=r-(a[1]-g)/f,[l,c]=[c,-l];break;case 180:m=t-this.width+(a[0]-p)/u,v=r-(a[1]-g)/f,[l,c]=[-l,-c];break;case 270:m=t+(a[0]-p-this.height*f)/u,v=r+(a[1]-g-this.width*u)/f,[l,c]=[-c,l];break}this.setAt(m*s,v*o,l,c)}else this.setAt(t*s,r*o,this.width*s,this.height*o);I(this,Ct,Ym).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,v,w;const r=t.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=I(m=Ye,Bs,JE).call(m,r.getData("text")||"").replaceAll(am,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],f=[];if(l.nodeType===Node.TEXT_NODE){const _=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(am,"")),_!==this.editorDiv){let E=u;for(const S of this.editorDiv.childNodes){if(S===_){E=f;continue}E.push(I(v=Ye,Bs,Xm).call(v,S))}}u.push(l.nodeValue.slice(0,c).replaceAll(am,""))}else if(l===this.editorDiv){let _=u,E=0;for(const S of this.editorDiv.childNodes)E++===c&&(_=f),_.push(I(w=Ye,Bs,Xm).call(w,S))}R(this,ar,`${u.join(`
`)}${s}${f.join(`
`)}`),I(this,Ct,Ym).call(this);const p=new Range;let g=u.reduce((_,E)=>_+E.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const E=_.nodeValue.length;if(g<=E){p.setStart(_,g),p.setEnd(_,g);break}g-=E}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static deserialize(t,r,i){var a;let s=null;if(t instanceof RL){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:f,id:p},textContent:g,textPosition:m,parent:{page:{pageNumber:v}}}=t;if(!g||g.length===0)return null;s=t={annotationType:xe.FREETEXT,color:Array.from(c),fontSize:l,value:g.join(`
`),position:m,pageIndex:v-1,rect:u.slice(0),rotation:f,id:p,deleted:!1}}const o=super.deserialize(t,r,i);return R(o,lr,t.fontSize),R(o,Qr,ae.makeHexColor(...t.color)),R(o,ar,I(a=Ye,Bs,JE).call(a,t.value)),o.annotationElementId=t.id||null,R(o,Nu,s),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const r=Ye._internalPadding*this.parentScale,i=this.getRect(r,r),s=Be._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,Qr)),o={annotationType:xe.FREETEXT,color:s,fontSize:h(this,lr),value:I(this,Ct,OL).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!I(this,Ct,FL).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:i}=r;i.fontSize=`calc(${h(this,lr)}px * var(--scale-factor))`,i.color=h(this,Qr),r.replaceChildren();for(const o of h(this,ar).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),r.append(a)}const s=Ye._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:h(this,ar)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Sp=new WeakMap,Tp=new WeakMap,Cp=new WeakMap,xp=new WeakMap,Rp=new WeakMap,Qr=new WeakMap,ar=new WeakMap,Pp=new WeakMap,lr=new WeakMap,Nu=new WeakMap,Ct=new WeakSet,LL=function(t){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-h(this,lr))*this.parentScale),R(this,lr,s),I(this,Ct,Km).call(this)},i=h(this,lr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},NL=function(t){const r=s=>{R(this,Qr,this.editorDiv.style.color=s)},i=h(this,Qr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},DL=function(){var r;const t=[];this.editorDiv.normalize();for(const i of this.editorDiv.childNodes)t.push(I(r=Ye,Bs,Xm).call(r,i));return t.join(`
`)},Km=function(){const[t,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/r):(this.width=i.height/t,this.height=i.width/r),this.fixAndSetPosition()},Bs=new WeakSet,Xm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(am,"")},Ym=function(){if(this.editorDiv.replaceChildren(),!!h(this,ar))for(const t of h(this,ar).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},OL=function(){return h(this,ar).replaceAll(" "," ")},JE=function(t){return t.replaceAll(" "," ")},FL=function(t){const{value:r,fontSize:i,color:s,pageIndex:o}=h(this,Nu);return this._hasBeenMoved||t.value!==r||t.fontSize!==i||t.color.some((a,l)=>a!==s[l])||t.pageIndex!==o},M(Ye,Bs),ve(Ye,"_freeTextDefaultContent",""),ve(Ye,"_internalPadding",0),ve(Ye,"_defaultColor",null),ve(Ye,"_defaultFontSize",10),ve(Ye,"_type","freetext"),ve(Ye,"_editorType",xe.FREETEXT);let QE=Ye;var Ip,To,Jr,Nn,VL,Qm,jL,BL,eA;class ZE{constructor(e,t=0,r=0,i=!0){M(this,Nn);M(this,Ip);M(this,To,[]);M(this,Jr,[]);let s=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:_,y:E,width:S,height:P}of e){const O=Math.floor((_-t)/u)*u,j=Math.ceil((_+S+t)/u)*u,C=Math.floor((E-t)/u)*u,T=Math.ceil((E+P+t)/u)*u,x=[O,C,T,!0],L=[j,C,T,!1];h(this,To).push(x,L),s=Math.min(s,O),o=Math.max(o,j),a=Math.min(a,C),l=Math.max(l,T)}const f=o-s+2*r,p=l-a+2*r,g=s-r,m=a-r,v=h(this,To).at(i?-1:-2),w=[v[0],v[2]];for(const _ of h(this,To)){const[E,S,P]=_;_[0]=(E-g)/f,_[1]=(S-m)/p,_[2]=(P-m)/p}R(this,Ip,{x:g,y:m,width:f,height:p,lastPoint:w})}getOutlines(){h(this,To).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of h(this,To))t[3]?(e.push(...I(this,Nn,eA).call(this,t)),I(this,Nn,jL).call(this,t)):(I(this,Nn,BL).call(this,t),e.push(...I(this,Nn,eA).call(this,t)));return I(this,Nn,VL).call(this,e)}}Ip=new WeakMap,To=new WeakMap,Jr=new WeakMap,Nn=new WeakSet,VL=function(e){const t=[],r=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const i=[];let s;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,u,f]=o;r.delete(o);let p=a,g=l;for(s=[a,c],i.push(s);;){let m;if(r.has(u))m=u;else if(r.has(f))m=f;else break;r.delete(m),[a,l,c,u,f]=m,p!==a&&(s.push(p,g,a,g===l?l:c),p=a),g=g===l?c:l}s.push(p,g)}return new wz(i,h(this,Ip))},Qm=function(e){const t=h(this,Jr);let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,o=t[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1},jL=function([,e,t]){const r=I(this,Nn,Qm).call(this,e);h(this,Jr).splice(r,0,[e,t])},BL=function([,e,t]){const r=I(this,Nn,Qm).call(this,e);for(let i=r;i<h(this,Jr).length;i++){const[s,o]=h(this,Jr)[i];if(s!==e)break;if(s===e&&o===t){h(this,Jr).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,o]=h(this,Jr)[i];if(s!==e)break;if(s===e&&o===t){h(this,Jr).splice(i,1);return}}},eA=function(e){const[t,r,i]=e,s=[[t,r,i]],o=I(this,Nn,Qm).call(this,i);for(let a=0;a<o;a++){const[l,c]=h(this,Jr)[a];for(let u=0,f=s.length;u<f;u++){const[,p,g]=s[u];if(!(c<=p||g<=l)){if(p>=l){if(g>c)s[u][1]=c;else{if(f===1)return[];s.splice(u,1),u--,f--}continue}s[u][2]=l,g>c&&s.push([t,c,g])}}}return s};class UL{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof nA}}var kp,Du;class wz extends UL{constructor(t,r){super();M(this,kp);M(this,Du);R(this,Du,t),R(this,kp,r)}toSVGPath(){const t=[];for(const r of h(this,Du)){let[i,s]=r;t.push(`M${i} ${s}`);for(let o=2;o<r.length;o+=2){const a=r[o],l=r[o+1];a===i?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,r,i,s],o){const a=[],l=i-t,c=s-r;for(const u of h(this,Du)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=t+u[p]*l,f[p+1]=s-u[p+1]*c;a.push(f)}return a}get box(){return h(this,kp)}}kp=new WeakMap,Du=new WeakMap;var Ti,Ss,Ou,Fu,Ci,Te,_l,wl,Mp,Lp,Vu,ju,Co,Np,Cy,xy,Dp,tA;const ss=class ss{constructor({x:e,y:t},r,i,s,o,a=0){M(this,Dp);M(this,Ti);M(this,Ss,[]);M(this,Ou);M(this,Fu);M(this,Ci,[]);M(this,Te,new Float64Array(18));M(this,_l);M(this,wl);M(this,Mp);M(this,Lp);M(this,Vu);M(this,ju);M(this,Co,[]);R(this,Ti,r),R(this,ju,s*i),R(this,Fu,o),h(this,Te).set([NaN,NaN,NaN,NaN,e,t],6),R(this,Ou,a),R(this,Lp,h(ss,Np)*i),R(this,Mp,h(ss,xy)*i),R(this,Vu,i),h(this,Co).push(e,t)}get free(){return!0}isEmpty(){return isNaN(h(this,Te)[8])}add({x:e,y:t}){var x;R(this,_l,e),R(this,wl,t);const[r,i,s,o]=h(this,Ti);let[a,l,c,u]=h(this,Te).subarray(8,12);const f=e-c,p=t-u,g=Math.hypot(f,p);if(g<h(this,Mp))return!1;const m=g-h(this,Lp),v=m/g,w=v*f,_=v*p;let E=a,S=l;a=c,l=u,c+=w,u+=_,(x=h(this,Co))==null||x.push(e,t);const P=-_/m,O=w/m,j=P*h(this,ju),C=O*h(this,ju);return h(this,Te).set(h(this,Te).subarray(2,8),0),h(this,Te).set([c+j,u+C],4),h(this,Te).set(h(this,Te).subarray(14,18),12),h(this,Te).set([c-j,u-C],16),isNaN(h(this,Te)[6])?(h(this,Ci).length===0&&(h(this,Te).set([a+j,l+C],2),h(this,Ci).push(NaN,NaN,NaN,NaN,(a+j-r)/s,(l+C-i)/o),h(this,Te).set([a-j,l-C],14),h(this,Ss).push(NaN,NaN,NaN,NaN,(a-j-r)/s,(l-C-i)/o)),h(this,Te).set([E,S,a,l,c,u],6),!this.isEmpty()):(h(this,Te).set([E,S,a,l,c,u],6),Math.abs(Math.atan2(S-l,E-a)-Math.atan2(_,w))<Math.PI/2?([a,l,c,u]=h(this,Te).subarray(2,6),h(this,Ci).push(NaN,NaN,NaN,NaN,((a+c)/2-r)/s,((l+u)/2-i)/o),[a,l,E,S]=h(this,Te).subarray(14,18),h(this,Ss).push(NaN,NaN,NaN,NaN,((E+a)/2-r)/s,((S+l)/2-i)/o),!0):([E,S,a,l,c,u]=h(this,Te).subarray(0,6),h(this,Ci).push(((E+5*a)/6-r)/s,((S+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),[c,u,a,l,E,S]=h(this,Te).subarray(12,18),h(this,Ss).push(((E+5*a)/6-r)/s,((S+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=h(this,Ci),t=h(this,Ss),r=h(this,Te).subarray(4,6),i=h(this,Te).subarray(16,18),[s,o,a,l]=h(this,Ti),[c,u,f,p]=I(this,Dp,tA).call(this);if(isNaN(h(this,Te)[6])&&!this.isEmpty())return`M${(h(this,Te)[2]-s)/a} ${(h(this,Te)[3]-o)/l} L${(h(this,Te)[4]-s)/a} ${(h(this,Te)[5]-o)/l} L${c} ${u} L${f} ${p} L${(h(this,Te)[16]-s)/a} ${(h(this,Te)[17]-o)/l} L${(h(this,Te)[14]-s)/a} ${(h(this,Te)[15]-o)/l} Z`;const g=[];g.push(`M${e[4]} ${e[5]}`);for(let m=6;m<e.length;m+=6)isNaN(e[m])?g.push(`L${e[m+4]} ${e[m+5]}`):g.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);g.push(`L${(r[0]-s)/a} ${(r[1]-o)/l} L${c} ${u} L${f} ${p} L${(i[0]-s)/a} ${(i[1]-o)/l}`);for(let m=t.length-6;m>=6;m-=6)isNaN(t[m])?g.push(`L${t[m+4]} ${t[m+5]}`):g.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);return g.push(`L${t[4]} ${t[5]} Z`),g.join(" ")}getOutlines(){var _;const e=h(this,Ci),t=h(this,Ss),r=h(this,Te),i=r.subarray(4,6),s=r.subarray(16,18),[o,a,l,c]=h(this,Ti),u=new Float64Array((((_=h(this,Co))==null?void 0:_.length)??0)+2);for(let E=0,S=u.length-2;E<S;E+=2)u[E]=(h(this,Co)[E]-o)/l,u[E+1]=(h(this,Co)[E+1]-a)/c;u[u.length-2]=(h(this,_l)-o)/l,u[u.length-1]=(h(this,wl)-a)/c;const[f,p,g,m]=I(this,Dp,tA).call(this);if(isNaN(r[6])&&!this.isEmpty()){const E=new Float64Array(36);return E.set([NaN,NaN,NaN,NaN,(r[2]-o)/l,(r[3]-a)/c,NaN,NaN,NaN,NaN,(r[4]-o)/l,(r[5]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(r[16]-o)/l,(r[17]-a)/c,NaN,NaN,NaN,NaN,(r[14]-o)/l,(r[15]-a)/c],0),new nA(E,u,h(this,Ti),h(this,Vu),h(this,Ou),h(this,Fu))}const v=new Float64Array(h(this,Ci).length+24+h(this,Ss).length);let w=e.length;for(let E=0;E<w;E+=2){if(isNaN(e[E])){v[E]=v[E+1]=NaN;continue}v[E]=e[E],v[E+1]=e[E+1]}v.set([NaN,NaN,NaN,NaN,(i[0]-o)/l,(i[1]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(s[0]-o)/l,(s[1]-a)/c],w),w+=24;for(let E=t.length-6;E>=6;E-=6)for(let S=0;S<6;S+=2){if(isNaN(t[E+S])){v[w]=v[w+1]=NaN,w+=2;continue}v[w]=t[E+S],v[w+1]=t[E+S+1],w+=2}return v.set([NaN,NaN,NaN,NaN,t[4],t[5]],w),new nA(v,u,h(this,Ti),h(this,Vu),h(this,Ou),h(this,Fu))}};Ti=new WeakMap,Ss=new WeakMap,Ou=new WeakMap,Fu=new WeakMap,Ci=new WeakMap,Te=new WeakMap,_l=new WeakMap,wl=new WeakMap,Mp=new WeakMap,Lp=new WeakMap,Vu=new WeakMap,ju=new WeakMap,Co=new WeakMap,Np=new WeakMap,Cy=new WeakMap,xy=new WeakMap,Dp=new WeakSet,tA=function(){const e=h(this,Te).subarray(4,6),t=h(this,Te).subarray(16,18),[r,i,s,o]=h(this,Ti);return[(h(this,_l)+(e[0]-t[0])/2-r)/s,(h(this,wl)+(e[1]-t[1])/2-i)/o,(h(this,_l)+(t[0]-e[0])/2-r)/s,(h(this,wl)+(t[1]-e[1])/2-i)/o]},M(ss,Np,8),M(ss,Cy,2),M(ss,xy,h(ss,Np)+h(ss,Cy));let Kv=ss;var Bu,El,Ts,Op,cr,Fp,yt,Wn,md,vd,$L;class nA extends UL{constructor(t,r,i,s,o,a){super();M(this,Wn);M(this,Bu);M(this,El,null);M(this,Ts);M(this,Op);M(this,cr);M(this,Fp);M(this,yt);R(this,yt,t),R(this,cr,r),R(this,Bu,i),R(this,Fp,s),R(this,Ts,o),R(this,Op,a),I(this,Wn,$L).call(this,a);const{x:l,y:c,width:u,height:f}=h(this,El);for(let p=0,g=t.length;p<g;p+=2)t[p]=(t[p]-l)/u,t[p+1]=(t[p+1]-c)/f;for(let p=0,g=r.length;p<g;p+=2)r[p]=(r[p]-l)/u,r[p+1]=(r[p+1]-c)/f}toSVGPath(){const t=[`M${h(this,yt)[4]} ${h(this,yt)[5]}`];for(let r=6,i=h(this,yt).length;r<i;r+=6){if(isNaN(h(this,yt)[r])){t.push(`L${h(this,yt)[r+4]} ${h(this,yt)[r+5]}`);continue}t.push(`C${h(this,yt)[r]} ${h(this,yt)[r+1]} ${h(this,yt)[r+2]} ${h(this,yt)[r+3]} ${h(this,yt)[r+4]} ${h(this,yt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,i,s],o){const a=i-t,l=s-r;let c,u;switch(o){case 0:c=I(this,Wn,md).call(this,h(this,yt),t,s,a,-l),u=I(this,Wn,md).call(this,h(this,cr),t,s,a,-l);break;case 90:c=I(this,Wn,vd).call(this,h(this,yt),t,r,a,l),u=I(this,Wn,vd).call(this,h(this,cr),t,r,a,l);break;case 180:c=I(this,Wn,md).call(this,h(this,yt),i,r,-a,l),u=I(this,Wn,md).call(this,h(this,cr),i,r,-a,l);break;case 270:c=I(this,Wn,vd).call(this,h(this,yt),i,s,-a,-l),u=I(this,Wn,vd).call(this,h(this,cr),i,s,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return h(this,El)}getNewOutline(t,r){const{x:i,y:s,width:o,height:a}=h(this,El),[l,c,u,f]=h(this,Bu),p=o*u,g=a*f,m=i*u+l,v=s*f+c,w=new Kv({x:h(this,cr)[0]*p+m,y:h(this,cr)[1]*g+v},h(this,Bu),h(this,Fp),t,h(this,Op),r??h(this,Ts));for(let _=2;_<h(this,cr).length;_+=2)w.add({x:h(this,cr)[_]*p+m,y:h(this,cr)[_+1]*g+v});return w.getOutlines()}}Bu=new WeakMap,El=new WeakMap,Ts=new WeakMap,Op=new WeakMap,cr=new WeakMap,Fp=new WeakMap,yt=new WeakMap,Wn=new WeakSet,md=function(t,r,i,s,o){const a=new Float64Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l]*s,a[l+1]=i+t[l+1]*o;return a},vd=function(t,r,i,s,o){const a=new Float64Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l+1]*s,a[l+1]=i+t[l]*o;return a},$L=function(t){const r=h(this,yt);let i=r[4],s=r[5],o=i,a=s,l=i,c=s,u=i,f=s;const p=t?Math.max:Math.min;for(let _=6,E=r.length;_<E;_+=6){if(isNaN(r[_]))o=Math.min(o,r[_+4]),a=Math.min(a,r[_+5]),l=Math.max(l,r[_+4]),c=Math.max(c,r[_+5]),f<r[_+5]?(u=r[_+4],f=r[_+5]):f===r[_+5]&&(u=p(u,r[_+4]));else{const S=ae.bezierBoundingBox(i,s,...r.slice(_,_+6));o=Math.min(o,S[0]),a=Math.min(a,S[1]),l=Math.max(l,S[2]),c=Math.max(c,S[3]),f<S[3]?(u=S[2],f=S[3]):f===S[3]&&(u=p(u,S[2]))}i=r[_+4],s=r[_+5]}const g=o-h(this,Ts),m=a-h(this,Ts),v=l-o+2*h(this,Ts),w=c-a+2*h(this,Ts);R(this,El,{x:g,y:m,width:v,height:w,lastPoint:[u,f]})};var Vp,jp,Zr,Al,Uu,It,Bp,$u,Up,$p,ei,zu,Xe,rA,iA,zL,Ia,HL,oo;const os=class os{constructor({editor:e=null,uiManager:t=null}){M(this,Xe);M(this,Vp,I(this,Xe,zL).bind(this));M(this,jp,I(this,Xe,HL).bind(this));M(this,Zr,null);M(this,Al,null);M(this,Uu);M(this,It,null);M(this,Bp,!1);M(this,$u,!1);M(this,Up,null);M(this,$p);M(this,ei,null);M(this,zu);var r;e?(R(this,$u,!1),R(this,zu,pe.HIGHLIGHT_COLOR),R(this,Up,e)):(R(this,$u,!0),R(this,zu,pe.HIGHLIGHT_DEFAULT_COLOR)),R(this,ei,(e==null?void 0:e._uiManager)||t),R(this,$p,h(this,ei)._eventBus),R(this,Uu,(e==null?void 0:e.color)||((r=h(this,ei))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Me(this,"_keyboardManager",new cg([[["Escape","mac+Escape"],os.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],os.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],os.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],os.prototype._moveToPrevious],[["Home","mac+Home"],os.prototype._moveToBeginning],[["End","mac+End"],os.prototype._moveToEnd]]))}renderButton(){const e=R(this,Zr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=h(this,ei)._signal;e.addEventListener("click",I(this,Xe,Ia).bind(this),{signal:t}),e.addEventListener("keydown",h(this,Vp),{signal:t});const r=R(this,Al,document.createElement("span"));return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=h(this,Uu),e.append(r),e}renderMainDropdown(){const e=R(this,It,I(this,Xe,rA).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===h(this,Zr)){I(this,Xe,Ia).call(this,e);return}const t=e.target.getAttribute("data-color");t&&I(this,Xe,iA).call(this,t,e)}_moveToNext(e){var t,r;if(!h(this,Xe,oo)){I(this,Xe,Ia).call(this,e);return}if(e.target===h(this,Zr)){(t=h(this,It).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=h(this,It))==null?void 0:t.firstChild)||e.target===h(this,Zr)){h(this,Xe,oo)&&this._hideDropdownFromKeyboard();return}h(this,Xe,oo)||I(this,Xe,Ia).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!h(this,Xe,oo)){I(this,Xe,Ia).call(this,e);return}(t=h(this,It).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!h(this,Xe,oo)){I(this,Xe,Ia).call(this,e);return}(t=h(this,It).lastChild)==null||t.focus()}hideDropdown(){var e;(e=h(this,It))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",h(this,jp))}_hideDropdownFromKeyboard(){var e;if(!h(this,$u)){if(!h(this,Xe,oo)){(e=h(this,Up))==null||e.unselect();return}this.hideDropdown(),h(this,Zr).focus({preventScroll:!0,focusVisible:h(this,Bp)})}}updateColor(e){if(h(this,Al)&&(h(this,Al).style.backgroundColor=e),!h(this,It))return;const t=h(this,ei).highlightColors.values();for(const r of h(this,It).children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=h(this,Zr))==null||e.remove(),R(this,Zr,null),R(this,Al,null),(t=h(this,It))==null||t.remove(),R(this,It,null)}};Vp=new WeakMap,jp=new WeakMap,Zr=new WeakMap,Al=new WeakMap,Uu=new WeakMap,It=new WeakMap,Bp=new WeakMap,$u=new WeakMap,Up=new WeakMap,$p=new WeakMap,ei=new WeakMap,zu=new WeakMap,Xe=new WeakSet,rA=function(){const e=document.createElement("div"),t=h(this,ei)._signal;e.addEventListener("contextmenu",Xn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,i]of h(this,ei).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${r}`);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.setAttribute("aria-selected",i===h(this,Uu)),s.addEventListener("click",I(this,Xe,iA).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",h(this,Vp),{signal:t}),e},iA=function(e,t){t.stopPropagation(),h(this,$p).dispatch("switchannotationeditorparams",{source:this,type:h(this,zu),value:e})},zL=function(e){os._keyboardManager.exec(this,e)},Ia=function(e){if(h(this,Xe,oo)){this.hideDropdown();return}if(R(this,Bp,e.detail===0),window.addEventListener("pointerdown",h(this,jp),{signal:h(this,ei)._signal}),h(this,It)){h(this,It).classList.remove("hidden");return}const t=R(this,It,I(this,Xe,rA).call(this));h(this,Zr).append(t)},HL=function(e){var t;(t=h(this,It))!=null&&t.contains(e.target)||this.hideDropdown()},oo=function(){return h(this,It)&&!h(this,It).classList.contains("hidden")};let Xv=os;var Hu,zp,xo,bl,Wu,Cr,Hp,Wp,Sl,ti,Cn,ur,Ry,Gu,Tl,kt,qu,xi,Gp,Ee,sA,oA,WL,GL,qL,aA,yd,Mr,bc,KL,Jm,_d,XL,YL,QL,JL;const Ve=class Ve extends Be{constructor(t){super({...t,name:"highlightEditor"});M(this,Ee);M(this,Hu,null);M(this,zp,0);M(this,xo);M(this,bl,null);M(this,Wu,null);M(this,Cr,null);M(this,Hp,null);M(this,Wp,0);M(this,Sl,null);M(this,ti,null);M(this,Cn,null);M(this,ur,!1);M(this,Ry,I(this,Ee,KL).bind(this));M(this,Gu,null);M(this,Tl);M(this,kt,null);M(this,qu,"");M(this,xi);M(this,Gp,"");this.color=t.color||Ve._defaultColor,R(this,xi,t.thickness||Ve._defaultThickness),R(this,Tl,t.opacity||Ve._defaultOpacity),R(this,xo,t.boxes||null),R(this,Gp,t.methodOfCreation||""),R(this,qu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(R(this,ur,!0),I(this,Ee,oA).call(this,t),I(this,Ee,yd).call(this)):(R(this,Hu,t.anchorNode),R(this,zp,t.anchorOffset),R(this,Hp,t.focusNode),R(this,Wp,t.focusOffset),I(this,Ee,sA).call(this),I(this,Ee,yd).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ve.prototype;return Me(this,"_keyboardManager",new cg([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,ur)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(this,xi),methodOfCreation:h(this,Gp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var i;Be.initialize(t,r),Ve._defaultColor||(Ve._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case pe.HIGHLIGHT_DEFAULT_COLOR:Ve._defaultColor=r;break;case pe.HIGHLIGHT_THICKNESS:Ve._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return h(this,Gu)}updateParams(t,r){switch(t){case pe.HIGHLIGHT_COLOR:I(this,Ee,WL).call(this,r);break;case pe.HIGHLIGHT_THICKNESS:I(this,Ee,GL).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.HIGHLIGHT_DEFAULT_COLOR,Ve._defaultColor],[pe.HIGHLIGHT_THICKNESS,Ve._defaultThickness]]}get propertiesToUpdate(){return[[pe.HIGHLIGHT_COLOR,this.color||Ve._defaultColor],[pe.HIGHLIGHT_THICKNESS,h(this,xi)||Ve._defaultThickness],[pe.HIGHLIGHT_FREE,h(this,ur)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(R(this,Wu,new Xv({editor:this})),t.addColorPicker(h(this,Wu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(I(this,Ee,_d).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,I(this,Ee,_d).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){I(this,Ee,aA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Ee,yd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?I(this,Ee,aA).call(this):t&&(I(this,Ee,yd).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var s,o,a;const{drawLayer:r}=this.parent;let i;h(this,ur)?(t=(t-this.rotation+360)%360,i=I(s=Ve,Mr,bc).call(s,h(this,ti).box,t)):i=I(o=Ve,Mr,bc).call(o,this,t),r.rotate(h(this,Cn),t),r.rotate(h(this,kt),t),r.updateBox(h(this,Cn),i),r.updateBox(h(this,kt),I(a=Ve,Mr,bc).call(a,h(this,Cr).box,t))}render(){if(this.div)return this.div;const t=super.render();h(this,qu)&&(t.setAttribute("aria-label",h(this,qu)),t.setAttribute("role","mark")),h(this,ur)?t.classList.add("free"):this.div.addEventListener("keydown",h(this,Ry),{signal:this._uiManager._signal});const r=R(this,Sl,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=h(this,bl);const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),Hv(this,h(this,Sl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(h(this,kt),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(h(this,kt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:I(this,Ee,Jm).call(this,!0);break;case 1:case 3:I(this,Ee,Jm).call(this,!1);break}}select(){var t,r;super.select(),h(this,kt)&&((t=this.parent)==null||t.drawLayer.removeClass(h(this,kt),"hovered"),(r=this.parent)==null||r.drawLayer.addClass(h(this,kt),"selected"))}unselect(){var t;super.unselect(),h(this,kt)&&((t=this.parent)==null||t.drawLayer.removeClass(h(this,kt),"selected"),h(this,ur)||I(this,Ee,Jm).call(this,!1))}get _mustFixPosition(){return!h(this,ur)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(h(this,Cn),t),this.parent.drawLayer.show(h(this,kt),t))}static startHighlighting(t,r,{target:i,x:s,y:o}){const{x:a,y:l,width:c,height:u}=i.getBoundingClientRect(),f=w=>{I(this,Mr,QL).call(this,t,w)},p=t._signal,g={capture:!0,passive:!1,signal:p},m=w=>{w.preventDefault(),w.stopPropagation()},v=w=>{i.removeEventListener("pointermove",f),window.removeEventListener("blur",v),window.removeEventListener("pointerup",v),window.removeEventListener("pointerdown",m,g),window.removeEventListener("contextmenu",Xn),I(this,Mr,JL).call(this,t,w)};window.addEventListener("blur",v,{signal:p}),window.addEventListener("pointerup",v,{signal:p}),window.addEventListener("pointerdown",m,g),window.addEventListener("contextmenu",Xn,{signal:p}),i.addEventListener("pointermove",f,{signal:p}),this._freeHighlight=new Kv({x:s,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,r,i){var v;const s=super.deserialize(t,r,i),{rect:[o,a,l,c],color:u,quadPoints:f}=t;s.color=ae.makeHexColor(...u),R(s,Tl,t.opacity);const[p,g]=s.pageDimensions;s.width=(l-o)/p,s.height=(c-a)/g;const m=R(s,xo,[]);for(let w=0;w<f.length;w+=8)m.push({x:(f[4]-l)/p,y:(c-(1-f[w+5]))/g,width:(f[w+2]-f[w])/p,height:(f[w+5]-f[w+1])/g});return I(v=s,Ee,sA).call(v),s}serialize(t=!1){if(this.isEmpty()||t)return null;const r=this.getRect(0,0),i=Be._colorManager.convert(this.color);return{annotationType:xe.HIGHLIGHT,color:i,opacity:h(this,Tl),thickness:h(this,xi),quadPoints:I(this,Ee,XL).call(this),outlines:I(this,Ee,YL).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:I(this,Ee,_d).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Hu=new WeakMap,zp=new WeakMap,xo=new WeakMap,bl=new WeakMap,Wu=new WeakMap,Cr=new WeakMap,Hp=new WeakMap,Wp=new WeakMap,Sl=new WeakMap,ti=new WeakMap,Cn=new WeakMap,ur=new WeakMap,Ry=new WeakMap,Gu=new WeakMap,Tl=new WeakMap,kt=new WeakMap,qu=new WeakMap,xi=new WeakMap,Gp=new WeakMap,Ee=new WeakSet,sA=function(){const t=new ZE(h(this,xo),.001);R(this,ti,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=h(this,ti).box;const r=new ZE(h(this,xo),.0025,.001,this._uiManager.direction==="ltr");R(this,Cr,r.getOutlines());const{lastPoint:i}=h(this,Cr).box;R(this,Gu,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},oA=function({highlightOutlines:t,highlightId:r,clipPathId:i}){var f,p;if(R(this,ti,t),R(this,Cr,t.getNewOutline(h(this,xi)/2+1.5,.0025)),r>=0)R(this,Cn,r),R(this,bl,i),this.parent.drawLayer.finalizeLine(r,t),R(this,kt,this.parent.drawLayer.highlightOutline(h(this,Cr)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(h(this,Cn),t),this.parent.drawLayer.updateBox(h(this,Cn),I(f=Ve,Mr,bc).call(f,h(this,ti).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(h(this,kt),h(this,Cr)),this.parent.drawLayer.updateBox(h(this,kt),I(p=Ve,Mr,bc).call(p,h(this,Cr).box,g))}const{x:o,y:a,width:l,height:c}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[g,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*m/g,this.height=c*g/m;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[g,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*m/g,this.height=c*g/m;break}}const{lastPoint:u}=h(this,Cr).box;R(this,Gu,[(u[0]-o)/l,(u[1]-a)/c])},WL=function(t){const r=s=>{var o,a;this.color=s,(o=this.parent)==null||o.drawLayer.changeColor(h(this,Cn),s),(a=h(this,Wu))==null||a.updateColor(s)},i=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},GL=function(t){const r=h(this,xi),i=s=>{R(this,xi,s),I(this,Ee,qL).call(this,s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},qL=function(t){if(!h(this,ur))return;I(this,Ee,oA).call(this,{highlightOutlines:h(this,ti).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)},aA=function(){h(this,Cn)===null||!this.parent||(this.parent.drawLayer.remove(h(this,Cn)),R(this,Cn,null),this.parent.drawLayer.remove(h(this,kt)),R(this,kt,null))},yd=function(t=this.parent){h(this,Cn)===null&&({id:tr(this,Cn)._,clipPathId:tr(this,bl)._}=t.drawLayer.highlight(h(this,ti),this.color,h(this,Tl)),R(this,kt,t.drawLayer.highlightOutline(h(this,Cr))),h(this,Sl)&&(h(this,Sl).style.clipPath=h(this,bl)))},Mr=new WeakSet,bc=function({x:t,y:r,width:i,height:s},o){switch(o){case 90:return{x:1-r-s,y:t,width:s,height:i};case 180:return{x:1-t-i,y:1-r-s,width:i,height:s};case 270:return{x:r,y:1-t-i,width:s,height:i}}return{x:t,y:r,width:i,height:s}},KL=function(t){Ve._keyboardManager.exec(this,t)},Jm=function(t){if(!h(this,Hu))return;const r=window.getSelection();t?r.setPosition(h(this,Hu),h(this,zp)):r.setPosition(h(this,Hp),h(this,Wp))},_d=function(){return h(this,ur)?this.rotation:0},XL=function(){if(h(this,ur))return null;const[t,r]=this.pageDimensions,i=h(this,xo),s=new Float32Array(i.length*8);let o=0;for(const{x:a,y:l,width:c,height:u}of i){const f=a*t,p=(1-l-u)*r;s[o]=s[o+4]=f,s[o+1]=s[o+3]=p,s[o+2]=s[o+6]=f+c*t,s[o+5]=s[o+7]=p+u*r,o+=8}return s},YL=function(t){return h(this,ti).serialize(t,I(this,Ee,_d).call(this))},QL=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},JL=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},M(Ve,Mr),ve(Ve,"_defaultColor",null),ve(Ve,"_defaultOpacity",1),ve(Ve,"_defaultThickness",12),ve(Ve,"_l10nPromise"),ve(Ve,"_type","highlight"),ve(Ve,"_editorType",xe.HIGHLIGHT),ve(Ve,"_freeHighlightId",-1),ve(Ve,"_freeHighlight",null),ve(Ve,"_freeHighlightClipId","");let Yv=Ve;var Cl,xl,qp,Kp,Xp,Rl,Ri,Cs,xr,Pl,Il,xs,kl,Ml,Ro,te,ZL,eN,tN,nN,cA,rN,uA,iN,sN,oN,aN,lN,ka,hA,Zm,ev,Sc,dA,tv,Ys,cN,fA,uN,hN,pA,nv,wd;const st=class st extends Be{constructor(t){super({...t,name:"inkEditor"});M(this,te);M(this,Cl,0);M(this,xl,0);M(this,qp,this.canvasPointermove.bind(this));M(this,Kp,this.canvasPointerleave.bind(this));M(this,Xp,this.canvasPointerup.bind(this));M(this,Rl,this.canvasPointerdown.bind(this));M(this,Ri,null);M(this,Cs,new Path2D);M(this,xr,!1);M(this,Pl,!1);M(this,Il,!1);M(this,xs,null);M(this,kl,0);M(this,Ml,0);M(this,Ro,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,r){Be.initialize(t,r)}static updateDefaultParams(t,r){switch(t){case pe.INK_THICKNESS:st._defaultThickness=r;break;case pe.INK_COLOR:st._defaultColor=r;break;case pe.INK_OPACITY:st._defaultOpacity=r/100;break}}updateParams(t,r){switch(t){case pe.INK_THICKNESS:I(this,te,ZL).call(this,r);break;case pe.INK_COLOR:I(this,te,eN).call(this,r);break;case pe.INK_OPACITY:I(this,te,tN).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.INK_THICKNESS,st._defaultThickness],[pe.INK_COLOR,st._defaultColor||Be._defaultLineColor],[pe.INK_OPACITY,Math.round(st._defaultOpacity*100)]]}get propertiesToUpdate(){return[[pe.INK_THICKNESS,this.thickness||st._defaultThickness],[pe.INK_COLOR,this.color||st._defaultColor||Be._defaultLineColor],[pe.INK_OPACITY,Math.round(100*(this.opacity??st._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(I(this,te,Zm).call(this),I(this,te,ev).call(this)),this.isAttachedToDOM||(this.parent.add(this),I(this,te,Sc).call(this)),I(this,te,wd).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,h(this,Ri)&&(clearTimeout(h(this,Ri)),R(this,Ri,null)),(t=h(this,xs))==null||t.disconnect(),R(this,xs,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,r]=this.parentDimensions,i=this.width*t,s=this.height*r;this.setDimensions(i,s)}enableEditMode(){h(this,xr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",h(this,Rl),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",h(this,Rl)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){h(this,xr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),R(this,xr,!0),this.div.classList.add("disabled"),I(this,te,wd).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||h(this,xr)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),I(this,te,rN).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),I(this,te,uA).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),I(this,te,hA).call(this,t)}canvasPointerleave(t){I(this,te,hA).call(this,t)}get isResizable(){return!this.isEmpty()&&h(this,xr)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,s,o,a]=I(this,te,nN).call(this);if(this.setAt(i,s,0,0),this.setDims(o,a),I(this,te,Zm).call(this),this.width){const[l,c]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*c),this.setAt(t*l,r*c,this.width*l,this.height*c),R(this,Il,!0),I(this,te,Sc).call(this),this.setDims(this.width*l,this.height*c),I(this,te,ka).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return I(this,te,ev).call(this),this.div}setDimensions(t,r){const i=Math.round(t),s=Math.round(r);if(h(this,kl)===i&&h(this,Ml)===s)return;R(this,kl,i),R(this,Ml,s),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=r/a,this.fixAndSetPosition(),h(this,xr)&&I(this,te,dA).call(this,t,r),I(this,te,Sc).call(this),I(this,te,ka).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,r,i){var w,_,E;if(t instanceof IL)return null;const s=super.deserialize(t,r,i);s.thickness=t.thickness,s.color=ae.makeHexColor(...t.color),s.opacity=t.opacity;const[o,a]=s.pageDimensions,l=s.width*o,c=s.height*a,u=s.parentScale,f=t.thickness/2;R(s,xr,!0),R(s,kl,Math.round(l)),R(s,Ml,Math.round(c));const{paths:p,rect:g,rotation:m}=t;for(let{bezier:S}of p){S=I(w=st,Ys,uN).call(w,S,g,m);const P=[];s.paths.push(P);let O=u*(S[0]-f),j=u*(S[1]-f);for(let T=2,x=S.length;T<x;T+=6){const L=u*(S[T]-f),F=u*(S[T+1]-f),V=u*(S[T+2]-f),D=u*(S[T+3]-f),z=u*(S[T+4]-f),$=u*(S[T+5]-f);P.push([[O,j],[L,F],[V,D],[z,$]]),O=z,j=$}const C=I(this,Ys,cN).call(this,P);s.bezierPath2D.push(C)}const v=I(_=s,te,pA).call(_);return R(s,xl,Math.max(Be.MIN_SIZE,v[2]-v[0])),R(s,Cl,Math.max(Be.MIN_SIZE,v[3]-v[1])),I(E=s,te,dA).call(E,l,c),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),r=Be._colorManager.convert(this.ctx.strokeStyle);return{annotationType:xe.INK,color:r,thickness:this.thickness,opacity:this.opacity,paths:I(this,te,hN).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Cl=new WeakMap,xl=new WeakMap,qp=new WeakMap,Kp=new WeakMap,Xp=new WeakMap,Rl=new WeakMap,Ri=new WeakMap,Cs=new WeakMap,xr=new WeakMap,Pl=new WeakMap,Il=new WeakMap,xs=new WeakMap,kl=new WeakMap,Ml=new WeakMap,Ro=new WeakMap,te=new WeakSet,ZL=function(t){const r=s=>{this.thickness=s,I(this,te,wd).call(this)},i=this.thickness;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},eN=function(t){const r=s=>{this.color=s,I(this,te,ka).call(this)},i=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},tN=function(t){const r=s=>{this.opacity=s,I(this,te,ka).call(this)};t/=100;const i=this.opacity;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},nN=function(){const{parentRotation:t,parentDimensions:[r,i]}=this;switch(t){case 90:return[0,i,i,r];case 180:return[r,i,r,i];case 270:return[r,0,i,r];default:return[0,0,r,i]}},cA=function(){const{ctx:t,color:r,opacity:i,thickness:s,parentScale:o,scaleFactor:a}=this;t.lineWidth=s*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${r}${H$(i)}`},rN=function(t,r){const i=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Xn,{signal:i}),this.canvas.addEventListener("pointerleave",h(this,Kp),{signal:i}),this.canvas.addEventListener("pointermove",h(this,qp),{signal:i}),this.canvas.addEventListener("pointerup",h(this,Xp),{signal:i}),this.canvas.removeEventListener("pointerdown",h(this,Rl)),this.isEditing=!0,h(this,Il)||(R(this,Il,!0),I(this,te,Sc).call(this),this.thickness||(this.thickness=st._defaultThickness),this.color||(this.color=st._defaultColor||Be._defaultLineColor),this.opacity??(this.opacity=st._defaultOpacity)),this.currentPath.push([t,r]),R(this,Pl,!1),I(this,te,cA).call(this),R(this,Ro,()=>{I(this,te,oN).call(this),h(this,Ro)&&window.requestAnimationFrame(h(this,Ro))}),window.requestAnimationFrame(h(this,Ro))},uA=function(t,r){const[i,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&r===s)return;const o=this.currentPath;let a=h(this,Cs);if(o.push([t,r]),R(this,Pl,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,r);return}o.length===3&&(R(this,Cs,a=new Path2D),a.moveTo(...o[0])),I(this,te,aN).call(this,a,...o.at(-3),...o.at(-2),t,r)},iN=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);h(this,Cs).lineTo(...t)},sN=function(t,r){R(this,Ro,null),t=Math.min(Math.max(t,0),this.canvas.width),r=Math.min(Math.max(r,0),this.canvas.height),I(this,te,uA).call(this,t,r),I(this,te,iN).call(this);let i;if(this.currentPath.length!==1)i=I(this,te,lN).call(this);else{const c=[t,r];i=[[c,c.slice(),c.slice(),c]]}const s=h(this,Cs),o=this.currentPath;this.currentPath=[],R(this,Cs,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(i),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(I(this,te,Zm).call(this),I(this,te,ev).call(this)),I(this,te,wd).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},oN=function(){if(!h(this,Pl))return;R(this,Pl,!1);const t=Math.ceil(this.thickness*this.parentScale),r=this.currentPath.slice(-3),i=r.map(a=>a[0]),s=r.map(a=>a[1]);Math.min(...i)-t,Math.max(...i)+t,Math.min(...s)-t,Math.max(...s)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(h(this,Cs)),o.restore()},aN=function(t,r,i,s,o,a,l){const c=(r+s)/2,u=(i+o)/2,f=(s+a)/2,p=(o+l)/2;t.bezierCurveTo(c+2*(s-c)/3,u+2*(o-u)/3,f+2*(s-f)/3,p+2*(o-p)/3,f,p)},lN=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const r=[];let i,[s,o]=t[0];for(i=1;i<t.length-2;i++){const[g,m]=t[i],[v,w]=t[i+1],_=(g+v)/2,E=(m+w)/2,S=[s+2*(g-s)/3,o+2*(m-o)/3],P=[_+2*(g-_)/3,E+2*(m-E)/3];r.push([[s,o],S,P,[_,E]]),[s,o]=[_,E]}const[a,l]=t[i],[c,u]=t[i+1],f=[s+2*(a-s)/3,o+2*(l-o)/3],p=[c+2*(a-c)/3,u+2*(l-u)/3];return r.push([[s,o],f,p,[c,u]]),r},ka=function(){if(this.isEmpty()){I(this,te,tv).call(this);return}I(this,te,cA).call(this);const{canvas:t,ctx:r}=this;r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),I(this,te,tv).call(this);for(const i of this.bezierPath2D)r.stroke(i)},hA=function(t){this.canvas.removeEventListener("pointerleave",h(this,Kp)),this.canvas.removeEventListener("pointermove",h(this,qp)),this.canvas.removeEventListener("pointerup",h(this,Xp)),this.canvas.addEventListener("pointerdown",h(this,Rl),{signal:this._uiManager._signal}),h(this,Ri)&&clearTimeout(h(this,Ri)),R(this,Ri,setTimeout(()=>{R(this,Ri,null),this.canvas.removeEventListener("contextmenu",Xn)},10)),I(this,te,sN).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Zm=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ev=function(){R(this,xs,new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&this.setDimensions(r.width,r.height)})),h(this,xs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=h(this,xs))==null||t.disconnect(),R(this,xs,null)},{once:!0})},Sc=function(){if(!h(this,Il))return;const[t,r]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*r),I(this,te,tv).call(this)},dA=function(t,r){const i=I(this,te,nv).call(this),s=(t-i)/h(this,xl),o=(r-i)/h(this,Cl);this.scaleFactor=Math.min(s,o)},tv=function(){const t=I(this,te,nv).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ys=new WeakSet,cN=function(t){const r=new Path2D;for(let i=0,s=t.length;i<s;i++){const[o,a,l,c]=t[i];i===0&&r.moveTo(...o),r.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}return r},fA=function(t,r,i){const[s,o,a,l]=r;switch(i){case 0:for(let c=0,u=t.length;c<u;c+=2)t[c]+=s,t[c+1]=l-t[c+1];break;case 90:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=t[c+1]+s,t[c+1]=f+o}break;case 180:for(let c=0,u=t.length;c<u;c+=2)t[c]=a-t[c],t[c+1]+=o;break;case 270:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=a-t[c+1],t[c+1]=l-f}break;default:throw new Error("Invalid rotation")}return t},uN=function(t,r,i){const[s,o,a,l]=r;switch(i){case 0:for(let c=0,u=t.length;c<u;c+=2)t[c]-=s,t[c+1]=l-t[c+1];break;case 90:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=t[c+1]-o,t[c+1]=f-s}break;case 180:for(let c=0,u=t.length;c<u;c+=2)t[c]=a-t[c],t[c+1]-=o;break;case 270:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=l-t[c+1],t[c+1]=a-f}break;default:throw new Error("Invalid rotation")}return t},hN=function(t,r,i,s){var u,f;const o=[],a=this.thickness/2,l=t*r+a,c=t*i+a;for(const p of this.paths){const g=[],m=[];for(let v=0,w=p.length;v<w;v++){const[_,E,S,P]=p[v];if(_[0]===P[0]&&_[1]===P[1]&&w===1){const D=t*_[0]+l,z=t*_[1]+c;g.push(D,z),m.push(D,z);break}const O=t*_[0]+l,j=t*_[1]+c,C=t*E[0]+l,T=t*E[1]+c,x=t*S[0]+l,L=t*S[1]+c,F=t*P[0]+l,V=t*P[1]+c;v===0&&(g.push(O,j),m.push(O,j)),g.push(C,T,x,L,F,V),m.push(C,T),v===w-1&&m.push(F,V)}o.push({bezier:I(u=st,Ys,fA).call(u,g,s,this.rotation),points:I(f=st,Ys,fA).call(f,m,s,this.rotation)})}return o},pA=function(){let t=1/0,r=-1/0,i=1/0,s=-1/0;for(const o of this.paths)for(const[a,l,c,u]of o){const f=ae.bezierBoundingBox(...a,...l,...c,...u);t=Math.min(t,f[0]),i=Math.min(i,f[1]),r=Math.max(r,f[2]),s=Math.max(s,f[3])}return[t,i,r,s]},nv=function(){return h(this,xr)?Math.ceil(this.thickness*this.parentScale):0},wd=function(t=!1){if(this.isEmpty())return;if(!h(this,xr)){I(this,te,ka).call(this);return}const r=I(this,te,pA).call(this),i=I(this,te,nv).call(this);R(this,xl,Math.max(Be.MIN_SIZE,r[2]-r[0])),R(this,Cl,Math.max(Be.MIN_SIZE,r[3]-r[1]));const s=Math.ceil(i+h(this,xl)*this.scaleFactor),o=Math.ceil(i+h(this,Cl)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=s/a,this.height=o/l,this.setAspectRatio(s,o);const c=this.translationX,u=this.translationY;this.translationX=-r[0],this.translationY=-r[1],I(this,te,Sc).call(this),I(this,te,ka).call(this),R(this,kl,s),R(this,Ml,o),this.setDims(s,o);const f=t?i/this.scaleFactor/2:0;this.translate(c-this.translationX-f,u-this.translationY-f)},M(st,Ys),ve(st,"_defaultColor",null),ve(st,"_defaultOpacity",1),ve(st,"_defaultThickness",1),ve(st,"_type","ink"),ve(st,"_editorType",xe.INK);let lA=st;var en,tn,Po,Rs,Io,Ku,Pi,Ps,Ii,ni,Yp,Oe,Ed,Ad,rv,mA,dN,fN,vA,iv,pN;const zd=class zd extends Be{constructor(t){super({...t,name:"stampEditor"});M(this,Oe);M(this,en,null);M(this,tn,null);M(this,Po,null);M(this,Rs,null);M(this,Io,null);M(this,Ku,"");M(this,Pi,null);M(this,Ps,null);M(this,Ii,null);M(this,ni,!1);M(this,Yp,!1);R(this,Rs,t.bitmapUrl),R(this,Io,t.bitmapFile)}static initialize(t,r){Be.initialize(t,r)}static get supportedTypes(){return Me(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(r=>`image/${r}`))}static get supportedTypesStr(){return Me(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,r){r.pasteEditor(xe.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,r;h(this,tn)&&(R(this,en,null),this._uiManager.imageManager.deleteId(h(this,tn)),(t=h(this,Pi))==null||t.remove(),R(this,Pi,null),(r=h(this,Ps))==null||r.disconnect(),R(this,Ps,null),h(this,Ii)&&(clearTimeout(h(this,Ii)),R(this,Ii,null))),super.remove()}rebuild(){if(!this.parent){h(this,tn)&&I(this,Oe,rv).call(this);return}super.rebuild(),this.div!==null&&(h(this,tn)&&h(this,Pi)===null&&I(this,Oe,rv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(h(this,Po)||h(this,en)||h(this,Rs)||h(this,Io)||h(this,tn))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;if(this.width&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),h(this,en)?I(this,Oe,mA).call(this):I(this,Oe,rv).call(this),this.width){const[i,s]=this.parentDimensions;this.setAt(t*i,r*s,this.width*i,this.height*s)}return this.div}getImageForAltText(){return h(this,Pi)}static deserialize(t,r,i){if(t instanceof kL)return null;const s=super.deserialize(t,r,i),{rect:o,bitmapUrl:a,bitmapId:l,isSvg:c,accessibilityData:u}=t;l&&i.imageManager.isValidId(l)?R(s,tn,l):R(s,Rs,a),R(s,ni,c);const[f,p]=s.pageDimensions;return s.width=(o[2]-o[0])/f,s.height=(o[3]-o[1])/p,u&&(s.altTextData=u),s}serialize(t=!1,r=null){if(this.isEmpty())return null;const i={annotationType:xe.STAMP,bitmapId:h(this,tn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(this,ni),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=I(this,Oe,iv).call(this,!0),i.accessibilityData=this.altTextData,i;const{decorative:s,altText:o}=this.altTextData;if(!s&&o&&(i.accessibilityData={type:"Figure",alt:o}),r===null)return i;r.stamps||(r.stamps=new Map);const a=h(this,ni)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(h(this,tn)))r.stamps.set(h(this,tn),{area:a,serialized:i}),i.bitmap=I(this,Oe,iv).call(this,!1);else if(h(this,ni)){const l=r.stamps.get(h(this,tn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=I(this,Oe,iv).call(this,!1))}return i}};en=new WeakMap,tn=new WeakMap,Po=new WeakMap,Rs=new WeakMap,Io=new WeakMap,Ku=new WeakMap,Pi=new WeakMap,Ps=new WeakMap,Ii=new WeakMap,ni=new WeakMap,Yp=new WeakMap,Oe=new WeakSet,Ed=function(t,r=!1){if(!t){this.remove();return}R(this,en,t.bitmap),r||(R(this,tn,t.id),R(this,ni,t.isSvg)),t.file&&R(this,Ku,t.file.name),I(this,Oe,mA).call(this)},Ad=function(){R(this,Po,null),this._uiManager.enableWaiting(!1),h(this,Pi)&&this.div.focus()},rv=function(){if(h(this,tn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,tn)).then(i=>I(this,Oe,Ed).call(this,i,!0)).finally(()=>I(this,Oe,Ad).call(this));return}if(h(this,Rs)){const i=h(this,Rs);R(this,Rs,null),this._uiManager.enableWaiting(!0),R(this,Po,this._uiManager.imageManager.getFromUrl(i).then(s=>I(this,Oe,Ed).call(this,s)).finally(()=>I(this,Oe,Ad).call(this)));return}if(h(this,Io)){const i=h(this,Io);R(this,Io,null),this._uiManager.enableWaiting(!0),R(this,Po,this._uiManager.imageManager.getFromFile(i).then(s=>I(this,Oe,Ed).call(this,s)).finally(()=>I(this,Oe,Ad).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=zd.supportedTypesStr;const r=this._uiManager._signal;R(this,Po,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);I(this,Oe,Ed).call(this,s)}i()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>I(this,Oe,Ad).call(this))),t.click()},mA=function(){const{div:t}=this;let{width:r,height:i}=h(this,en);const[s,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*s,i=this.height*o;else if(r>a*s||i>a*o){const f=Math.min(a*s/r,a*o/i);r*=f,i*=f}const[l,c]=this.parentDimensions;this.setDims(r*l/s,i*c/o),this._uiManager.enableWaiting(!1);const u=R(this,Pi,document.createElement("canvas"));t.append(u),t.hidden=!1,I(this,Oe,vA).call(this,r,i),I(this,Oe,pN).call(this),h(this,Yp)||(this.parent.addUndoableEditor(this),R(this,Yp,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,Ku)&&u.setAttribute("aria-label",h(this,Ku))},dN=function(t,r){var a;const[i,s]=this.parentDimensions;this.width=t/i,this.height=r/s,this.setDims(t,r),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,h(this,Ii)!==null&&clearTimeout(h(this,Ii)),R(this,Ii,setTimeout(()=>{R(this,Ii,null),I(this,Oe,vA).call(this,t,r)},200))},fN=function(t,r){const{width:i,height:s}=h(this,en);let o=i,a=s,l=h(this,en);for(;o>2*t||a>2*r;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=f.transferToImageBitmap()}return l},vA=function(t,r){t=Math.ceil(t),r=Math.ceil(r);const i=h(this,Pi);if(!i||i.width===t&&i.height===r)return;i.width=t,i.height=r;const s=h(this,ni)?h(this,en):I(this,Oe,fN).call(this,t,r);if(this._uiManager.hasMLManager&&!this.hasAltText()){const l=new OffscreenCanvas(t,r).getContext("2d");l.drawImage(s,0,0,s.width,s.height,0,0,t,r),this._uiManager.mlGuess({service:"image-to-text",request:{data:l.getImageData(0,0,t,r).data,width:t,height:r,channels:4}}).then(c=>{const u=(c==null?void 0:c.output)||"";this.parent&&u&&!this.hasAltText()&&(this.altTextData={altText:u,decorative:!1})})}const o=i.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(s,0,0,s.width,s.height,0,0,t,r)},iv=function(t){if(t){if(h(this,ni)){const s=this._uiManager.imageManager.getSvgUrl(h(this,tn));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=h(this,en),r.getContext("2d").drawImage(h(this,en),0,0),r.toDataURL()}if(h(this,ni)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*ra.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*ra.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(h(this,en),0,0,h(this,en).width,h(this,en).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(h(this,en))},pN=function(){this._uiManager._signal&&(R(this,Ps,new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&I(this,Oe,dN).call(this,r.width,r.height)})),h(this,Ps).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=h(this,Ps))==null||t.disconnect(),R(this,Ps,null)},{once:!0}))},ve(zd,"_type","stamp"),ve(zd,"_editorType",xe.STAMP);let gA=zd;var Ll,Xu,ki,Nl,Is,ks,Ms,hr,ko,Yu,Qu,xn,le,Mo,on,gN,_A,wA,EA,sv;const Ur=class Ur{constructor({uiManager:e,pageIndex:t,div:r,accessibilityManager:i,annotationLayer:s,drawLayer:o,textLayer:a,viewport:l,l10n:c}){M(this,on);M(this,Ll);M(this,Xu,!1);M(this,ki,null);M(this,Nl,null);M(this,Is,null);M(this,ks,null);M(this,Ms,null);M(this,hr,new Map);M(this,ko,!1);M(this,Yu,!1);M(this,Qu,!1);M(this,xn,null);M(this,le);const u=[...h(Ur,Mo).values()];if(!Ur._initialized){Ur._initialized=!0;for(const f of u)f.initialize(c,e)}e.registerEditorTypes(u),R(this,le,e),this.pageIndex=t,this.div=r,R(this,Ll,i),R(this,ki,s),this.viewport=l,R(this,xn,a),this.drawLayer=o,h(this,le).addLayer(this)}get isEmpty(){return h(this,hr).size===0}get isInvisible(){return this.isEmpty&&h(this,le).getMode()===xe.NONE}updateToolbar(e){h(this,le).updateToolbar(e)}updateMode(e=h(this,le).getMode()){switch(I(this,on,sv).call(this),e){case xe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xe.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of h(Ur,Mo).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=h(this,xn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(h(this,le).getMode()!==xe.INK)return;if(!e){for(const r of h(this,hr).values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){h(this,le).setEditingState(e)}addCommands(e){h(this,le).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=h(this,ki))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of h(this,hr).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(h(this,le).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!h(this,ki))return;const t=h(this,ki).getEditableAnnotations();for(const r of t){if(r.hide(),h(this,le).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){var i;R(this,Qu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of h(this,hr).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(i=this.getEditableAnnotation(s.annotationElementId))==null||i.show(),s.remove()}if(h(this,ki)){const s=h(this,ki).getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(h(this,le).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(h(this,le).addChangedExistingAnnotation(l),l.renderAnnotationElement(o),l.show(!1)),o.show()}}I(this,on,sv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of h(Ur,Mo).values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),R(this,Qu,!1)}getEditableAnnotation(e){var t;return((t=h(this,ki))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){h(this,le).getActive()!==e&&h(this,le).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=h(this,xn))!=null&&e.div&&!h(this,ks)&&(R(this,ks,I(this,on,gN).bind(this)),h(this,xn).div.addEventListener("pointerdown",h(this,ks),{signal:h(this,le)._signal}),h(this,xn).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=h(this,xn))!=null&&e.div&&h(this,ks)&&(h(this,xn).div.removeEventListener("pointerdown",h(this,ks)),R(this,ks,null),h(this,xn).div.classList.remove("highlighting"))}enableClick(){if(h(this,Is))return;const e=h(this,le)._signal;R(this,Is,this.pointerdown.bind(this)),R(this,Nl,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",h(this,Is),{signal:e}),this.div.addEventListener("pointerup",h(this,Nl),{signal:e})}disableClick(){h(this,Is)&&(this.div.removeEventListener("pointerdown",h(this,Is)),this.div.removeEventListener("pointerup",h(this,Nl)),R(this,Is,null),R(this,Nl,null))}attach(e){h(this,hr).set(e.id,e);const{annotationElementId:t}=e;t&&h(this,le).isDeletedAnnotationElement(t)&&h(this,le).removeDeletedAnnotationElement(e)}detach(e){var t;h(this,hr).delete(e.id),(t=h(this,Ll))==null||t.removePointerInTextLayer(e.contentDiv),!h(this,Qu)&&e.annotationElementId&&h(this,le).addDeletedAnnotationElement(e)}remove(e){this.detach(e),h(this,le).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,h(this,Yu)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(h(this,le).addDeletedAnnotationElement(e.annotationElementId),Be.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),h(this,le).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),h(this,le).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!h(this,Ms)&&(e._focusEventsAllowed=!1,R(this,Ms,setTimeout(()=>{R(this,Ms,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:h(this,le)._signal}),t.focus())},0))),e._structTreeParentId=(r=h(this,Ll))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return h(this,le).getId()}get _signal(){return h(this,le)._signal}canCreateNewEmptyEditor(){var e;return(e=h(this,on,_A))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){h(this,le).updateToolbar(e),h(this,le).updateMode(e);const{offsetX:r,offsetY:i}=I(this,on,EA).call(this),s=this.getNextId(),o=I(this,on,wA).call(this,{parent:this,id:s,x:r,y:i,uiManager:h(this,le),isCentered:!0,...t});o&&this.add(o)}deserialize(e){var t;return((t=h(Ur,Mo).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,h(this,le)))||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=I(this,on,wA).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:h(this,le),isCentered:t,...r});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(I(this,on,EA).call(this),!0)}setSelected(e){h(this,le).setSelected(e)}toggleSelected(e){h(this,le).toggleSelected(e)}isSelected(e){return h(this,le).isSelected(e)}unselect(e){h(this,le).unselect(e)}pointerup(e){const{isMac:t}=Hn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&h(this,ko)){if(R(this,ko,!1),!h(this,Xu)){R(this,Xu,!0);return}if(h(this,le).getMode()===xe.STAMP){h(this,le).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(h(this,le).getMode()===xe.HIGHLIGHT&&this.enableTextSelection(),h(this,ko)){R(this,ko,!1);return}const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;R(this,ko,!0);const r=h(this,le).getActive();R(this,Xu,!r||r.isEmpty())}findNewParent(e,t,r){const i=h(this,le).findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}destroy(){var e,t;((e=h(this,le).getActive())==null?void 0:e.parent)===this&&(h(this,le).commitOrRemove(),h(this,le).setActiveEditor(null)),h(this,Ms)&&(clearTimeout(h(this,Ms)),R(this,Ms,null));for(const r of h(this,hr).values())(t=h(this,Ll))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,h(this,hr).clear(),h(this,le).removeLayer(this)}render({viewport:e}){this.viewport=e,ql(this.div,e);for(const t of h(this,le).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){h(this,le).commitOrRemove(),I(this,on,sv).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,ql(this.div,{rotation:r}),t!==r)for(const i of h(this,hr).values())i.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return h(this,le).viewParameters.realScale}};Ll=new WeakMap,Xu=new WeakMap,ki=new WeakMap,Nl=new WeakMap,Is=new WeakMap,ks=new WeakMap,Ms=new WeakMap,hr=new WeakMap,ko=new WeakMap,Yu=new WeakMap,Qu=new WeakMap,xn=new WeakMap,le=new WeakMap,Mo=new WeakMap,on=new WeakSet,gN=function(e){if(h(this,le).unselectAll(),e.target===h(this,xn).div){const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t)return;h(this,le).showAllEditors("highlight",!0,!0),h(this,xn).div.classList.add("free"),Yv.startHighlighting(this,h(this,le).direction==="ltr",e),h(this,xn).div.addEventListener("pointerup",()=>{h(this,xn).div.classList.remove("free")},{once:!0,signal:h(this,le)._signal}),e.preventDefault()}},_A=function(){return h(Ur,Mo).get(h(this,le).getMode())},wA=function(e){const t=h(this,on,_A);return t?new t.prototype.constructor(e):null},EA=function(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+i),c=(s+a)/2-e,u=(o+l)/2-t,[f,p]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:f,offsetY:p}},sv=function(){R(this,Yu,!0);for(const e of h(this,hr).values())e.isEmpty()&&e.remove();R(this,Yu,!1)},ve(Ur,"_initialized",!1),M(Ur,Mo,new Map([QE,lA,gA,Yv].map(e=>[e._editorType,e])));let yA=Ur;var Mi,Qp,Mt,Lo,Jp,bA,Zl,SA,mN;const Xt=class Xt{constructor({pageIndex:e}){M(this,Zl);M(this,Mi,null);M(this,Qp,0);M(this,Mt,new Map);M(this,Lo,new Map);this.pageIndex=e}setParent(e){if(!h(this,Mi)){R(this,Mi,e);return}if(h(this,Mi)!==e){if(h(this,Mt).size>0)for(const t of h(this,Mt).values())t.remove(),e.append(t);R(this,Mi,e)}}static get _svgFactory(){return Me(this,"_svgFactory",new wS)}highlight(e,t,r,i=!1){const s=tr(this,Qp)._++,o=I(this,Zl,SA).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const a=Xt._svgFactory.createElement("defs");o.append(a);const l=Xt._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),i&&h(this,Lo).set(s,l);const u=I(this,Zl,mN).call(this,a,c),f=Xt._svgFactory.createElement("use");return o.append(f),o.setAttribute("fill",t),o.setAttribute("fill-opacity",r),f.setAttribute("href",`#${c}`),h(this,Mt).set(s,o),{id:s,clipPathId:`url(#${u})`}}highlightOutline(e){const t=tr(this,Qp)._++,r=I(this,Zl,SA).call(this,e.box);r.classList.add("highlightOutline");const i=Xt._svgFactory.createElement("defs");r.append(i);const s=Xt._svgFactory.createElement("path");i.append(s);const o=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.free){r.classList.add("free");const u=Xt._svgFactory.createElement("mask");i.append(u),a=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const f=Xt._svgFactory.createElement("rect");u.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Xt._svgFactory.createElement("use");u.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const l=Xt._svgFactory.createElement("use");r.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return r.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),h(this,Mt).set(t,r),t}finalizeLine(e,t){const r=h(this,Lo).get(e);h(this,Lo).delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){h(this,Mt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),h(this,Lo).delete(e)}updatePath(e,t){h(this,Lo).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var r;I(r=Xt,Jp,bA).call(r,h(this,Mt).get(e),t)}show(e,t){h(this,Mt).get(e).classList.toggle("hidden",!t)}rotate(e,t){h(this,Mt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){h(this,Mt).get(e).setAttribute("fill",t)}changeOpacity(e,t){h(this,Mt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){h(this,Mt).get(e).classList.add(t)}removeClass(e,t){h(this,Mt).get(e).classList.remove(t)}remove(e){h(this,Mi)!==null&&(h(this,Mt).get(e).remove(),h(this,Mt).delete(e))}destroy(){R(this,Mi,null);for(const e of h(this,Mt).values())e.remove();h(this,Mt).clear()}};Mi=new WeakMap,Qp=new WeakMap,Mt=new WeakMap,Lo=new WeakMap,Jp=new WeakSet,bA=function(e,{x:t=0,y:r=0,width:i=1,height:s=1}={}){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*s}%`},Zl=new WeakSet,SA=function(e){var r;const t=Xt._svgFactory.create(1,1,!0);return h(this,Mi).append(t),t.setAttribute("aria-hidden",!0),I(r=Xt,Jp,bA).call(r,t,e),t},mN=function(e,t){const r=Xt._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=Xt._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i},M(Xt,Jp);let AA=Xt;var Ez=fe.AbortException,Az=fe.AnnotationEditorLayer,bz=fe.AnnotationEditorParamsType,Sz=fe.AnnotationEditorType,Tz=fe.AnnotationEditorUIManager,vN=fe.AnnotationLayer,yN=fe.AnnotationMode,Cz=fe.CMapCompressionType,xz=fe.ColorPicker,Rz=fe.DOMSVGFactory,Pz=fe.DrawLayer,Iz=fe.FeatureTest,RS=fe.GlobalWorkerOptions,kz=fe.ImageKind,Mz=fe.InvalidPDFException,Lz=fe.MissingPDFException,Nz=fe.OPS,Dz=fe.Outliner,Oz=fe.PDFDataRangeTransport,Fz=fe.PDFDateString,Vz=fe.PDFWorker,jz=fe.PasswordResponses,Bz=fe.PermissionFlag,Uz=fe.PixelsPerInch,$z=fe.RenderingCancelledException,_N=fe.TextLayer,zz=fe.UnexpectedResponseException,Hz=fe.Util,Wz=fe.VerbosityLevel,Gz=fe.XfaLayer,qz=fe.build,Kz=fe.createValidAbsoluteUrl,Xz=fe.fetchData,wN=fe.getDocument,Yz=fe.getFilenameFromUrl,Qz=fe.getPdfFilenameFromUrl,Jz=fe.getXfaPageViewport,Zz=fe.isDataScheme,eH=fe.isPdfFile,tH=fe.noContextMenu,nH=fe.normalizeUnicode,rH=fe.renderTextLayer,iH=fe.setLayerDimensions,sH=fe.shadow,oH=fe.updateTextLayer,aH=fe.version;const lH=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Ez,AnnotationEditorLayer:Az,AnnotationEditorParamsType:bz,AnnotationEditorType:Sz,AnnotationEditorUIManager:Tz,AnnotationLayer:vN,AnnotationMode:yN,CMapCompressionType:Cz,ColorPicker:xz,DOMSVGFactory:Rz,DrawLayer:Pz,FeatureTest:Iz,GlobalWorkerOptions:RS,ImageKind:kz,InvalidPDFException:Mz,MissingPDFException:Lz,OPS:Nz,Outliner:Dz,PDFDataRangeTransport:Oz,PDFDateString:Fz,PDFWorker:Vz,PasswordResponses:jz,PermissionFlag:Bz,PixelsPerInch:Uz,RenderingCancelledException:$z,TextLayer:_N,UnexpectedResponseException:zz,Util:Hz,VerbosityLevel:Wz,XfaLayer:Gz,build:qz,createValidAbsoluteUrl:Kz,fetchData:Xz,getDocument:wN,getFilenameFromUrl:Yz,getPdfFilenameFromUrl:Qz,getXfaPageViewport:Jz,isDataScheme:Zz,isPdfFile:eH,noContextMenu:tH,normalizeUnicode:nH,renderTextLayer:rH,setLayerDimensions:iH,shadow:sH,updateTextLayer:oH,version:aH},Symbol.toStringTag,{value:"Module"}));var Ut=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},cH=["onCopy","onCut","onPaste"],uH=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],hH=["onFocus","onBlur"],dH=["onInput","onInvalid","onReset","onSubmit"],fH=["onLoad","onError"],pH=["onKeyDown","onKeyPress","onKeyUp"],gH=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mH=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],vH=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],yH=["onSelect"],_H=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],wH=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],EH=["onScroll"],AH=["onWheel"],bH=["onAnimationStart","onAnimationEnd","onAnimationIteration"],SH=["onTransitionEnd"],TH=["onToggle"],CH=["onChange"],xH=Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut([],cH,!0),uH,!0),hH,!0),dH,!0),fH,!0),pH,!0),gH,!0),mH,!0),vH,!0),yH,!0),_H,!0),wH,!0),EH,!0),AH,!0),bH,!0),SH,!0),CH,!0),TH,!0);function EN(n,e){var t={};return xH.forEach(function(r){var i=n[r];i&&(e?t[r]=function(s){return i(s,e(r))}:t[r]=i)}),t}function dg(n){var e=!1,t=new Promise(function(r,i){n.then(function(s){return!e&&r(s)}).catch(function(s){return!e&&i(s)})});return{promise:t,cancel:function(){e=!0}}}function AN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=AN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function p_(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=AN(n))&&(r&&(r+=" "),r+=e);return r}var RH="Invariant failed";function Ke(n,e){if(!n)throw new Error(RH)}var PH=function(){},IH=PH;const En=Zp(IH);var a1=Object.prototype.hasOwnProperty;function l1(n,e,t){for(t of n.keys())if(Qc(t,e))return t}function Qc(n,e){var t,r,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Qc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(i=r,i&&typeof i=="object"&&(i=l1(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(i=r[0],i&&typeof i=="object"&&(i=l1(e,i),!i)||!Qc(r[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(a1.call(n,t)&&++r&&!a1.call(e,t)||!(t in e)||!Qc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}const bN=A.createContext(null);function Jc({children:n,type:e}){return k.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const kH="noopener noreferrer nofollow";class MH{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ke(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ke(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Ke(this.pdfDocument),Ke(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ke(Array.isArray(t));const r=t[0];new Promise(i=>{Ke(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(s=>{i(s)}).catch(()=>{Ke(!1)}):typeof r=="number"?i(r):Ke(!1)}).then(i=>{const s=i+1;Ke(this.pdfViewer),Ke(s>=1&&s<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:s})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Ke(this.pdfViewer),Ke(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||kH,e.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const c1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},g_=typeof window<"u",SN=g_&&window.location.protocol==="file:";function LH(n){return typeof n<"u"}function Ta(n){return LH(n)&&n!==null}function NH(n){return typeof n=="string"}function DH(n){return n instanceof ArrayBuffer}function OH(n){return Ke(g_),n instanceof Blob}function TA(n){return NH(n)&&/^data:/.test(n)}function u1(n){Ke(TA(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function FH(){return g_&&window.devicePixelRatio||1}const TN="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function h1(){En(!SN,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${TN}`)}function VH(){En(!SN,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${TN}`)}function Yl(n){n!=null&&n.cancel&&n.cancel()}function CA(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function jH(n){return n.name==="RenderingCancelledException"}function BH(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:s}=i.target;if(!s)return t(new Error("Error while reading a file."));switch(s.code){case s.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case s.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case s.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}function UH(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function ah(){return A.useReducer(UH,{value:void 0,error:void 0})}var $H=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},d1=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const{PDFDataRangeTransport:zH}=lH,HH=(n,e)=>{switch(e){case c1.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case c1.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function f1(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const WH=A.forwardRef(function(e,t){var{children:r,className:i,error:s="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:u,loading:f="Loading PDF…",noData:p="No PDF file specified.",onItemClick:g,onLoadError:m,onLoadProgress:v,onLoadSuccess:w,onPassword:_=HH,onSourceError:E,onSourceSuccess:S,options:P,renderMode:O,rotate:j}=e,C=d1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[T,x]=ah(),{value:L,error:F}=T,[V,D]=ah(),{value:z,error:$}=V,W=A.useRef(new MH),U=A.useRef([]),B=A.useRef(void 0),H=A.useRef(void 0);l&&l!==B.current&&f1(l)&&(En(!Qc(l,B.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),B.current=l),P&&P!==H.current&&(En(!Qc(P,H.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),H.current=P);const X=A.useRef({scrollPageIntoView:Se=>{const{dest:We,pageNumber:ht,pageIndex:it=ht-1}=Se;if(g){g({dest:We,pageIndex:it,pageNumber:ht});return}const di=U.current[it];if(di){di.scrollIntoView();return}En(!1,`An internal link leading to page ${ht} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});A.useImperativeHandle(t,()=>({linkService:W,pages:U,viewer:X}),[]);function ne(){S&&S()}function J(){F&&(En(!1,F.toString()),E&&E(F))}function re(){x({type:"RESET"})}A.useEffect(re,[l,x]);const ge=A.useCallback(()=>$H(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return TA(l)?{data:u1(l)}:(h1(),{url:l});if(l instanceof zH)return{range:l};if(DH(l))return{data:l};if(g_&&OH(l))return{data:yield BH(l)};if(Ke(typeof l=="object"),Ke(f1(l)),"url"in l&&typeof l.url=="string"){if(TA(l.url)){const{url:Se}=l,We=d1(l,["url"]),ht=u1(Se);return Object.assign({data:ht},We)}h1()}return l}),[l]);A.useEffect(()=>{const Se=dg(ge());return Se.promise.then(We=>{x({type:"RESOLVE",value:We})}).catch(We=>{x({type:"REJECT",error:We})}),()=>{Yl(Se)}},[ge,x]),A.useEffect(()=>{if(!(typeof L>"u")){if(L===!1){J();return}ne()}},[L]);function Fe(){z&&(w&&w(z),U.current=new Array(z.numPages),W.current.setDocument(z))}function be(){$&&(En(!1,$.toString()),m&&m($))}A.useEffect(function(){D({type:"RESET"})},[D,L]),A.useEffect(function(){if(!L)return;const We=P?Object.assign(Object.assign({},L),P):L,ht=wN(We);v&&(ht.onProgress=v),_&&(ht.onPassword=_);const it=ht,di=it.promise.then(Xi=>{D({type:"RESOLVE",value:Xi})}).catch(Xi=>{it.destroyed||D({type:"REJECT",error:Xi})});return()=>{di.finally(()=>it.destroy())}},[P,D,L]),A.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){be();return}Fe()}},[z]),A.useEffect(function(){W.current.setViewer(X.current),W.current.setExternalLinkRel(o),W.current.setExternalLinkTarget(a)},[o,a]);const ce=A.useCallback((Se,We)=>{U.current[Se]=We},[]),Je=A.useCallback(Se=>{delete U.current[Se]},[]),Ze=A.useMemo(()=>({imageResourcesPath:u,linkService:W.current,onItemClick:g,pdf:z,registerPage:ce,renderMode:O,rotate:j,unregisterPage:Je}),[u,g,z,ce,O,j,Je]),ke=A.useMemo(()=>EN(C,()=>z),[C,z]);function Zn(){return k.jsx(bN.Provider,{value:Ze,children:r})}function Ar(){return l?z==null?k.jsx(Jc,{type:"loading",children:typeof f=="function"?f():f}):z===!1?k.jsx(Jc,{type:"error",children:typeof s=="function"?s():s}):Zn():k.jsx(Jc,{type:"no-data",children:typeof p=="function"?p():p})}return k.jsx("div",Object.assign({className:p_("react-pdf__Document",i),ref:c,style:{"--scale-factor":"1"}},ke,{children:Ar()}))});function CN(){return A.useContext(bN)}function xN(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(s){t.forEach(function(o){typeof o=="function"?o(s):o&&(o.current=s)})}}const RN=A.createContext(null),PN={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},GH=/^H(\d+)$/;function qH(n){return n in PN}function m_(n){return"children"in n}function IN(n){return m_(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function KH(n){const e={};if(m_(n)){const{role:t}=n,r=t.match(GH);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(qH(t)){const i=PN[t];i&&(e.role=i)}}return e}function kN(n){const e={};if(m_(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),IN(n)){const[t]=n.children;if(t){const r=kN(t);return Object.assign(Object.assign({},e),r)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function XH(n){return n?Object.assign(Object.assign({},KH(n)),kN(n)):null}function MN({className:n,node:e}){const t=A.useMemo(()=>XH(e),[e]),r=A.useMemo(()=>!m_(e)||IN(e)?null:e.children.map((i,s)=>k.jsx(MN,{node:i},s)),[e]);return k.jsx("span",Object.assign({className:n},t,{children:r}))}function v_(){return A.useContext(RN)}function YH(){const n=v_();Ke(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,i]=ah(),{value:s,error:o}=r,{customTextRenderer:a,page:l}=n;function c(){s&&t&&t(s)}function u(){o&&(En(!1,o.toString()),e&&e(o))}return A.useEffect(function(){i({type:"RESET"})},[i,l]),A.useEffect(function(){if(a||!l)return;const p=dg(l.getStructTree()),g=p;return p.promise.then(m=>{i({type:"RESOLVE",value:m})}).catch(m=>{i({type:"REJECT",error:m})}),()=>Yl(g)},[a,l,i]),A.useEffect(()=>{if(s!==void 0){if(s===!1){u();return}c()}},[s]),s?k.jsx(MN,{className:"react-pdf__Page__structTree structTree",node:s}):null}const p1=yN;function QH(n){const e=v_();Ke(e);const t=Object.assign(Object.assign({},e),n),{_className:r,canvasBackground:i,devicePixelRatio:s=FH(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:c,renderTextLayer:u,rotate:f,scale:p}=t,{canvasRef:g}=n;Ke(l);const m=A.useRef(null);function v(){l&&a&&a(CA(l,p))}function w(P){jH(P)||(En(!1,P.toString()),o&&o(P))}const _=A.useMemo(()=>l.getViewport({scale:p*s,rotation:f}),[s,l,f,p]),E=A.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);A.useEffect(function(){if(!l)return;l.cleanup();const{current:O}=m;if(!O)return;O.width=_.width,O.height=_.height,O.style.width=`${Math.floor(E.width)}px`,O.style.height=`${Math.floor(E.height)}px`,O.style.visibility="hidden";const j={annotationMode:c?p1.ENABLE_FORMS:p1.ENABLE,canvasContext:O.getContext("2d",{alpha:!1}),viewport:_};i&&(j.background=i);const C=l.render(j),T=C;return C.promise.then(()=>{O.style.visibility="",v()}).catch(w),()=>Yl(T)},[i,l,c,_,E]);const S=A.useCallback(()=>{const{current:P}=m;P&&(P.width=0,P.height=0)},[]);return A.useEffect(()=>S,[S]),k.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:xN(g,m),style:{display:"block",userSelect:"none"},children:u?k.jsx(YH,{}):null})}function JH(n){return"str"in n}function ZH(){const n=v_();Ke(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:i,onRenderTextLayerSuccess:s,page:o,pageIndex:a,pageNumber:l,rotate:c,scale:u}=n;Ke(o);const[f,p]=ah(),{value:g,error:m}=f,v=A.useRef(null),w=A.useRef(void 0);En(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){g&&r&&r(g)}function E(){m&&(En(!1,m.toString()),t&&t(m))}A.useEffect(function(){p({type:"RESET"})},[o,p]),A.useEffect(function(){if(!o)return;const x=dg(o.getTextContent()),L=x;return x.promise.then(F=>{p({type:"RESOLVE",value:F})}).catch(F=>{p({type:"REJECT",error:F})}),()=>Yl(L)},[o,p]),A.useEffect(()=>{if(g!==void 0){if(g===!1){E();return}_()}},[g]);const S=A.useCallback(()=>{s&&s()},[s]),P=A.useCallback(T=>{En(!1,T.toString()),i&&i(T)},[i]);function O(){const T=w.current;T&&T.classList.add("active")}function j(){const T=w.current;T&&T.classList.remove("active")}const C=A.useMemo(()=>o.getViewport({scale:u,rotation:c}),[o,c,u]);return A.useLayoutEffect(function(){if(!o||!g)return;const{current:x}=v;if(!x)return;x.innerHTML="";const L=o.streamTextContent({includeMarkedContent:!0}),F={container:x,textContentSource:L,viewport:C},V=new _N(F),D=V;return V.render().then(()=>{const z=document.createElement("div");z.className="endOfContent",x.append(z),w.current=z;const $=x.querySelectorAll('[role="presentation"]');if(e){let W=0;g.items.forEach((U,B)=>{if(!JH(U))return;const H=$[W];if(!H)return;const X=e(Object.assign({pageIndex:a,pageNumber:l,itemIndex:B},U));H.innerHTML=X,W+=U.str&&U.hasEOL?2:1})}S()}).catch(P),()=>Yl(D)},[e,P,S,o,a,l,g,C]),k.jsx("div",{className:p_("react-pdf__Page__textContent","textLayer"),onMouseUp:j,onMouseDown:O,ref:v})}function e5(){const n=CN(),e=v_();Ke(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:r,linkService:i,onGetAnnotationsError:s,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:c,pdf:u,renderForms:f,rotate:p,scale:g=1}=t;Ke(u),Ke(c),Ke(i);const[m,v]=ah(),{value:w,error:_}=m,E=A.useRef(null);En(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){w&&o&&o(w)}function P(){_&&(En(!1,_.toString()),s&&s(_))}A.useEffect(function(){v({type:"RESET"})},[v,c]),A.useEffect(function(){if(!c)return;const x=dg(c.getAnnotations()),L=x;return x.promise.then(F=>{v({type:"RESOLVE",value:F})}).catch(F=>{v({type:"REJECT",error:F})}),()=>{Yl(L)}},[v,c]),A.useEffect(()=>{if(w!==void 0){if(w===!1){P();return}S()}},[w]);function O(){l&&l()}function j(T){En(!1,`${T}`),a&&a(T)}const C=A.useMemo(()=>c.getViewport({scale:g,rotation:p}),[c,p,g]);return A.useEffect(function(){if(!u||!c||!i||!w)return;const{current:x}=E;if(!x)return;const L=C.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:x,l10n:null,page:c,viewport:L},V={annotations:w,annotationStorage:u.annotationStorage,div:x,imageResourcesPath:r,linkService:i,page:c,renderForms:f,viewport:L};x.innerHTML="";try{new vN(F).render(V),O()}catch(D){j(D)}return()=>{}},[w,r,i,c,u,f,C]),k.jsx("div",{className:p_("react-pdf__Page__annotations","annotationLayer"),ref:E})}var t5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const g1=1;function n5(n){const e=CN(),t=Object.assign(Object.assign({},e),n),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:s,canvasRef:o,children:a,className:l,customRenderer:c,customTextRenderer:u,devicePixelRatio:f,error:p="Failed to load the page.",height:g,inputRef:m,loading:v="Loading page…",noData:w="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:E,onGetStructTreeError:S,onGetStructTreeSuccess:P,onGetTextError:O,onGetTextSuccess:j,onLoadError:C,onLoadSuccess:T,onRenderAnnotationLayerError:x,onRenderAnnotationLayerSuccess:L,onRenderError:F,onRenderSuccess:V,onRenderTextLayerError:D,onRenderTextLayerSuccess:z,pageIndex:$,pageNumber:W,pdf:U,registerPage:B,renderAnnotationLayer:H=!0,renderForms:X=!1,renderMode:ne="canvas",renderTextLayer:J=!0,rotate:re,scale:ge=g1,unregisterPage:Fe,width:be}=t,ce=t5(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Je,Ze]=ah(),{value:ke,error:Zn}=Je,Ar=A.useRef(null);Ke(U);const Se=Ta(W)?W-1:$??null,We=W??(Ta($)?$+1:null),ht=re??(ke?ke.rotate:null),it=A.useMemo(()=>{if(!ke)return null;let dt=1;const Qi=ge??g1;if(be||g){const ya=ke.getViewport({scale:1,rotation:ht});be?dt=be/ya.width:g&&(dt=g/ya.height)}return Qi*dt},[g,ke,ht,ge,be]);A.useEffect(function(){return()=>{Ta(Se)&&i&&Fe&&Fe(Se)}},[i,U,Se,Fe]);function di(){if(T){if(!ke||!it)return;T(CA(ke,it))}if(i&&B){if(!Ta(Se)||!Ar.current)return;B(Se,Ar.current)}}function Xi(){Zn&&(En(!1,Zn.toString()),C&&C(Zn))}A.useEffect(function(){Ze({type:"RESET"})},[Ze,U,Se]),A.useEffect(function(){if(!U||!We)return;const Qi=dg(U.getPage(We)),ya=Qi;return Qi.promise.then(cc=>{Ze({type:"RESOLVE",value:cc})}).catch(cc=>{Ze({type:"REJECT",error:cc})}),()=>Yl(ya)},[Ze,U,We]),A.useEffect(()=>{if(ke!==void 0){if(ke===!1){Xi();return}di()}},[ke,it]);const Yi=A.useMemo(()=>ke&&Ta(Se)&&We&&Ta(ht)&&Ta(it)?{_className:r,canvasBackground:s,customTextRenderer:u,devicePixelRatio:f,onGetAnnotationsError:_,onGetAnnotationsSuccess:E,onGetStructTreeError:S,onGetStructTreeSuccess:P,onGetTextError:O,onGetTextSuccess:j,onRenderAnnotationLayerError:x,onRenderAnnotationLayerSuccess:L,onRenderError:F,onRenderSuccess:V,onRenderTextLayerError:D,onRenderTextLayerSuccess:z,page:ke,pageIndex:Se,pageNumber:We,renderForms:X,renderTextLayer:J,rotate:ht,scale:it}:null,[r,s,u,f,_,E,S,P,O,j,x,L,F,V,D,z,ke,Se,We,X,J,ht,it]),Rh=A.useMemo(()=>EN(ce,()=>ke&&(it?CA(ke,it):void 0)),[ce,ke,it]),va=`${Se}@${it}/${ht}`;function D_(){switch(ne){case"custom":return Ke(c),k.jsx(c,{},`${va}_custom`);case"none":return null;case"canvas":default:return k.jsx(QH,{canvasRef:o},`${va}_canvas`)}}function Ph(){return J?k.jsx(ZH,{},`${va}_text`):null}function Ih(){return H?k.jsx(e5,{},`${va}_annotations`):null}function _g(){return k.jsxs(RN.Provider,{value:Yi,children:[D_(),Ph(),Ih(),a]})}function Bt(){return We?U===null||ke===void 0||ke===null?k.jsx(Jc,{type:"loading",children:typeof v=="function"?v():v}):U===!1||ke===!1?k.jsx(Jc,{type:"error",children:typeof p=="function"?p():p}):_g():k.jsx(Jc,{type:"no-data",children:typeof w=="function"?w():w})}return k.jsx("div",Object.assign({className:p_(r,l),"data-page-number":We,ref:xN(m,Ar),style:{"--scale-factor":`${it}`,backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Rh,{children:Bt()}))}VH();RS.workerSrc="pdf.worker.mjs";function LN({isMobile:n}){const[e,t]=A.useState("");A.useEffect(()=>{ag("/resume","Resume - Adarsh Gella Portfolio"),t("https://fmcjrkoabikaexixbppg.supabase.co/storage/v1/object/public/resume/resume.pdf")},[]);const[r]=A.useState(1),i=()=>{qo("Resume Download","resume_page",{file_url:e,device_type:n?"mobile":"desktop"}),window.open(e,"_blank")};return k.jsx("div",{className:`pdf-div ${n?"mwebPdf":""}`,onClick:i,children:e&&k.jsx(WH,{file:e,children:k.jsx(n5,{pageNumber:r,renderTextLayer:!1,renderAnnotationLayer:!1})})})}LN.propTypes={isMobile:li.bool};const r5="/assets/linkedin-DvbM5N3o.png",i5="/assets/instagram-DsqoG5P9.png",s5="/assets/youtube-rHJN1bq4.png",o5="/assets/gmail-DoONwEbf.png",a5="/assets/contact-Ctb_tZ2q.png";function NN({isMobile:n}){A.useEffect(()=>{ag("/contact","Contact - Adarsh Gella Portfolio")},[]);const e=(t,r)=>{qo(`${t} Link`,"contact_page",{platform:t.toLowerCase(),url:r,device_type:n?"mobile":"desktop"}),Lm("social_media_click",t,{url:r})};return k.jsxs("div",{className:`contact ${n?"contactMweb":""}`,children:[k.jsxs("div",{className:"socialMedia",children:[k.jsxs("h2",{className:"contact-title",children:["contact",k.jsx("span",{children:"."})]}),k.jsxs("p",{className:"contact-description",children:["Get in touch with me via social media ",k.jsx("br",{})," or send me an email."]}),k.jsxs("div",{className:"contact-icons",children:[k.jsx("a",{href:"https://www.linkedin.com/in/g-adarsh-sonu/",target:"_blank",onClick:()=>e("LinkedIn","https://www.linkedin.com/in/g-adarsh-sonu/"),children:k.jsx("img",{src:r5,alt:"LinkedIn"})}),k.jsx("a",{href:"https://instagram.com/g_adarsh_sonu",target:"_blank",onClick:()=>e("Instagram","https://instagram.com/g_adarsh_sonu"),children:k.jsx("img",{src:i5,alt:"Instagram"})}),k.jsx("a",{href:"mailto:g.adarsh043@gmail.com",onClick:()=>e("Gmail","mailto:g.adarsh043@gmail.com"),children:k.jsx("img",{src:o5,alt:"Gmail"})}),k.jsx("a",{href:"https://youtube.com/@g_adarsh_sonu",target:"_blank",onClick:()=>e("YouTube","https://youtube.com/@g_adarsh_sonu"),children:k.jsx("img",{src:s5,alt:"YouTube"})})]})]}),k.jsx("div",{className:"contact-image-container",children:k.jsx("img",{src:a5,alt:"Contact",className:"contact-image"})})]})}NN.propTypes={isMobile:li.bool};var m1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},l5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ON={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(t[u],t[f],t[p],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):l5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new c5;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const m=c<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class c5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u5=function(n){const e=DN(n);return ON.encodeByteArray(e,!0)},Qv=function(n){return u5(n).replace(/\./g,"")},h5=function(n){try{return ON.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=()=>d5().__FIREBASE_DEFAULTS__,p5=()=>{if(typeof process>"u"||typeof m1>"u")return;const n=m1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},g5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&h5(n[1]);return e&&JSON.parse(e)},PS=()=>{try{return f5()||p5()||g5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},m5=n=>{var e,t;return(t=(e=PS())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},FN=n=>{const e=m5(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},VN=()=>{var n;return(n=PS())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qv(JSON.stringify(t)),Qv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _5(){var n;const e=(n=PS())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w5(){return!_5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E5(){try{return typeof indexedDB=="object"}catch{return!1}}function A5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5="FirebaseError";class oc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=b5,Object.setPrototypeOf(this,oc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,BN.prototype.create)}}class BN{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?S5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new oc(i,a,r)}}function S5(n,e){return n.replace(T5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const T5=/\{\$([^}]+)}/g;function xA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(v1(s)&&v1(o)){if(!xA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function v1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(n){return n&&n._delegate?n._delegate:n}class lh{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new v5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R5(e))try{this.getOrInitializeService({instanceIdentifier:Ma})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ma){return this.instances.has(e)}getOptions(e=Ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:x5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ma){return this.component?this.component.multipleInstances?e:Ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x5(n){return n===Ma?void 0:n}function R5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new C5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Re||(Re={}));const I5={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},k5=Re.INFO,M5={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},L5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=M5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $N{constructor(e){this.name=e,this._logLevel=k5,this._logHandler=L5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const N5=(n,e)=>e.some(t=>n instanceof t);let y1,_1;function D5(){return y1||(y1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O5(){return _1||(_1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zN=new WeakMap,RA=new WeakMap,HN=new WeakMap,z0=new WeakMap,IS=new WeakMap;function F5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ko(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&zN.set(t,n)}).catch(()=>{}),IS.set(e,n),e}function V5(n){if(RA.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});RA.set(n,e)}let PA={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return RA.get(n);if(e==="objectStoreNames")return n.objectStoreNames||HN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ko(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function j5(n){PA=n(PA)}function B5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(H0(this),e,...t);return HN.set(r,e.sort?e.sort():[e]),Ko(r)}:O5().includes(n)?function(...e){return n.apply(H0(this),e),Ko(zN.get(this))}:function(...e){return Ko(n.apply(H0(this),e))}}function U5(n){return typeof n=="function"?B5(n):(n instanceof IDBTransaction&&V5(n),N5(n,D5())?new Proxy(n,PA):n)}function Ko(n){if(n instanceof IDBRequest)return F5(n);if(z0.has(n))return z0.get(n);const e=U5(n);return e!==n&&(z0.set(n,e),IS.set(e,n)),e}const H0=n=>IS.get(n);function $5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Ko(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ko(o.result),l.oldVersion,l.newVersion,Ko(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const z5=["get","getKey","getAll","getAllKeys","count"],H5=["put","add","delete","clear"],W0=new Map;function w1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(W0.get(e))return W0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=H5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||z5.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return W0.set(e,s),s}j5(n=>({...n,get:(e,t,r)=>w1(e,t)||n.get(e,t,r),has:(e,t)=>!!w1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(G5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function G5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const IA="@firebase/app",E1="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new $N("@firebase/app"),q5="@firebase/app-compat",K5="@firebase/analytics-compat",X5="@firebase/analytics",Y5="@firebase/app-check-compat",Q5="@firebase/app-check",J5="@firebase/auth",Z5="@firebase/auth-compat",e6="@firebase/database",t6="@firebase/data-connect",n6="@firebase/database-compat",r6="@firebase/functions",i6="@firebase/functions-compat",s6="@firebase/installations",o6="@firebase/installations-compat",a6="@firebase/messaging",l6="@firebase/messaging-compat",c6="@firebase/performance",u6="@firebase/performance-compat",h6="@firebase/remote-config",d6="@firebase/remote-config-compat",f6="@firebase/storage",p6="@firebase/storage-compat",g6="@firebase/firestore",m6="@firebase/vertexai",v6="@firebase/firestore-compat",y6="firebase",_6="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="[DEFAULT]",w6={[IA]:"fire-core",[q5]:"fire-core-compat",[X5]:"fire-analytics",[K5]:"fire-analytics-compat",[Q5]:"fire-app-check",[Y5]:"fire-app-check-compat",[J5]:"fire-auth",[Z5]:"fire-auth-compat",[e6]:"fire-rtdb",[t6]:"fire-data-connect",[n6]:"fire-rtdb-compat",[r6]:"fire-fn",[i6]:"fire-fn-compat",[s6]:"fire-iid",[o6]:"fire-iid-compat",[a6]:"fire-fcm",[l6]:"fire-fcm-compat",[c6]:"fire-perf",[u6]:"fire-perf-compat",[h6]:"fire-rc",[d6]:"fire-rc-compat",[f6]:"fire-gcs",[p6]:"fire-gcs-compat",[g6]:"fire-fst",[v6]:"fire-fst-compat",[m6]:"fire-vertex","fire-js":"fire-js",[y6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map,E6=new Map,MA=new Map;function A1(n,e){try{n.container.addComponent(e)}catch(t){qs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ff(n){const e=n.name;if(MA.has(e))return qs.debug(`There were multiple attempts to register component ${e}.`),!1;MA.set(e,n);for(const t of Jv.values())A1(t,n);for(const t of E6.values())A1(t,n);return!0}function WN(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xo=new BN("app","Firebase",A6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=_6;function qN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kA,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xo.create("bad-app-name",{appName:String(i)});if(t||(t=VN()),!t)throw Xo.create("no-options");const s=Jv.get(i);if(s){if(xA(t,s.options)&&xA(r,s.config))return s;throw Xo.create("duplicate-app",{appName:i})}const o=new P5(i);for(const l of MA.values())o.addComponent(l);const a=new b6(t,r,o);return Jv.set(i,a),a}function KN(n=kA){const e=Jv.get(n);if(!e&&n===kA&&VN())return qN();if(!e)throw Xo.create("no-app",{appName:n});return e}function Yo(n,e,t){var r;let i=(r=w6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qs.warn(a.join(" "));return}ff(new lh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6="firebase-heartbeat-database",T6=1,pf="firebase-heartbeat-store";let G0=null;function XN(){return G0||(G0=$5(S6,T6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xo.create("idb-open",{originalErrorMessage:n.message})})),G0}async function C6(n){try{const t=(await XN()).transaction(pf),r=await t.objectStore(pf).get(YN(n));return await t.done,r}catch(e){if(e instanceof oc)qs.warn(e.message);else{const t=Xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qs.warn(t.message)}}}async function b1(n,e){try{const r=(await XN()).transaction(pf,"readwrite");await r.objectStore(pf).put(e,YN(n)),await r.done}catch(t){if(t instanceof oc)qs.warn(t.message);else{const r=Xo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qs.warn(r.message)}}}function YN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=1024,R6=30*24*60*60*1e3;class P6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new k6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=S1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=R6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=S1(),{heartbeatsToSend:r,unsentEntries:i}=I6(this._heartbeatsCache.heartbeats),s=Qv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return qs.warn(t),""}}}function S1(){return new Date().toISOString().substring(0,10)}function I6(n,e=x6){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),T1(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),T1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class k6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E5()?A5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await C6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return b1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return b1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function T1(n){return Qv(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(n){ff(new lh("platform-logger",e=>new W5(e),"PRIVATE")),ff(new lh("heartbeat",e=>new P6(e),"PRIVATE")),Yo(IA,E1,n),Yo(IA,E1,"esm2017"),Yo("fire-js","")}M6("");var L6="firebase",N6="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yo(L6,N6,"app");var C1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vl,QN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function x(){}x.prototype=T.prototype,C.D=T.prototype,C.prototype=new x,C.prototype.constructor=C,C.C=function(L,F,V){for(var D=Array(arguments.length-2),z=2;z<arguments.length;z++)D[z-2]=arguments[z];return T.prototype[F].apply(L,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,T,x){x||(x=0);var L=Array(16);if(typeof T=="string")for(var F=0;16>F;++F)L[F]=T.charCodeAt(x++)|T.charCodeAt(x++)<<8|T.charCodeAt(x++)<<16|T.charCodeAt(x++)<<24;else for(F=0;16>F;++F)L[F]=T[x++]|T[x++]<<8|T[x++]<<16|T[x++]<<24;T=C.g[0],x=C.g[1],F=C.g[2];var V=C.g[3],D=T+(V^x&(F^V))+L[0]+3614090360&4294967295;T=x+(D<<7&4294967295|D>>>25),D=V+(F^T&(x^F))+L[1]+3905402710&4294967295,V=T+(D<<12&4294967295|D>>>20),D=F+(x^V&(T^x))+L[2]+606105819&4294967295,F=V+(D<<17&4294967295|D>>>15),D=x+(T^F&(V^T))+L[3]+3250441966&4294967295,x=F+(D<<22&4294967295|D>>>10),D=T+(V^x&(F^V))+L[4]+4118548399&4294967295,T=x+(D<<7&4294967295|D>>>25),D=V+(F^T&(x^F))+L[5]+1200080426&4294967295,V=T+(D<<12&4294967295|D>>>20),D=F+(x^V&(T^x))+L[6]+2821735955&4294967295,F=V+(D<<17&4294967295|D>>>15),D=x+(T^F&(V^T))+L[7]+4249261313&4294967295,x=F+(D<<22&4294967295|D>>>10),D=T+(V^x&(F^V))+L[8]+1770035416&4294967295,T=x+(D<<7&4294967295|D>>>25),D=V+(F^T&(x^F))+L[9]+2336552879&4294967295,V=T+(D<<12&4294967295|D>>>20),D=F+(x^V&(T^x))+L[10]+4294925233&4294967295,F=V+(D<<17&4294967295|D>>>15),D=x+(T^F&(V^T))+L[11]+2304563134&4294967295,x=F+(D<<22&4294967295|D>>>10),D=T+(V^x&(F^V))+L[12]+1804603682&4294967295,T=x+(D<<7&4294967295|D>>>25),D=V+(F^T&(x^F))+L[13]+4254626195&4294967295,V=T+(D<<12&4294967295|D>>>20),D=F+(x^V&(T^x))+L[14]+2792965006&4294967295,F=V+(D<<17&4294967295|D>>>15),D=x+(T^F&(V^T))+L[15]+1236535329&4294967295,x=F+(D<<22&4294967295|D>>>10),D=T+(F^V&(x^F))+L[1]+4129170786&4294967295,T=x+(D<<5&4294967295|D>>>27),D=V+(x^F&(T^x))+L[6]+3225465664&4294967295,V=T+(D<<9&4294967295|D>>>23),D=F+(T^x&(V^T))+L[11]+643717713&4294967295,F=V+(D<<14&4294967295|D>>>18),D=x+(V^T&(F^V))+L[0]+3921069994&4294967295,x=F+(D<<20&4294967295|D>>>12),D=T+(F^V&(x^F))+L[5]+3593408605&4294967295,T=x+(D<<5&4294967295|D>>>27),D=V+(x^F&(T^x))+L[10]+38016083&4294967295,V=T+(D<<9&4294967295|D>>>23),D=F+(T^x&(V^T))+L[15]+3634488961&4294967295,F=V+(D<<14&4294967295|D>>>18),D=x+(V^T&(F^V))+L[4]+3889429448&4294967295,x=F+(D<<20&4294967295|D>>>12),D=T+(F^V&(x^F))+L[9]+568446438&4294967295,T=x+(D<<5&4294967295|D>>>27),D=V+(x^F&(T^x))+L[14]+3275163606&4294967295,V=T+(D<<9&4294967295|D>>>23),D=F+(T^x&(V^T))+L[3]+4107603335&4294967295,F=V+(D<<14&4294967295|D>>>18),D=x+(V^T&(F^V))+L[8]+1163531501&4294967295,x=F+(D<<20&4294967295|D>>>12),D=T+(F^V&(x^F))+L[13]+2850285829&4294967295,T=x+(D<<5&4294967295|D>>>27),D=V+(x^F&(T^x))+L[2]+4243563512&4294967295,V=T+(D<<9&4294967295|D>>>23),D=F+(T^x&(V^T))+L[7]+1735328473&4294967295,F=V+(D<<14&4294967295|D>>>18),D=x+(V^T&(F^V))+L[12]+2368359562&4294967295,x=F+(D<<20&4294967295|D>>>12),D=T+(x^F^V)+L[5]+4294588738&4294967295,T=x+(D<<4&4294967295|D>>>28),D=V+(T^x^F)+L[8]+2272392833&4294967295,V=T+(D<<11&4294967295|D>>>21),D=F+(V^T^x)+L[11]+1839030562&4294967295,F=V+(D<<16&4294967295|D>>>16),D=x+(F^V^T)+L[14]+4259657740&4294967295,x=F+(D<<23&4294967295|D>>>9),D=T+(x^F^V)+L[1]+2763975236&4294967295,T=x+(D<<4&4294967295|D>>>28),D=V+(T^x^F)+L[4]+1272893353&4294967295,V=T+(D<<11&4294967295|D>>>21),D=F+(V^T^x)+L[7]+4139469664&4294967295,F=V+(D<<16&4294967295|D>>>16),D=x+(F^V^T)+L[10]+3200236656&4294967295,x=F+(D<<23&4294967295|D>>>9),D=T+(x^F^V)+L[13]+681279174&4294967295,T=x+(D<<4&4294967295|D>>>28),D=V+(T^x^F)+L[0]+3936430074&4294967295,V=T+(D<<11&4294967295|D>>>21),D=F+(V^T^x)+L[3]+3572445317&4294967295,F=V+(D<<16&4294967295|D>>>16),D=x+(F^V^T)+L[6]+76029189&4294967295,x=F+(D<<23&4294967295|D>>>9),D=T+(x^F^V)+L[9]+3654602809&4294967295,T=x+(D<<4&4294967295|D>>>28),D=V+(T^x^F)+L[12]+3873151461&4294967295,V=T+(D<<11&4294967295|D>>>21),D=F+(V^T^x)+L[15]+530742520&4294967295,F=V+(D<<16&4294967295|D>>>16),D=x+(F^V^T)+L[2]+3299628645&4294967295,x=F+(D<<23&4294967295|D>>>9),D=T+(F^(x|~V))+L[0]+4096336452&4294967295,T=x+(D<<6&4294967295|D>>>26),D=V+(x^(T|~F))+L[7]+1126891415&4294967295,V=T+(D<<10&4294967295|D>>>22),D=F+(T^(V|~x))+L[14]+2878612391&4294967295,F=V+(D<<15&4294967295|D>>>17),D=x+(V^(F|~T))+L[5]+4237533241&4294967295,x=F+(D<<21&4294967295|D>>>11),D=T+(F^(x|~V))+L[12]+1700485571&4294967295,T=x+(D<<6&4294967295|D>>>26),D=V+(x^(T|~F))+L[3]+2399980690&4294967295,V=T+(D<<10&4294967295|D>>>22),D=F+(T^(V|~x))+L[10]+4293915773&4294967295,F=V+(D<<15&4294967295|D>>>17),D=x+(V^(F|~T))+L[1]+2240044497&4294967295,x=F+(D<<21&4294967295|D>>>11),D=T+(F^(x|~V))+L[8]+1873313359&4294967295,T=x+(D<<6&4294967295|D>>>26),D=V+(x^(T|~F))+L[15]+4264355552&4294967295,V=T+(D<<10&4294967295|D>>>22),D=F+(T^(V|~x))+L[6]+2734768916&4294967295,F=V+(D<<15&4294967295|D>>>17),D=x+(V^(F|~T))+L[13]+1309151649&4294967295,x=F+(D<<21&4294967295|D>>>11),D=T+(F^(x|~V))+L[4]+4149444226&4294967295,T=x+(D<<6&4294967295|D>>>26),D=V+(x^(T|~F))+L[11]+3174756917&4294967295,V=T+(D<<10&4294967295|D>>>22),D=F+(T^(V|~x))+L[2]+718787259&4294967295,F=V+(D<<15&4294967295|D>>>17),D=x+(V^(F|~T))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(F+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+F&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var x=T-this.blockSize,L=this.B,F=this.h,V=0;V<T;){if(F==0)for(;V<=x;)i(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<T;)if(L[F++]=C.charCodeAt(V++),F==this.blockSize){i(this,L),F=0;break}}else for(;V<T;)if(L[F++]=C[V++],F==this.blockSize){i(this,L),F=0;break}}this.h=F,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var x=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=x&255,x/=256;for(this.u(C),C=Array(16),T=x=0;4>T;++T)for(var L=0;32>L;L+=8)C[x++]=this.g[T]>>>L&255;return C};function s(C,T){var x=a;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=T(C)}function o(C,T){this.h=T;for(var x=[],L=!0,F=C.length-1;0<=F;F--){var V=C[F]|0;L&&V==T||(x[F]=V,L=!1)}this.g=x}var a={};function l(C){return-128<=C&&128>C?s(C,function(T){return new o([T|0],0>T?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return w(c(-C));for(var T=[],x=1,L=0;C>=x;L++)T[L]=C/x|0,x*=4294967296;return new o(T,0)}function u(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return w(u(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(T,8)),L=f,F=0;F<C.length;F+=8){var V=Math.min(8,C.length-F),D=parseInt(C.substring(F,F+V),T);8>V?(V=c(Math.pow(T,V)),L=L.j(V).add(c(D))):(L=L.j(x),L=L.add(c(D)))}return L}var f=l(0),p=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-w(this).m();for(var C=0,T=1,x=0;x<this.g.length;x++){var L=this.i(x);C+=(0<=L?L:4294967296+L)*T,T*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(v(this))return"-"+w(this).toString(C);for(var T=c(Math.pow(C,6)),x=this,L="";;){var F=P(x,T).g;x=_(x,F.j(T));var V=((0<x.g.length?x.g[0]:x.h)>>>0).toString(C);if(x=F,m(x))return V+L;for(;6>V.length;)V="0"+V;L=V+L}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function v(C){return C.h==-1}n.l=function(C){return C=_(this,C),v(C)?-1:m(C)?0:1};function w(C){for(var T=C.g.length,x=[],L=0;L<T;L++)x[L]=~C.g[L];return new o(x,~C.h).add(p)}n.abs=function(){return v(this)?w(this):this},n.add=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],L=0,F=0;F<=T;F++){var V=L+(this.i(F)&65535)+(C.i(F)&65535),D=(V>>>16)+(this.i(F)>>>16)+(C.i(F)>>>16);L=D>>>16,V&=65535,D&=65535,x[F]=D<<16|V}return new o(x,x[x.length-1]&-2147483648?-1:0)};function _(C,T){return C.add(w(T))}n.j=function(C){if(m(this)||m(C))return f;if(v(this))return v(C)?w(this).j(w(C)):w(w(this).j(C));if(v(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var T=this.g.length+C.g.length,x=[],L=0;L<2*T;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(var F=0;F<C.g.length;F++){var V=this.i(L)>>>16,D=this.i(L)&65535,z=C.i(F)>>>16,$=C.i(F)&65535;x[2*L+2*F]+=D*$,E(x,2*L+2*F),x[2*L+2*F+1]+=V*$,E(x,2*L+2*F+1),x[2*L+2*F+1]+=D*z,E(x,2*L+2*F+1),x[2*L+2*F+2]+=V*z,E(x,2*L+2*F+2)}for(L=0;L<T;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=T;L<2*T;L++)x[L]=0;return new o(x,0)};function E(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function S(C,T){this.g=C,this.h=T}function P(C,T){if(m(T))throw Error("division by zero");if(m(C))return new S(f,f);if(v(C))return T=P(w(C),T),new S(w(T.g),w(T.h));if(v(T))return T=P(C,w(T)),new S(w(T.g),T.h);if(30<C.g.length){if(v(C)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var x=p,L=T;0>=L.l(C);)x=O(x),L=O(L);var F=j(x,1),V=j(L,1);for(L=j(L,2),x=j(x,2);!m(L);){var D=V.add(L);0>=D.l(C)&&(F=F.add(x),V=D),L=j(L,1),x=j(x,1)}return T=_(C,F.j(T)),new S(F,T)}for(F=f;0<=C.l(T);){for(x=Math.max(1,Math.floor(C.m()/T.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),V=c(x),D=V.j(T);v(D)||0<D.l(C);)x-=L,V=c(x),D=V.j(T);m(V)&&(V=p),F=F.add(V),C=_(C,D)}return new S(F,C)}n.A=function(C){return P(this,C).h},n.and=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],L=0;L<T;L++)x[L]=this.i(L)&C.i(L);return new o(x,this.h&C.h)},n.or=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],L=0;L<T;L++)x[L]=this.i(L)|C.i(L);return new o(x,this.h|C.h)},n.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],L=0;L<T;L++)x[L]=this.i(L)^C.i(L);return new o(x,this.h^C.h)};function O(C){for(var T=C.g.length+1,x=[],L=0;L<T;L++)x[L]=C.i(L)<<1|C.i(L-1)>>>31;return new o(x,C.h)}function j(C,T){var x=T>>5;T%=32;for(var L=C.g.length-x,F=[],V=0;V<L;V++)F[V]=0<T?C.i(V+x)>>>T|C.i(V+x+1)<<32-T:C.i(V+x);return new o(F,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Vl=o}).apply(typeof C1<"u"?C1:typeof self<"u"?self:typeof window<"u"?window:{});var lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JN,bd,ZN,ov,LA,eD,tD,nD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,b){return d==Array.prototype||d==Object.prototype||(d[y]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof lm=="object"&&lm];for(var y=0;y<d.length;++y){var b=d[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function i(d,y){if(y)e:{var b=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var G=d[N];if(!(G in b))break e;b=b[G]}d=d[d.length-1],N=b[d],y=y(N),y!=N&&y!=null&&e(b,d,{configurable:!0,writable:!0,value:y})}}function s(d,y){d instanceof String&&(d+="");var b=0,N=!1,G={next:function(){if(!N&&b<d.length){var q=b++;return{value:y(q,d[q]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(d){return d||function(){return s(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function c(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function u(d,y,b){return d.call.apply(d.bind,arguments)}function f(d,y,b){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),d.apply(y,G)}}return function(){return d.apply(y,arguments)}}function p(d,y,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function g(d,y){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function m(d,y){function b(){}b.prototype=y.prototype,d.aa=y.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(N,G,q){for(var Q=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Q[Ge-2]=arguments[Ge];return y.prototype[G].apply(N,Q)}}function v(d){const y=d.length;if(0<y){const b=Array(y);for(let N=0;N<y;N++)b[N]=d[N];return b}return[]}function w(d,y){for(let b=1;b<arguments.length;b++){const N=arguments[b];if(l(N)){const G=d.length||0,q=N.length||0;d.length=G+q;for(let Q=0;Q<q;Q++)d[G+Q]=N[Q]}else d.push(N)}}class _{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function E(d){return/^[\s\xa0]*$/.test(d)}function S(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function P(d){return P[" "](d),d}P[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function j(d,y,b){for(const N in d)y.call(b,d[N],N,d)}function C(d,y){for(const b in d)y.call(void 0,d[b],b,d)}function T(d){const y={};for(const b in d)y[b]=d[b];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(d,y){let b,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(b in N)d[b]=N[b];for(let q=0;q<x.length;q++)b=x[q],Object.prototype.hasOwnProperty.call(N,b)&&(d[b]=N[b])}}function F(d){var y=1;d=d.split(":");const b=[];for(;0<y&&d.length;)b.push(d.shift()),y--;return d.length&&b.push(d.join(":")),b}function V(d){a.setTimeout(()=>{throw d},0)}function D(){var d=H;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class z{constructor(){this.h=this.g=null}add(y,b){const N=$.get();N.set(y,b),this.h?this.h.next=N:this.g=N,this.h=N}}var $=new _(()=>new W,d=>d.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let U,B=!1,H=new z,X=()=>{const d=a.Promise.resolve(void 0);U=()=>{d.then(ne)}};var ne=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(b){V(b)}var y=$;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}B=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,y),a.removeEventListener("test",b,y)}catch{}return d}();function Fe(d,y){if(re.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(O){e:{try{P(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else b=="mouseover"?y=d.fromElement:b=="mouseout"&&(y=d.toElement);this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:be[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Fe.aa.h.call(this)}}m(Fe,re);var be={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(d,y,b,N,G){this.listener=d,this.proxy=null,this.src=y,this.type=b,this.capture=!!N,this.ha=G,this.key=++Je,this.da=this.fa=!1}function ke(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Zn(d){this.src=d,this.g={},this.h=0}Zn.prototype.add=function(d,y,b,N,G){var q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);var Q=Se(d,y,N,G);return-1<Q?(y=d[Q],b||(y.fa=!1)):(y=new Ze(y,this.src,q,!!N,G),y.fa=b,d.push(y)),y};function Ar(d,y){var b=y.type;if(b in d.g){var N=d.g[b],G=Array.prototype.indexOf.call(N,y,void 0),q;(q=0<=G)&&Array.prototype.splice.call(N,G,1),q&&(ke(y),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Se(d,y,b,N){for(var G=0;G<d.length;++G){var q=d[G];if(!q.da&&q.listener==y&&q.capture==!!b&&q.ha==N)return G}return-1}var We="closure_lm_"+(1e6*Math.random()|0),ht={};function it(d,y,b,N,G){if(Array.isArray(y)){for(var q=0;q<y.length;q++)it(d,y[q],b,N,G);return null}return b=_g(b),d&&d[ce]?d.K(y,b,c(N)?!!N.capture:!!N,G):di(d,y,b,!1,N,G)}function di(d,y,b,N,G,q){if(!y)throw Error("Invalid event type");var Q=c(G)?!!G.capture:!!G,Ge=Ph(d);if(Ge||(d[We]=Ge=new Zn(d)),b=Ge.add(y,b,N,Q,q),b.proxy)return b;if(N=Xi(),b.proxy=N,N.src=d,N.listener=b,d.addEventListener)ge||(G=Q),G===void 0&&(G=!1),d.addEventListener(y.toString(),N,G);else if(d.attachEvent)d.attachEvent(va(y.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Xi(){function d(b){return y.call(d.src,d.listener,b)}const y=D_;return d}function Yi(d,y,b,N,G){if(Array.isArray(y))for(var q=0;q<y.length;q++)Yi(d,y[q],b,N,G);else N=c(N)?!!N.capture:!!N,b=_g(b),d&&d[ce]?(d=d.i,y=String(y).toString(),y in d.g&&(q=d.g[y],b=Se(q,b,N,G),-1<b&&(ke(q[b]),Array.prototype.splice.call(q,b,1),q.length==0&&(delete d.g[y],d.h--)))):d&&(d=Ph(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Se(y,b,N,G)),(b=-1<d?y[d]:null)&&Rh(b))}function Rh(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ce])Ar(y.i,d);else{var b=d.type,N=d.proxy;y.removeEventListener?y.removeEventListener(b,N,d.capture):y.detachEvent?y.detachEvent(va(b),N):y.addListener&&y.removeListener&&y.removeListener(N),(b=Ph(y))?(Ar(b,d),b.h==0&&(b.src=null,y[We]=null)):ke(d)}}}function va(d){return d in ht?ht[d]:ht[d]="on"+d}function D_(d,y){if(d.da)d=!0;else{y=new Fe(y,this);var b=d.listener,N=d.ha||d.src;d.fa&&Rh(d),d=b.call(N,y)}return d}function Ph(d){return d=d[We],d instanceof Zn?d:null}var Ih="__closure_events_fn_"+(1e9*Math.random()>>>0);function _g(d){return typeof d=="function"?d:(d[Ih]||(d[Ih]=function(y){return d.handleEvent(y)}),d[Ih])}function Bt(){J.call(this),this.i=new Zn(this),this.M=this,this.F=null}m(Bt,J),Bt.prototype[ce]=!0,Bt.prototype.removeEventListener=function(d,y,b,N){Yi(this,d,y,b,N)};function dt(d,y){var b,N=d.F;if(N)for(b=[];N;N=N.F)b.push(N);if(d=d.M,N=y.type||y,typeof y=="string")y=new re(y,d);else if(y instanceof re)y.target=y.target||d;else{var G=y;y=new re(N,d),L(y,G)}if(G=!0,b)for(var q=b.length-1;0<=q;q--){var Q=y.g=b[q];G=Qi(Q,N,!0,y)&&G}if(Q=y.g=d,G=Qi(Q,N,!0,y)&&G,G=Qi(Q,N,!1,y)&&G,b)for(q=0;q<b.length;q++)Q=y.g=b[q],G=Qi(Q,N,!1,y)&&G}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var b=d.g[y],N=0;N<b.length;N++)ke(b[N]);delete d.g[y],d.h--}}this.F=null},Bt.prototype.K=function(d,y,b,N){return this.i.add(String(d),y,!1,b,N)},Bt.prototype.L=function(d,y,b,N){return this.i.add(String(d),y,!0,b,N)};function Qi(d,y,b,N){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,q=0;q<y.length;++q){var Q=y[q];if(Q&&!Q.da&&Q.capture==b){var Ge=Q.listener,qt=Q.ha||Q.src;Q.fa&&Ar(d.i,Q),G=Ge.call(qt,N)!==!1&&G}}return G&&!N.defaultPrevented}function ya(d,y,b){if(typeof d=="function")b&&(d=p(d,b));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(d,y||0)}function cc(d){d.g=ya(()=>{d.g=null,d.i&&(d.i=!1,cc(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class WO extends J{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:cc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kh(d){J.call(this),this.h=d,this.g={}}m(kh,J);var cT=[];function uT(d){j(d.g,function(y,b){this.g.hasOwnProperty(b)&&Rh(y)},d),d.g={}}kh.prototype.N=function(){kh.aa.N.call(this),uT(this)},kh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var O_=a.JSON.stringify,GO=a.JSON.parse,qO=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function F_(){}F_.prototype.h=null;function hT(d){return d.h||(d.h=d.i())}function dT(){}var Mh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function V_(){re.call(this,"d")}m(V_,re);function j_(){re.call(this,"c")}m(j_,re);var _a={},fT=null;function wg(){return fT=fT||new Bt}_a.La="serverreachability";function pT(d){re.call(this,_a.La,d)}m(pT,re);function Lh(d){const y=wg();dt(y,new pT(y))}_a.STAT_EVENT="statevent";function gT(d,y){re.call(this,_a.STAT_EVENT,d),this.stat=y}m(gT,re);function Sn(d){const y=wg();dt(y,new gT(y,d))}_a.Ma="timingevent";function mT(d,y){re.call(this,_a.Ma,d),this.size=y}m(mT,re);function Nh(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function Dh(){this.g=!0}Dh.prototype.xa=function(){this.g=!1};function KO(d,y,b,N,G,q){d.info(function(){if(d.g)if(q)for(var Q="",Ge=q.split("&"),qt=0;qt<Ge.length;qt++){var De=Ge[qt].split("=");if(1<De.length){var cn=De[0];De=De[1];var un=cn.split("_");Q=2<=un.length&&un[1]=="type"?Q+(cn+"="+De+"&"):Q+(cn+"=redacted&")}}else Q=null;else Q=q;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+y+`
`+b+`
`+Q})}function XO(d,y,b,N,G,q,Q){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+y+`
`+b+`
`+q+" "+Q})}function uc(d,y,b,N){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+QO(d,b)+(N?" "+N:"")})}function YO(d,y){d.info(function(){return"TIMEOUT: "+y})}Dh.prototype.info=function(){};function QO(d,y){if(!d.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var N=b[d];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var q=G[0];if(q!="noop"&&q!="stop"&&q!="close")for(var Q=1;Q<G.length;Q++)G[Q]=""}}}}return O_(b)}catch{return y}}var Eg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},B_;function Ag(){}m(Ag,F_),Ag.prototype.g=function(){return new XMLHttpRequest},Ag.prototype.i=function(){return{}},B_=new Ag;function Js(d,y,b,N){this.j=d,this.i=y,this.l=b,this.R=N||1,this.U=new kh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yT}function yT(){this.i=null,this.g="",this.h=!1}var _T={},U_={};function $_(d,y,b){d.L=1,d.v=Cg(Ji(y)),d.m=b,d.P=!0,wT(d,null)}function wT(d,y){d.F=Date.now(),bg(d),d.A=Ji(d.v);var b=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),NT(b.i,"t",N),d.C=0,b=d.j.J,d.h=new yT,d.g=JT(d.j,b?y:null,!d.m),0<d.O&&(d.M=new WO(p(d.Y,d,d.g),d.O)),y=d.U,b=d.g,N=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(cT[0]=G.toString()),G=cT);for(var q=0;q<G.length;q++){var Q=it(b,G[q],N||y.handleEvent,!1,y.h||y);if(!Q)break;y.g[Q.key]=Q}y=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Lh(),KO(d.i,d.u,d.A,d.l,d.R,d.m)}Js.prototype.ca=function(d){d=d.target;const y=this.M;y&&Zi(d)==3?y.j():this.Y(d)},Js.prototype.Y=function(d){try{if(d==this.g)e:{const un=Zi(this.g);var y=this.g.Ba();const fc=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||UT(this.g)))){this.J||un!=4||y==7||(y==8||0>=fc?Lh(3):Lh(2)),z_(this);var b=this.g.Z();this.X=b;t:if(ET(this)){var N=UT(this.g);d="";var G=N.length,q=Zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wa(this),Oh(this);var Q="";break t}this.h.i=new a.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,d+=this.h.i.decode(N[y],{stream:!(q&&y==G-1)});N.length=0,this.h.g+=d,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=b==200,XO(this.i,this.u,this.A,this.l,this.R,un,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,qt=this.g;if((Ge=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ge)){var De=Ge;break t}}De=null}if(b=De)uc(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,H_(this,b);else{this.o=!1,this.s=3,Sn(12),wa(this),Oh(this);break e}}if(this.P){b=!0;let jr;for(;!this.J&&this.C<Q.length;)if(jr=JO(this,Q),jr==U_){un==4&&(this.s=4,Sn(14),b=!1),uc(this.i,this.l,null,"[Incomplete Response]");break}else if(jr==_T){this.s=4,Sn(15),uc(this.i,this.l,Q,"[Invalid Chunk]"),b=!1;break}else uc(this.i,this.l,jr,null),H_(this,jr);if(ET(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||Q.length!=0||this.h.h||(this.s=1,Sn(16),b=!1),this.o=this.o&&b,!b)uc(this.i,this.l,Q,"[Invalid Chunked Response]"),wa(this),Oh(this);else if(0<Q.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Y_(cn),cn.M=!0,Sn(11))}}else uc(this.i,this.l,Q,null),H_(this,Q);un==4&&wa(this),this.o&&!this.J&&(un==4?KT(this.j,this):(this.o=!1,bg(this)))}else gF(this.g),b==400&&0<Q.indexOf("Unknown SID")?(this.s=3,Sn(12)):(this.s=0,Sn(13)),wa(this),Oh(this)}}}catch{}finally{}};function ET(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function JO(d,y){var b=d.C,N=y.indexOf(`
`,b);return N==-1?U_:(b=Number(y.substring(b,N)),isNaN(b)?_T:(N+=1,N+b>y.length?U_:(y=y.slice(N,N+b),d.C=N+b,y)))}Js.prototype.cancel=function(){this.J=!0,wa(this)};function bg(d){d.S=Date.now()+d.I,AT(d,d.I)}function AT(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Nh(p(d.ba,d),y)}function z_(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Js.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(YO(this.i,this.A),this.L!=2&&(Lh(),Sn(17)),wa(this),this.s=2,Oh(this)):AT(this,this.S-d)};function Oh(d){d.j.G==0||d.J||KT(d.j,d)}function wa(d){z_(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,uT(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function H_(d,y){try{var b=d.j;if(b.G!=0&&(b.g==d||W_(b.h,d))){if(!d.K&&W_(b.h,d)&&b.G==3){try{var N=b.Da.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Mg(b),Ig(b);else break e;X_(b),Sn(18)}}else b.za=G[1],0<b.za-b.T&&37500>G[2]&&b.F&&b.v==0&&!b.C&&(b.C=Nh(p(b.Za,b),6e3));if(1>=TT(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Aa(b,11)}else if((d.K||b.g==d)&&Mg(b),!E(y))for(G=b.Da.g.parse(y),y=0;y<G.length;y++){let De=G[y];if(b.T=De[0],De=De[1],b.G==2)if(De[0]=="c"){b.K=De[1],b.ia=De[2];const cn=De[3];cn!=null&&(b.la=cn,b.j.info("VER="+b.la));const un=De[4];un!=null&&(b.Aa=un,b.j.info("SVER="+b.Aa));const fc=De[5];fc!=null&&typeof fc=="number"&&0<fc&&(N=1.5*fc,b.L=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const jr=d.g;if(jr){const Ng=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ng){var q=N.h;q.g||Ng.indexOf("spdy")==-1&&Ng.indexOf("quic")==-1&&Ng.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(G_(q,q.h),q.h=null))}if(N.D){const Q_=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Q_&&(N.ya=Q_,et(N.I,N.D,Q_))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),N=b;var Q=d;if(N.qa=QT(N,N.J?N.ia:null,N.W),Q.K){CT(N.h,Q);var Ge=Q,qt=N.L;qt&&(Ge.I=qt),Ge.B&&(z_(Ge),bg(Ge)),N.g=Q}else GT(N);0<b.i.length&&kg(b)}else De[0]!="stop"&&De[0]!="close"||Aa(b,7);else b.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Aa(b,7):K_(b):De[0]!="noop"&&b.l&&b.l.ta(De),b.v=0)}}Lh(4)}catch{}}var ZO=class{constructor(d,y){this.g=d,this.map=y}};function bT(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ST(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function TT(d){return d.h?1:d.g?d.g.size:0}function W_(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function G_(d,y){d.g?d.g.add(y):d.h=y}function CT(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}bT.prototype.cancel=function(){if(this.i=xT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function xT(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const b of d.g.values())y=y.concat(b.D);return y}return v(d.i)}function eF(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var y=[],b=d.length,N=0;N<b;N++)y.push(d[N]);return y}y=[],b=0;for(N in d)y[b++]=d[N];return y}function tF(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var y=[];d=d.length;for(var b=0;b<d;b++)y.push(b);return y}y=[],b=0;for(const N in d)y[b++]=N;return y}}}function RT(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var b=tF(d),N=eF(d),G=N.length,q=0;q<G;q++)y.call(void 0,N[q],b&&b[q],d)}var PT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nF(d,y){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var N=d[b].indexOf("="),G=null;if(0<=N){var q=d[b].substring(0,N);G=d[b].substring(N+1)}else q=d[b];y(q,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ea(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ea){this.h=d.h,Sg(this,d.j),this.o=d.o,this.g=d.g,Tg(this,d.s),this.l=d.l;var y=d.i,b=new jh;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),IT(this,b),this.m=d.m}else d&&(y=String(d).match(PT))?(this.h=!1,Sg(this,y[1]||"",!0),this.o=Fh(y[2]||""),this.g=Fh(y[3]||"",!0),Tg(this,y[4]),this.l=Fh(y[5]||"",!0),IT(this,y[6]||"",!0),this.m=Fh(y[7]||"")):(this.h=!1,this.i=new jh(null,this.h))}Ea.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Vh(y,kT,!0),":");var b=this.g;return(b||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Vh(y,kT,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Vh(b,b.charAt(0)=="/"?sF:iF,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Vh(b,aF)),d.join("")};function Ji(d){return new Ea(d)}function Sg(d,y,b){d.j=b?Fh(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Tg(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function IT(d,y,b){y instanceof jh?(d.i=y,lF(d.i,d.h)):(b||(y=Vh(y,oF)),d.i=new jh(y,d.h))}function et(d,y,b){d.i.set(y,b)}function Cg(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fh(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Vh(d,y,b){return typeof d=="string"?(d=encodeURI(d).replace(y,rF),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function rF(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var kT=/[#\/\?@]/g,iF=/[#\?:]/g,sF=/[#\?]/g,oF=/[#\?@]/g,aF=/#/g;function jh(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Zs(d){d.g||(d.g=new Map,d.h=0,d.i&&nF(d.i,function(y,b){d.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=jh.prototype,n.add=function(d,y){Zs(this),this.i=null,d=hc(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(y),this.h+=1,this};function MT(d,y){Zs(d),y=hc(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function LT(d,y){return Zs(d),y=hc(d,y),d.g.has(y)}n.forEach=function(d,y){Zs(this),this.g.forEach(function(b,N){b.forEach(function(G){d.call(y,G,N,this)},this)},this)},n.na=function(){Zs(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let N=0;N<y.length;N++){const G=d[N];for(let q=0;q<G.length;q++)b.push(y[N])}return b},n.V=function(d){Zs(this);let y=[];if(typeof d=="string")LT(this,d)&&(y=y.concat(this.g.get(hc(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)y=y.concat(d[b])}return y},n.set=function(d,y){return Zs(this),this.i=null,d=hc(this,d),LT(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function NT(d,y,b){MT(d,y),0<b.length&&(d.i=null,d.g.set(hc(d,y),v(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var N=y[b];const q=encodeURIComponent(String(N)),Q=this.V(N);for(N=0;N<Q.length;N++){var G=q;Q[N]!==""&&(G+="="+encodeURIComponent(String(Q[N]))),d.push(G)}}return this.i=d.join("&")};function hc(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function lF(d,y){y&&!d.j&&(Zs(d),d.i=null,d.g.forEach(function(b,N){var G=N.toLowerCase();N!=G&&(MT(this,N),NT(this,G,b))},d)),d.j=y}function cF(d,y){const b=new Dh;if(a.Image){const N=new Image;N.onload=g(eo,b,"TestLoadImage: loaded",!0,y,N),N.onerror=g(eo,b,"TestLoadImage: error",!1,y,N),N.onabort=g(eo,b,"TestLoadImage: abort",!1,y,N),N.ontimeout=g(eo,b,"TestLoadImage: timeout",!1,y,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else y(!1)}function uF(d,y){const b=new Dh,N=new AbortController,G=setTimeout(()=>{N.abort(),eo(b,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:N.signal}).then(q=>{clearTimeout(G),q.ok?eo(b,"TestPingServer: ok",!0,y):eo(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),eo(b,"TestPingServer: error",!1,y)})}function eo(d,y,b,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(b)}catch{}}function hF(){this.g=new qO}function dF(d,y,b){const N=b||"";try{RT(d,function(G,q){let Q=G;c(G)&&(Q=O_(G)),y.push(N+q+"="+encodeURIComponent(Q))})}catch(G){throw y.push(N+"type="+encodeURIComponent("_badmap")),G}}function xg(d){this.l=d.Ub||null,this.j=d.eb||!1}m(xg,F_),xg.prototype.g=function(){return new Rg(this.l,this.j)},xg.prototype.i=function(d){return function(){return d}}({});function Rg(d,y){Bt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Rg,Bt),n=Rg.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,Uh(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bh(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Uh(this)),this.g&&(this.readyState=3,Uh(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;DT(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function DT(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Bh(this):Uh(this),this.readyState==3&&DT(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Bh(this))},n.Qa=function(d){this.g&&(this.response=d,Bh(this))},n.ga=function(){this.g&&Bh(this)};function Bh(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Uh(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=y.next();return d.join(`\r
`)};function Uh(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Rg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function OT(d){let y="";return j(d,function(b,N){y+=N,y+=":",y+=b,y+=`\r
`}),y}function q_(d,y,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=OT(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):et(d,y,b))}function ft(d){Bt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(ft,Bt);var fF=/^https?$/i,pF=["POST","PUT"];n=ft.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():B_.g(),this.v=this.o?hT(this.o):hT(B_),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(q){FT(this,q);return}if(d=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)b.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const q of N.keys())b.set(q,N.get(q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(q=>q.toLowerCase()=="content-type"),G=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pF,y,void 0))||N||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,Q]of b)this.g.setRequestHeader(q,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{BT(this),this.u=!0,this.g.send(d),this.u=!1}catch(q){FT(this,q)}};function FT(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,VT(d),Pg(d)}function VT(d){d.A||(d.A=!0,dt(d,"complete"),dt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,dt(this,"complete"),dt(this,"abort"),Pg(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pg(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jT(this):this.bb())},n.bb=function(){jT(this)};function jT(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Zi(d)!=4||d.Z()!=2)){if(d.u&&Zi(d)==4)ya(d.Ea,0,d);else if(dt(d,"readystatechange"),Zi(d)==4){d.h=!1;try{const Q=d.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var N;if(N=Q===0){var G=String(d.D).match(PT)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),N=!fF.test(G?G.toLowerCase():"")}b=N}if(b)dt(d,"complete"),dt(d,"success");else{d.m=6;try{var q=2<Zi(d)?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.Z()+"]",VT(d)}}finally{Pg(d)}}}}function Pg(d,y){if(d.g){BT(d);const b=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||dt(d,"ready");try{b.onreadystatechange=N}catch{}}}function BT(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Zi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Zi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),GO(y)}};function UT(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function gF(d){const y={};d=(d.g&&2<=Zi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(E(d[N]))continue;var b=F(d[N]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const q=y[G]||[];y[G]=q,q.push(b)}C(y,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $h(d,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||y}function $T(d){this.Aa=0,this.i=[],this.j=new Dh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$h("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$h("baseRetryDelayMs",5e3,d),this.cb=$h("retryDelaySeedMs",1e4,d),this.Wa=$h("forwardChannelMaxRetries",2,d),this.wa=$h("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new bT(d&&d.concurrentRequestLimit),this.Da=new hF,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$T.prototype,n.la=8,n.G=1,n.connect=function(d,y,b,N){Sn(0),this.W=d,this.H=y||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.I=QT(this,null,this.W),kg(this)};function K_(d){if(zT(d),d.G==3){var y=d.U++,b=Ji(d.I);if(et(b,"SID",d.K),et(b,"RID",y),et(b,"TYPE","terminate"),zh(d,b),y=new Js(d,d.j,y),y.L=2,y.v=Cg(Ji(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=y.v,b=!0),b||(y.g=JT(y.j,null),y.g.ea(y.v)),y.F=Date.now(),bg(y)}YT(d)}function Ig(d){d.g&&(Y_(d),d.g.cancel(),d.g=null)}function zT(d){Ig(d),d.u&&(a.clearTimeout(d.u),d.u=null),Mg(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function kg(d){if(!ST(d.h)&&!d.s){d.s=!0;var y=d.Ga;U||X(),B||(U(),B=!0),H.add(y,d),d.B=0}}function mF(d,y){return TT(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Nh(p(d.Ga,d,y),XT(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new Js(this,this.j,d);let q=this.o;if(this.S&&(q?(q=T(q),L(q,this.S)):q=this.S),this.m!==null||this.O||(G.H=q,q=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=WT(this,G,y),b=Ji(this.I),et(b,"RID",d),et(b,"CVER",22),this.D&&et(b,"X-HTTP-Session-Id",this.D),zh(this,b),q&&(this.O?y="headers="+encodeURIComponent(String(OT(q)))+"&"+y:this.m&&q_(b,this.m,q)),G_(this.h,G),this.Ua&&et(b,"TYPE","init"),this.P?(et(b,"$req",y),et(b,"SID","null"),G.T=!0,$_(G,b,null)):$_(G,b,y),this.G=2}}else this.G==3&&(d?HT(this,d):this.i.length==0||ST(this.h)||HT(this))};function HT(d,y){var b;y?b=y.l:b=d.U++;const N=Ji(d.I);et(N,"SID",d.K),et(N,"RID",b),et(N,"AID",d.T),zh(d,N),d.m&&d.o&&q_(N,d.m,d.o),b=new Js(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),y&&(d.i=y.D.concat(d.i)),y=WT(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),G_(d.h,b),$_(b,N,y)}function zh(d,y){d.H&&j(d.H,function(b,N){et(y,N,b)}),d.l&&RT({},function(b,N){et(y,N,b)})}function WT(d,y,b){b=Math.min(d.i.length,b);var N=d.l?p(d.l.Na,d.l,d):null;e:{var G=d.i;let q=-1;for(;;){const Q=["count="+b];q==-1?0<b?(q=G[0].g,Q.push("ofs="+q)):q=0:Q.push("ofs="+q);let Ge=!0;for(let qt=0;qt<b;qt++){let De=G[qt].g;const cn=G[qt].map;if(De-=q,0>De)q=Math.max(0,G[qt].g-100),Ge=!1;else try{dF(cn,Q,"req"+De+"_")}catch{N&&N(cn)}}if(Ge){N=Q.join("&");break e}}}return d=d.i.splice(0,b),y.D=d,N}function GT(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;U||X(),B||(U(),B=!0),H.add(y,d),d.v=0}}function X_(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Nh(p(d.Fa,d),XT(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,qT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Nh(p(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Sn(10),Ig(this),qT(this))};function Y_(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function qT(d){d.g=new Js(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Ji(d.qa);et(y,"RID","rpc"),et(y,"SID",d.K),et(y,"AID",d.T),et(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(y,"TO",d.ja),et(y,"TYPE","xmlhttp"),zh(d,y),d.m&&d.o&&q_(y,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Cg(Ji(y)),b.m=null,b.P=!0,wT(b,d)}n.Za=function(){this.C!=null&&(this.C=null,Ig(this),X_(this),Sn(19))};function Mg(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function KT(d,y){var b=null;if(d.g==y){Mg(d),Y_(d),d.g=null;var N=2}else if(W_(d.h,y))b=y.D,CT(d.h,y),N=1;else return;if(d.G!=0){if(y.o)if(N==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var G=d.B;N=wg(),dt(N,new mT(N,b)),kg(d)}else GT(d);else if(G=y.s,G==3||G==0&&0<y.X||!(N==1&&mF(d,y)||N==2&&X_(d)))switch(b&&0<b.length&&(y=d.h,y.i=y.i.concat(b)),G){case 1:Aa(d,5);break;case 4:Aa(d,10);break;case 3:Aa(d,6);break;default:Aa(d,2)}}}function XT(d,y){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*y}function Aa(d,y){if(d.j.info("Error code "+y),y==2){var b=p(d.fb,d),N=d.Xa;const G=!N;N=new Ea(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sg(N,"https"),Cg(N),G?cF(N.toString(),b):uF(N.toString(),b)}else Sn(2);d.G=0,d.l&&d.l.sa(y),YT(d),zT(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Sn(2)):(this.j.info("Failed to ping google.com"),Sn(1))};function YT(d){if(d.G=0,d.ka=[],d.l){const y=xT(d.h);(y.length!=0||d.i.length!=0)&&(w(d.ka,y),w(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function QT(d,y,b){var N=b instanceof Ea?Ji(b):new Ea(b);if(N.g!="")y&&(N.g=y+"."+N.g),Tg(N,N.s);else{var G=a.location;N=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var q=new Ea(null);N&&Sg(q,N),y&&(q.g=y),G&&Tg(q,G),b&&(q.l=b),N=q}return b=d.D,y=d.ya,b&&y&&et(N,b,y),et(N,"VER",d.la),zh(d,N),N}function JT(d,y,b){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new ft(new xg({eb:b})):new ft(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZT(){}n=ZT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lg(){}Lg.prototype.g=function(d,y){return new er(d,y)};function er(d,y){Bt.call(this),this.g=new $T(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!E(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!E(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new dc(this)}m(er,Bt),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){K_(this.g)},er.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=O_(d),d=b);y.i.push(new ZO(y.Ya++,d)),y.G==3&&kg(y)},er.prototype.N=function(){this.g.l=null,delete this.j,K_(this.g),delete this.g,er.aa.N.call(this)};function eC(d){V_.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const b in y){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}m(eC,V_);function tC(){j_.call(this),this.status=1}m(tC,j_);function dc(d){this.g=d}m(dc,ZT),dc.prototype.ua=function(){dt(this.g,"a")},dc.prototype.ta=function(d){dt(this.g,new eC(d))},dc.prototype.sa=function(d){dt(this.g,new tC)},dc.prototype.ra=function(){dt(this.g,"b")},Lg.prototype.createWebChannel=Lg.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,nD=function(){return new Lg},tD=function(){return wg()},eD=_a,LA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Eg.NO_ERROR=0,Eg.TIMEOUT=8,Eg.HTTP_ERROR=6,ov=Eg,vT.COMPLETE="complete",ZN=vT,dT.EventType=Mh,Mh.OPEN="a",Mh.CLOSE="b",Mh.ERROR="c",Mh.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,bd=dT,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,JN=ft}).apply(typeof lm<"u"?lm:typeof self<"u"?self:typeof window<"u"?window:{});const x1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new $N("@firebase/firestore");function Tc(){return Ql.logLevel}function ie(n,...e){if(Ql.logLevel<=Re.DEBUG){const t=e.map(kS);Ql.debug(`Firestore (${bh}): ${n}`,...t)}}function Ks(n,...e){if(Ql.logLevel<=Re.ERROR){const t=e.map(kS);Ql.error(`Firestore (${bh}): ${n}`,...t)}}function ch(n,...e){if(Ql.logLevel<=Re.WARN){const t=e.map(kS);Ql.warn(`Firestore (${bh}): ${n}`,...t)}}function kS(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n="Unexpected state"){const e=`FIRESTORE (${bh}) INTERNAL ASSERTION FAILED: `+n;throw Ks(e),new Error(e)}function ct(n,e){n||ye()}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends oc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}}class O6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class F6{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new jl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jl,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new rD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new yn(e)}}class V6{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class j6{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new V6(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ct(this.o===void 0);const r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct(typeof t.token=="string"),this.R=t.token,new B6(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Pe(n,e){return n<e?-1:n>e?1:0}function uh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new Yn(0,0))}static max(){return new me(new Yn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(),r===void 0?r=e.length-t:r>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return gf.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mt extends gf{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mt(t)}static emptyPath(){return new mt([])}}const H6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends gf{construct(e,t,r){return new In(e,t,r)}static isValidIdentifier(e){return H6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ue(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ue(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ue(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(mt.fromString(e))}static fromName(e){return new de(mt.fromString(e).popFirst(5))}static empty(){return new de(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new mt(e.slice()))}}function W6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new Yn(t+1,0):new Yn(t,r));return new ia(i,de.empty(),e)}function G6(n){return new ia(n.readTime,n.key,-1)}class ia{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ia(me.min(),de.empty(),-1)}static max(){return new ia(me.max(),de.empty(),-1)}}function q6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y_(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==K6)throw n;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,r)=>{t(e)})}static reject(e){return new K((t,r)=>{r(e)})}static waitFor(e){return new K((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next(i=>i?K.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new K((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new K((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function Y6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}__.oe=-1;function w_(n){return n==null}function NA(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R1(e)),e=J6(n.get(t),e);return R1(e)}function J6(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function R1(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Z6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cm(this.root,e,this.comparator,!1)}getReverseIterator(){return new cm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cm(this.root,e,this.comparator,!0)}}class cm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??rn.RED,this.left=i??rn.EMPTY,this.right=s??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new rn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return rn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,r,i,s){return this}insert(e,t,r){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new I1(this.data.getIterator())}getIteratorFrom(e){return new I1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class I1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Fo([])}unionWith(e){let t=new jt(In.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iD("Invalid base64 string: "+s):s}}(e);return new ln(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const e9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(n){if(ct(!!n),typeof n=="string"){let e=0;const t=e9.exec(n);if(ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function E_(n){const e=n.mapValue.fields.__previous_value__;return MS(e)?E_(e):e}function mf(n){const e=sa(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class vf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?MS(n)?4:r9(n)?9007199254740991:n9(n)?10:11:ye()}function Hi(n,e){if(n===e)return!0;const t=aa(n);if(t!==aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mf(n).isEqual(mf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=sa(i.timestampValue),a=sa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return oa(i.bytesValue).isEqual(oa(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _t(i.geoPointValue.latitude)===_t(s.geoPointValue.latitude)&&_t(i.geoPointValue.longitude)===_t(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _t(i.integerValue)===_t(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_t(i.doubleValue),a=_t(s.doubleValue);return o===a?NA(o)===NA(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return uh(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(P1(o)!==P1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Hi(o[l],a[l])))return!1;return!0}(n,e);default:return ye()}}function yf(n,e){return(n.values||[]).find(t=>Hi(t,e))!==void 0}function hh(n,e){if(n===e)return 0;const t=aa(n),r=aa(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=_t(s.integerValue||s.doubleValue),l=_t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return k1(n.timestampValue,e.timestampValue);case 4:return k1(mf(n),mf(e));case 5:return Pe(n.stringValue,e.stringValue);case 6:return function(s,o){const a=oa(s),l=oa(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Pe(a[c],l[c]);if(u!==0)return u}return Pe(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Pe(_t(s.latitude),_t(o.latitude));return a!==0?a:Pe(_t(s.longitude),_t(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return M1(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=s.fields||{},p=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,m=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=Pe(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:M1(g,m)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===um.mapValue&&o===um.mapValue)return 0;if(s===um.mapValue)return 1;if(o===um.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=Pe(l[f],u[f]);if(p!==0)return p;const g=hh(a[l[f]],c[u[f]]);if(g!==0)return g}return Pe(l.length,u.length)}(n.mapValue,e.mapValue);default:throw ye()}}function k1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=sa(n),r=sa(e),i=Pe(t.seconds,r.seconds);return i!==0?i:Pe(t.nanos,r.nanos)}function M1(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=hh(t[i],r[i]);if(s)return s}return Pe(t.length,r.length)}function dh(n){return DA(n)}function DA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=sa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return oa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return de.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=DA(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${DA(t.fields[o])}`;return i+"}"}(n.mapValue):ye()}function av(n){switch(aa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=E_(n);return e?16+av(e):16;case 5:return 2*n.stringValue.length;case 6:return oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+av(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return fg(r.fields,(s,o)=>{i+=s.length+av(o)}),i}(n.mapValue);default:throw ye()}}function OA(n){return!!n&&"integerValue"in n}function LS(n){return!!n&&"arrayValue"in n}function L1(n){return!!n&&"nullValue"in n}function N1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function q0(n){return!!n&&"mapValue"in n}function n9(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function jd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function r9(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!q0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jd(t)}setAll(e){let t=In.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=jd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());q0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];q0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fg(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Di(jd(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wn(e,0,me.min(),me.min(),me.min(),Di.empty(),0)}static newFoundDocument(e,t,r,i){return new wn(e,1,t,me.min(),r,i,0)}static newNoDocument(e,t){return new wn(e,2,t,me.min(),me.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,me.min(),me.min(),Di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t){this.position=e,this.inclusive=t}}function D1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),t.key):r=hh(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function O1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t="asc"){this.field=e,this.dir=t}}function i9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{}class Ot extends sD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new o9(e,t,r):t==="array-contains"?new c9(e,r):t==="in"?new u9(e,r):t==="not-in"?new h9(e,r):t==="array-contains-any"?new d9(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new a9(e,r):new l9(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(hh(t,this.value)):t!==null&&aa(this.value)===aa(t)&&this.matchesComparison(hh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends sD{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Wi(e,t)}matches(e){return oD(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oD(n){return n.op==="and"}function aD(n){return s9(n)&&oD(n)}function s9(n){for(const e of n.filters)if(e instanceof Wi)return!1;return!0}function FA(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+dh(n.value);if(aD(n))return n.filters.map(e=>FA(e)).join(",");{const e=n.filters.map(t=>FA(t)).join(",");return`${n.op}(${e})`}}function lD(n,e){return n instanceof Ot?function(r,i){return i instanceof Ot&&r.op===i.op&&r.field.isEqual(i.field)&&Hi(r.value,i.value)}(n,e):n instanceof Wi?function(r,i){return i instanceof Wi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&lD(o,i.filters[a]),!0):!1}(n,e):void ye()}function cD(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${dh(t.value)}`}(n):n instanceof Wi?function(t){return t.op.toString()+" {"+t.getFilters().map(cD).join(" ,")+"}"}(n):"Filter"}class o9 extends Ot{constructor(e,t,r){super(e,t,r),this.key=de.fromName(r.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class a9 extends Ot{constructor(e,t){super(e,"in",t),this.keys=uD("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class l9 extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=uD("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uD(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>de.fromName(r.referenceValue))}class c9 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return LS(t)&&yf(t.arrayValue,this.value)}}class u9 extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yf(this.value.arrayValue,t)}}class h9 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(yf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!yf(this.value.arrayValue,t)}}class d9 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!LS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function F1(n,e=null,t=[],r=[],i=null,s=null,o=null){return new f9(n,e,t,r,i,s,o)}function NS(n){const e=Ie(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>FA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),w_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dh(r)).join(",")),e.ue=t}return e.ue}function DS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!i9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!O1(n.startAt,e.startAt)&&O1(n.endAt,e.endAt)}function VA(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function p9(n,e,t,r,i,s,o,a){return new A_(n,e,t,r,i,s,o,a)}function hD(n){return new A_(n)}function V1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function g9(n){return n.collectionGroup!==null}function Bd(n){const e=Ie(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(In.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ey(s,r))}),t.has(In.keyField().canonicalString())||e.ce.push(new ey(In.keyField(),r))}return e.ce}function Vi(n){const e=Ie(n);return e.le||(e.le=m9(e,Bd(n))),e.le}function m9(n,e){if(n.limitType==="F")return F1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ey(i.field,s)});const t=n.endAt?new Zv(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Zv(n.startAt.position,n.startAt.inclusive):null;return F1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jA(n,e,t){return new A_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function b_(n,e){return DS(Vi(n),Vi(e))&&n.limitType===e.limitType}function dD(n){return`${NS(Vi(n))}|lt:${n.limitType}`}function Cc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>cD(i)).join(", ")}]`),w_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>dh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>dh(i)).join(",")),`Target(${r})`}(Vi(n))}; limitType=${n.limitType})`}function S_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Bd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=D1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Bd(r),i)||r.endAt&&!function(o,a,l){const c=D1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Bd(r),i))}(n,e)}function v9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fD(n){return(e,t)=>{let r=!1;for(const i of Bd(n)){const s=y9(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function y9(n,e,t){const r=n.field.isKeyField()?de.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?hh(l,c):ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fg(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Z6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=new At(de.comparator);function la(){return _9}const pD=new At(de.comparator);function Sd(...n){let e=pD;for(const t of n)e=e.insert(t.key,t);return e}function w9(n){let e=pD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ja(){return Ud()}function gD(){return Ud()}function Ud(){return new ac(n=>n.toString(),(n,e)=>n.isEqual(e))}const E9=new jt(de.comparator);function Le(...n){let e=E9;for(const t of n)e=e.add(t);return e}const A9=new jt(Pe);function b9(){return A9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:NA(e)?"-0":e}}function T9(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this._=void 0}}function C9(n,e,t){return n instanceof BA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&MS(s)&&(s=E_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ty?mD(n,e):n instanceof ny?vD(n,e):function(i,s){const o=R9(i,s),a=j1(o)+j1(i.Pe);return OA(o)&&OA(i.Pe)?T9(a):S9(i.serializer,a)}(n,e)}function x9(n,e,t){return n instanceof ty?mD(n,e):n instanceof ny?vD(n,e):t}function R9(n,e){return n instanceof UA?function(r){return OA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class BA extends T_{}class ty extends T_{constructor(e){super(),this.elements=e}}function mD(n,e){const t=yD(e);for(const r of n.elements)t.some(i=>Hi(i,r))||t.push(r);return{arrayValue:{values:t}}}class ny extends T_{constructor(e){super(),this.elements=e}}function vD(n,e){let t=yD(e);for(const r of n.elements)t=t.filter(i=>!Hi(i,r));return{arrayValue:{values:t}}}class UA extends T_{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function j1(n){return _t(n.integerValue||n.doubleValue)}function yD(n){return LS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function P9(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ty&&i instanceof ty||r instanceof ny&&i instanceof ny?uh(r.elements,i.elements,Hi):r instanceof UA&&i instanceof UA?Hi(r.Pe,i.Pe):r instanceof BA&&i instanceof BA}(n.transform,e.transform)}class Bl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bl}static exists(e){return new Bl(void 0,e)}static updateTime(e){return new Bl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class OS{}function _D(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new k9(n.key,Bl.none()):new FS(n.key,n.data,Bl.none());{const t=n.data,r=Di.empty();let i=new jt(In.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new C_(n.key,r,new Fo(i.toArray()),Bl.none())}}function I9(n,e,t){n instanceof FS?function(i,s,o){const a=i.value.clone(),l=U1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof C_?function(i,s,o){if(!lv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=U1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(wD(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function $d(n,e,t,r){return n instanceof FS?function(s,o,a,l){if(!lv(s.precondition,o))return a;const c=s.value.clone(),u=$1(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof C_?function(s,o,a,l){if(!lv(s.precondition,o))return a;const c=$1(s.fieldTransforms,l,o),u=o.data;return u.setAll(wD(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return lv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function B1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uh(r,i,(s,o)=>P9(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class FS extends OS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class C_ extends OS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function U1(n,e,t){const r=new Map;ct(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,x9(o,a,t[i]))}return r}function $1(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,C9(s,o,e))}return r}class k9 extends OS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&I9(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$d(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$d(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gD();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=_D(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&uh(this.mutations,e.mutations,(t,r)=>B1(t,r))&&uh(this.baseMutations,e.baseMutations,(t,r)=>B1(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Ce;function ED(n){if(n===void 0)return Ks("GRPC error has no .code"),Z.UNKNOWN;switch(n){case St.OK:return Z.OK;case St.CANCELLED:return Z.CANCELLED;case St.UNKNOWN:return Z.UNKNOWN;case St.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case St.INTERNAL:return Z.INTERNAL;case St.UNAVAILABLE:return Z.UNAVAILABLE;case St.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case St.NOT_FOUND:return Z.NOT_FOUND;case St.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case St.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case St.ABORTED:return Z.ABORTED;case St.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case St.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case St.DATA_LOSS:return Z.DATA_LOSS;default:return ye()}}(Ce=St||(St={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=new Vl([4294967295,4294967295],0);function z1(n){const e=D9().encode(n),t=new QN;return t.update(e),new Uint8Array(t.digest())}function H1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vl([t,r],0),new Vl([i,s],0)]}class VS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Td(`Invalid padding: ${t}`);if(r<0)throw new Td(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Td(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Td(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Vl.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(Vl.fromNumber(r)));return i.compare(O9)===1&&(i=new Vl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=z1(e),[r,i]=H1(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new VS(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=z1(e),[r,i]=H1(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Td extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,pg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new x_(me.min(),i,new At(Pe),la(),Le())}}class pg{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pg(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class AD{constructor(e,t){this.targetId=e,this.me=t}}class bD{constructor(e,t,r=ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class W1{constructor(){this.fe=0,this.ge=G1(),this.pe=ln.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),r=Le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new pg(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=G1()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class F9{constructor(e){this.Le=e,this.Be=new Map,this.ke=la(),this.qe=hm(),this.Qe=hm(),this.Ke=new At(Pe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const s=i.target;if(VA(s))if(r===0){const o=new de(s.path);this.We(t,o,wn.newNoDocument(o,me.min()))}else ct(r===1);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=oa(r).toUint8Array()}catch(l){if(l instanceof iD)return ch("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new VS(o,i,s)}catch(l){return ch(l instanceof Td?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&VA(a.target)){const l=new de(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,wn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Le();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new x_(e,t,this.Ke,this.ke,r);return this.ke=la(),this.qe=hm(),this.Qe=hm(),this.Ke=new At(Pe),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new W1,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new jt(Pe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new jt(Pe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new W1),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function hm(){return new At(de.comparator)}function G1(){return new At(de.comparator)}const V9={asc:"ASCENDING",desc:"DESCENDING"},j9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B9={and:"AND",or:"OR"};class U9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $A(n,e){return n.useProto3Json||w_(e)?e:{value:e}}function $9(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z9(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zc(n){return ct(!!n),me.fromTimestamp(function(t){const r=sa(t);return new Yn(r.seconds,r.nanos)}(n))}function H9(n,e){return zA(n,e).canonicalString()}function zA(n,e){const t=function(i){return new mt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function SD(n){const e=mt.fromString(n);return ct(PD(e)),e}function K0(n,e){const t=SD(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(CD(t))}function TD(n,e){return H9(n.databaseId,e)}function W9(n){const e=SD(n);return e.length===4?mt.emptyPath():CD(e)}function q1(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CD(n){return ct(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function G9(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(ct(u===void 0||typeof u=="string"),ln.fromBase64String(u||"")):(ct(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ln.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Z.UNKNOWN:ED(c.code);return new ue(u,c.message||"")}(o);t=new bD(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=K0(n,r.document.name),s=Zc(r.document.updateTime),o=r.document.createTime?Zc(r.document.createTime):me.min(),a=new Di({mapValue:{fields:r.document.fields}}),l=wn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new cv(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=K0(n,r.document),s=r.readTime?Zc(r.readTime):me.min(),o=wn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new cv([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=K0(n,r.document),s=r.removedTargetIds||[];t=new cv([],s,i,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new N9(i,s),a=r.targetId;t=new AD(a,o)}}return t}function q9(n,e){return{documents:[TD(n,e.path)]}}function K9(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=TD(n,i);const s=function(c){if(c.length!==0)return RD(Wi.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:xc(p.field),direction:Q9(p.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=$A(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:t,parent:i}}function X9(n){let e=W9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(r===1);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(f){const p=xD(f);return p instanceof Wi&&aD(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(p=>function(m){return new ey(Rc(m.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,w_(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new Zv(g,p)}(t.startAt));let c=null;return t.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Zv(g,p)}(t.endAt)),p9(e,i,o,s,a,"F",l,c)}function Y9(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xD(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Rc(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Rc(t.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rc(t.unaryFilter.field);return Ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rc(t.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Rc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Wi.create(t.compositeFilter.filters.map(r=>xD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(n):ye()}function Q9(n){return V9[n]}function J9(n){return j9[n]}function Z9(n){return B9[n]}function xc(n){return{fieldPath:n.canonicalString()}}function Rc(n){return In.fromServerFormat(n.fieldPath)}function RD(n){return n instanceof Ot?function(t){if(t.op==="=="){if(N1(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NAN"}};if(L1(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(N1(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NOT_NAN"}};if(L1(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xc(t.field),op:J9(t.op),value:t.value}}}(n):n instanceof Wi?function(t){const r=t.getFilters().map(i=>RD(i));return r.length===1?r[0]:{compositeFilter:{op:Z9(t.op),filters:r}}}(n):ye()}function PD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t,r,i,s=me.min(),o=me.min(),a=ln.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e){this.ht=e}}function tW(n){const e=X9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jA(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(){this.ln=new rW}addToCollectionParentIndex(e,t){return this.ln.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ia.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class rW{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jt(mt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(41943040,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new fh(0)}static Qn(){return new fh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1([n,e],[t,r]){const i=Pe(n,t);return i===0?Pe(e,r):i}class iW{constructor(e){this.Gn=e,this.buffer=new jt(X1),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();X1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sW{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sh(t)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await y_(t)}await this.Yn(3e5)})}}class oW{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(__.oe);const r=new iW(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(K1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K1):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Tc()<=Re.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function aW(n,e){return new oW(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(){this.changes=new ac(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$d(r.mutation,i,Fo.empty(),Yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){const i=ja();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Sd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ja();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=la();const o=Ud(),a=function(){return Ud()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof C_)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),$d(u.mutation,c,u.mutation.getFieldMask(),Yn.now())):o.set(c.key,Fo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var f;return a.set(c,new cW(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Ud();let i=new At((o,a)=>o-a),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Fo.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||Le()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=gD();u.forEach(p=>{if(!s.has(p)){const g=_D(t.get(p),r.get(p));g!==null&&f.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):g9(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):K.resolve(ja());let a=-1,l=s;return o.next(c=>K.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?K.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Le())).next(u=>({batchId:a,changes:w9(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(r=>{let i=Sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Sd();return this.indexManager.getCollectionParents(e,s).next(a=>K.forEach(a,l=>{const c=function(f,p){return new A_(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,wn.newInvalidDocument(u)))});let a=Sd();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&$d(u.mutation,c,Fo.empty(),Yn.now()),S_(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return K.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Zc(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:tW(i.bundledQuery),readTime:Zc(i.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(){this.overlays=new At(de.comparator),this.Er=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ja();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Tt(e,t,s)}),K.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const i=ja(),s=t.length+1,o=new de(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new At((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=ja(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ja(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return K.resolve(a)}Tt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new L9(t,r));let s=this.Er.get(t);s===void 0&&(s=Le(),this.Er.set(t,s)),this.Er.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.dr=new jt(Ht.Ar),this.Rr=new jt(Ht.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Ht(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new de(new mt([])),r=new Ht(t,e),i=new Ht(t,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new de(new mt([])),r=new Ht(t,e),i=new Ht(t,e+1);let s=Le();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ht(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return de.comparator(e.key,t.key)||Pe(e.br,t.br)}static Vr(e,t){return Pe(e.br,t.br)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new jt(Ht.Ar)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new M9(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,t){return K.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Fr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Pe);return t.forEach(i=>{const s=new Ht(i,0),o=new Ht(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),K.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const o=new Ht(new de(s),0);let a=new jt(Pe);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),K.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ct(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return K.forEach(t.mutations,i=>{const s=new Ht(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Ht(t,0),i=this.vr.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e){this.Nr=e,this.docs=function(){return new At(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=la();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wn.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=la();const o=t.path,a=new de(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||q6(G6(u),r)<=0||(i.has(u.key)||S_(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ye()}Lr(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mW(this)}getSize(e){return K.resolve(this.size)}}class mW extends lW{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e){this.persistence=e,this.Br=new ac(t=>NS(t),DS),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.kr=0,this.qr=new jS,this.targetCount=0,this.Qr=fh.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),K.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new fh(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Un(t),K.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.Kr={},this.overlays={},this.$r=new __(0),this.Ur=!1,this.Ur=!0,this.Wr=new fW,this.referenceDelegate=e(this),this.Gr=new vW(this),this.indexManager=new nW,this.remoteDocumentCache=function(i){return new gW(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new eW(t),this.jr=new hW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new pW(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);const i=new yW(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,t){return K.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class yW extends X6{constructor(e){super(),this.currentSequenceNumber=e}}class BS{constructor(e){this.persistence=e,this.Zr=new jS,this.Xr=null}static ei(e){return new BS(e)}get ti(){if(this.Xr)return this.Xr;throw ye()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),K.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.ti,r=>{const i=de.fromPath(r);return this.ni(e,i).next(s=>{s||t.removeEntry(i,me.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return K.or([()=>K.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class ry{constructor(e,t){this.persistence=e,this.ri=new ac(r=>Q6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=aW(this,t)}static ei(e,t){return new ry(e,t)}Hr(){}Jr(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return K.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?K.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(r++,s.removeEntry(o,me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=av(e.data.value)),t}ir(e,t,r){return K.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return K.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=Le(),i=Le();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new US(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return w5()?8:Y6(y5())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new _W;return this.ts(e,t,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>s.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Tc()<=Re.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Cc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),K.resolve()):(Tc()<=Re.DEBUG&&ie("QueryEngine","Query:",Cc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Tc()<=Re.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Cc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(t))):K.resolve())}Xi(e,t){if(V1(t))return K.resolve(null);let r=Vi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=jA(t,null,"F"),r=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Le(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(t,a);return this.ss(t,c,o,l.readTime)?this.Xi(e,jA(t,null,"F")):this.os(e,c,t,l)}))})))}es(e,t,r,i){return V1(t)||i.isEqual(me.min())?K.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(t,s);return this.ss(t,o,r,i)?K.resolve(null):(Tc()<=Re.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cc(t)),this.os(e,o,t,W6(i,-1)).next(a=>a))})}rs(e,t){let r=new jt(fD(e));return t.forEach((i,s)=>{S_(e,s)&&(r=r.add(s))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,t,r){return Tc()<=Re.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Cc(t)),this.Zi.getDocumentsMatchingQuery(e,t,ia.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new At(Pe),this.cs=new ac(s=>NS(s),DS),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uW(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function AW(n,e,t,r){return new EW(n,e,t,r)}async function kD(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Le();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function MD(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function bW(n,e){const t=Ie(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const a=[];e.targetChanges.forEach((u,f)=>{const p=i.get(f);if(!p)return;a.push(t.Gr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(s,u.addedDocuments,f)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(ln.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(f,g),function(v,w,_){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,u)&&a.push(t.Gr.updateTargetData(s,g))});let l=la(),c=Le();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(SW(s,o,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!r.isEqual(me.min())){const u=t.Gr.getLastRemoteSnapshotVersion(s).next(f=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return K.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.us=i,s))}function SW(n,e,t){let r=Le(),i=Le();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=la();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:i}})}function TW(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):t.Gr.allocateTargetId(r).next(o=>(i=new Vo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function HA(n,e,t){const r=Ie(n),i=r.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Sh(o))throw o;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function Y1(n,e,t){const r=Ie(n);let i=me.min(),s=Le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Ie(l),p=f.cs.get(u);return p!==void 0?K.resolve(f.us.get(p)):f.Gr.getTargetData(c,u)}(r,o,Vi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?i:me.min(),t?s:Le())).next(a=>(CW(r,v9(e),a),{documents:a,ds:s})))}function CW(n,e,t){let r=n.ls.get(e)||me.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ls.set(e,r)}class Q1{constructor(){this.activeTargetIds=b9()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xW{constructor(){this._o=new Q1,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Q1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dm=null;function X0(){return dm===null?dm=function(){return 268435456+Math.round(2147483648*Math.random())}():dm++,"0x"+dm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class kW extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(t,r,i,s,o){const a=X0(),l=this.No(t,r.toUriEncodedString());ie("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(t,l,c,i).then(u=>(ie("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw ch("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}ko(t,r,i,s,o,a){return this.Oo(t,r,i,s,o)}Lo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}No(t,r){const i=PW[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){const s=X0();return new Promise((o,a)=>{const l=new JN;l.setWithCredentials(!0),l.listenOnce(ZN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ov.NO_ERROR:const u=l.getResponseJson();ie(fn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case ov.TIMEOUT:ie(fn,`RPC '${e}' ${s} timed out`),a(new ue(Z.DEADLINE_EXCEEDED,"Request time out"));break;case ov.HTTP_ERROR:const f=l.getStatus();if(ie(fn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const m=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(_)>=0?_:Z.UNKNOWN}(g.status);a(new ue(m,g.message))}else a(new ue(Z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ue(Z.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ie(fn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ie(fn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}qo(e,t,r){const i=X0(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nD(),a=tD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ie(fn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,g=!1;const m=new IW({Eo:w=>{g?ie(fn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(p||(ie(fn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),ie(fn,`RPC '${e}' stream ${i} sending:`,w),f.send(w))},Ao:()=>f.close()}),v=(w,_,E)=>{w.listen(_,S=>{try{E(S)}catch(P){setTimeout(()=>{throw P},0)}})};return v(f,bd.EventType.OPEN,()=>{g||(ie(fn,`RPC '${e}' stream ${i} transport opened.`),m.So())}),v(f,bd.EventType.CLOSE,()=>{g||(g=!0,ie(fn,`RPC '${e}' stream ${i} transport closed`),m.Do())}),v(f,bd.EventType.ERROR,w=>{g||(g=!0,ch(fn,`RPC '${e}' stream ${i} transport errored:`,w),m.Do(new ue(Z.UNAVAILABLE,"The operation could not be completed")))}),v(f,bd.EventType.MESSAGE,w=>{var _;if(!g){const E=w.data[0];ct(!!E);const S=E,P=(S==null?void 0:S.error)||((_=S[0])===null||_===void 0?void 0:_.error);if(P){ie(fn,`RPC '${e}' stream ${i} received error:`,P);const O=P.status;let j=function(x){const L=St[x];if(L!==void 0)return ED(L)}(O),C=P.message;j===void 0&&(j=Z.INTERNAL,C="Unknown error status: "+O+" with message "+P.message),g=!0,m.Do(new ue(j,C)),f.close()}else ie(fn,`RPC '${e}' stream ${i} received:`,E),m.vo(E)}}),v(a,eD.STAT_EVENT,w=>{w.stat===LA.PROXY?ie(fn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===LA.NOPROXY&&ie(fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.bo()},0),m}}function Y0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(n){return new U9(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e,t,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new ND(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new ue(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LW extends MW{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=G9(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Zc(o.readTime):me.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=q1(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=VA(l)?{documents:q9(s,l)}:{query:K9(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=z9(s,o.resumeToken);const c=$A(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=$9(s,o.snapshotVersion.toTimestamp());const c=$A(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Y9(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=q1(this.serializer),t.removeTarget=e,this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,zA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(Z.UNKNOWN,s.toString())})}ko(e,t,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,zA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(Z.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class DW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ks(t),this.C_=!1):ie("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{mg(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ie(l);c.k_.add(4),await gg(c),c.K_.set("Unknown"),c.k_.delete(4),await R_(c)}(this))})}),this.K_=new DW(r,i)}}async function R_(n){if(mg(n))for(const e of n.q_)await e(!0)}async function gg(n){for(const e of n.q_)await e(!1)}function DD(n,e){const t=Ie(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),WS(t)?HS(t):Th(t).s_()&&zS(t,e))}function $S(n,e){const t=Ie(n),r=Th(t);t.B_.delete(e),r.s_()&&OD(t,e),t.B_.size===0&&(r.s_()?r.a_():mg(t)&&t.K_.set("Unknown"))}function zS(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Th(n).V_(e)}function OD(n,e){n.U_.xe(e),Th(n).m_(e)}function HS(n){n.U_=new F9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Th(n).start(),n.K_.F_()}function WS(n){return mg(n)&&!Th(n).i_()&&n.B_.size>0}function mg(n){return Ie(n).k_.size===0}function FD(n){n.U_=void 0}async function FW(n){n.K_.set("Online")}async function VW(n){n.B_.forEach((e,t)=>{zS(n,e)})}async function jW(n,e){FD(n),WS(n)?(n.K_.O_(e),HS(n)):n.K_.set("Unknown")}async function BW(n,e,t){if(n.K_.set("Online"),e instanceof bD&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(n,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Z1(n,r)}else if(e instanceof cv?n.U_.$e(e):e instanceof AD?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(me.min()))try{const r=await MD(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.B_.get(c);u&&s.B_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.B_.get(l);if(!u)return;s.B_.set(l,u.withResumeToken(ln.EMPTY_BYTE_STRING,u.snapshotVersion)),OD(s,l);const f=new Vo(u.target,l,c,u.sequenceNumber);zS(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),await Z1(n,r)}}async function Z1(n,e,t){if(!Sh(e))throw e;n.k_.add(1),await gg(n),n.K_.set("Offline"),t||(t=()=>MD(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await R_(n)})}async function eR(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const r=mg(t);t.k_.add(3),await gg(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await R_(t)}async function UW(n,e){const t=Ie(n);e?(t.k_.delete(2),await R_(t)):e||(t.k_.add(2),await gg(t),t.K_.set("Unknown"))}function Th(n){return n.W_||(n.W_=function(t,r,i){const s=Ie(t);return s.b_(),new LW(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:FW.bind(null,n),mo:VW.bind(null,n),po:jW.bind(null,n),R_:BW.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),WS(n)?HS(n):n.K_.set("Unknown")):(await n.W_.stop(),FD(n))})),n.W_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new GS(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function VD(n,e){if(Ks("AsyncQueue",`${e}: ${n}`),Sh(n))return new ue(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{static emptySet(e){return new eu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||de.comparator(t.key,r.key):(t,r)=>de.comparator(t.key,r.key),this.keyedMap=Sd(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new eu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.z_=new At(de.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ye():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ph{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ph(e,t,eu.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&b_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class zW{constructor(){this.queries=nR(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const i=Ie(t),s=i.queries;i.queries=nR(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new ue(Z.ABORTED,"Firestore shutting down"))}}function nR(){return new ac(n=>dD(n),b_)}async function HW(n,e){const t=Ie(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new $W,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await t.onListen(i,!0);break;case 1:s.H_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=VD(o,`Initialization of query '${Cc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&qS(t)}async function WW(n,e){const t=Ie(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function GW(n,e){const t=Ie(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&qS(t)}function qW(n,e,t){const r=Ie(n),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(t);r.queries.delete(e)}function qS(n){n.X_.forEach(e=>{e.next()})}var WA,rR;(rR=WA||(WA={})).na="default",rR.Cache="cache";class KW{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ph(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==WA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.key=e}}class BD{constructor(e){this.key=e}}class XW{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Le(),this.mutatedKeys=Le(),this.Va=fD(e),this.ma=new eu(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new tR,i=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const p=i.get(u),g=S_(this.query,f)?f:null,m=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;p&&g?p.data.isEqual(g.data)?m!==v&&(r.track({type:3,doc:g}),w=!0):this.ya(p,g)||(r.track({type:2,doc:g}),w=!0,(l&&this.Va(g,l)>0||c&&this.Va(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),w=!0):p&&!g&&(r.track({type:1,doc:p}),w=!0,(l||c)&&(a=!0)),w&&(g?(o=o.add(g),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,f)=>function(g,m){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return v(g)-v(m)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=t&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new ph(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new tR,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Le(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new BD(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new jD(r))}),t}va(e){this.da=e.ds,this.Ra=Le();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return ph.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class YW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QW{constructor(e){this.key=e,this.Fa=!1}}class JW{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new ac(a=>dD(a),b_),this.Oa=new Map,this.Na=new Set,this.La=new At(de.comparator),this.Ba=new Map,this.ka=new jS,this.qa={},this.Qa=new Map,this.Ka=fh.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function ZW(n,e,t=!0){const r=WD(n);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await UD(r,e,t,!0),i}async function eG(n,e){const t=WD(n);await UD(t,e,!0,!1)}async function UD(n,e,t,r){const i=await TW(n.localStore,Vi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await tG(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&DD(n.remoteStore,i),a}async function tG(n,e,t,r,i){n.Ua=(f,p,g)=>async function(v,w,_,E){let S=w.view.ga(_);S.ss&&(S=await Y1(v.localStore,w.query,!1).then(({documents:C})=>w.view.ga(C,S)));const P=E&&E.targetChanges.get(w.targetId),O=E&&E.targetMismatches.get(w.targetId)!=null,j=w.view.applyChanges(S,v.isPrimaryClient,P,O);return sR(v,w.targetId,j.ba),j.snapshot}(n,f,p,g);const s=await Y1(n.localStore,e,!0),o=new XW(e,s.ds),a=o.ga(s.documents),l=pg.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);sR(n,t,c.ba);const u=new YW(e,t,o);return n.xa.set(e,u),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),c.snapshot}async function nG(n,e,t){const r=Ie(n),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!b_(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await HA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$S(r.remoteStore,i.targetId),GA(r,i.targetId)}).catch(y_)):(GA(r,i.targetId),await HA(r.localStore,i.targetId,!0))}async function rG(n,e){const t=Ie(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$S(t.remoteStore,r.targetId))}async function $D(n,e){const t=Ie(n);try{const r=await bW(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ba.get(s);o&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?ct(o.Fa):i.removedDocuments.size>0&&(ct(o.Fa),o.Fa=!1))}),await HD(t,r,e)}catch(r){await y_(r)}}function iR(n,e,t){const r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ie(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.J_)p.ea(a)&&(c=!0)}),c&&qS(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iG(n,e,t){const r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new At(de.comparator);o=o.insert(s,wn.newNoDocument(s,me.min()));const a=Le().add(s),l=new x_(me.min(),new Map,new At(Pe),o,a);await $D(r,l),r.La=r.La.remove(s),r.Ba.delete(e),KS(r)}else await HA(r.localStore,e,!1).then(()=>GA(r,e,t)).catch(y_)}function GA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||zD(n,r)})}function zD(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&($S(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),KS(n))}function sR(n,e,t){for(const r of t)r instanceof jD?(n.ka.addReference(r.key,e),sG(n,r)):r instanceof BD?(ie("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||zD(n,r.key)):ye()}function sG(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(ie("SyncEngine","New document in limbo: "+t),n.Na.add(r),KS(n))}function KS(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new de(mt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new QW(t)),n.La=n.La.insert(t,r),DD(n.remoteStore,new Vo(Vi(hD(t.path)),r,"TargetPurposeLimboResolution",__.oe))}}async function HD(n,e,t){const r=Ie(n),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=US.zi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const u=Ie(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(c,p=>K.forEach(p.Wi,g=>u.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>K.forEach(p.Gi,g=>u.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Sh(f))throw f;ie("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=u.us.get(p),m=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(m);u.us=u.us.insert(p,v)}}}(r.localStore,s))}async function oG(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const r=await kD(t.localStore,e);t.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new ue(Z.CANCELLED,o))})}),s.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await HD(t,r.Ts)}}function aG(n,e){const t=Ie(n),r=t.Ba.get(e);if(r&&r.Fa)return Le().add(r.key);{let i=Le();const s=t.Oa.get(e);if(!s)return i;for(const o of s){const a=t.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function WD(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$D.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iG.bind(null,e),e.Ma.R_=GW.bind(null,e.eventManager),e.Ma.Wa=qW.bind(null,e.eventManager),e}class iy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=LD(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return AW(this.persistence,new wW,e.initialUser,this.serializer)}ja(e){return new ID(BS.ei,this.serializer)}za(e){return new xW}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iy.provider={build:()=>new iy};class lG extends iy{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ct(this.persistence.referenceDelegate instanceof ry);const r=this.persistence.referenceDelegate.garbageCollector;return new sW(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new ID(r=>ry.ei(r,t),this.serializer)}}class qA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oG.bind(null,this.syncEngine),await UW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zW}()}createDatastore(e){const t=LD(e.databaseInfo.databaseId),r=function(s){return new kW(s)}(e.databaseInfo);return function(s,o,a,l){return new NW(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new OW(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>iR(this.syncEngine,t,0),function(){return J1.p()?new J1:new RW}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,u){const f=new JW(i,s,o,a,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ie(i);ie("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await gg(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}qA.provider={build:()=>new qA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yn.UNAUTHENTICATED,this.clientId=z6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ie("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=VD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Q0(n,e){n.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await kD(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function oR(n,e){n.asyncQueue.verifyOperationInProgress();const t=await hG(n);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>eR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>eR(e.remoteStore,i)),n._onlineComponents=e}async function hG(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Q0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ch("Error using user provided cache. Falling back to memory cache: "+t),await Q0(n,new iy)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await Q0(n,new lG(void 0));return n._offlineComponents}async function dG(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await oR(n,n._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await oR(n,new qA))),n._onlineComponents}async function fG(n){const e=await dG(n),t=e.eventManager;return t.onListen=ZW.bind(null,e.syncEngine),t.onUnlisten=nG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rG.bind(null,e.syncEngine),t}function pG(n,e,t={}){const r=new jl;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new cG({next:p=>{u.eu(),o.enqueueAndForget(()=>WW(s,f)),p.fromCache&&l.source==="server"?c.reject(new ue(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new KW(a,u,{includeMetadataChanges:!0,ua:!0});return HW(s,f)}(await fG(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Map;function gG(n,e,t,r){if(e===!0&&r===!0)throw new ue(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lR(n){if(de.isDocumentKey(n))throw new ue(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mG(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye()}function KA(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mG(n);throw new ue(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class XS{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cR(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new D6;switch(r.type){case"firstParty":return new j6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=aR.get(t);r&&(ie("ComponentProvider","Removing Datastore"),aR.delete(t),r.terminate())}(this),Promise.resolve()}}function vG(n,e,t,r={}){var i;const s=(n=KA(n,XS))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ch("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yn.MOCK_USER;else{a=jN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ue(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yn(c)}n._authCredentials=new O6(new rD(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new P_(this.firestore,e,this._query)}}class Ch{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ch(this.firestore,e,this._key)}}class tu extends P_{constructor(e,t,r){super(e,t,hD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ch(this.firestore,null,new de(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function yG(n,e,...t){if(n=UN(n),n instanceof XS){const r=mt.fromString(e,...t);return lR(r),new tu(n,null,r)}{if(!(n instanceof Ch||n instanceof tu))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return lR(r),new tu(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new ND(this,"async_queue_retry"),this.fu=()=>{const r=Y0();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Y0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Y0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new jl;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Sh(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ks("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=GS.createAndSchedule(this,e,t,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&ye()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class qD extends XS{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uR,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uR(e),this._firestoreClient=void 0,await e}}}function _G(n,e){const t=typeof n=="object"?n:KN(),r=typeof n=="string"?n:"(default)",i=WN(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=FN("firestore");s&&vG(i,...s)}return i}function wG(n){if(n._terminated)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||EG(n),n._firestoreClient}function EG(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,u){return new t9(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,GD(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new uG(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sy(ln.fromBase64String(e))}catch(t){throw new ue(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sy(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const SG=new RegExp("[~\\*/\\[\\]]");function TG(n,e,t){if(e.search(SG)>=0)throw hR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new KD(...e.split("."))._internalPath}catch{throw hR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function hR(n,e,t,r,i){let s=`Function ${e}() called with invalid data`;s+=". ";let o="";return new ue(Z.INVALID_ARGUMENT,s+n+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ch(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(YD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CG extends XD{data(){return super.data()}}function YD(n,e){return typeof e=="string"?TG(n,e):e instanceof KD?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RG{convertValue(e,t="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fg(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>_t(o.doubleValue));return new bG(s)}convertGeoPoint(e){return new AG(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=E_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mf(e));default:return null}}convertTimestamp(e){const t=sa(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);ct(PD(r));const i=new vf(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(t)||Ks(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PG extends XD{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(YD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class uv extends PG{data(e={}){return super.data(e)}}class IG{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new uv(this._firestore,this._userDataWriter,r.key,r,new fm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new uv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fm(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new uv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fm(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:kG(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}class MG extends RG{constructor(e){super(),this.firestore=e}convertBytes(e){return new sy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ch(this.firestore,null,t)}}function LG(n){n=KA(n,P_);const e=KA(n.firestore,qD),t=wG(e),r=new MG(e);return xG(n._query),pG(t,n._query).then(i=>new IG(e,r,n,i))}(function(e,t=!0){(function(i){bh=i})(GN),ff(new lh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new qD(new F6(r.getProvider("auth-internal")),new U6(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ue(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vf(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Yo(x1,"4.7.5",e),Yo(x1,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="firebasestorage.googleapis.com",NG="storageBucket",DG=2*60*1e3,OG=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends oc{constructor(e,t,r=0){super(J0(e),`Firebase Storage: ${t} (${J0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ki.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return J0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gi||(Gi={}));function J0(n){return"storage/"+n}function FG(){const n="An unknown error occurred, please check the error payload for server response.";return new Ki(Gi.UNKNOWN,n)}function VG(){return new Ki(Gi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jG(){return new Ki(Gi.CANCELED,"User canceled the upload/download.")}function BG(n){return new Ki(Gi.INVALID_URL,"Invalid URL '"+n+"'.")}function UG(n){return new Ki(Gi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function dR(n){return new Ki(Gi.INVALID_ARGUMENT,n)}function JD(){return new Ki(Gi.APP_DELETED,"The Firebase app was deleted.")}function $G(n){return new Ki(Gi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=si.makeFromUrl(e,t)}catch{return new si(e,"")}if(r.path==="")return r;throw UG(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${u}/b/${i}/o${p}`,"i"),m={bucket:1,path:3},v=t===QD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",_=new RegExp(`^https?://${v}/${i}/${w}`,"i"),S=[{regex:a,indices:l,postModify:s},{regex:g,indices:m,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<S.length;P++){const O=S[P],j=O.regex.exec(e);if(j){const C=j[O.indices.bucket];let T=j[O.indices.path];T||(T=""),r=new si(C,T),O.postModify(r);break}}if(r==null)throw BG(e);return r}}class zG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HG(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function f(w){i=setTimeout(()=>{i=null,n(g,l())},w)}function p(){s&&clearTimeout(s)}function g(w,..._){if(c){p();return}if(w){p(),u.call(null,w,..._);return}if(l()||o){p(),u.call(null,w,..._);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let m=!1;function v(w){m||(m=!0,p(),!c&&(i!==null?(w||(a=2),clearTimeout(i),f(0)):w||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,v(!0)},t),v}function WG(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GG(n){return n!==void 0}function fR(n,e,t,r){if(r<e)throw dR(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dR(`Invalid value for '${n}'. Expected ${t} or less.`)}function qG(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var oy;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(oy||(oy={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KG(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(e,t,r,i,s,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,m)=>{this.resolve_=g,this.reject_=m,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new pm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===oy.NO_ERROR,l=s.getStatus();if(!a||KG(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===oy.ABORT;r(!1,new pm(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new pm(c,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());GG(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=FG();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?JD():jG();o(l)}else{const l=VG();o(l)}};this.canceled_?t(!1,new pm(!1,null,!0)):this.backoffId_=HG(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function YG(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function QG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JG(n,e){e&&(n["X-Firebase-GMPID"]=e)}function ZG(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function eq(n,e,t,r,i,s,o=!0){const a=qG(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return JG(c,e),YG(c,t),QG(c,s),ZG(c,r),new XG(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function nq(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){this._service=e,t instanceof si?this._location=t:this._location=si.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ay(e,t)}get root(){const e=new si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nq(this._location.path)}get storage(){return this._service}get parent(){const e=tq(this._location.path);if(e===null)return null;const t=new si(this._location.bucket,e);return new ay(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $G(e)}}function pR(n,e){const t=e==null?void 0:e[NG];return t==null?null:si.makeFromBucketSpec(t,n)}function rq(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:jN(i,n.app.options.projectId))}class iq{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=QD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DG,this._maxUploadRetryTime=OG,this._requests=new Set,i!=null?this._bucket=si.makeFromBucketSpec(i,this._host):this._bucket=pR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=si.makeFromBucketSpec(this._url,e):this._bucket=pR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ay(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new zG(JD());{const o=eq(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const gR="@firebase/storage",mR="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="storage";function sq(n=KN(),e){n=UN(n);const r=WN(n,ZD).getImmediate({identifier:e}),i=FN("storage");return i&&oq(r,...i),r}function oq(n,e,t,r={}){rq(n,e,t,r)}function aq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new iq(t,r,i,e,GN)}function lq(){ff(new lh(ZD,aq,"PUBLIC").setMultipleInstances(!0)),Yo(gR,mR,""),Yo(gR,mR,"esm2017")}lq();const cq={apiKey:"AIzaSyCJH3g_kDzcdTsYyBfYnWN9Vu0NVHQr1Wk",authDomain:"my-portfolio-page-4ceda.firebaseapp.com",projectId:"my-portfolio-page-4ceda",storageBucket:"my-portfolio-page-4ceda.appspot.com",messagingSenderId:"835759719339",appId:"1:835759719339:web:03a12d09572082289608ee",measurementId:"G-V5690YXT75"},eO=qN(cq),uq=_G(eO);sq(eO);function hq(){const[n,e]=A.useState([]);A.useEffect(()=>{ag("/projects","Projects - Adarsh Gella Portfolio"),(async()=>{const a=(await LG(yG(uq,"projects"))).docs.map(l=>l.data());a.sort((l,c)=>l.order-c.order),e(a)})()},[]);const t=s=>{O0(s.name,"github_click",{project_tech:s.tech,project_description:s.description,project_order:s.order,github_url:s.github}),qo("GitHub","projects_page",{project_name:s.name,button_type:"external_link"}),window.open(s.github,"_blank")},r=s=>{O0(s.name,"demo_click",{project_tech:s.tech,project_description:s.description,project_order:s.order,demo_url:s.live}),qo("Live Demo","projects_page",{project_name:s.name,button_type:"external_link"}),window.open(s.live,"_blank")},i=s=>{O0(s.name,"card_view",{project_tech:s.tech,project_description:s.description,project_order:s.order,has_live_demo:!!(s.live&&s.live!=="null")})};return k.jsxs(Os,{direction:"column",className:"works",style:{paddingTop:"0px"},children:[k.jsx(Va,{size:"8",weight:"bold",className:"title",style:{display:"flex",justifyContent:"center",padding:"20px"},children:"My Projects"}),k.jsx(vS,{}),k.jsx(Os,{wrap:"wrap",gap:"4",justify:"center",children:n.map((s,o)=>k.jsxs(oM,{className:"project-card",onMouseEnter:()=>i(s),children:[k.jsx(Va,{weight:"bold",children:s.name}),k.jsx("br",{}),k.jsx(Va,{style:{display:"flex",minHeight:"60px",justifyContent:"center"},children:s.description}),k.jsxs(Va,{size:"1",children:["Tech Stack: ",s.tech]}),k.jsx("br",{}),k.jsxs(Os,{gap:"3",margintop:"2",style:{display:"flex",justifyContent:"center"},children:[k.jsx(oE,{onClick:()=>t(s),children:"GitHub"}),s.live&&s.live!=="null"&&k.jsx(oE,{onClick:()=>r(s),children:"Live Demo"})]})]},o))})]})}const tO=({url:n})=>(window.location.href=n,null);tO.propTypes={url:li.string.isRequired};const nO=({isMobile:n})=>k.jsxs(Nj,{children:[k.jsx(Ra,{path:"/",element:k.jsx(lE,{isMobile:n})}),k.jsx(Ra,{path:"/resume",element:k.jsx(LN,{isMobile:n})}),k.jsx(Ra,{path:"/contact",element:k.jsx(NN,{isMobile:n})}),k.jsx(Ra,{path:"/projects",element:k.jsx(hq,{})}),k.jsx(Ra,{path:"/notepad",element:k.jsx(tO,{url:"https://autosave-notepad.netlify.app/"})}),k.jsx(Ra,{path:"/*",element:k.jsx(lE,{})})]});nO.propTypes={isMobile:li.bool};function rO(n,e=[]){let t=[];function r(s,o){const a=A.createContext(o),l=t.length;t=[...t,o];const c=f=>{var _;const{scope:p,children:g,...m}=f,v=((_=p==null?void 0:p[n])==null?void 0:_[l])||a,w=A.useMemo(()=>m,Object.values(m));return k.jsx(v.Provider,{value:w,children:g})};c.displayName=s+"Provider";function u(f,p){var v;const g=((v=p==null?void 0:p[n])==null?void 0:v[l])||a,m=A.useContext(g);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,dq(i,...e)]}function dq(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var fq="DismissableLayer",XA="dismissableLayer.update",pq="dismissableLayer.pointerDownOutside",gq="dismissableLayer.focusOutside",vR,iO=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sO=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(iO),[u,f]=A.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=A.useState({}),m=xt(e,C=>f(C)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(w),E=u?v.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,P=E>=_,O=yq(C=>{const T=C.target,x=[...c.branches].some(L=>L.contains(T));!P||x||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),j=_q(C=>{const T=C.target;[...c.branches].some(L=>L.contains(T))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return sk(C=>{E===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(vR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),yR(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=vR)}},[u,p,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),yR())},[u,c]),A.useEffect(()=>{const C=()=>g({});return document.addEventListener(XA,C),()=>document.removeEventListener(XA,C)},[]),k.jsx(vt.div,{...l,ref:m,style:{pointerEvents:S?P?"auto":"none":void 0,...n.style},onFocusCapture:he(n.onFocusCapture,j.onFocusCapture),onBlurCapture:he(n.onBlurCapture,j.onBlurCapture),onPointerDownCapture:he(n.onPointerDownCapture,O.onPointerDownCapture)})});sO.displayName=fq;var mq="DismissableLayerBranch",vq=A.forwardRef((n,e)=>{const t=A.useContext(iO),r=A.useRef(null),i=xt(e,r);return A.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),k.jsx(vt.div,{...n,ref:i})});vq.displayName=mq;function yq(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){oO(pq,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function _q(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1);return A.useEffect(()=>{const i=s=>{s.target&&!r.current&&oO(gq,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yR(){const n=new CustomEvent(XA);document.dispatchEvent(n)}function oO(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Qb(i,s):i.dispatchEvent(s)}var Z0=0;function wq(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??_R()),document.body.insertAdjacentElement("beforeend",n[1]??_R()),Z0++,()=>{Z0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Z0--}},[])}function _R(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}function Eq(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var I_=n=>{const{present:e,children:t}=n,r=Aq(e),i=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),s=xt(r.ref,bq(i));return typeof t=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};I_.displayName="Presence";function Aq(n){const[e,t]=A.useState(),r=A.useRef({}),i=A.useRef(n),s=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=Eq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=gm(r.current);s.current=a==="mounted"?c:"none"},[a]),Ui(()=>{const c=r.current,u=i.current;if(u!==n){const p=s.current,g=gm(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Ui(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=g=>{const v=gm(r.current).includes(g.animationName);if(g.target===e&&v&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=g=>{g.target===e&&(s.current=gm(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function gm(n){return(n==null?void 0:n.animationName)||"none"}function bq(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var hv="right-scroll-bar-position",dv="width-before-scroll-bar",Sq="with-scroll-bars-hidden",Tq="--removed-body-scroll-bar-size",aO=_B(),ew=function(){},k_=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:ew,onWheelCapture:ew,onTouchMoveCapture:ew}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,f=n.shards,p=n.sideCar,g=n.noIsolation,m=n.inert,v=n.allowPinchZoom,w=n.as,_=w===void 0?"div":w,E=n.gapMode,S=dk(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=p,O=mB([t,e]),j=Ni(Ni({},S),i);return A.createElement(A.Fragment,null,u&&A.createElement(P,{sideCar:aO,removeScrollBar:c,shards:f,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:t,gapMode:E}),o?A.cloneElement(A.Children.only(a),Ni(Ni({},j),{ref:O})):A.createElement(_,Ni({},j,{className:l,ref:O}),a))});k_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};k_.classNames={fullWidth:dv,zeroRight:hv};var Cq={left:0,top:0,right:0,gap:0},tw=function(n){return parseInt(n||"",10)||0},xq=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[tw(t),tw(r),tw(i)]},Rq=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Cq;var e=xq(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},Pq=pk(),nu="data-scroll-locked",Iq=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Sq,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(nu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(hv," .").concat(hv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dv," .").concat(dv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(nu,`] {
    `).concat(Tq,": ").concat(a,`px;
  }
`)},wR=function(){var n=parseInt(document.body.getAttribute(nu)||"0",10);return isFinite(n)?n:0},kq=function(){A.useEffect(function(){return document.body.setAttribute(nu,(wR()+1).toString()),function(){var n=wR()-1;n<=0?document.body.removeAttribute(nu):document.body.setAttribute(nu,n.toString())}},[])},Mq=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;kq();var s=A.useMemo(function(){return Rq(i)},[i]);return A.createElement(Pq,{styles:Iq(s,!e,i,t?"":"!important")})},YA=!1;if(typeof window<"u")try{var mm=Object.defineProperty({},"passive",{get:function(){return YA=!0,!0}});window.addEventListener("test",mm,mm),window.removeEventListener("test",mm,mm)}catch{YA=!1}var vc=YA?{passive:!1}:!1,Lq=function(n){return n.tagName==="TEXTAREA"},lO=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Lq(n)&&t[e]==="visible")},Nq=function(n){return lO(n,"overflowY")},Dq=function(n){return lO(n,"overflowX")},ER=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=cO(n,r);if(i){var s=uO(n,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Oq=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},Fq=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},cO=function(n,e){return n==="v"?Nq(e):Dq(e)},uO=function(n,e){return n==="v"?Oq(e):Fq(e)},Vq=function(n,e){return n==="h"&&e==="rtl"?-1:1},jq=function(n,e,t,r,i){var s=Vq(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,l=e.contains(a),c=!1,u=o>0,f=0,p=0;do{var g=uO(n,a),m=g[0],v=g[1],w=g[2],_=v-w-s*m;(m||_)&&cO(n,a)&&(f+=_,p+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(f)<1||!i)||!u&&(Math.abs(p)<1||!i))&&(c=!0),c},vm=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},AR=function(n){return[n.deltaX,n.deltaY]},bR=function(n){return n&&"current"in n?n.current:n},Bq=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Uq=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},$q=0,yc=[];function zq(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),i=A.useState($q++)[0],s=A.useState(pk)[0],o=A.useRef(n);A.useEffect(function(){o.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var v=fB([n.lockRef.current],(n.shards||[]).map(bR),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=A.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var _=vm(v),E=t.current,S="deltaX"in v?v.deltaX:E[0]-_[0],P="deltaY"in v?v.deltaY:E[1]-_[1],O,j=v.target,C=Math.abs(S)>Math.abs(P)?"h":"v";if("touches"in v&&C==="h"&&j.type==="range")return!1;var T=ER(C,j);if(!T)return!0;if(T?O=C:(O=C==="v"?"h":"v",T=ER(C,j)),!T)return!1;if(!r.current&&"changedTouches"in v&&(S||P)&&(r.current=O),!O)return!0;var x=r.current||O;return jq(x,w,v,x==="h"?S:P,!0)},[]),l=A.useCallback(function(v){var w=v;if(!(!yc.length||yc[yc.length-1]!==s)){var _="deltaY"in w?AR(w):vm(w),E=e.current.filter(function(O){return O.name===w.type&&(O.target===w.target||w.target===O.shadowParent)&&Bq(O.delta,_)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var S=(o.current.shards||[]).map(bR).filter(Boolean).filter(function(O){return O.contains(w.target)}),P=S.length>0?a(w,S[0]):!o.current.noIsolation;P&&w.cancelable&&w.preventDefault()}}},[]),c=A.useCallback(function(v,w,_,E){var S={name:v,delta:w,target:_,should:E,shadowParent:Hq(_)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(P){return P!==S})},1)},[]),u=A.useCallback(function(v){t.current=vm(v),r.current=void 0},[]),f=A.useCallback(function(v){c(v.type,AR(v),v.target,a(v,n.lockRef.current))},[]),p=A.useCallback(function(v){c(v.type,vm(v),v.target,a(v,n.lockRef.current))},[]);A.useEffect(function(){return yc.push(s),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,vc),document.addEventListener("touchmove",l,vc),document.addEventListener("touchstart",u,vc),function(){yc=yc.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,vc),document.removeEventListener("touchmove",l,vc),document.removeEventListener("touchstart",u,vc)}},[]);var g=n.removeScrollBar,m=n.inert;return A.createElement(A.Fragment,null,m?A.createElement(s,{styles:Uq(i)}):null,g?A.createElement(Mq,{gapMode:n.gapMode}):null)}function Hq(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Wq=wB(aO,zq);var hO=A.forwardRef(function(n,e){return A.createElement(k_,Ni({},n,{ref:e,sideCar:Wq}))});hO.classNames=k_.classNames;var QA=["Enter"," "],Gq=["ArrowDown","PageUp","Home"],dO=["ArrowUp","PageDown","End"],qq=[...Gq,...dO],Kq={ltr:[...QA,"ArrowRight"],rtl:[...QA,"ArrowLeft"]},Xq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},vg="Menu",[_f,Yq,Qq]=mS(vg),[lc,Jq]=rO(vg,[Qq,Zy,r_]),M_=Zy(),fO=r_(),[Zq,xh]=lc(vg),[e8,yg]=lc(vg),pO=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=n,a=M_(e),[l,c]=A.useState(null),u=A.useRef(!1),f=Qn(s),p=fS(i);return A.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),k.jsx(Q4,{...a,children:k.jsx(Zq,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:c,children:k.jsx(e8,{scope:e,onClose:A.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:p,modal:o,children:r})})})};pO.displayName=vg;var t8="MenuAnchor",YS=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=M_(t);return k.jsx(Bk,{...i,...r,ref:e})});YS.displayName=t8;var n8="MenuPortal",[DK,gO]=lc(n8,{forceMount:void 0}),Dr="MenuContent",[r8,QS]=lc(Dr),mO=A.forwardRef((n,e)=>{const t=gO(Dr,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=xh(Dr,n.__scopeMenu),o=yg(Dr,n.__scopeMenu);return k.jsx(_f.Provider,{scope:n.__scopeMenu,children:k.jsx(I_,{present:r||s.open,children:k.jsx(_f.Slot,{scope:n.__scopeMenu,children:o.modal?k.jsx(i8,{...i,ref:e}):k.jsx(s8,{...i,ref:e})})})})}),i8=A.forwardRef((n,e)=>{const t=xh(Dr,n.__scopeMenu),r=A.useRef(null),i=xt(e,r);return A.useEffect(()=>{const s=r.current;if(s)return IB(s)},[]),k.jsx(JS,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:he(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),s8=A.forwardRef((n,e)=>{const t=xh(Dr,n.__scopeMenu);return k.jsx(JS,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),JS=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:g,disableOutsideScroll:m,...v}=n,w=xh(Dr,t),_=yg(Dr,t),E=M_(t),S=fO(t),P=Yq(t),[O,j]=A.useState(null),C=A.useRef(null),T=xt(e,C,w.onContentChange),x=A.useRef(0),L=A.useRef(""),F=A.useRef(0),V=A.useRef(null),D=A.useRef("right"),z=A.useRef(0),$=m?hO:A.Fragment,W=m?{as:Vr,allowPinchZoom:!0}:void 0,U=H=>{var ce,Je;const X=L.current+H,ne=P().filter(Ze=>!Ze.disabled),J=document.activeElement,re=(ce=ne.find(Ze=>Ze.ref.current===J))==null?void 0:ce.textValue,ge=ne.map(Ze=>Ze.textValue),Fe=v8(ge,X,re),be=(Je=ne.find(Ze=>Ze.textValue===Fe))==null?void 0:Je.ref.current;(function Ze(ke){L.current=ke,window.clearTimeout(x.current),ke!==""&&(x.current=window.setTimeout(()=>Ze(""),1e3))})(X),be&&setTimeout(()=>be.focus())};A.useEffect(()=>()=>window.clearTimeout(x.current),[]),wq();const B=A.useCallback(H=>{var ne,J;return D.current===((ne=V.current)==null?void 0:ne.side)&&_8(H,(J=V.current)==null?void 0:J.area)},[]);return k.jsx(r8,{scope:t,searchRef:L,onItemEnter:A.useCallback(H=>{B(H)&&H.preventDefault()},[B]),onItemLeave:A.useCallback(H=>{var X;B(H)||((X=C.current)==null||X.focus(),j(null))},[B]),onTriggerLeave:A.useCallback(H=>{B(H)&&H.preventDefault()},[B]),pointerGraceTimerRef:F,onPointerGraceIntentChange:A.useCallback(H=>{V.current=H},[]),children:k.jsx($,{...W,children:k.jsx(ck,{asChild:!0,trapped:i,onMountAutoFocus:he(s,H=>{var X;H.preventDefault(),(X=C.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:k.jsx(sO,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:g,children:k.jsx(dM,{asChild:!0,...S,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:j,onEntryFocus:he(l,H=>{_.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:k.jsx(Uk,{role:"menu","aria-orientation":"vertical","data-state":MO(w.open),"data-radix-menu-content":"",dir:_.dir,...E,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:he(v.onKeyDown,H=>{const ne=H.target.closest("[data-radix-menu-content]")===H.currentTarget,J=H.ctrlKey||H.altKey||H.metaKey,re=H.key.length===1;ne&&(H.key==="Tab"&&H.preventDefault(),!J&&re&&U(H.key));const ge=C.current;if(H.target!==ge||!qq.includes(H.key))return;H.preventDefault();const be=P().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);dO.includes(H.key)&&be.reverse(),g8(be)}),onBlur:he(n.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(x.current),L.current="")}),onPointerMove:he(n.onPointerMove,wf(H=>{const X=H.target,ne=z.current!==H.clientX;if(H.currentTarget.contains(X)&&ne){const J=H.clientX>z.current?"right":"left";D.current=J,z.current=H.clientX}}))})})})})})})});mO.displayName=Dr;var o8="MenuGroup",ZS=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return k.jsx(vt.div,{role:"group",...r,ref:e})});ZS.displayName=o8;var a8="MenuLabel",vO=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return k.jsx(vt.div,{...r,ref:e})});vO.displayName=a8;var ly="MenuItem",SR="menu.itemSelect",L_=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=A.useRef(null),o=yg(ly,n.__scopeMenu),a=QS(ly,n.__scopeMenu),l=xt(e,s),c=A.useRef(!1),u=()=>{const f=s.current;if(!t&&f){const p=new CustomEvent(SR,{bubbles:!0,cancelable:!0});f.addEventListener(SR,g=>r==null?void 0:r(g),{once:!0}),Qb(f,p),p.defaultPrevented?c.current=!1:o.onClose()}};return k.jsx(yO,{...i,ref:l,disabled:t,onClick:he(n.onClick,u),onPointerDown:f=>{var p;(p=n.onPointerDown)==null||p.call(n,f),c.current=!0},onPointerUp:he(n.onPointerUp,f=>{var p;c.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:he(n.onKeyDown,f=>{const p=a.searchRef.current!=="";t||p&&f.key===" "||QA.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});L_.displayName=ly;var yO=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,o=QS(ly,t),a=fO(t),l=A.useRef(null),c=xt(e,l),[u,f]=A.useState(!1),[p,g]=A.useState("");return A.useEffect(()=>{const m=l.current;m&&g((m.textContent??"").trim())},[s.children]),k.jsx(_f.ItemSlot,{scope:t,disabled:r,textValue:i??p,children:k.jsx(fM,{asChild:!0,...a,focusable:!r,children:k.jsx(vt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:he(n.onPointerMove,wf(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:he(n.onPointerLeave,wf(m=>o.onItemLeave(m))),onFocus:he(n.onFocus,()=>f(!0)),onBlur:he(n.onBlur,()=>f(!1))})})})}),l8="MenuCheckboxItem",_O=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return k.jsx(SO,{scope:n.__scopeMenu,checked:t,children:k.jsx(L_,{role:"menuitemcheckbox","aria-checked":cy(t)?"mixed":t,...i,ref:e,"data-state":tT(t),onSelect:he(i.onSelect,()=>r==null?void 0:r(cy(t)?!0:!t),{checkForDefaultPrevented:!1})})})});_O.displayName=l8;var wO="MenuRadioGroup",[c8,u8]=lc(wO,{value:void 0,onValueChange:()=>{}}),EO=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=Qn(r);return k.jsx(c8,{scope:n.__scopeMenu,value:t,onValueChange:s,children:k.jsx(ZS,{...i,ref:e})})});EO.displayName=wO;var AO="MenuRadioItem",bO=A.forwardRef((n,e)=>{const{value:t,...r}=n,i=u8(AO,n.__scopeMenu),s=t===i.value;return k.jsx(SO,{scope:n.__scopeMenu,checked:s,children:k.jsx(L_,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":tT(s),onSelect:he(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,t)},{checkForDefaultPrevented:!1})})})});bO.displayName=AO;var eT="MenuItemIndicator",[SO,h8]=lc(eT,{checked:!1}),TO=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=h8(eT,t);return k.jsx(I_,{present:r||cy(s.checked)||s.checked===!0,children:k.jsx(vt.span,{...i,ref:e,"data-state":tT(s.checked)})})});TO.displayName=eT;var d8="MenuSeparator",CO=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return k.jsx(vt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});CO.displayName=d8;var f8="MenuArrow",xO=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=M_(t);return k.jsx($k,{...i,...r,ref:e})});xO.displayName=f8;var p8="MenuSub",[OK,RO]=lc(p8),Cd="MenuSubTrigger",PO=A.forwardRef((n,e)=>{const t=xh(Cd,n.__scopeMenu),r=yg(Cd,n.__scopeMenu),i=RO(Cd,n.__scopeMenu),s=QS(Cd,n.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:n.__scopeMenu},u=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>u,[u]),A.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),k.jsx(YS,{asChild:!0,...c,children:k.jsx(yO,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":MO(t.open),...n,ref:Yb(e,i.onTriggerChange),onClick:f=>{var p;(p=n.onClick)==null||p.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:he(n.onPointerMove,wf(f=>{s.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:he(n.onPointerLeave,wf(f=>{var g,m;u();const p=(g=t.content)==null?void 0:g.getBoundingClientRect();if(p){const v=(m=t.content)==null?void 0:m.dataset.side,w=v==="right",_=w?-5:5,E=p[w?"left":"right"],S=p[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:E,y:p.top},{x:S,y:p.top},{x:S,y:p.bottom},{x:E,y:p.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:he(n.onKeyDown,f=>{var g;const p=s.searchRef.current!=="";n.disabled||p&&f.key===" "||Kq[r.dir].includes(f.key)&&(t.onOpenChange(!0),(g=t.content)==null||g.focus(),f.preventDefault())})})})});PO.displayName=Cd;var IO="MenuSubContent",kO=A.forwardRef((n,e)=>{const t=gO(Dr,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=xh(Dr,n.__scopeMenu),o=yg(Dr,n.__scopeMenu),a=RO(IO,n.__scopeMenu),l=A.useRef(null),c=xt(e,l);return k.jsx(_f.Provider,{scope:n.__scopeMenu,children:k.jsx(I_,{present:r||s.open,children:k.jsx(_f.Slot,{scope:n.__scopeMenu,children:k.jsx(JS,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:he(n.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:he(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:he(n.onKeyDown,u=>{var g;const f=u.currentTarget.contains(u.target),p=Xq[o.dir].includes(u.key);f&&p&&(s.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});kO.displayName=IO;function MO(n){return n?"open":"closed"}function cy(n){return n==="indeterminate"}function tT(n){return cy(n)?"indeterminate":n?"checked":"unchecked"}function g8(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function m8(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function v8(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=m8(n,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function y8(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function _8(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return y8(t,e)}function wf(n){return e=>e.pointerType==="mouse"?n(e):void 0}var w8=pO,E8=YS,A8=mO,b8=ZS,S8=vO,T8=L_,C8=_O,x8=EO,R8=bO,P8=TO,I8=CO,k8=xO,M8=PO,L8=kO,N_="Menubar",[JA,N8,D8]=mS(N_),[LO,FK]=rO(N_,[D8,r_]),Jn=Jq(),NO=r_(),[O8,nT]=LO(N_),DO=A.forwardRef((n,e)=>{const{__scopeMenubar:t,value:r,onValueChange:i,defaultValue:s,loop:o=!0,dir:a,...l}=n,c=fS(a),u=NO(t),[f="",p]=ik({prop:r,onChange:i,defaultProp:s}),[g,m]=A.useState(null);return k.jsx(O8,{scope:t,value:f,onMenuOpen:A.useCallback(v=>{p(v),m(v)},[p]),onMenuClose:A.useCallback(()=>p(""),[p]),onMenuToggle:A.useCallback(v=>{p(w=>w?"":v),m(v)},[p]),dir:c,loop:o,children:k.jsx(JA.Provider,{scope:t,children:k.jsx(JA.Slot,{scope:t,children:k.jsx(dM,{asChild:!0,...u,orientation:"horizontal",loop:o,dir:c,currentTabStopId:g,onCurrentTabStopIdChange:m,children:k.jsx(vt.div,{role:"menubar",...l,ref:e})})})})})});DO.displayName=N_;var rT="MenubarMenu",[F8,OO]=LO(rT),FO=n=>{const{__scopeMenubar:e,value:t,...r}=n,i=km(),s=t||i||"LEGACY_REACT_AUTO_VALUE",o=nT(rT,e),a=Jn(e),l=A.useRef(null),c=A.useRef(!1),u=o.value===s;return A.useEffect(()=>{u||(c.current=!1)},[u]),k.jsx(F8,{scope:e,value:s,triggerId:km(),triggerRef:l,contentId:km(),wasKeyboardTriggerOpenRef:c,children:k.jsx(w8,{...a,open:u,onOpenChange:f=>{f||o.onMenuClose()},modal:!1,dir:o.dir,...r})})};FO.displayName=rT;var ZA="MenubarTrigger",VO=A.forwardRef((n,e)=>{const{__scopeMenubar:t,disabled:r=!1,...i}=n,s=NO(t),o=Jn(t),a=nT(ZA,t),l=OO(ZA,t),c=A.useRef(null),u=xt(e,c,l.triggerRef),[f,p]=A.useState(!1),g=a.value===l.value;return k.jsx(JA.ItemSlot,{scope:t,value:l.value,disabled:r,children:k.jsx(fM,{asChild:!0,...s,focusable:!r,tabStopId:l.value,children:k.jsx(E8,{asChild:!0,...o,children:k.jsx(vt.button,{type:"button",role:"menuitem",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":g,"aria-controls":g?l.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":g?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:u,onPointerDown:he(n.onPointerDown,m=>{!r&&m.button===0&&m.ctrlKey===!1&&(a.onMenuOpen(l.value),g||m.preventDefault())}),onPointerEnter:he(n.onPointerEnter,()=>{var v;!!a.value&&!g&&(a.onMenuOpen(l.value),(v=c.current)==null||v.focus())}),onKeyDown:he(n.onKeyDown,m=>{r||(["Enter"," "].includes(m.key)&&a.onMenuToggle(l.value),m.key==="ArrowDown"&&a.onMenuOpen(l.value),["Enter"," ","ArrowDown"].includes(m.key)&&(l.wasKeyboardTriggerOpenRef.current=!0,m.preventDefault()))}),onFocus:he(n.onFocus,()=>p(!0)),onBlur:he(n.onBlur,()=>p(!1))})})})})});VO.displayName=ZA;var eb="MenubarContent",V8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,align:r="start",...i}=n,s=Jn(t),o=nT(eb,t),a=OO(eb,t),l=N8(t),c=A.useRef(!1);return k.jsx(A8,{id:a.contentId,"aria-labelledby":a.triggerId,"data-radix-menubar-content":"",...s,...i,ref:e,align:r,onCloseAutoFocus:he(n.onCloseAutoFocus,u=>{var p;!!!o.value&&!c.current&&((p=a.triggerRef.current)==null||p.focus()),c.current=!1,u.preventDefault()}),onFocusOutside:he(n.onFocusOutside,u=>{const f=u.target;l().some(g=>{var m;return(m=g.ref.current)==null?void 0:m.contains(f)})&&u.preventDefault()}),onInteractOutside:he(n.onInteractOutside,()=>{c.current=!0}),onEntryFocus:u=>{a.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:he(n.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const f=u.target,p=f.hasAttribute("data-radix-menubar-subtrigger"),g=f.closest("[data-radix-menubar-content]")!==u.currentTarget,v=(o.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!v&&p||g&&v)return;let E=l().filter(O=>!O.disabled).map(O=>O.value);v&&E.reverse();const S=E.indexOf(a.value);E=o.loop?aK(E,S+1):E.slice(S+1);const[P]=E;P&&o.onMenuOpen(P)}},{checkForDefaultPrevented:!1}),style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});V8.displayName=eb;var j8="MenubarGroup",B8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(b8,{...i,...r,ref:e})});B8.displayName=j8;var U8="MenubarLabel",$8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(S8,{...i,...r,ref:e})});$8.displayName=U8;var z8="MenubarItem",H8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(T8,{...i,...r,ref:e})});H8.displayName=z8;var W8="MenubarCheckboxItem",G8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(C8,{...i,...r,ref:e})});G8.displayName=W8;var q8="MenubarRadioGroup",K8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(x8,{...i,...r,ref:e})});K8.displayName=q8;var X8="MenubarRadioItem",Y8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(R8,{...i,...r,ref:e})});Y8.displayName=X8;var Q8="MenubarItemIndicator",J8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(P8,{...i,...r,ref:e})});J8.displayName=Q8;var Z8="MenubarSeparator",eK=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(I8,{...i,...r,ref:e})});eK.displayName=Z8;var tK="MenubarArrow",nK=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(k8,{...i,...r,ref:e})});nK.displayName=tK;var rK="MenubarSubTrigger",iK=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(M8,{"data-radix-menubar-subtrigger":"",...i,...r,ref:e})});iK.displayName=rK;var sK="MenubarSubContent",oK=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,i=Jn(t);return k.jsx(L8,{...i,"data-radix-menubar-content":"",...r,ref:e,style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});oK.displayName=sK;function aK(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var TR=DO,CR=FO,gi=VO;const lK="/assets/my_dp-CLCiIRTc.png",jO="/assets/light-mode2-CXNY-Y5o.png",BO="/assets/dark-mode-DCiUdDtp.png",cK="/assets/hamburger-Dk39ClP9.png",uK="/assets/close-WHyibIIa.png";function UO({appearance:n,toggleAppearance:e,isMobile:t}){const r=_j(),i=Xy(),[s,o]=A.useState(!1),a=m=>i.pathname===m,l=n==="dark",c=(m,v)=>{Ux(i.pathname,m,"navbar_click"),qo(v,"navbar"),r(m),t&&o(!1)},u=(m,v)=>{qo(v,"navbar",{external_url:m,link_type:"external"}),Lm("external_link_click",v,{url:m}),window.open(m,"_blank")},f=()=>{const m=l?"light":"dark";Lm("theme_toggle",`${n}_to_${m}`,{from_theme:n,to_theme:m,device_type:t?"mobile":"desktop"}),e(m)},p=m=>{Lm("mobile_menu",m),o(m==="open")},g=()=>{Ux(i.pathname,"/","avatar_click"),qo("Avatar/Logo","navbar"),r("/")};return k.jsxs("div",{className:`navbar ${t?"mweb":""}`,children:[t&&k.jsx("img",{src:cK,alt:"open Menu",className:"mweb_menu",onClick:()=>p("open")}),t&&s&&k.jsxs("div",{className:"mobileMenu",children:[k.jsx("img",{src:uK,alt:"Close Menu",className:"closeMenu",onClick:()=>p("close")}),k.jsx(TR,{className:"MenubarRoot",children:k.jsxs(CR,{children:[k.jsx(gi,{className:`MenubarTrigger ${a("/")?"active":""}`,onClick:()=>c("/","Home"),children:"Home"}),k.jsx(gi,{className:`MenubarTrigger ${a("/resume")?"active":""}`,onClick:()=>c("/resume","Resume"),children:"Resume"}),k.jsx(gi,{className:`MenubarTrigger ${a("/projects")?"active":""}`,onClick:()=>c("/projects","Projects"),children:"Projects"}),k.jsx(gi,{className:"MenubarTrigger",onClick:()=>u("https://www.youtube.com/@g_adarsh_sonu","YouTube"),children:"YouTube"}),k.jsx(gi,{className:`MenubarTrigger ${a("/contact")?"active":""}`,onClick:()=>c("/contact","Contact"),children:"Contact"})]})})]}),k.jsx("div",{className:"avatar",children:k.jsx(TU,{className:"AvatarRoot",onClick:g,children:k.jsx(CU,{className:"AvatarImage",src:lK,alt:"G Adarsh Sonu"})})}),!t&&k.jsx("div",{className:"menu",children:k.jsx(TR,{className:"MenubarRoot",children:k.jsxs(CR,{children:[k.jsx(gi,{className:`MenubarTrigger ${a("/")?"active":""}`,onClick:()=>c("/","Home"),children:"Home"}),"|",k.jsx(gi,{className:`MenubarTrigger ${a("/resume")?"active":""}`,onClick:()=>c("/resume","Resume"),children:"Resume"}),"|",k.jsx(gi,{className:`MenubarTrigger ${a("/projects")?"active":""}`,onClick:()=>c("/projects","Projects"),children:"Projects"}),"|",k.jsx(gi,{className:"MenubarTrigger",onClick:()=>u("https://www.youtube.com/@g_adarsh_sonu","YouTube"),children:"Youtube"}),"|",k.jsx(gi,{className:`MenubarTrigger ${a("/contact")?"active":""}`,onClick:()=>c("/contact","Contact"),children:"Contact"})]})})}),i.pathname==="/"||t?null:k.jsx(k.Fragment,{children:k.jsx("div",{className:"toggleAppearance",onClick:f,children:k.jsx("div",{className:`themeToggleSwitch ${l?"dark":"light"}`,children:k.jsx("img",{src:l?BO:jO,alt:l?"Dark Mode":"Light Mode",className:"themeIcon"})})})})]})}UO.propTypes={appearance:li.string,toggleAppearance:li.func,isMobile:li.bool};const xR="https://personal-chatbot-q2wp.onrender.com",hK=1e4,RR=5e3,nw=3;class dK{constructor(){this.isWakingUp=!1,this.wakeupPromise=null,this.retryCount=0}async wakeupChatbot(){if(this.isWakingUp)return this.wakeupPromise;this.isWakingUp=!0,console.log("🤖 Waking up AI chatbot service..."),this.wakeupPromise=this.performWakeup();try{return await this.wakeupPromise}finally{this.isWakingUp=!1,this.wakeupPromise=null}}async performWakeup(){for(let e=1;e<=nw;e++){try{console.log(`🔄 Chatbot wakeup attempt ${e}/${nw}`);const t=new AbortController,r=setTimeout(()=>t.abort(),hK),i=await fetch(xR,{method:"GET",signal:t.signal,headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","User-Agent":"Portfolio-Wakeup-Service/1.0"}});if(clearTimeout(r),i.ok||i.status===404)return console.log("✅ Chatbot service is awake and ready!"),this.retryCount=0,!0;console.log(`⚠️ Chatbot wakeup attempt ${e} returned status: ${i.status}`)}catch(t){t.name==="AbortError"?console.log(`⏱️ Chatbot wakeup attempt ${e} timed out`):console.log(`❌ Chatbot wakeup attempt ${e} failed:`,t.message)}e<nw&&(console.log(`⏳ Waiting ${RR/1e3}s before retry...`),await this.delay(RR))}return console.log("❌ Failed to wake up chatbot after all attempts"),!1}async checkChatbotStatus(){try{const e=new AbortController,t=setTimeout(()=>e.abort(),3e3),r=await fetch(xR,{method:"HEAD",signal:e.signal});return clearTimeout(t),r.ok||r.status===404}catch{return!1}}async smartWakeup(){return await this.checkChatbotStatus()?(console.log("✅ Chatbot is already awake!"),!0):this.wakeupChatbot()}delay(e){return new Promise(t=>setTimeout(t,e))}wakeupInBackground(){this.smartWakeup().catch(e=>{console.log("Background chatbot wakeup failed:",e.message)})}}const iT=new dK,fK=()=>{if(localStorage.getItem("disableChatbotWakeup")==="true"){console.log("🔇 Chatbot wakeup disabled by user preference");return}console.log("🚀 Initializing chatbot wakeup service..."),iT.wakeupInBackground()},pK=()=>iT.smartWakeup(),$O=()=>iT.isWakingUp,gK=()=>{const[n,e]=A.useState(!1),[t,r]=A.useState(null);return A.useEffect(()=>{let i;const s=()=>{const o=$O();o!==n&&(e(o),!o&&n&&r(new Date))};return n?i=setInterval(s,1e3):i=setInterval(s,5e3),s(),()=>{i&&clearInterval(i)}},[n]),{isWakingUp:n,lastWakeupTime:t,isRecentlyWokenUp:t&&Date.now()-t.getTime()<6e4}},mK=()=>{const{isWakingUp:n,isRecentlyWokenUp:e}=gK();return!n&&!e?null:k.jsxs("div",{className:"wakeup-status",children:[n&&k.jsxs("div",{className:"wakeup-indicator waking",children:[k.jsx("div",{className:"wakeup-spinner"}),k.jsx("span",{children:"Waking up AI assistant..."})]}),e&&!n&&k.jsxs("div",{className:"wakeup-indicator ready",children:[k.jsx("div",{className:"ready-icon",children:"✅"}),k.jsx("span",{children:"AI assistant is ready!"})]})]})},vK=()=>{const[n,e]=A.useState(!1),[t,r]=A.useState(!1),[i,s]=A.useState([{id:1,text:"Hi! I'm Adarsh's AI assistant. Ask me about his skills, projects, or experience! 👋",isBot:!0,timestamp:new Date}]),[o,a]=A.useState(""),[l,c]=A.useState(!1),[u,f]=A.useState(!1),[p,g]=A.useState(window.innerWidth<=736),m=A.useRef(null),v=A.useRef(null),w=A.useRef(null),_=A.useRef(null);A.useEffect(()=>{const V=()=>{g(window.innerWidth<=736)};return window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V),w.current&&clearTimeout(w.current)}},[]),A.useEffect(()=>{const V=setTimeout(()=>{!n&&!t&&r(!0)},3e3);return()=>clearTimeout(V)},[n,t]),A.useEffect(()=>{E()},[i]);const E=()=>{setTimeout(()=>{var V;(V=m.current)==null||V.scrollIntoView({behavior:"smooth"})},100)},S=()=>{const V=n;e(!n),Zh(V?"close":"open"),t&&r(!1),!n&&!$O()&&pK().then(D=>{console.log(D?"💬 Chatbot is ready for conversation!":"⚠️ Chatbot wakeup failed, but you can still try chatting")}),n||setTimeout(()=>{var D;(D=v.current)==null||D.focus()},100)},P=(V,D)=>{const z={id:Date.now(),text:V,isBot:D==="bot",timestamp:new Date};s($=>[...$,z]),!n&&D==="bot"&&r(!0)},O=()=>{c(!0)},j=()=>{c(!1)},C=()=>{f(!0)},T=()=>{f(!1)},x=async()=>{const V=o.trim();if(!(V===""||l||u)){Zh("message_sent",V),_.current=Date.now(),P(V,"user"),a(""),O(),w.current=setTimeout(()=>{l&&(j(),C())},3e3);try{const z=await(await fetch("https://personal-chatbot-q2wp.onrender.com/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:V})})).json(),$=_.current?Date.now()-_.current:null;w.current&&clearTimeout(w.current),j(),T(),P(z.response,"bot"),Zh("response_received",z.response,$)}catch(D){console.error("Error:",D),w.current&&clearTimeout(w.current),j(),T(),P("Sorry, I'm having trouble connecting. Please try again!","bot"),Zh("error",D.message)}}},L=V=>{l||u||(Zh("quick_action",V),qo(`Quick: ${V}`,"chatbot_widget"),a(V),setTimeout(()=>{x()},100))},F=V=>{V.key==="Enter"&&!l&&!u&&x()};return k.jsxs("div",{className:"adarsh-chat-widget",children:[k.jsxs("button",{className:"chat-toggle",onClick:S,children:[k.jsx("span",{children:n?"×":"💬"}),t&&!n&&k.jsx("div",{className:"notification-badge",children:"1"})]}),k.jsxs("div",{className:`chat-modal ${n?"open":""}`,children:[k.jsxs("div",{className:"chat-header",children:[k.jsx("div",{className:"portfolio-badge",children:"AI Assistant"}),k.jsxs("div",{className:"chat-header-info",children:[k.jsx("div",{className:"chat-avatar",children:"A"}),k.jsxs("div",{className:"chat-info",children:[k.jsx("h3",{children:"Adarsh AI"}),k.jsx("p",{children:"Resume Assistant"})]})]}),k.jsx("button",{className:"close-btn",onClick:S,children:"×"})]}),k.jsxs("div",{className:"chat-messages",children:[k.jsx(mK,{}),i.map(V=>k.jsxs("div",{className:`message ${V.isBot?"bot":"user"}`,children:[k.jsx("div",{className:"message-avatar",children:V.isBot?"A":"Y"}),k.jsx("div",{className:"message-content",children:k.jsx("div",{dangerouslySetInnerHTML:{__html:V.text}})})]},V.id)),l&&k.jsxs("div",{className:"message bot",children:[k.jsx("div",{className:"message-avatar",children:"A"}),k.jsx("div",{className:"typing-indicator",children:k.jsxs("div",{className:"typing-dots",children:[k.jsx("span",{}),k.jsx("span",{}),k.jsx("span",{})]})})]}),u&&k.jsxs("div",{className:"message bot",children:[k.jsx("div",{className:"message-avatar",children:"A"}),k.jsx("div",{className:"initializing-screen",children:k.jsxs("div",{className:"initializing-content",children:[k.jsx("div",{className:"initializing-spinner"}),k.jsxs("div",{className:"initializing-text",children:[k.jsx("p",{children:k.jsx("strong",{children:"Starting up the AI assistant..."})}),k.jsx("p",{children:"The chatbot is waking up from sleep mode. This may take up to 50 seconds."}),k.jsx("p",{children:"Thanks for your patience! ⏳"})]})]})})]}),k.jsx("div",{ref:m})]}),k.jsxs("div",{className:"quick-actions",children:[k.jsx("div",{className:"quick-actions-title",children:"Quick questions:"}),k.jsxs("div",{className:"quick-buttons",children:[k.jsx("button",{className:"quick-btn",onClick:()=>L("What are your skills?"),disabled:l||u,children:"Skills"}),k.jsx("button",{className:"quick-btn",onClick:()=>L("Tell me about your projects"),disabled:l||u,children:"Projects"}),k.jsx("button",{className:"quick-btn",onClick:()=>L("How can I contact you?"),disabled:l||u,children:"Contact"})]})]}),k.jsxs("div",{className:"chat-input",children:[k.jsx("input",{ref:v,type:"text",value:o,onChange:V=>a(V.target.value),onKeyPress:F,placeholder:"Ask me anything...",disabled:l||u}),k.jsx("button",{className:"send-btn",onClick:x,disabled:!o.trim()||l||u,children:u?"Starting...":"Send"})]})]}),n&&p&&k.jsx("div",{className:"chat-overlay",onClick:S})]})},yK="/assets/light-mode-B0-5GaYb.png",_K="/assets/brush-6nHCPmni.png",wK="/assets/bath-DT5GXwEh.png",EK="/assets/breakfast-BOywOTvR.png",rd="/assets/classRoom-DTFPcRHP.png",PR="/assets/foodTime-BDOKPLRj.png",AK="/assets/sleep-DW-tJ3K_.png",bK="/assets/gym-CypTUB6A.png",ym="/assets/socialMedia-Iw7xUF9y.png",SK="/assets/myRoutine-BgeV5gtg.png";function zO({appearance:n,toggleAppearance:e}){const[t,r]=A.useState(21),[i,s]=A.useState(t),o=A.useRef(null),[a,l]=A.useState(!1),c=Xy();A.useEffect(()=>{const w=setTimeout(()=>l(!0),0);return()=>clearTimeout(w)},[]);const u=w=>{o.current&&clearTimeout(o.current),s(w.target.id)},f=()=>{o.current=setTimeout(()=>s(t),300)},p=(w,_)=>w===_||_===t?"80%":_===w+1||_===w-1?"50%":"30%",g=w=>{r(w),w<8||w>20?e("dark"):e("light")},m=w=>{if(t!==parseInt(w))return null;const _={8:{icon:_K,text:"Morning Me: Debug Mode"},9:{icon:wK,text:"Shower Karaoke Time"},10:{icon:EK,text:"Cereal > Life Decisions"},11:{icon:rd,text:"Pretending to Work Hard"},12:{icon:rd,text:"Daydreaming in Class"},13:{icon:PR,text:"Lunch: My True Love"},14:{icon:rd,text:"Counting Minutes to Freedom"},15:{icon:rd,text:"Brain.exe Has Crashed"},16:{icon:rd,text:"Doodling Masterpieces"},17:{icon:ym,text:"Doomscrolling Begins"},18:{icon:ym,text:"Stuck in Meme Hell"},19:{icon:bK,text:"Gym? Am I dedicated to this?"},20:{icon:ym,text:"Insta Ate My Soul"},21:{icon:ym,text:"Hustling Code, Trending Reels"},22:{icon:PR,text:"Dinner: Scroll & Chew"}},E=n==="dark"?AK:yK,S=n==="dark"?"Sleep":"Idle",{icon:P,text:O}=_[w]||{icon:E,text:S};return k.jsxs(k.Fragment,{children:[k.jsx("img",{className:"modeImage",src:P,alt:O}),k.jsxs("div",{className:"routineContainer",children:[k.jsx("img",{className:"myRoutine",src:SK,alt:"My Routine"}),k.jsx("span",{className:"routineText",children:O})]})]})},v=[{id:"1",time:"1am"},{id:"2",time:"2am"},{id:"3",time:"3am"},{id:"4",time:"4am"},{id:"5",time:"5am"},{id:"6",time:"6am"},{id:"7",time:"7am"},{id:"8",color:"teal",time:"8am"},{id:"9",color:"teal",time:"9am"},{id:"10",color:"teal",time:"10am"},{id:"11",color:"teal",time:"11am"},{id:"12",color:"teal",time:"12pm"},{id:"13",color:"teal",time:"1pm"},{id:"14",color:"teal",time:"2pm"},{id:"15",color:"teal",time:"3pm"},{id:"16",color:"teal",time:"4pm"},{id:"17",color:"teal",time:"5pm"},{id:"18",color:"teal",time:"6pm"},{id:"19",color:"teal",time:"7pm"},{id:"20",color:"teal",time:"8pm"},{id:"21",time:"9pm"},{id:"22",time:"10pm"},{id:"23",time:"11pm"},{id:"24",time:"12am"}];return a&&c.pathname==="/"?k.jsx(Os,{justify:"center",className:"circadian",children:v.map(({id:w,color:_,time:E})=>k.jsxs("div",{id:w,className:"circadian-seperatorBlock",onMouseEnter:S=>{g(parseInt(w)),u(S)},onMouseLeave:f,children:[k.jsx("div",{className:"modelImageContainer",children:m(w)}),k.jsx(vS,{className:"seperator",orientation:"vertical",style:{height:p(parseInt(i),parseInt(w)),backgroundColor:_}}),String(w)===String(i)&&k.jsx("span",{style:{position:"absolute",bottom:"-25px",width:"max-content"},children:k.jsxs($v,{children:["My ",E," Vibe"]})})]},w))}):null}zO.propTypes={appearance:li.string,toggleAppearance:li.func};RS.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();function HO(){const[n,e]=A.useState("dark"),[t,r]=A.useState(window.innerWidth<=736),i=n==="dark",s=()=>{r(window.innerWidth<=736)};A.useEffect(()=>(y$(),_$(),ag(window.location.pathname,document.title),window.addEventListener("resize",s),s(),fK(),()=>{window.removeEventListener("resize",s)}),[]);const o=a=>{e(a)};return k.jsx(Qk,{accentColor:"grass",appearance:n,className:"container",children:k.jsx(Fj,{basename:"/",children:k.jsxs(k.Fragment,{children:[k.jsx(UO,{appearance:n,toggleAppearance:o,isMobile:t}),k.jsx("br",{}),k.jsx(nO,{isMobile:t}),k.jsx("br",{}),t?k.jsx(k.Fragment,{children:k.jsx("div",{className:"mwebToggleAppearance",style:{position:"fixed",bottom:"25px",right:"25px"},onClick:()=>o(i?"light":"dark"),children:k.jsx("div",{className:`themeToggleSwitch ${i?"dark":"light"}`,style:{width:"30px",backgroundColor:"darkslategray"},children:k.jsx("img",{src:i?BO:jO,alt:i?"Dark Mode":"Light Mode",className:"themeIcon"})})})}):k.jsxs(k.Fragment,{children:[k.jsx(zO,{appearance:n,toggleAppearance:o}),k.jsx("br",{})]}),k.jsx(vK,{})]})})})}HO.propTypes={appearance:li.string};WI(document.getElementById("root")).render(k.jsx(A.StrictMode,{children:k.jsx(HO,{})}));
