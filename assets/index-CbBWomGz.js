var e2=Object.defineProperty;var qT=n=>{throw TypeError(n)};var t2=(n,e,t)=>e in n?e2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ge=(n,e,t)=>t2(n,typeof e!="symbol"?e+"":e,t),G_=(n,e,t)=>e.has(n)||qT("Cannot "+t);var h=(n,e,t)=>(G_(n,e,"read from private field"),t?t.call(n):e.get(n)),I=(n,e,t)=>e.has(n)?qT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),x=(n,e,t,r)=>(G_(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),P=(n,e,t)=>(G_(n,e,"access private method"),t);var tr=(n,e,t,r)=>({set _(s){x(n,e,s,t)},get _(){return h(n,e,r)}});function n2(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Ay(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var AR={exports:{}},by={},bR={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=Symbol.for("react.element"),r2=Symbol.for("react.portal"),s2=Symbol.for("react.fragment"),i2=Symbol.for("react.strict_mode"),o2=Symbol.for("react.profiler"),a2=Symbol.for("react.provider"),l2=Symbol.for("react.context"),c2=Symbol.for("react.forward_ref"),u2=Symbol.for("react.suspense"),h2=Symbol.for("react.memo"),d2=Symbol.for("react.lazy"),KT=Symbol.iterator;function f2(n){return n===null||typeof n!="object"?null:(n=KT&&n[KT]||n["@@iterator"],typeof n=="function"?n:null)}var SR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TR=Object.assign,CR={};function fh(n,e,t){this.props=n,this.context=e,this.refs=CR,this.updater=t||SR}fh.prototype.isReactComponent={};fh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};fh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function xR(){}xR.prototype=fh.prototype;function GA(n,e,t){this.props=n,this.context=e,this.refs=CR,this.updater=t||SR}var qA=GA.prototype=new xR;qA.constructor=GA;TR(qA,fh.prototype);qA.isPureReactComponent=!0;var XT=Array.isArray,RR=Object.prototype.hasOwnProperty,KA={current:null},PR={key:!0,ref:!0,__self:!0,__source:!0};function IR(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)RR.call(e,r)&&!PR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Xp,type:n,key:i,ref:o,props:s,_owner:KA.current}}function p2(n,e){return{$$typeof:Xp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function XA(n){return typeof n=="object"&&n!==null&&n.$$typeof===Xp}function m2(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var YT=/\/+/g;function q_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?m2(""+n.key):e.toString(36)}function fg(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Xp:case r2:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+q_(o,0):r,XT(s)?(t="",n!=null&&(t=n.replace(YT,"$&/")+"/"),fg(s,e,t,"",function(c){return c})):s!=null&&(XA(s)&&(s=p2(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(YT,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",XT(n))for(var a=0;a<n.length;a++){i=n[a];var l=r+q_(i,a);o+=fg(i,e,t,l,s)}else if(l=f2(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=r+q_(i,a++),o+=fg(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pm(n,e,t){if(n==null)return n;var r=[],s=0;return fg(n,r,"","",function(i){return e.call(t,i,s++)}),r}function g2(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Dn={current:null},pg={transition:null},v2={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:pg,ReactCurrentOwner:KA};function kR(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Pm,forEach:function(n,e,t){Pm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Pm(n,function(){e++}),e},toArray:function(n){return Pm(n,function(e){return e})||[]},only:function(n){if(!XA(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ee.Component=fh;Ee.Fragment=s2;Ee.Profiler=o2;Ee.PureComponent=GA;Ee.StrictMode=i2;Ee.Suspense=u2;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v2;Ee.act=kR;Ee.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=TR({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=KA.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)RR.call(e,l)&&!PR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Xp,type:n.type,key:s,ref:i,props:r,_owner:o}};Ee.createContext=function(n){return n={$$typeof:l2,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:a2,_context:n},n.Consumer=n};Ee.createElement=IR;Ee.createFactory=function(n){var e=IR.bind(null,n);return e.type=n,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(n){return{$$typeof:c2,render:n}};Ee.isValidElement=XA;Ee.lazy=function(n){return{$$typeof:d2,_payload:{_status:-1,_result:n},_init:g2}};Ee.memo=function(n,e){return{$$typeof:h2,type:n,compare:e===void 0?null:e}};Ee.startTransition=function(n){var e=pg.transition;pg.transition={};try{n()}finally{pg.transition=e}};Ee.unstable_act=kR;Ee.useCallback=function(n,e){return Dn.current.useCallback(n,e)};Ee.useContext=function(n){return Dn.current.useContext(n)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(n){return Dn.current.useDeferredValue(n)};Ee.useEffect=function(n,e){return Dn.current.useEffect(n,e)};Ee.useId=function(){return Dn.current.useId()};Ee.useImperativeHandle=function(n,e,t){return Dn.current.useImperativeHandle(n,e,t)};Ee.useInsertionEffect=function(n,e){return Dn.current.useInsertionEffect(n,e)};Ee.useLayoutEffect=function(n,e){return Dn.current.useLayoutEffect(n,e)};Ee.useMemo=function(n,e){return Dn.current.useMemo(n,e)};Ee.useReducer=function(n,e,t){return Dn.current.useReducer(n,e,t)};Ee.useRef=function(n){return Dn.current.useRef(n)};Ee.useState=function(n){return Dn.current.useState(n)};Ee.useSyncExternalStore=function(n,e,t){return Dn.current.useSyncExternalStore(n,e,t)};Ee.useTransition=function(){return Dn.current.useTransition()};Ee.version="18.3.1";bR.exports=Ee;var A=bR.exports;const no=Ay(A),LR=n2({__proto__:null,default:no},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=A,_2=Symbol.for("react.element"),w2=Symbol.for("react.fragment"),E2=Object.prototype.hasOwnProperty,A2=y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b2={key:!0,ref:!0,__self:!0,__source:!0};function MR(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)E2.call(e,r)&&!b2.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:_2,type:n,key:i,ref:o,props:s,_owner:A2.current}}by.Fragment=w2;by.jsx=MR;by.jsxs=MR;AR.exports=by;var N=AR.exports,NR={exports:{}},wr={},DR={exports:{}},OR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,z){var X=U.length;U.push(z);e:for(;0<X;){var ce=X-1>>>1,se=U[ce];if(0<s(se,z))U[ce]=z,U[X]=se,X=ce;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var z=U[0],X=U.pop();if(X!==z){U[0]=X;e:for(var ce=0,se=U.length,ae=se>>>1;ce<ae;){var Be=2*(ce+1)-1,Ue=U[Be],Pe=Be+1,fe=U[Pe];if(0>s(Ue,X))Pe<se&&0>s(fe,Ue)?(U[ce]=fe,U[Pe]=X,ce=Pe):(U[ce]=Ue,U[Be]=X,ce=Be);else if(Pe<se&&0>s(fe,X))U[ce]=fe,U[Pe]=X,ce=Pe;else break e}}return z}function s(U,z){var X=U.sortIndex-z.sortIndex;return X!==0?X:U.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,g=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var z=t(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=U)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=t(c)}}function R(U){if(_=!1,S(U),!g)if(t(l)!==null)g=!0,Z(O);else{var z=t(c);z!==null&&W(R,z.startTime-U)}}function O(U,z){g=!1,_&&(_=!1,y(T),T=-1),m=!0;var X=p;try{for(S(z),f=t(l);f!==null&&(!(f.expirationTime>z)||U&&!F());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,p=f.priorityLevel;var se=ce(f.expirationTime<=z);z=n.unstable_now(),typeof se=="function"?f.callback=se:f===t(l)&&r(l),S(z)}else r(l);f=t(l)}if(f!==null)var ae=!0;else{var Be=t(c);Be!==null&&W(R,Be.startTime-z),ae=!1}return ae}finally{f=null,p=X,m=!1}}var V=!1,C=null,T=-1,k=5,M=-1;function F(){return!(n.unstable_now()-M<k)}function j(){if(C!==null){var U=n.unstable_now();M=U;var z=!0;try{z=C(!0,U)}finally{z?D():(V=!1,C=null)}}else V=!1}var D;if(typeof E=="function")D=function(){E(j)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,re=q.port2;q.port1.onmessage=j,D=function(){re.postMessage(null)}}else D=function(){w(j,0)};function Z(U){C=U,V||(V=!0,D())}function W(U,z){T=w(function(){U(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,Z(O))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var X=p;p=z;try{return U()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=p;p=U;try{return z()}finally{p=X}},n.unstable_scheduleCallback=function(U,z,X){var ce=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=X+se,U={id:u++,callback:z,priorityLevel:U,startTime:X,expirationTime:se,sortIndex:-1},X>ce?(U.sortIndex=X,e(c,U),t(l)===null&&U===t(c)&&(_?(y(T),T=-1):_=!0,W(R,X-ce))):(U.sortIndex=se,e(l,U),g||m||(g=!0,Z(O))),U},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(U){var z=p;return function(){var X=p;p=z;try{return U.apply(this,arguments)}finally{p=X}}}})(OR);DR.exports=OR;var S2=DR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2=A,_r=S2;function G(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FR=new Set,Bd={};function Ql(n,e){Yu(n,e),Yu(n+"Capture",e)}function Yu(n,e){for(Bd[n]=e,n=0;n<e.length;n++)FR.add(e[n])}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),K0=Object.prototype.hasOwnProperty,C2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QT={},JT={};function x2(n){return K0.call(JT,n)?!0:K0.call(QT,n)?!1:C2.test(n)?JT[n]=!0:(QT[n]=!0,!1)}function R2(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P2(n,e,t,r){if(e===null||typeof e>"u"||R2(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){an[n]=new On(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];an[e]=new On(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){an[n]=new On(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){an[n]=new On(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){an[n]=new On(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){an[n]=new On(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){an[n]=new On(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){an[n]=new On(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){an[n]=new On(n,5,!1,n.toLowerCase(),null,!1,!1)});var YA=/[\-:]([a-z])/g;function QA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(YA,QA);an[e]=new On(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(YA,QA);an[e]=new On(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(YA,QA);an[e]=new On(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){an[n]=new On(n,1,!1,n.toLowerCase(),null,!1,!1)});an.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){an[n]=new On(n,1,!1,n.toLowerCase(),null,!0,!0)});function JA(n,e,t,r){var s=an.hasOwnProperty(e)?an[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(P2(e,t,s,r)&&(t=null),r||s===null?x2(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Qi=T2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Im=Symbol.for("react.element"),xc=Symbol.for("react.portal"),Rc=Symbol.for("react.fragment"),ZA=Symbol.for("react.strict_mode"),X0=Symbol.for("react.profiler"),VR=Symbol.for("react.provider"),jR=Symbol.for("react.context"),eb=Symbol.for("react.forward_ref"),Y0=Symbol.for("react.suspense"),Q0=Symbol.for("react.suspense_list"),tb=Symbol.for("react.memo"),ao=Symbol.for("react.lazy"),BR=Symbol.for("react.offscreen"),ZT=Symbol.iterator;function $h(n){return n===null||typeof n!="object"?null:(n=ZT&&n[ZT]||n["@@iterator"],typeof n=="function"?n:null)}var ct=Object.assign,K_;function ed(n){if(K_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);K_=e&&e[1]||""}return`
`+K_+n}var X_=!1;function Y_(n,e){if(!n||X_)return"";X_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{X_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ed(n):""}function I2(n){switch(n.tag){case 5:return ed(n.type);case 16:return ed("Lazy");case 13:return ed("Suspense");case 19:return ed("SuspenseList");case 0:case 2:case 15:return n=Y_(n.type,!1),n;case 11:return n=Y_(n.type.render,!1),n;case 1:return n=Y_(n.type,!0),n;default:return""}}function J0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Rc:return"Fragment";case xc:return"Portal";case X0:return"Profiler";case ZA:return"StrictMode";case Y0:return"Suspense";case Q0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case jR:return(n.displayName||"Context")+".Consumer";case VR:return(n._context.displayName||"Context")+".Provider";case eb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case tb:return e=n.displayName||null,e!==null?e:J0(n.type)||"Memo";case ao:e=n._payload,n=n._init;try{return J0(n(e))}catch{}}return null}function k2(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J0(e);case 8:return e===ZA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function UR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function L2(n){var e=UR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function km(n){n._valueTracker||(n._valueTracker=L2(n))}function $R(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=UR(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ov(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Z0(n,e){var t=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function eC(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Yo(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zR(n,e){e=e.checked,e!=null&&JA(n,"checked",e,!1)}function ew(n,e){zR(n,e);var t=Yo(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?tw(n,e.type,t):e.hasOwnProperty("defaultValue")&&tw(n,e.type,Yo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function tC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function tw(n,e,t){(e!=="number"||ov(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var td=Array.isArray;function Bc(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Yo(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function nw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function nC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(G(92));if(td(t)){if(1<t.length)throw Error(G(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Yo(t)}}function HR(n,e){var t=Yo(e.value),r=Yo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function rC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function WR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?WR(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Lm,GR=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Lm=Lm||document.createElement("div"),Lm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ud(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M2=["Webkit","ms","Moz","O"];Object.keys(bd).forEach(function(n){M2.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),bd[e]=bd[n]})});function qR(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||bd.hasOwnProperty(n)&&bd[n]?(""+e).trim():e+"px"}function KR(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=qR(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var N2=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sw(n,e){if(e){if(N2[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function iw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ow=null;function nb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var aw=null,Uc=null,$c=null;function sC(n){if(n=Jp(n)){if(typeof aw!="function")throw Error(G(280));var e=n.stateNode;e&&(e=Ry(e),aw(n.stateNode,n.type,e))}}function XR(n){Uc?$c?$c.push(n):$c=[n]:Uc=n}function YR(){if(Uc){var n=Uc,e=$c;if($c=Uc=null,sC(n),e)for(n=0;n<e.length;n++)sC(e[n])}}function QR(n,e){return n(e)}function JR(){}var Q_=!1;function ZR(n,e,t){if(Q_)return n(e,t);Q_=!0;try{return QR(n,e,t)}finally{Q_=!1,(Uc!==null||$c!==null)&&(JR(),YR())}}function $d(n,e){var t=n.stateNode;if(t===null)return null;var r=Ry(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(G(231,e,typeof t));return t}var lw=!1;if(Ui)try{var zh={};Object.defineProperty(zh,"passive",{get:function(){lw=!0}}),window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{lw=!1}function D2(n,e,t,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Sd=!1,av=null,lv=!1,cw=null,O2={onError:function(n){Sd=!0,av=n}};function F2(n,e,t,r,s,i,o,a,l){Sd=!1,av=null,D2.apply(O2,arguments)}function V2(n,e,t,r,s,i,o,a,l){if(F2.apply(this,arguments),Sd){if(Sd){var c=av;Sd=!1,av=null}else throw Error(G(198));lv||(lv=!0,cw=c)}}function Jl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function eP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function iC(n){if(Jl(n)!==n)throw Error(G(188))}function j2(n){var e=n.alternate;if(!e){if(e=Jl(n),e===null)throw Error(G(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return iC(s),n;if(i===r)return iC(s),e;i=i.sibling}throw Error(G(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(G(189))}}if(t.alternate!==r)throw Error(G(190))}if(t.tag!==3)throw Error(G(188));return t.stateNode.current===t?n:e}function tP(n){return n=j2(n),n!==null?nP(n):null}function nP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=nP(n);if(e!==null)return e;n=n.sibling}return null}var rP=_r.unstable_scheduleCallback,oC=_r.unstable_cancelCallback,B2=_r.unstable_shouldYield,U2=_r.unstable_requestPaint,wt=_r.unstable_now,$2=_r.unstable_getCurrentPriorityLevel,rb=_r.unstable_ImmediatePriority,sP=_r.unstable_UserBlockingPriority,cv=_r.unstable_NormalPriority,z2=_r.unstable_LowPriority,iP=_r.unstable_IdlePriority,Sy=null,Ds=null;function H2(n){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(Sy,n,void 0,(n.current.flags&128)===128)}catch{}}var os=Math.clz32?Math.clz32:q2,W2=Math.log,G2=Math.LN2;function q2(n){return n>>>=0,n===0?32:31-(W2(n)/G2|0)|0}var Mm=64,Nm=4194304;function nd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function uv(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=nd(a):(i&=o,i!==0&&(r=nd(i)))}else o=t&~s,o!==0?r=nd(o):i!==0&&(r=nd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-os(e),s=1<<t,r|=n[t],e&=~s;return r}function K2(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X2(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-os(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&r)&&(s[o]=K2(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function uw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function oP(){var n=Mm;return Mm<<=1,!(Mm&4194240)&&(Mm=64),n}function J_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Yp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-os(e),n[e]=t}function Y2(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-os(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function sb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-os(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var je=0;function aP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var lP,ib,cP,uP,hP,hw=!1,Dm=[],jo=null,Bo=null,Uo=null,zd=new Map,Hd=new Map,co=[],Q2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aC(n,e){switch(n){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":zd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hd.delete(e.pointerId)}}function Hh(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Jp(e),e!==null&&ib(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function J2(n,e,t,r,s){switch(e){case"focusin":return jo=Hh(jo,n,e,t,r,s),!0;case"dragenter":return Bo=Hh(Bo,n,e,t,r,s),!0;case"mouseover":return Uo=Hh(Uo,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return zd.set(i,Hh(zd.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Hd.set(i,Hh(Hd.get(i)||null,n,e,t,r,s)),!0}return!1}function dP(n){var e=La(n.target);if(e!==null){var t=Jl(e);if(t!==null){if(e=t.tag,e===13){if(e=eP(t),e!==null){n.blockedOn=e,hP(n.priority,function(){cP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=dw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);ow=r,t.target.dispatchEvent(r),ow=null}else return e=Jp(t),e!==null&&ib(e),n.blockedOn=t,!1;e.shift()}return!0}function lC(n,e,t){mg(n)&&t.delete(e)}function Z2(){hw=!1,jo!==null&&mg(jo)&&(jo=null),Bo!==null&&mg(Bo)&&(Bo=null),Uo!==null&&mg(Uo)&&(Uo=null),zd.forEach(lC),Hd.forEach(lC)}function Wh(n,e){n.blockedOn===e&&(n.blockedOn=null,hw||(hw=!0,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,Z2)))}function Wd(n){function e(s){return Wh(s,n)}if(0<Dm.length){Wh(Dm[0],n);for(var t=1;t<Dm.length;t++){var r=Dm[t];r.blockedOn===n&&(r.blockedOn=null)}}for(jo!==null&&Wh(jo,n),Bo!==null&&Wh(Bo,n),Uo!==null&&Wh(Uo,n),zd.forEach(e),Hd.forEach(e),t=0;t<co.length;t++)r=co[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<co.length&&(t=co[0],t.blockedOn===null);)dP(t),t.blockedOn===null&&co.shift()}var zc=Qi.ReactCurrentBatchConfig,hv=!0;function eF(n,e,t,r){var s=je,i=zc.transition;zc.transition=null;try{je=1,ob(n,e,t,r)}finally{je=s,zc.transition=i}}function tF(n,e,t,r){var s=je,i=zc.transition;zc.transition=null;try{je=4,ob(n,e,t,r)}finally{je=s,zc.transition=i}}function ob(n,e,t,r){if(hv){var s=dw(n,e,t,r);if(s===null)l0(n,e,r,dv,t),aC(n,r);else if(J2(s,n,e,t,r))r.stopPropagation();else if(aC(n,r),e&4&&-1<Q2.indexOf(n)){for(;s!==null;){var i=Jp(s);if(i!==null&&lP(i),i=dw(n,e,t,r),i===null&&l0(n,e,r,dv,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else l0(n,e,r,null,t)}}var dv=null;function dw(n,e,t,r){if(dv=null,n=nb(r),n=La(n),n!==null)if(e=Jl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=eP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return dv=n,null}function fP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($2()){case rb:return 1;case sP:return 4;case cv:case z2:return 16;case iP:return 536870912;default:return 16}default:return 16}}var No=null,ab=null,gg=null;function pP(){if(gg)return gg;var n,e=ab,t=e.length,r,s="value"in No?No.value:No.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return gg=s.slice(n,1<r?1-r:void 0)}function vg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Om(){return!0}function cC(){return!1}function Er(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Om:cC,this.isPropagationStopped=cC,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Om)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Om)},persist:function(){},isPersistent:Om}),e}var ph={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lb=Er(ph),Qp=ct({},ph,{view:0,detail:0}),nF=Er(Qp),Z_,e0,Gh,Ty=ct({},Qp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gh&&(Gh&&n.type==="mousemove"?(Z_=n.screenX-Gh.screenX,e0=n.screenY-Gh.screenY):e0=Z_=0,Gh=n),Z_)},movementY:function(n){return"movementY"in n?n.movementY:e0}}),uC=Er(Ty),rF=ct({},Ty,{dataTransfer:0}),sF=Er(rF),iF=ct({},Qp,{relatedTarget:0}),t0=Er(iF),oF=ct({},ph,{animationName:0,elapsedTime:0,pseudoElement:0}),aF=Er(oF),lF=ct({},ph,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cF=Er(lF),uF=ct({},ph,{data:0}),hC=Er(uF),hF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pF(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=fF[n])?!!e[n]:!1}function cb(){return pF}var mF=ct({},Qp,{key:function(n){if(n.key){var e=hF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=vg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cb,charCode:function(n){return n.type==="keypress"?vg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gF=Er(mF),vF=ct({},Ty,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dC=Er(vF),yF=ct({},Qp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cb}),_F=Er(yF),wF=ct({},ph,{propertyName:0,elapsedTime:0,pseudoElement:0}),EF=Er(wF),AF=ct({},Ty,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),bF=Er(AF),SF=[9,13,27,32],ub=Ui&&"CompositionEvent"in window,Td=null;Ui&&"documentMode"in document&&(Td=document.documentMode);var TF=Ui&&"TextEvent"in window&&!Td,mP=Ui&&(!ub||Td&&8<Td&&11>=Td),fC=" ",pC=!1;function gP(n,e){switch(n){case"keyup":return SF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pc=!1;function CF(n,e){switch(n){case"compositionend":return vP(e);case"keypress":return e.which!==32?null:(pC=!0,fC);case"textInput":return n=e.data,n===fC&&pC?null:n;default:return null}}function xF(n,e){if(Pc)return n==="compositionend"||!ub&&gP(n,e)?(n=pP(),gg=ab=No=null,Pc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mP&&e.locale!=="ko"?null:e.data;default:return null}}var RF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!RF[n.type]:e==="textarea"}function yP(n,e,t,r){XR(r),e=fv(e,"onChange"),0<e.length&&(t=new lb("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Cd=null,Gd=null;function PF(n){PP(n,0)}function Cy(n){var e=Lc(n);if($R(e))return n}function IF(n,e){if(n==="change")return e}var _P=!1;if(Ui){var n0;if(Ui){var r0="oninput"in document;if(!r0){var gC=document.createElement("div");gC.setAttribute("oninput","return;"),r0=typeof gC.oninput=="function"}n0=r0}else n0=!1;_P=n0&&(!document.documentMode||9<document.documentMode)}function vC(){Cd&&(Cd.detachEvent("onpropertychange",wP),Gd=Cd=null)}function wP(n){if(n.propertyName==="value"&&Cy(Gd)){var e=[];yP(e,Gd,n,nb(n)),ZR(PF,e)}}function kF(n,e,t){n==="focusin"?(vC(),Cd=e,Gd=t,Cd.attachEvent("onpropertychange",wP)):n==="focusout"&&vC()}function LF(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cy(Gd)}function MF(n,e){if(n==="click")return Cy(e)}function NF(n,e){if(n==="input"||n==="change")return Cy(e)}function DF(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ls=typeof Object.is=="function"?Object.is:DF;function qd(n,e){if(ls(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!K0.call(e,s)||!ls(n[s],e[s]))return!1}return!0}function yC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _C(n,e){var t=yC(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=yC(t)}}function EP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?EP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function AP(){for(var n=window,e=ov();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ov(n.document)}return e}function hb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function OF(n){var e=AP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&EP(t.ownerDocument.documentElement,t)){if(r!==null&&hb(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=_C(t,i);var o=_C(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var FF=Ui&&"documentMode"in document&&11>=document.documentMode,Ic=null,fw=null,xd=null,pw=!1;function wC(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;pw||Ic==null||Ic!==ov(r)||(r=Ic,"selectionStart"in r&&hb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xd&&qd(xd,r)||(xd=r,r=fv(fw,"onSelect"),0<r.length&&(e=new lb("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Ic)))}function Fm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var kc={animationend:Fm("Animation","AnimationEnd"),animationiteration:Fm("Animation","AnimationIteration"),animationstart:Fm("Animation","AnimationStart"),transitionend:Fm("Transition","TransitionEnd")},s0={},bP={};Ui&&(bP=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function xy(n){if(s0[n])return s0[n];if(!kc[n])return n;var e=kc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in bP)return s0[n]=e[t];return n}var SP=xy("animationend"),TP=xy("animationiteration"),CP=xy("animationstart"),xP=xy("transitionend"),RP=new Map,EC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ua(n,e){RP.set(n,e),Ql(e,[n])}for(var i0=0;i0<EC.length;i0++){var o0=EC[i0],VF=o0.toLowerCase(),jF=o0[0].toUpperCase()+o0.slice(1);ua(VF,"on"+jF)}ua(SP,"onAnimationEnd");ua(TP,"onAnimationIteration");ua(CP,"onAnimationStart");ua("dblclick","onDoubleClick");ua("focusin","onFocus");ua("focusout","onBlur");ua(xP,"onTransitionEnd");Yu("onMouseEnter",["mouseout","mouseover"]);Yu("onMouseLeave",["mouseout","mouseover"]);Yu("onPointerEnter",["pointerout","pointerover"]);Yu("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BF=new Set("cancel close invalid load scroll toggle".split(" ").concat(rd));function AC(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,V2(r,e,void 0,n),n.currentTarget=null}function PP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;AC(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;AC(s,a,c),i=l}}}if(lv)throw n=cw,lv=!1,cw=null,n}function et(n,e){var t=e[_w];t===void 0&&(t=e[_w]=new Set);var r=n+"__bubble";t.has(r)||(IP(e,n,2,!1),t.add(r))}function a0(n,e,t){var r=0;e&&(r|=4),IP(t,n,r,e)}var Vm="_reactListening"+Math.random().toString(36).slice(2);function Kd(n){if(!n[Vm]){n[Vm]=!0,FR.forEach(function(t){t!=="selectionchange"&&(BF.has(t)||a0(t,!1,n),a0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Vm]||(e[Vm]=!0,a0("selectionchange",!1,e))}}function IP(n,e,t,r){switch(fP(e)){case 1:var s=eF;break;case 4:s=tF;break;default:s=ob}t=s.bind(null,e,t,n),s=void 0,!lw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function l0(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=La(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}ZR(function(){var c=i,u=nb(t),f=[];e:{var p=RP.get(n);if(p!==void 0){var m=lb,g=n;switch(n){case"keypress":if(vg(t)===0)break e;case"keydown":case"keyup":m=gF;break;case"focusin":g="focus",m=t0;break;case"focusout":g="blur",m=t0;break;case"beforeblur":case"afterblur":m=t0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=uC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=sF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_F;break;case SP:case TP:case CP:m=aF;break;case xP:m=EF;break;case"scroll":m=nF;break;case"wheel":m=bF;break;case"copy":case"cut":case"paste":m=cF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=dC}var _=(e&4)!==0,w=!_&&n==="scroll",y=_?p!==null?p+"Capture":null:p;_=[];for(var E=c,S;E!==null;){S=E;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,y!==null&&(R=$d(E,y),R!=null&&_.push(Xd(E,R,S)))),w)break;E=E.return}0<_.length&&(p=new m(p,g,null,t,u),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==ow&&(g=t.relatedTarget||t.fromElement)&&(La(g)||g[$i]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=c,g=g?La(g):null,g!==null&&(w=Jl(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(_=uC,R="onMouseLeave",y="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(_=dC,R="onPointerLeave",y="onPointerEnter",E="pointer"),w=m==null?p:Lc(m),S=g==null?p:Lc(g),p=new _(R,E+"leave",m,t,u),p.target=w,p.relatedTarget=S,R=null,La(u)===c&&(_=new _(y,E+"enter",g,t,u),_.target=S,_.relatedTarget=w,R=_),w=R,m&&g)t:{for(_=m,y=g,E=0,S=_;S;S=hc(S))E++;for(S=0,R=y;R;R=hc(R))S++;for(;0<E-S;)_=hc(_),E--;for(;0<S-E;)y=hc(y),S--;for(;E--;){if(_===y||y!==null&&_===y.alternate)break t;_=hc(_),y=hc(y)}_=null}else _=null;m!==null&&bC(f,p,m,_,!1),g!==null&&w!==null&&bC(f,w,g,_,!0)}}e:{if(p=c?Lc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var O=IF;else if(mC(p))if(_P)O=NF;else{O=LF;var V=kF}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=MF);if(O&&(O=O(n,c))){yP(f,O,t,u);break e}V&&V(n,p,c),n==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&tw(p,"number",p.value)}switch(V=c?Lc(c):window,n){case"focusin":(mC(V)||V.contentEditable==="true")&&(Ic=V,fw=c,xd=null);break;case"focusout":xd=fw=Ic=null;break;case"mousedown":pw=!0;break;case"contextmenu":case"mouseup":case"dragend":pw=!1,wC(f,t,u);break;case"selectionchange":if(FF)break;case"keydown":case"keyup":wC(f,t,u)}var C;if(ub)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Pc?gP(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(mP&&t.locale!=="ko"&&(Pc||T!=="onCompositionStart"?T==="onCompositionEnd"&&Pc&&(C=pP()):(No=u,ab="value"in No?No.value:No.textContent,Pc=!0)),V=fv(c,T),0<V.length&&(T=new hC(T,n,null,t,u),f.push({event:T,listeners:V}),C?T.data=C:(C=vP(t),C!==null&&(T.data=C)))),(C=TF?CF(n,t):xF(n,t))&&(c=fv(c,"onBeforeInput"),0<c.length&&(u=new hC("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=C))}PP(f,e)})}function Xd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function fv(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=$d(n,t),i!=null&&r.unshift(Xd(n,i,s)),i=$d(n,e),i!=null&&r.push(Xd(n,i,s))),n=n.return}return r}function hc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function bC(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=$d(t,i),l!=null&&o.unshift(Xd(t,l,a))):s||(l=$d(t,i),l!=null&&o.push(Xd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var UF=/\r\n?/g,$F=/\u0000|\uFFFD/g;function SC(n){return(typeof n=="string"?n:""+n).replace(UF,`
`).replace($F,"")}function jm(n,e,t){if(e=SC(e),SC(n)!==e&&t)throw Error(G(425))}function pv(){}var mw=null,gw=null;function vw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yw=typeof setTimeout=="function"?setTimeout:void 0,zF=typeof clearTimeout=="function"?clearTimeout:void 0,TC=typeof Promise=="function"?Promise:void 0,HF=typeof queueMicrotask=="function"?queueMicrotask:typeof TC<"u"?function(n){return TC.resolve(null).then(n).catch(WF)}:yw;function WF(n){setTimeout(function(){throw n})}function c0(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Wd(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Wd(e)}function $o(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function CC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var mh=Math.random().toString(36).slice(2),Ls="__reactFiber$"+mh,Yd="__reactProps$"+mh,$i="__reactContainer$"+mh,_w="__reactEvents$"+mh,GF="__reactListeners$"+mh,qF="__reactHandles$"+mh;function La(n){var e=n[Ls];if(e)return e;for(var t=n.parentNode;t;){if(e=t[$i]||t[Ls]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=CC(n);n!==null;){if(t=n[Ls])return t;n=CC(n)}return e}n=t,t=n.parentNode}return null}function Jp(n){return n=n[Ls]||n[$i],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Lc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(G(33))}function Ry(n){return n[Yd]||null}var ww=[],Mc=-1;function ha(n){return{current:n}}function tt(n){0>Mc||(n.current=ww[Mc],ww[Mc]=null,Mc--)}function Qe(n,e){Mc++,ww[Mc]=n.current,n.current=e}var Qo={},bn=ha(Qo),Gn=ha(!1),Vl=Qo;function Qu(n,e){var t=n.type.contextTypes;if(!t)return Qo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function qn(n){return n=n.childContextTypes,n!=null}function mv(){tt(Gn),tt(bn)}function xC(n,e,t){if(bn.current!==Qo)throw Error(G(168));Qe(bn,e),Qe(Gn,t)}function kP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,k2(n)||"Unknown",s));return ct({},t,r)}function gv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Qo,Vl=bn.current,Qe(bn,n),Qe(Gn,Gn.current),!0}function RC(n,e,t){var r=n.stateNode;if(!r)throw Error(G(169));t?(n=kP(n,e,Vl),r.__reactInternalMemoizedMergedChildContext=n,tt(Gn),tt(bn),Qe(bn,n)):tt(Gn),Qe(Gn,t)}var ai=null,Py=!1,u0=!1;function LP(n){ai===null?ai=[n]:ai.push(n)}function KF(n){Py=!0,LP(n)}function da(){if(!u0&&ai!==null){u0=!0;var n=0,e=je;try{var t=ai;for(je=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ai=null,Py=!1}catch(s){throw ai!==null&&(ai=ai.slice(n+1)),rP(rb,da),s}finally{je=e,u0=!1}}return null}var Nc=[],Dc=0,vv=null,yv=0,Pr=[],Ir=0,jl=null,Mi=1,Ni="";function Sa(n,e){Nc[Dc++]=yv,Nc[Dc++]=vv,vv=n,yv=e}function MP(n,e,t){Pr[Ir++]=Mi,Pr[Ir++]=Ni,Pr[Ir++]=jl,jl=n;var r=Mi;n=Ni;var s=32-os(r)-1;r&=~(1<<s),t+=1;var i=32-os(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mi=1<<32-os(e)+s|t<<s|r,Ni=i+n}else Mi=1<<i|t<<s|r,Ni=n}function db(n){n.return!==null&&(Sa(n,1),MP(n,1,0))}function fb(n){for(;n===vv;)vv=Nc[--Dc],Nc[Dc]=null,yv=Nc[--Dc],Nc[Dc]=null;for(;n===jl;)jl=Pr[--Ir],Pr[Ir]=null,Ni=Pr[--Ir],Pr[Ir]=null,Mi=Pr[--Ir],Pr[Ir]=null}var vr=null,gr=null,nt=!1,ss=null;function NP(n,e){var t=Mr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function PC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,vr=n,gr=$o(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,vr=n,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=jl!==null?{id:Mi,overflow:Ni}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Mr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,vr=n,gr=null,!0):!1;default:return!1}}function Ew(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Aw(n){if(nt){var e=gr;if(e){var t=e;if(!PC(n,e)){if(Ew(n))throw Error(G(418));e=$o(t.nextSibling);var r=vr;e&&PC(n,e)?NP(r,t):(n.flags=n.flags&-4097|2,nt=!1,vr=n)}}else{if(Ew(n))throw Error(G(418));n.flags=n.flags&-4097|2,nt=!1,vr=n}}}function IC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vr=n}function Bm(n){if(n!==vr)return!1;if(!nt)return IC(n),nt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!vw(n.type,n.memoizedProps)),e&&(e=gr)){if(Ew(n))throw DP(),Error(G(418));for(;e;)NP(n,e),e=$o(e.nextSibling)}if(IC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(G(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){gr=$o(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}gr=null}}else gr=vr?$o(n.stateNode.nextSibling):null;return!0}function DP(){for(var n=gr;n;)n=$o(n.nextSibling)}function Ju(){gr=vr=null,nt=!1}function pb(n){ss===null?ss=[n]:ss.push(n)}var XF=Qi.ReactCurrentBatchConfig;function qh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(G(309));var r=t.stateNode}if(!r)throw Error(G(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(G(284));if(!t._owner)throw Error(G(290,n))}return n}function Um(n,e){throw n=Object.prototype.toString.call(e),Error(G(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function kC(n){var e=n._init;return e(n._payload)}function OP(n){function e(y,E){if(n){var S=y.deletions;S===null?(y.deletions=[E],y.flags|=16):S.push(E)}}function t(y,E){if(!n)return null;for(;E!==null;)e(y,E),E=E.sibling;return null}function r(y,E){for(y=new Map;E!==null;)E.key!==null?y.set(E.key,E):y.set(E.index,E),E=E.sibling;return y}function s(y,E){return y=Go(y,E),y.index=0,y.sibling=null,y}function i(y,E,S){return y.index=S,n?(S=y.alternate,S!==null?(S=S.index,S<E?(y.flags|=2,E):S):(y.flags|=2,E)):(y.flags|=1048576,E)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,E,S,R){return E===null||E.tag!==6?(E=v0(S,y.mode,R),E.return=y,E):(E=s(E,S),E.return=y,E)}function l(y,E,S,R){var O=S.type;return O===Rc?u(y,E,S.props.children,R,S.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ao&&kC(O)===E.type)?(R=s(E,S.props),R.ref=qh(y,E,S),R.return=y,R):(R=Sg(S.type,S.key,S.props,null,y.mode,R),R.ref=qh(y,E,S),R.return=y,R)}function c(y,E,S,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=y0(S,y.mode,R),E.return=y,E):(E=s(E,S.children||[]),E.return=y,E)}function u(y,E,S,R,O){return E===null||E.tag!==7?(E=Ml(S,y.mode,R,O),E.return=y,E):(E=s(E,S),E.return=y,E)}function f(y,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=v0(""+E,y.mode,S),E.return=y,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Im:return S=Sg(E.type,E.key,E.props,null,y.mode,S),S.ref=qh(y,null,E),S.return=y,S;case xc:return E=y0(E,y.mode,S),E.return=y,E;case ao:var R=E._init;return f(y,R(E._payload),S)}if(td(E)||$h(E))return E=Ml(E,y.mode,S,null),E.return=y,E;Um(y,E)}return null}function p(y,E,S,R){var O=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(y,E,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Im:return S.key===O?l(y,E,S,R):null;case xc:return S.key===O?c(y,E,S,R):null;case ao:return O=S._init,p(y,E,O(S._payload),R)}if(td(S)||$h(S))return O!==null?null:u(y,E,S,R,null);Um(y,S)}return null}function m(y,E,S,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(S)||null,a(E,y,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Im:return y=y.get(R.key===null?S:R.key)||null,l(E,y,R,O);case xc:return y=y.get(R.key===null?S:R.key)||null,c(E,y,R,O);case ao:var V=R._init;return m(y,E,S,V(R._payload),O)}if(td(R)||$h(R))return y=y.get(S)||null,u(E,y,R,O,null);Um(E,R)}return null}function g(y,E,S,R){for(var O=null,V=null,C=E,T=E=0,k=null;C!==null&&T<S.length;T++){C.index>T?(k=C,C=null):k=C.sibling;var M=p(y,C,S[T],R);if(M===null){C===null&&(C=k);break}n&&C&&M.alternate===null&&e(y,C),E=i(M,E,T),V===null?O=M:V.sibling=M,V=M,C=k}if(T===S.length)return t(y,C),nt&&Sa(y,T),O;if(C===null){for(;T<S.length;T++)C=f(y,S[T],R),C!==null&&(E=i(C,E,T),V===null?O=C:V.sibling=C,V=C);return nt&&Sa(y,T),O}for(C=r(y,C);T<S.length;T++)k=m(C,y,T,S[T],R),k!==null&&(n&&k.alternate!==null&&C.delete(k.key===null?T:k.key),E=i(k,E,T),V===null?O=k:V.sibling=k,V=k);return n&&C.forEach(function(F){return e(y,F)}),nt&&Sa(y,T),O}function _(y,E,S,R){var O=$h(S);if(typeof O!="function")throw Error(G(150));if(S=O.call(S),S==null)throw Error(G(151));for(var V=O=null,C=E,T=E=0,k=null,M=S.next();C!==null&&!M.done;T++,M=S.next()){C.index>T?(k=C,C=null):k=C.sibling;var F=p(y,C,M.value,R);if(F===null){C===null&&(C=k);break}n&&C&&F.alternate===null&&e(y,C),E=i(F,E,T),V===null?O=F:V.sibling=F,V=F,C=k}if(M.done)return t(y,C),nt&&Sa(y,T),O;if(C===null){for(;!M.done;T++,M=S.next())M=f(y,M.value,R),M!==null&&(E=i(M,E,T),V===null?O=M:V.sibling=M,V=M);return nt&&Sa(y,T),O}for(C=r(y,C);!M.done;T++,M=S.next())M=m(C,y,T,M.value,R),M!==null&&(n&&M.alternate!==null&&C.delete(M.key===null?T:M.key),E=i(M,E,T),V===null?O=M:V.sibling=M,V=M);return n&&C.forEach(function(j){return e(y,j)}),nt&&Sa(y,T),O}function w(y,E,S,R){if(typeof S=="object"&&S!==null&&S.type===Rc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Im:e:{for(var O=S.key,V=E;V!==null;){if(V.key===O){if(O=S.type,O===Rc){if(V.tag===7){t(y,V.sibling),E=s(V,S.props.children),E.return=y,y=E;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ao&&kC(O)===V.type){t(y,V.sibling),E=s(V,S.props),E.ref=qh(y,V,S),E.return=y,y=E;break e}t(y,V);break}else e(y,V);V=V.sibling}S.type===Rc?(E=Ml(S.props.children,y.mode,R,S.key),E.return=y,y=E):(R=Sg(S.type,S.key,S.props,null,y.mode,R),R.ref=qh(y,E,S),R.return=y,y=R)}return o(y);case xc:e:{for(V=S.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){t(y,E.sibling),E=s(E,S.children||[]),E.return=y,y=E;break e}else{t(y,E);break}else e(y,E);E=E.sibling}E=y0(S,y.mode,R),E.return=y,y=E}return o(y);case ao:return V=S._init,w(y,E,V(S._payload),R)}if(td(S))return g(y,E,S,R);if($h(S))return _(y,E,S,R);Um(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(t(y,E.sibling),E=s(E,S),E.return=y,y=E):(t(y,E),E=v0(S,y.mode,R),E.return=y,y=E),o(y)):t(y,E)}return w}var Zu=OP(!0),FP=OP(!1),_v=ha(null),wv=null,Oc=null,mb=null;function gb(){mb=Oc=wv=null}function vb(n){var e=_v.current;tt(_v),n._currentValue=e}function bw(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Hc(n,e){wv=n,mb=Oc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zn=!0),n.firstContext=null)}function Or(n){var e=n._currentValue;if(mb!==n)if(n={context:n,memoizedValue:e,next:null},Oc===null){if(wv===null)throw Error(G(308));Oc=n,wv.dependencies={lanes:0,firstContext:n}}else Oc=Oc.next=n;return e}var Ma=null;function yb(n){Ma===null?Ma=[n]:Ma.push(n)}function VP(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,yb(e)):(t.next=s.next,s.next=t),e.interleaved=t,zi(n,r)}function zi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var lo=!1;function _b(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Di(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function zo(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zi(n,t)}return s=r.interleaved,s===null?(e.next=e,yb(r)):(e.next=s.next,s.next=e),r.interleaved=e,zi(n,t)}function yg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,sb(n,t)}}function LC(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Ev(n,e,t,r){var s=n.updateQueue;lo=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,u=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,_=a;switch(p=e,m=t,_.tag){case 1:if(g=_.payload,typeof g=="function"){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break e;f=ct({},f,p);break e;case 2:lo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ul|=o,n.lanes=o,n.memoizedState=f}}function MC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Zp={},Os=ha(Zp),Qd=ha(Zp),Jd=ha(Zp);function Na(n){if(n===Zp)throw Error(G(174));return n}function wb(n,e){switch(Qe(Jd,e),Qe(Qd,n),Qe(Os,Zp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=rw(e,n)}tt(Os),Qe(Os,e)}function eh(){tt(Os),tt(Qd),tt(Jd)}function BP(n){Na(Jd.current);var e=Na(Os.current),t=rw(e,n.type);e!==t&&(Qe(Qd,n),Qe(Os,t))}function Eb(n){Qd.current===n&&(tt(Os),tt(Qd))}var ot=ha(0);function Av(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var h0=[];function Ab(){for(var n=0;n<h0.length;n++)h0[n]._workInProgressVersionPrimary=null;h0.length=0}var _g=Qi.ReactCurrentDispatcher,d0=Qi.ReactCurrentBatchConfig,Bl=0,at=null,Nt=null,Wt=null,bv=!1,Rd=!1,Zd=0,YF=0;function hn(){throw Error(G(321))}function bb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ls(n[t],e[t]))return!1;return!0}function Sb(n,e,t,r,s,i){if(Bl=i,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_g.current=n===null||n.memoizedState===null?eV:tV,n=t(r,s),Rd){i=0;do{if(Rd=!1,Zd=0,25<=i)throw Error(G(301));i+=1,Wt=Nt=null,e.updateQueue=null,_g.current=nV,n=t(r,s)}while(Rd)}if(_g.current=Sv,e=Nt!==null&&Nt.next!==null,Bl=0,Wt=Nt=at=null,bv=!1,e)throw Error(G(300));return n}function Tb(){var n=Zd!==0;return Zd=0,n}function ms(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?at.memoizedState=Wt=n:Wt=Wt.next=n,Wt}function Fr(){if(Nt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var e=Wt===null?at.memoizedState:Wt.next;if(e!==null)Wt=e,Nt=n;else{if(n===null)throw Error(G(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Wt===null?at.memoizedState=Wt=n:Wt=Wt.next=n}return Wt}function ef(n,e){return typeof e=="function"?e(n):e}function f0(n){var e=Fr(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=Nt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Bl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,at.lanes|=u,Ul|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,ls(r,e.memoizedState)||(zn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,at.lanes|=i,Ul|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function p0(n){var e=Fr(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);ls(i,e.memoizedState)||(zn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function UP(){}function $P(n,e){var t=at,r=Fr(),s=e(),i=!ls(r.memoizedState,s);if(i&&(r.memoizedState=s,zn=!0),r=r.queue,Cb(WP.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||Wt!==null&&Wt.memoizedState.tag&1){if(t.flags|=2048,tf(9,HP.bind(null,t,r,s,e),void 0,null),Gt===null)throw Error(G(349));Bl&30||zP(t,e,s)}return s}function zP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function HP(n,e,t,r){e.value=t,e.getSnapshot=r,GP(e)&&qP(n)}function WP(n,e,t){return t(function(){GP(e)&&qP(n)})}function GP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ls(n,t)}catch{return!0}}function qP(n){var e=zi(n,1);e!==null&&as(e,n,1,-1)}function NC(n){var e=ms();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ef,lastRenderedState:n},e.queue=n,n=n.dispatch=ZF.bind(null,at,n),[e.memoizedState,n]}function tf(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function KP(){return Fr().memoizedState}function wg(n,e,t,r){var s=ms();at.flags|=n,s.memoizedState=tf(1|e,t,void 0,r===void 0?null:r)}function Iy(n,e,t,r){var s=Fr();r=r===void 0?null:r;var i=void 0;if(Nt!==null){var o=Nt.memoizedState;if(i=o.destroy,r!==null&&bb(r,o.deps)){s.memoizedState=tf(e,t,i,r);return}}at.flags|=n,s.memoizedState=tf(1|e,t,i,r)}function DC(n,e){return wg(8390656,8,n,e)}function Cb(n,e){return Iy(2048,8,n,e)}function XP(n,e){return Iy(4,2,n,e)}function YP(n,e){return Iy(4,4,n,e)}function QP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function JP(n,e,t){return t=t!=null?t.concat([n]):null,Iy(4,4,QP.bind(null,e,n),t)}function xb(){}function ZP(n,e){var t=Fr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&bb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function eI(n,e){var t=Fr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&bb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function tI(n,e,t){return Bl&21?(ls(t,e)||(t=oP(),at.lanes|=t,Ul|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zn=!0),n.memoizedState=t)}function QF(n,e){var t=je;je=t!==0&&4>t?t:4,n(!0);var r=d0.transition;d0.transition={};try{n(!1),e()}finally{je=t,d0.transition=r}}function nI(){return Fr().memoizedState}function JF(n,e,t){var r=Wo(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},rI(n))sI(e,t);else if(t=VP(n,e,t,r),t!==null){var s=Ln();as(t,n,r,s),iI(t,e,r)}}function ZF(n,e,t){var r=Wo(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(rI(n))sI(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,ls(a,o)){var l=e.interleaved;l===null?(s.next=s,yb(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=VP(n,e,s,r),t!==null&&(s=Ln(),as(t,n,r,s),iI(t,e,r))}}function rI(n){var e=n.alternate;return n===at||e!==null&&e===at}function sI(n,e){Rd=bv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function iI(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,sb(n,t)}}var Sv={readContext:Or,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},eV={readContext:Or,useCallback:function(n,e){return ms().memoizedState=[n,e===void 0?null:e],n},useContext:Or,useEffect:DC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,wg(4194308,4,QP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return wg(4194308,4,n,e)},useInsertionEffect:function(n,e){return wg(4,2,n,e)},useMemo:function(n,e){var t=ms();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ms();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=JF.bind(null,at,n),[r.memoizedState,n]},useRef:function(n){var e=ms();return n={current:n},e.memoizedState=n},useState:NC,useDebugValue:xb,useDeferredValue:function(n){return ms().memoizedState=n},useTransition:function(){var n=NC(!1),e=n[0];return n=QF.bind(null,n[1]),ms().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=at,s=ms();if(nt){if(t===void 0)throw Error(G(407));t=t()}else{if(t=e(),Gt===null)throw Error(G(349));Bl&30||zP(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,DC(WP.bind(null,r,i,n),[n]),r.flags|=2048,tf(9,HP.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=ms(),e=Gt.identifierPrefix;if(nt){var t=Ni,r=Mi;t=(r&~(1<<32-os(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Zd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=YF++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},tV={readContext:Or,useCallback:ZP,useContext:Or,useEffect:Cb,useImperativeHandle:JP,useInsertionEffect:XP,useLayoutEffect:YP,useMemo:eI,useReducer:f0,useRef:KP,useState:function(){return f0(ef)},useDebugValue:xb,useDeferredValue:function(n){var e=Fr();return tI(e,Nt.memoizedState,n)},useTransition:function(){var n=f0(ef)[0],e=Fr().memoizedState;return[n,e]},useMutableSource:UP,useSyncExternalStore:$P,useId:nI,unstable_isNewReconciler:!1},nV={readContext:Or,useCallback:ZP,useContext:Or,useEffect:Cb,useImperativeHandle:JP,useInsertionEffect:XP,useLayoutEffect:YP,useMemo:eI,useReducer:p0,useRef:KP,useState:function(){return p0(ef)},useDebugValue:xb,useDeferredValue:function(n){var e=Fr();return Nt===null?e.memoizedState=n:tI(e,Nt.memoizedState,n)},useTransition:function(){var n=p0(ef)[0],e=Fr().memoizedState;return[n,e]},useMutableSource:UP,useSyncExternalStore:$P,useId:nI,unstable_isNewReconciler:!1};function $r(n,e){if(n&&n.defaultProps){e=ct({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Sw(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ct({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var ky={isMounted:function(n){return(n=n._reactInternals)?Jl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ln(),s=Wo(n),i=Di(r,s);i.payload=e,t!=null&&(i.callback=t),e=zo(n,i,s),e!==null&&(as(e,n,s,r),yg(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ln(),s=Wo(n),i=Di(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=zo(n,i,s),e!==null&&(as(e,n,s,r),yg(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ln(),r=Wo(n),s=Di(t,r);s.tag=2,e!=null&&(s.callback=e),e=zo(n,s,r),e!==null&&(as(e,n,r,t),yg(e,n,r))}};function OC(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!qd(t,r)||!qd(s,i):!0}function oI(n,e,t){var r=!1,s=Qo,i=e.contextType;return typeof i=="object"&&i!==null?i=Or(i):(s=qn(e)?Vl:bn.current,r=e.contextTypes,i=(r=r!=null)?Qu(n,s):Qo),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ky,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function FC(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&ky.enqueueReplaceState(e,e.state,null)}function Tw(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},_b(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Or(i):(i=qn(e)?Vl:bn.current,s.context=Qu(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sw(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ky.enqueueReplaceState(s,s.state,null),Ev(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function th(n,e){try{var t="",r=e;do t+=I2(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function m0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Cw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var rV=typeof WeakMap=="function"?WeakMap:Map;function aI(n,e,t){t=Di(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Cv||(Cv=!0,Ow=r),Cw(n,e)},t}function lI(n,e,t){t=Di(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){Cw(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Cw(n,e),typeof r!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function VC(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new rV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=vV.bind(null,n,e,t),e.then(n,n))}function jC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function BC(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Di(-1,1),e.tag=2,zo(t,e,1))),t.lanes|=1),n)}var sV=Qi.ReactCurrentOwner,zn=!1;function Rn(n,e,t,r){e.child=n===null?FP(e,null,t,r):Zu(e,n.child,t,r)}function UC(n,e,t,r,s){t=t.render;var i=e.ref;return Hc(e,s),r=Sb(n,e,t,r,i,s),t=Tb(),n!==null&&!zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Hi(n,e,s)):(nt&&t&&db(e),e.flags|=1,Rn(n,e,r,s),e.child)}function $C(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!Db(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,cI(n,e,i,r,s)):(n=Sg(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:qd,t(o,r)&&n.ref===e.ref)return Hi(n,e,s)}return e.flags|=1,n=Go(i,r),n.ref=e.ref,n.return=e,e.child=n}function cI(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(qd(i,r)&&n.ref===e.ref)if(zn=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(zn=!0);else return e.lanes=n.lanes,Hi(n,e,s)}return xw(n,e,t,r,s)}function uI(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Vc,dr),dr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Qe(Vc,dr),dr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Qe(Vc,dr),dr|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Qe(Vc,dr),dr|=r;return Rn(n,e,s,t),e.child}function hI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function xw(n,e,t,r,s){var i=qn(t)?Vl:bn.current;return i=Qu(e,i),Hc(e,s),t=Sb(n,e,t,r,i,s),r=Tb(),n!==null&&!zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Hi(n,e,s)):(nt&&r&&db(e),e.flags|=1,Rn(n,e,t,s),e.child)}function zC(n,e,t,r,s){if(qn(t)){var i=!0;gv(e)}else i=!1;if(Hc(e,s),e.stateNode===null)Eg(n,e),oI(e,t,r),Tw(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Or(c):(c=qn(t)?Vl:bn.current,c=Qu(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&FC(e,o,r,c),lo=!1;var p=e.memoizedState;o.state=p,Ev(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Gn.current||lo?(typeof u=="function"&&(Sw(e,t,u,r),l=e.memoizedState),(a=lo||OC(e,t,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jP(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:$r(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Or(l):(l=qn(t)?Vl:bn.current,l=Qu(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&FC(e,o,r,l),lo=!1,p=e.memoizedState,o.state=p,Ev(e,r,o,s);var g=e.memoizedState;a!==f||p!==g||Gn.current||lo?(typeof m=="function"&&(Sw(e,t,m,r),g=e.memoizedState),(c=lo||OC(e,t,c,r,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return Rw(n,e,t,r,i,s)}function Rw(n,e,t,r,s,i){hI(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&RC(e,t,!1),Hi(n,e,i);r=e.stateNode,sV.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Zu(e,n.child,null,i),e.child=Zu(e,null,a,i)):Rn(n,e,a,i),e.memoizedState=r.state,s&&RC(e,t,!0),e.child}function dI(n){var e=n.stateNode;e.pendingContext?xC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&xC(n,e.context,!1),wb(n,e.containerInfo)}function HC(n,e,t,r,s){return Ju(),pb(s),e.flags|=256,Rn(n,e,t,r),e.child}var Pw={dehydrated:null,treeContext:null,retryLane:0};function Iw(n){return{baseLanes:n,cachePool:null,transitions:null}}function fI(n,e,t){var r=e.pendingProps,s=ot.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Qe(ot,s&1),n===null)return Aw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ny(o,r,0,null),n=Ml(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=Iw(t),e.memoizedState=Pw,n):Rb(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return iV(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Go(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Go(a,i):(i=Ml(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?Iw(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=Pw,r}return i=n.child,n=i.sibling,r=Go(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Rb(n,e){return e=Ny({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function $m(n,e,t,r){return r!==null&&pb(r),Zu(e,n.child,null,t),n=Rb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function iV(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=m0(Error(G(422))),$m(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ny({mode:"visible",children:r.children},s,0,null),i=Ml(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zu(e,n.child,null,o),e.child.memoizedState=Iw(o),e.memoizedState=Pw,i);if(!(e.mode&1))return $m(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(G(419)),r=m0(i,r,void 0),$m(n,e,o,r)}if(a=(o&n.childLanes)!==0,zn||a){if(r=Gt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zi(n,s),as(r,n,s,-1))}return Nb(),r=m0(Error(G(421))),$m(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=yV.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,gr=$o(s.nextSibling),vr=e,nt=!0,ss=null,n!==null&&(Pr[Ir++]=Mi,Pr[Ir++]=Ni,Pr[Ir++]=jl,Mi=n.id,Ni=n.overflow,jl=e),e=Rb(e,r.children),e.flags|=4096,e)}function WC(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),bw(n.return,e,t)}function g0(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function pI(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rn(n,e,r.children,t),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&WC(n,t,e);else if(n.tag===19)WC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Qe(ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Av(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),g0(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Av(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}g0(e,!0,t,null,i);break;case"together":g0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Eg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Hi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ul|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(G(153));if(e.child!==null){for(n=e.child,t=Go(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Go(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function oV(n,e,t){switch(e.tag){case 3:dI(e),Ju();break;case 5:BP(e);break;case 1:qn(e.type)&&gv(e);break;case 4:wb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qe(_v,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(ot,ot.current&1),e.flags|=128,null):t&e.child.childLanes?fI(n,e,t):(Qe(ot,ot.current&1),n=Hi(n,e,t),n!==null?n.sibling:null);Qe(ot,ot.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return pI(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,uI(n,e,t)}return Hi(n,e,t)}var mI,kw,gI,vI;mI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};kw=function(){};gI=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,Na(Os.current);var i=null;switch(t){case"input":s=Z0(n,s),r=Z0(n,r),i=[];break;case"select":s=ct({},s,{value:void 0}),r=ct({},r,{value:void 0}),i=[];break;case"textarea":s=nw(n,s),r=nw(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=pv)}sw(t,r);var o;t=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&et("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};vI=function(n,e,t,r){t!==r&&(e.flags|=4)};function Kh(n,e){if(!nt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function dn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function aV(n,e,t){var r=e.pendingProps;switch(fb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(e),null;case 1:return qn(e.type)&&mv(),dn(e),null;case 3:return r=e.stateNode,eh(),tt(Gn),tt(bn),Ab(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Bm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(jw(ss),ss=null))),kw(n,e),dn(e),null;case 5:Eb(e);var s=Na(Jd.current);if(t=e.type,n!==null&&e.stateNode!=null)gI(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return dn(e),null}if(n=Na(Os.current),Bm(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Ls]=e,r[Yd]=i,n=(e.mode&1)!==0,t){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<rd.length;s++)et(rd[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":eC(r,i),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},et("invalid",r);break;case"textarea":nC(r,i),et("invalid",r)}sw(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&jm(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&jm(r.textContent,a,n),s=["children",""+a]):Bd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&et("scroll",r)}switch(t){case"input":km(r),tC(r,i,!0);break;case"textarea":km(r),rC(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=pv)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=WR(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Ls]=e,n[Yd]=r,mI(n,e,!1,!1),e.stateNode=n;e:{switch(o=iw(t,r),t){case"dialog":et("cancel",n),et("close",n),s=r;break;case"iframe":case"object":case"embed":et("load",n),s=r;break;case"video":case"audio":for(s=0;s<rd.length;s++)et(rd[s],n);s=r;break;case"source":et("error",n),s=r;break;case"img":case"image":case"link":et("error",n),et("load",n),s=r;break;case"details":et("toggle",n),s=r;break;case"input":eC(n,r),s=Z0(n,r),et("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=ct({},r,{value:void 0}),et("invalid",n);break;case"textarea":nC(n,r),s=nw(n,r),et("invalid",n);break;default:s=r}sw(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?KR(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&GR(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ud(n,l):typeof l=="number"&&Ud(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&et("scroll",n):l!=null&&JA(n,i,l,o))}switch(t){case"input":km(n),tC(n,r,!1);break;case"textarea":km(n),rC(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Yo(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Bc(n,!!r.multiple,i,!1):r.defaultValue!=null&&Bc(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=pv)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dn(e),null;case 6:if(n&&e.stateNode!=null)vI(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(t=Na(Jd.current),Na(Os.current),Bm(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ls]=e,(i=r.nodeValue!==t)&&(n=vr,n!==null))switch(n.tag){case 3:jm(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&jm(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ls]=e,e.stateNode=r}return dn(e),null;case 13:if(tt(ot),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&gr!==null&&e.mode&1&&!(e.flags&128))DP(),Ju(),e.flags|=98560,i=!1;else if(i=Bm(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Ls]=e}else Ju(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dn(e),i=!1}else ss!==null&&(jw(ss),ss=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ot.current&1?Ft===0&&(Ft=3):Nb())),e.updateQueue!==null&&(e.flags|=4),dn(e),null);case 4:return eh(),kw(n,e),n===null&&Kd(e.stateNode.containerInfo),dn(e),null;case 10:return vb(e.type._context),dn(e),null;case 17:return qn(e.type)&&mv(),dn(e),null;case 19:if(tt(ot),i=e.memoizedState,i===null)return dn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Kh(i,!1);else{if(Ft!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Av(n),o!==null){for(e.flags|=128,Kh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Qe(ot,ot.current&1|2),e.child}n=n.sibling}i.tail!==null&&wt()>nh&&(e.flags|=128,r=!0,Kh(i,!1),e.lanes=4194304)}else{if(!r)if(n=Av(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Kh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nt)return dn(e),null}else 2*wt()-i.renderingStartTime>nh&&t!==1073741824&&(e.flags|=128,r=!0,Kh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=wt(),e.sibling=null,t=ot.current,Qe(ot,r?t&1|2:t&1),e):(dn(e),null);case 22:case 23:return Mb(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dr&1073741824&&(dn(e),e.subtreeFlags&6&&(e.flags|=8192)):dn(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function lV(n,e){switch(fb(e),e.tag){case 1:return qn(e.type)&&mv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return eh(),tt(Gn),tt(bn),Ab(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Eb(e),null;case 13:if(tt(ot),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Ju()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return tt(ot),null;case 4:return eh(),null;case 10:return vb(e.type._context),null;case 22:case 23:return Mb(),null;case 24:return null;default:return null}}var zm=!1,_n=!1,cV=typeof WeakSet=="function"?WeakSet:Set,te=null;function Fc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){mt(n,e,r)}else t.current=null}function Lw(n,e,t){try{t()}catch(r){mt(n,e,r)}}var GC=!1;function uV(n,e){if(mw=hv,n=AP(),hb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;t:for(;;){for(var m;f!==t||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===s&&(a=o),p===i&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(gw={focusedElem:n,selectionRange:t},hv=!1,te=e;te!==null;)if(e=te,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,te=n;else for(;te!==null;){e=te;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,w=g.memoizedState,y=e.stateNode,E=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:$r(e.type,_),w);y.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(R){mt(e,e.return,R)}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}return g=GC,GC=!1,g}function Pd(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&Lw(e,t,i)}s=s.next}while(s!==r)}}function Ly(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Mw(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function yI(n){var e=n.alternate;e!==null&&(n.alternate=null,yI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ls],delete e[Yd],delete e[_w],delete e[GF],delete e[qF])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function _I(n){return n.tag===5||n.tag===3||n.tag===4}function qC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_I(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nw(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=pv));else if(r!==4&&(n=n.child,n!==null))for(Nw(n,e,t),n=n.sibling;n!==null;)Nw(n,e,t),n=n.sibling}function Dw(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Dw(n,e,t),n=n.sibling;n!==null;)Dw(n,e,t),n=n.sibling}var nn=null,rs=!1;function to(n,e,t){for(t=t.child;t!==null;)wI(n,e,t),t=t.sibling}function wI(n,e,t){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(Sy,t)}catch{}switch(t.tag){case 5:_n||Fc(t,e);case 6:var r=nn,s=rs;nn=null,to(n,e,t),nn=r,rs=s,nn!==null&&(rs?(n=nn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):nn.removeChild(t.stateNode));break;case 18:nn!==null&&(rs?(n=nn,t=t.stateNode,n.nodeType===8?c0(n.parentNode,t):n.nodeType===1&&c0(n,t),Wd(n)):c0(nn,t.stateNode));break;case 4:r=nn,s=rs,nn=t.stateNode.containerInfo,rs=!0,to(n,e,t),nn=r,rs=s;break;case 0:case 11:case 14:case 15:if(!_n&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Lw(t,e,o),s=s.next}while(s!==r)}to(n,e,t);break;case 1:if(!_n&&(Fc(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){mt(t,e,a)}to(n,e,t);break;case 21:to(n,e,t);break;case 22:t.mode&1?(_n=(r=_n)||t.memoizedState!==null,to(n,e,t),_n=r):to(n,e,t);break;default:to(n,e,t)}}function KC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new cV),e.forEach(function(r){var s=_V.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Br(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,rs=!1;break e;case 3:nn=a.stateNode.containerInfo,rs=!0;break e;case 4:nn=a.stateNode.containerInfo,rs=!0;break e}a=a.return}if(nn===null)throw Error(G(160));wI(i,o,s),nn=null,rs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){mt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EI(e,n),e=e.sibling}function EI(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Br(e,n),ds(n),r&4){try{Pd(3,n,n.return),Ly(3,n)}catch(_){mt(n,n.return,_)}try{Pd(5,n,n.return)}catch(_){mt(n,n.return,_)}}break;case 1:Br(e,n),ds(n),r&512&&t!==null&&Fc(t,t.return);break;case 5:if(Br(e,n),ds(n),r&512&&t!==null&&Fc(t,t.return),n.flags&32){var s=n.stateNode;try{Ud(s,"")}catch(_){mt(n,n.return,_)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&zR(s,i),iw(a,o);var c=iw(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?KR(s,f):u==="dangerouslySetInnerHTML"?GR(s,f):u==="children"?Ud(s,f):JA(s,u,f,c)}switch(a){case"input":ew(s,i);break;case"textarea":HR(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Bc(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Bc(s,!!i.multiple,i.defaultValue,!0):Bc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yd]=i}catch(_){mt(n,n.return,_)}}break;case 6:if(Br(e,n),ds(n),r&4){if(n.stateNode===null)throw Error(G(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(_){mt(n,n.return,_)}}break;case 3:if(Br(e,n),ds(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Wd(e.containerInfo)}catch(_){mt(n,n.return,_)}break;case 4:Br(e,n),ds(n);break;case 13:Br(e,n),ds(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kb=wt())),r&4&&KC(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(_n=(c=_n)||u,Br(e,n),_n=c):Br(e,n),ds(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(te=n,u=n.child;u!==null;){for(f=te=u;te!==null;){switch(p=te,m=p.child,p.tag){case 0:case 11:case 14:case 15:Pd(4,p,p.return);break;case 1:Fc(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){mt(r,t,_)}}break;case 5:Fc(p,p.return);break;case 22:if(p.memoizedState!==null){YC(f);continue}}m!==null?(m.return=p,te=m):YC(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qR("display",o))}catch(_){mt(n,n.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){mt(n,n.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Br(e,n),ds(n),r&4&&KC(n);break;case 21:break;default:Br(e,n),ds(n)}}function ds(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(_I(t)){var r=t;break e}t=t.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ud(s,""),r.flags&=-33);var i=qC(n);Dw(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qC(n);Nw(n,a,o);break;default:throw Error(G(161))}}catch(l){mt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function hV(n,e,t){te=n,AI(n)}function AI(n,e,t){for(var r=(n.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||zm;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||_n;a=zm;var c=_n;if(zm=o,(_n=l)&&!c)for(te=s;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?QC(s):l!==null?(l.return=o,te=l):QC(s);for(;i!==null;)te=i,AI(i),i=i.sibling;te=s,zm=a,_n=c}XC(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,te=i):XC(n)}}function XC(n){for(;te!==null;){var e=te;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_n||Ly(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_n)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:$r(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&MC(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}MC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Wd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}_n||e.flags&512&&Mw(e)}catch(p){mt(e,e.return,p)}}if(e===n){te=null;break}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}}function YC(n){for(;te!==null;){var e=te;if(e===n){te=null;break}var t=e.sibling;if(t!==null){t.return=e.return,te=t;break}te=e.return}}function QC(n){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ly(4,e)}catch(l){mt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){mt(e,s,l)}}var i=e.return;try{Mw(e)}catch(l){mt(e,i,l)}break;case 5:var o=e.return;try{Mw(e)}catch(l){mt(e,o,l)}}}catch(l){mt(e,e.return,l)}if(e===n){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var dV=Math.ceil,Tv=Qi.ReactCurrentDispatcher,Pb=Qi.ReactCurrentOwner,Nr=Qi.ReactCurrentBatchConfig,Me=0,Gt=null,Tt=null,sn=0,dr=0,Vc=ha(0),Ft=0,nf=null,Ul=0,My=0,Ib=0,Id=null,$n=null,kb=0,nh=1/0,ri=null,Cv=!1,Ow=null,Ho=null,Hm=!1,Do=null,xv=0,kd=0,Fw=null,Ag=-1,bg=0;function Ln(){return Me&6?wt():Ag!==-1?Ag:Ag=wt()}function Wo(n){return n.mode&1?Me&2&&sn!==0?sn&-sn:XF.transition!==null?(bg===0&&(bg=oP()),bg):(n=je,n!==0||(n=window.event,n=n===void 0?16:fP(n.type)),n):1}function as(n,e,t,r){if(50<kd)throw kd=0,Fw=null,Error(G(185));Yp(n,t,r),(!(Me&2)||n!==Gt)&&(n===Gt&&(!(Me&2)&&(My|=t),Ft===4&&uo(n,sn)),Kn(n,r),t===1&&Me===0&&!(e.mode&1)&&(nh=wt()+500,Py&&da()))}function Kn(n,e){var t=n.callbackNode;X2(n,e);var r=uv(n,n===Gt?sn:0);if(r===0)t!==null&&oC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&oC(t),e===1)n.tag===0?KF(JC.bind(null,n)):LP(JC.bind(null,n)),HF(function(){!(Me&6)&&da()}),t=null;else{switch(aP(r)){case 1:t=rb;break;case 4:t=sP;break;case 16:t=cv;break;case 536870912:t=iP;break;default:t=cv}t=II(t,bI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function bI(n,e){if(Ag=-1,bg=0,Me&6)throw Error(G(327));var t=n.callbackNode;if(Wc()&&n.callbackNode!==t)return null;var r=uv(n,n===Gt?sn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Rv(n,r);else{e=r;var s=Me;Me|=2;var i=TI();(Gt!==n||sn!==e)&&(ri=null,nh=wt()+500,Ll(n,e));do try{mV();break}catch(a){SI(n,a)}while(!0);gb(),Tv.current=i,Me=s,Tt!==null?e=0:(Gt=null,sn=0,e=Ft)}if(e!==0){if(e===2&&(s=uw(n),s!==0&&(r=s,e=Vw(n,s))),e===1)throw t=nf,Ll(n,0),uo(n,r),Kn(n,wt()),t;if(e===6)uo(n,r);else{if(s=n.current.alternate,!(r&30)&&!fV(s)&&(e=Rv(n,r),e===2&&(i=uw(n),i!==0&&(r=i,e=Vw(n,i))),e===1))throw t=nf,Ll(n,0),uo(n,r),Kn(n,wt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Ta(n,$n,ri);break;case 3:if(uo(n,r),(r&130023424)===r&&(e=kb+500-wt(),10<e)){if(uv(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Ln(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=yw(Ta.bind(null,n,$n,ri),e);break}Ta(n,$n,ri);break;case 4:if(uo(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-os(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dV(r/1960))-r,10<r){n.timeoutHandle=yw(Ta.bind(null,n,$n,ri),r);break}Ta(n,$n,ri);break;case 5:Ta(n,$n,ri);break;default:throw Error(G(329))}}}return Kn(n,wt()),n.callbackNode===t?bI.bind(null,n):null}function Vw(n,e){var t=Id;return n.current.memoizedState.isDehydrated&&(Ll(n,e).flags|=256),n=Rv(n,e),n!==2&&(e=$n,$n=t,e!==null&&jw(e)),n}function jw(n){$n===null?$n=n:$n.push.apply($n,n)}function fV(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!ls(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function uo(n,e){for(e&=~Ib,e&=~My,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-os(e),r=1<<t;n[t]=-1,e&=~r}}function JC(n){if(Me&6)throw Error(G(327));Wc();var e=uv(n,0);if(!(e&1))return Kn(n,wt()),null;var t=Rv(n,e);if(n.tag!==0&&t===2){var r=uw(n);r!==0&&(e=r,t=Vw(n,r))}if(t===1)throw t=nf,Ll(n,0),uo(n,e),Kn(n,wt()),t;if(t===6)throw Error(G(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ta(n,$n,ri),Kn(n,wt()),null}function Lb(n,e){var t=Me;Me|=1;try{return n(e)}finally{Me=t,Me===0&&(nh=wt()+500,Py&&da())}}function $l(n){Do!==null&&Do.tag===0&&!(Me&6)&&Wc();var e=Me;Me|=1;var t=Nr.transition,r=je;try{if(Nr.transition=null,je=1,n)return n()}finally{je=r,Nr.transition=t,Me=e,!(Me&6)&&da()}}function Mb(){dr=Vc.current,tt(Vc)}function Ll(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,zF(t)),Tt!==null)for(t=Tt.return;t!==null;){var r=t;switch(fb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mv();break;case 3:eh(),tt(Gn),tt(bn),Ab();break;case 5:Eb(r);break;case 4:eh();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:vb(r.type._context);break;case 22:case 23:Mb()}t=t.return}if(Gt=n,Tt=n=Go(n.current,null),sn=dr=e,Ft=0,nf=null,Ib=My=Ul=0,$n=Id=null,Ma!==null){for(e=0;e<Ma.length;e++)if(t=Ma[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}Ma=null}return n}function SI(n,e){do{var t=Tt;try{if(gb(),_g.current=Sv,bv){for(var r=at.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bv=!1}if(Bl=0,Wt=Nt=at=null,Rd=!1,Zd=0,Pb.current=null,t===null||t.return===null){Ft=1,nf=e,Tt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=jC(o);if(m!==null){m.flags&=-257,BC(m,o,a,i,e),m.mode&1&&VC(i,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var _=new Set;_.add(l),e.updateQueue=_}else g.add(l);break e}else{if(!(e&1)){VC(i,c,e),Nb();break e}l=Error(G(426))}}else if(nt&&a.mode&1){var w=jC(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),BC(w,o,a,i,e),pb(th(l,a));break e}}i=l=th(l,a),Ft!==4&&(Ft=2),Id===null?Id=[i]:Id.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=aI(i,l,e);LC(i,y);break e;case 1:a=l;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ho===null||!Ho.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=lI(i,a,e);LC(i,R);break e}}i=i.return}while(i!==null)}xI(t)}catch(O){e=O,Tt===t&&t!==null&&(Tt=t=t.return);continue}break}while(!0)}function TI(){var n=Tv.current;return Tv.current=Sv,n===null?Sv:n}function Nb(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Gt===null||!(Ul&268435455)&&!(My&268435455)||uo(Gt,sn)}function Rv(n,e){var t=Me;Me|=2;var r=TI();(Gt!==n||sn!==e)&&(ri=null,Ll(n,e));do try{pV();break}catch(s){SI(n,s)}while(!0);if(gb(),Me=t,Tv.current=r,Tt!==null)throw Error(G(261));return Gt=null,sn=0,Ft}function pV(){for(;Tt!==null;)CI(Tt)}function mV(){for(;Tt!==null&&!B2();)CI(Tt)}function CI(n){var e=PI(n.alternate,n,dr);n.memoizedProps=n.pendingProps,e===null?xI(n):Tt=e,Pb.current=null}function xI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=lV(t,e),t!==null){t.flags&=32767,Tt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ft=6,Tt=null;return}}else if(t=aV(t,e,dr),t!==null){Tt=t;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=n}while(e!==null);Ft===0&&(Ft=5)}function Ta(n,e,t){var r=je,s=Nr.transition;try{Nr.transition=null,je=1,gV(n,e,t,r)}finally{Nr.transition=s,je=r}return null}function gV(n,e,t,r){do Wc();while(Do!==null);if(Me&6)throw Error(G(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(G(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(Y2(n,i),n===Gt&&(Tt=Gt=null,sn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Hm||(Hm=!0,II(cv,function(){return Wc(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Nr.transition,Nr.transition=null;var o=je;je=1;var a=Me;Me|=4,Pb.current=null,uV(n,t),EI(t,n),OF(gw),hv=!!mw,gw=mw=null,n.current=t,hV(t),U2(),Me=a,je=o,Nr.transition=i}else n.current=t;if(Hm&&(Hm=!1,Do=n,xv=s),i=n.pendingLanes,i===0&&(Ho=null),H2(t.stateNode),Kn(n,wt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cv)throw Cv=!1,n=Ow,Ow=null,n;return xv&1&&n.tag!==0&&Wc(),i=n.pendingLanes,i&1?n===Fw?kd++:(kd=0,Fw=n):kd=0,da(),null}function Wc(){if(Do!==null){var n=aP(xv),e=Nr.transition,t=je;try{if(Nr.transition=null,je=16>n?16:n,Do===null)var r=!1;else{if(n=Do,Do=null,xv=0,Me&6)throw Error(G(331));var s=Me;for(Me|=4,te=n.current;te!==null;){var i=te,o=i.child;if(te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var u=te;switch(u.tag){case 0:case 11:case 15:Pd(8,u,i)}var f=u.child;if(f!==null)f.return=u,te=f;else for(;te!==null;){u=te;var p=u.sibling,m=u.return;if(yI(u),u===c){te=null;break}if(p!==null){p.return=m,te=p;break}te=m}}}var g=i.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,te=o;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pd(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,te=y;break e}te=i.return}}var E=n.current;for(te=E;te!==null;){o=te;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,te=S;else e:for(o=E;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ly(9,a)}}catch(O){mt(a,a.return,O)}if(a===o){te=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,te=R;break e}te=a.return}}if(Me=s,da(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(Sy,n)}catch{}r=!0}return r}finally{je=t,Nr.transition=e}}return!1}function ZC(n,e,t){e=th(t,e),e=aI(n,e,1),n=zo(n,e,1),e=Ln(),n!==null&&(Yp(n,1,e),Kn(n,e))}function mt(n,e,t){if(n.tag===3)ZC(n,n,t);else for(;e!==null;){if(e.tag===3){ZC(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ho===null||!Ho.has(r))){n=th(t,n),n=lI(e,n,1),e=zo(e,n,1),n=Ln(),e!==null&&(Yp(e,1,n),Kn(e,n));break}}e=e.return}}function vV(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ln(),n.pingedLanes|=n.suspendedLanes&t,Gt===n&&(sn&t)===t&&(Ft===4||Ft===3&&(sn&130023424)===sn&&500>wt()-kb?Ll(n,0):Ib|=t),Kn(n,e)}function RI(n,e){e===0&&(n.mode&1?(e=Nm,Nm<<=1,!(Nm&130023424)&&(Nm=4194304)):e=1);var t=Ln();n=zi(n,e),n!==null&&(Yp(n,e,t),Kn(n,t))}function yV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),RI(n,t)}function _V(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),RI(n,t)}var PI;PI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Gn.current)zn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return zn=!1,oV(n,e,t);zn=!!(n.flags&131072)}else zn=!1,nt&&e.flags&1048576&&MP(e,yv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Eg(n,e),n=e.pendingProps;var s=Qu(e,bn.current);Hc(e,t),s=Sb(null,e,r,n,s,t);var i=Tb();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qn(r)?(i=!0,gv(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_b(e),s.updater=ky,e.stateNode=s,s._reactInternals=e,Tw(e,r,n,t),e=Rw(null,e,r,!0,i,t)):(e.tag=0,nt&&i&&db(e),Rn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Eg(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=EV(r),n=$r(r,n),s){case 0:e=xw(null,e,r,n,t);break e;case 1:e=zC(null,e,r,n,t);break e;case 11:e=UC(null,e,r,n,t);break e;case 14:e=$C(null,e,r,$r(r.type,n),t);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),xw(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),zC(n,e,r,s,t);case 3:e:{if(dI(e),n===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,jP(n,e),Ev(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=th(Error(G(423)),e),e=HC(n,e,r,t,s);break e}else if(r!==s){s=th(Error(G(424)),e),e=HC(n,e,r,t,s);break e}else for(gr=$o(e.stateNode.containerInfo.firstChild),vr=e,nt=!0,ss=null,t=FP(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ju(),r===s){e=Hi(n,e,t);break e}Rn(n,e,r,t)}e=e.child}return e;case 5:return BP(e),n===null&&Aw(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,vw(r,s)?o=null:i!==null&&vw(r,i)&&(e.flags|=32),hI(n,e),Rn(n,e,o,t),e.child;case 6:return n===null&&Aw(e),null;case 13:return fI(n,e,t);case 4:return wb(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Zu(e,null,r,t):Rn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),UC(n,e,r,s,t);case 7:return Rn(n,e,e.pendingProps,t),e.child;case 8:return Rn(n,e,e.pendingProps.children,t),e.child;case 12:return Rn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Qe(_v,r._currentValue),r._currentValue=o,i!==null)if(ls(i.value,o)){if(i.children===s.children&&!Gn.current){e=Hi(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Di(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),bw(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),bw(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hc(e,t),s=Or(s),r=r(s),e.flags|=1,Rn(n,e,r,t),e.child;case 14:return r=e.type,s=$r(r,e.pendingProps),s=$r(r.type,s),$C(n,e,r,s,t);case 15:return cI(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),Eg(n,e),e.tag=1,qn(r)?(n=!0,gv(e)):n=!1,Hc(e,t),oI(e,r,s),Tw(e,r,s,t),Rw(null,e,r,!0,n,t);case 19:return pI(n,e,t);case 22:return uI(n,e,t)}throw Error(G(156,e.tag))};function II(n,e){return rP(n,e)}function wV(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(n,e,t,r){return new wV(n,e,t,r)}function Db(n){return n=n.prototype,!(!n||!n.isReactComponent)}function EV(n){if(typeof n=="function")return Db(n)?1:0;if(n!=null){if(n=n.$$typeof,n===eb)return 11;if(n===tb)return 14}return 2}function Go(n,e){var t=n.alternate;return t===null?(t=Mr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Sg(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")Db(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Rc:return Ml(t.children,s,i,e);case ZA:o=8,s|=8;break;case X0:return n=Mr(12,t,e,s|2),n.elementType=X0,n.lanes=i,n;case Y0:return n=Mr(13,t,e,s),n.elementType=Y0,n.lanes=i,n;case Q0:return n=Mr(19,t,e,s),n.elementType=Q0,n.lanes=i,n;case BR:return Ny(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case VR:o=10;break e;case jR:o=9;break e;case eb:o=11;break e;case tb:o=14;break e;case ao:o=16,r=null;break e}throw Error(G(130,n==null?n:typeof n,""))}return e=Mr(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function Ml(n,e,t,r){return n=Mr(7,n,r,e),n.lanes=t,n}function Ny(n,e,t,r){return n=Mr(22,n,r,e),n.elementType=BR,n.lanes=t,n.stateNode={isHidden:!1},n}function v0(n,e,t){return n=Mr(6,n,null,e),n.lanes=t,n}function y0(n,e,t){return e=Mr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function AV(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J_(0),this.expirationTimes=J_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J_(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ob(n,e,t,r,s,i,o,a,l){return n=new AV(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mr(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},_b(i),n}function bV(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xc,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function kI(n){if(!n)return Qo;n=n._reactInternals;e:{if(Jl(n)!==n||n.tag!==1)throw Error(G(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(n.tag===1){var t=n.type;if(qn(t))return kP(n,t,e)}return e}function LI(n,e,t,r,s,i,o,a,l){return n=Ob(t,r,!0,n,s,i,o,a,l),n.context=kI(null),t=n.current,r=Ln(),s=Wo(t),i=Di(r,s),i.callback=e??null,zo(t,i,s),n.current.lanes=s,Yp(n,s,r),Kn(n,r),n}function Dy(n,e,t,r){var s=e.current,i=Ln(),o=Wo(s);return t=kI(t),e.context===null?e.context=t:e.pendingContext=t,e=Di(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=zo(s,e,o),n!==null&&(as(n,s,o,i),yg(n,s,o)),o}function Pv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function e1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Fb(n,e){e1(n,e),(n=n.alternate)&&e1(n,e)}function SV(){return null}var MI=typeof reportError=="function"?reportError:function(n){console.error(n)};function Vb(n){this._internalRoot=n}Oy.prototype.render=Vb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(G(409));Dy(n,e,null,null)};Oy.prototype.unmount=Vb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;$l(function(){Dy(null,n,null,null)}),e[$i]=null}};function Oy(n){this._internalRoot=n}Oy.prototype.unstable_scheduleHydration=function(n){if(n){var e=uP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<co.length&&e!==0&&e<co[t].priority;t++);co.splice(t,0,n),t===0&&dP(n)}};function jb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function t1(){}function TV(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Pv(o);i.call(c)}}var o=LI(e,r,n,0,null,!1,!1,"",t1);return n._reactRootContainer=o,n[$i]=o.current,Kd(n.nodeType===8?n.parentNode:n),$l(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Pv(l);a.call(c)}}var l=Ob(n,0,!1,null,null,!1,!1,"",t1);return n._reactRootContainer=l,n[$i]=l.current,Kd(n.nodeType===8?n.parentNode:n),$l(function(){Dy(e,l,t,r)}),l}function Vy(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Pv(o);a.call(l)}}Dy(e,o,n,s)}else o=TV(t,e,n,s,r);return Pv(o)}lP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=nd(e.pendingLanes);t!==0&&(sb(e,t|1),Kn(e,wt()),!(Me&6)&&(nh=wt()+500,da()))}break;case 13:$l(function(){var r=zi(n,1);if(r!==null){var s=Ln();as(r,n,1,s)}}),Fb(n,1)}};ib=function(n){if(n.tag===13){var e=zi(n,134217728);if(e!==null){var t=Ln();as(e,n,134217728,t)}Fb(n,134217728)}};cP=function(n){if(n.tag===13){var e=Wo(n),t=zi(n,e);if(t!==null){var r=Ln();as(t,n,e,r)}Fb(n,e)}};uP=function(){return je};hP=function(n,e){var t=je;try{return je=n,e()}finally{je=t}};aw=function(n,e,t){switch(e){case"input":if(ew(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=Ry(r);if(!s)throw Error(G(90));$R(r),ew(r,s)}}}break;case"textarea":HR(n,t);break;case"select":e=t.value,e!=null&&Bc(n,!!t.multiple,e,!1)}};QR=Lb;JR=$l;var CV={usingClientEntryPoint:!1,Events:[Jp,Lc,Ry,XR,YR,Lb]},Xh={findFiberByHostInstance:La,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xV={bundleType:Xh.bundleType,version:Xh.version,rendererPackageName:Xh.rendererPackageName,rendererConfig:Xh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=tP(n),n===null?null:n.stateNode},findFiberByHostInstance:Xh.findFiberByHostInstance||SV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wm.isDisabled&&Wm.supportsFiber)try{Sy=Wm.inject(xV),Ds=Wm}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CV;wr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jb(e))throw Error(G(200));return bV(n,e,null,t)};wr.createRoot=function(n,e){if(!jb(n))throw Error(G(299));var t=!1,r="",s=MI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ob(n,1,!1,null,null,t,!1,r,s),n[$i]=e.current,Kd(n.nodeType===8?n.parentNode:n),new Vb(e)};wr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(G(188)):(n=Object.keys(n).join(","),Error(G(268,n)));return n=tP(e),n=n===null?null:n.stateNode,n};wr.flushSync=function(n){return $l(n)};wr.hydrate=function(n,e,t){if(!Fy(e))throw Error(G(200));return Vy(null,n,e,!0,t)};wr.hydrateRoot=function(n,e,t){if(!jb(n))throw Error(G(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=MI;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=LI(e,null,n,1,t??null,s,!1,i,o),n[$i]=e.current,Kd(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Oy(e)};wr.render=function(n,e,t){if(!Fy(e))throw Error(G(200));return Vy(null,n,e,!1,t)};wr.unmountComponentAtNode=function(n){if(!Fy(n))throw Error(G(40));return n._reactRootContainer?($l(function(){Vy(null,null,n,!1,function(){n._reactRootContainer=null,n[$i]=null})}),!0):!1};wr.unstable_batchedUpdates=Lb;wr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Fy(t))throw Error(G(200));if(n==null||n._reactInternals===void 0)throw Error(G(38));return Vy(n,e,t,!1,r)};wr.version="18.3.1-next-f1338f8080-20240426";function NI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NI)}catch(n){console.error(n)}}NI(),NR.exports=wr;var jy=NR.exports,DI,n1=jy;DI=n1.createRoot,n1.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rf(){return rf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rf.apply(this,arguments)}var Oo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Oo||(Oo={}));const r1="popstate";function RV(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Bw("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:FI(s)}return IV(e,t,null,n)}function Vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function OI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PV(){return Math.random().toString(36).substr(2,8)}function s1(n,e){return{usr:n.state,key:n.key,idx:e}}function Bw(n,e,t,r){return t===void 0&&(t=null),rf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?gh(e):e,{state:t,key:e&&e.key||r||PV()})}function FI(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function IV(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Oo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(rf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Oo.Pop;let w=u(),y=w==null?null:w-c;c=w,l&&l({action:a,location:_.location,delta:y})}function p(w,y){a=Oo.Push;let E=Bw(_.location,w,y);c=u()+1;let S=s1(E,c),R=_.createHref(E);try{o.pushState(S,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(R)}i&&l&&l({action:a,location:_.location,delta:1})}function m(w,y){a=Oo.Replace;let E=Bw(_.location,w,y);c=u();let S=s1(E,c),R=_.createHref(E);o.replaceState(S,"",R),i&&l&&l({action:a,location:_.location,delta:0})}function g(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof w=="string"?w:FI(w);return E=E.replace(/ $/,"%20"),Vt(y,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,y)}let _={get action(){return a},get location(){return n(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(r1,f),l=w,()=>{s.removeEventListener(r1,f),l=null}},createHref(w){return e(s,w)},createURL:g,encodeLocation(w){let y=g(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(w){return o.go(w)}};return _}var i1;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(i1||(i1={}));function kV(n,e,t){return t===void 0&&(t="/"),LV(n,e,t,!1)}function LV(n,e,t,r){let s=typeof e=="string"?gh(e):e,i=BI(s.pathname||"/",t);if(i==null)return null;let o=VI(n);MV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=HV(i);a=$V(o[l],c,r)}return a}function VI(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Vt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Nl([r,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(Vt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),VI(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:BV(c,i.index),routesMeta:u})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of jI(i.path))s(i,o,l)}),e}function jI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=jI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function MV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:UV(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const NV=/^:[\w-]+$/,DV=3,OV=2,FV=1,VV=10,jV=-2,o1=n=>n==="*";function BV(n,e){let t=n.split("/"),r=t.length;return t.some(o1)&&(r+=jV),e&&(r+=OV),t.filter(s=>!o1(s)).reduce((s,i)=>s+(NV.test(i)?DV:i===""?FV:VV),r)}function UV(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function $V(n,e,t){let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=a1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f&&c&&t&&!r[r.length-1].route.index&&(f=a1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Nl([i,f.pathname]),pathnameBase:YV(Nl([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Nl([i,f.pathnameBase]))}return o}function a1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=zV(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let _=a[f]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const g=a[f];return m&&!g?c[p]=void 0:c[p]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:n}}function zV(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),OI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function HV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return OI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function BI(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function WV(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?gh(n):n;return{pathname:t?t.startsWith("/")?t:GV(t,e):e,search:QV(r),hash:JV(s)}}function GV(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function _0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function KV(n,e){let t=qV(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function XV(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=gh(n):(s=rf({},n),Vt(!s.pathname||!s.pathname.includes("?"),_0("?","pathname","search",s)),Vt(!s.pathname||!s.pathname.includes("#"),_0("#","pathname","hash",s)),Vt(!s.search||!s.search.includes("#"),_0("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=WV(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Nl=n=>n.join("/").replace(/\/\/+/g,"/"),YV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),QV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,JV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ZV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const UI=["post","put","patch","delete"];new Set(UI);const ej=["get",...UI];new Set(ej);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sf.apply(this,arguments)}const Bb=A.createContext(null),tj=A.createContext(null),By=A.createContext(null),Uy=A.createContext(null),vh=A.createContext({outlet:null,matches:[],isDataRoute:!1}),$I=A.createContext(null);function $y(){return A.useContext(Uy)!=null}function zy(){return $y()||Vt(!1),A.useContext(Uy).location}function zI(n){A.useContext(By).static||A.useLayoutEffect(n)}function nj(){let{isDataRoute:n}=A.useContext(vh);return n?mj():rj()}function rj(){$y()||Vt(!1);let n=A.useContext(Bb),{basename:e,future:t,navigator:r}=A.useContext(By),{matches:s}=A.useContext(vh),{pathname:i}=zy(),o=JSON.stringify(KV(s,t.v7_relativeSplatPath)),a=A.useRef(!1);return zI(()=>{a.current=!0}),A.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=XV(c,JSON.parse(o),i,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Nl([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,i,n])}function sj(n,e){return ij(n,e)}function ij(n,e,t,r){$y()||Vt(!1);let{navigator:s}=A.useContext(By),{matches:i}=A.useContext(vh),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=zy(),u;if(e){var f;let w=typeof e=="string"?gh(e):e;l==="/"||(f=w.pathname)!=null&&f.startsWith(l)||Vt(!1),u=w}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=kV(n,{pathname:m}),_=uj(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Nl([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Nl([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,r);return e&&_?A.createElement(Uy.Provider,{value:{location:sf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Oo.Pop}},_):_}function oj(){let n=pj(),e=ZV(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const aj=A.createElement(oj,null);class lj extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(vh.Provider,{value:this.props.routeContext},A.createElement($I.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cj(n){let{routeContext:e,match:t,children:r}=n,s=A.useContext(Bb);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(vh.Provider,{value:e},r)}function uj(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Vt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=t,g=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,g=!1,_=null,w=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||aj,l&&(c<0&&p===0?(g=!0,w=null):c===p&&(g=!0,w=f.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,p+1)),E=()=>{let S;return m?S=_:g?S=w:f.route.Component?S=A.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,A.createElement(cj,{match:f,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?A.createElement(lj,{location:t.location,revalidation:t.revalidation,component:_,error:m,children:E(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):E()},null)}var HI=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(HI||{}),Iv=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Iv||{});function hj(n){let e=A.useContext(Bb);return e||Vt(!1),e}function dj(n){let e=A.useContext(tj);return e||Vt(!1),e}function fj(n){let e=A.useContext(vh);return e||Vt(!1),e}function WI(n){let e=fj(),t=e.matches[e.matches.length-1];return t.route.id||Vt(!1),t.route.id}function pj(){var n;let e=A.useContext($I),t=dj(Iv.UseRouteError),r=WI(Iv.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function mj(){let{router:n}=hj(HI.UseNavigateStable),e=WI(Iv.UseNavigateStable),t=A.useRef(!1);return zI(()=>{t.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,sf({fromRouteId:e},i)))},[n,e])}function gc(n){Vt(!1)}function gj(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Oo.Pop,navigator:i,static:o=!1,future:a}=n;$y()&&Vt(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:i,static:o,future:sf({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=gh(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:g="default"}=r,_=A.useMemo(()=>{let w=BI(u,l);return w==null?null:{location:{pathname:w,search:f,hash:p,state:m,key:g},navigationType:s}},[l,u,f,p,m,g,s]);return _==null?null:A.createElement(By.Provider,{value:c},A.createElement(Uy.Provider,{children:t,value:_}))}function vj(n){let{children:e,location:t}=n;return sj(Uw(e),t)}new Promise(()=>{});function Uw(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){t.push.apply(t,Uw(r.props.children,i));return}r.type!==gc&&Vt(!1),!r.props.index||!r.props.children||Vt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Uw(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const yj="6";try{window.__reactRouterVersion=yj}catch{}const _j="startTransition",l1=LR[_j];function wj(n){let{basename:e,children:t,future:r,window:s}=n,i=A.useRef();i.current==null&&(i.current=RV({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=A.useCallback(f=>{c&&l1?l1(()=>l(f)):l(f)},[l,c]);return A.useLayoutEffect(()=>o.listen(u),[o,u]),A.createElement(gj,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var c1;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(c1||(c1={}));var u1;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(u1||(u1={}));function Ej(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Ub(...n){return e=>n.forEach(t=>Ej(t,e))}function xt(...n){return A.useCallback(Ub(...n),n)}var Vr=A.forwardRef((n,e)=>{const{children:t,...r}=n,s=A.Children.toArray(t),i=s.find(Aj);if(i){const o=i.props.children,a=s.map(l=>l===i?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:l);return N.jsx($w,{...r,ref:e,children:A.isValidElement(o)?A.cloneElement(o,void 0,a):null})}return N.jsx($w,{...r,ref:e,children:t})});Vr.displayName="Slot";var $w=A.forwardRef((n,e)=>{const{children:t,...r}=n;if(A.isValidElement(t)){const s=Sj(t);return A.cloneElement(t,{...bj(r,t.props),ref:e?Ub(e,s):s})}return A.Children.count(t)>1?A.Children.only(null):null});$w.displayName="SlotClone";var GI=({children:n})=>N.jsx(N.Fragment,{children:n});function Aj(n){return A.isValidElement(n)&&n.type===GI}function bj(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{i(...a),s(...a)}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function Sj(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Tj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vt=Tj.reduce((n,e)=>{const t=A.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Vr:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),N.jsx(a,{...o,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function $b(n,e){n&&jy.flushSync(()=>n.dispatchEvent(e))}var Cj="VisuallyHidden",zb=A.forwardRef((n,e)=>N.jsx(vt.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));zb.displayName=Cj;var xj=zb,qI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],s=0;s<arguments.length;s++){var i=arguments[s];if(i){var o=typeof i;if(o==="string"||o==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var a=t.apply(null,i);a&&r.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){r.push(i.toString());continue}for(var l in i)e.call(i,l)&&i[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(qI);var Rj=qI.exports;const kn=Ay(Rj);function em(n,e=[]){let t=[];function r(i,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:p,children:m,...g}=f,_=(p==null?void 0:p[n][l])||a,w=A.useMemo(()=>g,Object.values(g));return N.jsx(_.Provider,{value:w,children:m})}function u(f,p){const m=(p==null?void 0:p[n][l])||a,g=A.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,Pj(s,...e)]}function Pj(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ue(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var Us=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},Ij=LR.useId||(()=>{}),kj=0;function Tg(n){const[e,t]=A.useState(Ij());return Us(()=>{t(r=>r??String(kj++))},[n]),e?`radix-${e}`:""}function Qn(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function KI({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=Lj({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:r,a=Qn(t),l=A.useCallback(c=>{if(i){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else s(c)},[i,n,s,a]);return[o,l]}function Lj({defaultProp:n,onChange:e}){const t=A.useState(n),[r]=t,s=A.useRef(r),i=Qn(e);return A.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),t}function XI(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Mj="DismissableLayer",zw="dismissableLayer.update",Nj="dismissableLayer.pointerDownOutside",Dj="dismissableLayer.focusOutside",h1,YI=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),QI=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(YI),[u,f]=A.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),g=xt(e,C=>f(C)),_=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=_.indexOf(w),E=u?_.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,R=E>=y,O=Vj(C=>{const T=C.target,k=[...c.branches].some(M=>M.contains(T));!R||k||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),V=jj(C=>{const T=C.target;[...c.branches].some(M=>M.contains(T))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return XI(C=>{E===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(h1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),d1(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=h1)}},[u,p,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),d1())},[u,c]),A.useEffect(()=>{const C=()=>m({});return document.addEventListener(zw,C),()=>document.removeEventListener(zw,C)},[]),N.jsx(vt.div,{...l,ref:g,style:{pointerEvents:S?R?"auto":"none":void 0,...n.style},onFocusCapture:ue(n.onFocusCapture,V.onFocusCapture),onBlurCapture:ue(n.onBlurCapture,V.onBlurCapture),onPointerDownCapture:ue(n.onPointerDownCapture,O.onPointerDownCapture)})});QI.displayName=Mj;var Oj="DismissableLayerBranch",Fj=A.forwardRef((n,e)=>{const t=A.useContext(YI),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),N.jsx(vt.div,{...n,ref:s})});Fj.displayName=Oj;function Vj(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){JI(Nj,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function jj(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&JI(Dj,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function d1(){const n=new CustomEvent(zw);document.dispatchEvent(n)}function JI(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?$b(s,i):s.dispatchEvent(i)}var w0="focusScope.autoFocusOnMount",E0="focusScope.autoFocusOnUnmount",f1={bubbles:!1,cancelable:!0},Bj="FocusScope",ZI=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,l]=A.useState(null),c=Qn(s),u=Qn(i),f=A.useRef(null),p=xt(e,_=>l(_)),m=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let _=function(S){if(m.paused||!a)return;const R=S.target;a.contains(R)?f.current=R:ro(f.current,{select:!0})},w=function(S){if(m.paused||!a)return;const R=S.relatedTarget;R!==null&&(a.contains(R)||ro(f.current,{select:!0}))},y=function(S){if(document.activeElement===document.body)for(const O of S)O.removedNodes.length>0&&ro(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",w);const E=new MutationObserver(y);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",w),E.disconnect()}}},[r,a,m.paused]),A.useEffect(()=>{if(a){m1.add(m);const _=document.activeElement;if(!a.contains(_)){const y=new CustomEvent(w0,f1);a.addEventListener(w0,c),a.dispatchEvent(y),y.defaultPrevented||(Uj(Gj(ek(a)),{select:!0}),document.activeElement===_&&ro(a))}return()=>{a.removeEventListener(w0,c),setTimeout(()=>{const y=new CustomEvent(E0,f1);a.addEventListener(E0,u),a.dispatchEvent(y),y.defaultPrevented||ro(_??document.body,{select:!0}),a.removeEventListener(E0,u),m1.remove(m)},0)}}},[a,c,u,m]);const g=A.useCallback(_=>{if(!t&&!r||m.paused)return;const w=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,y=document.activeElement;if(w&&y){const E=_.currentTarget,[S,R]=$j(E);S&&R?!_.shiftKey&&y===R?(_.preventDefault(),t&&ro(S,{select:!0})):_.shiftKey&&y===S&&(_.preventDefault(),t&&ro(R,{select:!0})):y===E&&_.preventDefault()}},[t,r,m.paused]);return N.jsx(vt.div,{tabIndex:-1,...o,ref:p,onKeyDown:g})});ZI.displayName=Bj;function Uj(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ro(r,{select:e}),document.activeElement!==t)return}function $j(n){const e=ek(n),t=p1(e,n),r=p1(e.reverse(),n);return[t,r]}function ek(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function p1(n,e){for(const t of n)if(!zj(t,{upTo:e}))return t}function zj(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Hj(n){return n instanceof HTMLInputElement&&"select"in n}function ro(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Hj(n)&&e&&n.select()}}var m1=Wj();function Wj(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=g1(n,e),n.unshift(e)},remove(e){var t;n=g1(n,e),(t=n[0])==null||t.resume()}}}function g1(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function Gj(n){return n.filter(e=>e.tagName!=="A")}function qj(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var tk=n=>{const{present:e,children:t}=n,r=Kj(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=xt(r.ref,Xj(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};tk.displayName="Presence";function Kj(n){const[e,t]=A.useState(),r=A.useRef({}),s=A.useRef(n),i=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=qj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=Gm(r.current);i.current=a==="mounted"?c:"none"},[a]),Us(()=>{const c=r.current,u=s.current;if(u!==n){const p=i.current,m=Gm(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Us(()=>{if(e){const c=f=>{const m=Gm(r.current).includes(f.animationName);f.target===e&&m&&jy.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(i.current=Gm(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function Gm(n){return(n==null?void 0:n.animationName)||"none"}function Xj(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ms=function(){return Ms=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ms.apply(this,arguments)};function nk(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Yj(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function A0(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Qj(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var Jj=typeof window<"u"?A.useLayoutEffect:A.useEffect,v1=new WeakMap;function Zj(n,e){var t=Qj(null,function(r){return n.forEach(function(s){return A0(s,r)})});return Jj(function(){var r=v1.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||A0(a,null)}),i.forEach(function(a){s.has(a)||A0(a,o)})}v1.set(t,n)},[n]),t}function eB(n){return n}function tB(n,e){e===void 0&&(e=eB);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return s}function nB(n){n===void 0&&(n={});var e=tB(null);return e.options=Ms({async:!0,ssr:!1},n),e}var rk=function(n){var e=n.sideCar,t=nk(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,Ms({},t))};rk.isSideCarExport=!0;function rB(n,e){return n.useMedium(e),rk}var sB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iB(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=sB();return e&&n.setAttribute("nonce",e),n}function oB(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function aB(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var lB=function(){var n=0,e=null;return{add:function(t){n==0&&(e=iB())&&(oB(e,t),aB(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cB=function(){var n=lB();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},sk=function(){var n=cB(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},uB=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},dc=new WeakMap,qm=new WeakMap,Km={},b0=0,ik=function(n){return n&&(n.host||ik(n.parentNode))},hB=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=ik(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},dB=function(n,e,t,r){var s=hB(e,Array.isArray(n)?n:[n]);Km[t]||(Km[t]=new WeakMap);var i=Km[t],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),g=m!==null&&m!=="false",_=(dc.get(p)||0)+1,w=(i.get(p)||0)+1;dc.set(p,_),i.set(p,w),o.push(p),_===1&&g&&qm.set(p,!0),w===1&&p.setAttribute(t,"true"),g||p.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return u(e),a.clear(),b0++,function(){o.forEach(function(f){var p=dc.get(f)-1,m=i.get(f)-1;dc.set(f,p),i.set(f,m),p||(qm.has(f)||f.removeAttribute(r),qm.delete(f)),m||f.removeAttribute(t)}),b0--,b0||(dc=new WeakMap,dc=new WeakMap,qm=new WeakMap,Km={})}},fB=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=uB(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),dB(r,s,t,"aria-hidden")):function(){return null}};const Zl={asChild:{type:"boolean"}},pB={width:{type:"string",className:"rt-r-w",customProperties:["--width"],responsive:!0},minWidth:{type:"string",className:"rt-r-min-w",customProperties:["--min-width"],responsive:!0},maxWidth:{type:"string",className:"rt-r-max-w",customProperties:["--max-width"],responsive:!0}},mB={height:{type:"string",className:"rt-r-h",customProperties:["--height"],responsive:!0},minHeight:{type:"string",className:"rt-r-min-h",customProperties:["--min-height"],responsive:!0},maxHeight:{type:"string",className:"rt-r-max-h",customProperties:["--max-height"],responsive:!0}},Hb=["gray","gold","bronze","brown","yellow","amber","orange","tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","lime","mint","sky"],gB=["auto","gray","mauve","slate","sage","olive","sand"],ok={color:{type:"enum",values:Hb,default:void 0}},ak={color:{type:"enum",values:Hb,default:""}},Wb={highContrast:{type:"boolean",className:"rt-high-contrast",default:void 0}},vB=["normal","start","end","both"],lk={trim:{type:"enum",className:"rt-r-lt",values:vB,responsive:!0}},yB=["left","center","right"],_B={align:{type:"enum",className:"rt-r-ta",values:yB,responsive:!0}},wB=["wrap","nowrap","pretty","balance"],Gb={wrap:{type:"enum",className:"rt-r-tw",values:wB,responsive:!0}},qb={truncate:{type:"boolean",className:"rt-truncate"}},EB=["light","regular","medium","bold"],ck={weight:{type:"enum",className:"rt-r-weight",values:EB,responsive:!0}},Kb=["initial","xs","sm","md","lg","xl"];function uk(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ld(n){return typeof n=="object"&&Object.keys(n).some(e=>Kb.includes(e))}function AB({className:n,customProperties:e,...t}){const r=hk({allowArbitraryValues:!0,className:n,...t}),s=bB({customProperties:e,...t});return[r,s]}function hk({allowArbitraryValues:n,value:e,className:t,propValues:r,parseValue:s=i=>i}){const i=[];if(e){if(typeof e=="string"&&r.includes(e))return y1(t,e,s);if(Ld(e)){const o=e;for(const a in o){if(!uk(o,a)||!Kb.includes(a))continue;const l=o[a];if(l!==void 0){if(r.includes(l)){const c=y1(t,l,s),u=a==="initial"?c:`${a}:${c}`;i.push(u)}else if(n){const c=a==="initial"?t:`${a}:${t}`;i.push(c)}}}return i.join(" ")}if(n)return t}}function y1(n,e,t){const r=n?"-":"",s=t(e),i=s==null?void 0:s.startsWith("-"),o=i?"-":"",a=i?s==null?void 0:s.substring(1):s;return`${o}${n}${r}${a}`}function bB({customProperties:n,value:e,propValues:t,parseValue:r=s=>s}){let s={};if(!(!e||typeof e=="string"&&t.includes(e))){if(typeof e=="string"&&(s=Object.fromEntries(n.map(i=>[i,e]))),Ld(e)){const i=e;for(const o in i){if(!uk(i,o)||!Kb.includes(o))continue;const a=i[o];if(!t.includes(a))for(const l of n)s={[o==="initial"?l:`${l}-${o}`]:a,...s}}}for(const i in s){const o=s[i];o!==void 0&&(s[i]=r(o))}return s}}function _1(...n){let e={};for(const t of n)t&&(e={...e,...t});return Object.keys(e).length?e:void 0}function SB(...n){return Object.assign({},...n)}function fa(n,...e){let t,r;const s={...n},i=SB(...e);for(const o in i){let a=s[o];const l=i[o];if(l.default!==void 0&&a===void 0&&(a=l.default),l.type==="enum"&&![l.default,...l.values].includes(a)&&!Ld(a)&&(a=l.default),s[o]=a,"className"in l&&l.className){delete s[o];const c="responsive"in l;if(!a||Ld(a)&&!c)continue;if(Ld(a)&&(l.default!==void 0&&a.initial===void 0&&(a.initial=l.default),l.type==="enum"&&([l.default,...l.values].includes(a.initial)||(a.initial=l.default))),l.type==="enum"){const u=hk({allowArbitraryValues:!1,value:a,className:l.className,propValues:l.values,parseValue:l.parseValue});t=kn(t,u);continue}if(l.type==="string"||l.type==="enum | string"){const u=l.type==="string"?[]:l.values,[f,p]=AB({className:l.className,customProperties:l.customProperties,propValues:u,parseValue:l.parseValue,value:a});r=_1(r,p),t=kn(t,f);continue}if(l.type==="boolean"&&a){t=kn(t,l.className);continue}}}return s.className=kn(t,n.className),s.style=_1(r,n.style),s}const Ea=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],yh={m:{type:"enum | string",values:Ea,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:Ea,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:Ea,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:Ea,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:Ea,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:Ea,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:Ea,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},TB=["span","div","label","p"],CB=["1","2","3","4","5","6","7","8","9"],xB={as:{type:"enum",values:TB,default:"span"},...Zl,size:{type:"enum",className:"rt-r-size",values:CB,responsive:!0},...ck,..._B,...lk,...qb,...Gb,...ok,...Wb},Da=A.forwardRef((n,e)=>{const{children:t,className:r,asChild:s,as:i="span",color:o,...a}=fa(n,xB,yh);return A.createElement(Vr,{"data-accent-color":o,...a,ref:e,className:kn("rt-Text",r)},s?t:A.createElement(i,null,t))});Da.displayName="Text";const RB=["top","right","bottom","left"],Jo=Math.min,pr=Math.max,kv=Math.round,Xm=Math.floor,Zo=n=>({x:n,y:n}),PB={left:"right",right:"left",bottom:"top",top:"bottom"},IB={start:"end",end:"start"};function Hw(n,e,t){return pr(n,Jo(e,t))}function Wi(n,e){return typeof n=="function"?n(e):n}function Gi(n){return n.split("-")[0]}function _h(n){return n.split("-")[1]}function Xb(n){return n==="x"?"y":"x"}function Yb(n){return n==="y"?"height":"width"}function ea(n){return["top","bottom"].includes(Gi(n))?"y":"x"}function Qb(n){return Xb(ea(n))}function kB(n,e,t){t===void 0&&(t=!1);const r=_h(n),s=Qb(n),i=Yb(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Lv(o)),[o,Lv(o)]}function LB(n){const e=Lv(n);return[Ww(n),e,Ww(e)]}function Ww(n){return n.replace(/start|end/g,e=>IB[e])}function MB(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function NB(n,e,t,r){const s=_h(n);let i=MB(Gi(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Ww)))),i}function Lv(n){return n.replace(/left|right|bottom|top/g,e=>PB[e])}function DB(n){return{top:0,right:0,bottom:0,left:0,...n}}function dk(n){return typeof n!="number"?DB(n):{top:n,right:n,bottom:n,left:n}}function Mv(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function w1(n,e,t){let{reference:r,floating:s}=n;const i=ea(e),o=Qb(e),a=Yb(o),l=Gi(e),c=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(_h(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const OB=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:f}=w1(c,r,l),p=r,m={},g=0;for(let _=0;_<a.length;_++){const{name:w,fn:y}=a[_],{x:E,y:S,data:R,reset:O}=await y({x:u,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});u=E??u,f=S??f,m={...m,[w]:{...m[w],...R}},O&&g<=50&&(g++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):O.rects),{x:u,y:f}=w1(c,p,l)),_=-1)}return{x:u,y:f,placement:p,strategy:s,middlewareData:m}};async function of(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Wi(e,n),g=dk(m),w=a[p?f==="floating"?"reference":"floating":f],y=Mv(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},O=Mv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:S,strategy:l}):E);return{top:(y.top-O.top+g.top)/R.y,bottom:(O.bottom-y.bottom+g.bottom)/R.y,left:(y.left-O.left+g.left)/R.x,right:(O.right-y.right+g.right)/R.x}}const FB=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Wi(n,e)||{};if(c==null)return{};const f=dk(u),p={x:t,y:r},m=Qb(s),g=Yb(m),_=await o.getDimensions(c),w=m==="y",y=w?"top":"left",E=w?"bottom":"right",S=w?"clientHeight":"clientWidth",R=i.reference[g]+i.reference[m]-p[m]-i.floating[g],O=p[m]-i.reference[m],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=V?V[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(V)))&&(C=a.floating[S]||i.floating[g]);const T=R/2-O/2,k=C/2-_[g]/2-1,M=Jo(f[y],k),F=Jo(f[E],k),j=M,D=C-_[g]-F,q=C/2-_[g]/2+T,re=Hw(j,q,D),Z=!l.arrow&&_h(s)!=null&&q!==re&&i.reference[g]/2-(q<j?M:F)-_[g]/2<0,W=Z?q<j?q-j:q-D:0;return{[m]:p[m]+W,data:{[m]:re,centerOffset:q-re-W,...Z&&{alignmentOffset:W}},reset:Z}}}),VB=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:_=!0,...w}=Wi(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const y=Gi(s),E=ea(a),S=Gi(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(S||!_?[Lv(a)]:LB(a)),V=g!=="none";!p&&V&&O.push(...NB(a,_,g,R));const C=[a,...O],T=await of(e,w),k=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&k.push(T[y]),f){const q=kB(s,o,R);k.push(T[q[0]],T[q[1]])}if(M=[...M,{placement:s,overflows:k}],!k.every(q=>q<=0)){var F,j;const q=(((F=i.flip)==null?void 0:F.index)||0)+1,re=C[q];if(re)return{data:{index:q,overflows:M},reset:{placement:re}};let Z=(j=M.filter(W=>W.overflows[0]<=0).sort((W,U)=>W.overflows[1]-U.overflows[1])[0])==null?void 0:j.placement;if(!Z)switch(m){case"bestFit":{var D;const W=(D=M.filter(U=>{if(V){const z=ea(U.placement);return z===E||z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(z=>z>0).reduce((z,X)=>z+X,0)]).sort((U,z)=>U[1]-z[1])[0])==null?void 0:D[0];W&&(Z=W);break}case"initialPlacement":Z=a;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function E1(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function A1(n){return RB.some(e=>n[e]>=0)}const jB=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Wi(n,e);switch(r){case"referenceHidden":{const i=await of(e,{...s,elementContext:"reference"}),o=E1(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:A1(o)}}}case"escaped":{const i=await of(e,{...s,altBoundary:!0}),o=E1(i,t.floating);return{data:{escapedOffsets:o,escaped:A1(o)}}}default:return{}}}}};async function BB(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Gi(t),a=_h(t),l=ea(t)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=Wi(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const UB=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await BB(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},$B=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:y,y:E}=w;return{x:y,y:E}}},...l}=Wi(n,e),c={x:t,y:r},u=await of(e,l),f=ea(Gi(s)),p=Xb(f);let m=c[p],g=c[f];if(i){const w=p==="y"?"top":"left",y=p==="y"?"bottom":"right",E=m+u[w],S=m-u[y];m=Hw(E,m,S)}if(o){const w=f==="y"?"top":"left",y=f==="y"?"bottom":"right",E=g+u[w],S=g-u[y];g=Hw(E,g,S)}const _=a.fn({...e,[p]:m,[f]:g});return{..._,data:{x:_.x-t,y:_.y-r,enabled:{[p]:i,[f]:o}}}}}},zB=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Wi(n,e),u={x:t,y:r},f=ea(s),p=Xb(f);let m=u[p],g=u[f];const _=Wi(a,e),w=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const S=p==="y"?"height":"width",R=i.reference[p]-i.floating[S]+w.mainAxis,O=i.reference[p]+i.reference[S]-w.mainAxis;m<R?m=R:m>O&&(m=O)}if(c){var y,E;const S=p==="y"?"width":"height",R=["top","left"].includes(Gi(s)),O=i.reference[f]-i.floating[S]+(R&&((y=o.offset)==null?void 0:y[f])||0)+(R?0:w.crossAxis),V=i.reference[f]+i.reference[S]+(R?0:((E=o.offset)==null?void 0:E[f])||0)-(R?w.crossAxis:0);g<O?g=O:g>V&&(g=V)}return{[p]:m,[f]:g}}}},HB=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Wi(n,e),u=await of(e,c),f=Gi(s),p=_h(s),m=ea(s)==="y",{width:g,height:_}=i.floating;let w,y;f==="top"||f==="bottom"?(w=f,y=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=f,w=p==="end"?"top":"bottom");const E=_-u.top-u.bottom,S=g-u.left-u.right,R=Jo(_-u[w],E),O=Jo(g-u[y],S),V=!e.middlewareData.shift;let C=R,T=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=E),V&&!p){const M=pr(u.left,0),F=pr(u.right,0),j=pr(u.top,0),D=pr(u.bottom,0);m?T=g-2*(M!==0||F!==0?M+F:pr(u.left,u.right)):C=_-2*(j!==0||D!==0?j+D:pr(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:C});const k=await o.getDimensions(a.floating);return g!==k.width||_!==k.height?{reset:{rects:!0}}:{}}}};function Hy(){return typeof window<"u"}function wh(n){return fk(n)?(n.nodeName||"").toLowerCase():"#document"}function yr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function qs(n){var e;return(e=(fk(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function fk(n){return Hy()?n instanceof Node||n instanceof yr(n).Node:!1}function cs(n){return Hy()?n instanceof Element||n instanceof yr(n).Element:!1}function $s(n){return Hy()?n instanceof HTMLElement||n instanceof yr(n).HTMLElement:!1}function b1(n){return!Hy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof yr(n).ShadowRoot}function tm(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=us(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function WB(n){return["table","td","th"].includes(wh(n))}function Wy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Jb(n){const e=Zb(),t=cs(n)?us(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function GB(n){let e=ta(n);for(;$s(e)&&!rh(e);){if(Jb(e))return e;if(Wy(e))return null;e=ta(e)}return null}function Zb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rh(n){return["html","body","#document"].includes(wh(n))}function us(n){return yr(n).getComputedStyle(n)}function Gy(n){return cs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ta(n){if(wh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||b1(n)&&n.host||qs(n);return b1(e)?e.host:e}function pk(n){const e=ta(n);return rh(e)?n.ownerDocument?n.ownerDocument.body:n.body:$s(e)&&tm(e)?e:pk(e)}function af(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=pk(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=yr(s);if(i){const a=Gw(o);return e.concat(o,o.visualViewport||[],tm(s)?s:[],a&&t?af(a):[])}return e.concat(s,af(s,[],t))}function Gw(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function mk(n){const e=us(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=$s(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=kv(t)!==i||kv(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function eS(n){return cs(n)?n:n.contextElement}function Gc(n){const e=eS(n);if(!$s(e))return Zo(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=mk(e);let o=(i?kv(t.width):t.width)/r,a=(i?kv(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const qB=Zo(0);function gk(n){const e=yr(n);return!Zb()||!e.visualViewport?qB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function KB(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==yr(n)?!1:e}function zl(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=eS(n);let o=Zo(1);e&&(r?cs(r)&&(o=Gc(r)):o=Gc(n));const a=KB(i,t,r)?gk(i):Zo(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const p=yr(i),m=r&&cs(r)?yr(r):r;let g=p,_=Gw(g);for(;_&&r&&m!==g;){const w=Gc(_),y=_.getBoundingClientRect(),E=us(_),S=y.left+(_.clientLeft+parseFloat(E.paddingLeft))*w.x,R=y.top+(_.clientTop+parseFloat(E.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=S,c+=R,g=yr(_),_=Gw(g)}}return Mv({width:u,height:f,x:l,y:c})}function XB(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=qs(r),a=e?Wy(e.floating):!1;if(r===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},c=Zo(1);const u=Zo(0),f=$s(r);if((f||!f&&!i)&&((wh(r)!=="body"||tm(o))&&(l=Gy(r)),$s(r))){const p=zl(r);c=Gc(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function YB(n){return Array.from(n.getClientRects())}function qw(n,e){const t=Gy(n).scrollLeft;return e?e.left+t:zl(qs(n)).left+t}function QB(n){const e=qs(n),t=Gy(n),r=n.ownerDocument.body,s=pr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=pr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+qw(n);const a=-t.scrollTop;return us(r).direction==="rtl"&&(o+=pr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function JB(n,e){const t=yr(n),r=qs(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Zb();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function ZB(n,e){const t=zl(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=$s(n)?Gc(n):Zo(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function S1(n,e,t){let r;if(e==="viewport")r=JB(n,t);else if(e==="document")r=QB(qs(n));else if(cs(e))r=ZB(e,t);else{const s=gk(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Mv(r)}function vk(n,e){const t=ta(n);return t===e||!cs(t)||rh(t)?!1:us(t).position==="fixed"||vk(t,e)}function e4(n,e){const t=e.get(n);if(t)return t;let r=af(n,[],!1).filter(a=>cs(a)&&wh(a)!=="body"),s=null;const i=us(n).position==="fixed";let o=i?ta(n):n;for(;cs(o)&&!rh(o);){const a=us(o),l=Jb(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||tm(o)&&!l&&vk(n,o))?r=r.filter(u=>u!==o):s=a,o=ta(o)}return e.set(n,r),r}function t4(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?Wy(e)?[]:e4(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=S1(e,u,s);return c.top=pr(f.top,c.top),c.right=Jo(f.right,c.right),c.bottom=Jo(f.bottom,c.bottom),c.left=pr(f.left,c.left),c},S1(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function n4(n){const{width:e,height:t}=mk(n);return{width:e,height:t}}function r4(n,e,t){const r=$s(e),s=qs(e),i=t==="fixed",o=zl(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Zo(0);if(r||!r&&!i)if((wh(e)!=="body"||tm(s))&&(a=Gy(e)),r){const m=zl(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=qw(s));let c=0,u=0;if(s&&!r&&!i){const m=s.getBoundingClientRect();u=m.top+a.scrollTop,c=m.left+a.scrollLeft-qw(s,m)}const f=o.left+a.scrollLeft-l.x-c,p=o.top+a.scrollTop-l.y-u;return{x:f,y:p,width:o.width,height:o.height}}function S0(n){return us(n).position==="static"}function T1(n,e){if(!$s(n)||us(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return qs(n)===t&&(t=t.ownerDocument.body),t}function yk(n,e){const t=yr(n);if(Wy(n))return t;if(!$s(n)){let s=ta(n);for(;s&&!rh(s);){if(cs(s)&&!S0(s))return s;s=ta(s)}return t}let r=T1(n,e);for(;r&&WB(r)&&S0(r);)r=T1(r,e);return r&&rh(r)&&S0(r)&&!Jb(r)?t:r||GB(n)||t}const s4=async function(n){const e=this.getOffsetParent||yk,t=this.getDimensions,r=await t(n.floating);return{reference:r4(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function i4(n){return us(n).direction==="rtl"}const o4={convertOffsetParentRelativeRectToViewportRelativeRect:XB,getDocumentElement:qs,getClippingRect:t4,getOffsetParent:yk,getElementRects:s4,getClientRects:YB,getDimensions:n4,getScale:Gc,isElement:cs,isRTL:i4};function a4(n,e){let t=null,r;const s=qs(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:f,height:p}=n.getBoundingClientRect();if(a||e(),!f||!p)return;const m=Xm(u),g=Xm(s.clientWidth-(c+f)),_=Xm(s.clientHeight-(u+p)),w=Xm(c),E={rootMargin:-m+"px "+-g+"px "+-_+"px "+-w+"px",threshold:pr(0,Jo(1,l))||1};let S=!0;function R(O){const V=O[0].intersectionRatio;if(V!==l){if(!S)return o();V?o(!1,V):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{t=new IntersectionObserver(R,{...E,root:s.ownerDocument})}catch{t=new IntersectionObserver(R,E)}t.observe(n)}return o(!0),i}function l4(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=eS(n),u=s||i?[...c?af(c):[],...af(e)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",t,{passive:!0}),i&&y.addEventListener("resize",t)});const f=c&&a?a4(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(y=>{let[E]=y;E&&E.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let g,_=l?zl(n):null;l&&w();function w(){const y=zl(n);_&&(y.x!==_.x||y.y!==_.y||y.width!==_.width||y.height!==_.height)&&t(),_=y,g=requestAnimationFrame(w)}return t(),()=>{var y;u.forEach(E=>{s&&E.removeEventListener("scroll",t),i&&E.removeEventListener("resize",t)}),f==null||f(),(y=m)==null||y.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const c4=UB,u4=$B,h4=VB,d4=HB,f4=jB,C1=FB,p4=zB,m4=(n,e,t)=>{const r=new Map,s={platform:o4,...t},i={...s.platform,_c:r};return OB(n,e,{...s,platform:i})};var Cg=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Nv(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Nv(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!Nv(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function _k(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function x1(n,e){const t=_k(n);return Math.round(e*t)/t}function T0(n){const e=A.useRef(n);return Cg(()=>{e.current=n}),e}function g4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=A.useState(r);Nv(p,r)||m(r);const[g,_]=A.useState(null),[w,y]=A.useState(null),E=A.useCallback(U=>{U!==V.current&&(V.current=U,_(U))},[]),S=A.useCallback(U=>{U!==C.current&&(C.current=U,y(U))},[]),R=i||g,O=o||w,V=A.useRef(null),C=A.useRef(null),T=A.useRef(u),k=l!=null,M=T0(l),F=T0(s),j=T0(c),D=A.useCallback(()=>{if(!V.current||!C.current)return;const U={placement:e,strategy:t,middleware:p};F.current&&(U.platform=F.current),m4(V.current,C.current,U).then(z=>{const X={...z,isPositioned:j.current!==!1};q.current&&!Nv(T.current,X)&&(T.current=X,jy.flushSync(()=>{f(X)}))})},[p,e,t,F,j]);Cg(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[c]);const q=A.useRef(!1);Cg(()=>(q.current=!0,()=>{q.current=!1}),[]),Cg(()=>{if(R&&(V.current=R),O&&(C.current=O),R&&O){if(M.current)return M.current(R,O,D);D()}},[R,O,D,M,k]);const re=A.useMemo(()=>({reference:V,floating:C,setReference:E,setFloating:S}),[E,S]),Z=A.useMemo(()=>({reference:R,floating:O}),[R,O]),W=A.useMemo(()=>{const U={position:t,left:0,top:0};if(!Z.floating)return U;const z=x1(Z.floating,u.x),X=x1(Z.floating,u.y);return a?{...U,transform:"translate("+z+"px, "+X+"px)",..._k(Z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:X}},[t,a,Z.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:D,refs:re,elements:Z,floatingStyles:W}),[u,D,re,Z,W])}const v4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?C1({element:r.current,padding:s}).fn(t):{}:r?C1({element:r,padding:s}).fn(t):{}}}},y4=(n,e)=>({...c4(n),options:[n,e]}),_4=(n,e)=>({...u4(n),options:[n,e]}),w4=(n,e)=>({...p4(n),options:[n,e]}),E4=(n,e)=>({...h4(n),options:[n,e]}),A4=(n,e)=>({...d4(n),options:[n,e]}),b4=(n,e)=>({...f4(n),options:[n,e]}),S4=(n,e)=>({...v4(n),options:[n,e]});var T4="Arrow",wk=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return N.jsx(vt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:N.jsx("polygon",{points:"0,0 30,0 15,10"})})});wk.displayName=T4;var C4=wk;function x4(n){const[e,t]=A.useState(void 0);return Us(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var tS="Popper",[Ek,qy]=em(tS),[R4,Ak]=Ek(tS),bk=n=>{const{__scopePopper:e,children:t}=n,[r,s]=A.useState(null);return N.jsx(R4,{scope:e,anchor:r,onAnchorChange:s,children:t})};bk.displayName=tS;var Sk="PopperAnchor",Tk=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=Ak(Sk,t),o=A.useRef(null),a=xt(e,o);return A.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:N.jsx(vt.div,{...s,ref:a})});Tk.displayName=Sk;var nS="PopperContent",[P4,I4]=Ek(nS),Ck=A.forwardRef((n,e)=>{var fe,ut,Je,Ie,Zn,Ar;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:g,..._}=n,w=Ak(nS,t),[y,E]=A.useState(null),S=xt(e,Ae=>E(Ae)),[R,O]=A.useState(null),V=x4(R),C=(V==null?void 0:V.width)??0,T=(V==null?void 0:V.height)??0,k=r+(i!=="center"?"-"+i:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(c)?c:[c],j=F.length>0,D={padding:M,boundary:F.filter(L4),altBoundary:j},{refs:q,floatingStyles:re,placement:Z,isPositioned:W,middlewareData:U}=g4({strategy:"fixed",placement:k,whileElementsMounted:(...Ae)=>l4(...Ae,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[y4({mainAxis:s+T,alignmentAxis:o}),l&&_4({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?w4():void 0,...D}),l&&E4({...D}),A4({...D,apply:({elements:Ae,rects:We,availableWidth:ht,availableHeight:rt})=>{const{width:hs,height:Xs}=We.reference,Ys=Ae.floating.style;Ys.setProperty("--radix-popper-available-width",`${ht}px`),Ys.setProperty("--radix-popper-available-height",`${rt}px`),Ys.setProperty("--radix-popper-anchor-width",`${hs}px`),Ys.setProperty("--radix-popper-anchor-height",`${Xs}px`)}}),R&&S4({element:R,padding:a}),M4({arrowWidth:C,arrowHeight:T}),p&&b4({strategy:"referenceHidden",...D})]}),[z,X]=Pk(Z),ce=Qn(g);Us(()=>{W&&(ce==null||ce())},[W,ce]);const se=(fe=U.arrow)==null?void 0:fe.x,ae=(ut=U.arrow)==null?void 0:ut.y,Be=((Je=U.arrow)==null?void 0:Je.centerOffset)!==0,[Ue,Pe]=A.useState();return Us(()=>{y&&Pe(window.getComputedStyle(y).zIndex)},[y]),N.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:W?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ue,"--radix-popper-transform-origin":[(Ie=U.transformOrigin)==null?void 0:Ie.x,(Zn=U.transformOrigin)==null?void 0:Zn.y].join(" "),...((Ar=U.hide)==null?void 0:Ar.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:N.jsx(P4,{scope:t,placedSide:z,onArrowChange:O,arrowX:se,arrowY:ae,shouldHideArrow:Be,children:N.jsx(vt.div,{"data-side":z,"data-align":X,..._,ref:S,style:{..._.style,animation:W?void 0:"none"}})})})});Ck.displayName=nS;var xk="PopperArrow",k4={top:"bottom",right:"left",bottom:"top",left:"right"},Rk=A.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=I4(xk,r),o=k4[i.placedSide];return N.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:N.jsx(C4,{...s,ref:t,style:{...s.style,display:"block"}})})});Rk.displayName=xk;function L4(n){return n!==null}var M4=n=>({name:"transformOrigin",options:n,fn(e){var w,y,E;const{placement:t,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=Pk(t),f={start:"0%",center:"50%",end:"100%"}[u],p=(((y=s.arrow)==null?void 0:y.x)??0)+a/2,m=(((E=s.arrow)==null?void 0:E.y)??0)+l/2;let g="",_="";return c==="bottom"?(g=o?f:`${p}px`,_=`${-l}px`):c==="top"?(g=o?f:`${p}px`,_=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,_=o?f:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,_=o?f:`${m}px`),{data:{x:g,y:_}}}});function Pk(n){const[e,t="center"]=n.split("-");return[e,t]}var N4=bk,Ik=Tk,kk=Ck,Lk=Rk,[Ky,eK]=em("Tooltip",[qy]),rS=qy(),Mk="TooltipProvider",D4=700,R1="tooltip.open",[O4,Nk]=Ky(Mk),Dk=n=>{const{__scopeTooltip:e,delayDuration:t=D4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,[o,a]=A.useState(!0),l=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),N.jsx(O4,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:A.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Dk.displayName=Mk;var Ok="Tooltip",[tK,Xy]=Ky(Ok),Kw="TooltipTrigger",F4=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Xy(Kw,t),i=Nk(Kw,t),o=rS(t),a=A.useRef(null),l=xt(e,a,s.onTriggerChange),c=A.useRef(!1),u=A.useRef(!1),f=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),N.jsx(Ik,{asChild:!0,...o,children:N.jsx(vt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:ue(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:ue(n.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:ue(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ue(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:ue(n.onBlur,s.onClose),onClick:ue(n.onClick,s.onClose)})})});F4.displayName=Kw;var V4="TooltipPortal",[nK,j4]=Ky(V4,{forceMount:void 0}),sh="TooltipContent",B4=A.forwardRef((n,e)=>{const t=j4(sh,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=Xy(sh,n.__scopeTooltip);return N.jsx(tk,{present:r||o.open,children:o.disableHoverableContent?N.jsx(Fk,{side:s,...i,ref:e}):N.jsx(U4,{side:s,...i,ref:e})})}),U4=A.forwardRef((n,e)=>{const t=Xy(sh,n.__scopeTooltip),r=Nk(sh,n.__scopeTooltip),s=A.useRef(null),i=xt(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:f}=r,p=A.useCallback(()=>{a(null),f(!1)},[f]),m=A.useCallback((g,_)=>{const w=g.currentTarget,y={x:g.clientX,y:g.clientY},E=W4(y,w.getBoundingClientRect()),S=G4(y,E),R=q4(_.getBoundingClientRect()),O=X4([...S,...R]);a(O),f(!0)},[f]);return A.useEffect(()=>()=>p(),[p]),A.useEffect(()=>{if(l&&u){const g=w=>m(w,u),_=w=>m(w,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",_)}}},[l,u,m,p]),A.useEffect(()=>{if(o){const g=_=>{const w=_.target,y={x:_.clientX,y:_.clientY},E=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),S=!K4(y,o);E?p():S&&(p(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,p]),N.jsx(Fk,{...n,ref:i})}),[$4,z4]=Ky(Ok,{isInside:!1}),Fk=A.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,l=Xy(sh,t),c=rS(t),{onClose:u}=l;return A.useEffect(()=>(document.addEventListener(R1,u),()=>document.removeEventListener(R1,u)),[u]),A.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),N.jsx(QI,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:N.jsxs(kk,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[N.jsx(GI,{children:r}),N.jsx($4,{scope:t,isInside:!0,children:N.jsx(xj,{id:l.contentId,role:"tooltip",children:s||r})})]})})});B4.displayName=sh;var Vk="TooltipArrow",H4=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=rS(t);return z4(Vk,t).isInside?null:N.jsx(Lk,{...s,...r,ref:e})});H4.displayName=Vk;function W4(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function G4(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function q4(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function K4(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function X4(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Y4(e)}function Y4(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Q4=Dk,jk=A.createContext(void 0),J4=n=>{const{dir:e,children:t}=n;return N.jsx(jk.Provider,{value:e,children:t})};function sS(n){const e=A.useContext(jk);return n||e||"ltr"}function Z4(n){switch(n){case"tomato":case"red":case"ruby":case"crimson":case"pink":case"plum":case"purple":case"violet":return"mauve";case"iris":case"indigo":case"blue":case"sky":case"cyan":return"slate";case"teal":case"jade":case"mint":case"green":return"sage";case"grass":case"lime":return"olive";case"yellow":case"amber":case"orange":case"brown":case"gold":case"bronze":return"sand";case"gray":return"gray"}}const Bk=["none","small","medium","large","full"],eU={radius:{type:"enum",values:Bk,default:void 0}},tU=["inherit","light","dark"],nU=["solid","translucent"],rU=["90%","95%","100%","105%","110%"],fr={...Zl,hasBackground:{type:"boolean",default:!0},appearance:{type:"enum",values:tU,default:"inherit"},accentColor:{type:"enum",values:Hb,default:"indigo"},grayColor:{type:"enum",values:gB,default:"auto"},panelBackground:{type:"enum",values:nU,default:"translucent"},radius:{type:"enum",values:Bk,default:"medium"},scaling:{type:"enum",values:rU,default:"100%"}},fc=()=>{},Xw=A.createContext(void 0),Uk=A.forwardRef((n,e)=>A.useContext(Xw)===void 0?A.createElement(Q4,{delayDuration:200},A.createElement(J4,{dir:"ltr"},A.createElement($k,{...n,ref:e}))):A.createElement(iS,{...n,ref:e}));Uk.displayName="Theme";const $k=A.forwardRef((n,e)=>{const{appearance:t=fr.appearance.default,accentColor:r=fr.accentColor.default,grayColor:s=fr.grayColor.default,panelBackground:i=fr.panelBackground.default,radius:o=fr.radius.default,scaling:a=fr.scaling.default,hasBackground:l=fr.hasBackground.default,...c}=n,[u,f]=A.useState(t);A.useEffect(()=>f(t),[t]);const[p,m]=A.useState(r);A.useEffect(()=>m(r),[r]);const[g,_]=A.useState(s);A.useEffect(()=>_(s),[s]);const[w,y]=A.useState(i);A.useEffect(()=>y(i),[i]);const[E,S]=A.useState(o);A.useEffect(()=>S(o),[o]);const[R,O]=A.useState(a);return A.useEffect(()=>O(a),[a]),A.createElement(iS,{...c,ref:e,isRoot:!0,hasBackground:l,appearance:u,accentColor:p,grayColor:g,panelBackground:w,radius:E,scaling:R,onAppearanceChange:f,onAccentColorChange:m,onGrayColorChange:_,onPanelBackgroundChange:y,onRadiusChange:S,onScalingChange:O})});$k.displayName="ThemeRoot";const iS=A.forwardRef((n,e)=>{const t=A.useContext(Xw),{asChild:r,isRoot:s,hasBackground:i,appearance:o=(t==null?void 0:t.appearance)??fr.appearance.default,accentColor:a=(t==null?void 0:t.accentColor)??fr.accentColor.default,grayColor:l=(t==null?void 0:t.resolvedGrayColor)??fr.grayColor.default,panelBackground:c=(t==null?void 0:t.panelBackground)??fr.panelBackground.default,radius:u=(t==null?void 0:t.radius)??fr.radius.default,scaling:f=(t==null?void 0:t.scaling)??fr.scaling.default,onAppearanceChange:p=fc,onAccentColorChange:m=fc,onGrayColorChange:g=fc,onPanelBackgroundChange:_=fc,onRadiusChange:w=fc,onScalingChange:y=fc,...E}=n,S=r?Vr:"div",R=l==="auto"?Z4(a):l,O=n.appearance==="light"||n.appearance==="dark",V=i===void 0?s||O:i;return A.createElement(Xw.Provider,{value:A.useMemo(()=>({appearance:o,accentColor:a,grayColor:l,resolvedGrayColor:R,panelBackground:c,radius:u,scaling:f,onAppearanceChange:p,onAccentColorChange:m,onGrayColorChange:g,onPanelBackgroundChange:_,onRadiusChange:w,onScalingChange:y}),[o,a,l,R,c,u,f,p,m,g,_,w,y])},A.createElement(S,{"data-is-root-theme":s?"true":"false","data-accent-color":a,"data-gray-color":R,"data-has-background":V?"true":"false","data-panel-background":c,"data-radius":u,"data-scaling":f,ref:e,...E,className:kn("radix-themes",{light:o==="light",dark:o==="dark"},E.className)}))});iS.displayName="ThemeImpl";var oS="Avatar",[sU,rK]=em(oS),[iU,zk]=sU(oS),Hk=A.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=A.useState("idle");return N.jsx(iU,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:N.jsx(vt.span,{...r,ref:e})})});Hk.displayName=oS;var Wk="AvatarImage",Gk=A.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,o=zk(Wk,t),a=aU(r),l=Qn(c=>{s(c),o.onImageLoadingStatusChange(c)});return Us(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?N.jsx(vt.img,{...i,ref:e,src:r}):null});Gk.displayName=Wk;var qk="AvatarFallback",oU=A.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=zk(qk,t),[o,a]=A.useState(r===void 0);return A.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?N.jsx(vt.span,{...s,ref:e}):null});oU.displayName=qk;function aU(n){const[e,t]=A.useState("idle");return Us(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,i=o=>()=>{r&&t(o)};return t("loading"),s.onload=i("loaded"),s.onerror=i("error"),s.src=n,()=>{r=!1}},[n]),e}var lU=Hk,cU=Gk;const Yw=A.forwardRef((n,e)=>{const{asChild:t,children:r,className:s,...i}=n,o=t?Vr:"blockquote";return A.createElement(Da,{asChild:!0,...i,ref:e,className:kn("rt-Blockquote",s)},A.createElement(o,null,r))});Yw.displayName="Blockquote";const Aa=["0","1","2","3","4","5","6","7","8","9"],uU={p:{type:"enum | string",className:"rt-r-p",customProperties:["--p"],values:Aa,responsive:!0},px:{type:"enum | string",className:"rt-r-px",customProperties:["--pl","--pr"],values:Aa,responsive:!0},py:{type:"enum | string",className:"rt-r-py",customProperties:["--pt","--pb"],values:Aa,responsive:!0},pt:{type:"enum | string",className:"rt-r-pt",customProperties:["--pt"],values:Aa,responsive:!0},pr:{type:"enum | string",className:"rt-r-pr",customProperties:["--pr"],values:Aa,responsive:!0},pb:{type:"enum | string",className:"rt-r-pb",customProperties:["--pb"],values:Aa,responsive:!0},pl:{type:"enum | string",className:"rt-r-pl",customProperties:["--pl"],values:Aa,responsive:!0}},C0=["visible","hidden","clip","scroll","auto"],hU=["static","relative","absolute","fixed","sticky"],Yh=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],dU=["0","1"],fU=["0","1"],pU={...uU,...pB,...mB,position:{type:"enum",className:"rt-r-position",values:hU,responsive:!0},inset:{type:"enum | string",className:"rt-r-inset",customProperties:["--inset"],values:Yh,responsive:!0},top:{type:"enum | string",className:"rt-r-top",customProperties:["--top"],values:Yh,responsive:!0},right:{type:"enum | string",className:"rt-r-right",customProperties:["--right"],values:Yh,responsive:!0},bottom:{type:"enum | string",className:"rt-r-bottom",customProperties:["--bottom"],values:Yh,responsive:!0},left:{type:"enum | string",className:"rt-r-left",customProperties:["--left"],values:Yh,responsive:!0},overflow:{type:"enum",className:"rt-r-overflow",values:C0,responsive:!0},overflowX:{type:"enum",className:"rt-r-ox",values:C0,responsive:!0},overflowY:{type:"enum",className:"rt-r-oy",values:C0,responsive:!0},flexBasis:{type:"string",className:"rt-r-fb",customProperties:["--flex-basis"],responsive:!0},flexShrink:{type:"enum | string",className:"rt-r-fs",customProperties:["--flex-shrink"],values:dU,responsive:!0},flexGrow:{type:"enum | string",className:"rt-r-fg",customProperties:["--flex-grow"],values:fU,responsive:!0},gridArea:{type:"string",className:"rt-r-ga",customProperties:["--grid-area"],responsive:!0},gridColumn:{type:"string",className:"rt-r-gc",customProperties:["--grid-column"],responsive:!0},gridColumnStart:{type:"string",className:"rt-r-gcs",customProperties:["--grid-column-start"],responsive:!0},gridColumnEnd:{type:"string",className:"rt-r-gce",customProperties:["--grid-column-end"],responsive:!0},gridRow:{type:"string",className:"rt-r-gr",customProperties:["--grid-row"],responsive:!0},gridRowStart:{type:"string",className:"rt-r-grs",customProperties:["--grid-row-start"],responsive:!0},gridRowEnd:{type:"string",className:"rt-r-gre",customProperties:["--grid-row-end"],responsive:!0}},mU=["1","2","3","4"],gU=["classic","solid","soft","surface","outline","ghost"],P1={...Zl,size:{type:"enum",className:"rt-r-size",values:mU,default:"2",responsive:!0},variant:{type:"enum",className:"rt-variant",values:gU,default:"solid"},...ak,...Wb,...eU,loading:{type:"boolean",className:"rt-loading",default:!1}},x0=["0","1","2","3","4","5","6","7","8","9"],vU={gap:{type:"enum | string",className:"rt-r-gap",customProperties:["--gap"],values:x0,responsive:!0},gapX:{type:"enum | string",className:"rt-r-cg",customProperties:["--column-gap"],values:x0,responsive:!0},gapY:{type:"enum | string",className:"rt-r-rg",customProperties:["--row-gap"],values:x0,responsive:!0}},yU=["div","span"],_U=["none","inline-flex","flex"],wU=["row","column","row-reverse","column-reverse"],EU=["start","center","end","baseline","stretch"],AU=["start","center","end","between"],bU=["nowrap","wrap","wrap-reverse"],SU={as:{type:"enum",values:yU,default:"div"},...Zl,display:{type:"enum",className:"rt-r-display",values:_U,responsive:!0},direction:{type:"enum",className:"rt-r-fd",values:wU,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:EU,responsive:!0},justify:{type:"enum",className:"rt-r-jc",values:AU,parseValue:TU,responsive:!0},wrap:{type:"enum",className:"rt-r-fw",values:bU,responsive:!0},...vU};function TU(n){return n==="between"?"space-between":n}const Oi=A.forwardRef((n,e)=>{const{className:t,asChild:r,as:s="div",...i}=fa(n,SU,pU,yh);return A.createElement(r?Vr:s,{...i,ref:e,className:kn("rt-Flex",t)})});Oi.displayName="Flex";const CU=["1","2","3"],xU={size:{type:"enum",className:"rt-r-size",values:CU,default:"2",responsive:!0},loading:{type:"boolean",default:!0}},Kk=A.forwardRef((n,e)=>{const{className:t,children:r,loading:s,...i}=fa(n,xU,yh);if(!s)return r;const o=A.createElement("span",{...i,ref:e,className:kn("rt-Spinner",t)},A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}));return r===void 0?o:A.createElement(Oi,{asChild:!0,position:"relative",align:"center",justify:"center"},A.createElement("span",null,A.createElement("span",{"aria-hidden":!0,style:{display:"contents",visibility:"hidden"},inert:void 0},r),A.createElement(Oi,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},A.createElement("span",null,o))))});Kk.displayName="Spinner";function RU(n,e){if(n!==void 0)return typeof n=="string"?e(n):Object.fromEntries(Object.entries(n).map(([t,r])=>[t,e(r)]))}function PU(n){switch(n){case"1":return"1";case"2":case"3":return"2";case"4":return"3"}}const Xk=A.forwardRef((n,e)=>{const{size:t=P1.size.default}=n,{className:r,children:s,asChild:i,color:o,radius:a,disabled:l=n.loading,...c}=fa(n,P1,yh);return A.createElement(i?Vr:"button",{"data-disabled":l||void 0,"data-accent-color":o,"data-radius":a,...c,ref:e,className:kn("rt-reset","rt-BaseButton",r),disabled:l},n.loading?A.createElement(A.Fragment,null,A.createElement("span",{style:{display:"contents",visibility:"hidden"},"aria-hidden":!0},s),A.createElement(zb,null,s),A.createElement(Oi,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},A.createElement("span",null,A.createElement(Kk,{size:RU(t,PU)})))):s)});Xk.displayName="BaseButton";const Qw=A.forwardRef(({className:n,...e},t)=>A.createElement(Xk,{...e,ref:t,className:kn("rt-Button",n)}));Qw.displayName="Button";const IU=["1","2","3","4","5"],kU=["surface","classic","ghost"],LU={...Zl,size:{type:"enum",className:"rt-r-size",values:IU,default:"1",responsive:!0},variant:{type:"enum",className:"rt-variant",values:kU,default:"surface"}},Yk=A.forwardRef((n,e)=>{const{asChild:t,className:r,...s}=fa(n,LU,yh);return A.createElement(t?Vr:"div",{ref:e,...s,className:kn("rt-reset","rt-BaseCard","rt-Card",r)})});Yk.displayName="Card";function aS(n){const e=n+"CollectionProvider",[t,r]=em(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:_}=m,w=no.useRef(null),y=no.useRef(new Map).current;return N.jsx(s,{scope:g,itemMap:y,collectionRef:w,children:_})};o.displayName=e;const a=n+"CollectionSlot",l=no.forwardRef((m,g)=>{const{scope:_,children:w}=m,y=i(a,_),E=xt(g,y.collectionRef);return N.jsx(Vr,{ref:E,children:w})});l.displayName=a;const c=n+"CollectionItemSlot",u="data-radix-collection-item",f=no.forwardRef((m,g)=>{const{scope:_,children:w,...y}=m,E=no.useRef(null),S=xt(g,E),R=i(c,_);return no.useEffect(()=>(R.itemMap.set(E,{ref:E,...y}),()=>void R.itemMap.delete(E))),N.jsx(Vr,{[u]:"",ref:S,children:w})});f.displayName=c;function p(m){const g=i(n+"CollectionConsumer",m);return no.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const y=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((R,O)=>y.indexOf(R.ref.current)-y.indexOf(O.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},p,r]}var R0="rovingFocusGroup.onEntryFocus",MU={bubbles:!1,cancelable:!0},Yy="RovingFocusGroup",[Jw,Qk,NU]=aS(Yy),[DU,Qy]=em(Yy,[NU]),[OU,FU]=DU(Yy),Jk=A.forwardRef((n,e)=>N.jsx(Jw.Provider,{scope:n.__scopeRovingFocusGroup,children:N.jsx(Jw.Slot,{scope:n.__scopeRovingFocusGroup,children:N.jsx(VU,{...n,ref:e})})}));Jk.displayName=Yy;var VU=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=n,p=A.useRef(null),m=xt(e,p),g=sS(i),[_=null,w]=KI({prop:o,defaultProp:a,onChange:l}),[y,E]=A.useState(!1),S=Qn(c),R=Qk(t),O=A.useRef(!1),[V,C]=A.useState(0);return A.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(R0,S),()=>T.removeEventListener(R0,S)},[S]),N.jsx(OU,{scope:t,orientation:r,dir:g,loop:s,currentTabStopId:_,onItemFocus:A.useCallback(T=>w(T),[w]),onItemShiftTab:A.useCallback(()=>E(!0),[]),onFocusableItemAdd:A.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:A.useCallback(()=>C(T=>T-1),[]),children:N.jsx(vt.div,{tabIndex:y||V===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:ue(n.onMouseDown,()=>{O.current=!0}),onFocus:ue(n.onFocus,T=>{const k=!O.current;if(T.target===T.currentTarget&&k&&!y){const M=new CustomEvent(R0,MU);if(T.currentTarget.dispatchEvent(M),!M.defaultPrevented){const F=R().filter(Z=>Z.focusable),j=F.find(Z=>Z.active),D=F.find(Z=>Z.id===_),re=[j,D,...F].filter(Boolean).map(Z=>Z.ref.current);tL(re,u)}}O.current=!1}),onBlur:ue(n.onBlur,()=>E(!1))})})}),Zk="RovingFocusGroupItem",eL=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,...o}=n,a=Tg(),l=i||a,c=FU(Zk,t),u=c.currentTabStopId===l,f=Qk(t),{onFocusableItemAdd:p,onFocusableItemRemove:m}=c;return A.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),N.jsx(Jw.ItemSlot,{scope:t,id:l,focusable:r,active:s,children:N.jsx(vt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:ue(n.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:ue(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:ue(n.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const _=UU(g,c.orientation,c.dir);if(_!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=f().filter(E=>E.focusable).map(E=>E.ref.current);if(_==="last")y.reverse();else if(_==="prev"||_==="next"){_==="prev"&&y.reverse();const E=y.indexOf(g.currentTarget);y=c.loop?$U(y,E+1):y.slice(E+1)}setTimeout(()=>tL(y))}})})})});eL.displayName=Zk;var jU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BU(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function UU(n,e,t){const r=BU(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return jU[r]}function tL(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function $U(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var nL=Jk,rL=eL;const zU=["1","2","3","4","5","6","7","8","9"],HU=["auto","always","hover","none"],WU={...Zl,size:{type:"enum",className:"rt-r-size",values:zU,responsive:!0},...ck,...lk,...qb,...Gb,underline:{type:"enum",className:"rt-underline",values:HU,default:"auto"},...ak,...Wb},Kt=A.forwardRef((n,e)=>{const{children:t,className:r,color:s,asChild:i,...o}=fa(n,WU);return A.createElement(Da,{...o,"data-accent-color":s,ref:e,asChild:!0,className:kn("rt-reset","rt-Link",r)},i?t:A.createElement("a",null,t))});Kt.displayName="Link";const GU=["horizontal","vertical"],qU=["1","2","3","4"],KU={orientation:{type:"enum",className:"rt-r-orientation",values:GU,default:"horizontal",responsive:!0},size:{type:"enum",className:"rt-r-size",values:qU,default:"1",responsive:!0},color:{...ok.color,default:"gray"},decorative:{type:"boolean",default:!0}},lS=A.forwardRef((n,e)=>{const{className:t,color:r,decorative:s,...i}=fa(n,KU,yh);return A.createElement("span",{"data-accent-color":r,role:s?void 0:"separator",...i,ref:e,className:kn("rt-Separator",t)})});lS.displayName="Separator";const XU={...Zl,...qb,...Gb},Dv=A.forwardRef((n,e)=>{const{asChild:t,className:r,...s}=fa(n,XU);return A.createElement(t?Vr:"strong",{...s,ref:e,className:kn("rt-Strong",r)})});Dv.displayName="Strong";const I1="/assets/PortFolio-CXYOnYlH.png",k1="/assets/PortFolio%20-%20cartoon-C4WEmp8n.png",YU="/assets/myRoutine-DstEhSb4.png";var sL={exports:{}},QU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",JU=QU,ZU=JU;function iL(){}function oL(){}oL.resetWarningCache=iL;var e$=function(){function n(r,s,i,o,a,l){if(l!==ZU){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:oL,resetWarningCache:iL};return t.PropTypes=t,t};sL.exports=e$();var t$=sL.exports;const Fs=Ay(t$);function Zw({isMobile:n}){const[e,t]=A.useState(50),[r,s]=A.useState(!0),i=c=>{const u=c.currentTarget.offsetWidth,f=c.clientX-c.currentTarget.getBoundingClientRect().left,p=Math.min(Math.max(f/u*100,0),100);t(p)},o=()=>{t(50)},a=()=>{s(!r)},l=e>50?150-e:100;return N.jsxs(Oi,{direction:"column",gap:"2",style:{position:"relative"},className:n?"mwebHome":"",children:[n&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"imageContainer",onClick:a,children:N.jsx("img",{src:r?I1:k1,alt:"Main and Cartoon Image",className:"imageContainer-main",style:{borderRadius:"15px"}})}),N.jsxs(Yw,{size:"5",children:["Hi, Im ",N.jsx(Dv,{children:"Adarsh Gella!"}),N.jsx("br",{}),"Im a student at ",N.jsx(Kt,{href:"https://www.utdallas.edu/fact-sheets/ecs/ms-computer-science/",underline:"hover",target:"blank",children:"UTD"}),", currently pursuing a masters in Computer Science.",N.jsx("br",{}),N.jsx("br",{}),"Im really passionate about front-end development, especially when it comes to creating intuitive and engaging user interfaces.  ",N.jsx("br",{}),"Right now, Im working on some new ",N.jsx(Kt,{href:"https://github.com/gadarsh043?tab=repositories",underline:"hover",target:"blank",children:"UI projects"})," and also developing content for my ",N.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),".",N.jsx("br",{}),N.jsx("br",{}),"I love exploring new tech, coding, and user experience. When Im not coding, youll probably catch me watching a ton of movies or series, capturing moments for my YouTube channel, or just dancing around with my friends.",N.jsx("br",{}),N.jsx("br",{}),"I enjoy sharing insights about coding practices, discussing new ideas, recommending my",N.jsx(Kt,{href:"https://www.imdb.com/user/ur129777024/lists/",underline:"hover",target:"blank",children:" latest movie finds"}),", or talking about my ",N.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),". Im all in! Hit me up on ",N.jsx(Kt,{href:"https://www.linkedin.com/in/g-adarsh-sonu/",underline:"hover",target:"blank",children:"LinkedIn"}),", ",N.jsx(Kt,{href:"mailto:g.adarsh043@gmail.com",target:"blank",underline:"hover",children:"Gmail"}),", or",N.jsx(Kt,{href:"https://www.instagram.com/g_adarsh_sonu/",underline:"hover",target:"blank",children:" Instagram"}),"lets connect and chat about what were into!"]})]}),!n&&N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"imageContainer",onMouseMove:i,onMouseLeave:o,children:[N.jsx("img",{src:I1,alt:"Main Image",className:"imageContainer-main",style:{clipPath:`polygon(0 0, ${e}% 0, ${e}% 100%, 0 100%)`,opacity:`${e+80}%`,borderRadius:"15px"}}),N.jsx("img",{src:k1,alt:"Cartoon Image",className:"imageContainer-cartoon",style:{opacity:`${l}%`,borderRadius:"15px"}})]}),N.jsx("br",{}),N.jsx("br",{}),N.jsxs(Yw,{size:"5",children:["Hi, Im ",N.jsx(Dv,{children:"Adarsh Gella!"}),N.jsx("br",{}),"Im a student at ",N.jsx(Kt,{href:"https://www.utdallas.edu/fact-sheets/ecs/ms-computer-science/",underline:"hover",target:"blank",children:"UTD"}),", currently pursuing a masters in Computer Science. ",N.jsx("br",{}),"Im really passionate about front-end development, especially when it comes to ",N.jsx("br",{}),"creating intuitive and engaging user interfaces. Right now, Im working on some new ",N.jsx("br",{}),N.jsx(Kt,{href:"https://github.com/gadarsh043?tab=repositories",underline:"hover",target:"blank",children:"UI projects"})," and also developing content for my ",N.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),".",N.jsx("br",{}),N.jsx("br",{}),"I love exploring new tech, coding, and user experience. When Im not coding, ",N.jsx("br",{}),"youll probably catch me watching a ton of movies or series, capturing moments for ",N.jsx("br",{}),"my YouTube channel, or just dancing around with my friends.",N.jsx("br",{}),N.jsx("br",{}),"I enjoy sharing insights about coding practices, discussing new ideas, recommending my ",N.jsx("br",{}),N.jsx(Kt,{href:"https://www.imdb.com/user/ur129777024/lists/",underline:"hover",target:"blank",children:"latest movie finds"}),", or talking about my ",N.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),". Im all in! Hit me up on ",N.jsx(Kt,{href:"https://www.linkedin.com/in/g-adarsh-sonu/",underline:"hover",target:"blank",children:"LinkedIn"}),", ",N.jsx(Kt,{href:"mailto:g.adarsh043@gmail.com",target:"blank",underline:"hover",children:"Gmail"}),", or ",N.jsx("br",{}),N.jsx(Kt,{href:"https://www.instagram.com/g_adarsh_sonu/",underline:"hover",target:"blank",children:"Instagram"}),"lets connect and chat about what were into!"]}),N.jsx("img",{className:"myRoutine",style:{width:"400px",height:"400px",position:"absolute",bottom:"-80px",right:"60px"},src:YU}),N.jsx("br",{}),N.jsx("br",{})]})]})}Zw.propTypes={isMobile:Fs.bool};const n$="modulepreload",r$=function(n){return"/"+n},L1={},Ym=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=r$(l),l in L1)return;L1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":n$,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var Md={};Md.d=(n,e)=>{for(var t in e)Md.o(e,t)&&!Md.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Md.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var de=globalThis.pdfjsLib={};Md.d(de,{AbortException:()=>tc,AnnotationEditorLayer:()=>cA,AnnotationEditorParamsType:()=>pe,AnnotationEditorType:()=>Te,AnnotationEditorUIManager:()=>Wl,AnnotationLayer:()=>tz,AnnotationMode:()=>ho,CMapCompressionType:()=>tE,ColorPicker:()=>$v,DOMSVGFactory:()=>hS,DrawLayer:()=>fA,FeatureTest:()=>Hn,GlobalWorkerOptions:()=>Fi,ImageKind:()=>xg,InvalidPDFException:()=>lL,MissingPDFException:()=>ec,OPS:()=>zr,Outliner:()=>HE,PDFDataRangeTransport:()=>rM,PDFDateString:()=>mL,PDFWorker:()=>Kc,PasswordResponses:()=>a$,PermissionFlag:()=>o$,PixelsPerInch:()=>na,RenderingCancelledException:()=>dS,TextLayer:()=>Bv,UnexpectedResponseException:()=>t_,Util:()=>ie,VerbosityLevel:()=>Jy,XfaLayer:()=>iM,build:()=>D3,createValidAbsoluteUrl:()=>h$,fetchData:()=>o_,getDocument:()=>C3,getFilenameFromUrl:()=>E$,getPdfFilenameFromUrl:()=>A$,getXfaPageViewport:()=>b$,isDataScheme:()=>fS,isPdfFile:()=>pS,noContextMenu:()=>Xn,normalizeUnicode:()=>v$,renderTextLayer:()=>v3,setLayerDimensions:()=>Hl,shadow:()=>ke,updateTextLayer:()=>y3,version:()=>N3});const An=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),aL=[1,0,0,1,0,0],eE=[.001,0,0,.001,0,0],s$=1e7,P0=1.35,Rr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},ho={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},i$="pdfjs_internal_editor_",Te={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},pe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},o$={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},xg={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Rt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Qh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Jy={ERRORS:0,WARNINGS:1,INFOS:5},tE={NONE:0,BINARY:1},zr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},a$={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Zy=Jy.WARNINGS;function l$(n){Number.isInteger(n)&&(Zy=n)}function c$(){return Zy}function e_(n){Zy>=Jy.INFOS&&console.log(`Info: ${n}`)}function ye(n){Zy>=Jy.WARNINGS&&console.log(`Warning: ${n}`)}function ze(n){throw new Error(n)}function Dt(n,e){n||ze(e)}function u$(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function h$(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=g$(n)}catch{}}const r=e?new URL(n,e):new URL(n);if(u$(r))return r}catch{}return null}function ke(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const pa=function(){function e(t,r){this.constructor===e&&ze("Cannot initialize BaseException."),this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class nE extends pa{constructor(e,t){super(e,"PasswordException"),this.code=t}}class rE extends pa{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class lL extends pa{constructor(e){super(e,"InvalidPDFException")}}class ec extends pa{constructor(e){super(e,"MissingPDFException")}}class t_ extends pa{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class d$ extends pa{constructor(e){super(e,"FormatError")}}class tc extends pa{constructor(e){super(e,"AbortException")}}function cL(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ze("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),o=n.subarray(s,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function n_(n){typeof n!="string"&&ze("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function f$(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function cS(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function p$(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function m$(){try{return new Function(""),!0}catch{return!1}}class Hn{static get isLittleEndian(){return ke(this,"isLittleEndian",p$())}static get isEvalSupported(){return ke(this,"isEvalSupported",m$())}static get isOffscreenCanvasSupported(){return ke(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ke(this,"platform",{isMac:navigator.platform.includes("Mac")}):ke(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return ke(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const I0=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var ji,Rg,sE;class ie{static makeHexColor(e,t,r){return`#${I0[e]}${I0[t]}${I0[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[r,s]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[s,i]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],s[0],i[0],o[0]),Math.min(r[1],s[1],i[1],o[1]),Math.max(r[0],s[0],i[0],o[0]),Math.max(r[1],s[1],i[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(r+o)/2,l=Math.sqrt((r+o)**2-4*(r*o-i*s))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,s,o]}static bezierBoundingBox(e,t,r,s,i,o,a,l,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],P(this,ji,sE).call(this,e,r,i,a,t,s,o,l,3*(-e+3*(r-i)+a),6*(e-2*r+i),3*(r-e),c),P(this,ji,sE).call(this,e,r,i,a,t,s,o,l,3*(-t+3*(s-o)+l),6*(t-2*s+o),3*(s-t),c),c}}ji=new WeakSet,Rg=function(e,t,r,s,i,o,a,l,c,u){if(c<=0||c>=1)return;const f=1-c,p=c*c,m=p*c,g=f*(f*(f*e+3*c*t)+3*p*r)+m*s,_=f*(f*(f*i+3*c*o)+3*p*a)+m*l;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],_),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],_)},sE=function(e,t,r,s,i,o,a,l,c,u,f,p){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&P(this,ji,Rg).call(this,e,t,r,s,i,o,a,l,-f/u,p);return}const m=u**2-4*f*c;if(m<0)return;const g=Math.sqrt(m),_=2*c;P(this,ji,Rg).call(this,e,t,r,s,i,o,a,l,(-u+g)/_,p),P(this,ji,Rg).call(this,e,t,r,s,i,o,a,l,(-u-g)/_,p)},I(ie,ji);function g$(n){return decodeURIComponent(escape(n))}let k0=null,M1=null;function v$(n){return k0||(k0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,M1=new Map([["","t"]])),n.replaceAll(k0,(e,t,r)=>t?t.normalize("NFKC"):M1.get(r))}function y$(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return cL(n)}const uL="pdfjs_internal_id_",ei={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class r_{constructor(){this.constructor===r_&&ze("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var vf;const YS=class YS{constructor({enableHWA:e=!1}={}){I(this,vf,!1);this.constructor===YS&&ze("Cannot initialize BaseCanvasFactory."),x(this,vf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!h(this,vf)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ze("Abstract method `_createCanvas` called.")}};vf=new WeakMap;let Ov=YS;class s_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===s_&&ze("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),r=this.isCompressed?tE.BINARY:tE.NONE;return this._fetchData(t,r).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){ze("Abstract method `_fetchData` called.")}}class i_{constructor({baseUrl:e=null}){this.constructor===i_&&ze("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){ze("Abstract method `_fetchData` called.")}}class uS{constructor(){this.constructor===uS&&ze("Cannot initialize BaseSVGFactory.")}create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ze("Abstract method `_createSVG` called.")}}const ni="http://www.w3.org/2000/svg",Ia=class Ia{};ge(Ia,"CSS",96),ge(Ia,"PDF",72),ge(Ia,"PDF_TO_CSS_UNITS",Ia.CSS/Ia.PDF);let na=Ia;var Fa,gs,ci,Vn,ry,Va,ne,mn,vc,yc,Pg,hL,iE,_c,sd,id,oE,od;class _$ extends r_{constructor({docId:t,ownerDocument:r=globalThis.document}={}){super();I(this,ne);I(this,Fa);I(this,gs);I(this,ci);I(this,Vn);I(this,ry);I(this,Va,0);x(this,ci,t),x(this,Vn,r)}addFilter(t){if(!t)return"none";let r=h(this,ne,mn).get(t);if(r)return r;const[s,i,o]=P(this,ne,Pg).call(this,t),a=t.length===1?s:`${s}${i}${o}`;if(r=h(this,ne,mn).get(a),r)return h(this,ne,mn).set(t,r),r;const l=`g_${h(this,ci)}_transfer_map_${tr(this,Va)._++}`,c=`url(#${l})`;h(this,ne,mn).set(t,c),h(this,ne,mn).set(a,c);const u=P(this,ne,_c).call(this,l);return P(this,ne,id).call(this,s,i,o,u),c}addHCMFilter(t,r){var g;const s=`${t}-${r}`,i="base";let o=h(this,ne,vc).get(i);if((o==null?void 0:o.key)===s||(o?((g=o.filter)==null||g.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},h(this,ne,vc).set(i,o)),!t||!r))return o.url;const a=P(this,ne,od).call(this,t);t=ie.makeHexColor(...a);const l=P(this,ne,od).call(this,r);if(r=ie.makeHexColor(...l),h(this,ne,yc).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const c=new Array(256);for(let _=0;_<=255;_++){const w=_/255;c[_]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const u=c.join(","),f=`g_${h(this,ci)}_hcm_filter`,p=o.filter=P(this,ne,_c).call(this,f);P(this,ne,id).call(this,u,u,u,p),P(this,ne,iE).call(this,p);const m=(_,w)=>{const y=a[_]/255,E=l[_]/255,S=new Array(w+1);for(let R=0;R<=w;R++)S[R]=y+R/w*(E-y);return S.join(",")};return P(this,ne,id).call(this,m(0,5),m(1,5),m(2,5),p),o.url=`url(#${f})`,o.url}addAlphaFilter(t){let r=h(this,ne,mn).get(t);if(r)return r;const[s]=P(this,ne,Pg).call(this,[t]),i=`alpha_${s}`;if(r=h(this,ne,mn).get(i),r)return h(this,ne,mn).set(t,r),r;const o=`g_${h(this,ci)}_alpha_map_${tr(this,Va)._++}`,a=`url(#${o})`;h(this,ne,mn).set(t,a),h(this,ne,mn).set(i,a);const l=P(this,ne,_c).call(this,o);return P(this,ne,oE).call(this,s,l),a}addLuminosityFilter(t){let r=h(this,ne,mn).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=P(this,ne,Pg).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=h(this,ne,mn).get(i),r)return h(this,ne,mn).set(t,r),r;const o=`g_${h(this,ci)}_luminosity_map_${tr(this,Va)._++}`,a=`url(#${o})`;h(this,ne,mn).set(t,a),h(this,ne,mn).set(i,a);const l=P(this,ne,_c).call(this,o);return P(this,ne,hL).call(this,l),t&&P(this,ne,oE).call(this,s,l),a}addHighlightHCMFilter(t,r,s,i,o){var E;const a=`${r}-${s}-${i}-${o}`;let l=h(this,ne,vc).get(t);if((l==null?void 0:l.key)===a||(l?((E=l.filter)==null||E.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},h(this,ne,vc).set(t,l)),!r||!s))return l.url;const[c,u]=[r,s].map(P(this,ne,od).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,g]=[i,o].map(P(this,ne,od).bind(this));p<f&&([f,p,m,g]=[p,f,g,m]),h(this,ne,yc).style.color="";const _=(S,R,O)=>{const V=new Array(256),C=(p-f)/O,T=S/255,k=(R-S)/(255*O);let M=0;for(let F=0;F<=O;F++){const j=Math.round(f+F*C),D=T+F*k;for(let q=M;q<=j;q++)V[q]=D;M=j+1}for(let F=M;F<256;F++)V[F]=V[M-1];return V.join(",")},w=`g_${h(this,ci)}_hcm_${t}_filter`,y=l.filter=P(this,ne,_c).call(this,w);return P(this,ne,iE).call(this,y),P(this,ne,id).call(this,_(m[0],g[0],5),_(m[1],g[1],5),_(m[2],g[2],5),y),l.url=`url(#${w})`,l.url}destroy(t=!1){t&&h(this,ne,vc).size!==0||(h(this,gs)&&(h(this,gs).parentNode.parentNode.remove(),x(this,gs,null)),h(this,Fa)&&(h(this,Fa).clear(),x(this,Fa,null)),x(this,Va,0))}}Fa=new WeakMap,gs=new WeakMap,ci=new WeakMap,Vn=new WeakMap,ry=new WeakMap,Va=new WeakMap,ne=new WeakSet,mn=function(){return h(this,Fa)||x(this,Fa,new Map)},vc=function(){return h(this,ry)||x(this,ry,new Map)},yc=function(){if(!h(this,gs)){const t=h(this,Vn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=h(this,Vn).createElementNS(ni,"svg");s.setAttribute("width",0),s.setAttribute("height",0),x(this,gs,h(this,Vn).createElementNS(ni,"defs")),t.append(s),s.append(h(this,gs)),h(this,Vn).body.append(t)}return h(this,gs)},Pg=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=c[p]/255;const f=u.join(",");return[f,f,f]}const[r,s,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=r[c]/255,a[c]=s[c]/255,l[c]=i[c]/255;return[o.join(","),a.join(","),l.join(",")]},hL=function(t){const r=h(this,Vn).createElementNS(ni,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},iE=function(t){const r=h(this,Vn).createElementNS(ni,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},_c=function(t){const r=h(this,Vn).createElementNS(ni,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),h(this,ne,yc).append(r),r},sd=function(t,r,s){const i=h(this,Vn).createElementNS(ni,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},id=function(t,r,s,i){const o=h(this,Vn).createElementNS(ni,"feComponentTransfer");i.append(o),P(this,ne,sd).call(this,o,"feFuncR",t),P(this,ne,sd).call(this,o,"feFuncG",r),P(this,ne,sd).call(this,o,"feFuncB",s)},oE=function(t,r){const s=h(this,Vn).createElementNS(ni,"feComponentTransfer");r.append(s),P(this,ne,sd).call(this,s,"feFuncA",t)},od=function(t){return h(this,ne,yc).style.color=t,mS(getComputedStyle(h(this,ne,yc)).getPropertyValue("color"))};class w$ extends Ov{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}async function o_(n,e="text"){if(ad(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class dL extends s_{_fetchData(e,t){return o_(e,this.isCompressed?"arraybuffer":"text").then(r=>({cMapData:r instanceof ArrayBuffer?new Uint8Array(r):n_(r),compressionType:t}))}}class fL extends i_{_fetchData(e){return o_(e,"arraybuffer").then(t=>new Uint8Array(t))}}class hS extends uS{_createSVG(e){return document.createElementNS(ni,e)}}class nm{constructor({viewBox:e,scale:t,rotation:r,offsetX:s=0,offsetY:i=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=s,this.offsetY=i;const a=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,u,f,p;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,u=0,f=0,p=1;break;case 90:c=0,u=1,f=1,p=0;break;case 270:c=0,u=-1,f=-1,p=0;break;case 0:c=1,u=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let m,g,_,w;c===0?(m=Math.abs(l-e[1])*t+s,g=Math.abs(a-e[0])*t+i,_=(e[3]-e[1])*t,w=(e[2]-e[0])*t):(m=Math.abs(a-e[0])*t+s,g=Math.abs(l-e[1])*t+i,_=(e[2]-e[0])*t,w=(e[3]-e[1])*t),this.transform=[c*t,u*t,f*t,p*t,m-c*t*a-f*t*l,g-u*t*a-p*t*l],this.width=_,this.height=w}get rawDims(){const{viewBox:e}=this;return ke(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new nm({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return ie.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ie.applyTransform([e[0],e[1]],this.transform),r=ie.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return ie.applyInverseTransform([e,t],this.transform)}}class dS extends pa{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function fS(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function pS(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function E$(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function A$(n,e="document.pdf"){if(typeof n!="string")return e;if(fS(n))return ye('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let i=r.exec(s[1])||r.exec(s[2])||r.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=r.exec(decodeURIComponent(i))[0]}catch{}return i||e}class N1{constructor(){ge(this,"started",Object.create(null));ge(this,"times",[])}time(e){e in this.started&&ye(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ye(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function ad(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Xn(n){n.preventDefault()}function pL(n){console.log("Deprecated API usage: "+n)}let D1;class mL{static toDateObject(e){if(!e||typeof e!="string")return null;D1||(D1=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=D1.exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=u,a+=f):c==="+"&&(o-=u,a-=f),new Date(Date.UTC(r,s,i,o,a,l))}}function b$(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new nm({viewBox:i,scale:e,rotation:t})}function mS(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ye(`Not a valid color format: "${n}"`),[0,0,0])}function S$(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,mS(r))}e.remove()}function it(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform();return[e,t,r,s,i,o]}function ti(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform().invertSelf();return[e,t,r,s,i,o]}function Hl(n,e,t=!1,r=!0){if(e instanceof nm){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:o}=n,a=Hn.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${i}px`,u=a?`round(${l}, 1px)`:`calc(${l})`,f=a?`round(${c}, 1px)`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}r&&n.setAttribute("data-main-rotation",e.rotation)}var ja,Ba,sr,Ua,sy,gL,Mn,vL,yL,Ig,_L,lE;const iy=class iy{constructor(e){I(this,Mn);I(this,ja,null);I(this,Ba,null);I(this,sr);I(this,Ua,null);x(this,sr,e)}render(){const e=x(this,ja,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=h(this,sr)._uiManager._signal;e.addEventListener("contextmenu",Xn,{signal:t}),e.addEventListener("pointerdown",P(iy,sy,gL),{signal:t});const r=x(this,Ua,document.createElement("div"));r.className="buttons",e.append(r);const s=h(this,sr).toolbarPosition;if(s){const{style:i}=e,o=h(this,sr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return P(this,Mn,_L).call(this),e}hide(){var e;h(this,ja).classList.add("hidden"),(e=h(this,Ba))==null||e.hideDropdown()}show(){h(this,ja).classList.remove("hidden")}addAltTextButton(e){P(this,Mn,Ig).call(this,e),h(this,Ua).prepend(e,h(this,Mn,lE))}addColorPicker(e){x(this,Ba,e);const t=e.renderButton();P(this,Mn,Ig).call(this,t),h(this,Ua).prepend(t,h(this,Mn,lE))}remove(){var e;h(this,ja).remove(),(e=h(this,Ba))==null||e.destroy(),x(this,Ba,null)}};ja=new WeakMap,Ba=new WeakMap,sr=new WeakMap,Ua=new WeakMap,sy=new WeakSet,gL=function(e){e.stopPropagation()},Mn=new WeakSet,vL=function(e){h(this,sr)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},yL=function(e){h(this,sr)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Ig=function(e){const t=h(this,sr)._uiManager._signal;e.addEventListener("focusin",P(this,Mn,vL).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",P(this,Mn,yL).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Xn,{signal:t})},_L=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${h(this,sr).editorType}-button`),P(this,Mn,Ig).call(this,e),e.addEventListener("click",t=>{h(this,sr)._uiManager.delete()},{signal:h(this,sr)._uiManager._signal}),h(this,Ua).append(e)},lE=function(){const e=document.createElement("div");return e.className="divider",e},I(iy,sy);let aE=iy;var yf,$a,za,la,wL,EL,AL;class T${constructor(e){I(this,la);I(this,yf,null);I(this,$a,null);I(this,za);x(this,za,e)}show(e,t,r){const[s,i]=P(this,la,EL).call(this,t,r),{style:o}=h(this,$a)||x(this,$a,P(this,la,wL).call(this));e.append(h(this,$a)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,$a).remove()}}yf=new WeakMap,$a=new WeakMap,za=new WeakMap,la=new WeakSet,wL=function(){const e=x(this,$a,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Xn,{signal:h(this,za)._signal});const t=x(this,yf,document.createElement("div"));return t.className="buttons",e.append(t),P(this,la,AL).call(this),e},EL=function(e,t){let r=0,s=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const a=i.x+(t?i.width:0);if(o>r){s=a,r=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,r]},AL=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=h(this,za)._signal;e.addEventListener("contextmenu",Xn,{signal:r}),e.addEventListener("click",()=>{h(this,za).highlightSelection("floating_button")},{signal:r}),h(this,yf).append(e)};function Fv(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function C$(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var oy;class x${constructor(){I(this,oy,0)}get id(){return`${i$}${tr(this,oy)._++}`}}oy=new WeakMap;var _f,ay,Sr,wf,uE;const QS=class QS{constructor(){I(this,wf);I(this,_f,y$());I(this,ay,0);I(this,Sr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ke(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return P(this,wf,uE).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return P(this,wf,uE).call(this,e,e)}async getFromId(e){h(this,Sr)||x(this,Sr,new Map);const t=h(this,Sr).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=h(this,Sr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){h(this,Sr)||x(this,Sr,new Map);const t=h(this,Sr).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${h(this,_f)}_`)}};_f=new WeakMap,ay=new WeakMap,Sr=new WeakMap,wf=new WeakSet,uE=async function(e,t){h(this,Sr)||x(this,Sr,new Map);let r=h(this,Sr).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${h(this,_f)}_${tr(this,ay)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await o_(t,"blob")):s=r.file=t,s.type==="image/svg+xml"){const i=QS._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=async()=>{const f=r.svgUrl=o.result;a.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(s),await l}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){console.error(s),r=null}return h(this,Sr).set(e,r),r&&h(this,Sr).set(r.id,r),r};let cE=QS;var $t,fo,Ef,zt;class R${constructor(e=128){I(this,$t,[]);I(this,fo,!1);I(this,Ef);I(this,zt,-1);x(this,Ef,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),h(this,fo))return;const l={cmd:e,undo:t,post:r,type:i};if(h(this,zt)===-1){h(this,$t).length>0&&(h(this,$t).length=0),x(this,zt,0),h(this,$t).push(l);return}if(o&&h(this,$t)[h(this,zt)].type===i){a&&(l.undo=h(this,$t)[h(this,zt)].undo),h(this,$t)[h(this,zt)]=l;return}const c=h(this,zt)+1;c===h(this,Ef)?h(this,$t).splice(0,1):(x(this,zt,c),c<h(this,$t).length&&h(this,$t).splice(c)),h(this,$t).push(l)}undo(){if(h(this,zt)===-1)return;x(this,fo,!0);const{undo:e,post:t}=h(this,$t)[h(this,zt)];e(),t==null||t(),x(this,fo,!1),x(this,zt,h(this,zt)-1)}redo(){if(h(this,zt)<h(this,$t).length-1){x(this,zt,h(this,zt)+1),x(this,fo,!0);const{cmd:e,post:t}=h(this,$t)[h(this,zt)];e(),t==null||t(),x(this,fo,!1)}}hasSomethingToUndo(){return h(this,zt)!==-1}hasSomethingToRedo(){return h(this,zt)<h(this,$t).length-1}destroy(){x(this,$t,null)}}$t=new WeakMap,fo=new WeakMap,Ef=new WeakMap,zt=new WeakMap;var ly,bL;class rm{constructor(e){I(this,ly);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Hn.platform;for(const[r,s,i={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(P(this,ly,bL).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(s.bind(e,...o,t)(),i||(t.stopPropagation(),t.preventDefault()))}}ly=new WeakSet,bL=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const cy=class cy{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return S$(e),ke(this,"_colors",e)}convert(e){const t=mS(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,o)=>i===t[o]))return cy._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ie.makeHexColor(...t):e}};ge(cy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let hE=cy;var tu,ir,Pt,Yt,nu,ui,ru,Hr,su,Ha,vs,Wr,Wa,Af,bf,ys,iu,po,_s,uy,mo,Sf,Ga,Tf,ou,Qt,Fe,hi,qa,Cf,xf,Rf,Pf,If,kf,Lf,Mf,Nf,Df,Of,Ff,Vf,go,ws,di,jf,Q,kg,SL,TL,Lg,CL,xL,RL,dE,PL,fE,pE,IL,Tn,so,kL,LL,mE,ML,ld,gE;const jc=class jc{constructor(e,t,r,s,i,o,a,l,c){I(this,Q);I(this,tu,new AbortController);I(this,ir,null);I(this,Pt,new Map);I(this,Yt,new Map);I(this,nu,null);I(this,ui,null);I(this,ru,null);I(this,Hr,new R$);I(this,su,0);I(this,Ha,new Set);I(this,vs,null);I(this,Wr,null);I(this,Wa,new Set);I(this,Af,!1);I(this,bf,null);I(this,ys,null);I(this,iu,null);I(this,po,!1);I(this,_s,null);I(this,uy,new x$);I(this,mo,!1);I(this,Sf,!1);I(this,Ga,null);I(this,Tf,null);I(this,ou,null);I(this,Qt,Te.NONE);I(this,Fe,new Set);I(this,hi,null);I(this,qa,null);I(this,Cf,null);I(this,xf,this.blur.bind(this));I(this,Rf,this.focus.bind(this));I(this,Pf,this.copy.bind(this));I(this,If,this.cut.bind(this));I(this,kf,this.paste.bind(this));I(this,Lf,this.keydown.bind(this));I(this,Mf,this.keyup.bind(this));I(this,Nf,this.onEditingAction.bind(this));I(this,Df,this.onPageChanging.bind(this));I(this,Of,this.onScaleChanging.bind(this));I(this,Ff,this.onRotationChanging.bind(this));I(this,Vf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});I(this,go,[0,0]);I(this,ws,null);I(this,di,null);I(this,jf,null);this._signal=h(this,tu).signal,x(this,di,e),x(this,jf,t),x(this,nu,r),this._eventBus=s,this._eventBus._on("editingaction",h(this,Nf)),this._eventBus._on("pagechanging",h(this,Df)),this._eventBus._on("scalechanging",h(this,Of)),this._eventBus._on("rotationchanging",h(this,Ff)),P(this,Q,CL).call(this),P(this,Q,IL).call(this),P(this,Q,dE).call(this),x(this,ui,i.annotationStorage),x(this,bf,i.filterFactory),x(this,qa,o),x(this,iu,a||null),x(this,Af,l),x(this,ou,c||null),this.viewParameters={realScale:na.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=jc.prototype,t=o=>h(o,di).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return ke(this,"_keyboardManager",new rm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,di).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,di).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r;(e=h(this,tu))==null||e.abort(),x(this,tu,null),this._signal=null,this._eventBus._off("editingaction",h(this,Nf)),this._eventBus._off("pagechanging",h(this,Df)),this._eventBus._off("scalechanging",h(this,Of)),this._eventBus._off("rotationchanging",h(this,Ff));for(const s of h(this,Yt).values())s.destroy();h(this,Yt).clear(),h(this,Pt).clear(),h(this,Wa).clear(),x(this,ir,null),h(this,Fe).clear(),h(this,Hr).destroy(),(t=h(this,nu))==null||t.destroy(),(r=h(this,_s))==null||r.hide(),x(this,_s,null),h(this,ys)&&(clearTimeout(h(this,ys)),x(this,ys,null)),h(this,ws)&&(clearTimeout(h(this,ws)),x(this,ws,null))}async mlGuess(e){var t;return((t=h(this,ou))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!h(this,ou)}get hcmFilter(){return ke(this,"hcmFilter",h(this,qa)?h(this,bf).addHCMFilter(h(this,qa).foreground,h(this,qa).background):"none")}get direction(){return ke(this,"direction",getComputedStyle(h(this,di)).direction)}get highlightColors(){return ke(this,"highlightColors",h(this,iu)?new Map(h(this,iu).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ke(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){x(this,Tf,e)}editAltText(e){var t;(t=h(this,nu))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){x(this,su,e-1)}focusMainContainer(){h(this,di).focus()}findParent(e,t){for(const r of h(this,Yt).values()){const{x:s,y:i,width:o,height:a}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=i&&t<=i+a)return r}return null}disableUserSelect(e=!1){h(this,jf).classList.toggle("noUserSelect",e)}addShouldRescale(e){h(this,Wa).add(e)}removeShouldRescale(e){h(this,Wa).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*na.PDF_TO_CSS_UNITS;for(const t of h(this,Wa))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o}=t,a=t.toString(),c=P(this,Q,kg).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(u){t.empty(),h(this,Qt)===Te.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Te.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const f of h(this,Yt).values())if(f.hasTextLayer(c)){f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o,text:a});break}}}addToAnnotationStorage(e){!e.isEmpty()&&h(this,ui)&&!h(this,ui).has(e.id)&&h(this,ui).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,h(this,po)&&(x(this,po,!1),P(this,Q,Lg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of h(this,Fe))if(t.div.contains(e)){x(this,Ga,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!h(this,Ga))return;const[e,t]=h(this,Ga);x(this,Ga,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){P(this,Q,dE).call(this),P(this,Q,fE).call(this)}removeEditListeners(){P(this,Q,PL).call(this),P(this,Q,pE).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of h(this,Wr))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of h(this,Wr))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=h(this,ir))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of h(this,Fe)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of h(this,Wr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){ye(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const l of r){const c=s.deserialize(l);if(!c)return;i.push(c)}const o=()=>{for(const l of i)P(this,Q,mE).call(this,l);P(this,Q,gE).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){ye(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,Qt)!==Te.NONE&&!this.isEditorHandlingKeyboard&&jc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,po)&&(x(this,po,!1),P(this,Q,Lg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(P(this,Q,xL).call(this),P(this,Q,fE).call(this),P(this,Q,Tn).call(this,{isEditing:h(this,Qt)!==Te.NONE,isEmpty:P(this,Q,ld).call(this),hasSomethingToUndo:h(this,Hr).hasSomethingToUndo(),hasSomethingToRedo:h(this,Hr).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,Q,RL).call(this),P(this,Q,pE).call(this),P(this,Q,Tn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!h(this,Wr)){x(this,Wr,e);for(const t of h(this,Wr))P(this,Q,so).call(this,t.defaultPropertiesToUpdate)}}getId(){return h(this,uy).id}get currentLayer(){return h(this,Yt).get(h(this,su))}getLayer(e){return h(this,Yt).get(e)}get currentPageIndex(){return h(this,su)}addLayer(e){h(this,Yt).set(e.pageIndex,e),h(this,mo)?e.enable():e.disable()}removeLayer(e){h(this,Yt).delete(e.pageIndex)}updateMode(e,t=null,r=!1){if(h(this,Qt)!==e){if(x(this,Qt,e),e===Te.NONE){this.setEditingState(!1),P(this,Q,LL).call(this);return}this.setEditingState(!0),P(this,Q,kL).call(this),this.unselectAll();for(const s of h(this,Yt).values())s.updateMode(e);if(!t&&r){this.addNewEditorFromKeyboard();return}if(t){for(const s of h(this,Pt).values())if(s.annotationElementId===t){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==h(this,Qt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var r;if(h(this,Wr)){switch(e){case pe.CREATE:this.currentLayer.addNewEditor();return;case pe.HIGHLIGHT_DEFAULT_COLOR:(r=h(this,Tf))==null||r.updateColor(t);break;case pe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,Cf)||x(this,Cf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of h(this,Fe))s.updateParams(e,t);for(const s of h(this,Wr))s.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const o of h(this,Pt).values())o.editorType===e&&o.show(t);(((i=h(this,Cf))==null?void 0:i.get(pe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&P(this,Q,so).call(this,[[pe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(h(this,Sf)!==e){x(this,Sf,e);for(const t of h(this,Yt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of h(this,Pt).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return h(this,Pt).get(e)}addEditor(e){h(this,Pt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(h(this,ys)&&clearTimeout(h(this,ys)),x(this,ys,setTimeout(()=>{this.focusMainContainer(),x(this,ys,null)},0))),h(this,Pt).delete(e.id),this.unselect(e),(!e.annotationElementId||!h(this,Ha).has(e.annotationElementId))&&((t=h(this,ui))==null||t.remove(e.id))}addDeletedAnnotationElement(e){h(this,Ha).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return h(this,Ha).has(e)}removeDeletedAnnotationElement(e){h(this,Ha).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){h(this,ir)!==e&&(x(this,ir,e),e&&P(this,Q,so).call(this,e.propertiesToUpdate))}updateUI(e){h(this,Q,ML)===e&&P(this,Q,so).call(this,e.propertiesToUpdate)}toggleSelected(e){if(h(this,Fe).has(e)){h(this,Fe).delete(e),e.unselect(),P(this,Q,Tn).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,Fe).add(e),e.select(),P(this,Q,so).call(this,e.propertiesToUpdate),P(this,Q,Tn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of h(this,Fe))t!==e&&t.unselect();h(this,Fe).clear(),h(this,Fe).add(e),e.select(),P(this,Q,so).call(this,e.propertiesToUpdate),P(this,Q,Tn).call(this,{hasSelectedEditor:!0})}isSelected(e){return h(this,Fe).has(e)}get firstSelectedEditor(){return h(this,Fe).values().next().value}unselect(e){e.unselect(),h(this,Fe).delete(e),P(this,Q,Tn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,Fe).size!==0}get isEnterHandled(){return h(this,Fe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){h(this,Hr).undo(),P(this,Q,Tn).call(this,{hasSomethingToUndo:h(this,Hr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,Q,ld).call(this)})}redo(){h(this,Hr).redo(),P(this,Q,Tn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,Hr).hasSomethingToRedo(),isEmpty:P(this,Q,ld).call(this)})}addCommands(e){h(this,Hr).add(e),P(this,Q,Tn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,Q,ld).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...h(this,Fe)],t=()=>{for(const s of e)s.remove()},r=()=>{for(const s of e)P(this,Q,mE).call(this,s)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=h(this,ir))==null||e.commitOrRemove()}hasSomethingToControl(){return h(this,ir)||this.hasSelection}selectAll(){for(const e of h(this,Fe))e.commit();P(this,Q,gE).call(this,h(this,Pt).values())}unselectAll(){if(!(h(this,ir)&&(h(this,ir).commitOrRemove(),h(this,Qt)!==Te.NONE))&&this.hasSelection){for(const e of h(this,Fe))e.unselect();h(this,Fe).clear(),P(this,Q,Tn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;h(this,go)[0]+=e,h(this,go)[1]+=t;const[s,i]=h(this,go),o=[...h(this,Fe)],a=1e3;h(this,ws)&&clearTimeout(h(this,ws)),x(this,ws,setTimeout(()=>{x(this,ws,null),h(this,go)[0]=h(this,go)[1]=0,this.addCommands({cmd:()=>{for(const l of o)h(this,Pt).has(l.id)&&l.translateInPage(s,i)},undo:()=>{for(const l of o)h(this,Pt).has(l.id)&&l.translateInPage(-s,-i)},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,vs,new Map);for(const e of h(this,Fe))h(this,vs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,vs))return!1;this.disableUserSelect(!1);const e=h(this,vs);x(this,vs,null);let t=!1;for(const[{x:s,y:i,pageIndex:o},a]of e)a.newX=s,a.newY=i,a.newPageIndex=o,t||(t=s!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(s,i,o,a)=>{if(h(this,Pt).has(s.id)){const l=h(this,Yt).get(a);l?s._setParentAndPosition(l,i,o):(s.pageIndex=a,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:a}]of e)r(s,i,o,a)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:a}]of e)r(s,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(h(this,vs))for(const r of h(this,vs).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||h(this,Fe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return h(this,ir)===e}getActive(){return h(this,ir)}getMode(){return h(this,Qt)}get imageManager(){return ke(this,"imageManager",new cE)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,f,p)=>({x:(u-s)/o,y:1-(c+f-r)/i,width:p/o,height:f/i});break;case"180":a=(c,u,f,p)=>({x:1-(c+f-r)/i,y:1-(u+p-s)/o,width:f/i,height:p/o});break;case"270":a=(c,u,f,p)=>({x:1-(u+p-s)/o,y:(c-r)/i,width:p/o,height:f/i});break;default:a=(c,u,f,p)=>({x:(c-r)/i,y:(u-s)/o,width:f/i,height:p/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:p,y:m,width:g,height:_}of f.getClientRects())g===0||_===0||l.push(a(p,m,g,_))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(h(this,ru)||x(this,ru,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=h(this,ru))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=h(this,ru))==null?void 0:s.get(e.data.id);if(!t)return;const r=h(this,ui).getRawValue(t);r&&(h(this,Qt)===Te.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}};tu=new WeakMap,ir=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,nu=new WeakMap,ui=new WeakMap,ru=new WeakMap,Hr=new WeakMap,su=new WeakMap,Ha=new WeakMap,vs=new WeakMap,Wr=new WeakMap,Wa=new WeakMap,Af=new WeakMap,bf=new WeakMap,ys=new WeakMap,iu=new WeakMap,po=new WeakMap,_s=new WeakMap,uy=new WeakMap,mo=new WeakMap,Sf=new WeakMap,Ga=new WeakMap,Tf=new WeakMap,ou=new WeakMap,Qt=new WeakMap,Fe=new WeakMap,hi=new WeakMap,qa=new WeakMap,Cf=new WeakMap,xf=new WeakMap,Rf=new WeakMap,Pf=new WeakMap,If=new WeakMap,kf=new WeakMap,Lf=new WeakMap,Mf=new WeakMap,Nf=new WeakMap,Df=new WeakMap,Of=new WeakMap,Ff=new WeakMap,Vf=new WeakMap,go=new WeakMap,ws=new WeakMap,di=new WeakMap,jf=new WeakMap,Q=new WeakSet,kg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},SL=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=P(this,Q,kg).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(h(this,_s)||x(this,_s,new T$(this)),h(this,_s).show(r,s,this.direction==="ltr"))},TL=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){h(this,hi)&&((i=h(this,_s))==null||i.hide(),x(this,hi,null),P(this,Q,Tn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===h(this,hi))return;if(!P(this,Q,kg).call(this,e).closest(".textLayer")){h(this,hi)&&((o=h(this,_s))==null||o.hide(),x(this,hi,null),P(this,Q,Tn).call(this,{hasSelectedText:!1}));return}if((a=h(this,_s))==null||a.hide(),x(this,hi,t),P(this,Q,Tn).call(this,{hasSelectedText:!0}),!(h(this,Qt)!==Te.HIGHLIGHT&&h(this,Qt)!==Te.NONE)&&(h(this,Qt)===Te.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,po,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=this._signal,c=u=>{u.type==="pointerup"&&u.button!==0||(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),u.type==="pointerup"&&P(this,Q,Lg).call(this,"main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}},Lg=function(e=""){h(this,Qt)===Te.HIGHLIGHT?this.highlightSelection(e):h(this,Af)&&P(this,Q,SL).call(this)},CL=function(){document.addEventListener("selectionchange",P(this,Q,TL).bind(this),{signal:this._signal})},xL=function(){const e=this._signal;window.addEventListener("focus",h(this,Rf),{signal:e}),window.addEventListener("blur",h(this,xf),{signal:e})},RL=function(){window.removeEventListener("focus",h(this,Rf)),window.removeEventListener("blur",h(this,xf))},dE=function(){const e=this._signal;window.addEventListener("keydown",h(this,Lf),{signal:e}),window.addEventListener("keyup",h(this,Mf),{signal:e})},PL=function(){window.removeEventListener("keydown",h(this,Lf)),window.removeEventListener("keyup",h(this,Mf))},fE=function(){const e=this._signal;document.addEventListener("copy",h(this,Pf),{signal:e}),document.addEventListener("cut",h(this,If),{signal:e}),document.addEventListener("paste",h(this,kf),{signal:e})},pE=function(){document.removeEventListener("copy",h(this,Pf)),document.removeEventListener("cut",h(this,If)),document.removeEventListener("paste",h(this,kf))},IL=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Tn=function(e){Object.entries(e).some(([r,s])=>h(this,Vf)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,Vf),e)}),h(this,Qt)===Te.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,Q,so).call(this,[[pe.HIGHLIGHT_FREE,!0]]))},so=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},kL=function(){if(!h(this,mo)){x(this,mo,!0);for(const e of h(this,Yt).values())e.enable();for(const e of h(this,Pt).values())e.enable()}},LL=function(){if(this.unselectAll(),h(this,mo)){x(this,mo,!1);for(const e of h(this,Yt).values())e.disable();for(const e of h(this,Pt).values())e.disable()}},mE=function(e){const t=h(this,Yt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},ML=function(){let e=null;for(e of h(this,Fe));return e},ld=function(){if(h(this,Pt).size===0)return!0;if(h(this,Pt).size===1)for(const e of h(this,Pt).values())return e.isEmpty();return!1},gE=function(e){for(const t of h(this,Fe))t.unselect();h(this,Fe).clear();for(const t of e)t.isEmpty()||(h(this,Fe).add(t),t.select());P(this,Q,Tn).call(this,{hasSelectedEditor:this.hasSelection})},ge(jc,"TRANSLATE_SMALL",1),ge(jc,"TRANSLATE_BIG",10);let Wl=jc;var fi,pi,Gr,mi,or,au,qr,Bf,vE;const si=class si{constructor(e){I(this,Bf);I(this,fi,"");I(this,pi,!1);I(this,Gr,null);I(this,mi,null);I(this,or,null);I(this,au,!1);I(this,qr,null);x(this,qr,e)}static initialize(e){si._l10nPromise||(si._l10nPromise=e)}async render(){const e=x(this,Gr,document.createElement("button"));e.className="altText";const t=await si._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const r=h(this,qr)._uiManager._signal;e.addEventListener("contextmenu",Xn,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),h(this,qr)._uiManager.editAltText(h(this,qr))};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(x(this,au,!0),s(i))},{signal:r}),await P(this,Bf,vE).call(this),e}finish(){h(this,Gr)&&(h(this,Gr).focus({focusVisible:h(this,au)}),x(this,au,!1))}isEmpty(){return!h(this,fi)&&!h(this,pi)}get data(){return{altText:h(this,fi),decorative:h(this,pi)}}set data({altText:e,decorative:t}){h(this,fi)===e&&h(this,pi)===t||(x(this,fi,e),x(this,pi,t),P(this,Bf,vE).call(this))}toggle(e=!1){h(this,Gr)&&(!e&&h(this,or)&&(clearTimeout(h(this,or)),x(this,or,null)),h(this,Gr).disabled=!e)}destroy(){var e;(e=h(this,Gr))==null||e.remove(),x(this,Gr,null),x(this,mi,null)}};fi=new WeakMap,pi=new WeakMap,Gr=new WeakMap,mi=new WeakMap,or=new WeakMap,au=new WeakMap,qr=new WeakMap,Bf=new WeakSet,vE=async function(){var s;const e=h(this,Gr);if(!e)return;if(!h(this,fi)&&!h(this,pi)){e.classList.remove("done"),(s=h(this,mi))==null||s.remove();return}e.classList.add("done"),si._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(i=>{e.setAttribute("aria-label",i)});let t=h(this,mi);if(!t){x(this,mi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const i=t.id=`alt-text-tooltip-${h(this,qr).id}`;e.setAttribute("aria-describedby",i);const o=100,a=h(this,qr)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(h(this,or)),x(this,or,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,or,setTimeout(()=>{x(this,or,null),h(this,mi).classList.add("show"),h(this,qr)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),e.addEventListener("mouseleave",()=>{var l;h(this,or)&&(clearTimeout(h(this,or)),x(this,or,null)),(l=h(this,mi))==null||l.classList.remove("show")},{signal:a})}t.innerText=h(this,pi)?await si._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):h(this,fi),t.parentNode||e.append(t);const r=h(this,qr).getImageForAltText();r==null||r.setAttribute("aria-describedby",t.id)},ge(si,"_l10nPromise",null);let Vv=si;var Ka,Kr,gn,lu,Xa,Jt,Ya,cu,uu,vn,Uf,Qa,vo,$f,Ja,gi,Es,hu,du,Tr,zf,hy,_e,yE,Hf,_E,wE,NL,DL,EE,AE,bE,OL,FL,VL,jL,SE,cd;const qe=class qe{constructor(e){I(this,_e);I(this,Ka,null);I(this,Kr,null);I(this,gn,null);I(this,lu,!1);I(this,Xa,!1);I(this,Jt,null);I(this,Ya,null);I(this,cu,this.focusin.bind(this));I(this,uu,this.focusout.bind(this));I(this,vn,null);I(this,Uf,"");I(this,Qa,!1);I(this,vo,null);I(this,$f,!1);I(this,Ja,!1);I(this,gi,!1);I(this,Es,null);I(this,hu,0);I(this,du,0);I(this,Tr,null);ge(this,"_initialOptions",Object.create(null));ge(this,"_isVisible",!0);ge(this,"_uiManager",null);ge(this,"_focusEventsAllowed",!0);ge(this,"_l10nPromise",null);I(this,zf,!1);I(this,hy,qe._zIndex++);this.constructor===qe&&ze("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=qe.prototype._resizeWithKeyboard,t=Wl.TRANSLATE_SMALL,r=Wl.TRANSLATE_BIG;return ke(this,"_resizerKeyboardManager",new rm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],qe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ke(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new P$({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,r){if(qe._l10nPromise||(qe._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(i=>[i,e.get(i.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),r!=null&&r.strings)for(const i of r.strings)qe._l10nPromise.set(i,e.get(i));if(qe._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);qe._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,zf)}set _isDraggable(e){var t;x(this,zf,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,hy)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):P(this,_e,cd).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(h(this,Qa)?x(this,Qa,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/o,this.fixAndSetPosition()}translate(e,t){P(this,_e,yE).call(this,this.parentDimensions,e,t)}translateInPage(e,t){h(this,vo)||x(this,vo,[this.x,this.y]),P(this,_e,yE).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){h(this,vo)||x(this,vo,[this.x,this.y]);const[r,s]=this.parentDimensions;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:o}=this;const[a,l]=this.getBaseTranslation();i+=a,o+=l,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!h(this,vo)&&(h(this,vo)[0]!==this.x||h(this,vo)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=qe,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:s,y:i,width:o,height:a}=this;if(o*=t,a*=r,s*=t,i*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-o,s)),i=Math.max(0,Math.min(r-a,i));break;case 90:s=Math.max(0,Math.min(t-a,s)),i=Math.min(r,Math.max(o,i));break;case 180:s=Math.min(t,Math.max(o,s)),i=Math.min(r,Math.max(a,i));break;case 270:s=Math.min(t,Math.max(a,s)),i=Math.max(0,Math.min(r-o,i));break}this.x=s/=t,this.y=i/=r;const[l,c]=this.getBaseTranslation();s+=l,i+=c;const{style:u}=this.div;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return P(r=qe,Hf,_E).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return P(r=qe,Hf,_E).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this,s=t*e,i=r*e;return Hn.isCSSRoundSupported?[Math.round(s),Math.round(i)]:[s,i]}setDims(e,t){const[r,s]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,h(this,Xa)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!h(this,Xa)&&t.endsWith("%");if(s&&i)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!h(this,Xa)&&!i&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=h(this,gn))==null||e.finish()}async addEditToolbar(){return h(this,vn)||h(this,Ja)?h(this,vn):(x(this,vn,new aE(this)),this.div.append(h(this,vn).render()),h(this,gn)&&h(this,vn).addAltTextButton(await h(this,gn).render()),h(this,vn))}removeEditToolbar(){var e;h(this,vn)&&(h(this,vn).remove(),x(this,vn,null),(e=h(this,gn))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){h(this,gn)||(Vv.initialize(qe._l10nPromise),x(this,gn,new Vv(this)),h(this,Ka)&&(h(this,gn).data=h(this,Ka),x(this,Ka,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=h(this,gn))==null?void 0:e.data}set altTextData(e){h(this,gn)&&(h(this,gn).data=e)}hasAltText(){var e;return!((e=h(this,gn))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=h(this,lu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",h(this,cu),{signal:e}),this.div.addEventListener("focusout",h(this,uu),{signal:e});const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*r/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Fv(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Qa,!0),this._isDraggable){P(this,_e,OL).call(this,e);return}P(this,_e,bE).call(this,e)}moveInDOM(){h(this,Es)&&clearTimeout(h(this,Es)),x(this,Es,setTimeout(()=>{var e;x(this,Es,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/s,u=t/s,f=this.x*i,p=this.y*o,m=this.width*i,g=this.height*o;switch(r){case 0:return[f+c+a,o-p-u-g+l,f+c+m+a,o-p-u+l];case 90:return[f+u+a,o-p+c+l,f+u+g+a,o-p+c+m+l];case 180:return[f-c-m+a,o-p+u+l,f-c+a,o-p+u+g+l];case 270:return[f-u-g+a,o-p-c-m+l,f-u+a,o-p-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,o]=e,a=i-r,l=o-s;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-s,l,a];case 180:return[i,t-s,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,Ja,!0)}disableEditMode(){x(this,Ja,!1)}isInEditMode(){return h(this,Ja)}shouldGetKeyboardEvents(){return h(this,gi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,r;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",h(this,cu),{signal:e}),(r=this.div)==null||r.addEventListener("focusout",h(this,uu),{signal:e})}rotate(e){}serialize(e=!1,t=null){ze("An editor must be serializable")}static deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});s.rotation=e.rotation,x(s,Ka,e.accessibilityData);const[i,o]=s.pageDimensions,[a,l,c,u]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/i,s.y=l/o,s.width=c/i,s.height=u/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",h(this,cu)),this.div.removeEventListener("focusout",h(this,uu)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(this,Es)&&(clearTimeout(h(this,Es)),x(this,Es,null)),P(this,_e,cd).call(this),this.removeEditToolbar(),h(this,Tr)){for(const e of h(this,Tr).values())clearTimeout(e);x(this,Tr,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,_e,NL).call(this),h(this,Jt).classList.remove("hidden"),Fv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Ya,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=h(this,Jt).children;if(!h(this,Kr)){x(this,Kr,Array.from(t));const o=P(this,_e,FL).bind(this),a=P(this,_e,VL).bind(this),l=this._uiManager._signal;for(const c of h(this,Kr)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",P(this,_e,jL).bind(this,u),{signal:l}),qe._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(f=>c.setAttribute("aria-label",f))}}const r=h(this,Kr)[0];let s=0;for(const o of t){if(o===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(h(this,Kr).length/4);if(i!==s){if(i<s)for(let a=0;a<s-i;a++)h(this,Jt).append(h(this,Jt).firstChild);else if(i>s)for(let a=0;a<i-s;a++)h(this,Jt).firstChild.before(h(this,Jt).lastChild);let o=0;for(const a of t){const c=h(this,Kr)[o++].getAttribute("data-resizer-name");qe._l10nPromise.get(`pdfjs-editor-resizer-label-${c}`).then(u=>a.setAttribute("aria-label",u))}}P(this,_e,SE).call(this,0),x(this,gi,!0),h(this,Jt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){h(this,gi)&&P(this,_e,AE).call(this,h(this,Uf),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){P(this,_e,cd).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!h(this,vn)){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=h(this,vn))==null||s.show())});return}(t=h(this,vn))==null||t.show()}unselect(){var e,t,r,s;(e=h(this,Jt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=h(this,vn))==null||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return h(this,$f)}set isEditing(e){x(this,$f,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){x(this,Xa,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){h(this,Tr)||x(this,Tr,new Map);const{action:r}=e;let s=h(this,Tr).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),h(this,Tr).delete(r),h(this,Tr).size===0&&x(this,Tr,null)},qe._telemetryTimeout),h(this,Tr).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,lu,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,lu,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ka=new WeakMap,Kr=new WeakMap,gn=new WeakMap,lu=new WeakMap,Xa=new WeakMap,Jt=new WeakMap,Ya=new WeakMap,cu=new WeakMap,uu=new WeakMap,vn=new WeakMap,Uf=new WeakMap,Qa=new WeakMap,vo=new WeakMap,$f=new WeakMap,Ja=new WeakMap,gi=new WeakMap,Es=new WeakMap,hu=new WeakMap,du=new WeakMap,Tr=new WeakMap,zf=new WeakMap,hy=new WeakMap,_e=new WeakSet,yE=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this.fixAndSetPosition()},Hf=new WeakSet,_E=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},wE=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},NL=function(){if(h(this,Jt))return;x(this,Jt,document.createElement("div")),h(this,Jt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");h(this,Jt).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",P(this,_e,DL).bind(this,r),{signal:t}),s.addEventListener("contextmenu",Xn,{signal:t}),s.tabIndex=-1}this.div.prepend(h(this,Jt))},DL=function(e,t){var _;t.preventDefault();const{isMac:r}=Hn.platform;if(t.button!==0||t.ctrlKey&&r)return;(_=h(this,gn))==null||_.toggle(!1);const s=P(this,_e,AE).bind(this,e),i=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",Xn,{signal:o});const l=this.x,c=this.y,u=this.width,f=this.height,p=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const g=()=>{var w;this.parent.togglePointerEvents(!0),(w=h(this,gn))==null||w.toggle(!0),this._isDraggable=i,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",Xn),this.parent.div.style.cursor=p,this.div.style.cursor=m,P(this,_e,EE).call(this,l,c,u,f)};window.addEventListener("pointerup",g,{signal:o}),window.addEventListener("blur",g,{signal:o})},EE=function(e,t,r,s){const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===r&&l===s||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=i,this.y=o;const[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=s,this.x=e,this.y=t;const[c,u]=this.parentDimensions;this.setDims(c*r,u*s),this.fixAndSetPosition()},mustExec:!0})},AE=function(e,t){const[r,s]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,c=qe.MIN_SIZE/r,u=qe.MIN_SIZE/s,f=W=>Math.round(W*1e4)/1e4,p=P(this,_e,wE).call(this,this.rotation),m=(W,U)=>[p[0]*W+p[2]*U,p[1]*W+p[3]*U],g=P(this,_e,wE).call(this,360-this.rotation),_=(W,U)=>[g[0]*W+g[2]*U,g[1]*W+g[3]*U];let w,y,E=!1,S=!1;switch(e){case"topLeft":E=!0,w=(W,U)=>[0,0],y=(W,U)=>[W,U];break;case"topMiddle":w=(W,U)=>[W/2,0],y=(W,U)=>[W/2,U];break;case"topRight":E=!0,w=(W,U)=>[W,0],y=(W,U)=>[0,U];break;case"middleRight":S=!0,w=(W,U)=>[W,U/2],y=(W,U)=>[0,U/2];break;case"bottomRight":E=!0,w=(W,U)=>[W,U],y=(W,U)=>[0,0];break;case"bottomMiddle":w=(W,U)=>[W/2,U],y=(W,U)=>[W/2,0];break;case"bottomLeft":E=!0,w=(W,U)=>[0,U],y=(W,U)=>[W,0];break;case"middleLeft":S=!0,w=(W,U)=>[0,U/2],y=(W,U)=>[W,U/2];break}const R=w(a,l),O=y(a,l);let V=m(...O);const C=f(i+V[0]),T=f(o+V[1]);let k=1,M=1,[F,j]=this.screenToPageTranslation(t.movementX,t.movementY);if([F,j]=_(F/r,j/s),E){const W=Math.hypot(a,l);k=M=Math.max(Math.min(Math.hypot(O[0]-R[0]-F,O[1]-R[1]-j)/W,1/a,1/l),c/a,u/l)}else S?k=Math.max(c,Math.min(1,Math.abs(O[0]-R[0]-F)))/a:M=Math.max(u,Math.min(1,Math.abs(O[1]-R[1]-j)))/l;const D=f(a*k),q=f(l*M);V=m(...y(D,q));const re=C-V[0],Z=T-V[1];this.width=D,this.height=q,this.x=re,this.y=Z,this.setDims(r*D,s*q),this.fixAndSetPosition()},bE=function(e){const{isMac:t}=Hn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},OL=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let r,s;const i=this._uiManager._signal;t&&(this.div.classList.add("moving"),r={passive:!0,capture:!0,signal:i},x(this,hu,e.clientX),x(this,du,e.clientY),s=a=>{const{clientX:l,clientY:c}=a,[u,f]=this.screenToPageTranslation(l-h(this,hu),c-h(this,du));x(this,hu,l),x(this,du,c),this._uiManager.dragSelectedEditors(u,f)},window.addEventListener("pointermove",s,r));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,r)),x(this,Qa,!1),this._uiManager.endDragSession()||P(this,_e,bE).call(this,e)};window.addEventListener("pointerup",o,{signal:i}),window.addEventListener("blur",o,{signal:i})},FL=function(e){qe._resizerKeyboardManager.exec(this,e)},VL=function(e){var t;h(this,gi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==h(this,Jt)&&P(this,_e,cd).call(this)},jL=function(e){x(this,Uf,h(this,gi)?e:"")},SE=function(e){if(h(this,Kr))for(const t of h(this,Kr))t.tabIndex=e},cd=function(){if(x(this,gi,!1),P(this,_e,SE).call(this,-1),h(this,Ya)){const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=h(this,Ya);P(this,_e,EE).call(this,e,t,r,s),x(this,Ya,null)}},I(qe,Hf),ge(qe,"_borderLineWidth",-1),ge(qe,"_colorManager",new hE),ge(qe,"_zIndex",1),ge(qe,"_telemetryTimeout",1e3);let Ve=qe;class P$ extends Ve{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const O1=3285377520,br=4294901760,fs=65535;class BL{constructor(e){this.h1=e?e&4294967295:O1,this.h2=e?e&4294967295:O1}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let _=0,w=e.length;_<w;_++){const y=e.charCodeAt(_);y<=255?t[r++]=y:(t[r++]=y>>>8,t[r++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,l=0,c=this.h1,u=this.h2;const f=3432918353,p=461845907,m=f&fs,g=p&fs;for(let _=0;_<s;_++)_&1?(a=o[_],a=a*f&br|a*m&fs,a=a<<15|a>>>17,a=a*p&br|a*g&fs,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[_],l=l*f&br|l*m&fs,l=l<<15|l>>>17,l=l*p&br|l*g&fs,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,i){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*f&br|a*m&fs,a=a<<15|a>>>17,a=a*p&br|a*g&fs,s&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&br|e*36045&fs,t=t*4283543511&br|((t<<16|e>>>16)*2950163797&br)>>>16,e^=t>>>1,e=e*444984403&br|e*60499&fs,t=t*3301882366&br|((t<<16|e>>>16)*3120437893&br)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const TE=Object.freeze({map:null,hash:"",transfer:void 0});var Za,Zt,dy,UL;class gS{constructor(){I(this,dy);I(this,Za,!1);I(this,Zt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=h(this,Zt).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return h(this,Zt).get(e)}remove(e){if(h(this,Zt).delete(e),h(this,Zt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of h(this,Zt).values())if(t instanceof Ve)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=h(this,Zt).get(e);let s=!1;if(r!==void 0)for(const[i,o]of Object.entries(t))r[i]!==o&&(s=!0,r[i]=o);else s=!0,h(this,Zt).set(e,t);s&&P(this,dy,UL).call(this),t instanceof Ve&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return h(this,Zt).has(e)}getAll(){return h(this,Zt).size>0?cS(h(this,Zt)):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return h(this,Zt).size}resetModified(){h(this,Za)&&(x(this,Za,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new $L(this)}get serializable(){if(h(this,Zt).size===0)return TE;const e=new Map,t=new BL,r=[],s=Object.create(null);let i=!1;for(const[o,a]of h(this,Zt)){const l=a instanceof Ve?a.serialize(!1,s):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:TE}get editorStats(){let e=null;const t=new Map;for(const r of h(this,Zt).values()){if(!(r instanceof Ve))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[a,l]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}}Za=new WeakMap,Zt=new WeakMap,dy=new WeakSet,UL=function(){h(this,Za)||(x(this,Za,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Wf;class $L extends gS{constructor(t){super();I(this,Wf);const{map:r,hash:s,transfer:i}=t.serializable,o=structuredClone(r,i?{transfer:i}:null);x(this,Wf,{map:o,hash:s,transfer:i})}get print(){ze("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,Wf)}}Wf=new WeakMap;var fu;class I${constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){I(this,fu,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),h(this,fu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||h(this,fu).has(e.loadedName))){if(Dt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:i}=e,o=new FontFace(r,s,i);this.addNativeFontFace(o);try{await o.load(),h(this,fu).add(r),t==null||t(e)}catch{ye(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw ye(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ke(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(An||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ke(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Dt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ke(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(R,O){return R.charCodeAt(O)<<24|R.charCodeAt(O+1)<<16|R.charCodeAt(O+2)<<8|R.charCodeAt(O+3)&255}function s(R,O,V,C){const T=R.substring(0,O),k=R.substring(O+V);return T+C+k}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(R,O){if(++c>30){ye("Load test font never loaded."),O();return}if(l.font="30px "+R,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(u.bind(null,R,O))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,f.length,f);const g=16,_=1482184792;let w=r(p,g);for(i=0,o=f.length-3;i<o;i+=4)w=w-_+r(f,i)|0;i<f.length&&(w=w-_+r(f+"XXX",i)|0),p=s(p,g,4,f$(w));const y=`url(data:font/opentype;base64,${btoa(p)});`,E=`@font-face {font-family:"${f}";src:${y}}`;this.insertRule(E);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const R of[e.loadedName,f]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=R,S.append(O)}this._document.body.append(S),u(f,()=>{S.remove(),t.complete()})}}fu=new WeakMap;class k${constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=cL(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),r}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(i){ye(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(i,o){};const s=[];for(let i=0,o=r.length;i<o;)switch(r[i++]){case ei.BEZIER_CURVE_TO:{const[a,l,c,u,f,p]=r.slice(i,i+6);s.push(m=>m.bezierCurveTo(a,l,c,u,f,p)),i+=6}break;case ei.MOVE_TO:{const[a,l]=r.slice(i,i+2);s.push(c=>c.moveTo(a,l)),i+=2}break;case ei.LINE_TO:{const[a,l]=r.slice(i,i+2);s.push(c=>c.lineTo(a,l)),i+=2}break;case ei.QUADRATIC_CURVE_TO:{const[a,l,c,u]=r.slice(i,i+4);s.push(f=>f.quadraticCurveTo(a,l,c,u)),i+=4}break;case ei.RESTORE:s.push(a=>a.restore());break;case ei.SAVE:s.push(a=>a.save());break;case ei.SCALE:Dt(s.length===2,"Scale command is only valid at the third position.");break;case ei.TRANSFORM:{const[a,l,c,u,f,p]=r.slice(i,i+6);s.push(m=>m.transform(a,l,c,u,f,p)),i+=6}break;case ei.TRANSLATE:{const[a,l]=r.slice(i,i+2);s.push(c=>c.translate(a,l)),i+=2}break}return this.compiledGlyphs[t]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let l=2,c=s.length;l<c;l++)s[l](o)}}}if(An){var CE=Promise.withResolvers(),Nd=null;(async()=>{const e=await Ym(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Ym(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Ym(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Ym(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let i,o;return new Map(Object.entries({fs:e,http:t,https:r,url:s,canvas:i,path2d:o}))})().then(e=>{Nd=e,CE.resolve()},e=>{ye(`loadPackages: ${e}`),Nd=new Map,CE.resolve()})}class zs{static get promise(){return CE.promise}static get(e){return Nd==null?void 0:Nd.get(e)}}const zL=function(n){return zs.get("fs").promises.readFile(n).then(t=>new Uint8Array(t))};class L$ extends r_{}class M$ extends Ov{_createCanvas(e,t){return zs.get("canvas").createCanvas(e,t)}}class N$ extends s_{_fetchData(e,t){return zL(e).then(r=>({cMapData:r,compressionType:t}))}}class D$ extends i_{_fetchData(e){return zL(e)}}const Pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function xE(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class sm{constructor(){this.constructor===sm&&ze("Cannot initialize BaseShadingPattern.")}getPattern(){ze("Abstract method `getPattern` called.")}}class O$ extends sm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===Pn.STROKE||s===Pn.FILL){const o=t.current.getClippedPathBoundingBox(s,it(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l,!0),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=ie.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),xE(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(r);i.setTransform(f)}else xE(e,this._bbox),i=this._createGradient(e);return i}}function L0(n,e,t,r,s,i,o,a){const l=e.coords,c=e.colors,u=n.data,f=n.width*4;let p;l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=o,o=p),l[r+1]>l[s+1]&&(p=r,r=s,s=p,p=o,o=a,a=p),l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=o,o=p);const m=(l[t]+e.offsetX)*e.scaleX,g=(l[t+1]+e.offsetY)*e.scaleY,_=(l[r]+e.offsetX)*e.scaleX,w=(l[r+1]+e.offsetY)*e.scaleY,y=(l[s]+e.offsetX)*e.scaleX,E=(l[s+1]+e.offsetY)*e.scaleY;if(g>=E)return;const S=c[i],R=c[i+1],O=c[i+2],V=c[o],C=c[o+1],T=c[o+2],k=c[a],M=c[a+1],F=c[a+2],j=Math.round(g),D=Math.round(E);let q,re,Z,W,U,z,X,ce;for(let se=j;se<=D;se++){if(se<w){const fe=se<g?0:(g-se)/(g-w);q=m-(m-_)*fe,re=S-(S-V)*fe,Z=R-(R-C)*fe,W=O-(O-T)*fe}else{let fe;se>E?fe=1:w===E?fe=0:fe=(w-se)/(w-E),q=_-(_-y)*fe,re=V-(V-k)*fe,Z=C-(C-M)*fe,W=T-(T-F)*fe}let ae;se<g?ae=0:se>E?ae=1:ae=(g-se)/(g-E),U=m-(m-y)*ae,z=S-(S-k)*ae,X=R-(R-M)*ae,ce=O-(O-F)*ae;const Be=Math.round(Math.min(q,U)),Ue=Math.round(Math.max(q,U));let Pe=f*se+Be*4;for(let fe=Be;fe<=Ue;fe++)ae=(q-fe)/(q-U),ae<0?ae=0:ae>1&&(ae=1),u[Pe++]=re-(re-z)*ae|0,u[Pe++]=Z-(Z-X)*ae|0,u[Pe++]=W-(W-ce)*ae|0,u[Pe++]=255}}function F$(n,e,t){const r=e.coords,s=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(i=0;i<l;i++){let u=i*a;for(let f=0;f<c;f++,u++)L0(n,t,r[u],r[u+1],r[u+a],s[u],s[u+1],s[u+a]),L0(n,t,r[u+a+1],r[u+1],r[u+a],s[u+a+1],s[u+1],s[u+a])}break;case"triangles":for(i=0,o=r.length;i<o;i+=3)L0(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class V$ extends sm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),m=c/f,g=u/p,_={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/g},w=f+2*2,y=p+2*2,E=r.getCanvas("mesh",w,y,!1),S=E.context,R=S.createImageData(f,p);if(t){const V=R.data;for(let C=0,T=V.length;C<T;C+=4)V[C]=t[0],V[C+1]=t[1],V[C+2]=t[2],V[C+3]=255}for(const V of this._figures)F$(R,V,_);return S.putImageData(R,2,2),{canvas:E.canvas,offsetX:a-2*m,offsetY:l-2*g,scaleX:m,scaleY:g}}getPattern(e,t,r,s){xE(e,this._bbox);let i;if(s===Pn.SHADING)i=ie.singularValueDecompose2dScale(it(e));else if(i=ie.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=ie.singularValueDecompose2dScale(this.matrix);i=[i[0]*a[0],i[1]*a[1]]}const o=this._createMeshCanvas(i,s===Pn.SHADING?null:this._background,t.cachedCanvases);return s!==Pn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class j$ extends sm{getPattern(){return"hotpink"}}function B$(n){switch(n[0]){case"RadialAxial":return new O$(n);case"Mesh":return new V$(n);case"Dummy":return new j$}throw new Error(`Unknown IR type: ${n[0]}`)}const F1={COLORED:1,UNCOLORED:2},fy=class fy{constructor(e,t,r,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,r=this.bbox,s=this.xstep,i=this.ystep,o=this.paintType,a=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;e_("TilingType: "+a);const u=r[0],f=r[1],p=r[2],m=r[3],g=ie.singularValueDecompose2dScale(this.matrix),_=ie.singularValueDecompose2dScale(this.baseTransform),w=[g[0]*_[0],g[1]*_[1]],y=this.getSizeAndScale(s,this.ctx.canvas.width,w[0]),E=this.getSizeAndScale(i,this.ctx.canvas.height,w[1]),S=e.cachedCanvases.getCanvas("pattern",y.size,E.size,!0),R=S.context,O=c.createCanvasGraphics(R);O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,o,l);let V=u,C=f,T=p,k=m;return u<0&&(V=0,T+=Math.abs(u)),f<0&&(C=0,k+=Math.abs(f)),R.translate(-(y.scale*V),-(E.scale*C)),O.transform(y.scale,0,0,E.scale,0,0),R.save(),this.clipBbox(O,V,C,T,k),O.baseTransform=it(O.ctx),O.executeOperatorList(t),O.endDrawing(),{canvas:S.canvas,scaleX:y.scale,scaleY:E.scale,offsetX:V,offsetY:C}}getSizeAndScale(e,t,r){e=Math.abs(e);const s=Math.max(fy.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const o=s-t,a=i-r;e.ctx.rect(t,r,o,a),e.current.updateRectMinMax(it(e.ctx),[t,r,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case F1.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,i.fillColor=o.fillStyle,i.strokeColor=o.strokeStyle;break;case F1.UNCOLORED:const a=ie.makeHexColor(r[0],r[1],r[2]);s.fillStyle=a,s.strokeStyle=a,i.fillColor=a,i.strokeColor=a;break;default:throw new d$(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,s){let i=r;s!==Pn.SHADING&&(i=ie.transform(i,t.baseTransform),this.matrix&&(i=ie.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};ge(fy,"MAX_PATTERN_SIZE",3e3);let RE=fy;function U$({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=Hn.isLittleEndian?4278190080:255,[l,c]=o?[i,a]:[a,i],u=r>>3,f=r&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let g=0;g<s;g++){for(const w=e+u;e<w;e++){const y=e<p?n[e]:255;t[m++]=y&128?c:l,t[m++]=y&64?c:l,t[m++]=y&32?c:l,t[m++]=y&16?c:l,t[m++]=y&8?c:l,t[m++]=y&4?c:l,t[m++]=y&2?c:l,t[m++]=y&1?c:l}if(f===0)continue;const _=e<p?n[e++]:255;for(let w=0;w<f;w++)t[m++]=_&1<<7-w?c:l}return{srcPos:e,destPos:m}}const V1=16,j1=100,$$=15,B1=10,U1=1e3,Bn=16;function z$(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,s){e.translate(r,s),this.__originalTranslate(r,s)},n.scale=function(r,s){e.scale(r,s),this.__originalScale(r,s)},n.transform=function(r,s,i,o,a,l){e.transform(r,s,i,o,a,l),this.__originalTransform(r,s,i,o,a,l)},n.setTransform=function(r,s,i,o,a,l){e.setTransform(r,s,i,o,a,l),this.__originalSetTransform(r,s,i,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,o,a){e.bezierCurveTo(t,r,s,i,o,a),this.__originalBezierCurveTo(t,r,s,i,o,a)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class H${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Qm(n,e,t,r,s,i,o,a,l,c){const[u,f,p,m,g,_]=it(n);if(f===0&&p===0){const E=o*u+g,S=Math.round(E),R=a*m+_,O=Math.round(R),V=(o+l)*u+g,C=Math.abs(Math.round(V)-S)||1,T=(a+c)*m+_,k=Math.abs(Math.round(T)-O)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(m),S,O),n.drawImage(e,t,r,s,i,0,0,C,k),n.setTransform(u,f,p,m,g,_),[C,k]}if(u===0&&m===0){const E=a*p+g,S=Math.round(E),R=o*f+_,O=Math.round(R),V=(a+c)*p+g,C=Math.abs(Math.round(V)-S)||1,T=(o+l)*f+_,k=Math.abs(Math.round(T)-O)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,S,O),n.drawImage(e,t,r,s,i,0,0,k,C),n.setTransform(u,f,p,m,g,_),[k,C]}n.drawImage(e,t,r,s,i,o,a,l,c);const w=Math.hypot(u,f),y=Math.hypot(p,m);return[w*l,y*c]}function W$(n){const{width:e,height:t}=n;if(e>U1||t>U1)return null;const r=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let o=new Uint8Array(i*(t+1)),a,l,c;const u=e+7&-8;let f=new Uint8Array(u*t),p=0;for(const y of n.data){let E=128;for(;E>0;)f[p++]=y&E?0:255,E>>=1}let m=0;for(p=0,f[p]!==0&&(o[0]=1,++m),l=1;l<e;l++)f[p]!==f[p+1]&&(o[l]=f[p]?2:1,++m),p++;for(f[p]!==0&&(o[l]=2,++m),a=1;a<t;a++){p=a*u,c=a*i,f[p-u]!==f[p]&&(o[c]=f[p]?1:8,++m);let y=(f[p]?4:0)+(f[p-u]?8:0);for(l=1;l<e;l++)y=(y>>2)+(f[p+1]?4:0)+(f[p-u+1]?8:0),s[y]&&(o[c+l]=s[y],++m),p++;if(f[p-u]!==f[p]&&(o[c+l]=f[p]?2:4,++m),m>r)return null}for(p=u*(t-1),c=a*i,f[p]!==0&&(o[c]=8,++m),l=1;l<e;l++)f[p]!==f[p+1]&&(o[c+l]=f[p]?4:8,++m),p++;if(f[p]!==0&&(o[c+l]=4,++m),m>r)return null;const g=new Int32Array([0,i,-1,0,-i,0,0,0,1]),_=new Path2D;for(a=0;m&&a<=t;a++){let y=a*i;const E=y+e;for(;y<E&&!o[y];)y++;if(y===E)continue;_.moveTo(y%i,a);const S=y;let R=o[y];do{const O=g[R];do y+=O;while(!o[y]);const V=o[y];V!==5&&V!==10?(R=V,o[y]=0):(R=V&51*R>>4,o[y]&=R>>2|R<<2),_.lineTo(y%i,y/i|0),o[y]||--m}while(S!==y);--a}return f=null,o=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(_),y.beginPath(),y.restore()}}class $1{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=aL,this.textMatrixScale=1,this.fontMatrix=eE,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=pn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=ie.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=ie.applyTransform(t,e),s=ie.applyTransform(t.slice(2),e),i=ie.applyTransform([t[0],t[3]],e),o=ie.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],s[0],i[0],o[0]),this.minY=Math.min(this.minY,r[1],s[1],i[1],o[1]),this.maxX=Math.max(this.maxX,r[0],s[0],i[0],o[0]),this.maxY=Math.max(this.maxY,r[1],s[1],i[1],o[1])}updateScalingPathMinMax(e,t){ie.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,s,i,o,a,l,c,u){const f=ie.bezierBoundingBox(t,r,s,i,o,a,l,c,u);u||this.updateRectMinMax(e,f)}getPathBoundingBox(e=Pn.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Pn.STROKE){t||ze("Stroke bounding box must include transform.");const s=ie.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;r[0]-=i,r[1]-=o,r[2]+=i,r[3]+=o}return r}updateClipFromPath(){const e=ie.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Pn.FILL,t=null){return ie.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function z1(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Bn,i=(t-s)/Bn,o=s===0?i:i+1,a=n.createImageData(r,Bn);let l=0,c;const u=e.data,f=a.data;let p,m,g,_;if(e.kind===xg.GRAYSCALE_1BPP){const w=u.byteLength,y=new Uint32Array(f.buffer,0,f.byteLength>>2),E=y.length,S=r+7>>3,R=4294967295,O=Hn.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(g=p<i?Bn:s,c=0,m=0;m<g;m++){const V=w-l;let C=0;const T=V>S?r:V*8-7,k=T&-8;let M=0,F=0;for(;C<k;C+=8)F=u[l++],y[c++]=F&128?R:O,y[c++]=F&64?R:O,y[c++]=F&32?R:O,y[c++]=F&16?R:O,y[c++]=F&8?R:O,y[c++]=F&4?R:O,y[c++]=F&2?R:O,y[c++]=F&1?R:O;for(;C<T;C++)M===0&&(F=u[l++],M=128),y[c++]=F&M?R:O,M>>=1}for(;c<E;)y[c++]=0;n.putImageData(a,0,p*Bn)}}else if(e.kind===xg.RGBA_32BPP){for(m=0,_=r*Bn*4,p=0;p<i;p++)f.set(u.subarray(l,l+_)),l+=_,n.putImageData(a,0,m),m+=Bn;p<o&&(_=r*s*4,f.set(u.subarray(l,l+_)),n.putImageData(a,0,m))}else if(e.kind===xg.RGB_24BPP)for(g=Bn,_=r*g,p=0;p<o;p++){for(p>=i&&(g=s,_=r*g),c=0,m=_;m--;)f[c++]=u[l++],f[c++]=u[l++],f[c++]=u[l++],f[c++]=255;n.putImageData(a,0,p*Bn)}else throw new Error(`bad image kind: ${e.kind}`)}function H1(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Bn,i=(t-s)/Bn,o=s===0?i:i+1,a=n.createImageData(r,Bn);let l=0;const c=e.data,u=a.data;for(let f=0;f<o;f++){const p=f<i?Bn:s;({srcPos:l}=U$({src:c,srcPos:l,dest:u,width:r,height:p,nonBlackColor:0})),n.putImageData(a,0,f*Bn)}}function Jh(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Jm(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!An){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function W1(n,e){if(e)return!0;const t=ie.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*na.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const G$=["butt","round","square"],q$=["miter","round","bevel"],K$={},G1={};var ca,PE,IE;const JS=class JS{constructor(e,t,r,s,i,{optionalContentConfig:o,markedContentStack:a=null},l,c){I(this,ca);this.ctx=e,this.current=new $1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new H$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...it(this.compositeCtx))}this.ctx.save(),Jm(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=it(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,o=e.fnArray;let a=t||0;const l=i.length;if(l===a)return a;const c=l-a>B1&&typeof r=="function",u=c?Date.now()+$$:0;let f=0;const p=this.commonObjs,m=this.objs;let g;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,r),a;if(g=o[a],g!==zr.dependency)this[g].apply(this,i[a]);else for(const _ of i[a]){const w=_.startsWith("g_")?p:m;if(!w.has(_))return w.get(_,r),a}if(a++,a===l)return a;if(c&&++f>B1){if(Date.now()>u)return r(),a;f=0}}}endDrawing(){P(this,ca,PE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,ca,IE).call(this)}_scaleImage(e,t){const r=e.width,s=e.height;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=s,c="prescale1",u,f;for(;i>2&&a>1||o>2&&l>1;){let p=a,m=l;i>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/p),o>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/m),u=this.cachedCanvases.getCanvas(c,p,m),f=u.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,a,l,0,0,p,m),e=u.canvas,a=p,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,o=this.current.patternFill,a=it(t);let l,c,u,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),i]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const k=l.get(c);if(k&&!o){const M=Math.round(Math.min(a[0],a[2])+a[4]),F=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:k,offsetX:M,offsetY:F}}u=k}u||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),H1(f.context,e));let p=ie.transform(a,[1/r,0,0,-1/s,0,0]);p=ie.transform(p,[1,0,0,1,0,-s]);const[m,g,_,w]=ie.getAxialAlignedBoundingBox([0,0,r,s],p),y=Math.round(_-m)||1,E=Math.round(w-g)||1,S=this.cachedCanvases.getCanvas("fillCanvas",y,E),R=S.context,O=m,V=g;R.translate(-O,-V),R.transform(...p),u||(u=this._scaleImage(f.canvas,ti(R)),u=u.img,l&&o&&l.set(c,u)),R.imageSmoothingEnabled=W1(it(R),e.interpolate),Qm(R,u,0,0,u.width,u.height,0,0,r,s),R.globalCompositeOperation="source-in";const C=ie.transform(ti(R),[1,0,0,1,-O,-V]);return R.fillStyle=o?i.getPattern(t,this,C,Pn.FILL):i,R.fillRect(0,0,r,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,S.canvas)),{canvas:S.canvas,offsetX:Math.round(O),offsetY:Math.round(V)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=G$[e]}setLineJoin(e){this.ctx.lineJoin=q$[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...it(this.suspendedCtx)),Jh(this.suspendedCtx,i),z$(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Jh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],o=s[1],a=s[2]-i,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,o,a,l,c,u,f){let p=e.canvas,m=l-u,g=c-f;if(o){if(m<0||g<0||m+r>p.width||g+s>p.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,s),y=w.context;y.drawImage(p,-m,-g),o.some(E=>E!==0)&&(y.globalCompositeOperation="destination-atop",y.fillStyle=ie.makeHexColor(...o),y.fillRect(0,0,r,s),y.globalCompositeOperation="source-over"),p=w.canvas,m=g=0}else if(o.some(w=>w!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(m,g,r,s),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=ie.makeHexColor(...o),e.fillRect(m,g,r,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const _=new Path2D;_.rect(l,c,r,s),t.clip(_),t.globalCompositeOperation="destination-in",t.drawImage(p,m,g,r,s,l,c,r,s),t.restore()}save(){this.inSMaskMode?(Jh(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Jh(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,s,i,o){this.ctx.transform(e,t,r,s,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const s=this.ctx,i=this.current;let o=i.x,a=i.y,l,c;const u=it(s),f=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,p=f?r.slice(0):null;for(let m=0,g=0,_=e.length;m<_;m++)switch(e[m]|0){case zr.rectangle:o=t[g++],a=t[g++];const w=t[g++],y=t[g++],E=o+w,S=a+y;s.moveTo(o,a),w===0||y===0?s.lineTo(E,S):(s.lineTo(E,a),s.lineTo(E,S),s.lineTo(o,S)),f||i.updateRectMinMax(u,[o,a,E,S]),s.closePath();break;case zr.moveTo:o=t[g++],a=t[g++],s.moveTo(o,a),f||i.updatePathMinMax(u,o,a);break;case zr.lineTo:o=t[g++],a=t[g++],s.lineTo(o,a),f||i.updatePathMinMax(u,o,a);break;case zr.curveTo:l=o,c=a,o=t[g+4],a=t[g+5],s.bezierCurveTo(t[g],t[g+1],t[g+2],t[g+3],o,a),i.updateCurvePathMinMax(u,l,c,t[g],t[g+1],t[g+2],t[g+3],o,a,p),g+=6;break;case zr.curveTo2:l=o,c=a,s.bezierCurveTo(o,a,t[g],t[g+1],t[g+2],t[g+3]),i.updateCurvePathMinMax(u,l,c,o,a,t[g],t[g+1],t[g+2],t[g+3],p),o=t[g+2],a=t[g+3],g+=4;break;case zr.curveTo3:l=o,c=a,o=t[g+2],a=t[g+3],s.bezierCurveTo(t[g],t[g+1],o,a,o,a),i.updateCurvePathMinMax(u,l,c,t[g],t[g+1],o,a,o,a,p),g+=4;break;case zr.closePath:s.closePath();break}f&&i.updateScalingPathMinMax(u,p),i.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(t.save(),t.strokeStyle=r.getPattern(t,this,ti(t),Pn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=r.getPattern(t,this,ti(t),Pn.FILL),i=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=K$}eoClip(){this.pendingClip=G1}beginText(){this.current.textMatrix=aL,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||eE,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ye("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",o=((u=r.systemFontInfo)==null?void 0:u.css)||`"${i}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const l=r.italic?"italic":"normal";let c=t;t<V1?c=V1:t>j1&&(c=j1),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,s,i,o){this.current.textMatrix=[e,t,r,s,i,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s){const i=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=l&pn.FILL_STROKE_MASK,f=!!(l&pn.ADD_TO_PATH_FLAG),p=o.patternFill&&!a.missingFile;let m;(a.disableFontFace||f||p)&&(m=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||p?(i.save(),i.translate(t,r),i.beginPath(),m(i,c),s&&i.setTransform(...s),(u===pn.FILL||u===pn.FILL_STROKE)&&i.fill(),(u===pn.STROKE||u===pn.FILL_STROKE)&&i.stroke(),i.restore()):((u===pn.FILL||u===pn.FILL_STROKE)&&i.fillText(e,t,r),(u===pn.STROKE||u===pn.FILL_STROKE)&&i.strokeText(e,t,r)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:it(i),x:t,y:r,fontSize:c,addToPath:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return ke(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,f=e.length,p=r.vertical,m=p?1:-1,g=r.defaultVMetrics,_=s*t.fontMatrix[0],w=t.textRenderingMode===pn.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),c>0?i.scale(u,-1):i.scale(u,1);let y;if(t.patternFill){i.save();const V=t.fillColor.getPattern(i,this,ti(i),Pn.FILL);y=it(i),i.restore(),i.fillStyle=V}let E=t.lineWidth;const S=t.textMatrixScale;if(S===0||E===0){const V=t.textRenderingMode&pn.FILL_STROKE_MASK;(V===pn.STROKE||V===pn.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=S;if(o!==1&&(i.scale(o,o),E/=o),i.lineWidth=E,r.isInvalidPDFjsFont){const V=[];let C=0;for(const T of e)V.push(T.unicode),C+=T.width;i.fillText(V.join(""),0,0),t.x+=C*_*u,i.restore(),this.compose();return}let R=0,O;for(O=0;O<f;++O){const V=e[O];if(typeof V=="number"){R+=m*V*s/1e3;continue}let C=!1;const T=(V.isSpace?l:0)+a,k=V.fontChar,M=V.accent;let F,j,D=V.width;if(p){const re=V.vmetric||g,Z=-(V.vmetric?re[1]:D*.5)*_,W=re[2]*_;D=re?-re[0]:D,F=Z/o,j=(R+W)/o}else F=R/o,j=0;if(r.remeasure&&D>0){const re=i.measureText(k).width*1e3/s*o;if(D<re&&this.isFontSubpixelAAEnabled){const Z=D/re;C=!0,i.save(),i.scale(Z,1),F/=Z}else D!==re&&(F+=(D-re)/2e3*s/o)}if(this.contentVisible&&(V.isInFont||r.missingFile)){if(w&&!M)i.fillText(k,F,j);else if(this.paintChar(k,F,j,y),M){const re=F+s*M.offset.x/o,Z=j-s*M.offset.y/o;this.paintChar(M.fontChar,re,Z,y)}}const q=p?D*_-T*c:D*_+T*c;R+=q,C&&i.restore()}p?t.y-=R:t.x+=R*u,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,o=r.fontDirection,a=s.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*o,f=r.fontMatrix||eE,p=e.length,m=r.textRenderingMode===pn.INVISIBLE;let g,_,w,y;if(!(m||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(u,o),g=0;g<p;++g){if(_=e[g],typeof _=="number"){y=a*_*i/1e3,this.ctx.translate(y,0),r.x+=y*u;continue}const E=(_.isSpace?c:0)+l,S=s.charProcOperatorList[_.operatorListId];if(!S){ye(`Type3 character "${_.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_,this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(S),this.restore()),w=ie.applyTransform([_.width,0],f)[0]*i+E,t.translate(w,0),r.x+=w*u}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,o){this.ctx.rect(r,s,i-r,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],s=this.baseTransform||it(this.ctx),i={createCanvasGraphics:o=>new JS(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new RE(e,r,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){const s=ie.makeHexColor(e,t,r);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,r){const s=ie.makeHexColor(e,t,r);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=B$(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,ti(t),Pn.SHADING);const s=ti(t);if(s){const{width:i,height:o}=t.canvas,[a,l,c,u]=ie.getAxialAlignedBoundingBox([0,0,i,o],s);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ze("Should not call beginInlineImage")}beginImageData(){ze("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=it(this.ctx),t)){const r=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],r,s),this.current.updateRectMinMax(it(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||e_("TODO: Support non-isolated groups."),e.knockout&&ye("Knockout groups not supported.");const r=it(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=ie.getAxialAlignedBoundingBox(e.bbox,it(t));const i=[0,0,t.canvas.width,t.canvas.height];s=ie.intersect(s,i)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,l,c),p=f.context;p.translate(-o,-a),p.transform(...r),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Jh(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=it(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=ie.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(P(this,ca,PE).call(this),Jm(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[l,c]=ie.singularValueDecompose2dScale(it(this.ctx)),{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),p=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),Jm(this.ctx)}else Jm(this.ctx),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.endPath()}this.current=new $1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),P(this,ca,IE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=W$(e)),s.compiled)){s.compiled(r);return}const i=this._createMaskCanvas(e),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=it(a);a.transform(t,r,s,i,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,f=o.length;u<f;u+=2){const p=ie.transform(l,[t,r,s,i,o[u],o[u+1]]),[m,g]=ie.applyTransform([0,0],p);a.drawImage(c.canvas,m,g)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:o,width:a,height:l,transform:c}=i,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=u.context;f.save();const p=this.getObject(o,i);H1(f,p),f.globalCompositeOperation="source-in",f.fillStyle=s?r.getPattern(f,this,ti(t),Pn.FILL):r,f.fillRect(0,0,a,l),f.restore(),t.save(),t.transform(...c),t.scale(1,-1),Qm(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ye("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){ye("Dependent image isn't ready yet");return}const o=i.width,a=i.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[t,0,0,r,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;if(this.save(),!An){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/t,-1/r);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,r).context;z1(l,e),i=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(i,ti(s));s.imageSmoothingEnabled=W1(it(s),e.interpolate),Qm(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o).context;z1(l,e),s=this.applyTransferMapsToCanvas(l)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),Qm(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===G1?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=it(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let o,a;if(r===0&&s===0){const l=Math.abs(t),c=Math.abs(i);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,f=c*e;o=u<1?1/u:1,a=f<1?1/f:1}}else{const l=Math.abs(t*i-r*s),c=Math.hypot(t,r),u=Math.hypot(s,i);if(e===0)o=u/l,a=c/l;else{const f=e*l;o=u>f?u/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=r||1,s===1&&i===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(s,i),o.length>0){const a=Math.max(s,i);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ca=new WeakSet,PE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},IE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let qc=JS;for(const n in zr)qc.prototype[n]!==void 0&&(qc.prototype[zr[n]]=qc.prototype[n]);var Gf,qf;class Fi{static get workerPort(){return h(this,Gf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,Gf,e)}static get workerSrc(){return h(this,qf)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,qf,e)}}Gf=new WeakMap,qf=new WeakMap,I(Fi,Gf,null),I(Fi,qf,"");const Zm={UNKNOWN:0,DATA:1,ERROR:2},bt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nr(n){switch(n instanceof Error||typeof n=="object"&&n!==null||ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new tc(n.message);case"MissingPDFException":return new ec(n.message);case"PasswordException":return new nE(n.message,n.code);case"UnexpectedResponseException":return new t_(n.message,n.status);case"UnknownErrorException":return new rE(n.message,n.details);default:return new rE(n.message,n.toString())}}var js,HL,WL,Mg;class ud{constructor(e,t,r){I(this,js);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const i=s.data;if(i.targetName!==this.sourceName)return;if(i.stream){P(this,js,WL).call(this,i);return}if(i.callback){const a=i.callbackId,l=this.callbackCapabilities[a];if(!l)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],i.callback===Zm.DATA)l.resolve(i.data);else if(i.callback===Zm.ERROR)l.reject(nr(i.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[i.action];if(!o)throw new Error(`Unknown action from worker: ${i.action}`);if(i.callbackId){const a=this.sourceName,l=i.sourceName;new Promise(function(c){c(o(i.data))}).then(function(c){r.postMessage({sourceName:a,targetName:l,callback:Zm.DATA,callbackId:i.callbackId,data:c})},function(c){r.postMessage({sourceName:a,targetName:l,callback:Zm.ERROR,callbackId:i.callbackId,reason:nr(c)})});return}if(i.streamId){P(this,js,HL).call(this,i);return}o(i.data)},r.addEventListener("message",this._onComObjOnMessage)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:c.desiredSize},s),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[i].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:bt.PULL,streamId:i,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Dt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[i].cancelCall=u,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:bt.CANCEL,streamId:i,reason:nr(c)}),u.promise}},r)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}js=new WeakSet,HL=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:bt.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:bt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Dt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:bt.ERROR,streamId:t,reason:nr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(a(e.data,l))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.START_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:bt.START_COMPLETE,streamId:t,reason:nr(c)})})},WL=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case bt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(nr(e.reason));break;case bt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(nr(e.reason));break;case bt.PULL:if(!a){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){var c;l((c=a.onPull)==null?void 0:c.call(a))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,success:!0})},function(l){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,reason:nr(l)})});break;case bt.ENQUEUE:if(Dt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case bt.CLOSE:if(Dt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),P(this,js,Mg).call(this,o,t);break;case bt.ERROR:Dt(o,"error should have stream controller"),o.controller.error(nr(e.reason)),P(this,js,Mg).call(this,o,t);break;case bt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(nr(e.reason)),P(this,js,Mg).call(this,o,t);break;case bt.CANCEL:if(!a)break;new Promise(function(l){var c;l((c=a.onCancel)==null?void 0:c.call(a,nr(e.reason)))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){i.postMessage({sourceName:r,targetName:s,stream:bt.CANCEL_COMPLETE,streamId:t,reason:nr(l)})}),a.sinkCapability.reject(nr(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Mg=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var el,Kf;class X${constructor({parsedData:e,rawData:t}){I(this,el);I(this,Kf);x(this,el,e),x(this,Kf,t)}getRaw(){return h(this,Kf)}get(e){return h(this,el).get(e)??null}getAll(){return cS(h(this,el))}has(e){return h(this,el).has(e)}}el=new WeakMap,Kf=new WeakMap;const io=Symbol("INTERNAL");var Xf,Yf,Qf,pu;class Y${constructor(e,{name:t,intent:r,usage:s}){I(this,Xf,!1);I(this,Yf,!1);I(this,Qf,!1);I(this,pu,!0);x(this,Xf,!!(e&Rr.DISPLAY)),x(this,Yf,!!(e&Rr.PRINT)),this.name=t,this.intent=r,this.usage=s}get visible(){if(h(this,Qf))return h(this,pu);if(!h(this,pu))return!1;const{print:e,view:t}=this.usage;return h(this,Xf)?(t==null?void 0:t.viewState)!=="OFF":h(this,Yf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==io&&ze("Internal method `_setVisible` called."),x(this,Qf,r),x(this,pu,t)}}Xf=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,pu=new WeakMap;var yo,$e,mu,gu,Jf,kE;class Q${constructor(e,t=Rr.DISPLAY){I(this,Jf);I(this,yo,null);I(this,$e,new Map);I(this,mu,null);I(this,gu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,gu,e.order);for(const r of e.groups)h(this,$e).set(r.id,new Y$(t,r));if(e.baseState==="OFF")for(const r of h(this,$e).values())r._setVisible(io,!1);for(const r of e.on)h(this,$e).get(r)._setVisible(io,!0);for(const r of e.off)h(this,$e).get(r)._setVisible(io,!1);x(this,mu,this.getHash())}}isVisible(e){if(h(this,$e).size===0)return!0;if(!e)return e_("Optional content group not defined."),!0;if(e.type==="OCG")return h(this,$e).has(e.id)?h(this,$e).get(e.id).visible:(ye(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,Jf,kE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!h(this,$e).has(t))return ye(`Optional content group not found: ${t}`),!0;if(h(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!h(this,$e).has(t))return ye(`Optional content group not found: ${t}`),!0;if(!h(this,$e).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!h(this,$e).has(t))return ye(`Optional content group not found: ${t}`),!0;if(!h(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!h(this,$e).has(t))return ye(`Optional content group not found: ${t}`),!0;if(h(this,$e).get(t).visible)return!1}return!0}return ye(`Unknown optional content policy ${e.policy}.`),!0}return ye(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const r=h(this,$e).get(e);if(!r){ye(`Optional content group not found: ${e}`);return}r._setVisible(io,!!t,!0),x(this,yo,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=h(this,$e).get(s);if(i)switch(r){case"ON":i._setVisible(io,!0);break;case"OFF":i._setVisible(io,!1);break;case"Toggle":i._setVisible(io,!i.visible);break}}x(this,yo,null)}get hasInitialVisibility(){return h(this,mu)===null||this.getHash()===h(this,mu)}getOrder(){return h(this,$e).size?h(this,gu)?h(this,gu).slice():[...h(this,$e).keys()]:null}getGroups(){return h(this,$e).size>0?cS(h(this,$e)):null}getGroup(e){return h(this,$e).get(e)||null}getHash(){if(h(this,yo)!==null)return h(this,yo);const e=new BL;for(const[t,r]of h(this,$e))e.update(`${t}:${r.visible}`);return x(this,yo,e.hexdigest())}}yo=new WeakMap,$e=new WeakMap,mu=new WeakMap,gu=new WeakMap,Jf=new WeakSet,kE=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let o;if(Array.isArray(i))o=P(this,Jf,kE).call(this,i);else if(h(this,$e).has(i))o=h(this,$e).get(i).visible;else return ye(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class J${constructor(e,{disableRange:t=!1,disableStream:r=!1}){Dt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Dt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Z$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new e3(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class Z${constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=pS(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class e3{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function t3(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),i(u)}if(t=o(n),t){const u=c(t);return i(u)}if(t=r("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),i(u)}function r(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),m=n_(f);f=p.decode(m),e=!1}catch{}}return f}function i(u){return e&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),e&&(u=s("iso-8859-1",u))),u}function o(u){const f=[];let p;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(u))!==null;){let[,_,w,y]=p;if(_=parseInt(_,10),_ in f){if(_===0)break;continue}f[_]=[w,y]}const g=[];for(let _=0;_<f.length&&_ in f;++_){let[w,y]=f[_];y=a(y),w&&(y=unescape(y),_===0&&(y=l(y))),g.push(y)}return g.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function l(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),g=u.slice(f+1).replace(/^[^']*'/,"");return s(p,g)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,g){if(m==="q"||m==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,w){return String.fromCharCode(parseInt(w,16))}),s(p,g);try{g=atob(g)}catch{}return s(p,g)})}return""}function vS({getResponseHeader:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function yS(n){const e=n("Content-Disposition");if(e){let t=t3(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(pS(t))return t}return null}function a_(n,e){return n===404||n===0&&e.startsWith("file:")?new ec('Missing PDF "'+e+'".'):new t_(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function GL(n){return n===200||n===206}function qL(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function KL(n){const e=new Headers;for(const t in n){const r=n[t];r!==void 0&&e.append(t,r)}return e}function XL(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ye(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class q1{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new n3(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new r3(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class n3{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=KL(this._stream.httpHeaders);const r=t.url;fetch(r,qL(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!GL(s.status))throw a_(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const i=l=>s.headers.get(l),{allowRangeRequests:o,suggestedLength:a}=vS({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=yS(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new tc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:XL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class r3{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=KL(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${r-1}`);const i=s.url;fetch(i,qL(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!GL(o.status))throw a_(o.status,i);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:XL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const M0=200,N0=206;function s3(n){const e=n.response;return typeof e!="string"?e:n_(e).buffer}class i3{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const s={begin:e,end:t};for(const i in r)s[i]=r[i];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const i in this.httpHeaders){const o=this.httpHeaders[i];o!==void 0&&t.setRequestHeader(i,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=N0):s.expectedStatus=M0,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){var l,c,u;const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(l=r.onError)==null||l.call(r,s.status);return}const i=s.status||M0;if(!(i===M0&&r.expectedStatus===N0)&&i!==r.expectedStatus){(c=r.onError)==null||c.call(r,s.status);return}const a=s3(s);if(i===N0){const f=s.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);r.onDone({begin:parseInt(p[1],10),chunk:a})}else a?r.onDone({begin:0,chunk:a}):(u=r.onError)==null||u.call(r,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class o3{constructor(e){this._source=e,this._manager=new i3(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a3(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new l3(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class a3{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=o=>t.getResponseHeader(o),{allowRangeRequests:s,suggestedLength:i}=vS({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=yS(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=a_(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class l3{constructor(e,t,r){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=a_(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const YL=/^file:\/\/\/[a-zA-Z]:\//;function c3(n){const e=zs.get("url"),t=e.parse(n);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(n)?e.parse(`file:///${n}`):(t.host||(t.protocol="file:"),t)}class u3{constructor(e){this.source=e,this.url=c3(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new f3(this):new h3(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new p3(this,e,t):new d3(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class QL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new tc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class JL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function jv(n,e){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:e}}class h3 extends QL{constructor(e){super(e);const t=r=>{if(r.statusCode===404){const a=new ec(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(r);const s=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:i,suggestedLength:o}=vS({getResponseHeader:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=o||this._contentLength,this._filename=yS(s)};if(this._request=null,this._url.protocol==="http:"){const r=zs.get("http");this._request=r.request(jv(this._url,e.httpHeaders),t)}else{const r=zs.get("https");this._request=r.request(jv(this._url,e.httpHeaders),t)}this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class d3 extends JL{constructor(e,t,r){super(e),this._httpHeaders={};for(const i in e.httpHeaders){const o=e.httpHeaders[i];o!==void 0&&(this._httpHeaders[i]=o)}this._httpHeaders.Range=`bytes=${t}-${r-1}`;const s=i=>{if(i.statusCode===404){const o=new ec(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(i)};if(this._request=null,this._url.protocol==="http:"){const i=zs.get("http");this._request=i.request(jv(this._url,this._httpHeaders),s)}else{const i=zs.get("https");this._request=i.request(jv(this._url,this._httpHeaders),s)}this._request.on("error",i=>{this._storedError=i}),this._request.end()}}class f3 extends QL{constructor(e){super(e);let t=decodeURIComponent(this._url.path);YL.test(this._url.href)&&(t=t.replace(/^\//,""));const r=zs.get("fs");r.promises.lstat(t).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(t)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new ec(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class p3 extends JL{constructor(e,t,r){super(e);let s=decodeURIComponent(this._url.path);YL.test(this._url.href)&&(s=s.replace(/^\//,""));const i=zs.get("fs");this._setReadableStream(i.createReadStream(s,{start:t,end:r-1}))}}const m3=1e5,Fn=30,g3=.8;var wR,_o,jn,Zf,ep,tl,vi,tp,np,nl,vu,yu,wo,_u,rp,wu,rl,sp,ip,Mt,sl,il,Eo,Eu,Xi,ZL,eM,LE,Bs,Ng,tM,nM;let Bv=(Mt=class{constructor({textContentSource:e,container:t,viewport:r}){I(this,Xi);I(this,_o,Promise.withResolvers());I(this,jn,null);I(this,Zf,!1);I(this,ep,!!((wR=globalThis.FontInspector)!=null&&wR.enabled));I(this,tl,null);I(this,vi,null);I(this,tp,0);I(this,np,0);I(this,nl,null);I(this,vu,null);I(this,yu,0);I(this,wo,0);I(this,_u,Object.create(null));I(this,rp,[]);I(this,wu,null);I(this,rl,[]);I(this,sp,new WeakMap);I(this,ip,null);var l;if(e instanceof ReadableStream)x(this,wu,e);else if(typeof e=="object")x(this,wu,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,jn,x(this,vu,t)),x(this,wo,r.scale*(globalThis.devicePixelRatio||1)),x(this,yu,r.rotation),x(this,vi,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:a}=r.rawDims;x(this,ip,[1,0,0,-1,-o,a+i]),x(this,np,s),x(this,tp,i),P(l=Mt,Bs,tM).call(l),Hl(t,r),h(this,_o).promise.catch(()=>{}).then(()=>{h(Mt,Eu).delete(this),x(this,vi,null),x(this,_u,null)})}render(){const e=()=>{h(this,nl).read().then(({value:t,done:r})=>{if(r){h(this,_o).resolve();return}h(this,tl)??x(this,tl,t.lang),Object.assign(h(this,_u),t.styles),P(this,Xi,ZL).call(this,t.items),e()},h(this,_o).reject)};return x(this,nl,h(this,wu).getReader()),h(Mt,Eu).add(this),e(),h(this,_o).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==h(this,yu)&&(t==null||t(),x(this,yu,s),Hl(h(this,vu),{rotation:s})),r!==h(this,wo)){t==null||t(),x(this,wo,r);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:P(i=Mt,Bs,Ng).call(i,h(this,tl))};for(const a of h(this,rl))o.properties=h(this,sp).get(a),o.div=a,P(this,Xi,LE).call(this,o)}}cancel(){var t;const e=new tc("TextLayer task cancelled.");(t=h(this,nl))==null||t.cancel(e).catch(()=>{}),x(this,nl,null),h(this,_o).reject(e)}get textDivs(){return h(this,rl)}get textContentItemsStr(){return h(this,rp)}static cleanup(){if(!(h(this,Eu).size>0)){h(this,sl).clear();for(const{canvas:e}of h(this,il).values())e.remove();h(this,il).clear()}}},_o=new WeakMap,jn=new WeakMap,Zf=new WeakMap,ep=new WeakMap,tl=new WeakMap,vi=new WeakMap,tp=new WeakMap,np=new WeakMap,nl=new WeakMap,vu=new WeakMap,yu=new WeakMap,wo=new WeakMap,_u=new WeakMap,rp=new WeakMap,wu=new WeakMap,rl=new WeakMap,sp=new WeakMap,ip=new WeakMap,sl=new WeakMap,il=new WeakMap,Eo=new WeakMap,Eu=new WeakMap,Xi=new WeakSet,ZL=function(e){var s,i;if(h(this,Zf))return;(i=h(this,vi)).ctx??(i.ctx=P(s=Mt,Bs,Ng).call(s,h(this,tl)));const t=h(this,rl),r=h(this,rp);for(const o of e){if(t.length>m3){ye("Ignoring additional textDivs for performance reasons."),x(this,Zf,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=h(this,jn);x(this,jn,document.createElement("span")),h(this,jn).classList.add("markedContent"),o.id!==null&&h(this,jn).setAttribute("id",`${o.id}`),a.append(h(this,jn))}else o.type==="endMarkedContent"&&x(this,jn,h(this,jn).parentNode);continue}r.push(o.str),P(this,Xi,eM).call(this,o)}},eM=function(e){var _;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};h(this,rl).push(t);const s=ie.transform(h(this,ip),e.transform);let i=Math.atan2(s[1],s[0]);const o=h(this,_u)[e.fontName];o.vertical&&(i+=Math.PI/2);const a=h(this,ep)&&o.fontSubstitution||o.fontFamily,l=Math.hypot(s[2],s[3]),c=l*P(_=Mt,Bs,nM).call(_,a,h(this,tl));let u,f;i===0?(u=s[4],f=s[5]-c):(u=s[4]+c*Math.sin(i),f=s[5]-c*Math.cos(i));const p="calc(var(--scale-factor)*",m=t.style;h(this,jn)===h(this,vu)?(m.left=`${(100*u/h(this,np)).toFixed(2)}%`,m.top=`${(100*f/h(this,tp)).toFixed(2)}%`):(m.left=`${p}${u.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(h(Mt,Eo)*l).toFixed(2)}px)`,m.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,h(this,ep)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);w!==y&&Math.max(w,y)/Math.min(w,y)>1.5&&(g=!0)}if(g&&(r.canvasWidth=o.vertical?e.height:e.width),h(this,sp).set(t,r),h(this,vi).div=t,h(this,vi).properties=r,P(this,Xi,LE).call(this,h(this,vi)),r.hasText&&h(this,jn).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),h(this,jn).append(w)}},LE=function(e){const{div:t,properties:r,ctx:s,prevFontSize:i,prevFontFamily:o}=e,{style:a}=t;let l="";if(h(Mt,Eo)>1&&(l=`scale(${1/h(Mt,Eo)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=a,{canvasWidth:u,fontSize:f}=r;(i!==f||o!==c)&&(s.font=`${f*h(this,wo)}px ${c}`,e.prevFontSize=f,e.prevFontFamily=c);const{width:p}=s.measureText(t.textContent);p>0&&(l=`scaleX(${u*h(this,wo)/p}) ${l}`)}r.angle!==0&&(l=`rotate(${r.angle}deg) ${l}`),l.length>0&&(a.transform=l)},Bs=new WeakSet,Ng=function(e=null){let t=h(this,il).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,il).set(e,t)}return t},tM=function(){if(h(this,Eo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),x(this,Eo,e.getBoundingClientRect().height),e.remove()},nM=function(e,t){const r=h(this,sl).get(e);if(r)return r;const s=P(this,Bs,Ng).call(this,t),i=s.font;s.canvas.width=s.canvas.height=Fn,s.font=`${Fn}px ${e}`;const o=s.measureText("");let a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(a){const f=a/(a+l);return h(this,sl).set(e,f),s.canvas.width=s.canvas.height=0,s.font=i,f}s.strokeStyle="red",s.clearRect(0,0,Fn,Fn),s.strokeText("g",0,0);let c=s.getImageData(0,0,Fn,Fn).data;l=0;for(let f=c.length-1-3;f>=0;f-=4)if(c[f]>0){l=Math.ceil(f/4/Fn);break}s.clearRect(0,0,Fn,Fn),s.strokeText("A",0,Fn),c=s.getImageData(0,0,Fn,Fn).data,a=0;for(let f=0,p=c.length;f<p;f+=4)if(c[f]>0){a=Fn-Math.floor(f/4/Fn);break}s.canvas.width=s.canvas.height=0,s.font=i;const u=a?a/(a+l):g3;return h(this,sl).set(e,u),u},I(Mt,Bs),I(Mt,sl,new Map),I(Mt,il,new Map),I(Mt,Eo,null),I(Mt,Eu,new Set),Mt);function v3(){pL("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:n,container:e,viewport:t,...r}=arguments[0],s=Object.keys(r);s.length>0&&ye("Ignoring `renderTextLayer` parameters: "+s.join(", "));const i=new Bv({textContentSource:n,container:e,viewport:t}),{textDivs:o,textContentItemsStr:a}=i;return{promise:i.render(),textDivs:o,textContentItemsStr:a}}function y3(){pL("`updateTextLayer`, please use `TextLayer` instead.")}class lf{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(lf.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const c of i.children)s(c)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const _3=65536,w3=100,E3=5e3,A3=An?M$:w$,b3=An?N$:dL,S3=An?L$:_$,T3=An?D$:fL;function C3(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new ME,{docId:t}=e,r=n.url?x3(n.url):null,s=n.data?R3(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof rM?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:_3;let u=n.worker instanceof Kc?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!fS(n.docBaseUrl)?n.docBaseUrl:null,m=typeof n.cMapUrl=="string"?n.cMapUrl:null,g=n.cMapPacked!==!1,_=n.CMapReaderFactory||b3,w=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||T3,E=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,R=n.isEvalSupported!==!1,O=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!An,V=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,C=typeof n.disableFontFace=="boolean"?n.disableFontFace:An,T=n.fontExtraProperties===!0,k=n.enableXfa===!0,M=n.ownerDocument||globalThis.document,F=n.disableRange===!0,j=n.disableStream===!0,D=n.disableAutoFetch===!0,q=n.pdfBug===!0,re=n.enableHWA===!0,Z=l?l.length:n.length??NaN,W=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!An&&!C,U=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:_===dL&&y===fL&&m&&w&&ad(m,document.baseURI)&&ad(w,document.baseURI),z=n.canvasFactory||new A3({ownerDocument:M,enableHWA:re}),X=n.filterFactory||new S3({docId:t,ownerDocument:M}),ce=null;l$(f);const se={canvasFactory:z,filterFactory:X};if(U||(se.cMapReaderFactory=new _({baseUrl:m,isCompressed:g}),se.standardFontDataFactory=new y({baseUrl:w})),!u){const Ue={verbosity:f,port:Fi.workerPort};u=Ue.port?Kc.fromPort(Ue):new Kc(Ue),e._worker=u}const ae={docId:t,apiVersion:"4.4.168",data:s,password:a,disableAutoFetch:D,rangeChunkSize:c,length:Z,docBaseUrl:p,enableXfa:k,evaluatorOptions:{maxImageSize:S,disableFontFace:C,ignoreErrors:E,isEvalSupported:R,isOffscreenCanvasSupported:O,canvasMaxAreaInBytes:V,fontExtraProperties:T,useSystemFonts:W,cMapUrl:U?m:null,standardFontDataUrl:U?w:null}},Be={disableFontFace:C,fontExtraProperties:T,ownerDocument:M,pdfBug:q,styleElement:ce,loadingParams:{disableAutoFetch:D,enableXfa:k}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ue=u.messageHandler.sendWithPromise("GetDocRequest",ae,s?[s.buffer]:null);let Pe;if(l)Pe=new J$(l,{disableRange:F,disableStream:j});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");Pe=(ut=>An?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&ad(ut.url)?new q1(ut):new u3(ut):ad(ut.url)?new q1(ut):new o3(ut))({url:r,length:Z,httpHeaders:i,withCredentials:o,rangeChunkSize:c,disableRange:F,disableStream:j})}return Ue.then(fe=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ut=new ud(t,fe,u.port),Je=new L3(ut,e,Pe,Be,se);e._transport=Je,ut.send("Ready",null)})}).catch(e._capability.reject),e}function x3(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(An&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function R3(n){if(An&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return n_(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function K1(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var py;const my=class my{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${tr(my,py)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};py=new WeakMap,I(my,py,0);let ME=my,rM=class{constructor(e,t,r=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class P3{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ke(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ao,yi,kr,wc,Dg;class I3{constructor(e,t,r,s=!1){I(this,kr);I(this,Ao,null);I(this,yi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new N1:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new sM,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new nm({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ke(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:s=ho.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null}){var S,R;(S=this._stats)==null||S.time("Overall");const f=this._transport.getRenderingIntent(r,s,u),{renderingIntent:p,cacheKey:m}=f;x(this,yi,!1),P(this,kr,Dg).call(this),a||(a=this._transport.getOptionalContentConfig(p));let g=this._intentStates.get(m);g||(g=Object.create(null),this._intentStates.set(m,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const _=!!(p&Rr.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(f));const w=O=>{var V;g.renderTasks.delete(y),(this._maybeCleanupAfterRender||_)&&x(this,yi,!0),P(this,kr,wc).call(this,!_),O?(y.capability.reject(O),this._abortOperatorList({intentState:g,reason:O instanceof Error?O:new Error(O)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new DE({callback:w,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||(g.renderTasks=new Set)).add(y);const E=y.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([O,V])=>{var C;if(this.destroyed){w();return}if((C=this._stats)==null||C.time("Rendering"),!(V.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:O,optionalContentConfig:V}),y.operatorListChanged()}).catch(w),E}getOperatorList({intent:e="display",annotationMode:t=ho.ENABLE,printAnnotationStorage:r=null}={}){var l;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))}const i=this._transport.getRenderingIntent(e,t,r,!0);let o=this._intentStates.get(i.cacheKey);o||(o=Object.create(null),this._intentStates.set(i.cacheKey,o));let a;return o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(i)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>lf.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),x(this,yi,!1),P(this,kr,Dg).call(this),Promise.all(e)}cleanup(e=!1){x(this,yi,!0);const t=P(this,kr,wc).call(this,!1);return e&&t&&this._stats&&(this._stats=new N1),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&P(this,kr,wc).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r}){const{map:s,transfer:i}=r,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},i).getReader(),l=this._intentStates.get(t);l.streamReader=a;const c=()=>{a.read().then(({value:u,done:f})=>{if(f){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,l),c())},u=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const f of l.renderTasks)f.operatorListChanged();P(this,kr,wc).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(u);else if(l.opListReadCapability)l.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof dS){let s=w3;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new tc(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Ao=new WeakMap,yi=new WeakMap,kr=new WeakSet,wc=function(e=!1){if(P(this,kr,Dg).call(this),!h(this,yi)||this.destroyed)return!1;if(e)return x(this,Ao,setTimeout(()=>{x(this,Ao,null),P(this,kr,wc).call(this,!1)},E3)),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,yi,!1),!0},Dg=function(){h(this,Ao)&&(clearTimeout(h(this,Ao)),x(this,Ao,null))};var ol,gy;class k3{constructor(){I(this,ol,new Set);I(this,gy,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};h(this,gy).then(()=>{for(const s of h(this,ol))s.call(this,r)})}addEventListener(e,t){h(this,ol).add(t)}removeEventListener(e,t){h(this,ol).delete(t)}terminate(){h(this,ol).clear()}}ol=new WeakMap,gy=new WeakMap;const li={isWorkerDisabled:!1,fakeWorkerId:0};An&&(li.isWorkerDisabled=!0,Fi.workerSrc||(Fi.workerSrc="./pdf.worker.mjs")),li.isSameOrigin=function(n,e){let t;try{if(t=new URL(n),!t.origin||t.origin==="null")return!1}catch{return!1}const r=new URL(e,t);return t.origin===r.origin},li.createCDNWrapper=function(n){const e=`await import("${n}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var al,Au,Og,bu,Fg;const rr=class rr{constructor({name:e=null,port:t=null,verbosity:r=c$()}={}){I(this,Au);var s;if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=h(rr,al))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(h(rr,al)||x(rr,al,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return An?Promise.all([zs.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ud("main","worker",e),this._messageHandler.on("ready",function(){}),P(this,Au,Og).call(this)}_initialize(){if(li.isWorkerDisabled||h(rr,bu,Fg)){this._setupFakeWorker();return}let{workerSrc:e}=rr;try{li.isSameOrigin(window.location.href,e)||(e=li.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new ud("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:i.signal}),r.on("test",a=>{if(i.abort(),this.destroyed||!a){s();return}this._messageHandler=r,this._port=t,this._webWorker=t,P(this,Au,Og).call(this)}),r.on("ready",a=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{e_("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){li.isWorkerDisabled||(ye("Setting up fake worker."),li.isWorkerDisabled=!0),rr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new k3;this._port=t;const r=`fake${li.fakeWorkerId++}`,s=new ud(r+"_worker",r,t);e.setup(s,t),this._messageHandler=new ud(r,r+"_worker",t),P(this,Au,Og).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=h(rr,al))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var r;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(r=h(this,al))==null?void 0:r.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new rr(e)}static get workerSrc(){if(Fi.workerSrc)return Fi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ke(this,"_setupFakeWorkerGlobal",(async()=>h(this,bu,Fg)?h(this,bu,Fg):(await import(this.workerSrc)).WorkerMessageHandler)())}};al=new WeakMap,Au=new WeakSet,Og=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},bu=new WeakSet,Fg=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},I(rr,bu),I(rr,al);let Kc=rr;var _i,As,Su,Tu,bs,ll,hd;class L3{constructor(e,t,r,s,i){I(this,ll);I(this,_i,new Map);I(this,As,new Map);I(this,Su,new Map);I(this,Tu,new Map);I(this,bs,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new sM,this.fontLoader=new I$({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ke(this,"annotationStorage",new gS)}getRenderingIntent(e,t=ho.ENABLE,r=null,s=!1){let i=Rr.DISPLAY,o=TE;switch(e){case"any":i=Rr.ANY;break;case"display":break;case"print":i=Rr.PRINT;break;default:ye(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case ho.DISABLE:i+=Rr.ANNOTATIONS_DISABLE;break;case ho.ENABLE:break;case ho.ENABLE_FORMS:i+=Rr.ANNOTATIONS_FORMS;break;case ho.ENABLE_STORAGE:i+=Rr.ANNOTATIONS_STORAGE,o=(i&Rr.PRINT&&r instanceof $L?r:this.annotationStorage).serializable;break;default:ye(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(i+=Rr.OPLIST),{renderingIntent:i,cacheKey:`${i}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=h(this,bs))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of h(this,As).values())e.push(s._destroy());h(this,As).clear(),h(this,Su).clear(),h(this,Tu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),h(this,_i).clear(),this.filterFactory.destroy(),Bv.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new tc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}Dt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",r=>{const s=Promise.withResolvers(),i=this._fullReader;return i.headersReady.then(()=>{var o;(!i.isStreamingSupported||!i.isRangeSupported)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),i.onProgress=a=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:a.loaded,total:a.total})}),s.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(r,s)=>{Dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){s.close();return}Dt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new P3(r,this))}),e.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new nE(r.message,r.code);break;case"InvalidPDFException":s=new lL(r.message);break;case"MissingPDFException":s=new ec(r.message);break;case"UnexpectedResponseException":s=new t_(r.message,r.status);break;case"UnknownErrorException":s=new rE(r.message,r.details);break;default:ze("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",r=>{if(x(this,bs,Promise.withResolvers()),t.onPassword){const s=i=>{i instanceof Error?h(this,bs).reject(i):h(this,bs).resolve({password:i})};try{t.onPassword(s,r.code)}catch(i){h(this,bs).reject(i)}}else h(this,bs).reject(new nE(r.message,r.code));return h(this,bs).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;h(this,As).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in i){const m=i.error;ye(`Error during font loading: ${m}`),this.commonObjs.resolve(r,m);break}const u=c&&((o=globalThis.FontInspector)!=null&&o.enabled)?(m,g)=>globalThis.FontInspector.fontAdded(m,g):null,f=new k$(i,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:p}=i;Dt(p,"The imageRef must be defined.");for(const m of h(this,As).values())for(const[,g]of m.objs)if((g==null?void 0:g.ref)===p)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,o])=>{var l;if(this.destroyed)return;const a=h(this,As).get(s);if(!a.objs.has(r)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":a.objs.resolve(r,o),(o==null?void 0:o.dataLen)>s$&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&ye("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=h(this,Su).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&h(this,Tu).set(i.refStr,e);const o=new I3(t,i,this,this._params.pdfBug);return h(this,As).set(t,o),o});return h(this,Su).set(t,s),s}getPageIndex(e){return K1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return P(this,ll,hd).call(this,"GetFieldObjects")}hasJSActions(){return P(this,ll,hd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return P(this,ll,hd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,ll,hd).call(this,"GetOptionalContentConfig").then(t=>new Q$(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=h(this,_i).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new X$(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return h(this,_i).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of h(this,As).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),h(this,_i).clear(),this.filterFactory.destroy(!0),Bv.cleanup()}}cachedPageNumber(e){if(!K1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return h(this,Tu).get(t)??null}}_i=new WeakMap,As=new WeakMap,Su=new WeakMap,Tu=new WeakMap,bs=new WeakMap,ll=new WeakSet,hd=function(e,t=null){const r=h(this,_i).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return h(this,_i).set(e,s),s};const eg=Symbol("INITIAL_DATA");var Xr,op,NE;class sM{constructor(){I(this,op);I(this,Xr,Object.create(null))}get(e,t=null){if(t){const s=P(this,op,NE).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=h(this,Xr)[e];if(!r||r.data===eg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=h(this,Xr)[e];return!!t&&t.data!==eg}resolve(e,t=null){const r=P(this,op,NE).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in h(this,Xr)){const{data:r}=h(this,Xr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}x(this,Xr,Object.create(null))}*[Symbol.iterator](){for(const e in h(this,Xr)){const{data:t}=h(this,Xr)[e];t!==eg&&(yield[e,t])}}}Xr=new WeakMap,op=new WeakSet,NE=function(e){var t;return(t=h(this,Xr))[e]||(t[e]={...Promise.withResolvers(),data:eg})};var bo;class M3{constructor(e){I(this,bo,null);x(this,bo,e),this.onContinue=null}get promise(){return h(this,bo).capability.promise}cancel(e=0){h(this,bo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=h(this,bo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=h(this,bo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}bo=new WeakMap;var So,cl;const ka=class ka{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){I(this,So,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new M3(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(h(ka,cl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(ka,cl).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:o}=this.params;this.gfx=new qc(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),h(this,So)&&(window.cancelAnimationFrame(h(this,So)),x(this,So,null)),h(ka,cl).delete(this._canvas),this.callback(e||new dS(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,So,window.requestAnimationFrame(()=>{x(this,So,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(ka,cl).delete(this._canvas),this.callback())))}};So=new WeakMap,cl=new WeakMap,I(ka,cl,new WeakSet);let DE=ka;const N3="4.4.168",D3="19fbc8998";function X1(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Zh(n){return Math.max(0,Math.min(255,255*n))}class Y1{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Zh(e),[e,e,e]}static G_HTML([e]){const t=X1(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Zh)}static RGB_HTML(e){return`#${e.map(X1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[Zh(1-Math.min(1,e+s)),Zh(1-Math.min(1,r+s)),Zh(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,o=1-r,a=Math.min(s,i,o);return["CMYK",s,i,o,a]}}class iM{static setupStorage(e,t,r,s,i){const o=s.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var f,p;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:r});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);o.append(m),a&&lf.shouldBuildText(s.name)&&c.push(m)}return{textDivs:c}}const u=[[s,-1,o]];for(;u.length>0;){const[m,g,_]=u.at(-1);if(g+1===m.children.length){u.pop();continue}const w=m.children[++u.at(-1)[1]];if(w===null)continue;const{name:y}=w;if(y==="#text"){const S=document.createTextNode(w.value);c.push(S),_.append(S);continue}const E=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,y):document.createElement(y);if(_.append(E),w.attributes&&this.setAttributes({html:E,element:w,storage:t,intent:i,linkService:r}),((p=w.children)==null?void 0:p.length)>0)u.push([w,-1,E]);else if(w.value){const S=document.createTextNode(w.value);a&&lf.shouldBuildText(y)&&c.push(S),E.append(S)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const im=1e3,O3=9,Gl=new WeakSet;function Vi(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class F3{static create(e){switch(e.data.annotationType){case Rt.LINK:return new oM(e);case Rt.TEXT:return new V3(e);case Rt.WIDGET:switch(e.data.fieldType){case"Tx":return new j3(e);case"Btn":return e.data.radioButton?new cM(e):e.data.checkBox?new U3(e):new $3(e);case"Ch":return new z3(e);case"Sig":return new B3(e)}return new nc(e);case Rt.POPUP:return new FE(e);case Rt.FREETEXT:return new pM(e);case Rt.LINE:return new W3(e);case Rt.SQUARE:return new G3(e);case Rt.CIRCLE:return new q3(e);case Rt.POLYLINE:return new mM(e);case Rt.CARET:return new X3(e);case Rt.INK:return new gM(e);case Rt.POLYGON:return new K3(e);case Rt.HIGHLIGHT:return new Y3(e);case Rt.UNDERLINE:return new Q3(e);case Rt.SQUIGGLY:return new J3(e);case Rt.STRIKEOUT:return new Z3(e);case Rt.STAMP:return new vM(e);case Rt.FILEATTACHMENT:return new ez(e);default:return new Et(e)}}}var ul,Cu,xu,ap,OE;const ZS=class ZS{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){I(this,ap);I(this,ul,null);I(this,Cu,!1);I(this,xu,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e!=null&&e.str||t!=null&&t.str||r!=null&&r.str)}get hasPopupData(){return ZS._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;h(this,ul)||x(this,ul,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&P(this,ap,OE).call(this,t),(r=h(this,xu))==null||r.popup.updateEdited(e)}resetEdited(){var e;h(this,ul)&&(P(this,ap,OE).call(this,h(this,ul).rect),(e=h(this,xu))==null||e.popup.resetEdited(),x(this,ul,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof nc||(i.tabIndex=im);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.popupRef&&i.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof FE){const{rotation:_}=t;return!t.hasOwnCanvas&&_!==0&&this.setRotation(_,i),i}const{width:a,height:l}=Vi(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const _=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(_>0||w>0){const E=`calc(${_}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;o.borderRadius=E}else if(this instanceof cM){const E=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=E}switch(t.borderStyle.style){case Qh.SOLID:o.borderStyle="solid";break;case Qh.DASHED:o.borderStyle="dashed";break;case Qh.BEVELED:ye("Unimplemented border style: beveled");break;case Qh.INSET:ye("Unimplemented border style: inset");break;case Qh.UNDERLINE:o.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(x(this,Cu,!0),o.borderColor=ie.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const c=ie.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:m}=s.rawDims;o.left=`${100*(c[0]-p)/u}%`,o.top=`${100*(c[1]-m)/f}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(o.width=`${100*a/u}%`,o.height=`${100*l/f}%`):this.setRotation(g,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:o}=Vi(this.data.rect);let a,l;e%180===0?(a=100*i/r,l=100*o/s):(a=100*o/r,l=100*i/s),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],o=i[0],a=i.slice(1);s.target.style[r]=Y1[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:Y1[`${o}_rgb`](a)})};return ke(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const o=r[s];if(o){const a={detail:{[s]:i},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(_=>Math.fround(_));if(e.length===8){const[_,w,y,E]=e.subarray(2,6);if(s===_&&i===w&&t===y&&r===E)return}const{style:o}=this.container;let a;if(h(this,Cu)){const{borderColor:_,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=s-t,c=i-r,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const m=u.createElement("clipPath"),g=`clippath_${this.data.id}`;m.setAttribute("id",g),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let _=2,w=e.length;_<w;_+=8){const y=e[_],E=e[_+1],S=e[_+2],R=e[_+3],O=u.createElement("rect"),V=(S-t)/l,C=(i-E)/c,T=(y-S)/l,k=(E-R)/c;O.setAttribute("x",V),O.setAttribute("y",C),O.setAttribute("width",T),O.setAttribute("height",k),m.append(O),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${V}" y="${C}" width="${T}" height="${k}"/>`)}h(this,Cu)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const r=x(this,xu,new FE({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(r.render())}render(){ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:o,exportValues:a}of s){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Gl.has(c)){ye(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==t&&Gl.has(s)&&r.push({id:o,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ul=new WeakMap,Cu=new WeakMap,xu=new WeakMap,ap=new WeakSet,OE=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;r==null||r.splice(0,4,...e);const{width:c,height:u}=Vi(e);t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,s===0?(t.width=`${100*c/i}%`,t.height=`${100*u/o}%`):this.setRotation(s)};let Et=ZS;var mr,Ca,aM,lM;class oM extends Et{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});I(this,mr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(P(this,mr,aM).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(P(this,mr,lM).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&P(this,mr,Ca).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),P(this,mr,Ca).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const o=s.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),P(this,mr,Ca).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),P(this,mr,Ca).call(this),!this._fieldObjects){ye('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var f;s==null||s();const{fields:i,refs:o,include:a}=r,l=[];if(i.length!==0||o.length!==0){const p=new Set(o);for(const m of i){const g=this._fieldObjects[m]||[];for(const{id:_}of g)p.add(_)}for(const m of Object.values(this._fieldObjects))for(const g of m)p.has(g.id)===a&&l.push(g)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const c=this.annotationStorage,u=[];for(const p of l){const{id:m}=p;switch(u.push(m),p.type){case"text":{const _=p.defaultValue||"";c.setValue(m,{value:_});break}case"checkbox":case"radiobutton":{const _=p.defaultValue===p.exportValues;c.setValue(m,{value:_});break}case"combobox":case"listbox":{const _=p.defaultValue||"";c.setValue(m,{value:_});break}default:continue}const g=document.querySelector(`[data-element-id="${m}"]`);if(g){if(!Gl.has(g)){ye(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}mr=new WeakSet,Ca=function(){this.container.setAttribute("data-internal-link","")},aM=function(t,r,s=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(r.content,r.filename,s),!1},P(this,mr,Ca).call(this)},lM=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),P(this,mr,Ca).call(this)};class V3 extends Et{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class nc extends Et{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Hn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(e,t,r,s){var i,o,a;for(const[l,c]of r)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,s),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ie.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||O3,i=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(P0*s))||1,f=c/u;o=Math.min(s,l(f/P0))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(c/P0))}i.fontSize=`calc(${o}px * var(--scale-factor))`,i.color=ie.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class j3 extends nc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",c??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Gl.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=im,this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(r,"value",p.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue??"";r.value=u.userValue=m,u.formattedValue=null});let f=p=>{const{formattedValue:m}=u;m!=null&&(p.target.value=m),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",m=>{var _;if(u.focused)return;const{target:g}=m;u.userValue&&(g.value=u.userValue),u.lastCommittedValue=g.value,u.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const g={value(_){u.userValue=_.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),_.target.value=u.userValue},formattedValue(_){const{formattedValue:w}=_.detail;u.formattedValue=w,w!=null&&_.target!==document.activeElement&&(_.target.value=w),e.setValue(t,{formattedValue:w})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var S;const{charLimit:w}=_.detail,{target:y}=_;if(w===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",w);let E=u.userValue;!E||E.length<=w||(E=E.slice(0,w),y.value=u.userValue=E,e.setValue(t,{value:E}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(g,m)}),r.addEventListener("keydown",m=>{var w;u.commitKey=1;let g=-1;if(m.key==="Escape"?g=0:m.key==="Enter"&&!this.data.multiLine?g=2:m.key==="Tab"&&(u.commitKey=3),g===-1)return;const{value:_}=m.target;u.lastCommittedValue!==_&&(u.lastCommittedValue=_,u.userValue=_,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:g,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const p=f;f=null,r.addEventListener("blur",m=>{var _,w;if(!u.focused||!m.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(u.focused=!1);const{value:g}=m.target;u.userValue=g,u.lastCommittedValue!==g&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:u.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),p(m)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",m=>{var O;u.lastCommittedValue=null;const{data:g,target:_}=m,{value:w,selectionStart:y,selectionEnd:E}=_;let S=y,R=E;switch(m.inputType){case"deleteWordBackward":{const V=w.substring(0,y).match(/\w*[^\w]*$/);V&&(S-=V[0].length);break}case"deleteWordForward":{const V=w.substring(y).match(/^[^\w]*\w*/);V&&(R+=V[0].length);break}case"deleteContentBackward":y===E&&(S-=1);break;case"deleteContentForward":y===E&&(R+=1);break}m.preventDefault(),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:g||"",willCommit:!1,selStart:S,selEnd:R}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class B3 extends nc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class U3 extends nc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Gl.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=im,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class cM extends nc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Gl.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=im,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const p=u&&f.id===r;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class $3 extends oM{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class z3 extends nc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Gl.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=im;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of s.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,r.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),i=!1),s.append(f)}let o=null;if(i){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:m}=s;return m?Array.prototype.filter.call(p,g=>g.selected).map(g=>g[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=a(!1);const c=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const m=p.detail.value,g=new Set(Array.isArray(m)?m:[m]);for(const _ of s.options)_.selected=g.has(_.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(p){s.multiple=!0},remove(p){const m=s.options,g=p.detail.remove;m[g].selected=!1,s.remove(g),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},clear(p){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(p){const{index:m,displayValue:g,exportValue:_}=p.detail.insert,w=s.children[m],y=document.createElement("option");y.textContent=g,y.value=_,w?w.before(y):s.append(y),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},items(p){const{items:m}=p.detail;for(;s.length!==0;)s.remove(0);for(const g of m){const{displayValue:_,exportValue:w}=g,y=document.createElement("option");y.textContent=_,y.value=w,s.append(y)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},indices(p){const m=new Set(p.detail.indices);for(const g of p.target.options)g.selected=m.has(g.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),s.addEventListener("input",u=>{var m;const f=a(!0),p=a(!1);e.setValue(t,{value:f}),u.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class FE extends Et{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Et._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new H3({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${uL}${r}`).join(",")),this.container}}var Ru,vy,yy,Pu,hl,pt,wi,dl,lp,cp,Iu,Ei,Yr,Ai,up,bi,hp,fl,pl,He,Vg,VE,uM,hM,dM,fM,jg,Bg,jE;class H3{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:f}){I(this,He);I(this,Ru,P(this,He,dM).bind(this));I(this,vy,P(this,He,jE).bind(this));I(this,yy,P(this,He,Bg).bind(this));I(this,Pu,P(this,He,jg).bind(this));I(this,hl,null);I(this,pt,null);I(this,wi,null);I(this,dl,null);I(this,lp,null);I(this,cp,null);I(this,Iu,null);I(this,Ei,!1);I(this,Yr,null);I(this,Ai,null);I(this,up,null);I(this,bi,null);I(this,hp,null);I(this,fl,null);I(this,pl,!1);var p;x(this,pt,e),x(this,hp,s),x(this,wi,o),x(this,bi,a),x(this,cp,l),x(this,hl,t),x(this,up,c),x(this,Iu,u),x(this,lp,r),x(this,dl,mL.toDateObject(i)),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",h(this,Pu)),m.addEventListener("mouseenter",h(this,yy)),m.addEventListener("mouseleave",h(this,vy)),m.classList.add("popupTriggerArea");for(const m of r)(p=m.container)==null||p.addEventListener("keydown",h(this,Ru));h(this,pt).hidden=!0,f&&P(this,He,jg).call(this)}render(){if(h(this,Yr))return;const e=x(this,Yr,document.createElement("div"));if(e.className="popup",h(this,hl)){const i=e.style.outlineColor=ie.makeHexColor(...h(this,hl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=ie.makeHexColor(...h(this,hl).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=h(this,hp),e.append(t),h(this,dl)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),i.setAttribute("data-l10n-args",JSON.stringify({date:h(this,dl).toLocaleDateString(),time:h(this,dl).toLocaleTimeString()})),t.append(i)}const s=h(this,He,Vg);if(s)iM.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(h(this,wi));e.append(i)}h(this,pt).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,o=s.length;i<o;++i){const a=s[i];r.append(document.createTextNode(a)),i<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;h(this,fl)||x(this,fl,{contentsObj:h(this,wi),richText:h(this,bi)}),e&&x(this,Ai,null),t&&(x(this,bi,P(this,He,hM).call(this,t)),x(this,wi,null)),(r=h(this,Yr))==null||r.remove(),x(this,Yr,null)}resetEdited(){var e;h(this,fl)&&({contentsObj:tr(this,wi)._,richText:tr(this,bi)._}=h(this,fl),x(this,fl,null),(e=h(this,Yr))==null||e.remove(),x(this,Yr,null),x(this,Ai,null))}forceHide(){x(this,pl,this.isVisible),h(this,pl)&&(h(this,pt).hidden=!0)}maybeShow(){h(this,pl)&&(h(this,Yr)||P(this,He,Bg).call(this),x(this,pl,!1),h(this,pt).hidden=!1)}get isVisible(){return h(this,pt).hidden===!1}}Ru=new WeakMap,vy=new WeakMap,yy=new WeakMap,Pu=new WeakMap,hl=new WeakMap,pt=new WeakMap,wi=new WeakMap,dl=new WeakMap,lp=new WeakMap,cp=new WeakMap,Iu=new WeakMap,Ei=new WeakMap,Yr=new WeakMap,Ai=new WeakMap,up=new WeakMap,bi=new WeakMap,hp=new WeakMap,fl=new WeakMap,pl=new WeakMap,He=new WeakSet,Vg=function(){const e=h(this,bi),t=h(this,wi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&h(this,bi).html||null},VE=function(){var e,t,r;return((r=(t=(e=h(this,He,Vg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},uM=function(){var e,t,r;return((r=(t=(e=h(this,He,Vg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},hM=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:h(this,He,uM),fontSize:h(this,He,VE)?`calc(${h(this,He,VE)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},dM=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&h(this,Ei))&&P(this,He,jg).call(this)},fM=function(){if(h(this,Ai)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=h(this,cp);let o=!!h(this,Iu),a=o?h(this,Iu):h(this,up);for(const g of h(this,lp))if(!a||ie.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=ie.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,f=l[0]+u,p=l[1];x(this,Ai,[100*(f-s)/t,100*(p-i)/r]);const{style:m}=h(this,pt);m.left=`${h(this,Ai)[0]}%`,m.top=`${h(this,Ai)[1]}%`},jg=function(){x(this,Ei,!h(this,Ei)),h(this,Ei)?(P(this,He,Bg).call(this),h(this,pt).addEventListener("click",h(this,Pu)),h(this,pt).addEventListener("keydown",h(this,Ru))):(P(this,He,jE).call(this),h(this,pt).removeEventListener("click",h(this,Pu)),h(this,pt).removeEventListener("keydown",h(this,Ru)))},Bg=function(){h(this,Yr)||this.render(),this.isVisible?h(this,Ei)&&h(this,pt).classList.add("focused"):(P(this,He,fM).call(this),h(this,pt).hidden=!1,h(this,pt).style.zIndex=parseInt(h(this,pt).style.zIndex)+1e3)},jE=function(){h(this,pt).classList.remove("focused"),!(h(this,Ei)||!this.isVisible)&&(h(this,pt).hidden=!0,h(this,pt).style.zIndex=parseInt(h(this,pt).style.zIndex)-1e3)};class pM extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Te.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var dp;class W3 extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,dp,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:r,height:s}=Vi(t.rect),i=this.svgFactory.create(r,s,!0),o=x(this,dp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}dp=new WeakMap;var fp;class G3 extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,fp,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:r,height:s}=Vi(t.rect),i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=x(this,fp,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}fp=new WeakMap;var pp;class q3 extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,pp,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:r,height:s}=Vi(t.rect),i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=x(this,pp,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",s/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}pp=new WeakMap;var mp;class mM extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,mp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i}}=this;if(!r)return this.container;const{width:o,height:a}=Vi(t),l=this.svgFactory.create(o,a,!0);let c=[];for(let f=0,p=r.length;f<p;f+=2){const m=r[f]-t[0],g=t[3]-r[f+1];c.push(`${m},${g}`)}c=c.join(" ");const u=x(this,mp,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,mp)}addHighlightArea(){this.container.classList.add("highlightArea")}}mp=new WeakMap;class K3 extends mM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X3 extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var gp;class gM extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,gp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Te.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:r,borderStyle:s,popupRef:i}}=this,{width:o,height:a}=Vi(t),l=this.svgFactory.create(o,a,!0);for(const c of r){let u=[];for(let p=0,m=c.length;p<m;p+=2){const g=c[p]-t[0],_=t[3]-c[p+1];u.push(`${g},${_}`)}u=u.join(" ");const f=this.svgFactory.createElement(this.svgElementName);h(this,gp).push(f),f.setAttribute("points",u),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),!i&&this.hasPopupData&&this._createPopup(),l.append(f)}return this.container.append(l),this.container}getElementsToTriggerPopup(){return h(this,gp)}addHighlightArea(){this.container.classList.add("highlightArea")}}gp=new WeakMap;class Y3 extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Q3 extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class J3 extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Z3 extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class vM extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var vp,yp,BE;class ez extends Et{constructor(t){var s;super(t,{isRenderable:!0});I(this,yp);I(this,vp,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",P(this,yp,BE).bind(this)),x(this,vp,s);const{isMac:i}=Hn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&P(this,yp,BE).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return h(this,vp)}addHighlightArea(){this.container.classList.add("highlightArea")}}vp=new WeakMap,yp=new WeakSet,BE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var _p,ml,ku,Xl,yM,UE,ER;let tz=(ER=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:o}){I(this,Xl);I(this,_p,null);I(this,ml,null);I(this,ku,new Map);this.div=e,x(this,_p,t),x(this,ml,r),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){var o;const{annotations:t}=e,r=this.div;Hl(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new hS,annotationStorage:e.annotationStorage||new gS,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Rt.POPUP;if(l){const f=s.get(a.id);if(!f)continue;i.elements=f}else{const{width:f,height:p}=Vi(a.rect);if(f<=0||p<=0)continue}i.data=a;const c=F3.create(i);if(!c.isRenderable)continue;if(!l&&a.popupRef){const f=s.get(a.popupRef);f?f.push(c):s.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),P(this,Xl,yM).call(this,u,a.id),c.annotationEditorType>0&&(h(this,ku).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}P(this,Xl,UE).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Hl(t,{rotation:e.rotation}),P(this,Xl,UE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(h(this,ku).values())}getEditableAnnotation(e){return h(this,ku).get(e)}},_p=new WeakMap,ml=new WeakMap,ku=new WeakMap,Xl=new WeakSet,yM=function(e,t){var s;const r=e.firstChild||e;r.id=`${uL}${t}`,this.div.append(e),(s=h(this,_p))==null||s.moveElementInDOM(this.div,e,r,!1)},UE=function(){if(!h(this,ml))return;const e=this.div;for(const[t,r]of h(this,ml)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(r):i.classList.contains("annotationContent")?i.after(r):i.before(r):s.append(r)}h(this,ml).clear()},ER);const tg=/\r\n?|\n/g;var wp,Ep,Ap,bp,Sp,Qr,ar,Tp,lr,Lu,Ct,_M,wM,EM,Ug,Bi,$g,zg,AM,zE,bM;const Ye=class Ye extends Ve{constructor(t){super({...t,name:"freeTextEditor"});I(this,Ct);I(this,wp,this.editorDivBlur.bind(this));I(this,Ep,this.editorDivFocus.bind(this));I(this,Ap,this.editorDivInput.bind(this));I(this,bp,this.editorDivKeydown.bind(this));I(this,Sp,this.editorDivPaste.bind(this));I(this,Qr);I(this,ar,"");I(this,Tp,`${this.id}-editor`);I(this,lr);I(this,Lu,null);x(this,Qr,t.color||Ye._defaultColor||Ve._defaultLineColor),x(this,lr,t.fontSize||Ye._defaultFontSize)}static get _keyboardManager(){const t=Ye.prototype,r=o=>o.isEmpty(),s=Wl.TRANSLATE_SMALL,i=Wl.TRANSLATE_BIG;return ke(this,"_keyboardManager",new rm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){Ve.initialize(t,r,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case pe.FREETEXT_SIZE:Ye._defaultFontSize=r;break;case pe.FREETEXT_COLOR:Ye._defaultColor=r;break}}updateParams(t,r){switch(t){case pe.FREETEXT_SIZE:P(this,Ct,_M).call(this,r);break;case pe.FREETEXT_COLOR:P(this,Ct,wM).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.FREETEXT_SIZE,Ye._defaultFontSize],[pe.FREETEXT_COLOR,Ye._defaultColor||Ve._defaultLineColor]]}get propertiesToUpdate(){return[[pe.FREETEXT_SIZE,h(this,lr)],[pe.FREETEXT_COLOR,h(this,Qr)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ye._internalPadding*t,-(Ye._internalPadding+h(this,lr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Te.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",h(this,bp),{signal:t}),this.editorDiv.addEventListener("focus",h(this,Ep),{signal:t}),this.editorDiv.addEventListener("blur",h(this,wp),{signal:t}),this.editorDiv.addEventListener("input",h(this,Ap),{signal:t}),this.editorDiv.addEventListener("paste",h(this,Sp),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,Tp)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",h(this,bp)),this.editorDiv.removeEventListener("focus",h(this,Ep)),this.editorDiv.removeEventListener("blur",h(this,wp)),this.editorDiv.removeEventListener("input",h(this,Ap)),this.editorDiv.removeEventListener("paste",h(this,Sp)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=h(this,ar),r=x(this,ar,P(this,Ct,EM).call(this).trimEnd());if(t===r)return;const s=i=>{if(x(this,ar,i),!i){this.remove();return}P(this,Ct,zg).call(this),this._uiManager.rebuild(this),P(this,Ct,Ug).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),P(this,Ct,Ug).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,Tp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Ve._l10nPromise.get("pdfjs-free-text-default-content").then(i=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",i)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${h(this,lr)}px * var(--scale-factor))`,s.color=h(this,Qr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Fv(this,this.div,["dblclick","keydown"]),this.width){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=h(this,Lu);let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,f]=this.pageDimensions,[p,m]=this.pageTranslation;let g,_;switch(this.rotation){case 0:g=t+(a[0]-p)/u,_=r+this.height-(a[1]-m)/f;break;case 90:g=t+(a[0]-p)/u,_=r-(a[1]-m)/f,[l,c]=[c,-l];break;case 180:g=t-this.width+(a[0]-p)/u,_=r-(a[1]-m)/f,[l,c]=[-l,-c];break;case 270:g=t+(a[0]-p-this.height*f)/u,_=r+(a[1]-m-this.width*u)/f,[l,c]=[-c,l];break}this.setAt(g*i,_*o,l,c)}else this.setAt(t*i,r*o,this.width*i,this.height*o);P(this,Ct,zg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var g,_,w;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=P(g=Ye,Bi,zE).call(g,r.getData("text")||"").replaceAll(tg,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],f=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(tg,"")),y!==this.editorDiv){let E=u;for(const S of this.editorDiv.childNodes){if(S===y){E=f;continue}E.push(P(_=Ye,Bi,$g).call(_,S))}}u.push(l.nodeValue.slice(0,c).replaceAll(tg,""))}else if(l===this.editorDiv){let y=u,E=0;for(const S of this.editorDiv.childNodes)E++===c&&(y=f),y.push(P(w=Ye,Bi,$g).call(w,S))}x(this,ar,`${u.join(`
`)}${i}${f.join(`
`)}`),P(this,Ct,zg).call(this);const p=new Range;let m=u.reduce((y,E)=>y+E.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const E=y.nodeValue.length;if(m<=E){p.setStart(y,m),p.setEnd(y,m);break}m-=E}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static deserialize(t,r,s){var a;let i=null;if(t instanceof pM){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:f,id:p},textContent:m,textPosition:g,parent:{page:{pageNumber:_}}}=t;if(!m||m.length===0)return null;i=t={annotationType:Te.FREETEXT,color:Array.from(c),fontSize:l,value:m.join(`
`),position:g,pageIndex:_-1,rect:u.slice(0),rotation:f,id:p,deleted:!1}}const o=super.deserialize(t,r,s);return x(o,lr,t.fontSize),x(o,Qr,ie.makeHexColor(...t.color)),x(o,ar,P(a=Ye,Bi,zE).call(a,t.value)),o.annotationElementId=t.id||null,x(o,Lu,i),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const r=Ye._internalPadding*this.parentScale,s=this.getRect(r,r),i=Ve._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,Qr)),o={annotationType:Te.FREETEXT,color:i,fontSize:h(this,lr),value:P(this,Ct,AM).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!P(this,Ct,bM).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:s}=r;s.fontSize=`calc(${h(this,lr)}px * var(--scale-factor))`,s.color=h(this,Qr),r.replaceChildren();for(const o of h(this,ar).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),r.append(a)}const i=Ye._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:h(this,ar)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};wp=new WeakMap,Ep=new WeakMap,Ap=new WeakMap,bp=new WeakMap,Sp=new WeakMap,Qr=new WeakMap,ar=new WeakMap,Tp=new WeakMap,lr=new WeakMap,Lu=new WeakMap,Ct=new WeakSet,_M=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-h(this,lr))*this.parentScale),x(this,lr,i),P(this,Ct,Ug).call(this)},s=h(this,lr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},wM=function(t){const r=i=>{x(this,Qr,this.editorDiv.style.color=i)},s=h(this,Qr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},EM=function(){var r;const t=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)t.push(P(r=Ye,Bi,$g).call(r,s));return t.join(`
`)},Ug=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Bi=new WeakSet,$g=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(tg,"")},zg=function(){if(this.editorDiv.replaceChildren(),!!h(this,ar))for(const t of h(this,ar).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},AM=function(){return h(this,ar).replaceAll(""," ")},zE=function(t){return t.replaceAll(" ","")},bM=function(t){const{value:r,fontSize:s,color:i,pageIndex:o}=h(this,Lu);return this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},I(Ye,Bi),ge(Ye,"_freeTextDefaultContent",""),ge(Ye,"_internalPadding",0),ge(Ye,"_defaultColor",null),ge(Ye,"_defaultFontSize",10),ge(Ye,"_type","freetext"),ge(Ye,"_editorType",Te.FREETEXT);let $E=Ye;var Cp,To,Jr,Nn,SM,Hg,TM,CM,WE;class HE{constructor(e,t=0,r=0,s=!0){I(this,Nn);I(this,Cp);I(this,To,[]);I(this,Jr,[]);let i=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:y,y:E,width:S,height:R}of e){const O=Math.floor((y-t)/u)*u,V=Math.ceil((y+S+t)/u)*u,C=Math.floor((E-t)/u)*u,T=Math.ceil((E+R+t)/u)*u,k=[O,C,T,!0],M=[V,C,T,!1];h(this,To).push(k,M),i=Math.min(i,O),o=Math.max(o,V),a=Math.min(a,C),l=Math.max(l,T)}const f=o-i+2*r,p=l-a+2*r,m=i-r,g=a-r,_=h(this,To).at(s?-1:-2),w=[_[0],_[2]];for(const y of h(this,To)){const[E,S,R]=y;y[0]=(E-m)/f,y[1]=(S-g)/p,y[2]=(R-g)/p}x(this,Cp,{x:m,y:g,width:f,height:p,lastPoint:w})}getOutlines(){h(this,To).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of h(this,To))t[3]?(e.push(...P(this,Nn,WE).call(this,t)),P(this,Nn,TM).call(this,t)):(P(this,Nn,CM).call(this,t),e.push(...P(this,Nn,WE).call(this,t)));return P(this,Nn,SM).call(this,e)}}Cp=new WeakMap,To=new WeakMap,Jr=new WeakMap,Nn=new WeakSet,SM=function(e){const t=[],r=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const s=[];let i;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,u,f]=o;r.delete(o);let p=a,m=l;for(i=[a,c],s.push(i);;){let g;if(r.has(u))g=u;else if(r.has(f))g=f;else break;r.delete(g),[a,l,c,u,f]=g,p!==a&&(i.push(p,m,a,m===l?l:c),p=a),m=m===l?c:l}i.push(p,m)}return new nz(s,h(this,Cp))},Hg=function(e){const t=h(this,Jr);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,o=t[i][0];if(o===e)return i;o<e?r=i+1:s=i-1}return s+1},TM=function([,e,t]){const r=P(this,Nn,Hg).call(this,e);h(this,Jr).splice(r,0,[e,t])},CM=function([,e,t]){const r=P(this,Nn,Hg).call(this,e);for(let s=r;s<h(this,Jr).length;s++){const[i,o]=h(this,Jr)[s];if(i!==e)break;if(i===e&&o===t){h(this,Jr).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,o]=h(this,Jr)[s];if(i!==e)break;if(i===e&&o===t){h(this,Jr).splice(s,1);return}}},WE=function(e){const[t,r,s]=e,i=[[t,r,s]],o=P(this,Nn,Hg).call(this,s);for(let a=0;a<o;a++){const[l,c]=h(this,Jr)[a];for(let u=0,f=i.length;u<f;u++){const[,p,m]=i[u];if(!(c<=p||m<=l)){if(p>=l){if(m>c)i[u][1]=c;else{if(f===1)return[];i.splice(u,1),u--,f--}continue}i[u][2]=l,m>c&&i.push([t,c,m])}}}return i};class xM{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof qE}}var xp,Mu;class nz extends xM{constructor(t,r){super();I(this,xp);I(this,Mu);x(this,Mu,t),x(this,xp,r)}toSVGPath(){const t=[];for(const r of h(this,Mu)){let[s,i]=r;t.push(`M${s} ${i}`);for(let o=2;o<r.length;o+=2){const a=r[o],l=r[o+1];a===s?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],o){const a=[],l=s-t,c=i-r;for(const u of h(this,Mu)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=t+u[p]*l,f[p+1]=i-u[p+1]*c;a.push(f)}return a}get box(){return h(this,xp)}}xp=new WeakMap,Mu=new WeakMap;var Ss,Si,Nu,Du,Ts,be,gl,vl,Rp,Pp,Ou,Fu,Co,Ip,_y,wy,kp,GE;const ii=class ii{constructor({x:e,y:t},r,s,i,o,a=0){I(this,kp);I(this,Ss);I(this,Si,[]);I(this,Nu);I(this,Du);I(this,Ts,[]);I(this,be,new Float64Array(18));I(this,gl);I(this,vl);I(this,Rp);I(this,Pp);I(this,Ou);I(this,Fu);I(this,Co,[]);x(this,Ss,r),x(this,Fu,i*s),x(this,Du,o),h(this,be).set([NaN,NaN,NaN,NaN,e,t],6),x(this,Nu,a),x(this,Pp,h(ii,Ip)*s),x(this,Rp,h(ii,wy)*s),x(this,Ou,s),h(this,Co).push(e,t)}get free(){return!0}isEmpty(){return isNaN(h(this,be)[8])}add({x:e,y:t}){var k;x(this,gl,e),x(this,vl,t);const[r,s,i,o]=h(this,Ss);let[a,l,c,u]=h(this,be).subarray(8,12);const f=e-c,p=t-u,m=Math.hypot(f,p);if(m<h(this,Rp))return!1;const g=m-h(this,Pp),_=g/m,w=_*f,y=_*p;let E=a,S=l;a=c,l=u,c+=w,u+=y,(k=h(this,Co))==null||k.push(e,t);const R=-y/g,O=w/g,V=R*h(this,Fu),C=O*h(this,Fu);return h(this,be).set(h(this,be).subarray(2,8),0),h(this,be).set([c+V,u+C],4),h(this,be).set(h(this,be).subarray(14,18),12),h(this,be).set([c-V,u-C],16),isNaN(h(this,be)[6])?(h(this,Ts).length===0&&(h(this,be).set([a+V,l+C],2),h(this,Ts).push(NaN,NaN,NaN,NaN,(a+V-r)/i,(l+C-s)/o),h(this,be).set([a-V,l-C],14),h(this,Si).push(NaN,NaN,NaN,NaN,(a-V-r)/i,(l-C-s)/o)),h(this,be).set([E,S,a,l,c,u],6),!this.isEmpty()):(h(this,be).set([E,S,a,l,c,u],6),Math.abs(Math.atan2(S-l,E-a)-Math.atan2(y,w))<Math.PI/2?([a,l,c,u]=h(this,be).subarray(2,6),h(this,Ts).push(NaN,NaN,NaN,NaN,((a+c)/2-r)/i,((l+u)/2-s)/o),[a,l,E,S]=h(this,be).subarray(14,18),h(this,Si).push(NaN,NaN,NaN,NaN,((E+a)/2-r)/i,((S+l)/2-s)/o),!0):([E,S,a,l,c,u]=h(this,be).subarray(0,6),h(this,Ts).push(((E+5*a)/6-r)/i,((S+5*l)/6-s)/o,((5*a+c)/6-r)/i,((5*l+u)/6-s)/o,((a+c)/2-r)/i,((l+u)/2-s)/o),[c,u,a,l,E,S]=h(this,be).subarray(12,18),h(this,Si).push(((E+5*a)/6-r)/i,((S+5*l)/6-s)/o,((5*a+c)/6-r)/i,((5*l+u)/6-s)/o,((a+c)/2-r)/i,((l+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=h(this,Ts),t=h(this,Si),r=h(this,be).subarray(4,6),s=h(this,be).subarray(16,18),[i,o,a,l]=h(this,Ss),[c,u,f,p]=P(this,kp,GE).call(this);if(isNaN(h(this,be)[6])&&!this.isEmpty())return`M${(h(this,be)[2]-i)/a} ${(h(this,be)[3]-o)/l} L${(h(this,be)[4]-i)/a} ${(h(this,be)[5]-o)/l} L${c} ${u} L${f} ${p} L${(h(this,be)[16]-i)/a} ${(h(this,be)[17]-o)/l} L${(h(this,be)[14]-i)/a} ${(h(this,be)[15]-o)/l} Z`;const m=[];m.push(`M${e[4]} ${e[5]}`);for(let g=6;g<e.length;g+=6)isNaN(e[g])?m.push(`L${e[g+4]} ${e[g+5]}`):m.push(`C${e[g]} ${e[g+1]} ${e[g+2]} ${e[g+3]} ${e[g+4]} ${e[g+5]}`);m.push(`L${(r[0]-i)/a} ${(r[1]-o)/l} L${c} ${u} L${f} ${p} L${(s[0]-i)/a} ${(s[1]-o)/l}`);for(let g=t.length-6;g>=6;g-=6)isNaN(t[g])?m.push(`L${t[g+4]} ${t[g+5]}`):m.push(`C${t[g]} ${t[g+1]} ${t[g+2]} ${t[g+3]} ${t[g+4]} ${t[g+5]}`);return m.push(`L${t[4]} ${t[5]} Z`),m.join(" ")}getOutlines(){var y;const e=h(this,Ts),t=h(this,Si),r=h(this,be),s=r.subarray(4,6),i=r.subarray(16,18),[o,a,l,c]=h(this,Ss),u=new Float64Array((((y=h(this,Co))==null?void 0:y.length)??0)+2);for(let E=0,S=u.length-2;E<S;E+=2)u[E]=(h(this,Co)[E]-o)/l,u[E+1]=(h(this,Co)[E+1]-a)/c;u[u.length-2]=(h(this,gl)-o)/l,u[u.length-1]=(h(this,vl)-a)/c;const[f,p,m,g]=P(this,kp,GE).call(this);if(isNaN(r[6])&&!this.isEmpty()){const E=new Float64Array(36);return E.set([NaN,NaN,NaN,NaN,(r[2]-o)/l,(r[3]-a)/c,NaN,NaN,NaN,NaN,(r[4]-o)/l,(r[5]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(r[16]-o)/l,(r[17]-a)/c,NaN,NaN,NaN,NaN,(r[14]-o)/l,(r[15]-a)/c],0),new qE(E,u,h(this,Ss),h(this,Ou),h(this,Nu),h(this,Du))}const _=new Float64Array(h(this,Ts).length+24+h(this,Si).length);let w=e.length;for(let E=0;E<w;E+=2){if(isNaN(e[E])){_[E]=_[E+1]=NaN;continue}_[E]=e[E],_[E+1]=e[E+1]}_.set([NaN,NaN,NaN,NaN,(s[0]-o)/l,(s[1]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(i[0]-o)/l,(i[1]-a)/c],w),w+=24;for(let E=t.length-6;E>=6;E-=6)for(let S=0;S<6;S+=2){if(isNaN(t[E+S])){_[w]=_[w+1]=NaN,w+=2;continue}_[w]=t[E+S],_[w+1]=t[E+S+1],w+=2}return _.set([NaN,NaN,NaN,NaN,t[4],t[5]],w),new qE(_,u,h(this,Ss),h(this,Ou),h(this,Nu),h(this,Du))}};Ss=new WeakMap,Si=new WeakMap,Nu=new WeakMap,Du=new WeakMap,Ts=new WeakMap,be=new WeakMap,gl=new WeakMap,vl=new WeakMap,Rp=new WeakMap,Pp=new WeakMap,Ou=new WeakMap,Fu=new WeakMap,Co=new WeakMap,Ip=new WeakMap,_y=new WeakMap,wy=new WeakMap,kp=new WeakSet,GE=function(){const e=h(this,be).subarray(4,6),t=h(this,be).subarray(16,18),[r,s,i,o]=h(this,Ss);return[(h(this,gl)+(e[0]-t[0])/2-r)/i,(h(this,vl)+(e[1]-t[1])/2-s)/o,(h(this,gl)+(t[0]-e[0])/2-r)/i,(h(this,vl)+(t[1]-e[1])/2-s)/o]},I(ii,Ip,8),I(ii,_y,2),I(ii,wy,h(ii,Ip)+h(ii,_y));let Uv=ii;var Vu,yl,Ti,Lp,cr,Mp,yt,Wn,dd,fd,RM;class qE extends xM{constructor(t,r,s,i,o,a){super();I(this,Wn);I(this,Vu);I(this,yl,null);I(this,Ti);I(this,Lp);I(this,cr);I(this,Mp);I(this,yt);x(this,yt,t),x(this,cr,r),x(this,Vu,s),x(this,Mp,i),x(this,Ti,o),x(this,Lp,a),P(this,Wn,RM).call(this,a);const{x:l,y:c,width:u,height:f}=h(this,yl);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-l)/u,t[p+1]=(t[p+1]-c)/f;for(let p=0,m=r.length;p<m;p+=2)r[p]=(r[p]-l)/u,r[p+1]=(r[p+1]-c)/f}toSVGPath(){const t=[`M${h(this,yt)[4]} ${h(this,yt)[5]}`];for(let r=6,s=h(this,yt).length;r<s;r+=6){if(isNaN(h(this,yt)[r])){t.push(`L${h(this,yt)[r+4]} ${h(this,yt)[r+5]}`);continue}t.push(`C${h(this,yt)[r]} ${h(this,yt)[r+1]} ${h(this,yt)[r+2]} ${h(this,yt)[r+3]} ${h(this,yt)[r+4]} ${h(this,yt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],o){const a=s-t,l=i-r;let c,u;switch(o){case 0:c=P(this,Wn,dd).call(this,h(this,yt),t,i,a,-l),u=P(this,Wn,dd).call(this,h(this,cr),t,i,a,-l);break;case 90:c=P(this,Wn,fd).call(this,h(this,yt),t,r,a,l),u=P(this,Wn,fd).call(this,h(this,cr),t,r,a,l);break;case 180:c=P(this,Wn,dd).call(this,h(this,yt),s,r,-a,l),u=P(this,Wn,dd).call(this,h(this,cr),s,r,-a,l);break;case 270:c=P(this,Wn,fd).call(this,h(this,yt),s,i,-a,-l),u=P(this,Wn,fd).call(this,h(this,cr),s,i,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return h(this,yl)}getNewOutline(t,r){const{x:s,y:i,width:o,height:a}=h(this,yl),[l,c,u,f]=h(this,Vu),p=o*u,m=a*f,g=s*u+l,_=i*f+c,w=new Uv({x:h(this,cr)[0]*p+g,y:h(this,cr)[1]*m+_},h(this,Vu),h(this,Mp),t,h(this,Lp),r??h(this,Ti));for(let y=2;y<h(this,cr).length;y+=2)w.add({x:h(this,cr)[y]*p+g,y:h(this,cr)[y+1]*m+_});return w.getOutlines()}}Vu=new WeakMap,yl=new WeakMap,Ti=new WeakMap,Lp=new WeakMap,cr=new WeakMap,Mp=new WeakMap,yt=new WeakMap,Wn=new WeakSet,dd=function(t,r,s,i,o){const a=new Float64Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l]*i,a[l+1]=s+t[l+1]*o;return a},fd=function(t,r,s,i,o){const a=new Float64Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l+1]*i,a[l+1]=s+t[l]*o;return a},RM=function(t){const r=h(this,yt);let s=r[4],i=r[5],o=s,a=i,l=s,c=i,u=s,f=i;const p=t?Math.max:Math.min;for(let y=6,E=r.length;y<E;y+=6){if(isNaN(r[y]))o=Math.min(o,r[y+4]),a=Math.min(a,r[y+5]),l=Math.max(l,r[y+4]),c=Math.max(c,r[y+5]),f<r[y+5]?(u=r[y+4],f=r[y+5]):f===r[y+5]&&(u=p(u,r[y+4]));else{const S=ie.bezierBoundingBox(s,i,...r.slice(y,y+6));o=Math.min(o,S[0]),a=Math.min(a,S[1]),l=Math.max(l,S[2]),c=Math.max(c,S[3]),f<S[3]?(u=S[2],f=S[3]):f===S[3]&&(u=p(u,S[2]))}s=r[y+4],i=r[y+5]}const m=o-h(this,Ti),g=a-h(this,Ti),_=l-o+2*h(this,Ti),w=c-a+2*h(this,Ti);x(this,yl,{x:m,y:g,width:_,height:w,lastPoint:[u,f]})};var Np,Dp,Zr,_l,ju,It,Op,Bu,Fp,Vp,es,Uu,Xe,KE,XE,PM,xa,IM,oo;const oi=class oi{constructor({editor:e=null,uiManager:t=null}){I(this,Xe);I(this,Np,P(this,Xe,PM).bind(this));I(this,Dp,P(this,Xe,IM).bind(this));I(this,Zr,null);I(this,_l,null);I(this,ju);I(this,It,null);I(this,Op,!1);I(this,Bu,!1);I(this,Fp,null);I(this,Vp);I(this,es,null);I(this,Uu);var r;e?(x(this,Bu,!1),x(this,Uu,pe.HIGHLIGHT_COLOR),x(this,Fp,e)):(x(this,Bu,!0),x(this,Uu,pe.HIGHLIGHT_DEFAULT_COLOR)),x(this,es,(e==null?void 0:e._uiManager)||t),x(this,Vp,h(this,es)._eventBus),x(this,ju,(e==null?void 0:e.color)||((r=h(this,es))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return ke(this,"_keyboardManager",new rm([[["Escape","mac+Escape"],oi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],oi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],oi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],oi.prototype._moveToPrevious],[["Home","mac+Home"],oi.prototype._moveToBeginning],[["End","mac+End"],oi.prototype._moveToEnd]]))}renderButton(){const e=x(this,Zr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=h(this,es)._signal;e.addEventListener("click",P(this,Xe,xa).bind(this),{signal:t}),e.addEventListener("keydown",h(this,Np),{signal:t});const r=x(this,_l,document.createElement("span"));return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=h(this,ju),e.append(r),e}renderMainDropdown(){const e=x(this,It,P(this,Xe,KE).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===h(this,Zr)){P(this,Xe,xa).call(this,e);return}const t=e.target.getAttribute("data-color");t&&P(this,Xe,XE).call(this,t,e)}_moveToNext(e){var t,r;if(!h(this,Xe,oo)){P(this,Xe,xa).call(this,e);return}if(e.target===h(this,Zr)){(t=h(this,It).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=h(this,It))==null?void 0:t.firstChild)||e.target===h(this,Zr)){h(this,Xe,oo)&&this._hideDropdownFromKeyboard();return}h(this,Xe,oo)||P(this,Xe,xa).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!h(this,Xe,oo)){P(this,Xe,xa).call(this,e);return}(t=h(this,It).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!h(this,Xe,oo)){P(this,Xe,xa).call(this,e);return}(t=h(this,It).lastChild)==null||t.focus()}hideDropdown(){var e;(e=h(this,It))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",h(this,Dp))}_hideDropdownFromKeyboard(){var e;if(!h(this,Bu)){if(!h(this,Xe,oo)){(e=h(this,Fp))==null||e.unselect();return}this.hideDropdown(),h(this,Zr).focus({preventScroll:!0,focusVisible:h(this,Op)})}}updateColor(e){if(h(this,_l)&&(h(this,_l).style.backgroundColor=e),!h(this,It))return;const t=h(this,es).highlightColors.values();for(const r of h(this,It).children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=h(this,Zr))==null||e.remove(),x(this,Zr,null),x(this,_l,null),(t=h(this,It))==null||t.remove(),x(this,It,null)}};Np=new WeakMap,Dp=new WeakMap,Zr=new WeakMap,_l=new WeakMap,ju=new WeakMap,It=new WeakMap,Op=new WeakMap,Bu=new WeakMap,Fp=new WeakMap,Vp=new WeakMap,es=new WeakMap,Uu=new WeakMap,Xe=new WeakSet,KE=function(){const e=document.createElement("div"),t=h(this,es)._signal;e.addEventListener("contextmenu",Xn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,s]of h(this,es).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${r}`);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.setAttribute("aria-selected",s===h(this,ju)),i.addEventListener("click",P(this,Xe,XE).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",h(this,Np),{signal:t}),e},XE=function(e,t){t.stopPropagation(),h(this,Vp).dispatch("switchannotationeditorparams",{source:this,type:h(this,Uu),value:e})},PM=function(e){oi._keyboardManager.exec(this,e)},xa=function(e){if(h(this,Xe,oo)){this.hideDropdown();return}if(x(this,Op,e.detail===0),window.addEventListener("pointerdown",h(this,Dp),{signal:h(this,es)._signal}),h(this,It)){h(this,It).classList.remove("hidden");return}const t=x(this,It,P(this,Xe,KE).call(this));h(this,Zr).append(t)},IM=function(e){var t;(t=h(this,It))!=null&&t.contains(e.target)||this.hideDropdown()},oo=function(){return h(this,It)&&!h(this,It).classList.contains("hidden")};let $v=oi;var $u,jp,xo,wl,zu,Cr,Bp,Up,El,ts,Cn,ur,Ey,Hu,Al,kt,Wu,Cs,$p,we,YE,QE,kM,LM,MM,JE,pd,Lr,Ec,NM,Wg,md,DM,OM,FM,VM;const Oe=class Oe extends Ve{constructor(t){super({...t,name:"highlightEditor"});I(this,we);I(this,$u,null);I(this,jp,0);I(this,xo);I(this,wl,null);I(this,zu,null);I(this,Cr,null);I(this,Bp,null);I(this,Up,0);I(this,El,null);I(this,ts,null);I(this,Cn,null);I(this,ur,!1);I(this,Ey,P(this,we,NM).bind(this));I(this,Hu,null);I(this,Al);I(this,kt,null);I(this,Wu,"");I(this,Cs);I(this,$p,"");this.color=t.color||Oe._defaultColor,x(this,Cs,t.thickness||Oe._defaultThickness),x(this,Al,t.opacity||Oe._defaultOpacity),x(this,xo,t.boxes||null),x(this,$p,t.methodOfCreation||""),x(this,Wu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(x(this,ur,!0),P(this,we,QE).call(this,t),P(this,we,pd).call(this)):(x(this,$u,t.anchorNode),x(this,jp,t.anchorOffset),x(this,Bp,t.focusNode),x(this,Up,t.focusOffset),P(this,we,YE).call(this),P(this,we,pd).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Oe.prototype;return ke(this,"_keyboardManager",new rm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,ur)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(this,Cs),methodOfCreation:h(this,$p)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;Ve.initialize(t,r),Oe._defaultColor||(Oe._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case pe.HIGHLIGHT_DEFAULT_COLOR:Oe._defaultColor=r;break;case pe.HIGHLIGHT_THICKNESS:Oe._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return h(this,Hu)}updateParams(t,r){switch(t){case pe.HIGHLIGHT_COLOR:P(this,we,kM).call(this,r);break;case pe.HIGHLIGHT_THICKNESS:P(this,we,LM).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.HIGHLIGHT_DEFAULT_COLOR,Oe._defaultColor],[pe.HIGHLIGHT_THICKNESS,Oe._defaultThickness]]}get propertiesToUpdate(){return[[pe.HIGHLIGHT_COLOR,this.color||Oe._defaultColor],[pe.HIGHLIGHT_THICKNESS,h(this,Cs)||Oe._defaultThickness],[pe.HIGHLIGHT_FREE,h(this,ur)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(x(this,zu,new $v({editor:this})),t.addColorPicker(h(this,zu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,we,md).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,P(this,we,md).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){P(this,we,JE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,we,pd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?P(this,we,JE).call(this):t&&(P(this,we,pd).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,o,a;const{drawLayer:r}=this.parent;let s;h(this,ur)?(t=(t-this.rotation+360)%360,s=P(i=Oe,Lr,Ec).call(i,h(this,ts).box,t)):s=P(o=Oe,Lr,Ec).call(o,this,t),r.rotate(h(this,Cn),t),r.rotate(h(this,kt),t),r.updateBox(h(this,Cn),s),r.updateBox(h(this,kt),P(a=Oe,Lr,Ec).call(a,h(this,Cr).box,t))}render(){if(this.div)return this.div;const t=super.render();h(this,Wu)&&(t.setAttribute("aria-label",h(this,Wu)),t.setAttribute("role","mark")),h(this,ur)?t.classList.add("free"):this.div.addEventListener("keydown",h(this,Ey),{signal:this._uiManager._signal});const r=x(this,El,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=h(this,wl);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),Fv(this,h(this,El),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(h(this,kt),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(h(this,kt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:P(this,we,Wg).call(this,!0);break;case 1:case 3:P(this,we,Wg).call(this,!1);break}}select(){var t,r;super.select(),h(this,kt)&&((t=this.parent)==null||t.drawLayer.removeClass(h(this,kt),"hovered"),(r=this.parent)==null||r.drawLayer.addClass(h(this,kt),"selected"))}unselect(){var t;super.unselect(),h(this,kt)&&((t=this.parent)==null||t.drawLayer.removeClass(h(this,kt),"selected"),h(this,ur)||P(this,we,Wg).call(this,!1))}get _mustFixPosition(){return!h(this,ur)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(h(this,Cn),t),this.parent.drawLayer.show(h(this,kt),t))}static startHighlighting(t,r,{target:s,x:i,y:o}){const{x:a,y:l,width:c,height:u}=s.getBoundingClientRect(),f=w=>{P(this,Lr,FM).call(this,t,w)},p=t._signal,m={capture:!0,passive:!1,signal:p},g=w=>{w.preventDefault(),w.stopPropagation()},_=w=>{s.removeEventListener("pointermove",f),window.removeEventListener("blur",_),window.removeEventListener("pointerup",_),window.removeEventListener("pointerdown",g,m),window.removeEventListener("contextmenu",Xn),P(this,Lr,VM).call(this,t,w)};window.addEventListener("blur",_,{signal:p}),window.addEventListener("pointerup",_,{signal:p}),window.addEventListener("pointerdown",g,m),window.addEventListener("contextmenu",Xn,{signal:p}),s.addEventListener("pointermove",f,{signal:p}),this._freeHighlight=new Uv({x:i,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,r,s){var _;const i=super.deserialize(t,r,s),{rect:[o,a,l,c],color:u,quadPoints:f}=t;i.color=ie.makeHexColor(...u),x(i,Al,t.opacity);const[p,m]=i.pageDimensions;i.width=(l-o)/p,i.height=(c-a)/m;const g=x(i,xo,[]);for(let w=0;w<f.length;w+=8)g.push({x:(f[4]-l)/p,y:(c-(1-f[w+5]))/m,width:(f[w+2]-f[w])/p,height:(f[w+5]-f[w+1])/m});return P(_=i,we,YE).call(_),i}serialize(t=!1){if(this.isEmpty()||t)return null;const r=this.getRect(0,0),s=Ve._colorManager.convert(this.color);return{annotationType:Te.HIGHLIGHT,color:s,opacity:h(this,Al),thickness:h(this,Cs),quadPoints:P(this,we,DM).call(this),outlines:P(this,we,OM).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:P(this,we,md).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};$u=new WeakMap,jp=new WeakMap,xo=new WeakMap,wl=new WeakMap,zu=new WeakMap,Cr=new WeakMap,Bp=new WeakMap,Up=new WeakMap,El=new WeakMap,ts=new WeakMap,Cn=new WeakMap,ur=new WeakMap,Ey=new WeakMap,Hu=new WeakMap,Al=new WeakMap,kt=new WeakMap,Wu=new WeakMap,Cs=new WeakMap,$p=new WeakMap,we=new WeakSet,YE=function(){const t=new HE(h(this,xo),.001);x(this,ts,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=h(this,ts).box;const r=new HE(h(this,xo),.0025,.001,this._uiManager.direction==="ltr");x(this,Cr,r.getOutlines());const{lastPoint:s}=h(this,Cr).box;x(this,Hu,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},QE=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,p;if(x(this,ts,t),x(this,Cr,t.getNewOutline(h(this,Cs)/2+1.5,.0025)),r>=0)x(this,Cn,r),x(this,wl,s),this.parent.drawLayer.finalizeLine(r,t),x(this,kt,this.parent.drawLayer.highlightOutline(h(this,Cr)));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(h(this,Cn),t),this.parent.drawLayer.updateBox(h(this,Cn),P(f=Oe,Lr,Ec).call(f,h(this,ts).box,(m-this.rotation+360)%360)),this.parent.drawLayer.updateLine(h(this,kt),h(this,Cr)),this.parent.drawLayer.updateBox(h(this,kt),P(p=Oe,Lr,Ec).call(p,h(this,Cr).box,m))}const{x:o,y:a,width:l,height:c}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[m,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/m,this.height=c*m/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[m,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/m,this.height=c*m/g;break}}const{lastPoint:u}=h(this,Cr).box;x(this,Hu,[(u[0]-o)/l,(u[1]-a)/c])},kM=function(t){const r=i=>{var o,a;this.color=i,(o=this.parent)==null||o.drawLayer.changeColor(h(this,Cn),i),(a=h(this,zu))==null||a.updateColor(i)},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},LM=function(t){const r=h(this,Cs),s=i=>{x(this,Cs,i),P(this,we,MM).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},MM=function(t){if(!h(this,ur))return;P(this,we,QE).call(this,{highlightOutlines:h(this,ts).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},JE=function(){h(this,Cn)===null||!this.parent||(this.parent.drawLayer.remove(h(this,Cn)),x(this,Cn,null),this.parent.drawLayer.remove(h(this,kt)),x(this,kt,null))},pd=function(t=this.parent){h(this,Cn)===null&&({id:tr(this,Cn)._,clipPathId:tr(this,wl)._}=t.drawLayer.highlight(h(this,ts),this.color,h(this,Al)),x(this,kt,t.drawLayer.highlightOutline(h(this,Cr))),h(this,El)&&(h(this,El).style.clipPath=h(this,wl)))},Lr=new WeakSet,Ec=function({x:t,y:r,width:s,height:i},o){switch(o){case 90:return{x:1-r-i,y:t,width:i,height:s};case 180:return{x:1-t-s,y:1-r-i,width:s,height:i};case 270:return{x:r,y:1-t-s,width:i,height:s}}return{x:t,y:r,width:s,height:i}},NM=function(t){Oe._keyboardManager.exec(this,t)},Wg=function(t){if(!h(this,$u))return;const r=window.getSelection();t?r.setPosition(h(this,$u),h(this,jp)):r.setPosition(h(this,Bp),h(this,Up))},md=function(){return h(this,ur)?this.rotation:0},DM=function(){if(h(this,ur))return null;const[t,r]=this.pageDimensions,s=h(this,xo),i=new Float32Array(s.length*8);let o=0;for(const{x:a,y:l,width:c,height:u}of s){const f=a*t,p=(1-l-u)*r;i[o]=i[o+4]=f,i[o+1]=i[o+3]=p,i[o+2]=i[o+6]=f+c*t,i[o+5]=i[o+7]=p+u*r,o+=8}return i},OM=function(t){return h(this,ts).serialize(t,P(this,we,md).call(this))},FM=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},VM=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},I(Oe,Lr),ge(Oe,"_defaultColor",null),ge(Oe,"_defaultOpacity",1),ge(Oe,"_defaultThickness",12),ge(Oe,"_l10nPromise"),ge(Oe,"_type","highlight"),ge(Oe,"_editorType",Te.HIGHLIGHT),ge(Oe,"_freeHighlightId",-1),ge(Oe,"_freeHighlight",null),ge(Oe,"_freeHighlightClipId","");let zv=Oe;var bl,Sl,zp,Hp,Wp,Tl,xs,Ci,xr,Cl,xl,xi,Rl,Pl,Ro,J,jM,BM,UM,$M,eA,zM,tA,HM,WM,GM,qM,KM,Ra,nA,Gg,qg,Ac,rA,Kg,Yi,XM,sA,YM,QM,iA,Xg,gd;const st=class st extends Ve{constructor(t){super({...t,name:"inkEditor"});I(this,J);I(this,bl,0);I(this,Sl,0);I(this,zp,this.canvasPointermove.bind(this));I(this,Hp,this.canvasPointerleave.bind(this));I(this,Wp,this.canvasPointerup.bind(this));I(this,Tl,this.canvasPointerdown.bind(this));I(this,xs,null);I(this,Ci,new Path2D);I(this,xr,!1);I(this,Cl,!1);I(this,xl,!1);I(this,xi,null);I(this,Rl,0);I(this,Pl,0);I(this,Ro,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,r){Ve.initialize(t,r)}static updateDefaultParams(t,r){switch(t){case pe.INK_THICKNESS:st._defaultThickness=r;break;case pe.INK_COLOR:st._defaultColor=r;break;case pe.INK_OPACITY:st._defaultOpacity=r/100;break}}updateParams(t,r){switch(t){case pe.INK_THICKNESS:P(this,J,jM).call(this,r);break;case pe.INK_COLOR:P(this,J,BM).call(this,r);break;case pe.INK_OPACITY:P(this,J,UM).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.INK_THICKNESS,st._defaultThickness],[pe.INK_COLOR,st._defaultColor||Ve._defaultLineColor],[pe.INK_OPACITY,Math.round(st._defaultOpacity*100)]]}get propertiesToUpdate(){return[[pe.INK_THICKNESS,this.thickness||st._defaultThickness],[pe.INK_COLOR,this.color||st._defaultColor||Ve._defaultLineColor],[pe.INK_OPACITY,Math.round(100*(this.opacity??st._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(P(this,J,Gg).call(this),P(this,J,qg).call(this)),this.isAttachedToDOM||(this.parent.add(this),P(this,J,Ac).call(this)),P(this,J,gd).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,h(this,xs)&&(clearTimeout(h(this,xs)),x(this,xs,null)),(t=h(this,xi))==null||t.disconnect(),x(this,xi,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,r]=this.parentDimensions,s=this.width*t,i=this.height*r;this.setDimensions(s,i)}enableEditMode(){h(this,xr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",h(this,Tl),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",h(this,Tl)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){h(this,xr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,xr,!0),this.div.classList.add("disabled"),P(this,J,gd).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||h(this,xr)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),P(this,J,zM).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),P(this,J,tA).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),P(this,J,nA).call(this,t)}canvasPointerleave(t){P(this,J,nA).call(this,t)}get isResizable(){return!this.isEmpty()&&h(this,xr)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,i,o,a]=P(this,J,$M).call(this);if(this.setAt(s,i,0,0),this.setDims(o,a),P(this,J,Gg).call(this),this.width){const[l,c]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*c),this.setAt(t*l,r*c,this.width*l,this.height*c),x(this,xl,!0),P(this,J,Ac).call(this),this.setDims(this.width*l,this.height*c),P(this,J,Ra).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return P(this,J,qg).call(this),this.div}setDimensions(t,r){const s=Math.round(t),i=Math.round(r);if(h(this,Rl)===s&&h(this,Pl)===i)return;x(this,Rl,s),x(this,Pl,i),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=r/a,this.fixAndSetPosition(),h(this,xr)&&P(this,J,rA).call(this,t,r),P(this,J,Ac).call(this),P(this,J,Ra).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,r,s){var w,y,E;if(t instanceof gM)return null;const i=super.deserialize(t,r,s);i.thickness=t.thickness,i.color=ie.makeHexColor(...t.color),i.opacity=t.opacity;const[o,a]=i.pageDimensions,l=i.width*o,c=i.height*a,u=i.parentScale,f=t.thickness/2;x(i,xr,!0),x(i,Rl,Math.round(l)),x(i,Pl,Math.round(c));const{paths:p,rect:m,rotation:g}=t;for(let{bezier:S}of p){S=P(w=st,Yi,YM).call(w,S,m,g);const R=[];i.paths.push(R);let O=u*(S[0]-f),V=u*(S[1]-f);for(let T=2,k=S.length;T<k;T+=6){const M=u*(S[T]-f),F=u*(S[T+1]-f),j=u*(S[T+2]-f),D=u*(S[T+3]-f),q=u*(S[T+4]-f),re=u*(S[T+5]-f);R.push([[O,V],[M,F],[j,D],[q,re]]),O=q,V=re}const C=P(this,Yi,XM).call(this,R);i.bezierPath2D.push(C)}const _=P(y=i,J,iA).call(y);return x(i,Sl,Math.max(Ve.MIN_SIZE,_[2]-_[0])),x(i,bl,Math.max(Ve.MIN_SIZE,_[3]-_[1])),P(E=i,J,rA).call(E,l,c),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),r=Ve._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Te.INK,color:r,thickness:this.thickness,opacity:this.opacity,paths:P(this,J,QM).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};bl=new WeakMap,Sl=new WeakMap,zp=new WeakMap,Hp=new WeakMap,Wp=new WeakMap,Tl=new WeakMap,xs=new WeakMap,Ci=new WeakMap,xr=new WeakMap,Cl=new WeakMap,xl=new WeakMap,xi=new WeakMap,Rl=new WeakMap,Pl=new WeakMap,Ro=new WeakMap,J=new WeakSet,jM=function(t){const r=i=>{this.thickness=i,P(this,J,gd).call(this)},s=this.thickness;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},BM=function(t){const r=i=>{this.color=i,P(this,J,Ra).call(this)},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},UM=function(t){const r=i=>{this.opacity=i,P(this,J,Ra).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$M=function(){const{parentRotation:t,parentDimensions:[r,s]}=this;switch(t){case 90:return[0,s,s,r];case 180:return[r,s,r,s];case 270:return[r,0,s,r];default:return[0,0,r,s]}},eA=function(){const{ctx:t,color:r,opacity:s,thickness:i,parentScale:o,scaleFactor:a}=this;t.lineWidth=i*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${r}${C$(s)}`},zM=function(t,r){const s=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Xn,{signal:s}),this.canvas.addEventListener("pointerleave",h(this,Hp),{signal:s}),this.canvas.addEventListener("pointermove",h(this,zp),{signal:s}),this.canvas.addEventListener("pointerup",h(this,Wp),{signal:s}),this.canvas.removeEventListener("pointerdown",h(this,Tl)),this.isEditing=!0,h(this,xl)||(x(this,xl,!0),P(this,J,Ac).call(this),this.thickness||(this.thickness=st._defaultThickness),this.color||(this.color=st._defaultColor||Ve._defaultLineColor),this.opacity??(this.opacity=st._defaultOpacity)),this.currentPath.push([t,r]),x(this,Cl,!1),P(this,J,eA).call(this),x(this,Ro,()=>{P(this,J,GM).call(this),h(this,Ro)&&window.requestAnimationFrame(h(this,Ro))}),window.requestAnimationFrame(h(this,Ro))},tA=function(t,r){const[s,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&r===i)return;const o=this.currentPath;let a=h(this,Ci);if(o.push([t,r]),x(this,Cl,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,r);return}o.length===3&&(x(this,Ci,a=new Path2D),a.moveTo(...o[0])),P(this,J,qM).call(this,a,...o.at(-3),...o.at(-2),t,r)},HM=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);h(this,Ci).lineTo(...t)},WM=function(t,r){x(this,Ro,null),t=Math.min(Math.max(t,0),this.canvas.width),r=Math.min(Math.max(r,0),this.canvas.height),P(this,J,tA).call(this,t,r),P(this,J,HM).call(this);let s;if(this.currentPath.length!==1)s=P(this,J,KM).call(this);else{const c=[t,r];s=[[c,c.slice(),c.slice(),c]]}const i=h(this,Ci),o=this.currentPath;this.currentPath=[],x(this,Ci,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(P(this,J,Gg).call(this),P(this,J,qg).call(this)),P(this,J,gd).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},GM=function(){if(!h(this,Cl))return;x(this,Cl,!1);const t=Math.ceil(this.thickness*this.parentScale),r=this.currentPath.slice(-3),s=r.map(a=>a[0]),i=r.map(a=>a[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...i)-t,Math.max(...i)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(h(this,Ci)),o.restore()},qM=function(t,r,s,i,o,a,l){const c=(r+i)/2,u=(s+o)/2,f=(i+a)/2,p=(o+l)/2;t.bezierCurveTo(c+2*(i-c)/3,u+2*(o-u)/3,f+2*(i-f)/3,p+2*(o-p)/3,f,p)},KM=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const r=[];let s,[i,o]=t[0];for(s=1;s<t.length-2;s++){const[m,g]=t[s],[_,w]=t[s+1],y=(m+_)/2,E=(g+w)/2,S=[i+2*(m-i)/3,o+2*(g-o)/3],R=[y+2*(m-y)/3,E+2*(g-E)/3];r.push([[i,o],S,R,[y,E]]),[i,o]=[y,E]}const[a,l]=t[s],[c,u]=t[s+1],f=[i+2*(a-i)/3,o+2*(l-o)/3],p=[c+2*(a-c)/3,u+2*(l-u)/3];return r.push([[i,o],f,p,[c,u]]),r},Ra=function(){if(this.isEmpty()){P(this,J,Kg).call(this);return}P(this,J,eA).call(this);const{canvas:t,ctx:r}=this;r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),P(this,J,Kg).call(this);for(const s of this.bezierPath2D)r.stroke(s)},nA=function(t){this.canvas.removeEventListener("pointerleave",h(this,Hp)),this.canvas.removeEventListener("pointermove",h(this,zp)),this.canvas.removeEventListener("pointerup",h(this,Wp)),this.canvas.addEventListener("pointerdown",h(this,Tl),{signal:this._uiManager._signal}),h(this,xs)&&clearTimeout(h(this,xs)),x(this,xs,setTimeout(()=>{x(this,xs,null),this.canvas.removeEventListener("contextmenu",Xn)},10)),P(this,J,WM).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Gg=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},qg=function(){x(this,xi,new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&this.setDimensions(r.width,r.height)})),h(this,xi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=h(this,xi))==null||t.disconnect(),x(this,xi,null)},{once:!0})},Ac=function(){if(!h(this,xl))return;const[t,r]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*r),P(this,J,Kg).call(this)},rA=function(t,r){const s=P(this,J,Xg).call(this),i=(t-s)/h(this,Sl),o=(r-s)/h(this,bl);this.scaleFactor=Math.min(i,o)},Kg=function(){const t=P(this,J,Xg).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Yi=new WeakSet,XM=function(t){const r=new Path2D;for(let s=0,i=t.length;s<i;s++){const[o,a,l,c]=t[s];s===0&&r.moveTo(...o),r.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}return r},sA=function(t,r,s){const[i,o,a,l]=r;switch(s){case 0:for(let c=0,u=t.length;c<u;c+=2)t[c]+=i,t[c+1]=l-t[c+1];break;case 90:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=t[c+1]+i,t[c+1]=f+o}break;case 180:for(let c=0,u=t.length;c<u;c+=2)t[c]=a-t[c],t[c+1]+=o;break;case 270:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=a-t[c+1],t[c+1]=l-f}break;default:throw new Error("Invalid rotation")}return t},YM=function(t,r,s){const[i,o,a,l]=r;switch(s){case 0:for(let c=0,u=t.length;c<u;c+=2)t[c]-=i,t[c+1]=l-t[c+1];break;case 90:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=t[c+1]-o,t[c+1]=f-i}break;case 180:for(let c=0,u=t.length;c<u;c+=2)t[c]=a-t[c],t[c+1]-=o;break;case 270:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=l-t[c+1],t[c+1]=a-f}break;default:throw new Error("Invalid rotation")}return t},QM=function(t,r,s,i){var u,f;const o=[],a=this.thickness/2,l=t*r+a,c=t*s+a;for(const p of this.paths){const m=[],g=[];for(let _=0,w=p.length;_<w;_++){const[y,E,S,R]=p[_];if(y[0]===R[0]&&y[1]===R[1]&&w===1){const D=t*y[0]+l,q=t*y[1]+c;m.push(D,q),g.push(D,q);break}const O=t*y[0]+l,V=t*y[1]+c,C=t*E[0]+l,T=t*E[1]+c,k=t*S[0]+l,M=t*S[1]+c,F=t*R[0]+l,j=t*R[1]+c;_===0&&(m.push(O,V),g.push(O,V)),m.push(C,T,k,M,F,j),g.push(C,T),_===w-1&&g.push(F,j)}o.push({bezier:P(u=st,Yi,sA).call(u,m,i,this.rotation),points:P(f=st,Yi,sA).call(f,g,i,this.rotation)})}return o},iA=function(){let t=1/0,r=-1/0,s=1/0,i=-1/0;for(const o of this.paths)for(const[a,l,c,u]of o){const f=ie.bezierBoundingBox(...a,...l,...c,...u);t=Math.min(t,f[0]),s=Math.min(s,f[1]),r=Math.max(r,f[2]),i=Math.max(i,f[3])}return[t,s,r,i]},Xg=function(){return h(this,xr)?Math.ceil(this.thickness*this.parentScale):0},gd=function(t=!1){if(this.isEmpty())return;if(!h(this,xr)){P(this,J,Ra).call(this);return}const r=P(this,J,iA).call(this),s=P(this,J,Xg).call(this);x(this,Sl,Math.max(Ve.MIN_SIZE,r[2]-r[0])),x(this,bl,Math.max(Ve.MIN_SIZE,r[3]-r[1]));const i=Math.ceil(s+h(this,Sl)*this.scaleFactor),o=Math.ceil(s+h(this,bl)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=i/a,this.height=o/l,this.setAspectRatio(i,o);const c=this.translationX,u=this.translationY;this.translationX=-r[0],this.translationY=-r[1],P(this,J,Ac).call(this),P(this,J,Ra).call(this),x(this,Rl,i),x(this,Pl,o),this.setDims(i,o);const f=t?s/this.scaleFactor/2:0;this.translate(c-this.translationX-f,u-this.translationY-f)},I(st,Yi),ge(st,"_defaultColor",null),ge(st,"_defaultOpacity",1),ge(st,"_defaultThickness",1),ge(st,"_type","ink"),ge(st,"_editorType",Te.INK);let ZE=st;var en,tn,Po,Ri,Io,Gu,Rs,Pi,Ps,ns,Gp,De,vd,yd,Yg,aA,JM,ZM,lA,Qg,eN;const jd=class jd extends Ve{constructor(t){super({...t,name:"stampEditor"});I(this,De);I(this,en,null);I(this,tn,null);I(this,Po,null);I(this,Ri,null);I(this,Io,null);I(this,Gu,"");I(this,Rs,null);I(this,Pi,null);I(this,Ps,null);I(this,ns,!1);I(this,Gp,!1);x(this,Ri,t.bitmapUrl),x(this,Io,t.bitmapFile)}static initialize(t,r){Ve.initialize(t,r)}static get supportedTypes(){return ke(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(r=>`image/${r}`))}static get supportedTypesStr(){return ke(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,r){r.pasteEditor(Te.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,r;h(this,tn)&&(x(this,en,null),this._uiManager.imageManager.deleteId(h(this,tn)),(t=h(this,Rs))==null||t.remove(),x(this,Rs,null),(r=h(this,Pi))==null||r.disconnect(),x(this,Pi,null),h(this,Ps)&&(clearTimeout(h(this,Ps)),x(this,Ps,null))),super.remove()}rebuild(){if(!this.parent){h(this,tn)&&P(this,De,Yg).call(this);return}super.rebuild(),this.div!==null&&(h(this,tn)&&h(this,Rs)===null&&P(this,De,Yg).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(h(this,Po)||h(this,en)||h(this,Ri)||h(this,Io)||h(this,tn))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;if(this.width&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),h(this,en)?P(this,De,aA).call(this):P(this,De,Yg).call(this),this.width){const[s,i]=this.parentDimensions;this.setAt(t*s,r*i,this.width*s,this.height*i)}return this.div}getImageForAltText(){return h(this,Rs)}static deserialize(t,r,s){if(t instanceof vM)return null;const i=super.deserialize(t,r,s),{rect:o,bitmapUrl:a,bitmapId:l,isSvg:c,accessibilityData:u}=t;l&&s.imageManager.isValidId(l)?x(i,tn,l):x(i,Ri,a),x(i,ns,c);const[f,p]=i.pageDimensions;return i.width=(o[2]-o[0])/f,i.height=(o[3]-o[1])/p,u&&(i.altTextData=u),i}serialize(t=!1,r=null){if(this.isEmpty())return null;const s={annotationType:Te.STAMP,bitmapId:h(this,tn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(this,ns),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=P(this,De,Qg).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:i,altText:o}=this.altTextData;if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),r===null)return s;r.stamps||(r.stamps=new Map);const a=h(this,ns)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(h(this,tn)))r.stamps.set(h(this,tn),{area:a,serialized:s}),s.bitmap=P(this,De,Qg).call(this,!1);else if(h(this,ns)){const l=r.stamps.get(h(this,tn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=P(this,De,Qg).call(this,!1))}return s}};en=new WeakMap,tn=new WeakMap,Po=new WeakMap,Ri=new WeakMap,Io=new WeakMap,Gu=new WeakMap,Rs=new WeakMap,Pi=new WeakMap,Ps=new WeakMap,ns=new WeakMap,Gp=new WeakMap,De=new WeakSet,vd=function(t,r=!1){if(!t){this.remove();return}x(this,en,t.bitmap),r||(x(this,tn,t.id),x(this,ns,t.isSvg)),t.file&&x(this,Gu,t.file.name),P(this,De,aA).call(this)},yd=function(){x(this,Po,null),this._uiManager.enableWaiting(!1),h(this,Rs)&&this.div.focus()},Yg=function(){if(h(this,tn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,tn)).then(s=>P(this,De,vd).call(this,s,!0)).finally(()=>P(this,De,yd).call(this));return}if(h(this,Ri)){const s=h(this,Ri);x(this,Ri,null),this._uiManager.enableWaiting(!0),x(this,Po,this._uiManager.imageManager.getFromUrl(s).then(i=>P(this,De,vd).call(this,i)).finally(()=>P(this,De,yd).call(this)));return}if(h(this,Io)){const s=h(this,Io);x(this,Io,null),this._uiManager.enableWaiting(!0),x(this,Po,this._uiManager.imageManager.getFromFile(s).then(i=>P(this,De,vd).call(this,i)).finally(()=>P(this,De,yd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=jd.supportedTypesStr;const r=this._uiManager._signal;x(this,Po,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);P(this,De,vd).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>P(this,De,yd).call(this))),t.click()},aA=function(){const{div:t}=this;let{width:r,height:s}=h(this,en);const[i,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*i,s=this.height*o;else if(r>a*i||s>a*o){const f=Math.min(a*i/r,a*o/s);r*=f,s*=f}const[l,c]=this.parentDimensions;this.setDims(r*l/i,s*c/o),this._uiManager.enableWaiting(!1);const u=x(this,Rs,document.createElement("canvas"));t.append(u),t.hidden=!1,P(this,De,lA).call(this,r,s),P(this,De,eN).call(this),h(this,Gp)||(this.parent.addUndoableEditor(this),x(this,Gp,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,Gu)&&u.setAttribute("aria-label",h(this,Gu))},JM=function(t,r){var a;const[s,i]=this.parentDimensions;this.width=t/s,this.height=r/i,this.setDims(t,r),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,h(this,Ps)!==null&&clearTimeout(h(this,Ps)),x(this,Ps,setTimeout(()=>{x(this,Ps,null),P(this,De,lA).call(this,t,r)},200))},ZM=function(t,r){const{width:s,height:i}=h(this,en);let o=s,a=i,l=h(this,en);for(;o>2*t||a>2*r;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=f.transferToImageBitmap()}return l},lA=function(t,r){t=Math.ceil(t),r=Math.ceil(r);const s=h(this,Rs);if(!s||s.width===t&&s.height===r)return;s.width=t,s.height=r;const i=h(this,ns)?h(this,en):P(this,De,ZM).call(this,t,r);if(this._uiManager.hasMLManager&&!this.hasAltText()){const l=new OffscreenCanvas(t,r).getContext("2d");l.drawImage(i,0,0,i.width,i.height,0,0,t,r),this._uiManager.mlGuess({service:"image-to-text",request:{data:l.getImageData(0,0,t,r).data,width:t,height:r,channels:4}}).then(c=>{const u=(c==null?void 0:c.output)||"";this.parent&&u&&!this.hasAltText()&&(this.altTextData={altText:u,decorative:!1})})}const o=s.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(i,0,0,i.width,i.height,0,0,t,r)},Qg=function(t){if(t){if(h(this,ns)){const i=this._uiManager.imageManager.getSvgUrl(h(this,tn));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=h(this,en),r.getContext("2d").drawImage(h(this,en),0,0),r.toDataURL()}if(h(this,ns)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*na.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*na.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(h(this,en),0,0,h(this,en).width,h(this,en).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(h(this,en))},eN=function(){this._uiManager._signal&&(x(this,Pi,new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&P(this,De,JM).call(this,r.width,r.height)})),h(this,Pi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=h(this,Pi))==null||t.disconnect(),x(this,Pi,null)},{once:!0}))},ge(jd,"_type","stamp"),ge(jd,"_editorType",Te.STAMP);let oA=jd;var Il,qu,Is,kl,Ii,ki,Li,hr,ko,Ku,Xu,xn,oe,Lo,on,tN,uA,hA,dA,Jg;const Ur=class Ur{constructor({uiManager:e,pageIndex:t,div:r,accessibilityManager:s,annotationLayer:i,drawLayer:o,textLayer:a,viewport:l,l10n:c}){I(this,on);I(this,Il);I(this,qu,!1);I(this,Is,null);I(this,kl,null);I(this,Ii,null);I(this,ki,null);I(this,Li,null);I(this,hr,new Map);I(this,ko,!1);I(this,Ku,!1);I(this,Xu,!1);I(this,xn,null);I(this,oe);const u=[...h(Ur,Lo).values()];if(!Ur._initialized){Ur._initialized=!0;for(const f of u)f.initialize(c,e)}e.registerEditorTypes(u),x(this,oe,e),this.pageIndex=t,this.div=r,x(this,Il,s),x(this,Is,i),this.viewport=l,x(this,xn,a),this.drawLayer=o,h(this,oe).addLayer(this)}get isEmpty(){return h(this,hr).size===0}get isInvisible(){return this.isEmpty&&h(this,oe).getMode()===Te.NONE}updateToolbar(e){h(this,oe).updateToolbar(e)}updateMode(e=h(this,oe).getMode()){switch(P(this,on,Jg).call(this),e){case Te.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Te.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Te.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of h(Ur,Lo).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=h(this,xn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(h(this,oe).getMode()!==Te.INK)return;if(!e){for(const r of h(this,hr).values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){h(this,oe).setEditingState(e)}addCommands(e){h(this,oe).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=h(this,Is))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of h(this,hr).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(h(this,oe).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!h(this,Is))return;const t=h(this,Is).getEditableAnnotations();for(const r of t){if(r.hide(),h(this,oe).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;x(this,Xu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of h(this,hr).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(h(this,Is)){const i=h(this,Is).getEditableAnnotations();for(const o of i){const{id:a}=o.data;if(h(this,oe).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(h(this,oe).addChangedExistingAnnotation(l),l.renderAnnotationElement(o),l.show(!1)),o.show()}}P(this,on,Jg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of h(Ur,Lo).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Xu,!1)}getEditableAnnotation(e){var t;return((t=h(this,Is))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){h(this,oe).getActive()!==e&&h(this,oe).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=h(this,xn))!=null&&e.div&&!h(this,ki)&&(x(this,ki,P(this,on,tN).bind(this)),h(this,xn).div.addEventListener("pointerdown",h(this,ki),{signal:h(this,oe)._signal}),h(this,xn).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=h(this,xn))!=null&&e.div&&h(this,ki)&&(h(this,xn).div.removeEventListener("pointerdown",h(this,ki)),x(this,ki,null),h(this,xn).div.classList.remove("highlighting"))}enableClick(){if(h(this,Ii))return;const e=h(this,oe)._signal;x(this,Ii,this.pointerdown.bind(this)),x(this,kl,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",h(this,Ii),{signal:e}),this.div.addEventListener("pointerup",h(this,kl),{signal:e})}disableClick(){h(this,Ii)&&(this.div.removeEventListener("pointerdown",h(this,Ii)),this.div.removeEventListener("pointerup",h(this,kl)),x(this,Ii,null),x(this,kl,null))}attach(e){h(this,hr).set(e.id,e);const{annotationElementId:t}=e;t&&h(this,oe).isDeletedAnnotationElement(t)&&h(this,oe).removeDeletedAnnotationElement(e)}detach(e){var t;h(this,hr).delete(e.id),(t=h(this,Il))==null||t.removePointerInTextLayer(e.contentDiv),!h(this,Xu)&&e.annotationElementId&&h(this,oe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),h(this,oe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,h(this,Ku)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(h(this,oe).addDeletedAnnotationElement(e.annotationElementId),Ve.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),h(this,oe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),h(this,oe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!h(this,Li)&&(e._focusEventsAllowed=!1,x(this,Li,setTimeout(()=>{x(this,Li,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:h(this,oe)._signal}),t.focus())},0))),e._structTreeParentId=(r=h(this,Il))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return h(this,oe).getId()}get _signal(){return h(this,oe)._signal}canCreateNewEmptyEditor(){var e;return(e=h(this,on,uA))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){h(this,oe).updateToolbar(e),h(this,oe).updateMode(e);const{offsetX:r,offsetY:s}=P(this,on,dA).call(this),i=this.getNextId(),o=P(this,on,hA).call(this,{parent:this,id:i,x:r,y:s,uiManager:h(this,oe),isCentered:!0,...t});o&&this.add(o)}deserialize(e){var t;return((t=h(Ur,Lo).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,h(this,oe)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=P(this,on,hA).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:h(this,oe),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(P(this,on,dA).call(this),!0)}setSelected(e){h(this,oe).setSelected(e)}toggleSelected(e){h(this,oe).toggleSelected(e)}isSelected(e){return h(this,oe).isSelected(e)}unselect(e){h(this,oe).unselect(e)}pointerup(e){const{isMac:t}=Hn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&h(this,ko)){if(x(this,ko,!1),!h(this,qu)){x(this,qu,!0);return}if(h(this,oe).getMode()===Te.STAMP){h(this,oe).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(h(this,oe).getMode()===Te.HIGHLIGHT&&this.enableTextSelection(),h(this,ko)){x(this,ko,!1);return}const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;x(this,ko,!0);const r=h(this,oe).getActive();x(this,qu,!r||r.isEmpty())}findNewParent(e,t,r){const s=h(this,oe).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=h(this,oe).getActive())==null?void 0:e.parent)===this&&(h(this,oe).commitOrRemove(),h(this,oe).setActiveEditor(null)),h(this,Li)&&(clearTimeout(h(this,Li)),x(this,Li,null));for(const r of h(this,hr).values())(t=h(this,Il))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,h(this,hr).clear(),h(this,oe).removeLayer(this)}render({viewport:e}){this.viewport=e,Hl(this.div,e);for(const t of h(this,oe).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){h(this,oe).commitOrRemove(),P(this,on,Jg).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Hl(this.div,{rotation:r}),t!==r)for(const s of h(this,hr).values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return h(this,oe).viewParameters.realScale}};Il=new WeakMap,qu=new WeakMap,Is=new WeakMap,kl=new WeakMap,Ii=new WeakMap,ki=new WeakMap,Li=new WeakMap,hr=new WeakMap,ko=new WeakMap,Ku=new WeakMap,Xu=new WeakMap,xn=new WeakMap,oe=new WeakMap,Lo=new WeakMap,on=new WeakSet,tN=function(e){if(h(this,oe).unselectAll(),e.target===h(this,xn).div){const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t)return;h(this,oe).showAllEditors("highlight",!0,!0),h(this,xn).div.classList.add("free"),zv.startHighlighting(this,h(this,oe).direction==="ltr",e),h(this,xn).div.addEventListener("pointerup",()=>{h(this,xn).div.classList.remove("free")},{once:!0,signal:h(this,oe)._signal}),e.preventDefault()}},uA=function(){return h(Ur,Lo).get(h(this,oe).getMode())},hA=function(e){const t=h(this,on,uA);return t?new t.prototype.constructor(e):null},dA=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+s),c=(i+a)/2-e,u=(o+l)/2-t,[f,p]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:f,offsetY:p}},Jg=function(){x(this,Ku,!0);for(const e of h(this,hr).values())e.isEmpty()&&e.remove();x(this,Ku,!1)},ge(Ur,"_initialized",!1),I(Ur,Lo,new Map([$E,ZE,oA,zv].map(e=>[e._editorType,e])));let cA=Ur;var ks,qp,Lt,Mo,Kp,pA,Yl,mA,nN;const Xt=class Xt{constructor({pageIndex:e}){I(this,Yl);I(this,ks,null);I(this,qp,0);I(this,Lt,new Map);I(this,Mo,new Map);this.pageIndex=e}setParent(e){if(!h(this,ks)){x(this,ks,e);return}if(h(this,ks)!==e){if(h(this,Lt).size>0)for(const t of h(this,Lt).values())t.remove(),e.append(t);x(this,ks,e)}}static get _svgFactory(){return ke(this,"_svgFactory",new hS)}highlight(e,t,r,s=!1){const i=tr(this,qp)._++,o=P(this,Yl,mA).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const a=Xt._svgFactory.createElement("defs");o.append(a);const l=Xt._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),s&&h(this,Mo).set(i,l);const u=P(this,Yl,nN).call(this,a,c),f=Xt._svgFactory.createElement("use");return o.append(f),o.setAttribute("fill",t),o.setAttribute("fill-opacity",r),f.setAttribute("href",`#${c}`),h(this,Lt).set(i,o),{id:i,clipPathId:`url(#${u})`}}highlightOutline(e){const t=tr(this,qp)._++,r=P(this,Yl,mA).call(this,e.box);r.classList.add("highlightOutline");const s=Xt._svgFactory.createElement("defs");r.append(s);const i=Xt._svgFactory.createElement("path");s.append(i);const o=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",o),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.free){r.classList.add("free");const u=Xt._svgFactory.createElement("mask");s.append(u),a=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const f=Xt._svgFactory.createElement("rect");u.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Xt._svgFactory.createElement("use");u.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const l=Xt._svgFactory.createElement("use");r.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return r.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),h(this,Lt).set(t,r),t}finalizeLine(e,t){const r=h(this,Mo).get(e);h(this,Mo).delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){h(this,Lt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),h(this,Mo).delete(e)}updatePath(e,t){h(this,Mo).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var r;P(r=Xt,Kp,pA).call(r,h(this,Lt).get(e),t)}show(e,t){h(this,Lt).get(e).classList.toggle("hidden",!t)}rotate(e,t){h(this,Lt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){h(this,Lt).get(e).setAttribute("fill",t)}changeOpacity(e,t){h(this,Lt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){h(this,Lt).get(e).classList.add(t)}removeClass(e,t){h(this,Lt).get(e).classList.remove(t)}remove(e){h(this,ks)!==null&&(h(this,Lt).get(e).remove(),h(this,Lt).delete(e))}destroy(){x(this,ks,null);for(const e of h(this,Lt).values())e.remove();h(this,Lt).clear()}};ks=new WeakMap,qp=new WeakMap,Lt=new WeakMap,Mo=new WeakMap,Kp=new WeakSet,pA=function(e,{x:t=0,y:r=0,width:s=1,height:i=1}={}){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},Yl=new WeakSet,mA=function(e){var r;const t=Xt._svgFactory.create(1,1,!0);return h(this,ks).append(t),t.setAttribute("aria-hidden",!0),P(r=Xt,Kp,pA).call(r,t,e),t},nN=function(e,t){const r=Xt._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Xt._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},I(Xt,Kp);let fA=Xt;var rz=de.AbortException,sz=de.AnnotationEditorLayer,iz=de.AnnotationEditorParamsType,oz=de.AnnotationEditorType,az=de.AnnotationEditorUIManager,rN=de.AnnotationLayer,sN=de.AnnotationMode,lz=de.CMapCompressionType,cz=de.ColorPicker,uz=de.DOMSVGFactory,hz=de.DrawLayer,dz=de.FeatureTest,_S=de.GlobalWorkerOptions,fz=de.ImageKind,pz=de.InvalidPDFException,mz=de.MissingPDFException,gz=de.OPS,vz=de.Outliner,yz=de.PDFDataRangeTransport,_z=de.PDFDateString,wz=de.PDFWorker,Ez=de.PasswordResponses,Az=de.PermissionFlag,bz=de.PixelsPerInch,Sz=de.RenderingCancelledException,iN=de.TextLayer,Tz=de.UnexpectedResponseException,Cz=de.Util,xz=de.VerbosityLevel,Rz=de.XfaLayer,Pz=de.build,Iz=de.createValidAbsoluteUrl,kz=de.fetchData,oN=de.getDocument,Lz=de.getFilenameFromUrl,Mz=de.getPdfFilenameFromUrl,Nz=de.getXfaPageViewport,Dz=de.isDataScheme,Oz=de.isPdfFile,Fz=de.noContextMenu,Vz=de.normalizeUnicode,jz=de.renderTextLayer,Bz=de.setLayerDimensions,Uz=de.shadow,$z=de.updateTextLayer,zz=de.version;const Hz=Object.freeze(Object.defineProperty({__proto__:null,AbortException:rz,AnnotationEditorLayer:sz,AnnotationEditorParamsType:iz,AnnotationEditorType:oz,AnnotationEditorUIManager:az,AnnotationLayer:rN,AnnotationMode:sN,CMapCompressionType:lz,ColorPicker:cz,DOMSVGFactory:uz,DrawLayer:hz,FeatureTest:dz,GlobalWorkerOptions:_S,ImageKind:fz,InvalidPDFException:pz,MissingPDFException:mz,OPS:gz,Outliner:vz,PDFDataRangeTransport:yz,PDFDateString:_z,PDFWorker:wz,PasswordResponses:Ez,PermissionFlag:Az,PixelsPerInch:bz,RenderingCancelledException:Sz,TextLayer:iN,UnexpectedResponseException:Tz,Util:Cz,VerbosityLevel:xz,XfaLayer:Rz,build:Pz,createValidAbsoluteUrl:Iz,fetchData:kz,getDocument:oN,getFilenameFromUrl:Lz,getPdfFilenameFromUrl:Mz,getXfaPageViewport:Nz,isDataScheme:Dz,isPdfFile:Oz,noContextMenu:Fz,normalizeUnicode:Vz,renderTextLayer:jz,setLayerDimensions:Bz,shadow:Uz,updateTextLayer:$z,version:zz},Symbol.toStringTag,{value:"Module"}));var Ut=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},Wz=["onCopy","onCut","onPaste"],Gz=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],qz=["onFocus","onBlur"],Kz=["onInput","onInvalid","onReset","onSubmit"],Xz=["onLoad","onError"],Yz=["onKeyDown","onKeyPress","onKeyUp"],Qz=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Jz=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Zz=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],eH=["onSelect"],tH=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],nH=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],rH=["onScroll"],sH=["onWheel"],iH=["onAnimationStart","onAnimationEnd","onAnimationIteration"],oH=["onTransitionEnd"],aH=["onToggle"],lH=["onChange"],cH=Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut([],Wz,!0),Gz,!0),qz,!0),Kz,!0),Xz,!0),Yz,!0),Qz,!0),Jz,!0),Zz,!0),eH,!0),tH,!0),nH,!0),rH,!0),sH,!0),iH,!0),oH,!0),lH,!0),aH,!0);function aN(n,e){var t={};return cH.forEach(function(r){var s=n[r];s&&(e?t[r]=function(i){return s(i,e(r))}:t[r]=s)}),t}function om(n){var e=!1,t=new Promise(function(r,s){n.then(function(i){return!e&&r(i)}).catch(function(i){return!e&&s(i)})});return{promise:t,cancel:function(){e=!0}}}function lN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=lN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function l_(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=lN(n))&&(r&&(r+=" "),r+=e);return r}var uH="Invariant failed";function Ke(n,e){if(!n)throw new Error(uH)}var hH=function(){},dH=hH;const En=Ay(dH);var Q1=Object.prototype.hasOwnProperty;function J1(n,e,t){for(t of n.keys())if(Xc(t,e))return t}function Xc(n,e){var t,r,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Xc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(s=r,s&&typeof s=="object"&&(s=J1(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(s=r[0],s&&typeof s=="object"&&(s=J1(e,s),!s)||!Xc(r[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(Q1.call(n,t)&&++r&&!Q1.call(e,t)||!(t in e)||!Xc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}const cN=A.createContext(null);function Yc({children:n,type:e}){return N.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const fH="noopener noreferrer nofollow";class pH{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ke(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ke(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Ke(this.pdfDocument),Ke(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ke(Array.isArray(t));const r=t[0];new Promise(s=>{Ke(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(i=>{s(i)}).catch(()=>{Ke(!1)}):typeof r=="number"?s(r):Ke(!1)}).then(s=>{const i=s+1;Ke(this.pdfViewer),Ke(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Ke(this.pdfViewer),Ke(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||fH,e.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Z1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},c_=typeof window<"u",uN=c_&&window.location.protocol==="file:";function mH(n){return typeof n<"u"}function ba(n){return mH(n)&&n!==null}function gH(n){return typeof n=="string"}function vH(n){return n instanceof ArrayBuffer}function yH(n){return Ke(c_),n instanceof Blob}function gA(n){return gH(n)&&/^data:/.test(n)}function ex(n){Ke(gA(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function _H(){return c_&&window.devicePixelRatio||1}const hN="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function tx(){En(!uN,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${hN}`)}function wH(){En(!uN,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${hN}`)}function ql(n){n!=null&&n.cancel&&n.cancel()}function vA(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function EH(n){return n.name==="RenderingCancelledException"}function AH(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}function bH(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function ih(){return A.useReducer(bH,{value:void 0,error:void 0})}var SH=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},nx=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const{PDFDataRangeTransport:TH}=Hz,CH=(n,e)=>{switch(e){case Z1.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case Z1.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function rx(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const xH=A.forwardRef(function(e,t){var{children:r,className:s,error:i="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:u,loading:f="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:g,onLoadProgress:_,onLoadSuccess:w,onPassword:y=CH,onSourceError:E,onSourceSuccess:S,options:R,renderMode:O,rotate:V}=e,C=nx(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[T,k]=ih(),{value:M,error:F}=T,[j,D]=ih(),{value:q,error:re}=j,Z=A.useRef(new pH),W=A.useRef([]),U=A.useRef(void 0),z=A.useRef(void 0);l&&l!==U.current&&rx(l)&&(En(!Xc(l,U.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),U.current=l),R&&R!==z.current&&(En(!Xc(R,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=R);const X=A.useRef({scrollPageIntoView:Ae=>{const{dest:We,pageNumber:ht,pageIndex:rt=ht-1}=Ae;if(m){m({dest:We,pageIndex:rt,pageNumber:ht});return}const hs=W.current[rt];if(hs){hs.scrollIntoView();return}En(!1,`An internal link leading to page ${ht} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});A.useImperativeHandle(t,()=>({linkService:Z,pages:W,viewer:X}),[]);function ce(){S&&S()}function se(){F&&(En(!1,F.toString()),E&&E(F))}function ae(){k({type:"RESET"})}A.useEffect(ae,[l,k]);const Be=A.useCallback(()=>SH(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return gA(l)?{data:ex(l)}:(tx(),{url:l});if(l instanceof TH)return{range:l};if(vH(l))return{data:l};if(c_&&yH(l))return{data:yield AH(l)};if(Ke(typeof l=="object"),Ke(rx(l)),"url"in l&&typeof l.url=="string"){if(gA(l.url)){const{url:Ae}=l,We=nx(l,["url"]),ht=ex(Ae);return Object.assign({data:ht},We)}tx()}return l}),[l]);A.useEffect(()=>{const Ae=om(Be());return Ae.promise.then(We=>{k({type:"RESOLVE",value:We})}).catch(We=>{k({type:"REJECT",error:We})}),()=>{ql(Ae)}},[Be,k]),A.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){se();return}ce()}},[M]);function Ue(){q&&(w&&w(q),W.current=new Array(q.numPages),Z.current.setDocument(q))}function Pe(){re&&(En(!1,re.toString()),g&&g(re))}A.useEffect(function(){D({type:"RESET"})},[D,M]),A.useEffect(function(){if(!M)return;const We=R?Object.assign(Object.assign({},M),R):M,ht=oN(We);_&&(ht.onProgress=_),y&&(ht.onPassword=y);const rt=ht,hs=rt.promise.then(Xs=>{D({type:"RESOLVE",value:Xs})}).catch(Xs=>{rt.destroyed||D({type:"REJECT",error:Xs})});return()=>{hs.finally(()=>rt.destroy())}},[R,D,M]),A.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){Pe();return}Ue()}},[q]),A.useEffect(function(){Z.current.setViewer(X.current),Z.current.setExternalLinkRel(o),Z.current.setExternalLinkTarget(a)},[o,a]);const fe=A.useCallback((Ae,We)=>{W.current[Ae]=We},[]),ut=A.useCallback(Ae=>{delete W.current[Ae]},[]),Je=A.useMemo(()=>({imageResourcesPath:u,linkService:Z.current,onItemClick:m,pdf:q,registerPage:fe,renderMode:O,rotate:V,unregisterPage:ut}),[u,m,q,fe,O,V,ut]),Ie=A.useMemo(()=>aN(C,()=>q),[C,q]);function Zn(){return N.jsx(cN.Provider,{value:Je,children:r})}function Ar(){return l?q==null?N.jsx(Yc,{type:"loading",children:typeof f=="function"?f():f}):q===!1?N.jsx(Yc,{type:"error",children:typeof i=="function"?i():i}):Zn():N.jsx(Yc,{type:"no-data",children:typeof p=="function"?p():p})}return N.jsx("div",Object.assign({className:l_("react-pdf__Document",s),ref:c,style:{"--scale-factor":"1"}},Ie,{children:Ar()}))});function dN(){return A.useContext(cN)}function fN(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(i){t.forEach(function(o){typeof o=="function"?o(i):o&&(o.current=i)})}}const pN=A.createContext(null),mN={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},RH=/^H(\d+)$/;function PH(n){return n in mN}function u_(n){return"children"in n}function gN(n){return u_(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function IH(n){const e={};if(u_(n)){const{role:t}=n,r=t.match(RH);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(PH(t)){const s=mN[t];s&&(e.role=s)}}return e}function vN(n){const e={};if(u_(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),gN(n)){const[t]=n.children;if(t){const r=vN(t);return Object.assign(Object.assign({},e),r)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function kH(n){return n?Object.assign(Object.assign({},IH(n)),vN(n)):null}function yN({className:n,node:e}){const t=A.useMemo(()=>kH(e),[e]),r=A.useMemo(()=>!u_(e)||gN(e)?null:e.children.map((s,i)=>N.jsx(yN,{node:s},i)),[e]);return N.jsx("span",Object.assign({className:n},t,{children:r}))}function h_(){return A.useContext(pN)}function LH(){const n=h_();Ke(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,s]=ih(),{value:i,error:o}=r,{customTextRenderer:a,page:l}=n;function c(){i&&t&&t(i)}function u(){o&&(En(!1,o.toString()),e&&e(o))}return A.useEffect(function(){s({type:"RESET"})},[s,l]),A.useEffect(function(){if(a||!l)return;const p=om(l.getStructTree()),m=p;return p.promise.then(g=>{s({type:"RESOLVE",value:g})}).catch(g=>{s({type:"REJECT",error:g})}),()=>ql(m)},[a,l,s]),A.useEffect(()=>{if(i!==void 0){if(i===!1){u();return}c()}},[i]),i?N.jsx(yN,{className:"react-pdf__Page__structTree structTree",node:i}):null}const sx=sN;function MH(n){const e=h_();Ke(e);const t=Object.assign(Object.assign({},e),n),{_className:r,canvasBackground:s,devicePixelRatio:i=_H(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:c,renderTextLayer:u,rotate:f,scale:p}=t,{canvasRef:m}=n;Ke(l);const g=A.useRef(null);function _(){l&&a&&a(vA(l,p))}function w(R){EH(R)||(En(!1,R.toString()),o&&o(R))}const y=A.useMemo(()=>l.getViewport({scale:p*i,rotation:f}),[i,l,f,p]),E=A.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);A.useEffect(function(){if(!l)return;l.cleanup();const{current:O}=g;if(!O)return;O.width=y.width,O.height=y.height,O.style.width=`${Math.floor(E.width)}px`,O.style.height=`${Math.floor(E.height)}px`,O.style.visibility="hidden";const V={annotationMode:c?sx.ENABLE_FORMS:sx.ENABLE,canvasContext:O.getContext("2d",{alpha:!1}),viewport:y};s&&(V.background=s);const C=l.render(V),T=C;return C.promise.then(()=>{O.style.visibility="",_()}).catch(w),()=>ql(T)},[s,l,c,y,E]);const S=A.useCallback(()=>{const{current:R}=g;R&&(R.width=0,R.height=0)},[]);return A.useEffect(()=>S,[S]),N.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:fN(m,g),style:{display:"block",userSelect:"none"},children:u?N.jsx(LH,{}):null})}function NH(n){return"str"in n}function DH(){const n=h_();Ke(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:l,rotate:c,scale:u}=n;Ke(o);const[f,p]=ih(),{value:m,error:g}=f,_=A.useRef(null),w=A.useRef(void 0);En(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function y(){m&&r&&r(m)}function E(){g&&(En(!1,g.toString()),t&&t(g))}A.useEffect(function(){p({type:"RESET"})},[o,p]),A.useEffect(function(){if(!o)return;const k=om(o.getTextContent()),M=k;return k.promise.then(F=>{p({type:"RESOLVE",value:F})}).catch(F=>{p({type:"REJECT",error:F})}),()=>ql(M)},[o,p]),A.useEffect(()=>{if(m!==void 0){if(m===!1){E();return}y()}},[m]);const S=A.useCallback(()=>{i&&i()},[i]),R=A.useCallback(T=>{En(!1,T.toString()),s&&s(T)},[s]);function O(){const T=w.current;T&&T.classList.add("active")}function V(){const T=w.current;T&&T.classList.remove("active")}const C=A.useMemo(()=>o.getViewport({scale:u,rotation:c}),[o,c,u]);return A.useLayoutEffect(function(){if(!o||!m)return;const{current:k}=_;if(!k)return;k.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),F={container:k,textContentSource:M,viewport:C},j=new iN(F),D=j;return j.render().then(()=>{const q=document.createElement("div");q.className="endOfContent",k.append(q),w.current=q;const re=k.querySelectorAll('[role="presentation"]');if(e){let Z=0;m.items.forEach((W,U)=>{if(!NH(W))return;const z=re[Z];if(!z)return;const X=e(Object.assign({pageIndex:a,pageNumber:l,itemIndex:U},W));z.innerHTML=X,Z+=W.str&&W.hasEOL?2:1})}S()}).catch(R),()=>ql(D)},[e,R,S,o,a,l,m,C]),N.jsx("div",{className:l_("react-pdf__Page__textContent","textLayer"),onMouseUp:V,onMouseDown:O,ref:_})}function OH(){const n=dN(),e=h_();Ke(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:r,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:c,pdf:u,renderForms:f,rotate:p,scale:m=1}=t;Ke(u),Ke(c),Ke(s);const[g,_]=ih(),{value:w,error:y}=g,E=A.useRef(null);En(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){w&&o&&o(w)}function R(){y&&(En(!1,y.toString()),i&&i(y))}A.useEffect(function(){_({type:"RESET"})},[_,c]),A.useEffect(function(){if(!c)return;const k=om(c.getAnnotations()),M=k;return k.promise.then(F=>{_({type:"RESOLVE",value:F})}).catch(F=>{_({type:"REJECT",error:F})}),()=>{ql(M)}},[_,c]),A.useEffect(()=>{if(w!==void 0){if(w===!1){R();return}S()}},[w]);function O(){l&&l()}function V(T){En(!1,`${T}`),a&&a(T)}const C=A.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return A.useEffect(function(){if(!u||!c||!s||!w)return;const{current:k}=E;if(!k)return;const M=C.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:k,l10n:null,page:c,viewport:M},j={annotations:w,annotationStorage:u.annotationStorage,div:k,imageResourcesPath:r,linkService:s,page:c,renderForms:f,viewport:M};k.innerHTML="";try{new rN(F).render(j),O()}catch(D){V(D)}return()=>{}},[w,r,s,c,u,f,C]),N.jsx("div",{className:l_("react-pdf__Page__annotations","annotationLayer"),ref:E})}var FH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const ix=1;function VH(n){const e=dN(),t=Object.assign(Object.assign({},e),n),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:o,children:a,className:l,customRenderer:c,customTextRenderer:u,devicePixelRatio:f,error:p="Failed to load the page.",height:m,inputRef:g,loading:_="Loading page",noData:w="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:E,onGetStructTreeError:S,onGetStructTreeSuccess:R,onGetTextError:O,onGetTextSuccess:V,onLoadError:C,onLoadSuccess:T,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:j,onRenderTextLayerError:D,onRenderTextLayerSuccess:q,pageIndex:re,pageNumber:Z,pdf:W,registerPage:U,renderAnnotationLayer:z=!0,renderForms:X=!1,renderMode:ce="canvas",renderTextLayer:se=!0,rotate:ae,scale:Be=ix,unregisterPage:Ue,width:Pe}=t,fe=FH(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ut,Je]=ih(),{value:Ie,error:Zn}=ut,Ar=A.useRef(null);Ke(W);const Ae=ba(Z)?Z-1:re??null,We=Z??(ba(re)?re+1:null),ht=ae??(Ie?Ie.rotate:null),rt=A.useMemo(()=>{if(!Ie)return null;let dt=1;const Qs=Be??ix;if(Pe||m){const ga=Ie.getViewport({scale:1,rotation:ht});Pe?dt=Pe/ga.width:m&&(dt=m/ga.height)}return Qs*dt},[m,Ie,ht,Be,Pe]);A.useEffect(function(){return()=>{ba(Ae)&&s&&Ue&&Ue(Ae)}},[s,W,Ae,Ue]);function hs(){if(T){if(!Ie||!rt)return;T(vA(Ie,rt))}if(s&&U){if(!ba(Ae)||!Ar.current)return;U(Ae,Ar.current)}}function Xs(){Zn&&(En(!1,Zn.toString()),C&&C(Zn))}A.useEffect(function(){Je({type:"RESET"})},[Je,W,Ae]),A.useEffect(function(){if(!W||!We)return;const Qs=om(W.getPage(We)),ga=Qs;return Qs.promise.then(oc=>{Je({type:"RESOLVE",value:oc})}).catch(oc=>{Je({type:"REJECT",error:oc})}),()=>ql(ga)},[Je,W,We]),A.useEffect(()=>{if(Ie!==void 0){if(Ie===!1){Xs();return}hs()}},[Ie,rt]);const Ys=A.useMemo(()=>Ie&&ba(Ae)&&We&&ba(ht)&&ba(rt)?{_className:r,canvasBackground:i,customTextRenderer:u,devicePixelRatio:f,onGetAnnotationsError:y,onGetAnnotationsSuccess:E,onGetStructTreeError:S,onGetStructTreeSuccess:R,onGetTextError:O,onGetTextSuccess:V,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:j,onRenderTextLayerError:D,onRenderTextLayerSuccess:q,page:Ie,pageIndex:Ae,pageNumber:We,renderForms:X,renderTextLayer:se,rotate:ht,scale:rt}:null,[r,i,u,f,y,E,S,R,O,V,k,M,F,j,D,q,Ie,Ae,We,X,se,ht,rt]),Ch=A.useMemo(()=>aN(fe,()=>Ie&&(rt?vA(Ie,rt):void 0)),[fe,Ie,rt]),ma=`${Ae}@${rt}/${ht}`;function P_(){switch(ce){case"custom":return Ke(c),N.jsx(c,{},`${ma}_custom`);case"none":return null;case"canvas":default:return N.jsx(MH,{canvasRef:o},`${ma}_canvas`)}}function xh(){return se?N.jsx(DH,{},`${ma}_text`):null}function Rh(){return z?N.jsx(OH,{},`${ma}_annotations`):null}function fm(){return N.jsxs(pN.Provider,{value:Ys,children:[P_(),xh(),Rh(),a]})}function Bt(){return We?W===null||Ie===void 0||Ie===null?N.jsx(Yc,{type:"loading",children:typeof _=="function"?_():_}):W===!1||Ie===!1?N.jsx(Yc,{type:"error",children:typeof p=="function"?p():p}):fm():N.jsx(Yc,{type:"no-data",children:typeof w=="function"?w():w})}return N.jsx("div",Object.assign({className:l_(r,l),"data-page-number":We,ref:fN(g,Ar),style:{"--scale-factor":`${rt}`,backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Ch,{children:Bt()}))}wH();_S.workerSrc="pdf.worker.mjs";function _N({isMobile:n}){const[e,t]=A.useState("");A.useEffect(()=>{t("https://fmcjrkoabikaexixbppg.supabase.co/storage/v1/object/public/resume/resume.pdf")},[]);const[r]=A.useState(1),s=()=>{window.open(e,"_blank")};return N.jsx("div",{className:`pdf-div ${n?"mwebPdf":""}`,onClick:s,children:e&&N.jsx(xH,{file:e,children:N.jsx(VH,{pageNumber:r,renderTextLayer:!1,renderAnnotationLayer:!1})})})}_N.propTypes={isMobile:Fs.bool};const jH="/assets/linkedin-DvbM5N3o.png",BH="/assets/instagram-DsqoG5P9.png",UH="/assets/youtube-rHJN1bq4.png",$H="/assets/gmail-DoONwEbf.png",zH="/assets/contact-Ctb_tZ2q.png";function wN({isMobile:n}){return N.jsxs("div",{className:`contact ${n?"contactMweb":""}`,children:[N.jsxs("div",{className:"socialMedia",children:[N.jsxs("h2",{className:"contact-title",children:["contact",N.jsx("span",{children:"."})]}),N.jsxs("p",{className:"contact-description",children:["Get in touch with me via social media ",N.jsx("br",{})," or send me an email."]}),N.jsxs("div",{className:"contact-icons",children:[N.jsx("a",{href:"https://www.linkedin.com/in/g-adarsh-sonu/",target:"_blank",children:N.jsx("img",{src:jH,alt:"LinkedIn"})}),N.jsx("a",{href:"https://instagram.com/g_adarsh_sonu",target:"_blank",children:N.jsx("img",{src:BH,alt:"Instagram"})}),N.jsx("a",{href:"mailto:g.adarsh043@gmail.com",children:N.jsx("img",{src:$H,alt:"Gmail"})}),N.jsx("a",{href:"https://youtube.com/@g_adarsh_sonu",target:"_blank",children:N.jsx("img",{src:UH,alt:"YouTube"})})]})]}),N.jsx("div",{className:"contact-image-container",children:N.jsx("img",{src:zH,alt:"Contact",className:"contact-image"})})]})}wN.propTypes={isMobile:Fs.bool};var ox={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},HH=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},AN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(t[u],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(EN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new WH;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const g=c<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class WH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GH=function(n){const e=EN(n);return AN.encodeByteArray(e,!0)},Hv=function(n){return GH(n).replace(/\./g,"")},qH=function(n){try{return AN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH=()=>KH().__FIREBASE_DEFAULTS__,YH=()=>{if(typeof process>"u"||typeof ox>"u")return;const n=ox.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qH(n[1]);return e&&JSON.parse(e)},wS=()=>{try{return XH()||YH()||QH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},JH=n=>{var e,t;return(t=(e=wS())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},bN=n=>{const e=JH(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},SN=()=>{var n;return(n=wS())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hv(JSON.stringify(t)),Hv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t5(){var n;const e=(n=wS())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n5(){return!t5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function r5(){try{return typeof indexedDB=="object"}catch{return!1}}function s5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="FirebaseError";class rc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=i5,Object.setPrototypeOf(this,rc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,CN.prototype.create)}}class CN{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?o5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new rc(s,a,r)}}function o5(n,e){return n.replace(a5,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const a5=/\{\$([^}]+)}/g;function yA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(ax(i)&&ax(o)){if(!yA(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function ax(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n){return n&&n._delegate?n._delegate:n}class oh{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ZH;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u5(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c5(n){return n===Pa?void 0:n}function u5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new l5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ce||(Ce={}));const d5={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},f5=Ce.INFO,p5={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},m5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=p5[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class RN{constructor(e){this.name=e,this._logLevel=f5,this._logHandler=m5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const g5=(n,e)=>e.some(t=>n instanceof t);let lx,cx;function v5(){return lx||(lx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y5(){return cx||(cx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PN=new WeakMap,_A=new WeakMap,IN=new WeakMap,D0=new WeakMap,ES=new WeakMap;function _5(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(qo(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&PN.set(t,n)}).catch(()=>{}),ES.set(e,n),e}function w5(n){if(_A.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});_A.set(n,e)}let wA={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _A.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function E5(n){wA=n(wA)}function A5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(O0(this),e,...t);return IN.set(r,e.sort?e.sort():[e]),qo(r)}:y5().includes(n)?function(...e){return n.apply(O0(this),e),qo(PN.get(this))}:function(...e){return qo(n.apply(O0(this),e))}}function b5(n){return typeof n=="function"?A5(n):(n instanceof IDBTransaction&&w5(n),g5(n,v5())?new Proxy(n,wA):n)}function qo(n){if(n instanceof IDBRequest)return _5(n);if(D0.has(n))return D0.get(n);const e=b5(n);return e!==n&&(D0.set(n,e),ES.set(e,n)),e}const O0=n=>ES.get(n);function S5(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=qo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(qo(o.result),l.oldVersion,l.newVersion,qo(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const T5=["get","getKey","getAll","getAllKeys","count"],C5=["put","add","delete","clear"],F0=new Map;function ux(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(F0.get(e))return F0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=C5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||T5.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return F0.set(e,i),i}E5(n=>({...n,get:(e,t,r)=>ux(e,t)||n.get(e,t,r),has:(e,t)=>!!ux(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(R5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function R5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const EA="@firebase/app",hx="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new RN("@firebase/app"),P5="@firebase/app-compat",I5="@firebase/analytics-compat",k5="@firebase/analytics",L5="@firebase/app-check-compat",M5="@firebase/app-check",N5="@firebase/auth",D5="@firebase/auth-compat",O5="@firebase/database",F5="@firebase/data-connect",V5="@firebase/database-compat",j5="@firebase/functions",B5="@firebase/functions-compat",U5="@firebase/installations",$5="@firebase/installations-compat",z5="@firebase/messaging",H5="@firebase/messaging-compat",W5="@firebase/performance",G5="@firebase/performance-compat",q5="@firebase/remote-config",K5="@firebase/remote-config-compat",X5="@firebase/storage",Y5="@firebase/storage-compat",Q5="@firebase/firestore",J5="@firebase/vertexai",Z5="@firebase/firestore-compat",e6="firebase",t6="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="[DEFAULT]",n6={[EA]:"fire-core",[P5]:"fire-core-compat",[k5]:"fire-analytics",[I5]:"fire-analytics-compat",[M5]:"fire-app-check",[L5]:"fire-app-check-compat",[N5]:"fire-auth",[D5]:"fire-auth-compat",[O5]:"fire-rtdb",[F5]:"fire-data-connect",[V5]:"fire-rtdb-compat",[j5]:"fire-fn",[B5]:"fire-fn-compat",[U5]:"fire-iid",[$5]:"fire-iid-compat",[z5]:"fire-fcm",[H5]:"fire-fcm-compat",[W5]:"fire-perf",[G5]:"fire-perf-compat",[q5]:"fire-rc",[K5]:"fire-rc-compat",[X5]:"fire-gcs",[Y5]:"fire-gcs-compat",[Q5]:"fire-fst",[Z5]:"fire-fst-compat",[J5]:"fire-vertex","fire-js":"fire-js",[e6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new Map,r6=new Map,bA=new Map;function dx(n,e){try{n.container.addComponent(e)}catch(t){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function cf(n){const e=n.name;if(bA.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;bA.set(e,n);for(const t of Wv.values())dx(t,n);for(const t of r6.values())dx(t,n);return!0}function kN(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ko=new CN("app","Firebase",s6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=t6;function MN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:AA,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ko.create("bad-app-name",{appName:String(s)});if(t||(t=SN()),!t)throw Ko.create("no-options");const i=Wv.get(s);if(i){if(yA(t,i.options)&&yA(r,i.config))return i;throw Ko.create("duplicate-app",{appName:s})}const o=new h5(s);for(const l of bA.values())o.addComponent(l);const a=new i6(t,r,o);return Wv.set(s,a),a}function NN(n=AA){const e=Wv.get(n);if(!e&&n===AA&&SN())return MN();if(!e)throw Ko.create("no-app",{appName:n});return e}function Xo(n,e,t){var r;let s=(r=n6[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(a.join(" "));return}cf(new oh(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="firebase-heartbeat-database",a6=1,uf="firebase-heartbeat-store";let V0=null;function DN(){return V0||(V0=S5(o6,a6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ko.create("idb-open",{originalErrorMessage:n.message})})),V0}async function l6(n){try{const t=(await DN()).transaction(uf),r=await t.objectStore(uf).get(ON(n));return await t.done,r}catch(e){if(e instanceof rc)qi.warn(e.message);else{const t=Ko.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(t.message)}}}async function fx(n,e){try{const r=(await DN()).transaction(uf,"readwrite");await r.objectStore(uf).put(e,ON(n)),await r.done}catch(t){if(t instanceof rc)qi.warn(t.message);else{const r=Ko.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qi.warn(r.message)}}}function ON(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=1024,u6=30*24*60*60*1e3;class h6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new f6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=px();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=u6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=px(),{heartbeatsToSend:r,unsentEntries:s}=d6(this._heartbeatsCache.heartbeats),i=Hv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return qi.warn(t),""}}}function px(){return new Date().toISOString().substring(0,10)}function d6(n,e=c6){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mx(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),mx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class f6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return r5()?s5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return fx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return fx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mx(n){return Hv(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(n){cf(new oh("platform-logger",e=>new x5(e),"PRIVATE")),cf(new oh("heartbeat",e=>new h6(e),"PRIVATE")),Xo(EA,hx,n),Xo(EA,hx,"esm2017"),Xo("fire-js","")}p6("");var m6="firebase",g6="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xo(m6,g6,"app");var gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dl,FN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function k(){}k.prototype=T.prototype,C.D=T.prototype,C.prototype=new k,C.prototype.constructor=C,C.C=function(M,F,j){for(var D=Array(arguments.length-2),q=2;q<arguments.length;q++)D[q-2]=arguments[q];return T.prototype[F].apply(M,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,T,k){k||(k=0);var M=Array(16);if(typeof T=="string")for(var F=0;16>F;++F)M[F]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(F=0;16>F;++F)M[F]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=C.g[0],k=C.g[1],F=C.g[2];var j=C.g[3],D=T+(j^k&(F^j))+M[0]+3614090360&4294967295;T=k+(D<<7&4294967295|D>>>25),D=j+(F^T&(k^F))+M[1]+3905402710&4294967295,j=T+(D<<12&4294967295|D>>>20),D=F+(k^j&(T^k))+M[2]+606105819&4294967295,F=j+(D<<17&4294967295|D>>>15),D=k+(T^F&(j^T))+M[3]+3250441966&4294967295,k=F+(D<<22&4294967295|D>>>10),D=T+(j^k&(F^j))+M[4]+4118548399&4294967295,T=k+(D<<7&4294967295|D>>>25),D=j+(F^T&(k^F))+M[5]+1200080426&4294967295,j=T+(D<<12&4294967295|D>>>20),D=F+(k^j&(T^k))+M[6]+2821735955&4294967295,F=j+(D<<17&4294967295|D>>>15),D=k+(T^F&(j^T))+M[7]+4249261313&4294967295,k=F+(D<<22&4294967295|D>>>10),D=T+(j^k&(F^j))+M[8]+1770035416&4294967295,T=k+(D<<7&4294967295|D>>>25),D=j+(F^T&(k^F))+M[9]+2336552879&4294967295,j=T+(D<<12&4294967295|D>>>20),D=F+(k^j&(T^k))+M[10]+4294925233&4294967295,F=j+(D<<17&4294967295|D>>>15),D=k+(T^F&(j^T))+M[11]+2304563134&4294967295,k=F+(D<<22&4294967295|D>>>10),D=T+(j^k&(F^j))+M[12]+1804603682&4294967295,T=k+(D<<7&4294967295|D>>>25),D=j+(F^T&(k^F))+M[13]+4254626195&4294967295,j=T+(D<<12&4294967295|D>>>20),D=F+(k^j&(T^k))+M[14]+2792965006&4294967295,F=j+(D<<17&4294967295|D>>>15),D=k+(T^F&(j^T))+M[15]+1236535329&4294967295,k=F+(D<<22&4294967295|D>>>10),D=T+(F^j&(k^F))+M[1]+4129170786&4294967295,T=k+(D<<5&4294967295|D>>>27),D=j+(k^F&(T^k))+M[6]+3225465664&4294967295,j=T+(D<<9&4294967295|D>>>23),D=F+(T^k&(j^T))+M[11]+643717713&4294967295,F=j+(D<<14&4294967295|D>>>18),D=k+(j^T&(F^j))+M[0]+3921069994&4294967295,k=F+(D<<20&4294967295|D>>>12),D=T+(F^j&(k^F))+M[5]+3593408605&4294967295,T=k+(D<<5&4294967295|D>>>27),D=j+(k^F&(T^k))+M[10]+38016083&4294967295,j=T+(D<<9&4294967295|D>>>23),D=F+(T^k&(j^T))+M[15]+3634488961&4294967295,F=j+(D<<14&4294967295|D>>>18),D=k+(j^T&(F^j))+M[4]+3889429448&4294967295,k=F+(D<<20&4294967295|D>>>12),D=T+(F^j&(k^F))+M[9]+568446438&4294967295,T=k+(D<<5&4294967295|D>>>27),D=j+(k^F&(T^k))+M[14]+3275163606&4294967295,j=T+(D<<9&4294967295|D>>>23),D=F+(T^k&(j^T))+M[3]+4107603335&4294967295,F=j+(D<<14&4294967295|D>>>18),D=k+(j^T&(F^j))+M[8]+1163531501&4294967295,k=F+(D<<20&4294967295|D>>>12),D=T+(F^j&(k^F))+M[13]+2850285829&4294967295,T=k+(D<<5&4294967295|D>>>27),D=j+(k^F&(T^k))+M[2]+4243563512&4294967295,j=T+(D<<9&4294967295|D>>>23),D=F+(T^k&(j^T))+M[7]+1735328473&4294967295,F=j+(D<<14&4294967295|D>>>18),D=k+(j^T&(F^j))+M[12]+2368359562&4294967295,k=F+(D<<20&4294967295|D>>>12),D=T+(k^F^j)+M[5]+4294588738&4294967295,T=k+(D<<4&4294967295|D>>>28),D=j+(T^k^F)+M[8]+2272392833&4294967295,j=T+(D<<11&4294967295|D>>>21),D=F+(j^T^k)+M[11]+1839030562&4294967295,F=j+(D<<16&4294967295|D>>>16),D=k+(F^j^T)+M[14]+4259657740&4294967295,k=F+(D<<23&4294967295|D>>>9),D=T+(k^F^j)+M[1]+2763975236&4294967295,T=k+(D<<4&4294967295|D>>>28),D=j+(T^k^F)+M[4]+1272893353&4294967295,j=T+(D<<11&4294967295|D>>>21),D=F+(j^T^k)+M[7]+4139469664&4294967295,F=j+(D<<16&4294967295|D>>>16),D=k+(F^j^T)+M[10]+3200236656&4294967295,k=F+(D<<23&4294967295|D>>>9),D=T+(k^F^j)+M[13]+681279174&4294967295,T=k+(D<<4&4294967295|D>>>28),D=j+(T^k^F)+M[0]+3936430074&4294967295,j=T+(D<<11&4294967295|D>>>21),D=F+(j^T^k)+M[3]+3572445317&4294967295,F=j+(D<<16&4294967295|D>>>16),D=k+(F^j^T)+M[6]+76029189&4294967295,k=F+(D<<23&4294967295|D>>>9),D=T+(k^F^j)+M[9]+3654602809&4294967295,T=k+(D<<4&4294967295|D>>>28),D=j+(T^k^F)+M[12]+3873151461&4294967295,j=T+(D<<11&4294967295|D>>>21),D=F+(j^T^k)+M[15]+530742520&4294967295,F=j+(D<<16&4294967295|D>>>16),D=k+(F^j^T)+M[2]+3299628645&4294967295,k=F+(D<<23&4294967295|D>>>9),D=T+(F^(k|~j))+M[0]+4096336452&4294967295,T=k+(D<<6&4294967295|D>>>26),D=j+(k^(T|~F))+M[7]+1126891415&4294967295,j=T+(D<<10&4294967295|D>>>22),D=F+(T^(j|~k))+M[14]+2878612391&4294967295,F=j+(D<<15&4294967295|D>>>17),D=k+(j^(F|~T))+M[5]+4237533241&4294967295,k=F+(D<<21&4294967295|D>>>11),D=T+(F^(k|~j))+M[12]+1700485571&4294967295,T=k+(D<<6&4294967295|D>>>26),D=j+(k^(T|~F))+M[3]+2399980690&4294967295,j=T+(D<<10&4294967295|D>>>22),D=F+(T^(j|~k))+M[10]+4293915773&4294967295,F=j+(D<<15&4294967295|D>>>17),D=k+(j^(F|~T))+M[1]+2240044497&4294967295,k=F+(D<<21&4294967295|D>>>11),D=T+(F^(k|~j))+M[8]+1873313359&4294967295,T=k+(D<<6&4294967295|D>>>26),D=j+(k^(T|~F))+M[15]+4264355552&4294967295,j=T+(D<<10&4294967295|D>>>22),D=F+(T^(j|~k))+M[6]+2734768916&4294967295,F=j+(D<<15&4294967295|D>>>17),D=k+(j^(F|~T))+M[13]+1309151649&4294967295,k=F+(D<<21&4294967295|D>>>11),D=T+(F^(k|~j))+M[4]+4149444226&4294967295,T=k+(D<<6&4294967295|D>>>26),D=j+(k^(T|~F))+M[11]+3174756917&4294967295,j=T+(D<<10&4294967295|D>>>22),D=F+(T^(j|~k))+M[2]+718787259&4294967295,F=j+(D<<15&4294967295|D>>>17),D=k+(j^(F|~T))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(F+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+F&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var k=T-this.blockSize,M=this.B,F=this.h,j=0;j<T;){if(F==0)for(;j<=k;)s(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<T;)if(M[F++]=C.charCodeAt(j++),F==this.blockSize){s(this,M),F=0;break}}else for(;j<T;)if(M[F++]=C[j++],F==this.blockSize){s(this,M),F=0;break}}this.h=F,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var k=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=k&255,k/=256;for(this.u(C),C=Array(16),T=k=0;4>T;++T)for(var M=0;32>M;M+=8)C[k++]=this.g[T]>>>M&255;return C};function i(C,T){var k=a;return Object.prototype.hasOwnProperty.call(k,C)?k[C]:k[C]=T(C)}function o(C,T){this.h=T;for(var k=[],M=!0,F=C.length-1;0<=F;F--){var j=C[F]|0;M&&j==T||(k[F]=j,M=!1)}this.g=k}var a={};function l(C){return-128<=C&&128>C?i(C,function(T){return new o([T|0],0>T?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return w(c(-C));for(var T=[],k=1,M=0;C>=k;M++)T[M]=C/k|0,k*=4294967296;return new o(T,0)}function u(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return w(u(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(T,8)),M=f,F=0;F<C.length;F+=8){var j=Math.min(8,C.length-F),D=parseInt(C.substring(F,F+j),T);8>j?(j=c(Math.pow(T,j)),M=M.j(j).add(c(D))):(M=M.j(k),M=M.add(c(D)))}return M}var f=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(_(this))return-w(this).m();for(var C=0,T=1,k=0;k<this.g.length;k++){var M=this.i(k);C+=(0<=M?M:4294967296+M)*T,T*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(g(this))return"0";if(_(this))return"-"+w(this).toString(C);for(var T=c(Math.pow(C,6)),k=this,M="";;){var F=R(k,T).g;k=y(k,F.j(T));var j=((0<k.g.length?k.g[0]:k.h)>>>0).toString(C);if(k=F,g(k))return j+M;for(;6>j.length;)j="0"+j;M=j+M}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function g(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function _(C){return C.h==-1}n.l=function(C){return C=y(this,C),_(C)?-1:g(C)?0:1};function w(C){for(var T=C.g.length,k=[],M=0;M<T;M++)k[M]=~C.g[M];return new o(k,~C.h).add(p)}n.abs=function(){return _(this)?w(this):this},n.add=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],M=0,F=0;F<=T;F++){var j=M+(this.i(F)&65535)+(C.i(F)&65535),D=(j>>>16)+(this.i(F)>>>16)+(C.i(F)>>>16);M=D>>>16,j&=65535,D&=65535,k[F]=D<<16|j}return new o(k,k[k.length-1]&-2147483648?-1:0)};function y(C,T){return C.add(w(T))}n.j=function(C){if(g(this)||g(C))return f;if(_(this))return _(C)?w(this).j(w(C)):w(w(this).j(C));if(_(C))return w(this.j(w(C)));if(0>this.l(m)&&0>C.l(m))return c(this.m()*C.m());for(var T=this.g.length+C.g.length,k=[],M=0;M<2*T;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(var F=0;F<C.g.length;F++){var j=this.i(M)>>>16,D=this.i(M)&65535,q=C.i(F)>>>16,re=C.i(F)&65535;k[2*M+2*F]+=D*re,E(k,2*M+2*F),k[2*M+2*F+1]+=j*re,E(k,2*M+2*F+1),k[2*M+2*F+1]+=D*q,E(k,2*M+2*F+1),k[2*M+2*F+2]+=j*q,E(k,2*M+2*F+2)}for(M=0;M<T;M++)k[M]=k[2*M+1]<<16|k[2*M];for(M=T;M<2*T;M++)k[M]=0;return new o(k,0)};function E(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function S(C,T){this.g=C,this.h=T}function R(C,T){if(g(T))throw Error("division by zero");if(g(C))return new S(f,f);if(_(C))return T=R(w(C),T),new S(w(T.g),w(T.h));if(_(T))return T=R(C,w(T)),new S(w(T.g),T.h);if(30<C.g.length){if(_(C)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var k=p,M=T;0>=M.l(C);)k=O(k),M=O(M);var F=V(k,1),j=V(M,1);for(M=V(M,2),k=V(k,2);!g(M);){var D=j.add(M);0>=D.l(C)&&(F=F.add(k),j=D),M=V(M,1),k=V(k,1)}return T=y(C,F.j(T)),new S(F,T)}for(F=f;0<=C.l(T);){for(k=Math.max(1,Math.floor(C.m()/T.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),j=c(k),D=j.j(T);_(D)||0<D.l(C);)k-=M,j=c(k),D=j.j(T);g(j)&&(j=p),F=F.add(j),C=y(C,D)}return new S(F,C)}n.A=function(C){return R(this,C).h},n.and=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)&C.i(M);return new o(k,this.h&C.h)},n.or=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)|C.i(M);return new o(k,this.h|C.h)},n.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)^C.i(M);return new o(k,this.h^C.h)};function O(C){for(var T=C.g.length+1,k=[],M=0;M<T;M++)k[M]=C.i(M)<<1|C.i(M-1)>>>31;return new o(k,C.h)}function V(C,T){var k=T>>5;T%=32;for(var M=C.g.length-k,F=[],j=0;j<M;j++)F[j]=0<T?C.i(j+k)>>>T|C.i(j+k+1)<<32-T:C.i(j+k);return new o(F,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Dl=o}).apply(typeof gx<"u"?gx:typeof self<"u"?self:typeof window<"u"?window:{});var ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VN,_d,jN,Zg,SA,BN,UN,$N;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,b){return d==Array.prototype||d==Object.prototype||(d[v]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ng=="object"&&ng];for(var v=0;v<d.length;++v){var b=d[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(d,v){if(v)e:{var b=r;d=d.split(".");for(var L=0;L<d.length-1;L++){var B=d[L];if(!(B in b))break e;b=b[B]}d=d[d.length-1],L=b[d],v=v(L),v!=L&&v!=null&&e(b,d,{configurable:!0,writable:!0,value:v})}}function i(d,v){d instanceof String&&(d+="");var b=0,L=!1,B={next:function(){if(!L&&b<d.length){var $=b++;return{value:v($,d[$]),done:!1}}return L=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(d){return d||function(){return i(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function u(d,v,b){return d.call.apply(d.bind,arguments)}function f(d,v,b){if(!d)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,L),d.apply(v,B)}}return function(){return d.apply(v,arguments)}}function p(d,v,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(d,v){var b=Array.prototype.slice.call(arguments,1);return function(){var L=b.slice();return L.push.apply(L,arguments),d.apply(this,L)}}function g(d,v){function b(){}b.prototype=v.prototype,d.aa=v.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(L,B,$){for(var K=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)K[Ge-2]=arguments[Ge];return v.prototype[B].apply(L,K)}}function _(d){const v=d.length;if(0<v){const b=Array(v);for(let L=0;L<v;L++)b[L]=d[L];return b}return[]}function w(d,v){for(let b=1;b<arguments.length;b++){const L=arguments[b];if(l(L)){const B=d.length||0,$=L.length||0;d.length=B+$;for(let K=0;K<$;K++)d[B+K]=L[K]}else d.push(L)}}class y{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function E(d){return/^[\s\xa0]*$/.test(d)}function S(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(d,v,b){for(const L in d)v.call(b,d[L],L,d)}function C(d,v){for(const b in d)v.call(void 0,d[b],b,d)}function T(d){const v={};for(const b in d)v[b]=d[b];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,v){let b,L;for(let B=1;B<arguments.length;B++){L=arguments[B];for(b in L)d[b]=L[b];for(let $=0;$<k.length;$++)b=k[$],Object.prototype.hasOwnProperty.call(L,b)&&(d[b]=L[b])}}function F(d){var v=1;d=d.split(":");const b=[];for(;0<v&&d.length;)b.push(d.shift()),v--;return d.length&&b.push(d.join(":")),b}function j(d){a.setTimeout(()=>{throw d},0)}function D(){var d=z;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class q{constructor(){this.h=this.g=null}add(v,b){const L=re.get();L.set(v,b),this.h?this.h.next=L:this.g=L,this.h=L}}var re=new y(()=>new Z,d=>d.reset());class Z{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let W,U=!1,z=new q,X=()=>{const d=a.Promise.resolve(void 0);W=()=>{d.then(ce)}};var ce=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(b){j(b)}var v=re;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}U=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,v),a.removeEventListener("test",b,v)}catch{}return d}();function Ue(d,v){if(ae.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,L=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(O){e:{try{R(v.nodeName);var B=!0;break e}catch{}B=!1}B||(v=null)}}else b=="mouseover"?v=d.fromElement:b=="mouseout"&&(v=d.toElement);this.relatedTarget=v,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Pe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ue.aa.h.call(this)}}g(Ue,ae);var Pe={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ut=0;function Je(d,v,b,L,B){this.listener=d,this.proxy=null,this.src=v,this.type=b,this.capture=!!L,this.ha=B,this.key=++ut,this.da=this.fa=!1}function Ie(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Zn(d){this.src=d,this.g={},this.h=0}Zn.prototype.add=function(d,v,b,L,B){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var K=Ae(d,v,L,B);return-1<K?(v=d[K],b||(v.fa=!1)):(v=new Je(v,this.src,$,!!L,B),v.fa=b,d.push(v)),v};function Ar(d,v){var b=v.type;if(b in d.g){var L=d.g[b],B=Array.prototype.indexOf.call(L,v,void 0),$;($=0<=B)&&Array.prototype.splice.call(L,B,1),$&&(Ie(v),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Ae(d,v,b,L){for(var B=0;B<d.length;++B){var $=d[B];if(!$.da&&$.listener==v&&$.capture==!!b&&$.ha==L)return B}return-1}var We="closure_lm_"+(1e6*Math.random()|0),ht={};function rt(d,v,b,L,B){if(Array.isArray(v)){for(var $=0;$<v.length;$++)rt(d,v[$],b,L,B);return null}return b=fm(b),d&&d[fe]?d.K(v,b,c(L)?!!L.capture:!!L,B):hs(d,v,b,!1,L,B)}function hs(d,v,b,L,B,$){if(!v)throw Error("Invalid event type");var K=c(B)?!!B.capture:!!B,Ge=xh(d);if(Ge||(d[We]=Ge=new Zn(d)),b=Ge.add(v,b,L,K,$),b.proxy)return b;if(L=Xs(),b.proxy=L,L.src=d,L.listener=b,d.addEventListener)Be||(B=K),B===void 0&&(B=!1),d.addEventListener(v.toString(),L,B);else if(d.attachEvent)d.attachEvent(ma(v.toString()),L);else if(d.addListener&&d.removeListener)d.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Xs(){function d(b){return v.call(d.src,d.listener,b)}const v=P_;return d}function Ys(d,v,b,L,B){if(Array.isArray(v))for(var $=0;$<v.length;$++)Ys(d,v[$],b,L,B);else L=c(L)?!!L.capture:!!L,b=fm(b),d&&d[fe]?(d=d.i,v=String(v).toString(),v in d.g&&($=d.g[v],b=Ae($,b,L,B),-1<b&&(Ie($[b]),Array.prototype.splice.call($,b,1),$.length==0&&(delete d.g[v],d.h--)))):d&&(d=xh(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Ae(v,b,L,B)),(b=-1<d?v[d]:null)&&Ch(b))}function Ch(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[fe])Ar(v.i,d);else{var b=d.type,L=d.proxy;v.removeEventListener?v.removeEventListener(b,L,d.capture):v.detachEvent?v.detachEvent(ma(b),L):v.addListener&&v.removeListener&&v.removeListener(L),(b=xh(v))?(Ar(b,d),b.h==0&&(b.src=null,v[We]=null)):Ie(d)}}}function ma(d){return d in ht?ht[d]:ht[d]="on"+d}function P_(d,v){if(d.da)d=!0;else{v=new Ue(v,this);var b=d.listener,L=d.ha||d.src;d.fa&&Ch(d),d=b.call(L,v)}return d}function xh(d){return d=d[We],d instanceof Zn?d:null}var Rh="__closure_events_fn_"+(1e9*Math.random()>>>0);function fm(d){return typeof d=="function"?d:(d[Rh]||(d[Rh]=function(v){return d.handleEvent(v)}),d[Rh])}function Bt(){se.call(this),this.i=new Zn(this),this.M=this,this.F=null}g(Bt,se),Bt.prototype[fe]=!0,Bt.prototype.removeEventListener=function(d,v,b,L){Ys(this,d,v,b,L)};function dt(d,v){var b,L=d.F;if(L)for(b=[];L;L=L.F)b.push(L);if(d=d.M,L=v.type||v,typeof v=="string")v=new ae(v,d);else if(v instanceof ae)v.target=v.target||d;else{var B=v;v=new ae(L,d),M(v,B)}if(B=!0,b)for(var $=b.length-1;0<=$;$--){var K=v.g=b[$];B=Qs(K,L,!0,v)&&B}if(K=v.g=d,B=Qs(K,L,!0,v)&&B,B=Qs(K,L,!1,v)&&B,b)for($=0;$<b.length;$++)K=v.g=b[$],B=Qs(K,L,!1,v)&&B}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var b=d.g[v],L=0;L<b.length;L++)Ie(b[L]);delete d.g[v],d.h--}}this.F=null},Bt.prototype.K=function(d,v,b,L){return this.i.add(String(d),v,!1,b,L)},Bt.prototype.L=function(d,v,b,L){return this.i.add(String(d),v,!0,b,L)};function Qs(d,v,b,L){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var B=!0,$=0;$<v.length;++$){var K=v[$];if(K&&!K.da&&K.capture==b){var Ge=K.listener,qt=K.ha||K.src;K.fa&&Ar(d.i,K),B=Ge.call(qt,L)!==!1&&B}}return B&&!L.defaultPrevented}function ga(d,v,b){if(typeof d=="function")b&&(d=p(d,b));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:a.setTimeout(d,v||0)}function oc(d){d.g=ga(()=>{d.g=null,d.i&&(d.i=!1,oc(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class RO extends se{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:oc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ph(d){se.call(this),this.h=d,this.g={}}g(Ph,se);var eT=[];function tT(d){V(d.g,function(v,b){this.g.hasOwnProperty(b)&&Ch(v)},d),d.g={}}Ph.prototype.N=function(){Ph.aa.N.call(this),tT(this)},Ph.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var I_=a.JSON.stringify,PO=a.JSON.parse,IO=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function k_(){}k_.prototype.h=null;function nT(d){return d.h||(d.h=d.i())}function rT(){}var Ih={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function L_(){ae.call(this,"d")}g(L_,ae);function M_(){ae.call(this,"c")}g(M_,ae);var va={},sT=null;function pm(){return sT=sT||new Bt}va.La="serverreachability";function iT(d){ae.call(this,va.La,d)}g(iT,ae);function kh(d){const v=pm();dt(v,new iT(v))}va.STAT_EVENT="statevent";function oT(d,v){ae.call(this,va.STAT_EVENT,d),this.stat=v}g(oT,ae);function Sn(d){const v=pm();dt(v,new oT(v,d))}va.Ma="timingevent";function aT(d,v){ae.call(this,va.Ma,d),this.size=v}g(aT,ae);function Lh(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},v)}function Mh(){this.g=!0}Mh.prototype.xa=function(){this.g=!1};function kO(d,v,b,L,B,$){d.info(function(){if(d.g)if($)for(var K="",Ge=$.split("&"),qt=0;qt<Ge.length;qt++){var Ne=Ge[qt].split("=");if(1<Ne.length){var cn=Ne[0];Ne=Ne[1];var un=cn.split("_");K=2<=un.length&&un[1]=="type"?K+(cn+"="+Ne+"&"):K+(cn+"=redacted&")}}else K=null;else K=$;return"XMLHTTP REQ ("+L+") [attempt "+B+"]: "+v+`
`+b+`
`+K})}function LO(d,v,b,L,B,$,K){d.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+B+"]: "+v+`
`+b+`
`+$+" "+K})}function ac(d,v,b,L){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+NO(d,b)+(L?" "+L:"")})}function MO(d,v){d.info(function(){return"TIMEOUT: "+v})}Mh.prototype.info=function(){};function NO(d,v){if(!d.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var L=b[d];if(!(2>L.length)){var B=L[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var K=1;K<B.length;K++)B[K]=""}}}}return I_(b)}catch{return v}}var mm={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},N_;function gm(){}g(gm,k_),gm.prototype.g=function(){return new XMLHttpRequest},gm.prototype.i=function(){return{}},N_=new gm;function Ji(d,v,b,L){this.j=d,this.i=v,this.l=b,this.R=L||1,this.U=new Ph(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cT}function cT(){this.i=null,this.g="",this.h=!1}var uT={},D_={};function O_(d,v,b){d.L=1,d.v=wm(Js(v)),d.m=b,d.P=!0,hT(d,null)}function hT(d,v){d.F=Date.now(),vm(d),d.A=Js(d.v);var b=d.A,L=d.R;Array.isArray(L)||(L=[String(L)]),TT(b.i,"t",L),d.C=0,b=d.j.J,d.h=new cT,d.g=zT(d.j,b?v:null,!d.m),0<d.O&&(d.M=new RO(p(d.Y,d,d.g),d.O)),v=d.U,b=d.g,L=d.ca;var B="readystatechange";Array.isArray(B)||(B&&(eT[0]=B.toString()),B=eT);for(var $=0;$<B.length;$++){var K=rt(b,B[$],L||v.handleEvent,!1,v.h||v);if(!K)break;v.g[K.key]=K}v=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),kh(),kO(d.i,d.u,d.A,d.l,d.R,d.m)}Ji.prototype.ca=function(d){d=d.target;const v=this.M;v&&Zs(d)==3?v.j():this.Y(d)},Ji.prototype.Y=function(d){try{if(d==this.g)e:{const un=Zs(this.g);var v=this.g.Ba();const uc=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||LT(this.g)))){this.J||un!=4||v==7||(v==8||0>=uc?kh(3):kh(2)),F_(this);var b=this.g.Z();this.X=b;t:if(dT(this)){var L=LT(this.g);d="";var B=L.length,$=Zs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ya(this),Nh(this);var K="";break t}this.h.i=new a.TextDecoder}for(v=0;v<B;v++)this.h.h=!0,d+=this.h.i.decode(L[v],{stream:!($&&v==B-1)});L.length=0,this.h.g+=d,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=b==200,LO(this.i,this.u,this.A,this.l,this.R,un,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,qt=this.g;if((Ge=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ge)){var Ne=Ge;break t}}Ne=null}if(b=Ne)ac(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,V_(this,b);else{this.o=!1,this.s=3,Sn(12),ya(this),Nh(this);break e}}if(this.P){b=!0;let jr;for(;!this.J&&this.C<K.length;)if(jr=DO(this,K),jr==D_){un==4&&(this.s=4,Sn(14),b=!1),ac(this.i,this.l,null,"[Incomplete Response]");break}else if(jr==uT){this.s=4,Sn(15),ac(this.i,this.l,K,"[Invalid Chunk]"),b=!1;break}else ac(this.i,this.l,jr,null),V_(this,jr);if(dT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||K.length!=0||this.h.h||(this.s=1,Sn(16),b=!1),this.o=this.o&&b,!b)ac(this.i,this.l,K,"[Invalid Chunked Response]"),ya(this),Nh(this);else if(0<K.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),H_(cn),cn.M=!0,Sn(11))}}else ac(this.i,this.l,K,null),V_(this,K);un==4&&ya(this),this.o&&!this.J&&(un==4?jT(this.j,this):(this.o=!1,vm(this)))}else JO(this.g),b==400&&0<K.indexOf("Unknown SID")?(this.s=3,Sn(12)):(this.s=0,Sn(13)),ya(this),Nh(this)}}}catch{}finally{}};function dT(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function DO(d,v){var b=d.C,L=v.indexOf(`
`,b);return L==-1?D_:(b=Number(v.substring(b,L)),isNaN(b)?uT:(L+=1,L+b>v.length?D_:(v=v.slice(L,L+b),d.C=L+b,v)))}Ji.prototype.cancel=function(){this.J=!0,ya(this)};function vm(d){d.S=Date.now()+d.I,fT(d,d.I)}function fT(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Lh(p(d.ba,d),v)}function F_(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Ji.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(MO(this.i,this.A),this.L!=2&&(kh(),Sn(17)),ya(this),this.s=2,Nh(this)):fT(this,this.S-d)};function Nh(d){d.j.G==0||d.J||jT(d.j,d)}function ya(d){F_(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,tT(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function V_(d,v){try{var b=d.j;if(b.G!=0&&(b.g==d||j_(b.h,d))){if(!d.K&&j_(b.h,d)&&b.G==3){try{var L=b.Da.g.parse(v)}catch{L=null}if(Array.isArray(L)&&L.length==3){var B=L;if(B[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Cm(b),Sm(b);else break e;z_(b),Sn(18)}}else b.za=B[1],0<b.za-b.T&&37500>B[2]&&b.F&&b.v==0&&!b.C&&(b.C=Lh(p(b.Za,b),6e3));if(1>=gT(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else wa(b,11)}else if((d.K||b.g==d)&&Cm(b),!E(v))for(B=b.Da.g.parse(v),v=0;v<B.length;v++){let Ne=B[v];if(b.T=Ne[0],Ne=Ne[1],b.G==2)if(Ne[0]=="c"){b.K=Ne[1],b.ia=Ne[2];const cn=Ne[3];cn!=null&&(b.la=cn,b.j.info("VER="+b.la));const un=Ne[4];un!=null&&(b.Aa=un,b.j.info("SVER="+b.Aa));const uc=Ne[5];uc!=null&&typeof uc=="number"&&0<uc&&(L=1.5*uc,b.L=L,b.j.info("backChannelRequestTimeoutMs_="+L)),L=b;const jr=d.g;if(jr){const Rm=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rm){var $=L.h;$.g||Rm.indexOf("spdy")==-1&&Rm.indexOf("quic")==-1&&Rm.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(B_($,$.h),$.h=null))}if(L.D){const W_=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;W_&&(L.ya=W_,Ze(L.I,L.D,W_))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),L=b;var K=d;if(L.qa=$T(L,L.J?L.ia:null,L.W),K.K){vT(L.h,K);var Ge=K,qt=L.L;qt&&(Ge.I=qt),Ge.B&&(F_(Ge),vm(Ge)),L.g=K}else FT(L);0<b.i.length&&Tm(b)}else Ne[0]!="stop"&&Ne[0]!="close"||wa(b,7);else b.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?wa(b,7):$_(b):Ne[0]!="noop"&&b.l&&b.l.ta(Ne),b.v=0)}}kh(4)}catch{}}var OO=class{constructor(d,v){this.g=d,this.map=v}};function pT(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mT(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function gT(d){return d.h?1:d.g?d.g.size:0}function j_(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function B_(d,v){d.g?d.g.add(v):d.h=v}function vT(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}pT.prototype.cancel=function(){if(this.i=yT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function yT(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const b of d.g.values())v=v.concat(b.D);return v}return _(d.i)}function FO(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var v=[],b=d.length,L=0;L<b;L++)v.push(d[L]);return v}v=[],b=0;for(L in d)v[b++]=d[L];return v}function VO(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var v=[];d=d.length;for(var b=0;b<d;b++)v.push(b);return v}v=[],b=0;for(const L in d)v[b++]=L;return v}}}function _T(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var b=VO(d),L=FO(d),B=L.length,$=0;$<B;$++)v.call(void 0,L[$],b&&b[$],d)}var wT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jO(d,v){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var L=d[b].indexOf("="),B=null;if(0<=L){var $=d[b].substring(0,L);B=d[b].substring(L+1)}else $=d[b];v($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function _a(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof _a){this.h=d.h,ym(this,d.j),this.o=d.o,this.g=d.g,_m(this,d.s),this.l=d.l;var v=d.i,b=new Fh;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),ET(this,b),this.m=d.m}else d&&(v=String(d).match(wT))?(this.h=!1,ym(this,v[1]||"",!0),this.o=Dh(v[2]||""),this.g=Dh(v[3]||"",!0),_m(this,v[4]),this.l=Dh(v[5]||"",!0),ET(this,v[6]||"",!0),this.m=Dh(v[7]||"")):(this.h=!1,this.i=new Fh(null,this.h))}_a.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Oh(v,AT,!0),":");var b=this.g;return(b||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Oh(v,AT,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Oh(b,b.charAt(0)=="/"?$O:UO,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Oh(b,HO)),d.join("")};function Js(d){return new _a(d)}function ym(d,v,b){d.j=b?Dh(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function _m(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function ET(d,v,b){v instanceof Fh?(d.i=v,WO(d.i,d.h)):(b||(v=Oh(v,zO)),d.i=new Fh(v,d.h))}function Ze(d,v,b){d.i.set(v,b)}function wm(d){return Ze(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Dh(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Oh(d,v,b){return typeof d=="string"?(d=encodeURI(d).replace(v,BO),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function BO(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var AT=/[#\/\?@]/g,UO=/[#\?:]/g,$O=/[#\?]/g,zO=/[#\?@]/g,HO=/#/g;function Fh(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Zi(d){d.g||(d.g=new Map,d.h=0,d.i&&jO(d.i,function(v,b){d.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}n=Fh.prototype,n.add=function(d,v){Zi(this),this.i=null,d=lc(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(v),this.h+=1,this};function bT(d,v){Zi(d),v=lc(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function ST(d,v){return Zi(d),v=lc(d,v),d.g.has(v)}n.forEach=function(d,v){Zi(this),this.g.forEach(function(b,L){b.forEach(function(B){d.call(v,B,L,this)},this)},this)},n.na=function(){Zi(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let L=0;L<v.length;L++){const B=d[L];for(let $=0;$<B.length;$++)b.push(v[L])}return b},n.V=function(d){Zi(this);let v=[];if(typeof d=="string")ST(this,d)&&(v=v.concat(this.g.get(lc(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)v=v.concat(d[b])}return v},n.set=function(d,v){return Zi(this),this.i=null,d=lc(this,d),ST(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function TT(d,v,b){bT(d,v),0<b.length&&(d.i=null,d.g.set(lc(d,v),_(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var L=v[b];const $=encodeURIComponent(String(L)),K=this.V(L);for(L=0;L<K.length;L++){var B=$;K[L]!==""&&(B+="="+encodeURIComponent(String(K[L]))),d.push(B)}}return this.i=d.join("&")};function lc(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function WO(d,v){v&&!d.j&&(Zi(d),d.i=null,d.g.forEach(function(b,L){var B=L.toLowerCase();L!=B&&(bT(this,L),TT(this,B,b))},d)),d.j=v}function GO(d,v){const b=new Mh;if(a.Image){const L=new Image;L.onload=m(eo,b,"TestLoadImage: loaded",!0,v,L),L.onerror=m(eo,b,"TestLoadImage: error",!1,v,L),L.onabort=m(eo,b,"TestLoadImage: abort",!1,v,L),L.ontimeout=m(eo,b,"TestLoadImage: timeout",!1,v,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=d}else v(!1)}function qO(d,v){const b=new Mh,L=new AbortController,B=setTimeout(()=>{L.abort(),eo(b,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:L.signal}).then($=>{clearTimeout(B),$.ok?eo(b,"TestPingServer: ok",!0,v):eo(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),eo(b,"TestPingServer: error",!1,v)})}function eo(d,v,b,L,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),L(b)}catch{}}function KO(){this.g=new IO}function XO(d,v,b){const L=b||"";try{_T(d,function(B,$){let K=B;c(B)&&(K=I_(B)),v.push(L+$+"="+encodeURIComponent(K))})}catch(B){throw v.push(L+"type="+encodeURIComponent("_badmap")),B}}function Em(d){this.l=d.Ub||null,this.j=d.eb||!1}g(Em,k_),Em.prototype.g=function(){return new Am(this.l,this.j)},Em.prototype.i=function(d){return function(){return d}}({});function Am(d,v){Bt.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Am,Bt),n=Am.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,jh(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vh(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,jh(this)),this.g&&(this.readyState=3,jh(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;CT(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function CT(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Vh(this):jh(this),this.readyState==3&&CT(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Vh(this))},n.Qa=function(d){this.g&&(this.response=d,Vh(this))},n.ga=function(){this.g&&Vh(this)};function Vh(d){d.readyState=4,d.l=null,d.j=null,d.v=null,jh(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=v.next();return d.join(`\r
`)};function jh(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Am.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function xT(d){let v="";return V(d,function(b,L){v+=L,v+=":",v+=b,v+=`\r
`}),v}function U_(d,v,b){e:{for(L in b){var L=!1;break e}L=!0}L||(b=xT(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):Ze(d,v,b))}function ft(d){Bt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(ft,Bt);var YO=/^https?$/i,QO=["POST","PUT"];n=ft.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,b,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():N_.g(),this.v=this.o?nT(this.o):nT(N_),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch($){RT(this,$);return}if(d=b||"",b=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var B in L)b.set(B,L[B]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const $ of L.keys())b.set($,L.get($));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),B=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(QO,v,void 0))||L||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,K]of b)this.g.setRequestHeader($,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kT(this),this.u=!0,this.g.send(d),this.u=!1}catch($){RT(this,$)}};function RT(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,PT(d),bm(d)}function PT(d){d.A||(d.A=!0,dt(d,"complete"),dt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,dt(this,"complete"),dt(this,"abort"),bm(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bm(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?IT(this):this.bb())},n.bb=function(){IT(this)};function IT(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Zs(d)!=4||d.Z()!=2)){if(d.u&&Zs(d)==4)ga(d.Ea,0,d);else if(dt(d,"readystatechange"),Zs(d)==4){d.h=!1;try{const K=d.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var L;if(L=K===0){var B=String(d.D).match(wT)[1]||null;!B&&a.self&&a.self.location&&(B=a.self.location.protocol.slice(0,-1)),L=!YO.test(B?B.toLowerCase():"")}b=L}if(b)dt(d,"complete"),dt(d,"success");else{d.m=6;try{var $=2<Zs(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",PT(d)}}finally{bm(d)}}}}function bm(d,v){if(d.g){kT(d);const b=d.g,L=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||dt(d,"ready");try{b.onreadystatechange=L}catch{}}}function kT(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Zs(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Zs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),PO(v)}};function LT(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function JO(d){const v={};d=(d.g&&2<=Zs(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<d.length;L++){if(E(d[L]))continue;var b=F(d[L]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=v[B]||[];v[B]=$,$.push(b)}C(v,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bh(d,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||v}function MT(d){this.Aa=0,this.i=[],this.j=new Mh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bh("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bh("baseRetryDelayMs",5e3,d),this.cb=Bh("retryDelaySeedMs",1e4,d),this.Wa=Bh("forwardChannelMaxRetries",2,d),this.wa=Bh("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new pT(d&&d.concurrentRequestLimit),this.Da=new KO,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=MT.prototype,n.la=8,n.G=1,n.connect=function(d,v,b,L){Sn(0),this.W=d,this.H=v||{},b&&L!==void 0&&(this.H.OSID=b,this.H.OAID=L),this.F=this.X,this.I=$T(this,null,this.W),Tm(this)};function $_(d){if(NT(d),d.G==3){var v=d.U++,b=Js(d.I);if(Ze(b,"SID",d.K),Ze(b,"RID",v),Ze(b,"TYPE","terminate"),Uh(d,b),v=new Ji(d,d.j,v),v.L=2,v.v=wm(Js(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=v.v,b=!0),b||(v.g=zT(v.j,null),v.g.ea(v.v)),v.F=Date.now(),vm(v)}UT(d)}function Sm(d){d.g&&(H_(d),d.g.cancel(),d.g=null)}function NT(d){Sm(d),d.u&&(a.clearTimeout(d.u),d.u=null),Cm(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Tm(d){if(!mT(d.h)&&!d.s){d.s=!0;var v=d.Ga;W||X(),U||(W(),U=!0),z.add(v,d),d.B=0}}function ZO(d,v){return gT(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Lh(p(d.Ga,d,v),BT(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const B=new Ji(this,this.j,d);let $=this.o;if(this.S&&($?($=T($),M($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var L=this.i[b];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(v+=L,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=OT(this,B,v),b=Js(this.I),Ze(b,"RID",d),Ze(b,"CVER",22),this.D&&Ze(b,"X-HTTP-Session-Id",this.D),Uh(this,b),$&&(this.O?v="headers="+encodeURIComponent(String(xT($)))+"&"+v:this.m&&U_(b,this.m,$)),B_(this.h,B),this.Ua&&Ze(b,"TYPE","init"),this.P?(Ze(b,"$req",v),Ze(b,"SID","null"),B.T=!0,O_(B,b,null)):O_(B,b,v),this.G=2}}else this.G==3&&(d?DT(this,d):this.i.length==0||mT(this.h)||DT(this))};function DT(d,v){var b;v?b=v.l:b=d.U++;const L=Js(d.I);Ze(L,"SID",d.K),Ze(L,"RID",b),Ze(L,"AID",d.T),Uh(d,L),d.m&&d.o&&U_(L,d.m,d.o),b=new Ji(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),v&&(d.i=v.D.concat(d.i)),v=OT(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),B_(d.h,b),O_(b,L,v)}function Uh(d,v){d.H&&V(d.H,function(b,L){Ze(v,L,b)}),d.l&&_T({},function(b,L){Ze(v,L,b)})}function OT(d,v,b){b=Math.min(d.i.length,b);var L=d.l?p(d.l.Na,d.l,d):null;e:{var B=d.i;let $=-1;for(;;){const K=["count="+b];$==-1?0<b?($=B[0].g,K.push("ofs="+$)):$=0:K.push("ofs="+$);let Ge=!0;for(let qt=0;qt<b;qt++){let Ne=B[qt].g;const cn=B[qt].map;if(Ne-=$,0>Ne)$=Math.max(0,B[qt].g-100),Ge=!1;else try{XO(cn,K,"req"+Ne+"_")}catch{L&&L(cn)}}if(Ge){L=K.join("&");break e}}}return d=d.i.splice(0,b),v.D=d,L}function FT(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;W||X(),U||(W(),U=!0),z.add(v,d),d.v=0}}function z_(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Lh(p(d.Fa,d),BT(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,VT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Lh(p(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Sn(10),Sm(this),VT(this))};function H_(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function VT(d){d.g=new Ji(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=Js(d.qa);Ze(v,"RID","rpc"),Ze(v,"SID",d.K),Ze(v,"AID",d.T),Ze(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ze(v,"TO",d.ja),Ze(v,"TYPE","xmlhttp"),Uh(d,v),d.m&&d.o&&U_(v,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=wm(Js(v)),b.m=null,b.P=!0,hT(b,d)}n.Za=function(){this.C!=null&&(this.C=null,Sm(this),z_(this),Sn(19))};function Cm(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function jT(d,v){var b=null;if(d.g==v){Cm(d),H_(d),d.g=null;var L=2}else if(j_(d.h,v))b=v.D,vT(d.h,v),L=1;else return;if(d.G!=0){if(v.o)if(L==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var B=d.B;L=pm(),dt(L,new aT(L,b)),Tm(d)}else FT(d);else if(B=v.s,B==3||B==0&&0<v.X||!(L==1&&ZO(d,v)||L==2&&z_(d)))switch(b&&0<b.length&&(v=d.h,v.i=v.i.concat(b)),B){case 1:wa(d,5);break;case 4:wa(d,10);break;case 3:wa(d,6);break;default:wa(d,2)}}}function BT(d,v){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*v}function wa(d,v){if(d.j.info("Error code "+v),v==2){var b=p(d.fb,d),L=d.Xa;const B=!L;L=new _a(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ym(L,"https"),wm(L),B?GO(L.toString(),b):qO(L.toString(),b)}else Sn(2);d.G=0,d.l&&d.l.sa(v),UT(d),NT(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Sn(2)):(this.j.info("Failed to ping google.com"),Sn(1))};function UT(d){if(d.G=0,d.ka=[],d.l){const v=yT(d.h);(v.length!=0||d.i.length!=0)&&(w(d.ka,v),w(d.ka,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.ra()}}function $T(d,v,b){var L=b instanceof _a?Js(b):new _a(b);if(L.g!="")v&&(L.g=v+"."+L.g),_m(L,L.s);else{var B=a.location;L=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;var $=new _a(null);L&&ym($,L),v&&($.g=v),B&&_m($,B),b&&($.l=b),L=$}return b=d.D,v=d.ya,b&&v&&Ze(L,b,v),Ze(L,"VER",d.la),Uh(d,L),L}function zT(d,v,b){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new ft(new Em({eb:b})):new ft(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function HT(){}n=HT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xm(){}xm.prototype.g=function(d,v){return new er(d,v)};function er(d,v){Bt.call(this),this.g=new MT(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!E(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!E(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new cc(this)}g(er,Bt),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){$_(this.g)},er.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=I_(d),d=b);v.i.push(new OO(v.Ya++,d)),v.G==3&&Tm(v)},er.prototype.N=function(){this.g.l=null,delete this.j,$_(this.g),delete this.g,er.aa.N.call(this)};function WT(d){L_.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const b in v){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}g(WT,L_);function GT(){M_.call(this),this.status=1}g(GT,M_);function cc(d){this.g=d}g(cc,HT),cc.prototype.ua=function(){dt(this.g,"a")},cc.prototype.ta=function(d){dt(this.g,new WT(d))},cc.prototype.sa=function(d){dt(this.g,new GT)},cc.prototype.ra=function(){dt(this.g,"b")},xm.prototype.createWebChannel=xm.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,$N=function(){return new xm},UN=function(){return pm()},BN=va,SA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mm.NO_ERROR=0,mm.TIMEOUT=8,mm.HTTP_ERROR=6,Zg=mm,lT.COMPLETE="complete",jN=lT,rT.EventType=Ih,Ih.OPEN="a",Ih.CLOSE="b",Ih.ERROR="c",Ih.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,_d=rT,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,VN=ft}).apply(typeof ng<"u"?ng:typeof self<"u"?self:typeof window<"u"?window:{});const vx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new RN("@firebase/firestore");function bc(){return Kl.logLevel}function ee(n,...e){if(Kl.logLevel<=Ce.DEBUG){const t=e.map(AS);Kl.debug(`Firestore (${Eh}): ${n}`,...t)}}function Ki(n,...e){if(Kl.logLevel<=Ce.ERROR){const t=e.map(AS);Kl.error(`Firestore (${Eh}): ${n}`,...t)}}function ah(n,...e){if(Kl.logLevel<=Ce.WARN){const t=e.map(AS);Kl.warn(`Firestore (${Eh}): ${n}`,...t)}}function AS(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n="Unexpected state"){const e=`FIRESTORE (${Eh}) INTERNAL ASSERTION FAILED: `+n;throw Ki(e),new Error(e)}function lt(n,e){n||ve()}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends rc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class v6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}}class y6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _6{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new Ol;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ol,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ol)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string"),new zN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new yn(e)}}class w6{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class E6{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new w6(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){lt(this.o===void 0);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt(typeof t.token=="string"),this.R=t.token,new A6(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=S6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%e.length))}return r}}function xe(n,e){return n<e?-1:n>e?1:0}function lh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new Yn(0,0))}static max(){return new me(new Yn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(),r===void 0?r=e.length-t:r>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return hf.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=e.get(s),o=t.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gt extends hf{construct(e,t,r){return new gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new gt(t)}static emptyPath(){return new gt([])}}const C6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends hf{construct(e,t,r){return new In(e,t,r)}static isValidIdentifier(e){return C6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new le(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new le(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new le(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(gt.fromString(e))}static fromName(e){return new he(gt.fromString(e).popFirst(5))}static empty(){return new he(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new gt(e.slice()))}}function x6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=me.fromTimestamp(r===1e9?new Yn(t+1,0):new Yn(t,r));return new ra(s,he.empty(),e)}function R6(n){return new ra(n.readTime,n.key,-1)}class ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ra(me.min(),he.empty(),-1)}static max(){return new ra(me.max(),he.empty(),-1)}}function P6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==I6)throw n;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):H.reject(t)}static resolve(e){return new H((t,r)=>{t(e)})}static reject(e){return new H((t,r)=>{r(e)})}static waitFor(e){return new H((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},l=>r(l))}),o=!0,i===s&&t()})}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next(s=>s?H.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new H((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,t){return new H((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}function L6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ah(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}f_.oe=-1;function p_(n){return n==null}function TA(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yx(e)),e=N6(n.get(t),e);return yx(e)}function N6(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case"":t+="";break;default:t+=i}}return t}function yx(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function am(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function D6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rg(this.root,e,this.comparator,!1)}getReverseIterator(){return new rg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rg(this.root,e,this.comparator,!0)}}class rg{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??rn.RED,this.left=s??rn.EMPTY,this.right=i??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new rn(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return rn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,r,s,i){return this}insert(e,t,r){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wx(this.data.getIterator())}getIteratorFrom(e){return new wx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class wx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Fo([])}unionWith(e){let t=new jt(In.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new HN("Invalid base64 string: "+i):i}}(e);return new ln(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const O6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(n){if(lt(!!n),typeof n=="string"){let e=0;const t=O6.exec(n);if(lt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ia(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function m_(n){const e=n.mapValue.fields.__previous_value__;return bS(e)?m_(e):e}function df(n){const e=sa(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,t,r,s,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ff{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ff("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ff&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bS(n)?4:j6(n)?9007199254740991:V6(n)?10:11:ve()}function Hs(n,e){if(n===e)return!0;const t=oa(n);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return df(n).isEqual(df(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=sa(s.timestampValue),a=sa(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return ia(s.bytesValue).isEqual(ia(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return _t(s.geoPointValue.latitude)===_t(i.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return _t(s.integerValue)===_t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=_t(s.doubleValue),a=_t(i.doubleValue);return o===a?TA(o)===TA(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return lh(n.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(_x(o)!==_x(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Hs(o[l],a[l])))return!1;return!0}(n,e);default:return ve()}}function pf(n,e){return(n.values||[]).find(t=>Hs(t,e))!==void 0}function ch(n,e){if(n===e)return 0;const t=oa(n),r=oa(e);if(t!==r)return xe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=_t(i.integerValue||i.doubleValue),l=_t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Ex(n.timestampValue,e.timestampValue);case 4:return Ex(df(n),df(e));case 5:return xe(n.stringValue,e.stringValue);case 6:return function(i,o){const a=ia(i),l=ia(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=xe(a[c],l[c]);if(u!==0)return u}return xe(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=xe(_t(i.latitude),_t(o.latitude));return a!==0?a:xe(_t(i.longitude),_t(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Ax(n.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const f=i.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,g=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=xe(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:Ax(m,g)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===sg.mapValue&&o===sg.mapValue)return 0;if(i===sg.mapValue)return 1;if(o===sg.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=xe(l[f],u[f]);if(p!==0)return p;const m=ch(a[l[f]],c[u[f]]);if(m!==0)return m}return xe(l.length,u.length)}(n.mapValue,e.mapValue);default:throw ve()}}function Ex(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xe(n,e);const t=sa(n),r=sa(e),s=xe(t.seconds,r.seconds);return s!==0?s:xe(t.nanos,r.nanos)}function Ax(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=ch(t[s],r[s]);if(i)return i}return xe(t.length,r.length)}function uh(n){return CA(n)}function CA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=sa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ia(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=CA(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${CA(t.fields[o])}`;return s+"}"}(n.mapValue):ve()}function ev(n){switch(oa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=m_(n);return e?16+ev(e):16;case 5:return 2*n.stringValue.length;case 6:return ia(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ev(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return am(r.fields,(i,o)=>{s+=i.length+ev(o)}),s}(n.mapValue);default:throw ve()}}function xA(n){return!!n&&"integerValue"in n}function SS(n){return!!n&&"arrayValue"in n}function bx(n){return!!n&&"nullValue"in n}function Sx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function j0(n){return!!n&&"mapValue"in n}function V6(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Dd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return am(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Dd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function j6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.value=e}static empty(){return new Ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!j0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dd(t)}setAll(e){let t=In.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=Dd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());j0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];j0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){am(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ns(Dd(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wn(e,0,me.min(),me.min(),me.min(),Ns.empty(),0)}static newFoundDocument(e,t,r,s){return new wn(e,1,t,me.min(),r,s,0)}static newNoDocument(e,t){return new wn(e,2,t,me.min(),me.min(),Ns.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,me.min(),me.min(),Ns.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t){this.position=e,this.inclusive=t}}function Tx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=ch(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,t="asc"){this.field=e,this.dir=t}}function B6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{}class Ot extends WN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $6(e,t,r):t==="array-contains"?new W6(e,r):t==="in"?new G6(e,r):t==="not-in"?new q6(e,r):t==="array-contains-any"?new K6(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new z6(e,r):new H6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ch(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(ch(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ws extends WN{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ws(e,t)}matches(e){return GN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function GN(n){return n.op==="and"}function qN(n){return U6(n)&&GN(n)}function U6(n){for(const e of n.filters)if(e instanceof Ws)return!1;return!0}function RA(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+uh(n.value);if(qN(n))return n.filters.map(e=>RA(e)).join(",");{const e=n.filters.map(t=>RA(t)).join(",");return`${n.op}(${e})`}}function KN(n,e){return n instanceof Ot?function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&Hs(r.value,s.value)}(n,e):n instanceof Ws?function(r,s){return s instanceof Ws&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&KN(o,s.filters[a]),!0):!1}(n,e):void ve()}function XN(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${uh(t.value)}`}(n):n instanceof Ws?function(t){return t.op.toString()+" {"+t.getFilters().map(XN).join(" ,")+"}"}(n):"Filter"}class $6 extends Ot{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class z6 extends Ot{constructor(e,t){super(e,"in",t),this.keys=YN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class H6 extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=YN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class W6 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return SS(t)&&pf(t.arrayValue,this.value)}}class G6 extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pf(this.value.arrayValue,t)}}class q6 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(pf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!pf(this.value.arrayValue,t)}}class K6 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!SS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function xx(n,e=null,t=[],r=[],s=null,i=null,o=null){return new X6(n,e,t,r,s,i,o)}function TS(n){const e=Re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>RA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),p_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uh(r)).join(",")),e.ue=t}return e.ue}function CS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!B6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cx(n.startAt,e.startAt)&&Cx(n.endAt,e.endAt)}function PA(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Y6(n,e,t,r,s,i,o,a){return new g_(n,e,t,r,s,i,o,a)}function QN(n){return new g_(n)}function Rx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Q6(n){return n.collectionGroup!==null}function Od(n){const e=Re(n);if(e.ce===null){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(In.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new qv(i,r))}),t.has(In.keyField().canonicalString())||e.ce.push(new qv(In.keyField(),r))}return e.ce}function Vs(n){const e=Re(n);return e.le||(e.le=J6(e,Od(n))),e.le}function J6(n,e){if(n.limitType==="F")return xx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qv(s.field,i)});const t=n.endAt?new Gv(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gv(n.startAt.position,n.startAt.inclusive):null;return xx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function IA(n,e,t){return new g_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function v_(n,e){return CS(Vs(n),Vs(e))&&n.limitType===e.limitType}function JN(n){return`${TS(Vs(n))}|lt:${n.limitType}`}function Sc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>XN(s)).join(", ")}]`),p_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>uh(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>uh(s)).join(",")),`Target(${r})`}(Vs(n))}; limitType=${n.limitType})`}function y_(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of Od(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Tx(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Od(r),s)||r.endAt&&!function(o,a,l){const c=Tx(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Od(r),s))}(n,e)}function Z6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZN(n){return(e,t)=>{let r=!1;for(const s of Od(n)){const i=e9(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function e9(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ch(l,c):ve()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){am(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return D6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=new At(he.comparator);function aa(){return t9}const eD=new At(he.comparator);function wd(...n){let e=eD;for(const t of n)e=e.insert(t.key,t);return e}function n9(n){let e=eD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oa(){return Fd()}function tD(){return Fd()}function Fd(){return new sc(n=>n.toString(),(n,e)=>n.isEqual(e))}const r9=new jt(he.comparator);function Le(...n){let e=r9;for(const t of n)e=e.add(t);return e}const s9=new jt(xe);function i9(){return s9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:TA(e)?"-0":e}}function a9(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this._=void 0}}function l9(n,e,t){return n instanceof kA?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bS(i)&&(i=m_(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Kv?nD(n,e):n instanceof Xv?rD(n,e):function(s,i){const o=u9(s,i),a=Px(o)+Px(s.Pe);return xA(o)&&xA(s.Pe)?a9(a):o9(s.serializer,a)}(n,e)}function c9(n,e,t){return n instanceof Kv?nD(n,e):n instanceof Xv?rD(n,e):t}function u9(n,e){return n instanceof LA?function(r){return xA(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class kA extends __{}class Kv extends __{constructor(e){super(),this.elements=e}}function nD(n,e){const t=sD(e);for(const r of n.elements)t.some(s=>Hs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Xv extends __{constructor(e){super(),this.elements=e}}function rD(n,e){let t=sD(e);for(const r of n.elements)t=t.filter(s=>!Hs(s,r));return{arrayValue:{values:t}}}class LA extends __{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Px(n){return _t(n.integerValue||n.doubleValue)}function sD(n){return SS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function h9(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Kv&&s instanceof Kv||r instanceof Xv&&s instanceof Xv?lh(r.elements,s.elements,Hs):r instanceof LA&&s instanceof LA?Hs(r.Pe,s.Pe):r instanceof kA&&s instanceof kA}(n.transform,e.transform)}class Fl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fl}static exists(e){return new Fl(void 0,e)}static updateTime(e){return new Fl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class xS{}function iD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new f9(n.key,Fl.none()):new RS(n.key,n.data,Fl.none());{const t=n.data,r=Ns.empty();let s=new jt(In.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new w_(n.key,r,new Fo(s.toArray()),Fl.none())}}function d9(n,e,t){n instanceof RS?function(s,i,o){const a=s.value.clone(),l=kx(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof w_?function(s,i,o){if(!tv(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=kx(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(oD(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Vd(n,e,t,r){return n instanceof RS?function(i,o,a,l){if(!tv(i.precondition,o))return a;const c=i.value.clone(),u=Lx(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof w_?function(i,o,a,l){if(!tv(i.precondition,o))return a;const c=Lx(i.fieldTransforms,l,o),u=o.data;return u.setAll(oD(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(i,o,a){return tv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Ix(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&lh(r,s,(i,o)=>h9(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class RS extends xS{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class w_ extends xS{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function oD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kx(n,e,t){const r=new Map;lt(n.length===t.length);for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,c9(o,a,t[s]))}return r}function Lx(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,l9(i,o,e))}return r}class f9 extends xS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&d9(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tD();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const l=iD(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&lh(this.mutations,e.mutations,(t,r)=>Ix(t,r))&&lh(this.baseMutations,e.baseMutations,(t,r)=>Ix(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Se;function aD(n){if(n===void 0)return Ki("GRPC error has no .code"),Y.UNKNOWN;switch(n){case St.OK:return Y.OK;case St.CANCELLED:return Y.CANCELLED;case St.UNKNOWN:return Y.UNKNOWN;case St.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case St.INTERNAL:return Y.INTERNAL;case St.UNAVAILABLE:return Y.UNAVAILABLE;case St.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case St.NOT_FOUND:return Y.NOT_FOUND;case St.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case St.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case St.ABORTED:return Y.ABORTED;case St.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case St.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case St.DATA_LOSS:return Y.DATA_LOSS;default:return ve()}}(Se=St||(St={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=new Dl([4294967295,4294967295],0);function Mx(n){const e=v9().encode(n),t=new FN;return t.update(e),new Uint8Array(t.digest())}function Nx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Dl([t,r],0),new Dl([s,i],0)]}class PS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ed(`Invalid padding: ${t}`);if(r<0)throw new Ed(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ed(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ed(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Dl.fromNumber(this.Te)}Ee(e,t,r){let s=e.add(t.multiply(Dl.fromNumber(r)));return s.compare(y9)===1&&(s=new Dl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Mx(e),[r,s]=Nx(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new PS(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=Mx(e),[r,s]=Nx(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,lm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new E_(me.min(),s,new At(xe),aa(),Le())}}class lm{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new lm(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class lD{constructor(e,t){this.targetId=e,this.me=t}}class cD{constructor(e,t,r=ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Dx{constructor(){this.fe=0,this.ge=Ox(),this.pe=ln.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),r=Le();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ve()}}),new lm(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Ox()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _9{constructor(e){this.Le=e,this.Be=new Map,this.ke=aa(),this.qe=ig(),this.Qe=ig(),this.Ke=new At(xe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.me.count,s=this.Ye(t);if(s){const i=s.target;if(PA(i))if(r===0){const o=new he(i.path);this.We(t,o,wn.newNoDocument(o,me.min()))}else lt(r===1);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=ia(r).toUint8Array()}catch(l){if(l instanceof HN)return ah("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new PS(o,s,i)}catch(l){return ah(l instanceof Ed?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(t,i,null),s++)}),s}it(e){const t=new Map;this.Be.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&PA(a.target)){const l=new he(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,wn.newNoDocument(l,e))}i.be&&(t.set(o,i.ve()),i.Ce())}});let r=Le();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new E_(e,t,this.Ke,this.ke,r);return this.ke=aa(),this.qe=ig(),this.Qe=ig(),this.Ke=new At(xe),s}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Dx,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new jt(xe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new jt(xe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Dx),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ig(){return new At(he.comparator)}function Ox(){return new At(he.comparator)}const w9={asc:"ASCENDING",desc:"DESCENDING"},E9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A9={and:"AND",or:"OR"};class b9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function MA(n,e){return n.useProto3Json||p_(e)?e:{value:e}}function S9(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T9(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Qc(n){return lt(!!n),me.fromTimestamp(function(t){const r=sa(t);return new Yn(r.seconds,r.nanos)}(n))}function C9(n,e){return NA(n,e).canonicalString()}function NA(n,e){const t=function(s){return new gt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function uD(n){const e=gt.fromString(n);return lt(mD(e)),e}function B0(n,e){const t=uD(e);if(t.get(1)!==n.databaseId.projectId)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(dD(t))}function hD(n,e){return C9(n.databaseId,e)}function x9(n){const e=uD(n);return e.length===4?gt.emptyPath():dD(e)}function Fx(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dD(n){return lt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function R9(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(lt(u===void 0||typeof u=="string"),ln.fromBase64String(u||"")):(lt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ln.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Y.UNKNOWN:aD(c.code);return new le(u,c.message||"")}(o);t=new cD(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=B0(n,r.document.name),i=Qc(r.document.updateTime),o=r.document.createTime?Qc(r.document.createTime):me.min(),a=new Ns({mapValue:{fields:r.document.fields}}),l=wn.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new nv(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=B0(n,r.document),i=r.readTime?Qc(r.readTime):me.min(),o=wn.newNoDocument(s,i),a=r.removedTargetIds||[];t=new nv([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=B0(n,r.document),i=r.removedTargetIds||[];t=new nv([],i,s,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new g9(s,i),a=r.targetId;t=new lD(a,o)}}return t}function P9(n,e){return{documents:[hD(n,e.path)]}}function I9(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hD(n,s);const i=function(c){if(c.length!==0)return pD(Ws.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Tc(p.field),direction:M9(p.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=MA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:t,parent:s}}function k9(n){let e=x9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){lt(r===1);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];t.where&&(i=function(f){const p=fD(f);return p instanceof Ws&&qN(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(p=>function(g){return new qv(Cc(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,p_(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Gv(m,p)}(t.startAt));let c=null;return t.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Gv(m,p)}(t.endAt)),Y6(e,s,o,i,a,"F",l,c)}function L9(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fD(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Cc(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Cc(t.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cc(t.unaryFilter.field);return Ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Cc(t.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Cc(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ws.create(t.compositeFilter.filters.map(r=>fD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(n):ve()}function M9(n){return w9[n]}function N9(n){return E9[n]}function D9(n){return A9[n]}function Tc(n){return{fieldPath:n.canonicalString()}}function Cc(n){return In.fromServerFormat(n.fieldPath)}function pD(n){return n instanceof Ot?function(t){if(t.op==="=="){if(Sx(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NAN"}};if(bx(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sx(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NOT_NAN"}};if(bx(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tc(t.field),op:N9(t.op),value:t.value}}}(n):n instanceof Ws?function(t){const r=t.getFilters().map(s=>pD(s));return r.length===1?r[0]:{compositeFilter:{op:D9(t.op),filters:r}}}(n):ve()}function mD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t,r,s,i=me.min(),o=me.min(),a=ln.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.ht=e}}function F9(n){const e=k9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?IA(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(){this.ln=new j9}addToCollectionParentIndex(e,t){return this.ln.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(ra.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class j9{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new jt(gt.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(41943040,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new hh(0)}static Qn(){return new hh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx([n,e],[t,r]){const s=xe(n,t);return s===0?xe(e,r):s}class B9{constructor(e){this.Gn=e,this.buffer=new jt(jx),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ah(t)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await d_(t)}await this.Yn(3e5)})}}class $9{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return H.resolve(f_.oe);const r=new B9(t);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Vx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vx):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),bc()<=Ce.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function z9(n,e){return new $9(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(){this.changes=new sc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Vd(r.mutation,s,Fo.empty(),Yn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){const s=Oa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=wd();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Oa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=aa();const o=Fd(),a=function(){return Fd()}();return t.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof w_)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Vd(u.mutation,c,u.mutation.getFieldMask(),Yn.now())):o.set(c.key,Fo.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var f;return a.set(c,new W9(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Fd();let s=new At((o,a)=>o-a),i=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Fo.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||Le()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=tD();u.forEach(p=>{if(!i.has(p)){const m=iD(t.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Q6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):H.resolve(Oa());let a=-1,l=i;return o.next(c=>H.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Le())).next(u=>({batchId:a,changes:n9(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let s=wd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=wd();return this.indexManager.getCollectionParents(e,i).next(a=>H.forEach(a,l=>{const c=function(f,p){return new g_(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,wn.newInvalidDocument(u)))});let a=wd();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Vd(u.mutation,c,Fo.empty(),Yn.now()),y_(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return H.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Qc(s.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:F9(s.bundledQuery),readTime:Qc(s.readTime)}}(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(){this.overlays=new At(he.comparator),this.Er=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oa();return H.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.Tt(e,t,i)}),H.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Er.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Er.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const s=Oa(),i=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return H.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new At((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Oa(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Oa(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return H.resolve(a)}Tt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Er.get(s.largestBatchId).delete(r.key);this.Er.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new m9(t,r));let i=this.Er.get(t);i===void 0&&(i=Le(),this.Er.set(t,i)),this.Er.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.dr=new jt(Ht.Ar),this.Rr=new jt(Ht.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Ht(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new he(new gt([])),r=new Ht(t,e),s=new Ht(t,e+1),i=[];return this.Rr.forEachInRange([r,s],o=>{this.gr(o),i.push(o.key)}),i}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new he(new gt([])),r=new Ht(t,e),s=new Ht(t,e+1);let i=Le();return this.Rr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new Ht(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return he.comparator(e.key,t.key)||xe(e.br,t.br)}static Vr(e,t){return xe(e.br,t.br)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new jt(Ht.Ar)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new p9(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.vr=this.vr.add(new Ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Fr(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),s=new Ht(t,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([r,s],o=>{const a=this.Cr(o.br);i.push(a)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(xe);return t.forEach(s=>{const i=new Ht(s,0),o=new Ht(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([i,o],a=>{r=r.add(a.br)})}),H.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new Ht(new he(i),0);let a=new jt(xe);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.br)),!0)},o),H.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){lt(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return H.forEach(t.mutations,s=>{const i=new Ht(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Ht(t,0),s=this.vr.firstAfterOrEqual(r);return H.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.Nr=e,this.docs=function(){return new At(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=aa();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wn.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=aa();const o=t.path,a=new he(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||P6(R6(u),r)<=0||(s.has(u.key)||y_(t,u))&&(i=i.insert(u.key,u.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ve()}Lr(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new J9(this)}getSize(e){return H.resolve(this.size)}}class J9 extends H9{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.persistence=e,this.Br=new sc(t=>TS(t),CS),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.kr=0,this.qr=new IS,this.targetCount=0,this.Qr=hh.qn()}forEachTarget(e,t){return this.Br.forEach((r,s)=>t(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),H.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new hh(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Un(t),H.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Br.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,t){this.Kr={},this.overlays={},this.$r=new f_(0),this.Ur=!1,this.Ur=!0,this.Wr=new X9,this.referenceDelegate=e(this),this.Gr=new Z9(this),this.indexManager=new V9,this.remoteDocumentCache=function(s){return new Q9(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new O9(t),this.jr=new q9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new Y9(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const s=new eW(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(i=>this.referenceDelegate.Jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Yr(e,t){return H.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class eW extends k6{constructor(e){super(),this.currentSequenceNumber=e}}class kS{constructor(e){this.persistence=e,this.Zr=new IS,this.Xr=null}static ei(e){return new kS(e)}get ti(){if(this.Xr)return this.Xr;throw ve()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),H.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.ti.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.ti,r=>{const s=he.fromPath(r);return this.ni(e,s).next(i=>{i||t.removeEntry(s,me.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return H.or([()=>H.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Yv{constructor(e,t){this.persistence=e,this.ri=new sc(r=>M6(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=z9(this,t)}static ei(e,t){return new Yv(e,t)}Hr(){}Jr(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return H.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(i=>i?H.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(r++,i.removeEntry(o,me.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),H.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ev(e.data.value)),t}ir(e,t,r){return H.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return H.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=s}static zi(e,t){let r=Le(),s=Le();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new LS(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return n5()?8:L6(e5())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.Xi(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.es(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new tW;return this.ts(e,t,o).next(a=>{if(i.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>i.result)}ns(e,t,r,s){return r.documentReadCount<this.Ji?(bc()<=Ce.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Sc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),H.resolve()):(bc()<=Ce.DEBUG&&ee("QueryEngine","Query:",Sc(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(bc()<=Ce.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Sc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(t))):H.resolve())}Xi(e,t){if(Rx(t))return H.resolve(null);let r=Vs(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=IA(t,null,"F"),r=Vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Le(...i);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(t,a);return this.ss(t,c,o,l.readTime)?this.Xi(e,IA(t,null,"F")):this.os(e,c,t,l)}))})))}es(e,t,r,s){return Rx(t)||s.isEqual(me.min())?H.resolve(null):this.Zi.getDocuments(e,r).next(i=>{const o=this.rs(t,i);return this.ss(t,o,r,s)?H.resolve(null):(bc()<=Ce.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sc(t)),this.os(e,o,t,x6(s,-1)).next(a=>a))})}rs(e,t){let r=new jt(ZN(e));return t.forEach((s,i)=>{y_(e,i)&&(r=r.add(i))}),r}ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ts(e,t,r){return bc()<=Ce.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Sc(t)),this.Zi.getDocumentsMatchingQuery(e,t,ra.min(),r)}os(e,t,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e,t,r,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new At(xe),this.cs=new sc(i=>TS(i),CS),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G9(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function sW(n,e,t,r){return new rW(n,e,t,r)}async function vD(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Le();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function yD(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function iW(n,e){const t=Re(n),r=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const a=[];e.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;a.push(t.Gr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(i,u.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(ln.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(f,m),function(_,w,y){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,m,u)&&a.push(t.Gr.updateTargetData(i,m))});let l=aa(),c=Le();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(oW(i,o,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!r.isEqual(me.min())){const u=t.Gr.getLastRemoteSnapshotVersion(i).next(f=>t.Gr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return H.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(t.us=s,i))}function oW(n,e,t){let r=Le(),s=Le();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=aa();return t.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:s}})}function aW(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Gr.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):t.Gr.allocateTargetId(r).next(o=>(s=new Vo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function DA(n,e,t){const r=Re(n),s=r.us.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ah(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function Bx(n,e,t){const r=Re(n);let s=me.min(),i=Le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Re(l),p=f.cs.get(u);return p!==void 0?H.resolve(f.us.get(p)):f.Gr.getTargetData(c,u)}(r,o,Vs(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?s:me.min(),t?i:Le())).next(a=>(lW(r,Z6(e),a),{documents:a,ds:i})))}function lW(n,e,t){let r=n.ls.get(e)||me.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.ls.set(e,r)}class Ux{constructor(){this.activeTargetIds=i9()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cW{constructor(){this._o=new Ux,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Ux,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og=null;function U0(){return og===null?og=function(){return 268435456+Math.round(2147483648*Math.random())}():og++,"0x"+og.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class fW extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${s}/databases/${i}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Oo(t,r,s,i,o){const a=U0(),l=this.No(t,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,i,o),this.Bo(t,l,c,s).then(u=>(ee("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw ah("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}ko(t,r,s,i,o,a){return this.Oo(t,r,s,i,o)}Lo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>t[o]=i),s&&s.headers.forEach((i,o)=>t[o]=i)}No(t,r){const s=hW[t];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,s){const i=U0();return new Promise((o,a)=>{const l=new VN;l.setWithCredentials(!0),l.listenOnce(jN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zg.NO_ERROR:const u=l.getResponseJson();ee(fn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Zg.TIMEOUT:ee(fn,`RPC '${e}' ${i} timed out`),a(new le(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Zg.HTTP_ERROR:const f=l.getStatus();if(ee(fn,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const g=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(y)>=0?y:Y.UNKNOWN}(m.status);a(new le(g,m.message))}else a(new le(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new le(Y.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{ee(fn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ee(fn,`RPC '${e}' ${i} sending request:`,s),l.send(t,"POST",c,r,15)})}qo(e,t,r){const s=U0(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$N(),a=UN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=i.join("");ee(fn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const g=new dW({Eo:w=>{m?ee(fn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(ee(fn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),ee(fn,`RPC '${e}' stream ${s} sending:`,w),f.send(w))},Ao:()=>f.close()}),_=(w,y,E)=>{w.listen(y,S=>{try{E(S)}catch(R){setTimeout(()=>{throw R},0)}})};return _(f,_d.EventType.OPEN,()=>{m||(ee(fn,`RPC '${e}' stream ${s} transport opened.`),g.So())}),_(f,_d.EventType.CLOSE,()=>{m||(m=!0,ee(fn,`RPC '${e}' stream ${s} transport closed`),g.Do())}),_(f,_d.EventType.ERROR,w=>{m||(m=!0,ah(fn,`RPC '${e}' stream ${s} transport errored:`,w),g.Do(new le(Y.UNAVAILABLE,"The operation could not be completed")))}),_(f,_d.EventType.MESSAGE,w=>{var y;if(!m){const E=w.data[0];lt(!!E);const S=E,R=(S==null?void 0:S.error)||((y=S[0])===null||y===void 0?void 0:y.error);if(R){ee(fn,`RPC '${e}' stream ${s} received error:`,R);const O=R.status;let V=function(k){const M=St[k];if(M!==void 0)return aD(M)}(O),C=R.message;V===void 0&&(V=Y.INTERNAL,C="Unknown error status: "+O+" with message "+R.message),m=!0,g.Do(new le(V,C)),f.close()}else ee(fn,`RPC '${e}' stream ${s} received:`,E),g.vo(E)}}),_(a,BN.STAT_EVENT,w=>{w.stat===SA.PROXY?ee(fn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===SA.NOPROXY&&ee(fn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.bo()},0),g}}function $0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(n){return new b9(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t,r=1e3,s=1.5,i=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=s,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e,t,r,s,i,o,a,l){this.li=e,this.Yo=r,this.Zo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new wD(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===t&&this.I_(r,s)},r=>{e(()=>{const s=new le(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(s)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.E_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mW extends pW{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=R9(this.serializer,e),r=function(i){if(!("targetChange"in i))return me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Qc(o.readTime):me.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=Fx(this.serializer),t.addTarget=function(i,o){let a;const l=o.target;if(a=PA(l)?{documents:P9(i,l)}:{query:I9(i,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=T9(i,o.resumeToken);const c=MA(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=S9(i,o.snapshotVersion.toTimestamp());const c=MA(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=L9(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=Fx(this.serializer),t.removeTarget=e,this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Oo(e,NA(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(Y.UNKNOWN,i.toString())})}ko(e,t,r,s,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,NA(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Y.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class vW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ki(t),this.C_=!1):ee("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{um(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Re(l);c.k_.add(4),await cm(c),c.K_.set("Unknown"),c.k_.delete(4),await A_(c)}(this))})}),this.K_=new vW(r,s)}}async function A_(n){if(um(n))for(const e of n.q_)await e(!0)}async function cm(n){for(const e of n.q_)await e(!1)}function ED(n,e){const t=Re(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),OS(t)?DS(t):bh(t).s_()&&NS(t,e))}function MS(n,e){const t=Re(n),r=bh(t);t.B_.delete(e),r.s_()&&AD(t,e),t.B_.size===0&&(r.s_()?r.a_():um(t)&&t.K_.set("Unknown"))}function NS(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bh(n).V_(e)}function AD(n,e){n.U_.xe(e),bh(n).m_(e)}function DS(n){n.U_=new _9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),bh(n).start(),n.K_.F_()}function OS(n){return um(n)&&!bh(n).i_()&&n.B_.size>0}function um(n){return Re(n).k_.size===0}function bD(n){n.U_=void 0}async function _W(n){n.K_.set("Online")}async function wW(n){n.B_.forEach((e,t)=>{NS(n,e)})}async function EW(n,e){bD(n),OS(n)?(n.K_.O_(e),DS(n)):n.K_.set("Unknown")}async function AW(n,e,t){if(n.K_.set("Online"),e instanceof cD&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.B_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.B_.delete(a),s.U_.removeTarget(a))}(n,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zx(n,r)}else if(e instanceof nv?n.U_.$e(e):e instanceof lD?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(me.min()))try{const r=await yD(n.localStore);t.compareTo(r)>=0&&await function(i,o){const a=i.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.B_.get(c);u&&i.B_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.B_.get(l);if(!u)return;i.B_.set(l,u.withResumeToken(ln.EMPTY_BYTE_STRING,u.snapshotVersion)),AD(i,l);const f=new Vo(u.target,l,c,u.sequenceNumber);NS(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await zx(n,r)}}async function zx(n,e,t){if(!Ah(e))throw e;n.k_.add(1),await cm(n),n.K_.set("Offline"),t||(t=()=>yD(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await A_(n)})}async function Hx(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=um(t);t.k_.add(3),await cm(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await A_(t)}async function bW(n,e){const t=Re(n);e?(t.k_.delete(2),await A_(t)):e||(t.k_.add(2),await cm(t),t.K_.set("Unknown"))}function bh(n){return n.W_||(n.W_=function(t,r,s){const i=Re(t);return i.b_(),new mW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Ro:_W.bind(null,n),mo:wW.bind(null,n),po:EW.bind(null,n),R_:AW.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),OS(n)?DS(n):n.K_.set("Unknown")):(await n.W_.stop(),bD(n))})),n.W_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ol,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new FS(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function SD(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),Ah(n))return new le(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{static emptySet(e){return new Jc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=wd(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Jc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.z_=new At(he.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ve():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class dh{constructor(e,t,r,s,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new dh(e,t,Jc.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&v_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class TW{constructor(){this.queries=Gx(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const s=Re(t),i=s.queries;s.queries=Gx(),i.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new le(Y.ABORTED,"Firestore shutting down"))}}function Gx(){return new sc(n=>JN(n),v_)}async function CW(n,e){const t=Re(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Y_()&&e.Z_()&&(r=2):(i=new SW,r=e.Z_()?0:1);try{switch(r){case 0:i.H_=await t.onListen(s,!0);break;case 1:i.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=SD(o,`Initialization of query '${Sc(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.J_.push(e),e.ea(t.onlineState),i.H_&&e.ta(i.H_)&&VS(t)}async function xW(n,e){const t=Re(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.J_.indexOf(e);o>=0&&(i.J_.splice(o,1),i.J_.length===0?s=e.Z_()?0:1:!i.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function RW(n,e){const t=Re(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.J_)a.ta(s)&&(r=!0);o.H_=s}}r&&VS(t)}function PW(n,e,t){const r=Re(n),s=r.queries.get(e);if(s)for(const i of s.J_)i.onError(t);r.queries.delete(e)}function VS(n){n.X_.forEach(e=>{e.next()})}var OA,qx;(qx=OA||(OA={})).na="default",qx.Cache="cache";class IW{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new dh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=dh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==OA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.key=e}}class CD{constructor(e){this.key=e}}class kW{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Le(),this.mutatedKeys=Le(),this.Va=ZN(e),this.ma=new Jc(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new Wx,s=t?t.ma:this.ma;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const p=s.get(u),m=y_(this.query,f)?f:null,g=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;p&&m?p.data.isEqual(m.data)?g!==_&&(r.track({type:3,doc:m}),w=!0):this.ya(p,m)||(r.track({type:2,doc:m}),w=!0,(l&&this.Va(m,l)>0||c&&this.Va(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),w=!0):p&&!m&&(r.track({type:1,doc:p}),w=!0,(l||c)&&(a=!0)),w&&(m?(o=o.add(m),i=_?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{ma:o,pa:r,ss:a,mutatedKeys:i}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,f)=>function(m,g){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return _(m)-_(g)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),s=s!=null&&s;const a=t&&!s?this.Sa():[],l=this.Ra.size===0&&this.current&&!s?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new dh(this.query,e.ma,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Wx,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Le(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new CD(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new TD(r))}),t}va(e){this.da=e.ds,this.Ra=Le();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return dh.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class LW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class MW{constructor(e){this.key=e,this.Fa=!1}}class NW{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new sc(a=>JN(a),v_),this.Oa=new Map,this.Na=new Set,this.La=new At(he.comparator),this.Ba=new Map,this.ka=new IS,this.qa={},this.Qa=new Map,this.Ka=hh.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function DW(n,e,t=!0){const r=kD(n);let s;const i=r.xa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Ca()):s=await xD(r,e,t,!0),s}async function OW(n,e){const t=kD(n);await xD(t,e,!0,!1)}async function xD(n,e,t,r){const s=await aW(n.localStore,Vs(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await FW(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&ED(n.remoteStore,s),a}async function FW(n,e,t,r,s){n.Ua=(f,p,m)=>async function(_,w,y,E){let S=w.view.ga(y);S.ss&&(S=await Bx(_.localStore,w.query,!1).then(({documents:C})=>w.view.ga(C,S)));const R=E&&E.targetChanges.get(w.targetId),O=E&&E.targetMismatches.get(w.targetId)!=null,V=w.view.applyChanges(S,_.isPrimaryClient,R,O);return Xx(_,w.targetId,V.ba),V.snapshot}(n,f,p,m);const i=await Bx(n.localStore,e,!0),o=new kW(e,i.ds),a=o.ga(i.documents),l=lm.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);Xx(n,t,c.ba);const u=new LW(e,t,o);return n.xa.set(e,u),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),c.snapshot}async function VW(n,e,t){const r=Re(n),s=r.xa.get(e),i=r.Oa.get(s.targetId);if(i.length>1)return r.Oa.set(s.targetId,i.filter(o=>!v_(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await DA(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&MS(r.remoteStore,s.targetId),FA(r,s.targetId)}).catch(d_)):(FA(r,s.targetId),await DA(r.localStore,s.targetId,!0))}async function jW(n,e){const t=Re(n),r=t.xa.get(e),s=t.Oa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),MS(t.remoteStore,r.targetId))}async function RD(n,e){const t=Re(n);try{const r=await iW(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Ba.get(i);o&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Fa=!0:s.modifiedDocuments.size>0?lt(o.Fa):s.removedDocuments.size>0&&(lt(o.Fa),o.Fa=!1))}),await ID(t,r,e)}catch(r){await d_(r)}}function Kx(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.xa.forEach((i,o)=>{const a=o.view.ea(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Re(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.J_)p.ea(a)&&(c=!0)}),c&&VS(l)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BW(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ba.get(e),i=s&&s.key;if(i){let o=new At(he.comparator);o=o.insert(i,wn.newNoDocument(i,me.min()));const a=Le().add(i),l=new E_(me.min(),new Map,new At(xe),o,a);await RD(r,l),r.La=r.La.remove(i),r.Ba.delete(e),jS(r)}else await DA(r.localStore,e,!1).then(()=>FA(r,e,t)).catch(d_)}function FA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||PD(n,r)})}function PD(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(MS(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),jS(n))}function Xx(n,e,t){for(const r of t)r instanceof TD?(n.ka.addReference(r.key,e),UW(n,r)):r instanceof CD?(ee("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||PD(n,r.key)):ve()}function UW(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(ee("SyncEngine","New document in limbo: "+t),n.Na.add(r),jS(n))}function jS(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new he(gt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new MW(t)),n.La=n.La.insert(t,r),ED(n.remoteStore,new Vo(Vs(QN(t.path)),r,"TargetPurposeLimboResolution",f_.oe))}}async function ID(n,e,t){const r=Re(n),s=[],i=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=LS.zi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ma.R_(s),await async function(l,c){const u=Re(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(c,p=>H.forEach(p.Wi,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>H.forEach(p.Gi,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Ah(f))throw f;ee("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.us.get(p),g=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(g);u.us=u.us.insert(p,_)}}}(r.localStore,i))}async function $W(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await vD(t.localStore,e);t.currentUser=e,function(i,o){i.Qa.forEach(a=>{a.forEach(l=>{l.reject(new le(Y.CANCELLED,o))})}),i.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ID(t,r.Ts)}}function zW(n,e){const t=Re(n),r=t.Ba.get(e);if(r&&r.Fa)return Le().add(r.key);{let s=Le();const i=t.Oa.get(e);if(!i)return s;for(const o of i){const a=t.xa.get(o);s=s.unionWith(a.view.fa)}return s}}function kD(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BW.bind(null,e),e.Ma.R_=RW.bind(null,e.eventManager),e.Ma.Wa=PW.bind(null,e.eventManager),e}class Qv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_D(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return sW(this.persistence,new nW,e.initialUser,this.serializer)}ja(e){return new gD(kS.ei,this.serializer)}za(e){return new cW}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qv.provider={build:()=>new Qv};class HW extends Qv{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){lt(this.persistence.referenceDelegate instanceof Yv);const r=this.persistence.referenceDelegate.garbageCollector;return new U9(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new gD(r=>Yv.ei(r,t),this.serializer)}}class VA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$W.bind(null,this.syncEngine),await bW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TW}()}createDatastore(e){const t=_D(e.databaseInfo.databaseId),r=function(i){return new fW(i)}(e.databaseInfo);return function(i,o,a,l){return new gW(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new yW(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Kx(this.syncEngine,t,0),function(){return $x.p()?new $x:new uW}())}createSyncEngine(e,t){return function(s,i,o,a,l,c,u){const f=new NW(s,i,o,a,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=Re(s);ee("RemoteStore","RemoteStore shutting down."),i.k_.add(5),await cm(i),i.Q_.shutdown(),i.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}VA.provider={build:()=>new VA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=T6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ol;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=SD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function z0(n,e){n.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await vD(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Yx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await qW(n);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Hx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Hx(e.remoteStore,s)),n._onlineComponents=e}async function qW(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await z0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ah("Error using user provided cache. Falling back to memory cache: "+t),await z0(n,new Qv)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await z0(n,new HW(void 0));return n._offlineComponents}async function KW(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Yx(n,n._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Yx(n,new VA))),n._onlineComponents}async function XW(n){const e=await KW(n),t=e.eventManager;return t.onListen=DW.bind(null,e.syncEngine),t.onUnlisten=VW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jW.bind(null,e.syncEngine),t}function YW(n,e,t={}){const r=new Ol;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new WW({next:p=>{u.eu(),o.enqueueAndForget(()=>xW(i,f)),p.fromCache&&l.source==="server"?c.reject(new le(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new IW(a,u,{includeMetadataChanges:!0,ua:!0});return CW(i,f)}(await XW(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=new Map;function QW(n,e,t,r){if(e===!0&&r===!0)throw new le(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Jx(n){if(he.isDocumentKey(n))throw new le(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JW(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve()}function jA(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JW(n);throw new le(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class BS{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new v6;switch(r.type){case"firstParty":return new E6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Qx.get(t);r&&(ee("ComponentProvider","Removing Datastore"),Qx.delete(t),r.terminate())}(this),Promise.resolve()}}function ZW(n,e,t,r={}){var s;const i=(n=jA(n,BS))._getSettings(),o=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yn.MOCK_USER;else{a=TN(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new le(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yn(c)}n._authCredentials=new y6(new zN(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new b_(this.firestore,e,this._query)}}class Sh{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sh(this.firestore,e,this._key)}}class Zc extends b_{constructor(e,t,r){super(e,t,QN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sh(this.firestore,null,new he(e))}withConverter(e){return new Zc(this.firestore,e,this._path)}}function eG(n,e,...t){if(n=xN(n),n instanceof BS){const r=gt.fromString(e,...t);return Jx(r),new Zc(n,null,r)}{if(!(n instanceof Sh||n instanceof Zc))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gt.fromString(e,...t));return Jx(r),new Zc(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new wD(this,"async_queue_retry"),this.fu=()=>{const r=$0();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=$0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=$0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Ol;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ah(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ki("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=FS.createAndSchedule(this,e,t,r,i=>this.Su(i));return this.du.push(s),s}pu(){this.Au&&ve()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class MD extends BS{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new eR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eR(e),this._firestoreClient=void 0,await e}}}function tG(n,e){const t=typeof n=="object"?n:NN(),r=typeof n=="string"?n:"(default)",s=kN(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=bN("firestore");i&&ZW(s,...i)}return s}function nG(n){if(n._terminated)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rG(n),n._firestoreClient}function rG(n){var e,t,r;const s=n._freezeSettings(),i=function(a,l,c,u){return new F6(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,LD(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new GW(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jv(ln.fromBase64String(e))}catch(t){throw new le(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jv(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}const oG=new RegExp("[~\\*/\\[\\]]");function aG(n,e,t){if(e.search(oG)>=0)throw tR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new ND(...e.split("."))._internalPath}catch{throw tR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function tR(n,e,t,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new le(Y.INVALID_ARGUMENT,i+n+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Sh(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lG extends DD{data(){return super.data()}}function OD(n,e){return typeof e=="string"?aG(n,e):e instanceof ND?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uG{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return am(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>_t(o.doubleValue));return new iG(i)}convertGeoPoint(e){return new sG(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=m_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(df(e));default:return null}}convertTimestamp(e){const t=sa(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gt.fromString(e);lt(mD(r));const s=new ff(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(t)||Ki(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hG extends DD{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(OD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rv extends hG{data(e={}){return super.data(e)}}class dG{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ag(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rv(this._firestore,this._userDataWriter,r.key,r,new ag(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new rv(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ag(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new rv(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ag(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:fG(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}class pG extends uG{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sh(this.firestore,null,t)}}function mG(n){n=jA(n,b_);const e=jA(n.firestore,MD),t=nG(e),r=new pG(e);return cG(n._query),YW(t,n._query).then(s=>new dG(e,r,n,s))}(function(e,t=!0){(function(s){Eh=s})(LN),cf(new oh("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new MD(new _6(r.getProvider("auth-internal")),new b6(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new le(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ff(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Xo(vx,"4.7.5",e),Xo(vx,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="firebasestorage.googleapis.com",gG="storageBucket",vG=2*60*1e3,yG=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends rc{constructor(e,t,r=0){super(H0(e),`Firebase Storage: ${t} (${H0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ks.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return H0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gs||(Gs={}));function H0(n){return"storage/"+n}function _G(){const n="An unknown error occurred, please check the error payload for server response.";return new Ks(Gs.UNKNOWN,n)}function wG(){return new Ks(Gs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EG(){return new Ks(Gs.CANCELED,"User canceled the upload/download.")}function AG(n){return new Ks(Gs.INVALID_URL,"Invalid URL '"+n+"'.")}function bG(n){return new Ks(Gs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function nR(n){return new Ks(Gs.INVALID_ARGUMENT,n)}function VD(){return new Ks(Gs.APP_DELETED,"The Firebase app was deleted.")}function SG(n){return new Ks(Gs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=is.makeFromUrl(e,t)}catch{return new is(e,"")}if(r.path==="")return r;throw bG(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${s}/o${p}`,"i"),g={bucket:1,path:3},_=t===FD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",y=new RegExp(`^https?://${_}/${s}/${w}`,"i"),S=[{regex:a,indices:l,postModify:i},{regex:m,indices:g,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<S.length;R++){const O=S[R],V=O.regex.exec(e);if(V){const C=V[O.indices.bucket];let T=V[O.indices.path];T||(T=""),r=new is(C,T),O.postModify(r);break}}if(r==null)throw AG(e);return r}}class TG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CG(n,e,t){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function f(w){s=setTimeout(()=>{s=null,n(m,l())},w)}function p(){i&&clearTimeout(i)}function m(w,...y){if(c){p();return}if(w){p(),u.call(null,w,...y);return}if(l()||o){p(),u.call(null,w,...y);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let g=!1;function _(w){g||(g=!0,p(),!c&&(s!==null?(w||(a=2),clearTimeout(s),f(0)):w||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,_(!0)},t),_}function xG(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(n){return n!==void 0}function rR(n,e,t,r){if(r<e)throw nR(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw nR(`Invalid value for '${n}'. Expected ${t} or less.`)}function PG(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Zv;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Zv||(Zv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IG(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e,t,r,s,i,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new lg(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Zv.NO_ERROR,l=i.getStatus();if(!a||IG(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Zv.ABORT;r(!1,new lg(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new lg(c,i))})},t=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());RG(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=_G();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?VD():EG();o(l)}else{const l=wG();o(l)}};this.canceled_?t(!1,new lg(!1,null,!0)):this.backoffId_=CG(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function LG(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function MG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NG(n,e){e&&(n["X-Firebase-GMPID"]=e)}function DG(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function OG(n,e,t,r,s,i,o=!0){const a=PG(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return NG(c,e),LG(c,t),MG(c,i),DG(c,r),new kG(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FG(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function VG(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){this._service=e,t instanceof is?this._location=t:this._location=is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ey(e,t)}get root(){const e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VG(this._location.path)}get storage(){return this._service}get parent(){const e=FG(this._location.path);if(e===null)return null;const t=new is(this._location.bucket,e);return new ey(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw SG(e)}}function sR(n,e){const t=e==null?void 0:e[gG];return t==null?null:is.makeFromBucketSpec(t,n)}function jG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:TN(s,n.app.options.projectId))}class BG{constructor(e,t,r,s,i){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=FD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vG,this._maxUploadRetryTime=yG,this._requests=new Set,s!=null?this._bucket=is.makeFromBucketSpec(s,this._host):this._bucket=sR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=is.makeFromBucketSpec(this._url,e):this._bucket=sR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ey(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new TG(VD());{const o=OG(e,this._appId,r,s,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const iR="@firebase/storage",oR="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="storage";function UG(n=NN(),e){n=xN(n);const r=kN(n,jD).getImmediate({identifier:e}),s=bN("storage");return s&&$G(r,...s),r}function $G(n,e,t,r={}){jG(n,e,t,r)}function zG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new BG(t,r,s,e,LN)}function HG(){cf(new oh(jD,zG,"PUBLIC").setMultipleInstances(!0)),Xo(iR,oR,""),Xo(iR,oR,"esm2017")}HG();const WG={apiKey:"AIzaSyCJH3g_kDzcdTsYyBfYnWN9Vu0NVHQr1Wk",authDomain:"my-portfolio-page-4ceda.firebaseapp.com",projectId:"my-portfolio-page-4ceda",storageBucket:"my-portfolio-page-4ceda.appspot.com",messagingSenderId:"835759719339",appId:"1:835759719339:web:03a12d09572082289608ee",measurementId:"G-V5690YXT75"},BD=MN(WG),GG=tG(BD);UG(BD);function qG(){const[n,e]=A.useState([]);return A.useEffect(()=>{(async()=>{const s=(await mG(eG(GG,"projects"))).docs.map(i=>i.data());s.sort((i,o)=>i.order-o.order),e(s)})()},[]),N.jsxs(Oi,{direction:"column",className:"works",style:{paddingTop:"0px"},children:[N.jsx(Da,{size:"8",weight:"bold",className:"title",style:{display:"flex",justifyContent:"center",padding:"20px"},children:"My Projects"}),N.jsx(lS,{}),N.jsx(Oi,{wrap:"wrap",gap:"4",justify:"center",children:n.map((t,r)=>N.jsxs(Yk,{className:"project-card",children:[N.jsx(Da,{weight:"bold",children:t.name}),N.jsx("br",{}),N.jsx(Da,{style:{display:"flex",minHeight:"60px",justifyContent:"center"},children:t.description}),N.jsxs(Da,{size:"1",children:["Tech Stack: ",t.tech]}),N.jsx("br",{}),N.jsxs(Oi,{gap:"3",margintop:"2",style:{display:"flex",justifyContent:"center"},children:[N.jsx(Qw,{onClick:()=>window.open(t.github,"_blank"),children:"GitHub"}),t.live&&t.live!=="null"&&N.jsx(Qw,{onClick:()=>window.open(t.live,"_blank"),children:"Live Demo"})]})]},r))})]})}const UD=({isMobile:n})=>N.jsxs(vj,{children:[N.jsx(gc,{path:"/",element:N.jsx(Zw,{isMobile:n})}),N.jsx(gc,{path:"/resume",element:N.jsx(_N,{isMobile:n})}),N.jsx(gc,{path:"/contact",element:N.jsx(wN,{isMobile:n})}),N.jsx(gc,{path:"/projects",element:N.jsx(qG,{})}),N.jsx(gc,{path:"/*",element:N.jsx(Zw,{})})]});UD.propTypes={isMobile:Fs.bool};function $D(n,e=[]){let t=[];function r(i,o){const a=A.createContext(o),l=t.length;t=[...t,o];const c=f=>{var y;const{scope:p,children:m,...g}=f,_=((y=p==null?void 0:p[n])==null?void 0:y[l])||a,w=A.useMemo(()=>g,Object.values(g));return N.jsx(_.Provider,{value:w,children:m})};c.displayName=i+"Provider";function u(f,p){var _;const m=((_=p==null?void 0:p[n])==null?void 0:_[l])||a,g=A.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,KG(s,...e)]}function KG(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var XG="DismissableLayer",BA="dismissableLayer.update",YG="dismissableLayer.pointerDownOutside",QG="dismissableLayer.focusOutside",aR,zD=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),HD=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(zD),[u,f]=A.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),g=xt(e,C=>f(C)),_=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=_.indexOf(w),E=u?_.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,R=E>=y,O=eq(C=>{const T=C.target,k=[...c.branches].some(M=>M.contains(T));!R||k||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),V=tq(C=>{const T=C.target;[...c.branches].some(M=>M.contains(T))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return XI(C=>{E===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(aR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),lR(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=aR)}},[u,p,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),lR())},[u,c]),A.useEffect(()=>{const C=()=>m({});return document.addEventListener(BA,C),()=>document.removeEventListener(BA,C)},[]),N.jsx(vt.div,{...l,ref:g,style:{pointerEvents:S?R?"auto":"none":void 0,...n.style},onFocusCapture:ue(n.onFocusCapture,V.onFocusCapture),onBlurCapture:ue(n.onBlurCapture,V.onBlurCapture),onPointerDownCapture:ue(n.onPointerDownCapture,O.onPointerDownCapture)})});HD.displayName=XG;var JG="DismissableLayerBranch",ZG=A.forwardRef((n,e)=>{const t=A.useContext(zD),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),N.jsx(vt.div,{...n,ref:s})});ZG.displayName=JG;function eq(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){WD(YG,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function tq(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&WD(QG,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lR(){const n=new CustomEvent(BA);document.dispatchEvent(n)}function WD(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?$b(s,i):s.dispatchEvent(i)}var W0=0;function nq(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??cR()),document.body.insertAdjacentElement("beforeend",n[1]??cR()),W0++,()=>{W0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),W0--}},[])}function cR(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}function rq(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var S_=n=>{const{present:e,children:t}=n,r=sq(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=xt(r.ref,iq(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};S_.displayName="Presence";function sq(n){const[e,t]=A.useState(),r=A.useRef({}),s=A.useRef(n),i=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=rq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=cg(r.current);i.current=a==="mounted"?c:"none"},[a]),Us(()=>{const c=r.current,u=s.current;if(u!==n){const p=i.current,m=cg(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Us(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=m=>{const _=cg(r.current).includes(m.animationName);if(m.target===e&&_&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=m=>{m.target===e&&(i.current=cg(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function cg(n){return(n==null?void 0:n.animationName)||"none"}function iq(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var sv="right-scroll-bar-position",iv="width-before-scroll-bar",oq="with-scroll-bars-hidden",aq="--removed-body-scroll-bar-size",GD=nB(),G0=function(){},T_=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:G0,onWheelCapture:G0,onTouchMoveCapture:G0}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,f=n.shards,p=n.sideCar,m=n.noIsolation,g=n.inert,_=n.allowPinchZoom,w=n.as,y=w===void 0?"div":w,E=n.gapMode,S=nk(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=p,O=Zj([t,e]),V=Ms(Ms({},S),s);return A.createElement(A.Fragment,null,u&&A.createElement(R,{sideCar:GD,removeScrollBar:c,shards:f,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!_,lockRef:t,gapMode:E}),o?A.cloneElement(A.Children.only(a),Ms(Ms({},V),{ref:O})):A.createElement(y,Ms({},V,{className:l,ref:O}),a))});T_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};T_.classNames={fullWidth:iv,zeroRight:sv};var lq={left:0,top:0,right:0,gap:0},q0=function(n){return parseInt(n||"",10)||0},cq=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[q0(t),q0(r),q0(s)]},uq=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return lq;var e=cq(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},hq=sk(),eu="data-scroll-locked",dq=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(oq,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(eu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(iv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(sv," .").concat(sv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(iv," .").concat(iv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(eu,`] {
    `).concat(aq,": ").concat(a,`px;
  }
`)},uR=function(){var n=parseInt(document.body.getAttribute(eu)||"0",10);return isFinite(n)?n:0},fq=function(){A.useEffect(function(){return document.body.setAttribute(eu,(uR()+1).toString()),function(){var n=uR()-1;n<=0?document.body.removeAttribute(eu):document.body.setAttribute(eu,n.toString())}},[])},pq=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;fq();var i=A.useMemo(function(){return uq(s)},[s]);return A.createElement(hq,{styles:dq(i,!e,s,t?"":"!important")})},UA=!1;if(typeof window<"u")try{var ug=Object.defineProperty({},"passive",{get:function(){return UA=!0,!0}});window.addEventListener("test",ug,ug),window.removeEventListener("test",ug,ug)}catch{UA=!1}var pc=UA?{passive:!1}:!1,mq=function(n){return n.tagName==="TEXTAREA"},qD=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!mq(n)&&t[e]==="visible")},gq=function(n){return qD(n,"overflowY")},vq=function(n){return qD(n,"overflowX")},hR=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=KD(n,r);if(s){var i=XD(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},yq=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},_q=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},KD=function(n,e){return n==="v"?gq(e):vq(e)},XD=function(n,e){return n==="v"?yq(e):_q(e)},wq=function(n,e){return n==="h"&&e==="rtl"?-1:1},Eq=function(n,e,t,r,s){var i=wq(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,l=e.contains(a),c=!1,u=o>0,f=0,p=0;do{var m=XD(n,a),g=m[0],_=m[1],w=m[2],y=_-w-i*g;(g||y)&&KD(n,a)&&(f+=y,p+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(f)<1||!s)||!u&&(Math.abs(p)<1||!s))&&(c=!0),c},hg=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},dR=function(n){return[n.deltaX,n.deltaY]},fR=function(n){return n&&"current"in n?n.current:n},Aq=function(n,e){return n[0]===e[0]&&n[1]===e[1]},bq=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Sq=0,mc=[];function Tq(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),s=A.useState(Sq++)[0],i=A.useState(sk)[0],o=A.useRef(n);A.useEffect(function(){o.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var _=Yj([n.lockRef.current],(n.shards||[]).map(fR),!0).filter(Boolean);return _.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=A.useCallback(function(_,w){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var y=hg(_),E=t.current,S="deltaX"in _?_.deltaX:E[0]-y[0],R="deltaY"in _?_.deltaY:E[1]-y[1],O,V=_.target,C=Math.abs(S)>Math.abs(R)?"h":"v";if("touches"in _&&C==="h"&&V.type==="range")return!1;var T=hR(C,V);if(!T)return!0;if(T?O=C:(O=C==="v"?"h":"v",T=hR(C,V)),!T)return!1;if(!r.current&&"changedTouches"in _&&(S||R)&&(r.current=O),!O)return!0;var k=r.current||O;return Eq(k,w,_,k==="h"?S:R,!0)},[]),l=A.useCallback(function(_){var w=_;if(!(!mc.length||mc[mc.length-1]!==i)){var y="deltaY"in w?dR(w):hg(w),E=e.current.filter(function(O){return O.name===w.type&&(O.target===w.target||w.target===O.shadowParent)&&Aq(O.delta,y)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var S=(o.current.shards||[]).map(fR).filter(Boolean).filter(function(O){return O.contains(w.target)}),R=S.length>0?a(w,S[0]):!o.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),c=A.useCallback(function(_,w,y,E){var S={name:_,delta:w,target:y,should:E,shadowParent:Cq(y)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(R){return R!==S})},1)},[]),u=A.useCallback(function(_){t.current=hg(_),r.current=void 0},[]),f=A.useCallback(function(_){c(_.type,dR(_),_.target,a(_,n.lockRef.current))},[]),p=A.useCallback(function(_){c(_.type,hg(_),_.target,a(_,n.lockRef.current))},[]);A.useEffect(function(){return mc.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,pc),document.addEventListener("touchmove",l,pc),document.addEventListener("touchstart",u,pc),function(){mc=mc.filter(function(_){return _!==i}),document.removeEventListener("wheel",l,pc),document.removeEventListener("touchmove",l,pc),document.removeEventListener("touchstart",u,pc)}},[]);var m=n.removeScrollBar,g=n.inert;return A.createElement(A.Fragment,null,g?A.createElement(i,{styles:bq(s)}):null,m?A.createElement(pq,{gapMode:n.gapMode}):null)}function Cq(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const xq=rB(GD,Tq);var YD=A.forwardRef(function(n,e){return A.createElement(T_,Ms({},n,{ref:e,sideCar:xq}))});YD.classNames=T_.classNames;var $A=["Enter"," "],Rq=["ArrowDown","PageUp","Home"],QD=["ArrowUp","PageDown","End"],Pq=[...Rq,...QD],Iq={ltr:[...$A,"ArrowRight"],rtl:[...$A,"ArrowLeft"]},kq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},hm="Menu",[mf,Lq,Mq]=aS(hm),[ic,Nq]=$D(hm,[Mq,qy,Qy]),C_=qy(),JD=Qy(),[Dq,Th]=ic(hm),[Oq,dm]=ic(hm),ZD=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=C_(e),[l,c]=A.useState(null),u=A.useRef(!1),f=Qn(i),p=sS(s);return A.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),N.jsx(N4,{...a,children:N.jsx(Dq,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:c,children:N.jsx(Oq,{scope:e,onClose:A.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:p,modal:o,children:r})})})};ZD.displayName=hm;var Fq="MenuAnchor",US=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=C_(t);return N.jsx(Ik,{...s,...r,ref:e})});US.displayName=Fq;var Vq="MenuPortal",[cK,eO]=ic(Vq,{forceMount:void 0}),Dr="MenuContent",[jq,$S]=ic(Dr),tO=A.forwardRef((n,e)=>{const t=eO(Dr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Th(Dr,n.__scopeMenu),o=dm(Dr,n.__scopeMenu);return N.jsx(mf.Provider,{scope:n.__scopeMenu,children:N.jsx(S_,{present:r||i.open,children:N.jsx(mf.Slot,{scope:n.__scopeMenu,children:o.modal?N.jsx(Bq,{...s,ref:e}):N.jsx(Uq,{...s,ref:e})})})})}),Bq=A.forwardRef((n,e)=>{const t=Th(Dr,n.__scopeMenu),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return fB(i)},[]),N.jsx(zS,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:ue(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Uq=A.forwardRef((n,e)=>{const t=Th(Dr,n.__scopeMenu);return N.jsx(zS,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),zS=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:m,disableOutsideScroll:g,..._}=n,w=Th(Dr,t),y=dm(Dr,t),E=C_(t),S=JD(t),R=Lq(t),[O,V]=A.useState(null),C=A.useRef(null),T=xt(e,C,w.onContentChange),k=A.useRef(0),M=A.useRef(""),F=A.useRef(0),j=A.useRef(null),D=A.useRef("right"),q=A.useRef(0),re=g?YD:A.Fragment,Z=g?{as:Vr,allowPinchZoom:!0}:void 0,W=z=>{var fe,ut;const X=M.current+z,ce=R().filter(Je=>!Je.disabled),se=document.activeElement,ae=(fe=ce.find(Je=>Je.ref.current===se))==null?void 0:fe.textValue,Be=ce.map(Je=>Je.textValue),Ue=Zq(Be,X,ae),Pe=(ut=ce.find(Je=>Je.textValue===Ue))==null?void 0:ut.ref.current;(function Je(Ie){M.current=Ie,window.clearTimeout(k.current),Ie!==""&&(k.current=window.setTimeout(()=>Je(""),1e3))})(X),Pe&&setTimeout(()=>Pe.focus())};A.useEffect(()=>()=>window.clearTimeout(k.current),[]),nq();const U=A.useCallback(z=>{var ce,se;return D.current===((ce=j.current)==null?void 0:ce.side)&&t8(z,(se=j.current)==null?void 0:se.area)},[]);return N.jsx(jq,{scope:t,searchRef:M,onItemEnter:A.useCallback(z=>{U(z)&&z.preventDefault()},[U]),onItemLeave:A.useCallback(z=>{var X;U(z)||((X=C.current)==null||X.focus(),V(null))},[U]),onTriggerLeave:A.useCallback(z=>{U(z)&&z.preventDefault()},[U]),pointerGraceTimerRef:F,onPointerGraceIntentChange:A.useCallback(z=>{j.current=z},[]),children:N.jsx(re,{...Z,children:N.jsx(ZI,{asChild:!0,trapped:s,onMountAutoFocus:ue(i,z=>{var X;z.preventDefault(),(X=C.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:N.jsx(HD,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:m,children:N.jsx(nL,{asChild:!0,...S,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:V,onEntryFocus:ue(l,z=>{y.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:N.jsx(kk,{role:"menu","aria-orientation":"vertical","data-state":vO(w.open),"data-radix-menu-content":"",dir:y.dir,...E,..._,ref:T,style:{outline:"none",..._.style},onKeyDown:ue(_.onKeyDown,z=>{const ce=z.target.closest("[data-radix-menu-content]")===z.currentTarget,se=z.ctrlKey||z.altKey||z.metaKey,ae=z.key.length===1;ce&&(z.key==="Tab"&&z.preventDefault(),!se&&ae&&W(z.key));const Be=C.current;if(z.target!==Be||!Pq.includes(z.key))return;z.preventDefault();const Pe=R().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);QD.includes(z.key)&&Pe.reverse(),Qq(Pe)}),onBlur:ue(n.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(k.current),M.current="")}),onPointerMove:ue(n.onPointerMove,gf(z=>{const X=z.target,ce=q.current!==z.clientX;if(z.currentTarget.contains(X)&&ce){const se=z.clientX>q.current?"right":"left";D.current=se,q.current=z.clientX}}))})})})})})})});tO.displayName=Dr;var $q="MenuGroup",HS=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return N.jsx(vt.div,{role:"group",...r,ref:e})});HS.displayName=$q;var zq="MenuLabel",nO=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return N.jsx(vt.div,{...r,ref:e})});nO.displayName=zq;var ty="MenuItem",pR="menu.itemSelect",x_=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=A.useRef(null),o=dm(ty,n.__scopeMenu),a=$S(ty,n.__scopeMenu),l=xt(e,i),c=A.useRef(!1),u=()=>{const f=i.current;if(!t&&f){const p=new CustomEvent(pR,{bubbles:!0,cancelable:!0});f.addEventListener(pR,m=>r==null?void 0:r(m),{once:!0}),$b(f,p),p.defaultPrevented?c.current=!1:o.onClose()}};return N.jsx(rO,{...s,ref:l,disabled:t,onClick:ue(n.onClick,u),onPointerDown:f=>{var p;(p=n.onPointerDown)==null||p.call(n,f),c.current=!0},onPointerUp:ue(n.onPointerUp,f=>{var p;c.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:ue(n.onKeyDown,f=>{const p=a.searchRef.current!=="";t||p&&f.key===" "||$A.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});x_.displayName=ty;var rO=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=$S(ty,t),a=JD(t),l=A.useRef(null),c=xt(e,l),[u,f]=A.useState(!1),[p,m]=A.useState("");return A.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[i.children]),N.jsx(mf.ItemSlot,{scope:t,disabled:r,textValue:s??p,children:N.jsx(rL,{asChild:!0,...a,focusable:!r,children:N.jsx(vt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:ue(n.onPointerMove,gf(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ue(n.onPointerLeave,gf(g=>o.onItemLeave(g))),onFocus:ue(n.onFocus,()=>f(!0)),onBlur:ue(n.onBlur,()=>f(!1))})})})}),Hq="MenuCheckboxItem",sO=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return N.jsx(cO,{scope:n.__scopeMenu,checked:t,children:N.jsx(x_,{role:"menuitemcheckbox","aria-checked":ny(t)?"mixed":t,...s,ref:e,"data-state":GS(t),onSelect:ue(s.onSelect,()=>r==null?void 0:r(ny(t)?!0:!t),{checkForDefaultPrevented:!1})})})});sO.displayName=Hq;var iO="MenuRadioGroup",[Wq,Gq]=ic(iO,{value:void 0,onValueChange:()=>{}}),oO=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=Qn(r);return N.jsx(Wq,{scope:n.__scopeMenu,value:t,onValueChange:i,children:N.jsx(HS,{...s,ref:e})})});oO.displayName=iO;var aO="MenuRadioItem",lO=A.forwardRef((n,e)=>{const{value:t,...r}=n,s=Gq(aO,n.__scopeMenu),i=t===s.value;return N.jsx(cO,{scope:n.__scopeMenu,checked:i,children:N.jsx(x_,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":GS(i),onSelect:ue(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});lO.displayName=aO;var WS="MenuItemIndicator",[cO,qq]=ic(WS,{checked:!1}),uO=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=qq(WS,t);return N.jsx(S_,{present:r||ny(i.checked)||i.checked===!0,children:N.jsx(vt.span,{...s,ref:e,"data-state":GS(i.checked)})})});uO.displayName=WS;var Kq="MenuSeparator",hO=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return N.jsx(vt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});hO.displayName=Kq;var Xq="MenuArrow",dO=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=C_(t);return N.jsx(Lk,{...s,...r,ref:e})});dO.displayName=Xq;var Yq="MenuSub",[uK,fO]=ic(Yq),Ad="MenuSubTrigger",pO=A.forwardRef((n,e)=>{const t=Th(Ad,n.__scopeMenu),r=dm(Ad,n.__scopeMenu),s=fO(Ad,n.__scopeMenu),i=$S(Ad,n.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:n.__scopeMenu},u=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>u,[u]),A.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),N.jsx(US,{asChild:!0,...c,children:N.jsx(rO,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":vO(t.open),...n,ref:Ub(e,s.onTriggerChange),onClick:f=>{var p;(p=n.onClick)==null||p.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:ue(n.onPointerMove,gf(f=>{i.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:ue(n.onPointerLeave,gf(f=>{var m,g;u();const p=(m=t.content)==null?void 0:m.getBoundingClientRect();if(p){const _=(g=t.content)==null?void 0:g.dataset.side,w=_==="right",y=w?-5:5,E=p[w?"left":"right"],S=p[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x:E,y:p.top},{x:S,y:p.top},{x:S,y:p.bottom},{x:E,y:p.bottom}],side:_}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ue(n.onKeyDown,f=>{var m;const p=i.searchRef.current!=="";n.disabled||p&&f.key===" "||Iq[r.dir].includes(f.key)&&(t.onOpenChange(!0),(m=t.content)==null||m.focus(),f.preventDefault())})})})});pO.displayName=Ad;var mO="MenuSubContent",gO=A.forwardRef((n,e)=>{const t=eO(Dr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Th(Dr,n.__scopeMenu),o=dm(Dr,n.__scopeMenu),a=fO(mO,n.__scopeMenu),l=A.useRef(null),c=xt(e,l);return N.jsx(mf.Provider,{scope:n.__scopeMenu,children:N.jsx(S_,{present:r||i.open,children:N.jsx(mf.Slot,{scope:n.__scopeMenu,children:N.jsx(zS,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ue(n.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ue(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ue(n.onKeyDown,u=>{var m;const f=u.currentTarget.contains(u.target),p=kq[o.dir].includes(u.key);f&&p&&(i.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});gO.displayName=mO;function vO(n){return n?"open":"closed"}function ny(n){return n==="indeterminate"}function GS(n){return ny(n)?"indeterminate":n?"checked":"unchecked"}function Qq(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function Jq(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function Zq(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=Jq(n,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function e8(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function t8(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return e8(t,e)}function gf(n){return e=>e.pointerType==="mouse"?n(e):void 0}var n8=ZD,r8=US,s8=tO,i8=HS,o8=nO,a8=x_,l8=sO,c8=oO,u8=lO,h8=uO,d8=hO,f8=dO,p8=pO,m8=gO,R_="Menubar",[zA,g8,v8]=aS(R_),[yO,hK]=$D(R_,[v8,Qy]),Jn=Nq(),_O=Qy(),[y8,qS]=yO(R_),wO=A.forwardRef((n,e)=>{const{__scopeMenubar:t,value:r,onValueChange:s,defaultValue:i,loop:o=!0,dir:a,...l}=n,c=sS(a),u=_O(t),[f="",p]=KI({prop:r,onChange:s,defaultProp:i}),[m,g]=A.useState(null);return N.jsx(y8,{scope:t,value:f,onMenuOpen:A.useCallback(_=>{p(_),g(_)},[p]),onMenuClose:A.useCallback(()=>p(""),[p]),onMenuToggle:A.useCallback(_=>{p(w=>w?"":_),g(_)},[p]),dir:c,loop:o,children:N.jsx(zA.Provider,{scope:t,children:N.jsx(zA.Slot,{scope:t,children:N.jsx(nL,{asChild:!0,...u,orientation:"horizontal",loop:o,dir:c,currentTabStopId:m,onCurrentTabStopIdChange:g,children:N.jsx(vt.div,{role:"menubar",...l,ref:e})})})})})});wO.displayName=R_;var KS="MenubarMenu",[_8,EO]=yO(KS),AO=n=>{const{__scopeMenubar:e,value:t,...r}=n,s=Tg(),i=t||s||"LEGACY_REACT_AUTO_VALUE",o=qS(KS,e),a=Jn(e),l=A.useRef(null),c=A.useRef(!1),u=o.value===i;return A.useEffect(()=>{u||(c.current=!1)},[u]),N.jsx(_8,{scope:e,value:i,triggerId:Tg(),triggerRef:l,contentId:Tg(),wasKeyboardTriggerOpenRef:c,children:N.jsx(n8,{...a,open:u,onOpenChange:f=>{f||o.onMenuClose()},modal:!1,dir:o.dir,...r})})};AO.displayName=KS;var HA="MenubarTrigger",bO=A.forwardRef((n,e)=>{const{__scopeMenubar:t,disabled:r=!1,...s}=n,i=_O(t),o=Jn(t),a=qS(HA,t),l=EO(HA,t),c=A.useRef(null),u=xt(e,c,l.triggerRef),[f,p]=A.useState(!1),m=a.value===l.value;return N.jsx(zA.ItemSlot,{scope:t,value:l.value,disabled:r,children:N.jsx(rL,{asChild:!0,...i,focusable:!r,tabStopId:l.value,children:N.jsx(r8,{asChild:!0,...o,children:N.jsx(vt.button,{type:"button",role:"menuitem",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":m,"aria-controls":m?l.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":m?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:u,onPointerDown:ue(n.onPointerDown,g=>{!r&&g.button===0&&g.ctrlKey===!1&&(a.onMenuOpen(l.value),m||g.preventDefault())}),onPointerEnter:ue(n.onPointerEnter,()=>{var _;!!a.value&&!m&&(a.onMenuOpen(l.value),(_=c.current)==null||_.focus())}),onKeyDown:ue(n.onKeyDown,g=>{r||(["Enter"," "].includes(g.key)&&a.onMenuToggle(l.value),g.key==="ArrowDown"&&a.onMenuOpen(l.value),["Enter"," ","ArrowDown"].includes(g.key)&&(l.wasKeyboardTriggerOpenRef.current=!0,g.preventDefault()))}),onFocus:ue(n.onFocus,()=>p(!0)),onBlur:ue(n.onBlur,()=>p(!1))})})})})});bO.displayName=HA;var WA="MenubarContent",w8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,align:r="start",...s}=n,i=Jn(t),o=qS(WA,t),a=EO(WA,t),l=g8(t),c=A.useRef(!1);return N.jsx(s8,{id:a.contentId,"aria-labelledby":a.triggerId,"data-radix-menubar-content":"",...i,...s,ref:e,align:r,onCloseAutoFocus:ue(n.onCloseAutoFocus,u=>{var p;!!!o.value&&!c.current&&((p=a.triggerRef.current)==null||p.focus()),c.current=!1,u.preventDefault()}),onFocusOutside:ue(n.onFocusOutside,u=>{const f=u.target;l().some(m=>{var g;return(g=m.ref.current)==null?void 0:g.contains(f)})&&u.preventDefault()}),onInteractOutside:ue(n.onInteractOutside,()=>{c.current=!0}),onEntryFocus:u=>{a.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:ue(n.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const f=u.target,p=f.hasAttribute("data-radix-menubar-subtrigger"),m=f.closest("[data-radix-menubar-content]")!==u.currentTarget,_=(o.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!_&&p||m&&_)return;let E=l().filter(O=>!O.disabled).map(O=>O.value);_&&E.reverse();const S=E.indexOf(a.value);E=o.loop?z8(E,S+1):E.slice(S+1);const[R]=E;R&&o.onMenuOpen(R)}},{checkForDefaultPrevented:!1}),style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});w8.displayName=WA;var E8="MenubarGroup",A8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(i8,{...s,...r,ref:e})});A8.displayName=E8;var b8="MenubarLabel",S8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(o8,{...s,...r,ref:e})});S8.displayName=b8;var T8="MenubarItem",C8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(a8,{...s,...r,ref:e})});C8.displayName=T8;var x8="MenubarCheckboxItem",R8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(l8,{...s,...r,ref:e})});R8.displayName=x8;var P8="MenubarRadioGroup",I8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(c8,{...s,...r,ref:e})});I8.displayName=P8;var k8="MenubarRadioItem",L8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(u8,{...s,...r,ref:e})});L8.displayName=k8;var M8="MenubarItemIndicator",N8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(h8,{...s,...r,ref:e})});N8.displayName=M8;var D8="MenubarSeparator",O8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(d8,{...s,...r,ref:e})});O8.displayName=D8;var F8="MenubarArrow",V8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(f8,{...s,...r,ref:e})});V8.displayName=F8;var j8="MenubarSubTrigger",B8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(p8,{"data-radix-menubar-subtrigger":"",...s,...r,ref:e})});B8.displayName=j8;var U8="MenubarSubContent",$8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return N.jsx(m8,{...s,"data-radix-menubar-content":"",...r,ref:e,style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});$8.displayName=U8;function z8(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var mR=wO,gR=AO,ps=bO;const H8="/assets/my_dp-CLCiIRTc.png",SO="/assets/light-mode2-CXNY-Y5o.png",XS="/assets/dark-mode-DCiUdDtp.png",W8="/assets/hamburger-Dk39ClP9.png",G8="/assets/close-WHyibIIa.png";function TO({appearance:n,toggleAppearance:e,isMobile:t}){const r=nj(),s=zy(),[i,o]=A.useState(!1),a=c=>s.pathname===c,l=n==="dark";return N.jsxs("div",{className:`navbar ${t?"mweb":""}`,children:[t&&N.jsx("img",{src:W8,alt:"open Menu",className:"mweb_menu",onClick:()=>o(!0)}),t&&i&&N.jsxs("div",{className:"mobileMenu",children:[N.jsx("img",{src:G8,alt:"Close Menu",className:"closeMenu",onClick:()=>o(!1)}),N.jsx(mR,{className:"MenubarRoot",children:N.jsxs(gR,{children:[N.jsx(ps,{className:`MenubarTrigger ${a("/")?"active":""}`,onClick:()=>{r("/"),o(!1)},children:"Home"}),N.jsx(ps,{className:`MenubarTrigger ${a("/resume")?"active":""}`,onClick:()=>{r("/resume"),o(!1)},children:"Resume"}),N.jsx(ps,{className:`MenubarTrigger ${a("/projects")?"active":""}`,onClick:()=>{r("/projects"),o(!1)},children:"Projects"}),N.jsx(ps,{className:"MenubarTrigger",onClick:()=>window.open("https://www.youtube.com/@g_adarsh_sonu","_blank"),children:"YouTube"}),N.jsx(ps,{className:`MenubarTrigger ${a("/contact")?"active":""}`,onClick:()=>{r("/contact"),o(!1)},children:"Contact"})]})})]}),N.jsx("div",{className:"avatar",children:N.jsx(lU,{className:"AvatarRoot",onClick:()=>r("/"),children:N.jsx(cU,{className:"AvatarImage",src:H8,alt:"G Adarsh Sonu"})})}),!t&&N.jsx("div",{className:"menu",children:N.jsx(mR,{className:"MenubarRoot",children:N.jsxs(gR,{children:[N.jsx(ps,{className:`MenubarTrigger ${a("/")?"active":""}`,onClick:()=>r("/"),children:"Home"}),"|",N.jsx(ps,{className:`MenubarTrigger ${a("/resume")?"active":""}`,onClick:()=>r("/resume"),children:"Resume"}),"|",N.jsx(ps,{className:`MenubarTrigger ${a("/projects")?"active":""}`,onClick:()=>r("/projects"),children:"Projects"}),"|",N.jsx(ps,{className:"MenubarTrigger",onClick:()=>window.open("https://www.youtube.com/@g_adarsh_sonu","_blank"),children:"Youtube"}),"|",N.jsx(ps,{className:`MenubarTrigger ${a("/contact")?"active":""}`,onClick:()=>r("/contact"),children:"Contact"})]})})}),s.pathname==="/"||t?null:N.jsx(N.Fragment,{children:N.jsx("div",{className:"toggleAppearance",onClick:()=>e(l?"light":"dark"),children:N.jsx("div",{className:`themeToggleSwitch ${l?"dark":"light"}`,children:N.jsx("img",{src:l?XS:SO,alt:l?"Dark Mode":"Light Mode",className:"themeIcon"})})})})]})}TO.propTypes={appearance:Fs.string,toggleAppearance:Fs.func,isMobile:Fs.bool};const q8="/assets/light-mode-B0-5GaYb.png",K8="/assets/wakeup-7DiI0iB5.png",X8="/assets/brush-B2t29shi.png",Y8="/assets/bath-D_vJx4hZ.png",Q8="/assets/breakfast-D3ycUHRR.png",dg="/assets/classRoom-3i9sET5N.png",vR="/assets/foodTime-CDE8kr0k.png",yR="/assets/study-B101WApu.png",J8="/assets/gym-BhR6Sjff.png",_R="/assets/socialMedia-0q1VwBTD.png";function CO({appearance:n,toggleAppearance:e}){const[t,r]=A.useState(21),[s,i]=A.useState(t),o=A.useRef(null),[a,l]=A.useState(!1),c=zy();A.useEffect(()=>{const w=setTimeout(()=>l(!0),0);return()=>clearTimeout(w)},[]);const u=w=>{o.current&&clearTimeout(o.current),i(w.target.id)},f=()=>{o.current=setTimeout(()=>i(t),300)},p=(w,y)=>w===y||y===t?"80%":y===w+1||y===w-1?"50%":"30%",m=w=>{r(w),w<8||w>20?e("dark"):e("light")},g=w=>t!==parseInt(w)?null:parseInt(w)===8?N.jsx("img",{className:"modeImage",src:K8}):parseInt(w)===9?N.jsx("img",{className:"modeImage",src:X8}):parseInt(w)===10?N.jsx("img",{className:"modeImage",src:Y8}):parseInt(w)===11?N.jsx("img",{className:"modeImage",src:Q8}):parseInt(w)===12?N.jsx("img",{className:"modeImage",src:dg}):parseInt(w)===13?N.jsx("img",{className:"modeImage",src:vR}):parseInt(w)===14?N.jsx("img",{className:"modeImage",src:dg}):parseInt(w)===15?N.jsx("img",{className:"modeImage",src:dg}):parseInt(w)===16?N.jsx("img",{className:"modeImage",src:dg}):parseInt(w)===17?N.jsx("img",{className:"modeImage",src:yR}):parseInt(w)===18?N.jsx("img",{className:"modeImage",src:yR}):parseInt(w)===19?N.jsx("img",{className:"modeImage",src:J8}):parseInt(w)===20?N.jsx("img",{className:"modeImage",src:_R}):parseInt(w)===21?N.jsx("img",{className:"modeImage",src:_R}):parseInt(w)===22?N.jsx("img",{className:"modeImage",src:vR}):n==="dark"?N.jsx("img",{className:"modeImage",src:XS}):N.jsx("img",{className:"modeImage",src:q8}),_=[{id:"1",time:"1am"},{id:"2",time:"2am"},{id:"3",time:"3am"},{id:"4",time:"4am"},{id:"5",time:"5am"},{id:"6",time:"6am"},{id:"7",time:"7am"},{id:"8",color:"teal",time:"8am"},{id:"9",color:"teal",time:"9am"},{id:"10",color:"teal",time:"10am"},{id:"11",color:"teal",time:"11am"},{id:"12",color:"teal",time:"12pm"},{id:"13",color:"teal",time:"1pm"},{id:"14",color:"teal",time:"2pm"},{id:"15",color:"teal",time:"3pm"},{id:"16",color:"teal",time:"4pm"},{id:"17",color:"teal",time:"5pm"},{id:"18",color:"teal",time:"6pm"},{id:"19",color:"teal",time:"7pm"},{id:"20",color:"teal",time:"8pm"},{id:"21",time:"9pm"},{id:"22",time:"10pm"},{id:"23",time:"11pm"},{id:"24",time:"12am"}];return a&&c.pathname==="/"?N.jsx(Oi,{justify:"center",className:"circadian",children:_.map(({id:w,color:y,time:E})=>N.jsxs("div",{id:w,className:"circadian-seperatorBlock",onMouseEnter:S=>{m(parseInt(w)),u(S)},onMouseLeave:f,children:[g(w),N.jsx(lS,{className:"seperator",orientation:"vertical",style:{height:p(parseInt(s),parseInt(w)),backgroundColor:y}}),String(w)===String(s)&&N.jsx("span",{style:{position:"absolute",bottom:"-25px"},children:N.jsx(Dv,{children:E})})]},w))}):null}CO.propTypes={appearance:Fs.string,toggleAppearance:Fs.func};_S.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();function xO(){const[n,e]=A.useState("dark"),[t,r]=A.useState(window.innerWidth<=736),s=n==="dark",i=()=>{r(window.innerWidth<=736)};A.useEffect(()=>(window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i)}),[]);const o=a=>{e(a)};return N.jsx(Uk,{accentColor:"grass",appearance:n,className:"container",children:N.jsx(wj,{children:N.jsxs(N.Fragment,{children:[N.jsx(TO,{appearance:n,toggleAppearance:o,isMobile:t}),N.jsx("br",{}),N.jsx(UD,{isMobile:t}),N.jsx("br",{}),t?N.jsx(N.Fragment,{children:N.jsx("div",{className:"mwebToggleAppearance",style:{position:"fixed",bottom:"25px",right:"25px"},onClick:()=>o(s?"light":"dark"),children:N.jsx("div",{className:`themeToggleSwitch ${s?"dark":"light"}`,style:{width:"30px",backgroundColor:"darkslategray"},children:N.jsx("img",{src:s?XS:SO,alt:s?"Dark Mode":"Light Mode",className:"themeIcon"})})})}):N.jsxs(N.Fragment,{children:[N.jsx(CO,{appearance:n,toggleAppearance:o}),N.jsx("br",{})]})]})})})}xO.propTypes={appearance:Fs.string};DI(document.getElementById("root")).render(N.jsx(A.StrictMode,{children:N.jsx(xO,{})}));
