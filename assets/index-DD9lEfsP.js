var jO=Object.defineProperty;var $T=n=>{throw TypeError(n)};var UO=(n,e,t)=>e in n?jO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var me=(n,e,t)=>UO(n,typeof e!="symbol"?e+"":e,t),$_=(n,e,t)=>e.has(n)||$T("Cannot "+t);var h=(n,e,t)=>($_(n,e,"read from private field"),t?t.call(n):e.get(n)),I=(n,e,t)=>e.has(n)?$T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),x=(n,e,t,r)=>($_(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),P=(n,e,t)=>($_(n,e,"access private method"),t);var er=(n,e,t,r)=>({set _(s){x(n,e,s,t)},get _(){return h(n,e,r)}});function $O(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function _y(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hR={exports:{}},Ey={},dR={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp=Symbol.for("react.element"),zO=Symbol.for("react.portal"),HO=Symbol.for("react.fragment"),WO=Symbol.for("react.strict_mode"),GO=Symbol.for("react.profiler"),qO=Symbol.for("react.provider"),KO=Symbol.for("react.context"),XO=Symbol.for("react.forward_ref"),YO=Symbol.for("react.suspense"),QO=Symbol.for("react.memo"),JO=Symbol.for("react.lazy"),zT=Symbol.iterator;function ZO(n){return n===null||typeof n!="object"?null:(n=zT&&n[zT]||n["@@iterator"],typeof n=="function"?n:null)}var fR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pR=Object.assign,gR={};function hh(n,e,t){this.props=n,this.context=e,this.refs=gR,this.updater=t||fR}hh.prototype.isReactComponent={};hh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};hh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function mR(){}mR.prototype=hh.prototype;function UA(n,e,t){this.props=n,this.context=e,this.refs=gR,this.updater=t||fR}var $A=UA.prototype=new mR;$A.constructor=UA;pR($A,hh.prototype);$A.isPureReactComponent=!0;var HT=Array.isArray,vR=Object.prototype.hasOwnProperty,zA={current:null},yR={key:!0,ref:!0,__self:!0,__source:!0};function _R(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)vR.call(e,r)&&!yR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Kp,type:n,key:i,ref:o,props:s,_owner:zA.current}}function eF(n,e){return{$$typeof:Kp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function HA(n){return typeof n=="object"&&n!==null&&n.$$typeof===Kp}function tF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var WT=/\/+/g;function z_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?tF(""+n.key):e.toString(36)}function hm(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Kp:case zO:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+z_(o,0):r,HT(s)?(t="",n!=null&&(t=n.replace(WT,"$&/")+"/"),hm(s,e,t,"",function(c){return c})):s!=null&&(HA(s)&&(s=eF(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(WT,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",HT(n))for(var a=0;a<n.length;a++){i=n[a];var l=r+z_(i,a);o+=hm(i,e,t,l,s)}else if(l=ZO(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=r+z_(i,a++),o+=hm(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rg(n,e,t){if(n==null)return n;var r=[],s=0;return hm(n,r,"","",function(i){return e.call(t,i,s++)}),r}function nF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Nn={current:null},dm={transition:null},rF={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:dm,ReactCurrentOwner:zA};function ER(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Rg,forEach:function(n,e,t){Rg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Rg(n,function(){e++}),e},toArray:function(n){return Rg(n,function(e){return e})||[]},only:function(n){if(!HA(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};we.Component=hh;we.Fragment=HO;we.Profiler=GO;we.PureComponent=UA;we.StrictMode=WO;we.Suspense=YO;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rF;we.act=ER;we.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=pR({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=zA.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)vR.call(e,l)&&!yR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Kp,type:n.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(n){return n={$$typeof:KO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:qO,_context:n},n.Consumer=n};we.createElement=_R;we.createFactory=function(n){var e=_R.bind(null,n);return e.type=n,e};we.createRef=function(){return{current:null}};we.forwardRef=function(n){return{$$typeof:XO,render:n}};we.isValidElement=HA;we.lazy=function(n){return{$$typeof:JO,_payload:{_status:-1,_result:n},_init:nF}};we.memo=function(n,e){return{$$typeof:QO,type:n,compare:e===void 0?null:e}};we.startTransition=function(n){var e=dm.transition;dm.transition={};try{n()}finally{dm.transition=e}};we.unstable_act=ER;we.useCallback=function(n,e){return Nn.current.useCallback(n,e)};we.useContext=function(n){return Nn.current.useContext(n)};we.useDebugValue=function(){};we.useDeferredValue=function(n){return Nn.current.useDeferredValue(n)};we.useEffect=function(n,e){return Nn.current.useEffect(n,e)};we.useId=function(){return Nn.current.useId()};we.useImperativeHandle=function(n,e,t){return Nn.current.useImperativeHandle(n,e,t)};we.useInsertionEffect=function(n,e){return Nn.current.useInsertionEffect(n,e)};we.useLayoutEffect=function(n,e){return Nn.current.useLayoutEffect(n,e)};we.useMemo=function(n,e){return Nn.current.useMemo(n,e)};we.useReducer=function(n,e,t){return Nn.current.useReducer(n,e,t)};we.useRef=function(n){return Nn.current.useRef(n)};we.useState=function(n){return Nn.current.useState(n)};we.useSyncExternalStore=function(n,e,t){return Nn.current.useSyncExternalStore(n,e,t)};we.useTransition=function(){return Nn.current.useTransition()};we.version="18.3.1";dR.exports=we;var A=dR.exports;const eo=_y(A),wR=$O({__proto__:null,default:eo},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF=A,iF=Symbol.for("react.element"),oF=Symbol.for("react.fragment"),aF=Object.prototype.hasOwnProperty,lF=sF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cF={key:!0,ref:!0,__self:!0,__source:!0};function AR(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)aF.call(e,r)&&!cF.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:iF,type:n,key:i,ref:o,props:s,_owner:lF.current}}Ey.Fragment=oF;Ey.jsx=AR;Ey.jsxs=AR;hR.exports=Ey;var V=hR.exports,bR={exports:{}},_r={},SR={exports:{}},TR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,z){var X=U.length;U.push(z);e:for(;0<X;){var ce=X-1>>>1,se=U[ce];if(0<s(se,z))U[ce]=z,U[X]=se,X=ce;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var z=U[0],X=U.pop();if(X!==z){U[0]=X;e:for(var ce=0,se=U.length,ae=se>>>1;ce<ae;){var je=2*(ce+1)-1,Ue=U[je],Pe=je+1,fe=U[Pe];if(0>s(Ue,X))Pe<se&&0>s(fe,Ue)?(U[ce]=fe,U[Pe]=X,ce=Pe):(U[ce]=Ue,U[je]=X,ce=je);else if(Pe<se&&0>s(fe,X))U[ce]=fe,U[Pe]=X,ce=Pe;else break e}}return z}function s(U,z){var X=U.sortIndex-z.sortIndex;return X!==0?X:U.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,g=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var z=t(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=U)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=t(c)}}function R(U){if(y=!1,S(U),!m)if(t(l)!==null)m=!0,Z(D);else{var z=t(c);z!==null&&W(R,z.startTime-U)}}function D(U,z){m=!1,y&&(y=!1,_(T),T=-1),g=!0;var X=p;try{for(S(z),f=t(l);f!==null&&(!(f.expirationTime>z)||U&&!O());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,p=f.priorityLevel;var se=ce(f.expirationTime<=z);z=n.unstable_now(),typeof se=="function"?f.callback=se:f===t(l)&&r(l),S(z)}else r(l);f=t(l)}if(f!==null)var ae=!0;else{var je=t(c);je!==null&&W(R,je.startTime-z),ae=!1}return ae}finally{f=null,p=X,g=!1}}var F=!1,C=null,T=-1,k=5,M=-1;function O(){return!(n.unstable_now()-M<k)}function B(){if(C!==null){var U=n.unstable_now();M=U;var z=!0;try{z=C(!0,U)}finally{z?N():(F=!1,C=null)}}else F=!1}var N;if(typeof E=="function")N=function(){E(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,re=q.port2;q.port1.onmessage=B,N=function(){re.postMessage(null)}}else N=function(){w(B,0)};function Z(U){C=U,F||(F=!0,N())}function W(U,z){T=w(function(){U(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){m||g||(m=!0,Z(D))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var X=p;p=z;try{return U()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=p;p=U;try{return z()}finally{p=X}},n.unstable_scheduleCallback=function(U,z,X){var ce=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=X+se,U={id:u++,callback:z,priorityLevel:U,startTime:X,expirationTime:se,sortIndex:-1},X>ce?(U.sortIndex=X,e(c,U),t(l)===null&&U===t(c)&&(y?(_(T),T=-1):y=!0,W(R,X-ce))):(U.sortIndex=se,e(l,U),m||g||(m=!0,Z(D))),U},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(U){var z=p;return function(){var X=p;p=z;try{return U.apply(this,arguments)}finally{p=X}}}})(TR);SR.exports=TR;var uF=SR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hF=A,yr=uF;function G(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CR=new Set,Bd={};function Xl(n,e){Ku(n,e),Ku(n+"Capture",e)}function Ku(n,e){for(Bd[n]=e,n=0;n<e.length;n++)CR.add(e[n])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H0=Object.prototype.hasOwnProperty,dF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,GT={},qT={};function fF(n){return H0.call(qT,n)?!0:H0.call(GT,n)?!1:dF.test(n)?qT[n]=!0:(GT[n]=!0,!1)}function pF(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function gF(n,e,t,r){if(e===null||typeof e>"u"||pF(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dn(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){on[n]=new Dn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];on[e]=new Dn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){on[n]=new Dn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){on[n]=new Dn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){on[n]=new Dn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){on[n]=new Dn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){on[n]=new Dn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){on[n]=new Dn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){on[n]=new Dn(n,5,!1,n.toLowerCase(),null,!1,!1)});var WA=/[\-:]([a-z])/g;function GA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(WA,GA);on[e]=new Dn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(WA,GA);on[e]=new Dn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(WA,GA);on[e]=new Dn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){on[n]=new Dn(n,1,!1,n.toLowerCase(),null,!1,!1)});on.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){on[n]=new Dn(n,1,!1,n.toLowerCase(),null,!0,!0)});function qA(n,e,t,r){var s=on.hasOwnProperty(e)?on[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gF(e,t,s,r)&&(t=null),r||s===null?fF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Xi=hF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pg=Symbol.for("react.element"),Tc=Symbol.for("react.portal"),Cc=Symbol.for("react.fragment"),KA=Symbol.for("react.strict_mode"),W0=Symbol.for("react.profiler"),xR=Symbol.for("react.provider"),RR=Symbol.for("react.context"),XA=Symbol.for("react.forward_ref"),G0=Symbol.for("react.suspense"),q0=Symbol.for("react.suspense_list"),YA=Symbol.for("react.memo"),io=Symbol.for("react.lazy"),PR=Symbol.for("react.offscreen"),KT=Symbol.iterator;function jh(n){return n===null||typeof n!="object"?null:(n=KT&&n[KT]||n["@@iterator"],typeof n=="function"?n:null)}var ct=Object.assign,H_;function Zh(n){if(H_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);H_=e&&e[1]||""}return`
`+H_+n}var W_=!1;function G_(n,e){if(!n||W_)return"";W_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{W_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Zh(n):""}function mF(n){switch(n.tag){case 5:return Zh(n.type);case 16:return Zh("Lazy");case 13:return Zh("Suspense");case 19:return Zh("SuspenseList");case 0:case 2:case 15:return n=G_(n.type,!1),n;case 11:return n=G_(n.type.render,!1),n;case 1:return n=G_(n.type,!0),n;default:return""}}function K0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Cc:return"Fragment";case Tc:return"Portal";case W0:return"Profiler";case KA:return"StrictMode";case G0:return"Suspense";case q0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case RR:return(n.displayName||"Context")+".Consumer";case xR:return(n._context.displayName||"Context")+".Provider";case XA:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case YA:return e=n.displayName||null,e!==null?e:K0(n.type)||"Memo";case io:e=n._payload,n=n._init;try{return K0(n(e))}catch{}}return null}function vF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K0(e);case 8:return e===KA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ko(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function IR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yF(n){var e=IR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ig(n){n._valueTracker||(n._valueTracker=yF(n))}function kR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=IR(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function sv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function X0(n,e){var t=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function XT(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ko(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LR(n,e){e=e.checked,e!=null&&qA(n,"checked",e,!1)}function Y0(n,e){LR(n,e);var t=Ko(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Q0(n,e.type,t):e.hasOwnProperty("defaultValue")&&Q0(n,e.type,Ko(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function YT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Q0(n,e,t){(e!=="number"||sv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ed=Array.isArray;function Vc(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ko(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function J0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function QT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(G(92));if(ed(t)){if(1<t.length)throw Error(G(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ko(t)}}function MR(n,e){var t=Ko(e.value),r=Ko(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function JT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function NR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Z0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?NR(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var kg,DR=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(kg=kg||document.createElement("div"),kg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function jd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_F=["Webkit","ms","Moz","O"];Object.keys(Ad).forEach(function(n){_F.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ad[e]=Ad[n]})});function OR(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ad.hasOwnProperty(n)&&Ad[n]?(""+e).trim():e+"px"}function FR(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=OR(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var EF=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eE(n,e){if(e){if(EF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function tE(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nE=null;function QA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var rE=null,Bc=null,jc=null;function ZT(n){if(n=Qp(n)){if(typeof rE!="function")throw Error(G(280));var e=n.stateNode;e&&(e=Ty(e),rE(n.stateNode,n.type,e))}}function VR(n){Bc?jc?jc.push(n):jc=[n]:Bc=n}function BR(){if(Bc){var n=Bc,e=jc;if(jc=Bc=null,ZT(n),e)for(n=0;n<e.length;n++)ZT(e[n])}}function jR(n,e){return n(e)}function UR(){}var q_=!1;function $R(n,e,t){if(q_)return n(e,t);q_=!0;try{return jR(n,e,t)}finally{q_=!1,(Bc!==null||jc!==null)&&(UR(),BR())}}function Ud(n,e){var t=n.stateNode;if(t===null)return null;var r=Ty(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(G(231,e,typeof t));return t}var sE=!1;if(Bi)try{var Uh={};Object.defineProperty(Uh,"passive",{get:function(){sE=!0}}),window.addEventListener("test",Uh,Uh),window.removeEventListener("test",Uh,Uh)}catch{sE=!1}function wF(n,e,t,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var bd=!1,iv=null,ov=!1,iE=null,AF={onError:function(n){bd=!0,iv=n}};function bF(n,e,t,r,s,i,o,a,l){bd=!1,iv=null,wF.apply(AF,arguments)}function SF(n,e,t,r,s,i,o,a,l){if(bF.apply(this,arguments),bd){if(bd){var c=iv;bd=!1,iv=null}else throw Error(G(198));ov||(ov=!0,iE=c)}}function Yl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function zR(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function eC(n){if(Yl(n)!==n)throw Error(G(188))}function TF(n){var e=n.alternate;if(!e){if(e=Yl(n),e===null)throw Error(G(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return eC(s),n;if(i===r)return eC(s),e;i=i.sibling}throw Error(G(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(G(189))}}if(t.alternate!==r)throw Error(G(190))}if(t.tag!==3)throw Error(G(188));return t.stateNode.current===t?n:e}function HR(n){return n=TF(n),n!==null?WR(n):null}function WR(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=WR(n);if(e!==null)return e;n=n.sibling}return null}var GR=yr.unstable_scheduleCallback,tC=yr.unstable_cancelCallback,CF=yr.unstable_shouldYield,xF=yr.unstable_requestPaint,Et=yr.unstable_now,RF=yr.unstable_getCurrentPriorityLevel,JA=yr.unstable_ImmediatePriority,qR=yr.unstable_UserBlockingPriority,av=yr.unstable_NormalPriority,PF=yr.unstable_LowPriority,KR=yr.unstable_IdlePriority,wy=null,Ms=null;function IF(n){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(wy,n,void 0,(n.current.flags&128)===128)}catch{}}var is=Math.clz32?Math.clz32:MF,kF=Math.log,LF=Math.LN2;function MF(n){return n>>>=0,n===0?32:31-(kF(n)/LF|0)|0}var Lg=64,Mg=4194304;function td(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function lv(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=td(a):(i&=o,i!==0&&(r=td(i)))}else o=t&~s,o!==0?r=td(o):i!==0&&(r=td(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-is(e),s=1<<t,r|=n[t],e&=~s;return r}function NF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DF(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-is(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&r)&&(s[o]=NF(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function oE(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function XR(){var n=Lg;return Lg<<=1,!(Lg&4194240)&&(Lg=64),n}function K_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Xp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-is(e),n[e]=t}function OF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-is(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function ZA(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-is(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Be=0;function YR(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var QR,eb,JR,ZR,eP,aE=!1,Ng=[],Fo=null,Vo=null,Bo=null,$d=new Map,zd=new Map,ao=[],FF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nC(n,e){switch(n){case"focusin":case"focusout":Fo=null;break;case"dragenter":case"dragleave":Vo=null;break;case"mouseover":case"mouseout":Bo=null;break;case"pointerover":case"pointerout":$d.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zd.delete(e.pointerId)}}function $h(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qp(e),e!==null&&eb(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function VF(n,e,t,r,s){switch(e){case"focusin":return Fo=$h(Fo,n,e,t,r,s),!0;case"dragenter":return Vo=$h(Vo,n,e,t,r,s),!0;case"mouseover":return Bo=$h(Bo,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return $d.set(i,$h($d.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zd.set(i,$h(zd.get(i)||null,n,e,t,r,s)),!0}return!1}function tP(n){var e=Ia(n.target);if(e!==null){var t=Yl(e);if(t!==null){if(e=t.tag,e===13){if(e=zR(t),e!==null){n.blockedOn=e,eP(n.priority,function(){JR(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=lE(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);nE=r,t.target.dispatchEvent(r),nE=null}else return e=Qp(t),e!==null&&eb(e),n.blockedOn=t,!1;e.shift()}return!0}function rC(n,e,t){fm(n)&&t.delete(e)}function BF(){aE=!1,Fo!==null&&fm(Fo)&&(Fo=null),Vo!==null&&fm(Vo)&&(Vo=null),Bo!==null&&fm(Bo)&&(Bo=null),$d.forEach(rC),zd.forEach(rC)}function zh(n,e){n.blockedOn===e&&(n.blockedOn=null,aE||(aE=!0,yr.unstable_scheduleCallback(yr.unstable_NormalPriority,BF)))}function Hd(n){function e(s){return zh(s,n)}if(0<Ng.length){zh(Ng[0],n);for(var t=1;t<Ng.length;t++){var r=Ng[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Fo!==null&&zh(Fo,n),Vo!==null&&zh(Vo,n),Bo!==null&&zh(Bo,n),$d.forEach(e),zd.forEach(e),t=0;t<ao.length;t++)r=ao[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<ao.length&&(t=ao[0],t.blockedOn===null);)tP(t),t.blockedOn===null&&ao.shift()}var Uc=Xi.ReactCurrentBatchConfig,cv=!0;function jF(n,e,t,r){var s=Be,i=Uc.transition;Uc.transition=null;try{Be=1,tb(n,e,t,r)}finally{Be=s,Uc.transition=i}}function UF(n,e,t,r){var s=Be,i=Uc.transition;Uc.transition=null;try{Be=4,tb(n,e,t,r)}finally{Be=s,Uc.transition=i}}function tb(n,e,t,r){if(cv){var s=lE(n,e,t,r);if(s===null)s0(n,e,r,uv,t),nC(n,r);else if(VF(s,n,e,t,r))r.stopPropagation();else if(nC(n,r),e&4&&-1<FF.indexOf(n)){for(;s!==null;){var i=Qp(s);if(i!==null&&QR(i),i=lE(n,e,t,r),i===null&&s0(n,e,r,uv,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else s0(n,e,r,null,t)}}var uv=null;function lE(n,e,t,r){if(uv=null,n=QA(r),n=Ia(n),n!==null)if(e=Yl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=zR(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return uv=n,null}function nP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RF()){case JA:return 1;case qR:return 4;case av:case PF:return 16;case KR:return 536870912;default:return 16}default:return 16}}var Lo=null,nb=null,pm=null;function rP(){if(pm)return pm;var n,e=nb,t=e.length,r,s="value"in Lo?Lo.value:Lo.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return pm=s.slice(n,1<r?1-r:void 0)}function gm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Dg(){return!0}function sC(){return!1}function Er(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dg:sC,this.isPropagationStopped=sC,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Dg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Dg)},persist:function(){},isPersistent:Dg}),e}var dh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rb=Er(dh),Yp=ct({},dh,{view:0,detail:0}),$F=Er(Yp),X_,Y_,Hh,Ay=ct({},Yp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Hh&&(Hh&&n.type==="mousemove"?(X_=n.screenX-Hh.screenX,Y_=n.screenY-Hh.screenY):Y_=X_=0,Hh=n),X_)},movementY:function(n){return"movementY"in n?n.movementY:Y_}}),iC=Er(Ay),zF=ct({},Ay,{dataTransfer:0}),HF=Er(zF),WF=ct({},Yp,{relatedTarget:0}),Q_=Er(WF),GF=ct({},dh,{animationName:0,elapsedTime:0,pseudoElement:0}),qF=Er(GF),KF=ct({},dh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),XF=Er(KF),YF=ct({},dh,{data:0}),oC=Er(YF),QF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e2(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=ZF[n])?!!e[n]:!1}function sb(){return e2}var t2=ct({},Yp,{key:function(n){if(n.key){var e=QF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=gm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?JF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sb,charCode:function(n){return n.type==="keypress"?gm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),n2=Er(t2),r2=ct({},Ay,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aC=Er(r2),s2=ct({},Yp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sb}),i2=Er(s2),o2=ct({},dh,{propertyName:0,elapsedTime:0,pseudoElement:0}),a2=Er(o2),l2=ct({},Ay,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),c2=Er(l2),u2=[9,13,27,32],ib=Bi&&"CompositionEvent"in window,Sd=null;Bi&&"documentMode"in document&&(Sd=document.documentMode);var h2=Bi&&"TextEvent"in window&&!Sd,sP=Bi&&(!ib||Sd&&8<Sd&&11>=Sd),lC=" ",cC=!1;function iP(n,e){switch(n){case"keyup":return u2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xc=!1;function d2(n,e){switch(n){case"compositionend":return oP(e);case"keypress":return e.which!==32?null:(cC=!0,lC);case"textInput":return n=e.data,n===lC&&cC?null:n;default:return null}}function f2(n,e){if(xc)return n==="compositionend"||!ib&&iP(n,e)?(n=rP(),pm=nb=Lo=null,xc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sP&&e.locale!=="ko"?null:e.data;default:return null}}var p2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!p2[n.type]:e==="textarea"}function aP(n,e,t,r){VR(r),e=hv(e,"onChange"),0<e.length&&(t=new rb("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Td=null,Wd=null;function g2(n){yP(n,0)}function by(n){var e=Ic(n);if(kR(e))return n}function m2(n,e){if(n==="change")return e}var lP=!1;if(Bi){var J_;if(Bi){var Z_="oninput"in document;if(!Z_){var hC=document.createElement("div");hC.setAttribute("oninput","return;"),Z_=typeof hC.oninput=="function"}J_=Z_}else J_=!1;lP=J_&&(!document.documentMode||9<document.documentMode)}function dC(){Td&&(Td.detachEvent("onpropertychange",cP),Wd=Td=null)}function cP(n){if(n.propertyName==="value"&&by(Wd)){var e=[];aP(e,Wd,n,QA(n)),$R(g2,e)}}function v2(n,e,t){n==="focusin"?(dC(),Td=e,Wd=t,Td.attachEvent("onpropertychange",cP)):n==="focusout"&&dC()}function y2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return by(Wd)}function _2(n,e){if(n==="click")return by(e)}function E2(n,e){if(n==="input"||n==="change")return by(e)}function w2(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var as=typeof Object.is=="function"?Object.is:w2;function Gd(n,e){if(as(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!H0.call(e,s)||!as(n[s],e[s]))return!1}return!0}function fC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pC(n,e){var t=fC(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=fC(t)}}function uP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?uP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function hP(){for(var n=window,e=sv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=sv(n.document)}return e}function ob(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function A2(n){var e=hP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&uP(t.ownerDocument.documentElement,t)){if(r!==null&&ob(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=pC(t,i);var o=pC(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var b2=Bi&&"documentMode"in document&&11>=document.documentMode,Rc=null,cE=null,Cd=null,uE=!1;function gC(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;uE||Rc==null||Rc!==sv(r)||(r=Rc,"selectionStart"in r&&ob(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cd&&Gd(Cd,r)||(Cd=r,r=hv(cE,"onSelect"),0<r.length&&(e=new rb("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Rc)))}function Og(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Pc={animationend:Og("Animation","AnimationEnd"),animationiteration:Og("Animation","AnimationIteration"),animationstart:Og("Animation","AnimationStart"),transitionend:Og("Transition","TransitionEnd")},e0={},dP={};Bi&&(dP=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function Sy(n){if(e0[n])return e0[n];if(!Pc[n])return n;var e=Pc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in dP)return e0[n]=e[t];return n}var fP=Sy("animationend"),pP=Sy("animationiteration"),gP=Sy("animationstart"),mP=Sy("transitionend"),vP=new Map,mC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function la(n,e){vP.set(n,e),Xl(e,[n])}for(var t0=0;t0<mC.length;t0++){var n0=mC[t0],S2=n0.toLowerCase(),T2=n0[0].toUpperCase()+n0.slice(1);la(S2,"on"+T2)}la(fP,"onAnimationEnd");la(pP,"onAnimationIteration");la(gP,"onAnimationStart");la("dblclick","onDoubleClick");la("focusin","onFocus");la("focusout","onBlur");la(mP,"onTransitionEnd");Ku("onMouseEnter",["mouseout","mouseover"]);Ku("onMouseLeave",["mouseout","mouseover"]);Ku("onPointerEnter",["pointerout","pointerover"]);Ku("onPointerLeave",["pointerout","pointerover"]);Xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("cancel close invalid load scroll toggle".split(" ").concat(nd));function vC(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,SF(r,e,void 0,n),n.currentTarget=null}function yP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;vC(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;vC(s,a,c),i=l}}}if(ov)throw n=iE,ov=!1,iE=null,n}function et(n,e){var t=e[gE];t===void 0&&(t=e[gE]=new Set);var r=n+"__bubble";t.has(r)||(_P(e,n,2,!1),t.add(r))}function r0(n,e,t){var r=0;e&&(r|=4),_P(t,n,r,e)}var Fg="_reactListening"+Math.random().toString(36).slice(2);function qd(n){if(!n[Fg]){n[Fg]=!0,CR.forEach(function(t){t!=="selectionchange"&&(C2.has(t)||r0(t,!1,n),r0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Fg]||(e[Fg]=!0,r0("selectionchange",!1,e))}}function _P(n,e,t,r){switch(nP(e)){case 1:var s=jF;break;case 4:s=UF;break;default:s=tb}t=s.bind(null,e,t,n),s=void 0,!sE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function s0(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ia(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}$R(function(){var c=i,u=QA(t),f=[];e:{var p=vP.get(n);if(p!==void 0){var g=rb,m=n;switch(n){case"keypress":if(gm(t)===0)break e;case"keydown":case"keyup":g=n2;break;case"focusin":m="focus",g=Q_;break;case"focusout":m="blur",g=Q_;break;case"beforeblur":case"afterblur":g=Q_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=iC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=HF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=i2;break;case fP:case pP:case gP:g=qF;break;case mP:g=a2;break;case"scroll":g=$F;break;case"wheel":g=c2;break;case"copy":case"cut":case"paste":g=XF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=aC}var y=(e&4)!==0,w=!y&&n==="scroll",_=y?p!==null?p+"Capture":null:p;y=[];for(var E=c,S;E!==null;){S=E;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,_!==null&&(R=Ud(E,_),R!=null&&y.push(Kd(E,R,S)))),w)break;E=E.return}0<y.length&&(p=new g(p,m,null,t,u),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==nE&&(m=t.relatedTarget||t.fromElement)&&(Ia(m)||m[ji]))break e;if((g||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,g?(m=t.relatedTarget||t.toElement,g=c,m=m?Ia(m):null,m!==null&&(w=Yl(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(y=iC,R="onMouseLeave",_="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(y=aC,R="onPointerLeave",_="onPointerEnter",E="pointer"),w=g==null?p:Ic(g),S=m==null?p:Ic(m),p=new y(R,E+"leave",g,t,u),p.target=w,p.relatedTarget=S,R=null,Ia(u)===c&&(y=new y(_,E+"enter",m,t,u),y.target=S,y.relatedTarget=w,R=y),w=R,g&&m)t:{for(y=g,_=m,E=0,S=y;S;S=cc(S))E++;for(S=0,R=_;R;R=cc(R))S++;for(;0<E-S;)y=cc(y),E--;for(;0<S-E;)_=cc(_),S--;for(;E--;){if(y===_||_!==null&&y===_.alternate)break t;y=cc(y),_=cc(_)}y=null}else y=null;g!==null&&yC(f,p,g,y,!1),m!==null&&w!==null&&yC(f,w,m,y,!0)}}e:{if(p=c?Ic(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=m2;else if(uC(p))if(lP)D=E2;else{D=y2;var F=v2}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=_2);if(D&&(D=D(n,c))){aP(f,D,t,u);break e}F&&F(n,p,c),n==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&Q0(p,"number",p.value)}switch(F=c?Ic(c):window,n){case"focusin":(uC(F)||F.contentEditable==="true")&&(Rc=F,cE=c,Cd=null);break;case"focusout":Cd=cE=Rc=null;break;case"mousedown":uE=!0;break;case"contextmenu":case"mouseup":case"dragend":uE=!1,gC(f,t,u);break;case"selectionchange":if(b2)break;case"keydown":case"keyup":gC(f,t,u)}var C;if(ib)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else xc?iP(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(sP&&t.locale!=="ko"&&(xc||T!=="onCompositionStart"?T==="onCompositionEnd"&&xc&&(C=rP()):(Lo=u,nb="value"in Lo?Lo.value:Lo.textContent,xc=!0)),F=hv(c,T),0<F.length&&(T=new oC(T,n,null,t,u),f.push({event:T,listeners:F}),C?T.data=C:(C=oP(t),C!==null&&(T.data=C)))),(C=h2?d2(n,t):f2(n,t))&&(c=hv(c,"onBeforeInput"),0<c.length&&(u=new oC("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=C))}yP(f,e)})}function Kd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function hv(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ud(n,t),i!=null&&r.unshift(Kd(n,i,s)),i=Ud(n,e),i!=null&&r.push(Kd(n,i,s))),n=n.return}return r}function cc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function yC(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ud(t,i),l!=null&&o.unshift(Kd(t,l,a))):s||(l=Ud(t,i),l!=null&&o.push(Kd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var x2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function _C(n){return(typeof n=="string"?n:""+n).replace(x2,`
`).replace(R2,"")}function Vg(n,e,t){if(e=_C(e),_C(n)!==e&&t)throw Error(G(425))}function dv(){}var hE=null,dE=null;function fE(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pE=typeof setTimeout=="function"?setTimeout:void 0,P2=typeof clearTimeout=="function"?clearTimeout:void 0,EC=typeof Promise=="function"?Promise:void 0,I2=typeof queueMicrotask=="function"?queueMicrotask:typeof EC<"u"?function(n){return EC.resolve(null).then(n).catch(k2)}:pE;function k2(n){setTimeout(function(){throw n})}function i0(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Hd(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Hd(e)}function jo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function wC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var fh=Math.random().toString(36).slice(2),Is="__reactFiber$"+fh,Xd="__reactProps$"+fh,ji="__reactContainer$"+fh,gE="__reactEvents$"+fh,L2="__reactListeners$"+fh,M2="__reactHandles$"+fh;function Ia(n){var e=n[Is];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ji]||t[Is]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=wC(n);n!==null;){if(t=n[Is])return t;n=wC(n)}return e}n=t,t=n.parentNode}return null}function Qp(n){return n=n[Is]||n[ji],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ic(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(G(33))}function Ty(n){return n[Xd]||null}var mE=[],kc=-1;function ca(n){return{current:n}}function tt(n){0>kc||(n.current=mE[kc],mE[kc]=null,kc--)}function Qe(n,e){kc++,mE[kc]=n.current,n.current=e}var Xo={},An=ca(Xo),Wn=ca(!1),Ol=Xo;function Xu(n,e){var t=n.type.contextTypes;if(!t)return Xo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Gn(n){return n=n.childContextTypes,n!=null}function fv(){tt(Wn),tt(An)}function AC(n,e,t){if(An.current!==Xo)throw Error(G(168));Qe(An,e),Qe(Wn,t)}function EP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,vF(n)||"Unknown",s));return ct({},t,r)}function pv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xo,Ol=An.current,Qe(An,n),Qe(Wn,Wn.current),!0}function bC(n,e,t){var r=n.stateNode;if(!r)throw Error(G(169));t?(n=EP(n,e,Ol),r.__reactInternalMemoizedMergedChildContext=n,tt(Wn),tt(An),Qe(An,n)):tt(Wn),Qe(Wn,t)}var ii=null,Cy=!1,o0=!1;function wP(n){ii===null?ii=[n]:ii.push(n)}function N2(n){Cy=!0,wP(n)}function ua(){if(!o0&&ii!==null){o0=!0;var n=0,e=Be;try{var t=ii;for(Be=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ii=null,Cy=!1}catch(s){throw ii!==null&&(ii=ii.slice(n+1)),GR(JA,ua),s}finally{Be=e,o0=!1}}return null}var Lc=[],Mc=0,gv=null,mv=0,Rr=[],Pr=0,Fl=null,ki=1,Li="";function Aa(n,e){Lc[Mc++]=mv,Lc[Mc++]=gv,gv=n,mv=e}function AP(n,e,t){Rr[Pr++]=ki,Rr[Pr++]=Li,Rr[Pr++]=Fl,Fl=n;var r=ki;n=Li;var s=32-is(r)-1;r&=~(1<<s),t+=1;var i=32-is(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ki=1<<32-is(e)+s|t<<s|r,Li=i+n}else ki=1<<i|t<<s|r,Li=n}function ab(n){n.return!==null&&(Aa(n,1),AP(n,1,0))}function lb(n){for(;n===gv;)gv=Lc[--Mc],Lc[Mc]=null,mv=Lc[--Mc],Lc[Mc]=null;for(;n===Fl;)Fl=Rr[--Pr],Rr[Pr]=null,Li=Rr[--Pr],Rr[Pr]=null,ki=Rr[--Pr],Rr[Pr]=null}var mr=null,gr=null,nt=!1,rs=null;function bP(n,e){var t=Lr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function SC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,mr=n,gr=jo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,mr=n,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Fl!==null?{id:ki,overflow:Li}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Lr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,mr=n,gr=null,!0):!1;default:return!1}}function vE(n){return(n.mode&1)!==0&&(n.flags&128)===0}function yE(n){if(nt){var e=gr;if(e){var t=e;if(!SC(n,e)){if(vE(n))throw Error(G(418));e=jo(t.nextSibling);var r=mr;e&&SC(n,e)?bP(r,t):(n.flags=n.flags&-4097|2,nt=!1,mr=n)}}else{if(vE(n))throw Error(G(418));n.flags=n.flags&-4097|2,nt=!1,mr=n}}}function TC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mr=n}function Bg(n){if(n!==mr)return!1;if(!nt)return TC(n),nt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!fE(n.type,n.memoizedProps)),e&&(e=gr)){if(vE(n))throw SP(),Error(G(418));for(;e;)bP(n,e),e=jo(e.nextSibling)}if(TC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(G(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){gr=jo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}gr=null}}else gr=mr?jo(n.stateNode.nextSibling):null;return!0}function SP(){for(var n=gr;n;)n=jo(n.nextSibling)}function Yu(){gr=mr=null,nt=!1}function cb(n){rs===null?rs=[n]:rs.push(n)}var D2=Xi.ReactCurrentBatchConfig;function Wh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(G(309));var r=t.stateNode}if(!r)throw Error(G(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(G(284));if(!t._owner)throw Error(G(290,n))}return n}function jg(n,e){throw n=Object.prototype.toString.call(e),Error(G(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function CC(n){var e=n._init;return e(n._payload)}function TP(n){function e(_,E){if(n){var S=_.deletions;S===null?(_.deletions=[E],_.flags|=16):S.push(E)}}function t(_,E){if(!n)return null;for(;E!==null;)e(_,E),E=E.sibling;return null}function r(_,E){for(_=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function s(_,E){return _=Ho(_,E),_.index=0,_.sibling=null,_}function i(_,E,S){return _.index=S,n?(S=_.alternate,S!==null?(S=S.index,S<E?(_.flags|=2,E):S):(_.flags|=2,E)):(_.flags|=1048576,E)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,E,S,R){return E===null||E.tag!==6?(E=f0(S,_.mode,R),E.return=_,E):(E=s(E,S),E.return=_,E)}function l(_,E,S,R){var D=S.type;return D===Cc?u(_,E,S.props.children,R,S.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===io&&CC(D)===E.type)?(R=s(E,S.props),R.ref=Wh(_,E,S),R.return=_,R):(R=Am(S.type,S.key,S.props,null,_.mode,R),R.ref=Wh(_,E,S),R.return=_,R)}function c(_,E,S,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=p0(S,_.mode,R),E.return=_,E):(E=s(E,S.children||[]),E.return=_,E)}function u(_,E,S,R,D){return E===null||E.tag!==7?(E=kl(S,_.mode,R,D),E.return=_,E):(E=s(E,S),E.return=_,E)}function f(_,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=f0(""+E,_.mode,S),E.return=_,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Pg:return S=Am(E.type,E.key,E.props,null,_.mode,S),S.ref=Wh(_,null,E),S.return=_,S;case Tc:return E=p0(E,_.mode,S),E.return=_,E;case io:var R=E._init;return f(_,R(E._payload),S)}if(ed(E)||jh(E))return E=kl(E,_.mode,S,null),E.return=_,E;jg(_,E)}return null}function p(_,E,S,R){var D=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:a(_,E,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Pg:return S.key===D?l(_,E,S,R):null;case Tc:return S.key===D?c(_,E,S,R):null;case io:return D=S._init,p(_,E,D(S._payload),R)}if(ed(S)||jh(S))return D!==null?null:u(_,E,S,R,null);jg(_,S)}return null}function g(_,E,S,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(S)||null,a(E,_,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Pg:return _=_.get(R.key===null?S:R.key)||null,l(E,_,R,D);case Tc:return _=_.get(R.key===null?S:R.key)||null,c(E,_,R,D);case io:var F=R._init;return g(_,E,S,F(R._payload),D)}if(ed(R)||jh(R))return _=_.get(S)||null,u(E,_,R,D,null);jg(E,R)}return null}function m(_,E,S,R){for(var D=null,F=null,C=E,T=E=0,k=null;C!==null&&T<S.length;T++){C.index>T?(k=C,C=null):k=C.sibling;var M=p(_,C,S[T],R);if(M===null){C===null&&(C=k);break}n&&C&&M.alternate===null&&e(_,C),E=i(M,E,T),F===null?D=M:F.sibling=M,F=M,C=k}if(T===S.length)return t(_,C),nt&&Aa(_,T),D;if(C===null){for(;T<S.length;T++)C=f(_,S[T],R),C!==null&&(E=i(C,E,T),F===null?D=C:F.sibling=C,F=C);return nt&&Aa(_,T),D}for(C=r(_,C);T<S.length;T++)k=g(C,_,T,S[T],R),k!==null&&(n&&k.alternate!==null&&C.delete(k.key===null?T:k.key),E=i(k,E,T),F===null?D=k:F.sibling=k,F=k);return n&&C.forEach(function(O){return e(_,O)}),nt&&Aa(_,T),D}function y(_,E,S,R){var D=jh(S);if(typeof D!="function")throw Error(G(150));if(S=D.call(S),S==null)throw Error(G(151));for(var F=D=null,C=E,T=E=0,k=null,M=S.next();C!==null&&!M.done;T++,M=S.next()){C.index>T?(k=C,C=null):k=C.sibling;var O=p(_,C,M.value,R);if(O===null){C===null&&(C=k);break}n&&C&&O.alternate===null&&e(_,C),E=i(O,E,T),F===null?D=O:F.sibling=O,F=O,C=k}if(M.done)return t(_,C),nt&&Aa(_,T),D;if(C===null){for(;!M.done;T++,M=S.next())M=f(_,M.value,R),M!==null&&(E=i(M,E,T),F===null?D=M:F.sibling=M,F=M);return nt&&Aa(_,T),D}for(C=r(_,C);!M.done;T++,M=S.next())M=g(C,_,T,M.value,R),M!==null&&(n&&M.alternate!==null&&C.delete(M.key===null?T:M.key),E=i(M,E,T),F===null?D=M:F.sibling=M,F=M);return n&&C.forEach(function(B){return e(_,B)}),nt&&Aa(_,T),D}function w(_,E,S,R){if(typeof S=="object"&&S!==null&&S.type===Cc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Pg:e:{for(var D=S.key,F=E;F!==null;){if(F.key===D){if(D=S.type,D===Cc){if(F.tag===7){t(_,F.sibling),E=s(F,S.props.children),E.return=_,_=E;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===io&&CC(D)===F.type){t(_,F.sibling),E=s(F,S.props),E.ref=Wh(_,F,S),E.return=_,_=E;break e}t(_,F);break}else e(_,F);F=F.sibling}S.type===Cc?(E=kl(S.props.children,_.mode,R,S.key),E.return=_,_=E):(R=Am(S.type,S.key,S.props,null,_.mode,R),R.ref=Wh(_,E,S),R.return=_,_=R)}return o(_);case Tc:e:{for(F=S.key;E!==null;){if(E.key===F)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){t(_,E.sibling),E=s(E,S.children||[]),E.return=_,_=E;break e}else{t(_,E);break}else e(_,E);E=E.sibling}E=p0(S,_.mode,R),E.return=_,_=E}return o(_);case io:return F=S._init,w(_,E,F(S._payload),R)}if(ed(S))return m(_,E,S,R);if(jh(S))return y(_,E,S,R);jg(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(t(_,E.sibling),E=s(E,S),E.return=_,_=E):(t(_,E),E=f0(S,_.mode,R),E.return=_,_=E),o(_)):t(_,E)}return w}var Qu=TP(!0),CP=TP(!1),vv=ca(null),yv=null,Nc=null,ub=null;function hb(){ub=Nc=yv=null}function db(n){var e=vv.current;tt(vv),n._currentValue=e}function _E(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function $c(n,e){yv=n,ub=Nc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&($n=!0),n.firstContext=null)}function Dr(n){var e=n._currentValue;if(ub!==n)if(n={context:n,memoizedValue:e,next:null},Nc===null){if(yv===null)throw Error(G(308));Nc=n,yv.dependencies={lanes:0,firstContext:n}}else Nc=Nc.next=n;return e}var ka=null;function fb(n){ka===null?ka=[n]:ka.push(n)}function xP(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,fb(e)):(t.next=s.next,s.next=t),e.interleaved=t,Ui(n,r)}function Ui(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var oo=!1;function pb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Mi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Uo(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ui(n,t)}return s=r.interleaved,s===null?(e.next=e,fb(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ui(n,t)}function mm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ZA(n,t)}}function xC(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function _v(n,e,t,r){var s=n.updateQueue;oo=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,u=c=l=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,y=a;switch(p=e,g=t,y.tag){case 1:if(m=y.payload,typeof m=="function"){f=m.call(g,f,p);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,p=typeof m=="function"?m.call(g,f,p):m,p==null)break e;f=ct({},f,p);break e;case 2:oo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=f):u=u.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Bl|=o,n.lanes=o,n.memoizedState=f}}function RC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Jp={},Ns=ca(Jp),Yd=ca(Jp),Qd=ca(Jp);function La(n){if(n===Jp)throw Error(G(174));return n}function gb(n,e){switch(Qe(Qd,e),Qe(Yd,n),Qe(Ns,Jp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Z0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Z0(e,n)}tt(Ns),Qe(Ns,e)}function Ju(){tt(Ns),tt(Yd),tt(Qd)}function PP(n){La(Qd.current);var e=La(Ns.current),t=Z0(e,n.type);e!==t&&(Qe(Yd,n),Qe(Ns,t))}function mb(n){Yd.current===n&&(tt(Ns),tt(Yd))}var ot=ca(0);function Ev(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var a0=[];function vb(){for(var n=0;n<a0.length;n++)a0[n]._workInProgressVersionPrimary=null;a0.length=0}var vm=Xi.ReactCurrentDispatcher,l0=Xi.ReactCurrentBatchConfig,Vl=0,at=null,Nt=null,Wt=null,wv=!1,xd=!1,Jd=0,O2=0;function un(){throw Error(G(321))}function yb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!as(n[t],e[t]))return!1;return!0}function _b(n,e,t,r,s,i){if(Vl=i,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vm.current=n===null||n.memoizedState===null?j2:U2,n=t(r,s),xd){i=0;do{if(xd=!1,Jd=0,25<=i)throw Error(G(301));i+=1,Wt=Nt=null,e.updateQueue=null,vm.current=$2,n=t(r,s)}while(xd)}if(vm.current=Av,e=Nt!==null&&Nt.next!==null,Vl=0,Wt=Nt=at=null,wv=!1,e)throw Error(G(300));return n}function Eb(){var n=Jd!==0;return Jd=0,n}function fs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?at.memoizedState=Wt=n:Wt=Wt.next=n,Wt}function Or(){if(Nt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var e=Wt===null?at.memoizedState:Wt.next;if(e!==null)Wt=e,Nt=n;else{if(n===null)throw Error(G(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Wt===null?at.memoizedState=Wt=n:Wt=Wt.next=n}return Wt}function Zd(n,e){return typeof e=="function"?e(n):e}function c0(n){var e=Or(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=Nt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Vl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,at.lanes|=u,Bl|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,as(r,e.memoizedState)||($n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,at.lanes|=i,Bl|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function u0(n){var e=Or(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);as(i,e.memoizedState)||($n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function IP(){}function kP(n,e){var t=at,r=Or(),s=e(),i=!as(r.memoizedState,s);if(i&&(r.memoizedState=s,$n=!0),r=r.queue,wb(NP.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||Wt!==null&&Wt.memoizedState.tag&1){if(t.flags|=2048,ef(9,MP.bind(null,t,r,s,e),void 0,null),Gt===null)throw Error(G(349));Vl&30||LP(t,e,s)}return s}function LP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function MP(n,e,t,r){e.value=t,e.getSnapshot=r,DP(e)&&OP(n)}function NP(n,e,t){return t(function(){DP(e)&&OP(n)})}function DP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!as(n,t)}catch{return!0}}function OP(n){var e=Ui(n,1);e!==null&&os(e,n,1,-1)}function PC(n){var e=fs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:n},e.queue=n,n=n.dispatch=B2.bind(null,at,n),[e.memoizedState,n]}function ef(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function FP(){return Or().memoizedState}function ym(n,e,t,r){var s=fs();at.flags|=n,s.memoizedState=ef(1|e,t,void 0,r===void 0?null:r)}function xy(n,e,t,r){var s=Or();r=r===void 0?null:r;var i=void 0;if(Nt!==null){var o=Nt.memoizedState;if(i=o.destroy,r!==null&&yb(r,o.deps)){s.memoizedState=ef(e,t,i,r);return}}at.flags|=n,s.memoizedState=ef(1|e,t,i,r)}function IC(n,e){return ym(8390656,8,n,e)}function wb(n,e){return xy(2048,8,n,e)}function VP(n,e){return xy(4,2,n,e)}function BP(n,e){return xy(4,4,n,e)}function jP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function UP(n,e,t){return t=t!=null?t.concat([n]):null,xy(4,4,jP.bind(null,e,n),t)}function Ab(){}function $P(n,e){var t=Or();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&yb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function zP(n,e){var t=Or();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&yb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function HP(n,e,t){return Vl&21?(as(t,e)||(t=XR(),at.lanes|=t,Bl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,$n=!0),n.memoizedState=t)}function F2(n,e){var t=Be;Be=t!==0&&4>t?t:4,n(!0);var r=l0.transition;l0.transition={};try{n(!1),e()}finally{Be=t,l0.transition=r}}function WP(){return Or().memoizedState}function V2(n,e,t){var r=zo(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},GP(n))qP(e,t);else if(t=xP(n,e,t,r),t!==null){var s=kn();os(t,n,r,s),KP(t,e,r)}}function B2(n,e,t){var r=zo(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(GP(n))qP(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,as(a,o)){var l=e.interleaved;l===null?(s.next=s,fb(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=xP(n,e,s,r),t!==null&&(s=kn(),os(t,n,r,s),KP(t,e,r))}}function GP(n){var e=n.alternate;return n===at||e!==null&&e===at}function qP(n,e){xd=wv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function KP(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ZA(n,t)}}var Av={readContext:Dr,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},j2={readContext:Dr,useCallback:function(n,e){return fs().memoizedState=[n,e===void 0?null:e],n},useContext:Dr,useEffect:IC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ym(4194308,4,jP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ym(4194308,4,n,e)},useInsertionEffect:function(n,e){return ym(4,2,n,e)},useMemo:function(n,e){var t=fs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=fs();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=V2.bind(null,at,n),[r.memoizedState,n]},useRef:function(n){var e=fs();return n={current:n},e.memoizedState=n},useState:PC,useDebugValue:Ab,useDeferredValue:function(n){return fs().memoizedState=n},useTransition:function(){var n=PC(!1),e=n[0];return n=F2.bind(null,n[1]),fs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=at,s=fs();if(nt){if(t===void 0)throw Error(G(407));t=t()}else{if(t=e(),Gt===null)throw Error(G(349));Vl&30||LP(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,IC(NP.bind(null,r,i,n),[n]),r.flags|=2048,ef(9,MP.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=fs(),e=Gt.identifierPrefix;if(nt){var t=Li,r=ki;t=(r&~(1<<32-is(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=O2++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},U2={readContext:Dr,useCallback:$P,useContext:Dr,useEffect:wb,useImperativeHandle:UP,useInsertionEffect:VP,useLayoutEffect:BP,useMemo:zP,useReducer:c0,useRef:FP,useState:function(){return c0(Zd)},useDebugValue:Ab,useDeferredValue:function(n){var e=Or();return HP(e,Nt.memoizedState,n)},useTransition:function(){var n=c0(Zd)[0],e=Or().memoizedState;return[n,e]},useMutableSource:IP,useSyncExternalStore:kP,useId:WP,unstable_isNewReconciler:!1},$2={readContext:Dr,useCallback:$P,useContext:Dr,useEffect:wb,useImperativeHandle:UP,useInsertionEffect:VP,useLayoutEffect:BP,useMemo:zP,useReducer:u0,useRef:FP,useState:function(){return u0(Zd)},useDebugValue:Ab,useDeferredValue:function(n){var e=Or();return Nt===null?e.memoizedState=n:HP(e,Nt.memoizedState,n)},useTransition:function(){var n=u0(Zd)[0],e=Or().memoizedState;return[n,e]},useMutableSource:IP,useSyncExternalStore:kP,useId:WP,unstable_isNewReconciler:!1};function Ur(n,e){if(n&&n.defaultProps){e=ct({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function EE(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ct({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ry={isMounted:function(n){return(n=n._reactInternals)?Yl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=kn(),s=zo(n),i=Mi(r,s);i.payload=e,t!=null&&(i.callback=t),e=Uo(n,i,s),e!==null&&(os(e,n,s,r),mm(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=kn(),s=zo(n),i=Mi(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Uo(n,i,s),e!==null&&(os(e,n,s,r),mm(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=kn(),r=zo(n),s=Mi(t,r);s.tag=2,e!=null&&(s.callback=e),e=Uo(n,s,r),e!==null&&(os(e,n,r,t),mm(e,n,r))}};function kC(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Gd(t,r)||!Gd(s,i):!0}function XP(n,e,t){var r=!1,s=Xo,i=e.contextType;return typeof i=="object"&&i!==null?i=Dr(i):(s=Gn(e)?Ol:An.current,r=e.contextTypes,i=(r=r!=null)?Xu(n,s):Xo),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ry,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function LC(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Ry.enqueueReplaceState(e,e.state,null)}function wE(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},pb(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Dr(i):(i=Gn(e)?Ol:An.current,s.context=Xu(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(EE(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ry.enqueueReplaceState(s,s.state,null),_v(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Zu(n,e){try{var t="",r=e;do t+=mF(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function h0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function AE(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var z2=typeof WeakMap=="function"?WeakMap:Map;function YP(n,e,t){t=Mi(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Sv||(Sv=!0,LE=r),AE(n,e)},t}function QP(n,e,t){t=Mi(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){AE(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){AE(n,e),typeof r!="function"&&($o===null?$o=new Set([this]):$o.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function MC(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new z2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=rV.bind(null,n,e,t),e.then(n,n))}function NC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function DC(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Mi(-1,1),e.tag=2,Uo(t,e,1))),t.lanes|=1),n)}var H2=Xi.ReactCurrentOwner,$n=!1;function xn(n,e,t,r){e.child=n===null?CP(e,null,t,r):Qu(e,n.child,t,r)}function OC(n,e,t,r,s){t=t.render;var i=e.ref;return $c(e,s),r=_b(n,e,t,r,i,s),t=Eb(),n!==null&&!$n?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,$i(n,e,s)):(nt&&t&&ab(e),e.flags|=1,xn(n,e,r,s),e.child)}function FC(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!Ib(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,JP(n,e,i,r,s)):(n=Am(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Gd,t(o,r)&&n.ref===e.ref)return $i(n,e,s)}return e.flags|=1,n=Ho(i,r),n.ref=e.ref,n.return=e,e.child=n}function JP(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Gd(i,r)&&n.ref===e.ref)if($n=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&($n=!0);else return e.lanes=n.lanes,$i(n,e,s)}return bE(n,e,t,r,s)}function ZP(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Oc,hr),hr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Qe(Oc,hr),hr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Qe(Oc,hr),hr|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Qe(Oc,hr),hr|=r;return xn(n,e,s,t),e.child}function eI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function bE(n,e,t,r,s){var i=Gn(t)?Ol:An.current;return i=Xu(e,i),$c(e,s),t=_b(n,e,t,r,i,s),r=Eb(),n!==null&&!$n?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,$i(n,e,s)):(nt&&r&&ab(e),e.flags|=1,xn(n,e,t,s),e.child)}function VC(n,e,t,r,s){if(Gn(t)){var i=!0;pv(e)}else i=!1;if($c(e,s),e.stateNode===null)_m(n,e),XP(e,t,r),wE(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Dr(c):(c=Gn(t)?Ol:An.current,c=Xu(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&LC(e,o,r,c),oo=!1;var p=e.memoizedState;o.state=p,_v(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Wn.current||oo?(typeof u=="function"&&(EE(e,t,u,r),l=e.memoizedState),(a=oo||kC(e,t,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RP(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ur(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Dr(l):(l=Gn(t)?Ol:An.current,l=Xu(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&LC(e,o,r,l),oo=!1,p=e.memoizedState,o.state=p,_v(e,r,o,s);var m=e.memoizedState;a!==f||p!==m||Wn.current||oo?(typeof g=="function"&&(EE(e,t,g,r),m=e.memoizedState),(c=oo||kC(e,t,c,r,p,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return SE(n,e,t,r,i,s)}function SE(n,e,t,r,s,i){eI(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&bC(e,t,!1),$i(n,e,i);r=e.stateNode,H2.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Qu(e,n.child,null,i),e.child=Qu(e,null,a,i)):xn(n,e,a,i),e.memoizedState=r.state,s&&bC(e,t,!0),e.child}function tI(n){var e=n.stateNode;e.pendingContext?AC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&AC(n,e.context,!1),gb(n,e.containerInfo)}function BC(n,e,t,r,s){return Yu(),cb(s),e.flags|=256,xn(n,e,t,r),e.child}var TE={dehydrated:null,treeContext:null,retryLane:0};function CE(n){return{baseLanes:n,cachePool:null,transitions:null}}function nI(n,e,t){var r=e.pendingProps,s=ot.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Qe(ot,s&1),n===null)return yE(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ky(o,r,0,null),n=kl(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=CE(t),e.memoizedState=TE,n):bb(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return W2(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ho(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ho(a,i):(i=kl(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?CE(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=TE,r}return i=n.child,n=i.sibling,r=Ho(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function bb(n,e){return e=ky({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ug(n,e,t,r){return r!==null&&cb(r),Qu(e,n.child,null,t),n=bb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function W2(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=h0(Error(G(422))),Ug(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ky({mode:"visible",children:r.children},s,0,null),i=kl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Qu(e,n.child,null,o),e.child.memoizedState=CE(o),e.memoizedState=TE,i);if(!(e.mode&1))return Ug(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(G(419)),r=h0(i,r,void 0),Ug(n,e,o,r)}if(a=(o&n.childLanes)!==0,$n||a){if(r=Gt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ui(n,s),os(r,n,s,-1))}return Pb(),r=h0(Error(G(421))),Ug(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=sV.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,gr=jo(s.nextSibling),mr=e,nt=!0,rs=null,n!==null&&(Rr[Pr++]=ki,Rr[Pr++]=Li,Rr[Pr++]=Fl,ki=n.id,Li=n.overflow,Fl=e),e=bb(e,r.children),e.flags|=4096,e)}function jC(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),_E(n.return,e,t)}function d0(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function rI(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xn(n,e,r.children,t),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jC(n,t,e);else if(n.tag===19)jC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Qe(ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Ev(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),d0(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Ev(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}d0(e,!0,t,null,i);break;case"together":d0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _m(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function $i(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Bl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(G(153));if(e.child!==null){for(n=e.child,t=Ho(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ho(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function G2(n,e,t){switch(e.tag){case 3:tI(e),Yu();break;case 5:PP(e);break;case 1:Gn(e.type)&&pv(e);break;case 4:gb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qe(vv,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(ot,ot.current&1),e.flags|=128,null):t&e.child.childLanes?nI(n,e,t):(Qe(ot,ot.current&1),n=$i(n,e,t),n!==null?n.sibling:null);Qe(ot,ot.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return rI(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,ZP(n,e,t)}return $i(n,e,t)}var sI,xE,iI,oI;sI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};xE=function(){};iI=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,La(Ns.current);var i=null;switch(t){case"input":s=X0(n,s),r=X0(n,r),i=[];break;case"select":s=ct({},s,{value:void 0}),r=ct({},r,{value:void 0}),i=[];break;case"textarea":s=J0(n,s),r=J0(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=dv)}eE(t,r);var o;t=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&et("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};oI=function(n,e,t,r){t!==r&&(e.flags|=4)};function Gh(n,e){if(!nt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function hn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function q2(n,e,t){var r=e.pendingProps;switch(lb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(e),null;case 1:return Gn(e.type)&&fv(),hn(e),null;case 3:return r=e.stateNode,Ju(),tt(Wn),tt(An),vb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Bg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rs!==null&&(DE(rs),rs=null))),xE(n,e),hn(e),null;case 5:mb(e);var s=La(Qd.current);if(t=e.type,n!==null&&e.stateNode!=null)iI(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return hn(e),null}if(n=La(Ns.current),Bg(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Is]=e,r[Xd]=i,n=(e.mode&1)!==0,t){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<nd.length;s++)et(nd[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":XT(r,i),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},et("invalid",r);break;case"textarea":QT(r,i),et("invalid",r)}eE(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Vg(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Vg(r.textContent,a,n),s=["children",""+a]):Bd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&et("scroll",r)}switch(t){case"input":Ig(r),YT(r,i,!0);break;case"textarea":Ig(r),JT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=dv)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=NR(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Is]=e,n[Xd]=r,sI(n,e,!1,!1),e.stateNode=n;e:{switch(o=tE(t,r),t){case"dialog":et("cancel",n),et("close",n),s=r;break;case"iframe":case"object":case"embed":et("load",n),s=r;break;case"video":case"audio":for(s=0;s<nd.length;s++)et(nd[s],n);s=r;break;case"source":et("error",n),s=r;break;case"img":case"image":case"link":et("error",n),et("load",n),s=r;break;case"details":et("toggle",n),s=r;break;case"input":XT(n,r),s=X0(n,r),et("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=ct({},r,{value:void 0}),et("invalid",n);break;case"textarea":QT(n,r),s=J0(n,r),et("invalid",n);break;default:s=r}eE(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?FR(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DR(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&jd(n,l):typeof l=="number"&&jd(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&et("scroll",n):l!=null&&qA(n,i,l,o))}switch(t){case"input":Ig(n),YT(n,r,!1);break;case"textarea":Ig(n),JT(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ko(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Vc(n,!!r.multiple,i,!1):r.defaultValue!=null&&Vc(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=dv)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hn(e),null;case 6:if(n&&e.stateNode!=null)oI(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(t=La(Qd.current),La(Ns.current),Bg(e)){if(r=e.stateNode,t=e.memoizedProps,r[Is]=e,(i=r.nodeValue!==t)&&(n=mr,n!==null))switch(n.tag){case 3:Vg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Vg(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Is]=e,e.stateNode=r}return hn(e),null;case 13:if(tt(ot),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&gr!==null&&e.mode&1&&!(e.flags&128))SP(),Yu(),e.flags|=98560,i=!1;else if(i=Bg(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Is]=e}else Yu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hn(e),i=!1}else rs!==null&&(DE(rs),rs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ot.current&1?Ft===0&&(Ft=3):Pb())),e.updateQueue!==null&&(e.flags|=4),hn(e),null);case 4:return Ju(),xE(n,e),n===null&&qd(e.stateNode.containerInfo),hn(e),null;case 10:return db(e.type._context),hn(e),null;case 17:return Gn(e.type)&&fv(),hn(e),null;case 19:if(tt(ot),i=e.memoizedState,i===null)return hn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Gh(i,!1);else{if(Ft!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Ev(n),o!==null){for(e.flags|=128,Gh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Qe(ot,ot.current&1|2),e.child}n=n.sibling}i.tail!==null&&Et()>eh&&(e.flags|=128,r=!0,Gh(i,!1),e.lanes=4194304)}else{if(!r)if(n=Ev(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Gh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nt)return hn(e),null}else 2*Et()-i.renderingStartTime>eh&&t!==1073741824&&(e.flags|=128,r=!0,Gh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Et(),e.sibling=null,t=ot.current,Qe(ot,r?t&1|2:t&1),e):(hn(e),null);case 22:case 23:return Rb(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hr&1073741824&&(hn(e),e.subtreeFlags&6&&(e.flags|=8192)):hn(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function K2(n,e){switch(lb(e),e.tag){case 1:return Gn(e.type)&&fv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ju(),tt(Wn),tt(An),vb(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return mb(e),null;case 13:if(tt(ot),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Yu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return tt(ot),null;case 4:return Ju(),null;case 10:return db(e.type._context),null;case 22:case 23:return Rb(),null;case 24:return null;default:return null}}var $g=!1,yn=!1,X2=typeof WeakSet=="function"?WeakSet:Set,te=null;function Dc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){gt(n,e,r)}else t.current=null}function RE(n,e,t){try{t()}catch(r){gt(n,e,r)}}var UC=!1;function Y2(n,e){if(hE=cv,n=hP(),ob(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;t:for(;;){for(var g;f!==t||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===n)break t;if(p===t&&++c===s&&(a=o),p===i&&++u===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(dE={focusedElem:n,selectionRange:t},cv=!1,te=e;te!==null;)if(e=te,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,te=n;else for(;te!==null;){e=te;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,_=e.stateNode,E=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ur(e.type,y),w);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(R){gt(e,e.return,R)}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}return m=UC,UC=!1,m}function Rd(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&RE(e,t,i)}s=s.next}while(s!==r)}}function Py(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function PE(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function aI(n){var e=n.alternate;e!==null&&(n.alternate=null,aI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Is],delete e[Xd],delete e[gE],delete e[L2],delete e[M2])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lI(n){return n.tag===5||n.tag===3||n.tag===4}function $C(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function IE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=dv));else if(r!==4&&(n=n.child,n!==null))for(IE(n,e,t),n=n.sibling;n!==null;)IE(n,e,t),n=n.sibling}function kE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(kE(n,e,t),n=n.sibling;n!==null;)kE(n,e,t),n=n.sibling}var tn=null,ns=!1;function Zi(n,e,t){for(t=t.child;t!==null;)cI(n,e,t),t=t.sibling}function cI(n,e,t){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(wy,t)}catch{}switch(t.tag){case 5:yn||Dc(t,e);case 6:var r=tn,s=ns;tn=null,Zi(n,e,t),tn=r,ns=s,tn!==null&&(ns?(n=tn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):tn.removeChild(t.stateNode));break;case 18:tn!==null&&(ns?(n=tn,t=t.stateNode,n.nodeType===8?i0(n.parentNode,t):n.nodeType===1&&i0(n,t),Hd(n)):i0(tn,t.stateNode));break;case 4:r=tn,s=ns,tn=t.stateNode.containerInfo,ns=!0,Zi(n,e,t),tn=r,ns=s;break;case 0:case 11:case 14:case 15:if(!yn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&RE(t,e,o),s=s.next}while(s!==r)}Zi(n,e,t);break;case 1:if(!yn&&(Dc(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){gt(t,e,a)}Zi(n,e,t);break;case 21:Zi(n,e,t);break;case 22:t.mode&1?(yn=(r=yn)||t.memoizedState!==null,Zi(n,e,t),yn=r):Zi(n,e,t);break;default:Zi(n,e,t)}}function zC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new X2),e.forEach(function(r){var s=iV.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Br(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:tn=a.stateNode,ns=!1;break e;case 3:tn=a.stateNode.containerInfo,ns=!0;break e;case 4:tn=a.stateNode.containerInfo,ns=!0;break e}a=a.return}if(tn===null)throw Error(G(160));cI(i,o,s),tn=null,ns=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){gt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uI(e,n),e=e.sibling}function uI(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Br(e,n),hs(n),r&4){try{Rd(3,n,n.return),Py(3,n)}catch(y){gt(n,n.return,y)}try{Rd(5,n,n.return)}catch(y){gt(n,n.return,y)}}break;case 1:Br(e,n),hs(n),r&512&&t!==null&&Dc(t,t.return);break;case 5:if(Br(e,n),hs(n),r&512&&t!==null&&Dc(t,t.return),n.flags&32){var s=n.stateNode;try{jd(s,"")}catch(y){gt(n,n.return,y)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&LR(s,i),tE(a,o);var c=tE(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?FR(s,f):u==="dangerouslySetInnerHTML"?DR(s,f):u==="children"?jd(s,f):qA(s,u,f,c)}switch(a){case"input":Y0(s,i);break;case"textarea":MR(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Vc(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Vc(s,!!i.multiple,i.defaultValue,!0):Vc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xd]=i}catch(y){gt(n,n.return,y)}}break;case 6:if(Br(e,n),hs(n),r&4){if(n.stateNode===null)throw Error(G(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(y){gt(n,n.return,y)}}break;case 3:if(Br(e,n),hs(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Hd(e.containerInfo)}catch(y){gt(n,n.return,y)}break;case 4:Br(e,n),hs(n);break;case 13:Br(e,n),hs(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cb=Et())),r&4&&zC(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(yn=(c=yn)||u,Br(e,n),yn=c):Br(e,n),hs(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(te=n,u=n.child;u!==null;){for(f=te=u;te!==null;){switch(p=te,g=p.child,p.tag){case 0:case 11:case 14:case 15:Rd(4,p,p.return);break;case 1:Dc(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){gt(r,t,y)}}break;case 5:Dc(p,p.return);break;case 22:if(p.memoizedState!==null){WC(f);continue}}g!==null?(g.return=p,te=g):WC(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=OR("display",o))}catch(y){gt(n,n.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){gt(n,n.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Br(e,n),hs(n),r&4&&zC(n);break;case 21:break;default:Br(e,n),hs(n)}}function hs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(lI(t)){var r=t;break e}t=t.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(jd(s,""),r.flags&=-33);var i=$C(n);kE(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$C(n);IE(n,a,o);break;default:throw Error(G(161))}}catch(l){gt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Q2(n,e,t){te=n,hI(n)}function hI(n,e,t){for(var r=(n.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$g;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||yn;a=$g;var c=yn;if($g=o,(yn=l)&&!c)for(te=s;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?GC(s):l!==null?(l.return=o,te=l):GC(s);for(;i!==null;)te=i,hI(i),i=i.sibling;te=s,$g=a,yn=c}HC(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,te=i):HC(n)}}function HC(n){for(;te!==null;){var e=te;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||Py(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Ur(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&RC(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}RC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Hd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}yn||e.flags&512&&PE(e)}catch(p){gt(e,e.return,p)}}if(e===n){te=null;break}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}}function WC(n){for(;te!==null;){var e=te;if(e===n){te=null;break}var t=e.sibling;if(t!==null){t.return=e.return,te=t;break}te=e.return}}function GC(n){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Py(4,e)}catch(l){gt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){gt(e,s,l)}}var i=e.return;try{PE(e)}catch(l){gt(e,i,l)}break;case 5:var o=e.return;try{PE(e)}catch(l){gt(e,o,l)}}}catch(l){gt(e,e.return,l)}if(e===n){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var J2=Math.ceil,bv=Xi.ReactCurrentDispatcher,Sb=Xi.ReactCurrentOwner,Mr=Xi.ReactCurrentBatchConfig,Me=0,Gt=null,Tt=null,rn=0,hr=0,Oc=ca(0),Ft=0,tf=null,Bl=0,Iy=0,Tb=0,Pd=null,Un=null,Cb=0,eh=1/0,ti=null,Sv=!1,LE=null,$o=null,zg=!1,Mo=null,Tv=0,Id=0,ME=null,Em=-1,wm=0;function kn(){return Me&6?Et():Em!==-1?Em:Em=Et()}function zo(n){return n.mode&1?Me&2&&rn!==0?rn&-rn:D2.transition!==null?(wm===0&&(wm=XR()),wm):(n=Be,n!==0||(n=window.event,n=n===void 0?16:nP(n.type)),n):1}function os(n,e,t,r){if(50<Id)throw Id=0,ME=null,Error(G(185));Xp(n,t,r),(!(Me&2)||n!==Gt)&&(n===Gt&&(!(Me&2)&&(Iy|=t),Ft===4&&lo(n,rn)),qn(n,r),t===1&&Me===0&&!(e.mode&1)&&(eh=Et()+500,Cy&&ua()))}function qn(n,e){var t=n.callbackNode;DF(n,e);var r=lv(n,n===Gt?rn:0);if(r===0)t!==null&&tC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&tC(t),e===1)n.tag===0?N2(qC.bind(null,n)):wP(qC.bind(null,n)),I2(function(){!(Me&6)&&ua()}),t=null;else{switch(YR(r)){case 1:t=JA;break;case 4:t=qR;break;case 16:t=av;break;case 536870912:t=KR;break;default:t=av}t=_I(t,dI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function dI(n,e){if(Em=-1,wm=0,Me&6)throw Error(G(327));var t=n.callbackNode;if(zc()&&n.callbackNode!==t)return null;var r=lv(n,n===Gt?rn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Cv(n,r);else{e=r;var s=Me;Me|=2;var i=pI();(Gt!==n||rn!==e)&&(ti=null,eh=Et()+500,Il(n,e));do try{tV();break}catch(a){fI(n,a)}while(!0);hb(),bv.current=i,Me=s,Tt!==null?e=0:(Gt=null,rn=0,e=Ft)}if(e!==0){if(e===2&&(s=oE(n),s!==0&&(r=s,e=NE(n,s))),e===1)throw t=tf,Il(n,0),lo(n,r),qn(n,Et()),t;if(e===6)lo(n,r);else{if(s=n.current.alternate,!(r&30)&&!Z2(s)&&(e=Cv(n,r),e===2&&(i=oE(n),i!==0&&(r=i,e=NE(n,i))),e===1))throw t=tf,Il(n,0),lo(n,r),qn(n,Et()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:ba(n,Un,ti);break;case 3:if(lo(n,r),(r&130023424)===r&&(e=Cb+500-Et(),10<e)){if(lv(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){kn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=pE(ba.bind(null,n,Un,ti),e);break}ba(n,Un,ti);break;case 4:if(lo(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-is(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*J2(r/1960))-r,10<r){n.timeoutHandle=pE(ba.bind(null,n,Un,ti),r);break}ba(n,Un,ti);break;case 5:ba(n,Un,ti);break;default:throw Error(G(329))}}}return qn(n,Et()),n.callbackNode===t?dI.bind(null,n):null}function NE(n,e){var t=Pd;return n.current.memoizedState.isDehydrated&&(Il(n,e).flags|=256),n=Cv(n,e),n!==2&&(e=Un,Un=t,e!==null&&DE(e)),n}function DE(n){Un===null?Un=n:Un.push.apply(Un,n)}function Z2(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!as(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lo(n,e){for(e&=~Tb,e&=~Iy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-is(e),r=1<<t;n[t]=-1,e&=~r}}function qC(n){if(Me&6)throw Error(G(327));zc();var e=lv(n,0);if(!(e&1))return qn(n,Et()),null;var t=Cv(n,e);if(n.tag!==0&&t===2){var r=oE(n);r!==0&&(e=r,t=NE(n,r))}if(t===1)throw t=tf,Il(n,0),lo(n,e),qn(n,Et()),t;if(t===6)throw Error(G(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ba(n,Un,ti),qn(n,Et()),null}function xb(n,e){var t=Me;Me|=1;try{return n(e)}finally{Me=t,Me===0&&(eh=Et()+500,Cy&&ua())}}function jl(n){Mo!==null&&Mo.tag===0&&!(Me&6)&&zc();var e=Me;Me|=1;var t=Mr.transition,r=Be;try{if(Mr.transition=null,Be=1,n)return n()}finally{Be=r,Mr.transition=t,Me=e,!(Me&6)&&ua()}}function Rb(){hr=Oc.current,tt(Oc)}function Il(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,P2(t)),Tt!==null)for(t=Tt.return;t!==null;){var r=t;switch(lb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fv();break;case 3:Ju(),tt(Wn),tt(An),vb();break;case 5:mb(r);break;case 4:Ju();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:db(r.type._context);break;case 22:case 23:Rb()}t=t.return}if(Gt=n,Tt=n=Ho(n.current,null),rn=hr=e,Ft=0,tf=null,Tb=Iy=Bl=0,Un=Pd=null,ka!==null){for(e=0;e<ka.length;e++)if(t=ka[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}ka=null}return n}function fI(n,e){do{var t=Tt;try{if(hb(),vm.current=Av,wv){for(var r=at.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wv=!1}if(Vl=0,Wt=Nt=at=null,xd=!1,Jd=0,Sb.current=null,t===null||t.return===null){Ft=1,tf=e,Tt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=NC(o);if(g!==null){g.flags&=-257,DC(g,o,a,i,e),g.mode&1&&MC(i,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){MC(i,c,e),Pb();break e}l=Error(G(426))}}else if(nt&&a.mode&1){var w=NC(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),DC(w,o,a,i,e),cb(Zu(l,a));break e}}i=l=Zu(l,a),Ft!==4&&(Ft=2),Pd===null?Pd=[i]:Pd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=YP(i,l,e);xC(i,_);break e;case 1:a=l;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($o===null||!$o.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=QP(i,a,e);xC(i,R);break e}}i=i.return}while(i!==null)}mI(t)}catch(D){e=D,Tt===t&&t!==null&&(Tt=t=t.return);continue}break}while(!0)}function pI(){var n=bv.current;return bv.current=Av,n===null?Av:n}function Pb(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Gt===null||!(Bl&268435455)&&!(Iy&268435455)||lo(Gt,rn)}function Cv(n,e){var t=Me;Me|=2;var r=pI();(Gt!==n||rn!==e)&&(ti=null,Il(n,e));do try{eV();break}catch(s){fI(n,s)}while(!0);if(hb(),Me=t,bv.current=r,Tt!==null)throw Error(G(261));return Gt=null,rn=0,Ft}function eV(){for(;Tt!==null;)gI(Tt)}function tV(){for(;Tt!==null&&!CF();)gI(Tt)}function gI(n){var e=yI(n.alternate,n,hr);n.memoizedProps=n.pendingProps,e===null?mI(n):Tt=e,Sb.current=null}function mI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=K2(t,e),t!==null){t.flags&=32767,Tt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ft=6,Tt=null;return}}else if(t=q2(t,e,hr),t!==null){Tt=t;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=n}while(e!==null);Ft===0&&(Ft=5)}function ba(n,e,t){var r=Be,s=Mr.transition;try{Mr.transition=null,Be=1,nV(n,e,t,r)}finally{Mr.transition=s,Be=r}return null}function nV(n,e,t,r){do zc();while(Mo!==null);if(Me&6)throw Error(G(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(G(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(OF(n,i),n===Gt&&(Tt=Gt=null,rn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||zg||(zg=!0,_I(av,function(){return zc(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Mr.transition,Mr.transition=null;var o=Be;Be=1;var a=Me;Me|=4,Sb.current=null,Y2(n,t),uI(t,n),A2(dE),cv=!!hE,dE=hE=null,n.current=t,Q2(t),xF(),Me=a,Be=o,Mr.transition=i}else n.current=t;if(zg&&(zg=!1,Mo=n,Tv=s),i=n.pendingLanes,i===0&&($o=null),IF(t.stateNode),qn(n,Et()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Sv)throw Sv=!1,n=LE,LE=null,n;return Tv&1&&n.tag!==0&&zc(),i=n.pendingLanes,i&1?n===ME?Id++:(Id=0,ME=n):Id=0,ua(),null}function zc(){if(Mo!==null){var n=YR(Tv),e=Mr.transition,t=Be;try{if(Mr.transition=null,Be=16>n?16:n,Mo===null)var r=!1;else{if(n=Mo,Mo=null,Tv=0,Me&6)throw Error(G(331));var s=Me;for(Me|=4,te=n.current;te!==null;){var i=te,o=i.child;if(te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var u=te;switch(u.tag){case 0:case 11:case 15:Rd(8,u,i)}var f=u.child;if(f!==null)f.return=u,te=f;else for(;te!==null;){u=te;var p=u.sibling,g=u.return;if(aI(u),u===c){te=null;break}if(p!==null){p.return=g,te=p;break}te=g}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,te=o;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Rd(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,te=_;break e}te=i.return}}var E=n.current;for(te=E;te!==null;){o=te;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,te=S;else e:for(o=E;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Py(9,a)}}catch(D){gt(a,a.return,D)}if(a===o){te=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,te=R;break e}te=a.return}}if(Me=s,ua(),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(wy,n)}catch{}r=!0}return r}finally{Be=t,Mr.transition=e}}return!1}function KC(n,e,t){e=Zu(t,e),e=YP(n,e,1),n=Uo(n,e,1),e=kn(),n!==null&&(Xp(n,1,e),qn(n,e))}function gt(n,e,t){if(n.tag===3)KC(n,n,t);else for(;e!==null;){if(e.tag===3){KC(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($o===null||!$o.has(r))){n=Zu(t,n),n=QP(e,n,1),e=Uo(e,n,1),n=kn(),e!==null&&(Xp(e,1,n),qn(e,n));break}}e=e.return}}function rV(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=kn(),n.pingedLanes|=n.suspendedLanes&t,Gt===n&&(rn&t)===t&&(Ft===4||Ft===3&&(rn&130023424)===rn&&500>Et()-Cb?Il(n,0):Tb|=t),qn(n,e)}function vI(n,e){e===0&&(n.mode&1?(e=Mg,Mg<<=1,!(Mg&130023424)&&(Mg=4194304)):e=1);var t=kn();n=Ui(n,e),n!==null&&(Xp(n,e,t),qn(n,t))}function sV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),vI(n,t)}function iV(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),vI(n,t)}var yI;yI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Wn.current)$n=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return $n=!1,G2(n,e,t);$n=!!(n.flags&131072)}else $n=!1,nt&&e.flags&1048576&&AP(e,mv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_m(n,e),n=e.pendingProps;var s=Xu(e,An.current);$c(e,t),s=_b(null,e,r,n,s,t);var i=Eb();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gn(r)?(i=!0,pv(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pb(e),s.updater=Ry,e.stateNode=s,s._reactInternals=e,wE(e,r,n,t),e=SE(null,e,r,!0,i,t)):(e.tag=0,nt&&i&&ab(e),xn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(_m(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=aV(r),n=Ur(r,n),s){case 0:e=bE(null,e,r,n,t);break e;case 1:e=VC(null,e,r,n,t);break e;case 11:e=OC(null,e,r,n,t);break e;case 14:e=FC(null,e,r,Ur(r.type,n),t);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ur(r,s),bE(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ur(r,s),VC(n,e,r,s,t);case 3:e:{if(tI(e),n===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,RP(n,e),_v(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zu(Error(G(423)),e),e=BC(n,e,r,t,s);break e}else if(r!==s){s=Zu(Error(G(424)),e),e=BC(n,e,r,t,s);break e}else for(gr=jo(e.stateNode.containerInfo.firstChild),mr=e,nt=!0,rs=null,t=CP(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Yu(),r===s){e=$i(n,e,t);break e}xn(n,e,r,t)}e=e.child}return e;case 5:return PP(e),n===null&&yE(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,fE(r,s)?o=null:i!==null&&fE(r,i)&&(e.flags|=32),eI(n,e),xn(n,e,o,t),e.child;case 6:return n===null&&yE(e),null;case 13:return nI(n,e,t);case 4:return gb(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Qu(e,null,r,t):xn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ur(r,s),OC(n,e,r,s,t);case 7:return xn(n,e,e.pendingProps,t),e.child;case 8:return xn(n,e,e.pendingProps.children,t),e.child;case 12:return xn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Qe(vv,r._currentValue),r._currentValue=o,i!==null)if(as(i.value,o)){if(i.children===s.children&&!Wn.current){e=$i(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Mi(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),_E(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),_E(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,$c(e,t),s=Dr(s),r=r(s),e.flags|=1,xn(n,e,r,t),e.child;case 14:return r=e.type,s=Ur(r,e.pendingProps),s=Ur(r.type,s),FC(n,e,r,s,t);case 15:return JP(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ur(r,s),_m(n,e),e.tag=1,Gn(r)?(n=!0,pv(e)):n=!1,$c(e,t),XP(e,r,s),wE(e,r,s,t),SE(null,e,r,!0,n,t);case 19:return rI(n,e,t);case 22:return ZP(n,e,t)}throw Error(G(156,e.tag))};function _I(n,e){return GR(n,e)}function oV(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(n,e,t,r){return new oV(n,e,t,r)}function Ib(n){return n=n.prototype,!(!n||!n.isReactComponent)}function aV(n){if(typeof n=="function")return Ib(n)?1:0;if(n!=null){if(n=n.$$typeof,n===XA)return 11;if(n===YA)return 14}return 2}function Ho(n,e){var t=n.alternate;return t===null?(t=Lr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Am(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")Ib(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Cc:return kl(t.children,s,i,e);case KA:o=8,s|=8;break;case W0:return n=Lr(12,t,e,s|2),n.elementType=W0,n.lanes=i,n;case G0:return n=Lr(13,t,e,s),n.elementType=G0,n.lanes=i,n;case q0:return n=Lr(19,t,e,s),n.elementType=q0,n.lanes=i,n;case PR:return ky(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case xR:o=10;break e;case RR:o=9;break e;case XA:o=11;break e;case YA:o=14;break e;case io:o=16,r=null;break e}throw Error(G(130,n==null?n:typeof n,""))}return e=Lr(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function kl(n,e,t,r){return n=Lr(7,n,r,e),n.lanes=t,n}function ky(n,e,t,r){return n=Lr(22,n,r,e),n.elementType=PR,n.lanes=t,n.stateNode={isHidden:!1},n}function f0(n,e,t){return n=Lr(6,n,null,e),n.lanes=t,n}function p0(n,e,t){return e=Lr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function lV(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K_(0),this.expirationTimes=K_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K_(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kb(n,e,t,r,s,i,o,a,l){return n=new lV(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lr(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},pb(i),n}function cV(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tc,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function EI(n){if(!n)return Xo;n=n._reactInternals;e:{if(Yl(n)!==n||n.tag!==1)throw Error(G(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(n.tag===1){var t=n.type;if(Gn(t))return EP(n,t,e)}return e}function wI(n,e,t,r,s,i,o,a,l){return n=kb(t,r,!0,n,s,i,o,a,l),n.context=EI(null),t=n.current,r=kn(),s=zo(t),i=Mi(r,s),i.callback=e??null,Uo(t,i,s),n.current.lanes=s,Xp(n,s,r),qn(n,r),n}function Ly(n,e,t,r){var s=e.current,i=kn(),o=zo(s);return t=EI(t),e.context===null?e.context=t:e.pendingContext=t,e=Mi(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Uo(s,e,o),n!==null&&(os(n,s,o,i),mm(n,s,o)),o}function xv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function XC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Lb(n,e){XC(n,e),(n=n.alternate)&&XC(n,e)}function uV(){return null}var AI=typeof reportError=="function"?reportError:function(n){console.error(n)};function Mb(n){this._internalRoot=n}My.prototype.render=Mb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(G(409));Ly(n,e,null,null)};My.prototype.unmount=Mb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;jl(function(){Ly(null,n,null,null)}),e[ji]=null}};function My(n){this._internalRoot=n}My.prototype.unstable_scheduleHydration=function(n){if(n){var e=ZR();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ao.length&&e!==0&&e<ao[t].priority;t++);ao.splice(t,0,n),t===0&&tP(n)}};function Nb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ny(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function YC(){}function hV(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=xv(o);i.call(c)}}var o=wI(e,r,n,0,null,!1,!1,"",YC);return n._reactRootContainer=o,n[ji]=o.current,qd(n.nodeType===8?n.parentNode:n),jl(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=xv(l);a.call(c)}}var l=kb(n,0,!1,null,null,!1,!1,"",YC);return n._reactRootContainer=l,n[ji]=l.current,qd(n.nodeType===8?n.parentNode:n),jl(function(){Ly(e,l,t,r)}),l}function Dy(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=xv(o);a.call(l)}}Ly(e,o,n,s)}else o=hV(t,e,n,s,r);return xv(o)}QR=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=td(e.pendingLanes);t!==0&&(ZA(e,t|1),qn(e,Et()),!(Me&6)&&(eh=Et()+500,ua()))}break;case 13:jl(function(){var r=Ui(n,1);if(r!==null){var s=kn();os(r,n,1,s)}}),Lb(n,1)}};eb=function(n){if(n.tag===13){var e=Ui(n,134217728);if(e!==null){var t=kn();os(e,n,134217728,t)}Lb(n,134217728)}};JR=function(n){if(n.tag===13){var e=zo(n),t=Ui(n,e);if(t!==null){var r=kn();os(t,n,e,r)}Lb(n,e)}};ZR=function(){return Be};eP=function(n,e){var t=Be;try{return Be=n,e()}finally{Be=t}};rE=function(n,e,t){switch(e){case"input":if(Y0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=Ty(r);if(!s)throw Error(G(90));kR(r),Y0(r,s)}}}break;case"textarea":MR(n,t);break;case"select":e=t.value,e!=null&&Vc(n,!!t.multiple,e,!1)}};jR=xb;UR=jl;var dV={usingClientEntryPoint:!1,Events:[Qp,Ic,Ty,VR,BR,xb]},qh={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fV={bundleType:qh.bundleType,version:qh.version,rendererPackageName:qh.rendererPackageName,rendererConfig:qh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=HR(n),n===null?null:n.stateNode},findFiberByHostInstance:qh.findFiberByHostInstance||uV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hg.isDisabled&&Hg.supportsFiber)try{wy=Hg.inject(fV),Ms=Hg}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dV;_r.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nb(e))throw Error(G(200));return cV(n,e,null,t)};_r.createRoot=function(n,e){if(!Nb(n))throw Error(G(299));var t=!1,r="",s=AI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=kb(n,1,!1,null,null,t,!1,r,s),n[ji]=e.current,qd(n.nodeType===8?n.parentNode:n),new Mb(e)};_r.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(G(188)):(n=Object.keys(n).join(","),Error(G(268,n)));return n=HR(e),n=n===null?null:n.stateNode,n};_r.flushSync=function(n){return jl(n)};_r.hydrate=function(n,e,t){if(!Ny(e))throw Error(G(200));return Dy(null,n,e,!0,t)};_r.hydrateRoot=function(n,e,t){if(!Nb(n))throw Error(G(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=AI;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=wI(e,null,n,1,t??null,s,!1,i,o),n[ji]=e.current,qd(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new My(e)};_r.render=function(n,e,t){if(!Ny(e))throw Error(G(200));return Dy(null,n,e,!1,t)};_r.unmountComponentAtNode=function(n){if(!Ny(n))throw Error(G(40));return n._reactRootContainer?(jl(function(){Dy(null,null,n,!1,function(){n._reactRootContainer=null,n[ji]=null})}),!0):!1};_r.unstable_batchedUpdates=xb;_r.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Ny(t))throw Error(G(200));if(n==null||n._reactInternals===void 0)throw Error(G(38));return Dy(n,e,t,!1,r)};_r.version="18.3.1-next-f1338f8080-20240426";function bI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bI)}catch(n){console.error(n)}}bI(),bR.exports=_r;var Oy=bR.exports,SI,QC=Oy;SI=QC.createRoot,QC.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nf(){return nf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nf.apply(this,arguments)}var No;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(No||(No={}));const JC="popstate";function pV(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return OE("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:CI(s)}return mV(e,t,null,n)}function Vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function TI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gV(){return Math.random().toString(36).substr(2,8)}function ZC(n,e){return{usr:n.state,key:n.key,idx:e}}function OE(n,e,t,r){return t===void 0&&(t=null),nf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ph(e):e,{state:t,key:e&&e.key||r||gV()})}function CI(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ph(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function mV(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=No.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(nf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=No.Pop;let w=u(),_=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:_})}function p(w,_){a=No.Push;let E=OE(y.location,w,_);c=u()+1;let S=ZC(E,c),R=y.createHref(E);try{o.pushState(S,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(R)}i&&l&&l({action:a,location:y.location,delta:1})}function g(w,_){a=No.Replace;let E=OE(y.location,w,_);c=u();let S=ZC(E,c),R=y.createHref(E);o.replaceState(S,"",R),i&&l&&l({action:a,location:y.location,delta:0})}function m(w){let _=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof w=="string"?w:CI(w);return E=E.replace(/ $/,"%20"),Vt(_,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,_)}let y={get action(){return a},get location(){return n(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(JC,f),l=w,()=>{s.removeEventListener(JC,f),l=null}},createHref(w){return e(s,w)},createURL:m,encodeLocation(w){let _=m(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:g,go(w){return o.go(w)}};return y}var e1;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(e1||(e1={}));function vV(n,e,t){return t===void 0&&(t="/"),yV(n,e,t,!1)}function yV(n,e,t,r){let s=typeof e=="string"?ph(e):e,i=PI(s.pathname||"/",t);if(i==null)return null;let o=xI(n);_V(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=IV(i);a=RV(o[l],c,r)}return a}function xI(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Vt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ll([r,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(Vt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xI(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:CV(c,i.index),routesMeta:u})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of RI(i.path))s(i,o,l)}),e}function RI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=RI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function _V(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:xV(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const EV=/^:[\w-]+$/,wV=3,AV=2,bV=1,SV=10,TV=-2,t1=n=>n==="*";function CV(n,e){let t=n.split("/"),r=t.length;return t.some(t1)&&(r+=TV),e&&(r+=AV),t.filter(s=>!t1(s)).reduce((s,i)=>s+(EV.test(i)?wV:i===""?bV:SV),r)}function xV(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function RV(n,e,t){let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=n1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f&&c&&t&&!r[r.length-1].route.index&&(f=n1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ll([i,f.pathname]),pathnameBase:OV(Ll([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Ll([i,f.pathnameBase]))}return o}function n1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=PV(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:g}=u;if(p==="*"){let y=a[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[f];return g&&!m?c[p]=void 0:c[p]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:n}}function PV(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),TI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function IV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function PI(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function kV(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ph(n):n;return{pathname:t?t.startsWith("/")?t:LV(t,e):e,search:FV(r),hash:VV(s)}}function LV(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function g0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function NV(n,e){let t=MV(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function DV(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=ph(n):(s=nf({},n),Vt(!s.pathname||!s.pathname.includes("?"),g0("?","pathname","search",s)),Vt(!s.pathname||!s.pathname.includes("#"),g0("#","pathname","hash",s)),Vt(!s.search||!s.search.includes("#"),g0("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=kV(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ll=n=>n.join("/").replace(/\/\/+/g,"/"),OV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function BV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const II=["post","put","patch","delete"];new Set(II);const jV=["get",...II];new Set(jV);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rf(){return rf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rf.apply(this,arguments)}const Db=A.createContext(null),UV=A.createContext(null),Fy=A.createContext(null),Vy=A.createContext(null),gh=A.createContext({outlet:null,matches:[],isDataRoute:!1}),kI=A.createContext(null);function By(){return A.useContext(Vy)!=null}function Ob(){return By()||Vt(!1),A.useContext(Vy).location}function LI(n){A.useContext(Fy).static||A.useLayoutEffect(n)}function $V(){let{isDataRoute:n}=A.useContext(gh);return n?tB():zV()}function zV(){By()||Vt(!1);let n=A.useContext(Db),{basename:e,future:t,navigator:r}=A.useContext(Fy),{matches:s}=A.useContext(gh),{pathname:i}=Ob(),o=JSON.stringify(NV(s,t.v7_relativeSplatPath)),a=A.useRef(!1);return LI(()=>{a.current=!0}),A.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=DV(c,JSON.parse(o),i,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ll([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,i,n])}function HV(n,e){return WV(n,e)}function WV(n,e,t,r){By()||Vt(!1);let{navigator:s}=A.useContext(Fy),{matches:i}=A.useContext(gh),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ob(),u;if(e){var f;let w=typeof e=="string"?ph(e):e;l==="/"||(f=w.pathname)!=null&&f.startsWith(l)||Vt(!1),u=w}else u=c;let p=u.pathname||"/",g=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=vV(n,{pathname:g}),y=YV(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ll([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Ll([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,r);return e&&y?A.createElement(Vy.Provider,{value:{location:rf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:No.Pop}},y):y}function GV(){let n=eB(),e=BV(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const qV=A.createElement(GV,null);class KV extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(gh.Provider,{value:this.props.routeContext},A.createElement(kI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XV(n){let{routeContext:e,match:t,children:r}=n,s=A.useContext(Db);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(gh.Provider,{value:e},r)}function YV(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Vt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:g}=t,m=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let g,m=!1,y=null,w=null;t&&(g=a&&f.route.id?a[f.route.id]:void 0,y=f.route.errorElement||qV,l&&(c<0&&p===0?(m=!0,w=null):c===p&&(m=!0,w=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),E=()=>{let S;return g?S=y:m?S=w:f.route.Component?S=A.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,A.createElement(XV,{match:f,routeContext:{outlet:u,matches:_,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?A.createElement(KV,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):E()},null)}var MI=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(MI||{}),Rv=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Rv||{});function QV(n){let e=A.useContext(Db);return e||Vt(!1),e}function JV(n){let e=A.useContext(UV);return e||Vt(!1),e}function ZV(n){let e=A.useContext(gh);return e||Vt(!1),e}function NI(n){let e=ZV(),t=e.matches[e.matches.length-1];return t.route.id||Vt(!1),t.route.id}function eB(){var n;let e=A.useContext(kI),t=JV(Rv.UseRouteError),r=NI(Rv.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function tB(){let{router:n}=QV(MI.UseNavigateStable),e=NI(Rv.UseNavigateStable),t=A.useRef(!1);return LI(()=>{t.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,rf({fromRouteId:e},i)))},[n,e])}function pc(n){Vt(!1)}function nB(n){let{basename:e="/",children:t=null,location:r,navigationType:s=No.Pop,navigator:i,static:o=!1,future:a}=n;By()&&Vt(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:i,static:o,future:rf({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ph(r));let{pathname:u="/",search:f="",hash:p="",state:g=null,key:m="default"}=r,y=A.useMemo(()=>{let w=PI(u,l);return w==null?null:{location:{pathname:w,search:f,hash:p,state:g,key:m},navigationType:s}},[l,u,f,p,g,m,s]);return y==null?null:A.createElement(Fy.Provider,{value:c},A.createElement(Vy.Provider,{children:t,value:y}))}function rB(n){let{children:e,location:t}=n;return HV(FE(e),t)}new Promise(()=>{});function FE(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){t.push.apply(t,FE(r.props.children,i));return}r.type!==pc&&Vt(!1),!r.props.index||!r.props.children||Vt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=FE(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const sB="6";try{window.__reactRouterVersion=sB}catch{}const iB="startTransition",r1=wR[iB];function oB(n){let{basename:e,children:t,future:r,window:s}=n,i=A.useRef();i.current==null&&(i.current=pV({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=A.useCallback(f=>{c&&r1?r1(()=>l(f)):l(f)},[l,c]);return A.useLayoutEffect(()=>o.listen(u),[o,u]),A.createElement(nB,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var s1;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(s1||(s1={}));var i1;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(i1||(i1={}));function aB(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Fb(...n){return e=>n.forEach(t=>aB(t,e))}function xt(...n){return A.useCallback(Fb(...n),n)}var Fr=A.forwardRef((n,e)=>{const{children:t,...r}=n,s=A.Children.toArray(t),i=s.find(lB);if(i){const o=i.props.children,a=s.map(l=>l===i?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:l);return V.jsx(VE,{...r,ref:e,children:A.isValidElement(o)?A.cloneElement(o,void 0,a):null})}return V.jsx(VE,{...r,ref:e,children:t})});Fr.displayName="Slot";var VE=A.forwardRef((n,e)=>{const{children:t,...r}=n;if(A.isValidElement(t)){const s=uB(t);return A.cloneElement(t,{...cB(r,t.props),ref:e?Fb(e,s):s})}return A.Children.count(t)>1?A.Children.only(null):null});VE.displayName="SlotClone";var DI=({children:n})=>V.jsx(V.Fragment,{children:n});function lB(n){return A.isValidElement(n)&&n.type===DI}function cB(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{i(...a),s(...a)}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function uB(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var hB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vt=hB.reduce((n,e)=>{const t=A.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Fr:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),V.jsx(a,{...o,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Vb(n,e){n&&Oy.flushSync(()=>n.dispatchEvent(e))}var dB="VisuallyHidden",Bb=A.forwardRef((n,e)=>V.jsx(vt.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Bb.displayName=dB;var fB=Bb,OI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],s=0;s<arguments.length;s++){var i=arguments[s];if(i){var o=typeof i;if(o==="string"||o==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var a=t.apply(null,i);a&&r.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){r.push(i.toString());continue}for(var l in i)e.call(i,l)&&i[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(OI);var pB=OI.exports;const In=_y(pB);function Zp(n,e=[]){let t=[];function r(i,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:p,children:g,...m}=f,y=(p==null?void 0:p[n][l])||a,w=A.useMemo(()=>m,Object.values(m));return V.jsx(y.Provider,{value:w,children:g})}function u(f,p){const g=(p==null?void 0:p[n][l])||a,m=A.useContext(g);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,gB(s,...e)]}function gB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ue(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var Vs=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},mB=wR.useId||(()=>{}),vB=0;function bm(n){const[e,t]=A.useState(mB());return Vs(()=>{t(r=>r??String(vB++))},[n]),e?`radix-${e}`:""}function Yn(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function FI({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=yB({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:r,a=Yn(t),l=A.useCallback(c=>{if(i){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else s(c)},[i,n,s,a]);return[o,l]}function yB({defaultProp:n,onChange:e}){const t=A.useState(n),[r]=t,s=A.useRef(r),i=Yn(e);return A.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),t}function VI(n,e=globalThis==null?void 0:globalThis.document){const t=Yn(n);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var _B="DismissableLayer",BE="dismissableLayer.update",EB="dismissableLayer.pointerDownOutside",wB="dismissableLayer.focusOutside",o1,BI=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jI=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(BI),[u,f]=A.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=A.useState({}),m=xt(e,C=>f(C)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(w),E=u?y.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,R=E>=_,D=SB(C=>{const T=C.target,k=[...c.branches].some(M=>M.contains(T));!R||k||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),F=TB(C=>{const T=C.target;[...c.branches].some(M=>M.contains(T))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return VI(C=>{E===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(o1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),a1(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=o1)}},[u,p,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),a1())},[u,c]),A.useEffect(()=>{const C=()=>g({});return document.addEventListener(BE,C),()=>document.removeEventListener(BE,C)},[]),V.jsx(vt.div,{...l,ref:m,style:{pointerEvents:S?R?"auto":"none":void 0,...n.style},onFocusCapture:ue(n.onFocusCapture,F.onFocusCapture),onBlurCapture:ue(n.onBlurCapture,F.onBlurCapture),onPointerDownCapture:ue(n.onPointerDownCapture,D.onPointerDownCapture)})});jI.displayName=_B;var AB="DismissableLayerBranch",bB=A.forwardRef((n,e)=>{const t=A.useContext(BI),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),V.jsx(vt.div,{...n,ref:s})});bB.displayName=AB;function SB(n,e=globalThis==null?void 0:globalThis.document){const t=Yn(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){UI(EB,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function TB(n,e=globalThis==null?void 0:globalThis.document){const t=Yn(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&UI(wB,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function a1(){const n=new CustomEvent(BE);document.dispatchEvent(n)}function UI(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Vb(s,i):s.dispatchEvent(i)}var m0="focusScope.autoFocusOnMount",v0="focusScope.autoFocusOnUnmount",l1={bubbles:!1,cancelable:!0},CB="FocusScope",$I=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,l]=A.useState(null),c=Yn(s),u=Yn(i),f=A.useRef(null),p=xt(e,y=>l(y)),g=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let y=function(S){if(g.paused||!a)return;const R=S.target;a.contains(R)?f.current=R:to(f.current,{select:!0})},w=function(S){if(g.paused||!a)return;const R=S.relatedTarget;R!==null&&(a.contains(R)||to(f.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const D of S)D.removedNodes.length>0&&to(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const E=new MutationObserver(_);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),E.disconnect()}}},[r,a,g.paused]),A.useEffect(()=>{if(a){u1.add(g);const y=document.activeElement;if(!a.contains(y)){const _=new CustomEvent(m0,l1);a.addEventListener(m0,c),a.dispatchEvent(_),_.defaultPrevented||(xB(LB(zI(a)),{select:!0}),document.activeElement===y&&to(a))}return()=>{a.removeEventListener(m0,c),setTimeout(()=>{const _=new CustomEvent(v0,l1);a.addEventListener(v0,u),a.dispatchEvent(_),_.defaultPrevented||to(y??document.body,{select:!0}),a.removeEventListener(v0,u),u1.remove(g)},0)}}},[a,c,u,g]);const m=A.useCallback(y=>{if(!t&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(w&&_){const E=y.currentTarget,[S,R]=RB(E);S&&R?!y.shiftKey&&_===R?(y.preventDefault(),t&&to(S,{select:!0})):y.shiftKey&&_===S&&(y.preventDefault(),t&&to(R,{select:!0})):_===E&&y.preventDefault()}},[t,r,g.paused]);return V.jsx(vt.div,{tabIndex:-1,...o,ref:p,onKeyDown:m})});$I.displayName=CB;function xB(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(to(r,{select:e}),document.activeElement!==t)return}function RB(n){const e=zI(n),t=c1(e,n),r=c1(e.reverse(),n);return[t,r]}function zI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function c1(n,e){for(const t of n)if(!PB(t,{upTo:e}))return t}function PB(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function IB(n){return n instanceof HTMLInputElement&&"select"in n}function to(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&IB(n)&&e&&n.select()}}var u1=kB();function kB(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=h1(n,e),n.unshift(e)},remove(e){var t;n=h1(n,e),(t=n[0])==null||t.resume()}}}function h1(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function LB(n){return n.filter(e=>e.tagName!=="A")}function MB(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var HI=n=>{const{present:e,children:t}=n,r=NB(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=xt(r.ref,DB(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};HI.displayName="Presence";function NB(n){const[e,t]=A.useState(),r=A.useRef({}),s=A.useRef(n),i=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=MB(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=Wg(r.current);i.current=a==="mounted"?c:"none"},[a]),Vs(()=>{const c=r.current,u=s.current;if(u!==n){const p=i.current,g=Wg(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Vs(()=>{if(e){const c=f=>{const g=Wg(r.current).includes(f.animationName);f.target===e&&g&&Oy.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(i.current=Wg(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function Wg(n){return(n==null?void 0:n.animationName)||"none"}function DB(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var ks=function(){return ks=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ks.apply(this,arguments)};function WI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function OB(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function y0(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function FB(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var VB=typeof window<"u"?A.useLayoutEffect:A.useEffect,d1=new WeakMap;function BB(n,e){var t=FB(null,function(r){return n.forEach(function(s){return y0(s,r)})});return VB(function(){var r=d1.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||y0(a,null)}),i.forEach(function(a){s.has(a)||y0(a,o)})}d1.set(t,n)},[n]),t}function jB(n){return n}function UB(n,e){e===void 0&&(e=jB);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return s}function $B(n){n===void 0&&(n={});var e=UB(null);return e.options=ks({async:!0,ssr:!1},n),e}var GI=function(n){var e=n.sideCar,t=WI(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,ks({},t))};GI.isSideCarExport=!0;function zB(n,e){return n.useMedium(e),GI}var HB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WB(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=HB();return e&&n.setAttribute("nonce",e),n}function GB(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function qB(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var KB=function(){var n=0,e=null;return{add:function(t){n==0&&(e=WB())&&(GB(e,t),qB(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},XB=function(){var n=KB();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},qI=function(){var n=XB(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},YB=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},uc=new WeakMap,Gg=new WeakMap,qg={},_0=0,KI=function(n){return n&&(n.host||KI(n.parentNode))},QB=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=KI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},JB=function(n,e,t,r){var s=QB(e,Array.isArray(n)?n:[n]);qg[t]||(qg[t]=new WeakMap);var i=qg[t],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var g=p.getAttribute(r),m=g!==null&&g!=="false",y=(uc.get(p)||0)+1,w=(i.get(p)||0)+1;uc.set(p,y),i.set(p,w),o.push(p),y===1&&m&&Gg.set(p,!0),w===1&&p.setAttribute(t,"true"),m||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return u(e),a.clear(),_0++,function(){o.forEach(function(f){var p=uc.get(f)-1,g=i.get(f)-1;uc.set(f,p),i.set(f,g),p||(Gg.has(f)||f.removeAttribute(r),Gg.delete(f)),g||f.removeAttribute(t)}),_0--,_0||(uc=new WeakMap,uc=new WeakMap,Gg=new WeakMap,qg={})}},ZB=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=YB(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),JB(r,s,t,"aria-hidden")):function(){return null}};const Ql={asChild:{type:"boolean"}},ej={width:{type:"string",className:"rt-r-w",customProperties:["--width"],responsive:!0},minWidth:{type:"string",className:"rt-r-min-w",customProperties:["--min-width"],responsive:!0},maxWidth:{type:"string",className:"rt-r-max-w",customProperties:["--max-width"],responsive:!0}},tj={height:{type:"string",className:"rt-r-h",customProperties:["--height"],responsive:!0},minHeight:{type:"string",className:"rt-r-min-h",customProperties:["--min-height"],responsive:!0},maxHeight:{type:"string",className:"rt-r-max-h",customProperties:["--max-height"],responsive:!0}},jb=["gray","gold","bronze","brown","yellow","amber","orange","tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","lime","mint","sky"],nj=["auto","gray","mauve","slate","sage","olive","sand"],XI={color:{type:"enum",values:jb,default:void 0}},YI={color:{type:"enum",values:jb,default:""}},Ub={highContrast:{type:"boolean",className:"rt-high-contrast",default:void 0}},rj=["normal","start","end","both"],QI={trim:{type:"enum",className:"rt-r-lt",values:rj,responsive:!0}},sj=["left","center","right"],ij={align:{type:"enum",className:"rt-r-ta",values:sj,responsive:!0}},oj=["wrap","nowrap","pretty","balance"],$b={wrap:{type:"enum",className:"rt-r-tw",values:oj,responsive:!0}},zb={truncate:{type:"boolean",className:"rt-truncate"}},aj=["light","regular","medium","bold"],JI={weight:{type:"enum",className:"rt-r-weight",values:aj,responsive:!0}},Hb=["initial","xs","sm","md","lg","xl"];function ZI(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function kd(n){return typeof n=="object"&&Object.keys(n).some(e=>Hb.includes(e))}function lj({className:n,customProperties:e,...t}){const r=ek({allowArbitraryValues:!0,className:n,...t}),s=cj({customProperties:e,...t});return[r,s]}function ek({allowArbitraryValues:n,value:e,className:t,propValues:r,parseValue:s=i=>i}){const i=[];if(e){if(typeof e=="string"&&r.includes(e))return f1(t,e,s);if(kd(e)){const o=e;for(const a in o){if(!ZI(o,a)||!Hb.includes(a))continue;const l=o[a];if(l!==void 0){if(r.includes(l)){const c=f1(t,l,s),u=a==="initial"?c:`${a}:${c}`;i.push(u)}else if(n){const c=a==="initial"?t:`${a}:${t}`;i.push(c)}}}return i.join(" ")}if(n)return t}}function f1(n,e,t){const r=n?"-":"",s=t(e),i=s==null?void 0:s.startsWith("-"),o=i?"-":"",a=i?s==null?void 0:s.substring(1):s;return`${o}${n}${r}${a}`}function cj({customProperties:n,value:e,propValues:t,parseValue:r=s=>s}){let s={};if(!(!e||typeof e=="string"&&t.includes(e))){if(typeof e=="string"&&(s=Object.fromEntries(n.map(i=>[i,e]))),kd(e)){const i=e;for(const o in i){if(!ZI(i,o)||!Hb.includes(o))continue;const a=i[o];if(!t.includes(a))for(const l of n)s={[o==="initial"?l:`${l}-${o}`]:a,...s}}}for(const i in s){const o=s[i];o!==void 0&&(s[i]=r(o))}return s}}function p1(...n){let e={};for(const t of n)t&&(e={...e,...t});return Object.keys(e).length?e:void 0}function uj(...n){return Object.assign({},...n)}function ha(n,...e){let t,r;const s={...n},i=uj(...e);for(const o in i){let a=s[o];const l=i[o];if(l.default!==void 0&&a===void 0&&(a=l.default),l.type==="enum"&&![l.default,...l.values].includes(a)&&!kd(a)&&(a=l.default),s[o]=a,"className"in l&&l.className){delete s[o];const c="responsive"in l;if(!a||kd(a)&&!c)continue;if(kd(a)&&(l.default!==void 0&&a.initial===void 0&&(a.initial=l.default),l.type==="enum"&&([l.default,...l.values].includes(a.initial)||(a.initial=l.default))),l.type==="enum"){const u=ek({allowArbitraryValues:!1,value:a,className:l.className,propValues:l.values,parseValue:l.parseValue});t=In(t,u);continue}if(l.type==="string"||l.type==="enum | string"){const u=l.type==="string"?[]:l.values,[f,p]=lj({className:l.className,customProperties:l.customProperties,propValues:u,parseValue:l.parseValue,value:a});r=p1(r,p),t=In(t,f);continue}if(l.type==="boolean"&&a){t=In(t,l.className);continue}}}return s.className=In(t,n.className),s.style=p1(r,n.style),s}const _a=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],mh={m:{type:"enum | string",values:_a,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:_a,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:_a,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:_a,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:_a,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:_a,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:_a,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},hj=["span","div","label","p"],dj=["1","2","3","4","5","6","7","8","9"],fj={as:{type:"enum",values:hj,default:"span"},...Ql,size:{type:"enum",className:"rt-r-size",values:dj,responsive:!0},...JI,...ij,...QI,...zb,...$b,...XI,...Ub},Ma=A.forwardRef((n,e)=>{const{children:t,className:r,asChild:s,as:i="span",color:o,...a}=ha(n,fj,mh);return A.createElement(Fr,{"data-accent-color":o,...a,ref:e,className:In("rt-Text",r)},s?t:A.createElement(i,null,t))});Ma.displayName="Text";const pj=["top","right","bottom","left"],Yo=Math.min,fr=Math.max,Pv=Math.round,Kg=Math.floor,Qo=n=>({x:n,y:n}),gj={left:"right",right:"left",bottom:"top",top:"bottom"},mj={start:"end",end:"start"};function jE(n,e,t){return fr(n,Yo(e,t))}function zi(n,e){return typeof n=="function"?n(e):n}function Hi(n){return n.split("-")[0]}function vh(n){return n.split("-")[1]}function Wb(n){return n==="x"?"y":"x"}function Gb(n){return n==="y"?"height":"width"}function Jo(n){return["top","bottom"].includes(Hi(n))?"y":"x"}function qb(n){return Wb(Jo(n))}function vj(n,e,t){t===void 0&&(t=!1);const r=vh(n),s=qb(n),i=Gb(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Iv(o)),[o,Iv(o)]}function yj(n){const e=Iv(n);return[UE(n),e,UE(e)]}function UE(n){return n.replace(/start|end/g,e=>mj[e])}function _j(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Ej(n,e,t,r){const s=vh(n);let i=_j(Hi(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(UE)))),i}function Iv(n){return n.replace(/left|right|bottom|top/g,e=>gj[e])}function wj(n){return{top:0,right:0,bottom:0,left:0,...n}}function tk(n){return typeof n!="number"?wj(n):{top:n,right:n,bottom:n,left:n}}function kv(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function g1(n,e,t){let{reference:r,floating:s}=n;const i=Jo(e),o=qb(e),a=Gb(o),l=Hi(e),c=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-s.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(vh(e)){case"start":g[o]-=p*(t&&c?-1:1);break;case"end":g[o]+=p*(t&&c?-1:1);break}return g}const Aj=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:f}=g1(c,r,l),p=r,g={},m=0;for(let y=0;y<a.length;y++){const{name:w,fn:_}=a[y],{x:E,y:S,data:R,reset:D}=await _({x:u,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:n,floating:e}});u=E??u,f=S??f,g={...g,[w]:{...g[w],...R}},D&&m<=50&&(m++,typeof D=="object"&&(D.placement&&(p=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):D.rects),{x:u,y:f}=g1(c,p,l)),y=-1)}return{x:u,y:f,placement:p,strategy:s,middlewareData:g}};async function sf(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=zi(e,n),m=tk(g),w=a[p?f==="floating"?"reference":"floating":f],_=kv(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},D=kv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:S,strategy:l}):E);return{top:(_.top-D.top+m.top)/R.y,bottom:(D.bottom-_.bottom+m.bottom)/R.y,left:(_.left-D.left+m.left)/R.x,right:(D.right-_.right+m.right)/R.x}}const bj=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=zi(n,e)||{};if(c==null)return{};const f=tk(u),p={x:t,y:r},g=qb(s),m=Gb(g),y=await o.getDimensions(c),w=g==="y",_=w?"top":"left",E=w?"bottom":"right",S=w?"clientHeight":"clientWidth",R=i.reference[m]+i.reference[g]-p[g]-i.floating[m],D=p[g]-i.reference[g],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=F?F[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(F)))&&(C=a.floating[S]||i.floating[m]);const T=R/2-D/2,k=C/2-y[m]/2-1,M=Yo(f[_],k),O=Yo(f[E],k),B=M,N=C-y[m]-O,q=C/2-y[m]/2+T,re=jE(B,q,N),Z=!l.arrow&&vh(s)!=null&&q!==re&&i.reference[m]/2-(q<B?M:O)-y[m]/2<0,W=Z?q<B?q-B:q-N:0;return{[g]:p[g]+W,data:{[g]:re,centerOffset:q-re-W,...Z&&{alignmentOffset:W}},reset:Z}}}),Sj=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...w}=zi(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const _=Hi(s),E=Jo(a),S=Hi(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=p||(S||!y?[Iv(a)]:yj(a)),F=m!=="none";!p&&F&&D.push(...Ej(a,y,m,R));const C=[a,...D],T=await sf(e,w),k=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&k.push(T[_]),f){const q=vj(s,o,R);k.push(T[q[0]],T[q[1]])}if(M=[...M,{placement:s,overflows:k}],!k.every(q=>q<=0)){var O,B;const q=(((O=i.flip)==null?void 0:O.index)||0)+1,re=C[q];if(re)return{data:{index:q,overflows:M},reset:{placement:re}};let Z=(B=M.filter(W=>W.overflows[0]<=0).sort((W,U)=>W.overflows[1]-U.overflows[1])[0])==null?void 0:B.placement;if(!Z)switch(g){case"bestFit":{var N;const W=(N=M.filter(U=>{if(F){const z=Jo(U.placement);return z===E||z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(z=>z>0).reduce((z,X)=>z+X,0)]).sort((U,z)=>U[1]-z[1])[0])==null?void 0:N[0];W&&(Z=W);break}case"initialPlacement":Z=a;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function m1(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function v1(n){return pj.some(e=>n[e]>=0)}const Tj=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=zi(n,e);switch(r){case"referenceHidden":{const i=await sf(e,{...s,elementContext:"reference"}),o=m1(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:v1(o)}}}case"escaped":{const i=await sf(e,{...s,altBoundary:!0}),o=m1(i,t.floating);return{data:{escapedOffsets:o,escaped:v1(o)}}}default:return{}}}}};async function Cj(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Hi(t),a=vh(t),l=Jo(t)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=zi(e,n);let{mainAxis:p,crossAxis:g,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(g=a==="end"?m*-1:m),l?{x:g*u,y:p*c}:{x:p*c,y:g*u}}const xj=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await Cj(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Rj=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:_,y:E}=w;return{x:_,y:E}}},...l}=zi(n,e),c={x:t,y:r},u=await sf(e,l),f=Jo(Hi(s)),p=Wb(f);let g=c[p],m=c[f];if(i){const w=p==="y"?"top":"left",_=p==="y"?"bottom":"right",E=g+u[w],S=g-u[_];g=jE(E,g,S)}if(o){const w=f==="y"?"top":"left",_=f==="y"?"bottom":"right",E=m+u[w],S=m-u[_];m=jE(E,m,S)}const y=a.fn({...e,[p]:g,[f]:m});return{...y,data:{x:y.x-t,y:y.y-r,enabled:{[p]:i,[f]:o}}}}}},Pj=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=zi(n,e),u={x:t,y:r},f=Jo(s),p=Wb(f);let g=u[p],m=u[f];const y=zi(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const S=p==="y"?"height":"width",R=i.reference[p]-i.floating[S]+w.mainAxis,D=i.reference[p]+i.reference[S]-w.mainAxis;g<R?g=R:g>D&&(g=D)}if(c){var _,E;const S=p==="y"?"width":"height",R=["top","left"].includes(Hi(s)),D=i.reference[f]-i.floating[S]+(R&&((_=o.offset)==null?void 0:_[f])||0)+(R?0:w.crossAxis),F=i.reference[f]+i.reference[S]+(R?0:((E=o.offset)==null?void 0:E[f])||0)-(R?w.crossAxis:0);m<D?m=D:m>F&&(m=F)}return{[p]:g,[f]:m}}}},Ij=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=zi(n,e),u=await sf(e,c),f=Hi(s),p=vh(s),g=Jo(s)==="y",{width:m,height:y}=i.floating;let w,_;f==="top"||f==="bottom"?(w=f,_=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,w=p==="end"?"top":"bottom");const E=y-u.top-u.bottom,S=m-u.left-u.right,R=Yo(y-u[w],E),D=Yo(m-u[_],S),F=!e.middlewareData.shift;let C=R,T=D;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=E),F&&!p){const M=fr(u.left,0),O=fr(u.right,0),B=fr(u.top,0),N=fr(u.bottom,0);g?T=m-2*(M!==0||O!==0?M+O:fr(u.left,u.right)):C=y-2*(B!==0||N!==0?B+N:fr(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:C});const k=await o.getDimensions(a.floating);return m!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function jy(){return typeof window<"u"}function yh(n){return nk(n)?(n.nodeName||"").toLowerCase():"#document"}function vr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Hs(n){var e;return(e=(nk(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function nk(n){return jy()?n instanceof Node||n instanceof vr(n).Node:!1}function ls(n){return jy()?n instanceof Element||n instanceof vr(n).Element:!1}function Bs(n){return jy()?n instanceof HTMLElement||n instanceof vr(n).HTMLElement:!1}function y1(n){return!jy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof vr(n).ShadowRoot}function eg(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=cs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function kj(n){return["table","td","th"].includes(yh(n))}function Uy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Kb(n){const e=Xb(),t=ls(n)?cs(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Lj(n){let e=Zo(n);for(;Bs(e)&&!th(e);){if(Kb(e))return e;if(Uy(e))return null;e=Zo(e)}return null}function Xb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function th(n){return["html","body","#document"].includes(yh(n))}function cs(n){return vr(n).getComputedStyle(n)}function $y(n){return ls(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Zo(n){if(yh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||y1(n)&&n.host||Hs(n);return y1(e)?e.host:e}function rk(n){const e=Zo(n);return th(e)?n.ownerDocument?n.ownerDocument.body:n.body:Bs(e)&&eg(e)?e:rk(e)}function of(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=rk(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=vr(s);if(i){const a=$E(o);return e.concat(o,o.visualViewport||[],eg(s)?s:[],a&&t?of(a):[])}return e.concat(s,of(s,[],t))}function $E(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function sk(n){const e=cs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Bs(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=Pv(t)!==i||Pv(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function Yb(n){return ls(n)?n:n.contextElement}function Hc(n){const e=Yb(n);if(!Bs(e))return Qo(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=sk(e);let o=(i?Pv(t.width):t.width)/r,a=(i?Pv(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Mj=Qo(0);function ik(n){const e=vr(n);return!Xb()||!e.visualViewport?Mj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Nj(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==vr(n)?!1:e}function Ul(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=Yb(n);let o=Qo(1);e&&(r?ls(r)&&(o=Hc(r)):o=Hc(n));const a=Nj(i,t,r)?ik(i):Qo(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const p=vr(i),g=r&&ls(r)?vr(r):r;let m=p,y=$E(m);for(;y&&r&&g!==m;){const w=Hc(y),_=y.getBoundingClientRect(),E=cs(y),S=_.left+(y.clientLeft+parseFloat(E.paddingLeft))*w.x,R=_.top+(y.clientTop+parseFloat(E.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=S,c+=R,m=vr(y),y=$E(m)}}return kv({width:u,height:f,x:l,y:c})}function Dj(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=Hs(r),a=e?Uy(e.floating):!1;if(r===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},c=Qo(1);const u=Qo(0),f=Bs(r);if((f||!f&&!i)&&((yh(r)!=="body"||eg(o))&&(l=$y(r)),Bs(r))){const p=Ul(r);c=Hc(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function Oj(n){return Array.from(n.getClientRects())}function zE(n,e){const t=$y(n).scrollLeft;return e?e.left+t:Ul(Hs(n)).left+t}function Fj(n){const e=Hs(n),t=$y(n),r=n.ownerDocument.body,s=fr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=fr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+zE(n);const a=-t.scrollTop;return cs(r).direction==="rtl"&&(o+=fr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function Vj(n,e){const t=vr(n),r=Hs(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Xb();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function Bj(n,e){const t=Ul(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=Bs(n)?Hc(n):Qo(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function _1(n,e,t){let r;if(e==="viewport")r=Vj(n,t);else if(e==="document")r=Fj(Hs(n));else if(ls(e))r=Bj(e,t);else{const s=ik(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return kv(r)}function ok(n,e){const t=Zo(n);return t===e||!ls(t)||th(t)?!1:cs(t).position==="fixed"||ok(t,e)}function jj(n,e){const t=e.get(n);if(t)return t;let r=of(n,[],!1).filter(a=>ls(a)&&yh(a)!=="body"),s=null;const i=cs(n).position==="fixed";let o=i?Zo(n):n;for(;ls(o)&&!th(o);){const a=cs(o),l=Kb(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||eg(o)&&!l&&ok(n,o))?r=r.filter(u=>u!==o):s=a,o=Zo(o)}return e.set(n,r),r}function Uj(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?Uy(e)?[]:jj(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=_1(e,u,s);return c.top=fr(f.top,c.top),c.right=Yo(f.right,c.right),c.bottom=Yo(f.bottom,c.bottom),c.left=fr(f.left,c.left),c},_1(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function $j(n){const{width:e,height:t}=sk(n);return{width:e,height:t}}function zj(n,e,t){const r=Bs(e),s=Hs(e),i=t==="fixed",o=Ul(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Qo(0);if(r||!r&&!i)if((yh(e)!=="body"||eg(s))&&(a=$y(e)),r){const g=Ul(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&(l.x=zE(s));let c=0,u=0;if(s&&!r&&!i){const g=s.getBoundingClientRect();u=g.top+a.scrollTop,c=g.left+a.scrollLeft-zE(s,g)}const f=o.left+a.scrollLeft-l.x-c,p=o.top+a.scrollTop-l.y-u;return{x:f,y:p,width:o.width,height:o.height}}function E0(n){return cs(n).position==="static"}function E1(n,e){if(!Bs(n)||cs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Hs(n)===t&&(t=t.ownerDocument.body),t}function ak(n,e){const t=vr(n);if(Uy(n))return t;if(!Bs(n)){let s=Zo(n);for(;s&&!th(s);){if(ls(s)&&!E0(s))return s;s=Zo(s)}return t}let r=E1(n,e);for(;r&&kj(r)&&E0(r);)r=E1(r,e);return r&&th(r)&&E0(r)&&!Kb(r)?t:r||Lj(n)||t}const Hj=async function(n){const e=this.getOffsetParent||ak,t=this.getDimensions,r=await t(n.floating);return{reference:zj(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Wj(n){return cs(n).direction==="rtl"}const Gj={convertOffsetParentRelativeRectToViewportRelativeRect:Dj,getDocumentElement:Hs,getClippingRect:Uj,getOffsetParent:ak,getElementRects:Hj,getClientRects:Oj,getDimensions:$j,getScale:Hc,isElement:ls,isRTL:Wj};function qj(n,e){let t=null,r;const s=Hs(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:f,height:p}=n.getBoundingClientRect();if(a||e(),!f||!p)return;const g=Kg(u),m=Kg(s.clientWidth-(c+f)),y=Kg(s.clientHeight-(u+p)),w=Kg(c),E={rootMargin:-g+"px "+-m+"px "+-y+"px "+-w+"px",threshold:fr(0,Yo(1,l))||1};let S=!0;function R(D){const F=D[0].intersectionRatio;if(F!==l){if(!S)return o();F?o(!1,F):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{t=new IntersectionObserver(R,{...E,root:s.ownerDocument})}catch{t=new IntersectionObserver(R,E)}t.observe(n)}return o(!0),i}function Kj(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Yb(n),u=s||i?[...c?of(c):[],...of(e)]:[];u.forEach(_=>{s&&_.addEventListener("scroll",t,{passive:!0}),i&&_.addEventListener("resize",t)});const f=c&&a?qj(c,t):null;let p=-1,g=null;o&&(g=new ResizeObserver(_=>{let[E]=_;E&&E.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let m,y=l?Ul(n):null;l&&w();function w(){const _=Ul(n);y&&(_.x!==y.x||_.y!==y.y||_.width!==y.width||_.height!==y.height)&&t(),y=_,m=requestAnimationFrame(w)}return t(),()=>{var _;u.forEach(E=>{s&&E.removeEventListener("scroll",t),i&&E.removeEventListener("resize",t)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(m)}}const Xj=xj,Yj=Rj,Qj=Sj,Jj=Ij,Zj=Tj,w1=bj,e4=Pj,t4=(n,e,t)=>{const r=new Map,s={platform:Gj,...t},i={...s.platform,_c:r};return Aj(n,e,{...s,platform:i})};var Sm=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Lv(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Lv(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!Lv(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function lk(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function A1(n,e){const t=lk(n);return Math.round(e*t)/t}function w0(n){const e=A.useRef(n);return Sm(()=>{e.current=n}),e}function n4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=A.useState(r);Lv(p,r)||g(r);const[m,y]=A.useState(null),[w,_]=A.useState(null),E=A.useCallback(U=>{U!==F.current&&(F.current=U,y(U))},[]),S=A.useCallback(U=>{U!==C.current&&(C.current=U,_(U))},[]),R=i||m,D=o||w,F=A.useRef(null),C=A.useRef(null),T=A.useRef(u),k=l!=null,M=w0(l),O=w0(s),B=w0(c),N=A.useCallback(()=>{if(!F.current||!C.current)return;const U={placement:e,strategy:t,middleware:p};O.current&&(U.platform=O.current),t4(F.current,C.current,U).then(z=>{const X={...z,isPositioned:B.current!==!1};q.current&&!Lv(T.current,X)&&(T.current=X,Oy.flushSync(()=>{f(X)}))})},[p,e,t,O,B]);Sm(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[c]);const q=A.useRef(!1);Sm(()=>(q.current=!0,()=>{q.current=!1}),[]),Sm(()=>{if(R&&(F.current=R),D&&(C.current=D),R&&D){if(M.current)return M.current(R,D,N);N()}},[R,D,N,M,k]);const re=A.useMemo(()=>({reference:F,floating:C,setReference:E,setFloating:S}),[E,S]),Z=A.useMemo(()=>({reference:R,floating:D}),[R,D]),W=A.useMemo(()=>{const U={position:t,left:0,top:0};if(!Z.floating)return U;const z=A1(Z.floating,u.x),X=A1(Z.floating,u.y);return a?{...U,transform:"translate("+z+"px, "+X+"px)",...lk(Z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:X}},[t,a,Z.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:N,refs:re,elements:Z,floatingStyles:W}),[u,N,re,Z,W])}const r4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?w1({element:r.current,padding:s}).fn(t):{}:r?w1({element:r,padding:s}).fn(t):{}}}},s4=(n,e)=>({...Xj(n),options:[n,e]}),i4=(n,e)=>({...Yj(n),options:[n,e]}),o4=(n,e)=>({...e4(n),options:[n,e]}),a4=(n,e)=>({...Qj(n),options:[n,e]}),l4=(n,e)=>({...Jj(n),options:[n,e]}),c4=(n,e)=>({...Zj(n),options:[n,e]}),u4=(n,e)=>({...r4(n),options:[n,e]});var h4="Arrow",ck=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return V.jsx(vt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:V.jsx("polygon",{points:"0,0 30,0 15,10"})})});ck.displayName=h4;var d4=ck;function f4(n){const[e,t]=A.useState(void 0);return Vs(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Qb="Popper",[uk,zy]=Zp(Qb),[p4,hk]=uk(Qb),dk=n=>{const{__scopePopper:e,children:t}=n,[r,s]=A.useState(null);return V.jsx(p4,{scope:e,anchor:r,onAnchorChange:s,children:t})};dk.displayName=Qb;var fk="PopperAnchor",pk=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=hk(fk,t),o=A.useRef(null),a=xt(e,o);return A.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:V.jsx(vt.div,{...s,ref:a})});pk.displayName=fk;var Jb="PopperContent",[g4,m4]=uk(Jb),gk=A.forwardRef((n,e)=>{var fe,ut,Je,Ie,Jn,wr;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:m,...y}=n,w=hk(Jb,t),[_,E]=A.useState(null),S=xt(e,Ae=>E(Ae)),[R,D]=A.useState(null),F=f4(R),C=(F==null?void 0:F.width)??0,T=(F==null?void 0:F.height)??0,k=r+(i!=="center"?"-"+i:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],B=O.length>0,N={padding:M,boundary:O.filter(y4),altBoundary:B},{refs:q,floatingStyles:re,placement:Z,isPositioned:W,middlewareData:U}=n4({strategy:"fixed",placement:k,whileElementsMounted:(...Ae)=>Kj(...Ae,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[s4({mainAxis:s+T,alignmentAxis:o}),l&&i4({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?o4():void 0,...N}),l&&a4({...N}),l4({...N,apply:({elements:Ae,rects:We,availableWidth:ht,availableHeight:rt})=>{const{width:us,height:Gs}=We.reference,qs=Ae.floating.style;qs.setProperty("--radix-popper-available-width",`${ht}px`),qs.setProperty("--radix-popper-available-height",`${rt}px`),qs.setProperty("--radix-popper-anchor-width",`${us}px`),qs.setProperty("--radix-popper-anchor-height",`${Gs}px`)}}),R&&u4({element:R,padding:a}),_4({arrowWidth:C,arrowHeight:T}),p&&c4({strategy:"referenceHidden",...N})]}),[z,X]=yk(Z),ce=Yn(m);Vs(()=>{W&&(ce==null||ce())},[W,ce]);const se=(fe=U.arrow)==null?void 0:fe.x,ae=(ut=U.arrow)==null?void 0:ut.y,je=((Je=U.arrow)==null?void 0:Je.centerOffset)!==0,[Ue,Pe]=A.useState();return Vs(()=>{_&&Pe(window.getComputedStyle(_).zIndex)},[_]),V.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:W?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ue,"--radix-popper-transform-origin":[(Ie=U.transformOrigin)==null?void 0:Ie.x,(Jn=U.transformOrigin)==null?void 0:Jn.y].join(" "),...((wr=U.hide)==null?void 0:wr.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:V.jsx(g4,{scope:t,placedSide:z,onArrowChange:D,arrowX:se,arrowY:ae,shouldHideArrow:je,children:V.jsx(vt.div,{"data-side":z,"data-align":X,...y,ref:S,style:{...y.style,animation:W?void 0:"none"}})})})});gk.displayName=Jb;var mk="PopperArrow",v4={top:"bottom",right:"left",bottom:"top",left:"right"},vk=A.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=m4(mk,r),o=v4[i.placedSide];return V.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:V.jsx(d4,{...s,ref:t,style:{...s.style,display:"block"}})})});vk.displayName=mk;function y4(n){return n!==null}var _4=n=>({name:"transformOrigin",options:n,fn(e){var w,_,E;const{placement:t,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=yk(t),f={start:"0%",center:"50%",end:"100%"}[u],p=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,g=(((E=s.arrow)==null?void 0:E.y)??0)+l/2;let m="",y="";return c==="bottom"?(m=o?f:`${p}px`,y=`${-l}px`):c==="top"?(m=o?f:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,y=o?f:`${g}px`):c==="left"&&(m=`${r.floating.width+l}px`,y=o?f:`${g}px`),{data:{x:m,y}}}});function yk(n){const[e,t="center"]=n.split("-");return[e,t]}var E4=dk,_k=pk,Ek=gk,wk=vk,[Hy,U8]=Zp("Tooltip",[zy]),Zb=zy(),Ak="TooltipProvider",w4=700,b1="tooltip.open",[A4,bk]=Hy(Ak),Sk=n=>{const{__scopeTooltip:e,delayDuration:t=w4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,[o,a]=A.useState(!0),l=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),V.jsx(A4,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:A.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Sk.displayName=Ak;var Tk="Tooltip",[$8,Wy]=Hy(Tk),HE="TooltipTrigger",b4=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Wy(HE,t),i=bk(HE,t),o=Zb(t),a=A.useRef(null),l=xt(e,a,s.onTriggerChange),c=A.useRef(!1),u=A.useRef(!1),f=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),V.jsx(_k,{asChild:!0,...o,children:V.jsx(vt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:ue(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:ue(n.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:ue(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ue(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:ue(n.onBlur,s.onClose),onClick:ue(n.onClick,s.onClose)})})});b4.displayName=HE;var S4="TooltipPortal",[z8,T4]=Hy(S4,{forceMount:void 0}),nh="TooltipContent",C4=A.forwardRef((n,e)=>{const t=T4(nh,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=Wy(nh,n.__scopeTooltip);return V.jsx(HI,{present:r||o.open,children:o.disableHoverableContent?V.jsx(Ck,{side:s,...i,ref:e}):V.jsx(x4,{side:s,...i,ref:e})})}),x4=A.forwardRef((n,e)=>{const t=Wy(nh,n.__scopeTooltip),r=bk(nh,n.__scopeTooltip),s=A.useRef(null),i=xt(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:f}=r,p=A.useCallback(()=>{a(null),f(!1)},[f]),g=A.useCallback((m,y)=>{const w=m.currentTarget,_={x:m.clientX,y:m.clientY},E=k4(_,w.getBoundingClientRect()),S=L4(_,E),R=M4(y.getBoundingClientRect()),D=D4([...S,...R]);a(D),f(!0)},[f]);return A.useEffect(()=>()=>p(),[p]),A.useEffect(()=>{if(l&&u){const m=w=>g(w,u),y=w=>g(w,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",y)}}},[l,u,g,p]),A.useEffect(()=>{if(o){const m=y=>{const w=y.target,_={x:y.clientX,y:y.clientY},E=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),S=!N4(_,o);E?p():S&&(p(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,c,p]),V.jsx(Ck,{...n,ref:i})}),[R4,P4]=Hy(Tk,{isInside:!1}),Ck=A.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,l=Wy(nh,t),c=Zb(t),{onClose:u}=l;return A.useEffect(()=>(document.addEventListener(b1,u),()=>document.removeEventListener(b1,u)),[u]),A.useEffect(()=>{if(l.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),V.jsx(jI,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:V.jsxs(Ek,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[V.jsx(DI,{children:r}),V.jsx(R4,{scope:t,isInside:!0,children:V.jsx(fB,{id:l.contentId,role:"tooltip",children:s||r})})]})})});C4.displayName=nh;var xk="TooltipArrow",I4=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Zb(t);return P4(xk,t).isInside?null:V.jsx(wk,{...s,...r,ref:e})});I4.displayName=xk;function k4(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function L4(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function M4(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function N4(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function D4(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),O4(e)}function O4(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var F4=Sk,Rk=A.createContext(void 0),V4=n=>{const{dir:e,children:t}=n;return V.jsx(Rk.Provider,{value:e,children:t})};function eS(n){const e=A.useContext(Rk);return n||e||"ltr"}function B4(n){switch(n){case"tomato":case"red":case"ruby":case"crimson":case"pink":case"plum":case"purple":case"violet":return"mauve";case"iris":case"indigo":case"blue":case"sky":case"cyan":return"slate";case"teal":case"jade":case"mint":case"green":return"sage";case"grass":case"lime":return"olive";case"yellow":case"amber":case"orange":case"brown":case"gold":case"bronze":return"sand";case"gray":return"gray"}}const Pk=["none","small","medium","large","full"],j4={radius:{type:"enum",values:Pk,default:void 0}},U4=["inherit","light","dark"],$4=["solid","translucent"],z4=["90%","95%","100%","105%","110%"],dr={...Ql,hasBackground:{type:"boolean",default:!0},appearance:{type:"enum",values:U4,default:"inherit"},accentColor:{type:"enum",values:jb,default:"indigo"},grayColor:{type:"enum",values:nj,default:"auto"},panelBackground:{type:"enum",values:$4,default:"translucent"},radius:{type:"enum",values:Pk,default:"medium"},scaling:{type:"enum",values:z4,default:"100%"}},hc=()=>{},WE=A.createContext(void 0),Ik=A.forwardRef((n,e)=>A.useContext(WE)===void 0?A.createElement(F4,{delayDuration:200},A.createElement(V4,{dir:"ltr"},A.createElement(kk,{...n,ref:e}))):A.createElement(tS,{...n,ref:e}));Ik.displayName="Theme";const kk=A.forwardRef((n,e)=>{const{appearance:t=dr.appearance.default,accentColor:r=dr.accentColor.default,grayColor:s=dr.grayColor.default,panelBackground:i=dr.panelBackground.default,radius:o=dr.radius.default,scaling:a=dr.scaling.default,hasBackground:l=dr.hasBackground.default,...c}=n,[u,f]=A.useState(t);A.useEffect(()=>f(t),[t]);const[p,g]=A.useState(r);A.useEffect(()=>g(r),[r]);const[m,y]=A.useState(s);A.useEffect(()=>y(s),[s]);const[w,_]=A.useState(i);A.useEffect(()=>_(i),[i]);const[E,S]=A.useState(o);A.useEffect(()=>S(o),[o]);const[R,D]=A.useState(a);return A.useEffect(()=>D(a),[a]),A.createElement(tS,{...c,ref:e,isRoot:!0,hasBackground:l,appearance:u,accentColor:p,grayColor:m,panelBackground:w,radius:E,scaling:R,onAppearanceChange:f,onAccentColorChange:g,onGrayColorChange:y,onPanelBackgroundChange:_,onRadiusChange:S,onScalingChange:D})});kk.displayName="ThemeRoot";const tS=A.forwardRef((n,e)=>{const t=A.useContext(WE),{asChild:r,isRoot:s,hasBackground:i,appearance:o=(t==null?void 0:t.appearance)??dr.appearance.default,accentColor:a=(t==null?void 0:t.accentColor)??dr.accentColor.default,grayColor:l=(t==null?void 0:t.resolvedGrayColor)??dr.grayColor.default,panelBackground:c=(t==null?void 0:t.panelBackground)??dr.panelBackground.default,radius:u=(t==null?void 0:t.radius)??dr.radius.default,scaling:f=(t==null?void 0:t.scaling)??dr.scaling.default,onAppearanceChange:p=hc,onAccentColorChange:g=hc,onGrayColorChange:m=hc,onPanelBackgroundChange:y=hc,onRadiusChange:w=hc,onScalingChange:_=hc,...E}=n,S=r?Fr:"div",R=l==="auto"?B4(a):l,D=n.appearance==="light"||n.appearance==="dark",F=i===void 0?s||D:i;return A.createElement(WE.Provider,{value:A.useMemo(()=>({appearance:o,accentColor:a,grayColor:l,resolvedGrayColor:R,panelBackground:c,radius:u,scaling:f,onAppearanceChange:p,onAccentColorChange:g,onGrayColorChange:m,onPanelBackgroundChange:y,onRadiusChange:w,onScalingChange:_}),[o,a,l,R,c,u,f,p,g,m,y,w,_])},A.createElement(S,{"data-is-root-theme":s?"true":"false","data-accent-color":a,"data-gray-color":R,"data-has-background":F?"true":"false","data-panel-background":c,"data-radius":u,"data-scaling":f,ref:e,...E,className:In("radix-themes",{light:o==="light",dark:o==="dark"},E.className)}))});tS.displayName="ThemeImpl";var nS="Avatar",[H4,H8]=Zp(nS),[W4,Lk]=H4(nS),Mk=A.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=A.useState("idle");return V.jsx(W4,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:V.jsx(vt.span,{...r,ref:e})})});Mk.displayName=nS;var Nk="AvatarImage",Dk=A.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,o=Lk(Nk,t),a=q4(r),l=Yn(c=>{s(c),o.onImageLoadingStatusChange(c)});return Vs(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?V.jsx(vt.img,{...i,ref:e,src:r}):null});Dk.displayName=Nk;var Ok="AvatarFallback",G4=A.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=Lk(Ok,t),[o,a]=A.useState(r===void 0);return A.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?V.jsx(vt.span,{...s,ref:e}):null});G4.displayName=Ok;function q4(n){const[e,t]=A.useState("idle");return Vs(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,i=o=>()=>{r&&t(o)};return t("loading"),s.onload=i("loaded"),s.onerror=i("error"),s.src=n,()=>{r=!1}},[n]),e}var K4=Mk,X4=Dk;const Fk=A.forwardRef((n,e)=>{const{asChild:t,children:r,className:s,...i}=n,o=t?Fr:"blockquote";return A.createElement(Ma,{asChild:!0,...i,ref:e,className:In("rt-Blockquote",s)},A.createElement(o,null,r))});Fk.displayName="Blockquote";const Ea=["0","1","2","3","4","5","6","7","8","9"],Y4={p:{type:"enum | string",className:"rt-r-p",customProperties:["--p"],values:Ea,responsive:!0},px:{type:"enum | string",className:"rt-r-px",customProperties:["--pl","--pr"],values:Ea,responsive:!0},py:{type:"enum | string",className:"rt-r-py",customProperties:["--pt","--pb"],values:Ea,responsive:!0},pt:{type:"enum | string",className:"rt-r-pt",customProperties:["--pt"],values:Ea,responsive:!0},pr:{type:"enum | string",className:"rt-r-pr",customProperties:["--pr"],values:Ea,responsive:!0},pb:{type:"enum | string",className:"rt-r-pb",customProperties:["--pb"],values:Ea,responsive:!0},pl:{type:"enum | string",className:"rt-r-pl",customProperties:["--pl"],values:Ea,responsive:!0}},A0=["visible","hidden","clip","scroll","auto"],Q4=["static","relative","absolute","fixed","sticky"],Kh=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],J4=["0","1"],Z4=["0","1"],eU={...Y4,...ej,...tj,position:{type:"enum",className:"rt-r-position",values:Q4,responsive:!0},inset:{type:"enum | string",className:"rt-r-inset",customProperties:["--inset"],values:Kh,responsive:!0},top:{type:"enum | string",className:"rt-r-top",customProperties:["--top"],values:Kh,responsive:!0},right:{type:"enum | string",className:"rt-r-right",customProperties:["--right"],values:Kh,responsive:!0},bottom:{type:"enum | string",className:"rt-r-bottom",customProperties:["--bottom"],values:Kh,responsive:!0},left:{type:"enum | string",className:"rt-r-left",customProperties:["--left"],values:Kh,responsive:!0},overflow:{type:"enum",className:"rt-r-overflow",values:A0,responsive:!0},overflowX:{type:"enum",className:"rt-r-ox",values:A0,responsive:!0},overflowY:{type:"enum",className:"rt-r-oy",values:A0,responsive:!0},flexBasis:{type:"string",className:"rt-r-fb",customProperties:["--flex-basis"],responsive:!0},flexShrink:{type:"enum | string",className:"rt-r-fs",customProperties:["--flex-shrink"],values:J4,responsive:!0},flexGrow:{type:"enum | string",className:"rt-r-fg",customProperties:["--flex-grow"],values:Z4,responsive:!0},gridArea:{type:"string",className:"rt-r-ga",customProperties:["--grid-area"],responsive:!0},gridColumn:{type:"string",className:"rt-r-gc",customProperties:["--grid-column"],responsive:!0},gridColumnStart:{type:"string",className:"rt-r-gcs",customProperties:["--grid-column-start"],responsive:!0},gridColumnEnd:{type:"string",className:"rt-r-gce",customProperties:["--grid-column-end"],responsive:!0},gridRow:{type:"string",className:"rt-r-gr",customProperties:["--grid-row"],responsive:!0},gridRowStart:{type:"string",className:"rt-r-grs",customProperties:["--grid-row-start"],responsive:!0},gridRowEnd:{type:"string",className:"rt-r-gre",customProperties:["--grid-row-end"],responsive:!0}},tU=["1","2","3","4"],nU=["classic","solid","soft","surface","outline","ghost"],S1={...Ql,size:{type:"enum",className:"rt-r-size",values:tU,default:"2",responsive:!0},variant:{type:"enum",className:"rt-variant",values:nU,default:"solid"},...YI,...Ub,...j4,loading:{type:"boolean",className:"rt-loading",default:!1}},b0=["0","1","2","3","4","5","6","7","8","9"],rU={gap:{type:"enum | string",className:"rt-r-gap",customProperties:["--gap"],values:b0,responsive:!0},gapX:{type:"enum | string",className:"rt-r-cg",customProperties:["--column-gap"],values:b0,responsive:!0},gapY:{type:"enum | string",className:"rt-r-rg",customProperties:["--row-gap"],values:b0,responsive:!0}},sU=["div","span"],iU=["none","inline-flex","flex"],oU=["row","column","row-reverse","column-reverse"],aU=["start","center","end","baseline","stretch"],lU=["start","center","end","between"],cU=["nowrap","wrap","wrap-reverse"],uU={as:{type:"enum",values:sU,default:"div"},...Ql,display:{type:"enum",className:"rt-r-display",values:iU,responsive:!0},direction:{type:"enum",className:"rt-r-fd",values:oU,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:aU,responsive:!0},justify:{type:"enum",className:"rt-r-jc",values:lU,parseValue:hU,responsive:!0},wrap:{type:"enum",className:"rt-r-fw",values:cU,responsive:!0},...rU};function hU(n){return n==="between"?"space-between":n}const Ni=A.forwardRef((n,e)=>{const{className:t,asChild:r,as:s="div",...i}=ha(n,uU,eU,mh);return A.createElement(r?Fr:s,{...i,ref:e,className:In("rt-Flex",t)})});Ni.displayName="Flex";const dU=["1","2","3"],fU={size:{type:"enum",className:"rt-r-size",values:dU,default:"2",responsive:!0},loading:{type:"boolean",default:!0}},Vk=A.forwardRef((n,e)=>{const{className:t,children:r,loading:s,...i}=ha(n,fU,mh);if(!s)return r;const o=A.createElement("span",{...i,ref:e,className:In("rt-Spinner",t)},A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}));return r===void 0?o:A.createElement(Ni,{asChild:!0,position:"relative",align:"center",justify:"center"},A.createElement("span",null,A.createElement("span",{"aria-hidden":!0,style:{display:"contents",visibility:"hidden"},inert:void 0},r),A.createElement(Ni,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},A.createElement("span",null,o))))});Vk.displayName="Spinner";function pU(n,e){if(n!==void 0)return typeof n=="string"?e(n):Object.fromEntries(Object.entries(n).map(([t,r])=>[t,e(r)]))}function gU(n){switch(n){case"1":return"1";case"2":case"3":return"2";case"4":return"3"}}const Bk=A.forwardRef((n,e)=>{const{size:t=S1.size.default}=n,{className:r,children:s,asChild:i,color:o,radius:a,disabled:l=n.loading,...c}=ha(n,S1,mh);return A.createElement(i?Fr:"button",{"data-disabled":l||void 0,"data-accent-color":o,"data-radius":a,...c,ref:e,className:In("rt-reset","rt-BaseButton",r),disabled:l},n.loading?A.createElement(A.Fragment,null,A.createElement("span",{style:{display:"contents",visibility:"hidden"},"aria-hidden":!0},s),A.createElement(Bb,null,s),A.createElement(Ni,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},A.createElement("span",null,A.createElement(Vk,{size:pU(t,gU)})))):s)});Bk.displayName="BaseButton";const GE=A.forwardRef(({className:n,...e},t)=>A.createElement(Bk,{...e,ref:t,className:In("rt-Button",n)}));GE.displayName="Button";const mU=["1","2","3","4","5"],vU=["surface","classic","ghost"],yU={...Ql,size:{type:"enum",className:"rt-r-size",values:mU,default:"1",responsive:!0},variant:{type:"enum",className:"rt-variant",values:vU,default:"surface"}},jk=A.forwardRef((n,e)=>{const{asChild:t,className:r,...s}=ha(n,yU,mh);return A.createElement(t?Fr:"div",{ref:e,...s,className:In("rt-reset","rt-BaseCard","rt-Card",r)})});jk.displayName="Card";function rS(n){const e=n+"CollectionProvider",[t,r]=Zp(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:m,children:y}=g,w=eo.useRef(null),_=eo.useRef(new Map).current;return V.jsx(s,{scope:m,itemMap:_,collectionRef:w,children:y})};o.displayName=e;const a=n+"CollectionSlot",l=eo.forwardRef((g,m)=>{const{scope:y,children:w}=g,_=i(a,y),E=xt(m,_.collectionRef);return V.jsx(Fr,{ref:E,children:w})});l.displayName=a;const c=n+"CollectionItemSlot",u="data-radix-collection-item",f=eo.forwardRef((g,m)=>{const{scope:y,children:w,..._}=g,E=eo.useRef(null),S=xt(m,E),R=i(c,y);return eo.useEffect(()=>(R.itemMap.set(E,{ref:E,..._}),()=>void R.itemMap.delete(E))),V.jsx(Fr,{[u]:"",ref:S,children:w})});f.displayName=c;function p(g){const m=i(n+"CollectionConsumer",g);return eo.useCallback(()=>{const w=m.collectionRef.current;if(!w)return[];const _=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((R,D)=>_.indexOf(R.ref.current)-_.indexOf(D.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},p,r]}var S0="rovingFocusGroup.onEntryFocus",_U={bubbles:!1,cancelable:!0},Gy="RovingFocusGroup",[qE,Uk,EU]=rS(Gy),[wU,qy]=Zp(Gy,[EU]),[AU,bU]=wU(Gy),$k=A.forwardRef((n,e)=>V.jsx(qE.Provider,{scope:n.__scopeRovingFocusGroup,children:V.jsx(qE.Slot,{scope:n.__scopeRovingFocusGroup,children:V.jsx(SU,{...n,ref:e})})}));$k.displayName=Gy;var SU=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=n,p=A.useRef(null),g=xt(e,p),m=eS(i),[y=null,w]=FI({prop:o,defaultProp:a,onChange:l}),[_,E]=A.useState(!1),S=Yn(c),R=Uk(t),D=A.useRef(!1),[F,C]=A.useState(0);return A.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(S0,S),()=>T.removeEventListener(S0,S)},[S]),V.jsx(AU,{scope:t,orientation:r,dir:m,loop:s,currentTabStopId:y,onItemFocus:A.useCallback(T=>w(T),[w]),onItemShiftTab:A.useCallback(()=>E(!0),[]),onFocusableItemAdd:A.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:A.useCallback(()=>C(T=>T-1),[]),children:V.jsx(vt.div,{tabIndex:_||F===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...n.style},onMouseDown:ue(n.onMouseDown,()=>{D.current=!0}),onFocus:ue(n.onFocus,T=>{const k=!D.current;if(T.target===T.currentTarget&&k&&!_){const M=new CustomEvent(S0,_U);if(T.currentTarget.dispatchEvent(M),!M.defaultPrevented){const O=R().filter(Z=>Z.focusable),B=O.find(Z=>Z.active),N=O.find(Z=>Z.id===y),re=[B,N,...O].filter(Boolean).map(Z=>Z.ref.current);Wk(re,u)}}D.current=!1}),onBlur:ue(n.onBlur,()=>E(!1))})})}),zk="RovingFocusGroupItem",Hk=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,...o}=n,a=bm(),l=i||a,c=bU(zk,t),u=c.currentTabStopId===l,f=Uk(t),{onFocusableItemAdd:p,onFocusableItemRemove:g}=c;return A.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),V.jsx(qE.ItemSlot,{scope:t,id:l,focusable:r,active:s,children:V.jsx(vt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:ue(n.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:ue(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:ue(n.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const y=xU(m,c.orientation,c.dir);if(y!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let _=f().filter(E=>E.focusable).map(E=>E.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const E=_.indexOf(m.currentTarget);_=c.loop?RU(_,E+1):_.slice(E+1)}setTimeout(()=>Wk(_))}})})})});Hk.displayName=zk;var TU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function CU(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function xU(n,e,t){const r=CU(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return TU[r]}function Wk(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function RU(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Gk=$k,qk=Hk;const PU=["1","2","3","4","5","6","7","8","9"],IU=["auto","always","hover","none"],kU={...Ql,size:{type:"enum",className:"rt-r-size",values:PU,responsive:!0},...JI,...QI,...zb,...$b,underline:{type:"enum",className:"rt-underline",values:IU,default:"auto"},...YI,...Ub},Zs=A.forwardRef((n,e)=>{const{children:t,className:r,color:s,asChild:i,...o}=ha(n,kU);return A.createElement(Ma,{...o,"data-accent-color":s,ref:e,asChild:!0,className:In("rt-reset","rt-Link",r)},i?t:A.createElement("a",null,t))});Zs.displayName="Link";const LU=["horizontal","vertical"],MU=["1","2","3","4"],NU={orientation:{type:"enum",className:"rt-r-orientation",values:LU,default:"horizontal",responsive:!0},size:{type:"enum",className:"rt-r-size",values:MU,default:"1",responsive:!0},color:{...XI.color,default:"gray"},decorative:{type:"boolean",default:!0}},sS=A.forwardRef((n,e)=>{const{className:t,color:r,decorative:s,...i}=ha(n,NU,mh);return A.createElement("span",{"data-accent-color":r,role:s?void 0:"separator",...i,ref:e,className:In("rt-Separator",t)})});sS.displayName="Separator";const DU={...Ql,...zb,...$b},Kk=A.forwardRef((n,e)=>{const{asChild:t,className:r,...s}=ha(n,DU);return A.createElement(t?Fr:"strong",{...s,ref:e,className:In("rt-Strong",r)})});Kk.displayName="Strong";const OU="/assets/PortFolio-CXYOnYlH.png",FU="/assets/PortFolio%20-%20cartoon-C4WEmp8n.png";function T1(){const[n,e]=A.useState(50),t=i=>{const o=i.currentTarget.offsetWidth,a=i.clientX-i.currentTarget.getBoundingClientRect().left,l=Math.min(Math.max(a/o*100,0),100);e(100-l)},r=()=>{e(50)},s=n>50?150-n:100;return V.jsxs(Ni,{direction:"column",gap:"2",children:[V.jsxs("div",{className:"imageContainer",onMouseMove:t,onMouseLeave:r,children:[V.jsx("img",{src:OU,alt:"Main Image",className:"imageContainer-main",style:{clipPath:`polygon(0 0, ${n}% 0, ${n}% 100%, 0 100%)`,opacity:`${n+80}%`,borderRadius:"15px"}}),V.jsx("img",{src:FU,alt:"Cartoon Image",className:"imageContainer-cartoon",style:{opacity:`${s}%`,borderRadius:"15px"}})]}),V.jsx("br",{}),V.jsx("br",{}),V.jsxs(Fk,{size:"5",children:["Hi, I’m ",V.jsx(Kk,{children:"Adarsh Gella!"}),V.jsx("br",{}),"I’m a student at ",V.jsx(Zs,{href:"https://www.utdallas.edu/fact-sheets/ecs/ms-computer-science/",underline:"hover",target:"blank",children:"UTD"}),", currently pursuing a master’s in Computer Science. ",V.jsx("br",{}),"I’m really passionate about front-end development, especially when it comes to ",V.jsx("br",{}),"creating intuitive and engaging user interfaces. Right now, I’m working on some new ",V.jsx("br",{}),V.jsx(Zs,{href:"https://github.com/gadarsh043?tab=repositories",underline:"hover",target:"blank",children:"UI projects"})," and also developing content for my ",V.jsx(Zs,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),".",V.jsx("br",{}),V.jsx("br",{}),"I love exploring new tech, coding, and user experience. When I’m not coding, ",V.jsx("br",{}),"you’ll probably catch me watching a ton of movies or series, capturing moments for ",V.jsx("br",{}),"my YouTube channel,or just dancing around with my friends.",V.jsx("br",{}),V.jsx("br",{}),"I enjoy sharing insights about coding practices, discussing new ideas, recommending my ",V.jsx("br",{}),V.jsx(Zs,{href:"https://www.imdb.com/user/ur129777024/lists/",underline:"hover",target:"blank",children:"latest movie finds"}),", or talking about my ",V.jsx(Zs,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),". I’m all in! Hit me up on ",V.jsx(Zs,{href:"https://www.linkedin.com/in/g-adarsh-sonu/",underline:"hover",target:"blank",children:"LinkedIn"}),", ",V.jsx(Zs,{href:"mailto:g.adarsh043@gmail.com",target:"blank",underline:"hover",children:"Gmail"}),", or ",V.jsx("br",{}),V.jsx(Zs,{href:"https://www.instagram.com/g_adarsh_sonu/",underline:"hover",target:"blank",children:"Instagram"}),"—let’s connect and chat about what we’re into!"]}),V.jsx("br",{}),V.jsx("br",{})]})}const VU="modulepreload",BU=function(n){return"/"+n},C1={},Xg=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=BU(l),l in C1)return;C1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":VU,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var Ld={};Ld.d=(n,e)=>{for(var t in e)Ld.o(e,t)&&!Ld.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Ld.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var de=globalThis.pdfjsLib={};Ld.d(de,{AbortException:()=>Zl,AnnotationEditorLayer:()=>rA,AnnotationEditorParamsType:()=>pe,AnnotationEditorType:()=>Te,AnnotationEditorUIManager:()=>zl,AnnotationLayer:()=>F3,AnnotationMode:()=>co,CMapCompressionType:()=>XE,ColorPicker:()=>Bv,DOMSVGFactory:()=>aS,DrawLayer:()=>aA,FeatureTest:()=>zn,GlobalWorkerOptions:()=>Di,ImageKind:()=>Tm,InvalidPDFException:()=>Yk,MissingPDFException:()=>Jl,OPS:()=>$r,Outliner:()=>Vw,PDFDataRangeTransport:()=>WL,PDFDateString:()=>rL,PDFWorker:()=>Gc,PasswordResponses:()=>zU,PermissionFlag:()=>$U,PixelsPerInch:()=>ea,RenderingCancelledException:()=>lS,TextLayer:()=>Fv,UnexpectedResponseException:()=>Qy,Util:()=>ie,VerbosityLevel:()=>Ky,XfaLayer:()=>qL,build:()=>v3,createValidAbsoluteUrl:()=>qU,fetchData:()=>n_,getDocument:()=>l3,getFilenameFromUrl:()=>r$,getPdfFilenameFromUrl:()=>s$,getXfaPageViewport:()=>i$,isDataScheme:()=>cS,isPdfFile:()=>uS,noContextMenu:()=>Kn,normalizeUnicode:()=>ZU,renderTextLayer:()=>Z$,setLayerDimensions:()=>$l,shadow:()=>ke,updateTextLayer:()=>e3,version:()=>m3});const wn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Xk=[1,0,0,1,0,0],KE=[.001,0,0,.001,0,0],jU=1e7,T0=1.35,xr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},co={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},UU="pdfjs_internal_editor_",Te={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},pe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},$U={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},fn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Tm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Rt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Xh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ky={ERRORS:0,WARNINGS:1,INFOS:5},XE={NONE:0,BINARY:1},$r={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},zU={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Xy=Ky.WARNINGS;function HU(n){Number.isInteger(n)&&(Xy=n)}function WU(){return Xy}function Yy(n){Xy>=Ky.INFOS&&console.log(`Info: ${n}`)}function ye(n){Xy>=Ky.WARNINGS&&console.log(`Warning: ${n}`)}function ze(n){throw new Error(n)}function Dt(n,e){n||ze(e)}function GU(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qU(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=JU(n)}catch{}}const r=e?new URL(n,e):new URL(n);if(GU(r))return r}catch{}return null}function ke(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const da=function(){function e(t,r){this.constructor===e&&ze("Cannot initialize BaseException."),this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class YE extends da{constructor(e,t){super(e,"PasswordException"),this.code=t}}class QE extends da{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Yk extends da{constructor(e){super(e,"InvalidPDFException")}}class Jl extends da{constructor(e){super(e,"MissingPDFException")}}class Qy extends da{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class KU extends da{constructor(e){super(e,"FormatError")}}class Zl extends da{constructor(e){super(e,"AbortException")}}function Qk(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ze("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),o=n.subarray(s,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function Jy(n){typeof n!="string"&&ze("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function XU(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function iS(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function YU(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function QU(){try{return new Function(""),!0}catch{return!1}}class zn{static get isLittleEndian(){return ke(this,"isLittleEndian",YU())}static get isEvalSupported(){return ke(this,"isEvalSupported",QU())}static get isOffscreenCanvasSupported(){return ke(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ke(this,"platform",{isMac:navigator.platform.includes("Mac")}):ke(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return ke(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const C0=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Fi,Cm,JE;class ie{static makeHexColor(e,t,r){return`#${C0[e]}${C0[t]}${C0[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[r,s]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[s,i]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],s[0],i[0],o[0]),Math.min(r[1],s[1],i[1],o[1]),Math.max(r[0],s[0],i[0],o[0]),Math.max(r[1],s[1],i[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(r+o)/2,l=Math.sqrt((r+o)**2-4*(r*o-i*s))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,s,o]}static bezierBoundingBox(e,t,r,s,i,o,a,l,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],P(this,Fi,JE).call(this,e,r,i,a,t,s,o,l,3*(-e+3*(r-i)+a),6*(e-2*r+i),3*(r-e),c),P(this,Fi,JE).call(this,e,r,i,a,t,s,o,l,3*(-t+3*(s-o)+l),6*(t-2*s+o),3*(s-t),c),c}}Fi=new WeakSet,Cm=function(e,t,r,s,i,o,a,l,c,u){if(c<=0||c>=1)return;const f=1-c,p=c*c,g=p*c,m=f*(f*(f*e+3*c*t)+3*p*r)+g*s,y=f*(f*(f*i+3*c*o)+3*p*a)+g*l;u[0]=Math.min(u[0],m),u[1]=Math.min(u[1],y),u[2]=Math.max(u[2],m),u[3]=Math.max(u[3],y)},JE=function(e,t,r,s,i,o,a,l,c,u,f,p){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&P(this,Fi,Cm).call(this,e,t,r,s,i,o,a,l,-f/u,p);return}const g=u**2-4*f*c;if(g<0)return;const m=Math.sqrt(g),y=2*c;P(this,Fi,Cm).call(this,e,t,r,s,i,o,a,l,(-u+m)/y,p),P(this,Fi,Cm).call(this,e,t,r,s,i,o,a,l,(-u-m)/y,p)},I(ie,Fi);function JU(n){return decodeURIComponent(escape(n))}let x0=null,x1=null;function ZU(n){return x0||(x0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,x1=new Map([["ﬅ","ſt"]])),n.replaceAll(x0,(e,t,r)=>t?t.normalize("NFKC"):x1.get(r))}function e$(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return Qk(n)}const Jk="pdfjs_internal_id_",Qs={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Zy{constructor(){this.constructor===Zy&&ze("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var mf;const WS=class WS{constructor({enableHWA:e=!1}={}){I(this,mf,!1);this.constructor===WS&&ze("Cannot initialize BaseCanvasFactory."),x(this,mf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!h(this,mf)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ze("Abstract method `_createCanvas` called.")}};mf=new WeakMap;let Mv=WS;class e_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===e_&&ze("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),r=this.isCompressed?XE.BINARY:XE.NONE;return this._fetchData(t,r).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){ze("Abstract method `_fetchData` called.")}}class t_{constructor({baseUrl:e=null}){this.constructor===t_&&ze("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){ze("Abstract method `_fetchData` called.")}}class oS{constructor(){this.constructor===oS&&ze("Cannot initialize BaseSVGFactory.")}create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ze("Abstract method `_createSVG` called.")}}const ei="http://www.w3.org/2000/svg",Ra=class Ra{};me(Ra,"CSS",96),me(Ra,"PDF",72),me(Ra,"PDF_TO_CSS_UNITS",Ra.CSS/Ra.PDF);let ea=Ra;var Da,ps,ai,Fn,ey,Oa,ne,pn,gc,mc,xm,Zk,ZE,vc,rd,sd,ew,id;class t$ extends Zy{constructor({docId:t,ownerDocument:r=globalThis.document}={}){super();I(this,ne);I(this,Da);I(this,ps);I(this,ai);I(this,Fn);I(this,ey);I(this,Oa,0);x(this,ai,t),x(this,Fn,r)}addFilter(t){if(!t)return"none";let r=h(this,ne,pn).get(t);if(r)return r;const[s,i,o]=P(this,ne,xm).call(this,t),a=t.length===1?s:`${s}${i}${o}`;if(r=h(this,ne,pn).get(a),r)return h(this,ne,pn).set(t,r),r;const l=`g_${h(this,ai)}_transfer_map_${er(this,Oa)._++}`,c=`url(#${l})`;h(this,ne,pn).set(t,c),h(this,ne,pn).set(a,c);const u=P(this,ne,vc).call(this,l);return P(this,ne,sd).call(this,s,i,o,u),c}addHCMFilter(t,r){var m;const s=`${t}-${r}`,i="base";let o=h(this,ne,gc).get(i);if((o==null?void 0:o.key)===s||(o?((m=o.filter)==null||m.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},h(this,ne,gc).set(i,o)),!t||!r))return o.url;const a=P(this,ne,id).call(this,t);t=ie.makeHexColor(...a);const l=P(this,ne,id).call(this,r);if(r=ie.makeHexColor(...l),h(this,ne,mc).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const c=new Array(256);for(let y=0;y<=255;y++){const w=y/255;c[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const u=c.join(","),f=`g_${h(this,ai)}_hcm_filter`,p=o.filter=P(this,ne,vc).call(this,f);P(this,ne,sd).call(this,u,u,u,p),P(this,ne,ZE).call(this,p);const g=(y,w)=>{const _=a[y]/255,E=l[y]/255,S=new Array(w+1);for(let R=0;R<=w;R++)S[R]=_+R/w*(E-_);return S.join(",")};return P(this,ne,sd).call(this,g(0,5),g(1,5),g(2,5),p),o.url=`url(#${f})`,o.url}addAlphaFilter(t){let r=h(this,ne,pn).get(t);if(r)return r;const[s]=P(this,ne,xm).call(this,[t]),i=`alpha_${s}`;if(r=h(this,ne,pn).get(i),r)return h(this,ne,pn).set(t,r),r;const o=`g_${h(this,ai)}_alpha_map_${er(this,Oa)._++}`,a=`url(#${o})`;h(this,ne,pn).set(t,a),h(this,ne,pn).set(i,a);const l=P(this,ne,vc).call(this,o);return P(this,ne,ew).call(this,s,l),a}addLuminosityFilter(t){let r=h(this,ne,pn).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=P(this,ne,xm).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=h(this,ne,pn).get(i),r)return h(this,ne,pn).set(t,r),r;const o=`g_${h(this,ai)}_luminosity_map_${er(this,Oa)._++}`,a=`url(#${o})`;h(this,ne,pn).set(t,a),h(this,ne,pn).set(i,a);const l=P(this,ne,vc).call(this,o);return P(this,ne,Zk).call(this,l),t&&P(this,ne,ew).call(this,s,l),a}addHighlightHCMFilter(t,r,s,i,o){var E;const a=`${r}-${s}-${i}-${o}`;let l=h(this,ne,gc).get(t);if((l==null?void 0:l.key)===a||(l?((E=l.filter)==null||E.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},h(this,ne,gc).set(t,l)),!r||!s))return l.url;const[c,u]=[r,s].map(P(this,ne,id).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,m]=[i,o].map(P(this,ne,id).bind(this));p<f&&([f,p,g,m]=[p,f,m,g]),h(this,ne,mc).style.color="";const y=(S,R,D)=>{const F=new Array(256),C=(p-f)/D,T=S/255,k=(R-S)/(255*D);let M=0;for(let O=0;O<=D;O++){const B=Math.round(f+O*C),N=T+O*k;for(let q=M;q<=B;q++)F[q]=N;M=B+1}for(let O=M;O<256;O++)F[O]=F[M-1];return F.join(",")},w=`g_${h(this,ai)}_hcm_${t}_filter`,_=l.filter=P(this,ne,vc).call(this,w);return P(this,ne,ZE).call(this,_),P(this,ne,sd).call(this,y(g[0],m[0],5),y(g[1],m[1],5),y(g[2],m[2],5),_),l.url=`url(#${w})`,l.url}destroy(t=!1){t&&h(this,ne,gc).size!==0||(h(this,ps)&&(h(this,ps).parentNode.parentNode.remove(),x(this,ps,null)),h(this,Da)&&(h(this,Da).clear(),x(this,Da,null)),x(this,Oa,0))}}Da=new WeakMap,ps=new WeakMap,ai=new WeakMap,Fn=new WeakMap,ey=new WeakMap,Oa=new WeakMap,ne=new WeakSet,pn=function(){return h(this,Da)||x(this,Da,new Map)},gc=function(){return h(this,ey)||x(this,ey,new Map)},mc=function(){if(!h(this,ps)){const t=h(this,Fn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=h(this,Fn).createElementNS(ei,"svg");s.setAttribute("width",0),s.setAttribute("height",0),x(this,ps,h(this,Fn).createElementNS(ei,"defs")),t.append(s),s.append(h(this,ps)),h(this,Fn).body.append(t)}return h(this,ps)},xm=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=c[p]/255;const f=u.join(",");return[f,f,f]}const[r,s,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=r[c]/255,a[c]=s[c]/255,l[c]=i[c]/255;return[o.join(","),a.join(","),l.join(",")]},Zk=function(t){const r=h(this,Fn).createElementNS(ei,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},ZE=function(t){const r=h(this,Fn).createElementNS(ei,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},vc=function(t){const r=h(this,Fn).createElementNS(ei,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),h(this,ne,mc).append(r),r},rd=function(t,r,s){const i=h(this,Fn).createElementNS(ei,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},sd=function(t,r,s,i){const o=h(this,Fn).createElementNS(ei,"feComponentTransfer");i.append(o),P(this,ne,rd).call(this,o,"feFuncR",t),P(this,ne,rd).call(this,o,"feFuncG",r),P(this,ne,rd).call(this,o,"feFuncB",s)},ew=function(t,r){const s=h(this,Fn).createElementNS(ei,"feComponentTransfer");r.append(s),P(this,ne,rd).call(this,s,"feFuncA",t)},id=function(t){return h(this,ne,mc).style.color=t,hS(getComputedStyle(h(this,ne,mc)).getPropertyValue("color"))};class n$ extends Mv{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}async function n_(n,e="text"){if(od(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class eL extends e_{_fetchData(e,t){return n_(e,this.isCompressed?"arraybuffer":"text").then(r=>({cMapData:r instanceof ArrayBuffer?new Uint8Array(r):Jy(r),compressionType:t}))}}class tL extends t_{_fetchData(e){return n_(e,"arraybuffer").then(t=>new Uint8Array(t))}}class aS extends oS{_createSVG(e){return document.createElementNS(ei,e)}}class tg{constructor({viewBox:e,scale:t,rotation:r,offsetX:s=0,offsetY:i=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=s,this.offsetY=i;const a=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,u,f,p;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,u=0,f=0,p=1;break;case 90:c=0,u=1,f=1,p=0;break;case 270:c=0,u=-1,f=-1,p=0;break;case 0:c=1,u=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let g,m,y,w;c===0?(g=Math.abs(l-e[1])*t+s,m=Math.abs(a-e[0])*t+i,y=(e[3]-e[1])*t,w=(e[2]-e[0])*t):(g=Math.abs(a-e[0])*t+s,m=Math.abs(l-e[1])*t+i,y=(e[2]-e[0])*t,w=(e[3]-e[1])*t),this.transform=[c*t,u*t,f*t,p*t,g-c*t*a-f*t*l,m-u*t*a-p*t*l],this.width=y,this.height=w}get rawDims(){const{viewBox:e}=this;return ke(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new tg({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return ie.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ie.applyTransform([e[0],e[1]],this.transform),r=ie.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return ie.applyInverseTransform([e,t],this.transform)}}class lS extends da{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function cS(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function uS(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function r$(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function s$(n,e="document.pdf"){if(typeof n!="string")return e;if(cS(n))return ye('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let i=r.exec(s[1])||r.exec(s[2])||r.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=r.exec(decodeURIComponent(i))[0]}catch{}return i||e}class R1{constructor(){me(this,"started",Object.create(null));me(this,"times",[])}time(e){e in this.started&&ye(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ye(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function od(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Kn(n){n.preventDefault()}function nL(n){console.log("Deprecated API usage: "+n)}let P1;class rL{static toDateObject(e){if(!e||typeof e!="string")return null;P1||(P1=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=P1.exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=u,a+=f):c==="+"&&(o-=u,a-=f),new Date(Date.UTC(r,s,i,o,a,l))}}function i$(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new tg({viewBox:i,scale:e,rotation:t})}function hS(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ye(`Not a valid color format: "${n}"`),[0,0,0])}function o$(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,hS(r))}e.remove()}function it(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform();return[e,t,r,s,i,o]}function Js(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform().invertSelf();return[e,t,r,s,i,o]}function $l(n,e,t=!1,r=!0){if(e instanceof tg){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:o}=n,a=zn.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${i}px`,u=a?`round(${l}, 1px)`:`calc(${l})`,f=a?`round(${c}, 1px)`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}r&&n.setAttribute("data-main-rotation",e.rotation)}var Fa,Va,rr,Ba,ty,sL,Ln,iL,oL,Rm,aL,nw;const ny=class ny{constructor(e){I(this,Ln);I(this,Fa,null);I(this,Va,null);I(this,rr);I(this,Ba,null);x(this,rr,e)}render(){const e=x(this,Fa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=h(this,rr)._uiManager._signal;e.addEventListener("contextmenu",Kn,{signal:t}),e.addEventListener("pointerdown",P(ny,ty,sL),{signal:t});const r=x(this,Ba,document.createElement("div"));r.className="buttons",e.append(r);const s=h(this,rr).toolbarPosition;if(s){const{style:i}=e,o=h(this,rr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return P(this,Ln,aL).call(this),e}hide(){var e;h(this,Fa).classList.add("hidden"),(e=h(this,Va))==null||e.hideDropdown()}show(){h(this,Fa).classList.remove("hidden")}addAltTextButton(e){P(this,Ln,Rm).call(this,e),h(this,Ba).prepend(e,h(this,Ln,nw))}addColorPicker(e){x(this,Va,e);const t=e.renderButton();P(this,Ln,Rm).call(this,t),h(this,Ba).prepend(t,h(this,Ln,nw))}remove(){var e;h(this,Fa).remove(),(e=h(this,Va))==null||e.destroy(),x(this,Va,null)}};Fa=new WeakMap,Va=new WeakMap,rr=new WeakMap,Ba=new WeakMap,ty=new WeakSet,sL=function(e){e.stopPropagation()},Ln=new WeakSet,iL=function(e){h(this,rr)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},oL=function(e){h(this,rr)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Rm=function(e){const t=h(this,rr)._uiManager._signal;e.addEventListener("focusin",P(this,Ln,iL).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",P(this,Ln,oL).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Kn,{signal:t})},aL=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${h(this,rr).editorType}-button`),P(this,Ln,Rm).call(this,e),e.addEventListener("click",t=>{h(this,rr)._uiManager.delete()},{signal:h(this,rr)._uiManager._signal}),h(this,Ba).append(e)},nw=function(){const e=document.createElement("div");return e.className="divider",e},I(ny,ty);let tw=ny;var vf,ja,Ua,oa,lL,cL,uL;class a${constructor(e){I(this,oa);I(this,vf,null);I(this,ja,null);I(this,Ua);x(this,Ua,e)}show(e,t,r){const[s,i]=P(this,oa,cL).call(this,t,r),{style:o}=h(this,ja)||x(this,ja,P(this,oa,lL).call(this));e.append(h(this,ja)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,ja).remove()}}vf=new WeakMap,ja=new WeakMap,Ua=new WeakMap,oa=new WeakSet,lL=function(){const e=x(this,ja,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Kn,{signal:h(this,Ua)._signal});const t=x(this,vf,document.createElement("div"));return t.className="buttons",e.append(t),P(this,oa,uL).call(this),e},cL=function(e,t){let r=0,s=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const a=i.x+(t?i.width:0);if(o>r){s=a,r=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,r]},uL=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=h(this,Ua)._signal;e.addEventListener("contextmenu",Kn,{signal:r}),e.addEventListener("click",()=>{h(this,Ua).highlightSelection("floating_button")},{signal:r}),h(this,vf).append(e)};function Nv(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function l$(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var ry;class c${constructor(){I(this,ry,0)}get id(){return`${UU}${er(this,ry)._++}`}}ry=new WeakMap;var yf,sy,br,_f,sw;const GS=class GS{constructor(){I(this,_f);I(this,yf,e$());I(this,sy,0);I(this,br,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ke(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return P(this,_f,sw).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return P(this,_f,sw).call(this,e,e)}async getFromId(e){h(this,br)||x(this,br,new Map);const t=h(this,br).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=h(this,br).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){h(this,br)||x(this,br,new Map);const t=h(this,br).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${h(this,yf)}_`)}};yf=new WeakMap,sy=new WeakMap,br=new WeakMap,_f=new WeakSet,sw=async function(e,t){h(this,br)||x(this,br,new Map);let r=h(this,br).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${h(this,yf)}_${er(this,sy)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await n_(t,"blob")):s=r.file=t,s.type==="image/svg+xml"){const i=GS._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=async()=>{const f=r.svgUrl=o.result;a.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(s),await l}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){console.error(s),r=null}return h(this,br).set(e,r),r&&h(this,br).set(r.id,r),r};let rw=GS;var $t,uo,Ef,zt;class u${constructor(e=128){I(this,$t,[]);I(this,uo,!1);I(this,Ef);I(this,zt,-1);x(this,Ef,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),h(this,uo))return;const l={cmd:e,undo:t,post:r,type:i};if(h(this,zt)===-1){h(this,$t).length>0&&(h(this,$t).length=0),x(this,zt,0),h(this,$t).push(l);return}if(o&&h(this,$t)[h(this,zt)].type===i){a&&(l.undo=h(this,$t)[h(this,zt)].undo),h(this,$t)[h(this,zt)]=l;return}const c=h(this,zt)+1;c===h(this,Ef)?h(this,$t).splice(0,1):(x(this,zt,c),c<h(this,$t).length&&h(this,$t).splice(c)),h(this,$t).push(l)}undo(){if(h(this,zt)===-1)return;x(this,uo,!0);const{undo:e,post:t}=h(this,$t)[h(this,zt)];e(),t==null||t(),x(this,uo,!1),x(this,zt,h(this,zt)-1)}redo(){if(h(this,zt)<h(this,$t).length-1){x(this,zt,h(this,zt)+1),x(this,uo,!0);const{cmd:e,post:t}=h(this,$t)[h(this,zt)];e(),t==null||t(),x(this,uo,!1)}}hasSomethingToUndo(){return h(this,zt)!==-1}hasSomethingToRedo(){return h(this,zt)<h(this,$t).length-1}destroy(){x(this,$t,null)}}$t=new WeakMap,uo=new WeakMap,Ef=new WeakMap,zt=new WeakMap;var iy,hL;class ng{constructor(e){I(this,iy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=zn.platform;for(const[r,s,i={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(P(this,iy,hL).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(s.bind(e,...o,t)(),i||(t.stopPropagation(),t.preventDefault()))}}iy=new WeakSet,hL=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const oy=class oy{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return o$(e),ke(this,"_colors",e)}convert(e){const t=hS(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,o)=>i===t[o]))return oy._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ie.makeHexColor(...t):e}};me(oy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let iw=oy;var Zc,sr,Pt,Xt,eu,li,tu,zr,nu,$a,gs,Hr,za,wf,Af,ms,ru,ho,vs,ay,fo,bf,Ha,Sf,su,Yt,Fe,ci,Wa,Tf,Cf,xf,Rf,Pf,If,kf,Lf,Mf,Nf,Df,Of,Ff,po,ys,ui,Vf,Q,Pm,dL,fL,Im,pL,gL,mL,ow,vL,aw,lw,yL,Sn,no,_L,EL,cw,wL,ad,uw;const Fc=class Fc{constructor(e,t,r,s,i,o,a,l,c){I(this,Q);I(this,Zc,new AbortController);I(this,sr,null);I(this,Pt,new Map);I(this,Xt,new Map);I(this,eu,null);I(this,li,null);I(this,tu,null);I(this,zr,new u$);I(this,nu,0);I(this,$a,new Set);I(this,gs,null);I(this,Hr,null);I(this,za,new Set);I(this,wf,!1);I(this,Af,null);I(this,ms,null);I(this,ru,null);I(this,ho,!1);I(this,vs,null);I(this,ay,new c$);I(this,fo,!1);I(this,bf,!1);I(this,Ha,null);I(this,Sf,null);I(this,su,null);I(this,Yt,Te.NONE);I(this,Fe,new Set);I(this,ci,null);I(this,Wa,null);I(this,Tf,null);I(this,Cf,this.blur.bind(this));I(this,xf,this.focus.bind(this));I(this,Rf,this.copy.bind(this));I(this,Pf,this.cut.bind(this));I(this,If,this.paste.bind(this));I(this,kf,this.keydown.bind(this));I(this,Lf,this.keyup.bind(this));I(this,Mf,this.onEditingAction.bind(this));I(this,Nf,this.onPageChanging.bind(this));I(this,Df,this.onScaleChanging.bind(this));I(this,Of,this.onRotationChanging.bind(this));I(this,Ff,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});I(this,po,[0,0]);I(this,ys,null);I(this,ui,null);I(this,Vf,null);this._signal=h(this,Zc).signal,x(this,ui,e),x(this,Vf,t),x(this,eu,r),this._eventBus=s,this._eventBus._on("editingaction",h(this,Mf)),this._eventBus._on("pagechanging",h(this,Nf)),this._eventBus._on("scalechanging",h(this,Df)),this._eventBus._on("rotationchanging",h(this,Of)),P(this,Q,pL).call(this),P(this,Q,yL).call(this),P(this,Q,ow).call(this),x(this,li,i.annotationStorage),x(this,Af,i.filterFactory),x(this,Wa,o),x(this,ru,a||null),x(this,wf,l),x(this,su,c||null),this.viewParameters={realScale:ea.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Fc.prototype,t=o=>h(o,ui).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return ke(this,"_keyboardManager",new ng([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,ui).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,ui).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r;(e=h(this,Zc))==null||e.abort(),x(this,Zc,null),this._signal=null,this._eventBus._off("editingaction",h(this,Mf)),this._eventBus._off("pagechanging",h(this,Nf)),this._eventBus._off("scalechanging",h(this,Df)),this._eventBus._off("rotationchanging",h(this,Of));for(const s of h(this,Xt).values())s.destroy();h(this,Xt).clear(),h(this,Pt).clear(),h(this,za).clear(),x(this,sr,null),h(this,Fe).clear(),h(this,zr).destroy(),(t=h(this,eu))==null||t.destroy(),(r=h(this,vs))==null||r.hide(),x(this,vs,null),h(this,ms)&&(clearTimeout(h(this,ms)),x(this,ms,null)),h(this,ys)&&(clearTimeout(h(this,ys)),x(this,ys,null))}async mlGuess(e){var t;return((t=h(this,su))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!h(this,su)}get hcmFilter(){return ke(this,"hcmFilter",h(this,Wa)?h(this,Af).addHCMFilter(h(this,Wa).foreground,h(this,Wa).background):"none")}get direction(){return ke(this,"direction",getComputedStyle(h(this,ui)).direction)}get highlightColors(){return ke(this,"highlightColors",h(this,ru)?new Map(h(this,ru).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ke(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){x(this,Sf,e)}editAltText(e){var t;(t=h(this,eu))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){x(this,nu,e-1)}focusMainContainer(){h(this,ui).focus()}findParent(e,t){for(const r of h(this,Xt).values()){const{x:s,y:i,width:o,height:a}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=i&&t<=i+a)return r}return null}disableUserSelect(e=!1){h(this,Vf).classList.toggle("noUserSelect",e)}addShouldRescale(e){h(this,za).add(e)}removeShouldRescale(e){h(this,za).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ea.PDF_TO_CSS_UNITS;for(const t of h(this,za))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o}=t,a=t.toString(),c=P(this,Q,Pm).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(u){t.empty(),h(this,Yt)===Te.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Te.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const f of h(this,Xt).values())if(f.hasTextLayer(c)){f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o,text:a});break}}}addToAnnotationStorage(e){!e.isEmpty()&&h(this,li)&&!h(this,li).has(e.id)&&h(this,li).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,h(this,ho)&&(x(this,ho,!1),P(this,Q,Im).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of h(this,Fe))if(t.div.contains(e)){x(this,Ha,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!h(this,Ha))return;const[e,t]=h(this,Ha);x(this,Ha,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){P(this,Q,ow).call(this),P(this,Q,aw).call(this)}removeEditListeners(){P(this,Q,vL).call(this),P(this,Q,lw).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of h(this,Hr))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of h(this,Hr))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=h(this,sr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of h(this,Fe)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of h(this,Hr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){ye(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const l of r){const c=s.deserialize(l);if(!c)return;i.push(c)}const o=()=>{for(const l of i)P(this,Q,cw).call(this,l);P(this,Q,uw).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){ye(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,Yt)!==Te.NONE&&!this.isEditorHandlingKeyboard&&Fc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,ho)&&(x(this,ho,!1),P(this,Q,Im).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(P(this,Q,gL).call(this),P(this,Q,aw).call(this),P(this,Q,Sn).call(this,{isEditing:h(this,Yt)!==Te.NONE,isEmpty:P(this,Q,ad).call(this),hasSomethingToUndo:h(this,zr).hasSomethingToUndo(),hasSomethingToRedo:h(this,zr).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,Q,mL).call(this),P(this,Q,lw).call(this),P(this,Q,Sn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!h(this,Hr)){x(this,Hr,e);for(const t of h(this,Hr))P(this,Q,no).call(this,t.defaultPropertiesToUpdate)}}getId(){return h(this,ay).id}get currentLayer(){return h(this,Xt).get(h(this,nu))}getLayer(e){return h(this,Xt).get(e)}get currentPageIndex(){return h(this,nu)}addLayer(e){h(this,Xt).set(e.pageIndex,e),h(this,fo)?e.enable():e.disable()}removeLayer(e){h(this,Xt).delete(e.pageIndex)}updateMode(e,t=null,r=!1){if(h(this,Yt)!==e){if(x(this,Yt,e),e===Te.NONE){this.setEditingState(!1),P(this,Q,EL).call(this);return}this.setEditingState(!0),P(this,Q,_L).call(this),this.unselectAll();for(const s of h(this,Xt).values())s.updateMode(e);if(!t&&r){this.addNewEditorFromKeyboard();return}if(t){for(const s of h(this,Pt).values())if(s.annotationElementId===t){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==h(this,Yt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var r;if(h(this,Hr)){switch(e){case pe.CREATE:this.currentLayer.addNewEditor();return;case pe.HIGHLIGHT_DEFAULT_COLOR:(r=h(this,Sf))==null||r.updateColor(t);break;case pe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,Tf)||x(this,Tf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of h(this,Fe))s.updateParams(e,t);for(const s of h(this,Hr))s.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const o of h(this,Pt).values())o.editorType===e&&o.show(t);(((i=h(this,Tf))==null?void 0:i.get(pe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&P(this,Q,no).call(this,[[pe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(h(this,bf)!==e){x(this,bf,e);for(const t of h(this,Xt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of h(this,Pt).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return h(this,Pt).get(e)}addEditor(e){h(this,Pt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(h(this,ms)&&clearTimeout(h(this,ms)),x(this,ms,setTimeout(()=>{this.focusMainContainer(),x(this,ms,null)},0))),h(this,Pt).delete(e.id),this.unselect(e),(!e.annotationElementId||!h(this,$a).has(e.annotationElementId))&&((t=h(this,li))==null||t.remove(e.id))}addDeletedAnnotationElement(e){h(this,$a).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return h(this,$a).has(e)}removeDeletedAnnotationElement(e){h(this,$a).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){h(this,sr)!==e&&(x(this,sr,e),e&&P(this,Q,no).call(this,e.propertiesToUpdate))}updateUI(e){h(this,Q,wL)===e&&P(this,Q,no).call(this,e.propertiesToUpdate)}toggleSelected(e){if(h(this,Fe).has(e)){h(this,Fe).delete(e),e.unselect(),P(this,Q,Sn).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,Fe).add(e),e.select(),P(this,Q,no).call(this,e.propertiesToUpdate),P(this,Q,Sn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of h(this,Fe))t!==e&&t.unselect();h(this,Fe).clear(),h(this,Fe).add(e),e.select(),P(this,Q,no).call(this,e.propertiesToUpdate),P(this,Q,Sn).call(this,{hasSelectedEditor:!0})}isSelected(e){return h(this,Fe).has(e)}get firstSelectedEditor(){return h(this,Fe).values().next().value}unselect(e){e.unselect(),h(this,Fe).delete(e),P(this,Q,Sn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,Fe).size!==0}get isEnterHandled(){return h(this,Fe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){h(this,zr).undo(),P(this,Q,Sn).call(this,{hasSomethingToUndo:h(this,zr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,Q,ad).call(this)})}redo(){h(this,zr).redo(),P(this,Q,Sn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,zr).hasSomethingToRedo(),isEmpty:P(this,Q,ad).call(this)})}addCommands(e){h(this,zr).add(e),P(this,Q,Sn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,Q,ad).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...h(this,Fe)],t=()=>{for(const s of e)s.remove()},r=()=>{for(const s of e)P(this,Q,cw).call(this,s)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=h(this,sr))==null||e.commitOrRemove()}hasSomethingToControl(){return h(this,sr)||this.hasSelection}selectAll(){for(const e of h(this,Fe))e.commit();P(this,Q,uw).call(this,h(this,Pt).values())}unselectAll(){if(!(h(this,sr)&&(h(this,sr).commitOrRemove(),h(this,Yt)!==Te.NONE))&&this.hasSelection){for(const e of h(this,Fe))e.unselect();h(this,Fe).clear(),P(this,Q,Sn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;h(this,po)[0]+=e,h(this,po)[1]+=t;const[s,i]=h(this,po),o=[...h(this,Fe)],a=1e3;h(this,ys)&&clearTimeout(h(this,ys)),x(this,ys,setTimeout(()=>{x(this,ys,null),h(this,po)[0]=h(this,po)[1]=0,this.addCommands({cmd:()=>{for(const l of o)h(this,Pt).has(l.id)&&l.translateInPage(s,i)},undo:()=>{for(const l of o)h(this,Pt).has(l.id)&&l.translateInPage(-s,-i)},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,gs,new Map);for(const e of h(this,Fe))h(this,gs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,gs))return!1;this.disableUserSelect(!1);const e=h(this,gs);x(this,gs,null);let t=!1;for(const[{x:s,y:i,pageIndex:o},a]of e)a.newX=s,a.newY=i,a.newPageIndex=o,t||(t=s!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(s,i,o,a)=>{if(h(this,Pt).has(s.id)){const l=h(this,Xt).get(a);l?s._setParentAndPosition(l,i,o):(s.pageIndex=a,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:a}]of e)r(s,i,o,a)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:a}]of e)r(s,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(h(this,gs))for(const r of h(this,gs).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||h(this,Fe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return h(this,sr)===e}getActive(){return h(this,sr)}getMode(){return h(this,Yt)}get imageManager(){return ke(this,"imageManager",new rw)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,f,p)=>({x:(u-s)/o,y:1-(c+f-r)/i,width:p/o,height:f/i});break;case"180":a=(c,u,f,p)=>({x:1-(c+f-r)/i,y:1-(u+p-s)/o,width:f/i,height:p/o});break;case"270":a=(c,u,f,p)=>({x:1-(u+p-s)/o,y:(c-r)/i,width:p/o,height:f/i});break;default:a=(c,u,f,p)=>({x:(c-r)/i,y:(u-s)/o,width:f/i,height:p/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:p,y:g,width:m,height:y}of f.getClientRects())m===0||y===0||l.push(a(p,g,m,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(h(this,tu)||x(this,tu,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=h(this,tu))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=h(this,tu))==null?void 0:s.get(e.data.id);if(!t)return;const r=h(this,li).getRawValue(t);r&&(h(this,Yt)===Te.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}};Zc=new WeakMap,sr=new WeakMap,Pt=new WeakMap,Xt=new WeakMap,eu=new WeakMap,li=new WeakMap,tu=new WeakMap,zr=new WeakMap,nu=new WeakMap,$a=new WeakMap,gs=new WeakMap,Hr=new WeakMap,za=new WeakMap,wf=new WeakMap,Af=new WeakMap,ms=new WeakMap,ru=new WeakMap,ho=new WeakMap,vs=new WeakMap,ay=new WeakMap,fo=new WeakMap,bf=new WeakMap,Ha=new WeakMap,Sf=new WeakMap,su=new WeakMap,Yt=new WeakMap,Fe=new WeakMap,ci=new WeakMap,Wa=new WeakMap,Tf=new WeakMap,Cf=new WeakMap,xf=new WeakMap,Rf=new WeakMap,Pf=new WeakMap,If=new WeakMap,kf=new WeakMap,Lf=new WeakMap,Mf=new WeakMap,Nf=new WeakMap,Df=new WeakMap,Of=new WeakMap,Ff=new WeakMap,po=new WeakMap,ys=new WeakMap,ui=new WeakMap,Vf=new WeakMap,Q=new WeakSet,Pm=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},dL=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=P(this,Q,Pm).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(h(this,vs)||x(this,vs,new a$(this)),h(this,vs).show(r,s,this.direction==="ltr"))},fL=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){h(this,ci)&&((i=h(this,vs))==null||i.hide(),x(this,ci,null),P(this,Q,Sn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===h(this,ci))return;if(!P(this,Q,Pm).call(this,e).closest(".textLayer")){h(this,ci)&&((o=h(this,vs))==null||o.hide(),x(this,ci,null),P(this,Q,Sn).call(this,{hasSelectedText:!1}));return}if((a=h(this,vs))==null||a.hide(),x(this,ci,t),P(this,Q,Sn).call(this,{hasSelectedText:!0}),!(h(this,Yt)!==Te.HIGHLIGHT&&h(this,Yt)!==Te.NONE)&&(h(this,Yt)===Te.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,ho,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=this._signal,c=u=>{u.type==="pointerup"&&u.button!==0||(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),u.type==="pointerup"&&P(this,Q,Im).call(this,"main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}},Im=function(e=""){h(this,Yt)===Te.HIGHLIGHT?this.highlightSelection(e):h(this,wf)&&P(this,Q,dL).call(this)},pL=function(){document.addEventListener("selectionchange",P(this,Q,fL).bind(this),{signal:this._signal})},gL=function(){const e=this._signal;window.addEventListener("focus",h(this,xf),{signal:e}),window.addEventListener("blur",h(this,Cf),{signal:e})},mL=function(){window.removeEventListener("focus",h(this,xf)),window.removeEventListener("blur",h(this,Cf))},ow=function(){const e=this._signal;window.addEventListener("keydown",h(this,kf),{signal:e}),window.addEventListener("keyup",h(this,Lf),{signal:e})},vL=function(){window.removeEventListener("keydown",h(this,kf)),window.removeEventListener("keyup",h(this,Lf))},aw=function(){const e=this._signal;document.addEventListener("copy",h(this,Rf),{signal:e}),document.addEventListener("cut",h(this,Pf),{signal:e}),document.addEventListener("paste",h(this,If),{signal:e})},lw=function(){document.removeEventListener("copy",h(this,Rf)),document.removeEventListener("cut",h(this,Pf)),document.removeEventListener("paste",h(this,If))},yL=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Sn=function(e){Object.entries(e).some(([r,s])=>h(this,Ff)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,Ff),e)}),h(this,Yt)===Te.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,Q,no).call(this,[[pe.HIGHLIGHT_FREE,!0]]))},no=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},_L=function(){if(!h(this,fo)){x(this,fo,!0);for(const e of h(this,Xt).values())e.enable();for(const e of h(this,Pt).values())e.enable()}},EL=function(){if(this.unselectAll(),h(this,fo)){x(this,fo,!1);for(const e of h(this,Xt).values())e.disable();for(const e of h(this,Pt).values())e.disable()}},cw=function(e){const t=h(this,Xt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},wL=function(){let e=null;for(e of h(this,Fe));return e},ad=function(){if(h(this,Pt).size===0)return!0;if(h(this,Pt).size===1)for(const e of h(this,Pt).values())return e.isEmpty();return!1},uw=function(e){for(const t of h(this,Fe))t.unselect();h(this,Fe).clear();for(const t of e)t.isEmpty()||(h(this,Fe).add(t),t.select());P(this,Q,Sn).call(this,{hasSelectedEditor:this.hasSelection})},me(Fc,"TRANSLATE_SMALL",1),me(Fc,"TRANSLATE_BIG",10);let zl=Fc;var hi,di,Wr,fi,ir,iu,Gr,Bf,hw;const ni=class ni{constructor(e){I(this,Bf);I(this,hi,"");I(this,di,!1);I(this,Wr,null);I(this,fi,null);I(this,ir,null);I(this,iu,!1);I(this,Gr,null);x(this,Gr,e)}static initialize(e){ni._l10nPromise||(ni._l10nPromise=e)}async render(){const e=x(this,Wr,document.createElement("button"));e.className="altText";const t=await ni._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const r=h(this,Gr)._uiManager._signal;e.addEventListener("contextmenu",Kn,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),h(this,Gr)._uiManager.editAltText(h(this,Gr))};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(x(this,iu,!0),s(i))},{signal:r}),await P(this,Bf,hw).call(this),e}finish(){h(this,Wr)&&(h(this,Wr).focus({focusVisible:h(this,iu)}),x(this,iu,!1))}isEmpty(){return!h(this,hi)&&!h(this,di)}get data(){return{altText:h(this,hi),decorative:h(this,di)}}set data({altText:e,decorative:t}){h(this,hi)===e&&h(this,di)===t||(x(this,hi,e),x(this,di,t),P(this,Bf,hw).call(this))}toggle(e=!1){h(this,Wr)&&(!e&&h(this,ir)&&(clearTimeout(h(this,ir)),x(this,ir,null)),h(this,Wr).disabled=!e)}destroy(){var e;(e=h(this,Wr))==null||e.remove(),x(this,Wr,null),x(this,fi,null)}};hi=new WeakMap,di=new WeakMap,Wr=new WeakMap,fi=new WeakMap,ir=new WeakMap,iu=new WeakMap,Gr=new WeakMap,Bf=new WeakSet,hw=async function(){var s;const e=h(this,Wr);if(!e)return;if(!h(this,hi)&&!h(this,di)){e.classList.remove("done"),(s=h(this,fi))==null||s.remove();return}e.classList.add("done"),ni._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(i=>{e.setAttribute("aria-label",i)});let t=h(this,fi);if(!t){x(this,fi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const i=t.id=`alt-text-tooltip-${h(this,Gr).id}`;e.setAttribute("aria-describedby",i);const o=100,a=h(this,Gr)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(h(this,ir)),x(this,ir,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,ir,setTimeout(()=>{x(this,ir,null),h(this,fi).classList.add("show"),h(this,Gr)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),e.addEventListener("mouseleave",()=>{var l;h(this,ir)&&(clearTimeout(h(this,ir)),x(this,ir,null)),(l=h(this,fi))==null||l.classList.remove("show")},{signal:a})}t.innerText=h(this,di)?await ni._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):h(this,hi),t.parentNode||e.append(t);const r=h(this,Gr).getImageForAltText();r==null||r.setAttribute("aria-describedby",t.id)},me(ni,"_l10nPromise",null);let Dv=ni;var Ga,qr,gn,ou,qa,Qt,Ka,au,lu,mn,jf,Xa,go,Uf,Ya,pi,_s,cu,uu,Sr,$f,ly,_e,dw,zf,fw,pw,AL,bL,gw,mw,vw,SL,TL,CL,xL,yw,ld;const qe=class qe{constructor(e){I(this,_e);I(this,Ga,null);I(this,qr,null);I(this,gn,null);I(this,ou,!1);I(this,qa,!1);I(this,Qt,null);I(this,Ka,null);I(this,au,this.focusin.bind(this));I(this,lu,this.focusout.bind(this));I(this,mn,null);I(this,jf,"");I(this,Xa,!1);I(this,go,null);I(this,Uf,!1);I(this,Ya,!1);I(this,pi,!1);I(this,_s,null);I(this,cu,0);I(this,uu,0);I(this,Sr,null);me(this,"_initialOptions",Object.create(null));me(this,"_isVisible",!0);me(this,"_uiManager",null);me(this,"_focusEventsAllowed",!0);me(this,"_l10nPromise",null);I(this,$f,!1);I(this,ly,qe._zIndex++);this.constructor===qe&&ze("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=qe.prototype._resizeWithKeyboard,t=zl.TRANSLATE_SMALL,r=zl.TRANSLATE_BIG;return ke(this,"_resizerKeyboardManager",new ng([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],qe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ke(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new h$({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,r){if(qe._l10nPromise||(qe._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(i=>[i,e.get(i.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),r!=null&&r.strings)for(const i of r.strings)qe._l10nPromise.set(i,e.get(i));if(qe._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);qe._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,$f)}set _isDraggable(e){var t;x(this,$f,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,ly)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):P(this,_e,ld).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(h(this,Xa)?x(this,Xa,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/o,this.fixAndSetPosition()}translate(e,t){P(this,_e,dw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){h(this,go)||x(this,go,[this.x,this.y]),P(this,_e,dw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){h(this,go)||x(this,go,[this.x,this.y]);const[r,s]=this.parentDimensions;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:o}=this;const[a,l]=this.getBaseTranslation();i+=a,o+=l,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!h(this,go)&&(h(this,go)[0]!==this.x||h(this,go)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=qe,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:s,y:i,width:o,height:a}=this;if(o*=t,a*=r,s*=t,i*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-o,s)),i=Math.max(0,Math.min(r-a,i));break;case 90:s=Math.max(0,Math.min(t-a,s)),i=Math.min(r,Math.max(o,i));break;case 180:s=Math.min(t,Math.max(o,s)),i=Math.min(r,Math.max(a,i));break;case 270:s=Math.min(t,Math.max(a,s)),i=Math.max(0,Math.min(r-o,i));break}this.x=s/=t,this.y=i/=r;const[l,c]=this.getBaseTranslation();s+=l,i+=c;const{style:u}=this.div;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return P(r=qe,zf,fw).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return P(r=qe,zf,fw).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this,s=t*e,i=r*e;return zn.isCSSRoundSupported?[Math.round(s),Math.round(i)]:[s,i]}setDims(e,t){const[r,s]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,h(this,qa)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!h(this,qa)&&t.endsWith("%");if(s&&i)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!h(this,qa)&&!i&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=h(this,gn))==null||e.finish()}async addEditToolbar(){return h(this,mn)||h(this,Ya)?h(this,mn):(x(this,mn,new tw(this)),this.div.append(h(this,mn).render()),h(this,gn)&&h(this,mn).addAltTextButton(await h(this,gn).render()),h(this,mn))}removeEditToolbar(){var e;h(this,mn)&&(h(this,mn).remove(),x(this,mn,null),(e=h(this,gn))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){h(this,gn)||(Dv.initialize(qe._l10nPromise),x(this,gn,new Dv(this)),h(this,Ga)&&(h(this,gn).data=h(this,Ga),x(this,Ga,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=h(this,gn))==null?void 0:e.data}set altTextData(e){h(this,gn)&&(h(this,gn).data=e)}hasAltText(){var e;return!((e=h(this,gn))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=h(this,ou)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",h(this,au),{signal:e}),this.div.addEventListener("focusout",h(this,lu),{signal:e});const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*r/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Nv(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=zn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Xa,!0),this._isDraggable){P(this,_e,SL).call(this,e);return}P(this,_e,vw).call(this,e)}moveInDOM(){h(this,_s)&&clearTimeout(h(this,_s)),x(this,_s,setTimeout(()=>{var e;x(this,_s,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/s,u=t/s,f=this.x*i,p=this.y*o,g=this.width*i,m=this.height*o;switch(r){case 0:return[f+c+a,o-p-u-m+l,f+c+g+a,o-p-u+l];case 90:return[f+u+a,o-p+c+l,f+u+m+a,o-p+c+g+l];case 180:return[f-c-g+a,o-p+u+l,f-c+a,o-p+u+m+l];case 270:return[f-u-m+a,o-p-c-g+l,f-u+a,o-p-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,o]=e,a=i-r,l=o-s;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-s,l,a];case 180:return[i,t-s,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,Ya,!0)}disableEditMode(){x(this,Ya,!1)}isInEditMode(){return h(this,Ya)}shouldGetKeyboardEvents(){return h(this,pi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,r;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",h(this,au),{signal:e}),(r=this.div)==null||r.addEventListener("focusout",h(this,lu),{signal:e})}rotate(e){}serialize(e=!1,t=null){ze("An editor must be serializable")}static deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});s.rotation=e.rotation,x(s,Ga,e.accessibilityData);const[i,o]=s.pageDimensions,[a,l,c,u]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/i,s.y=l/o,s.width=c/i,s.height=u/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",h(this,au)),this.div.removeEventListener("focusout",h(this,lu)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(this,_s)&&(clearTimeout(h(this,_s)),x(this,_s,null)),P(this,_e,ld).call(this),this.removeEditToolbar(),h(this,Sr)){for(const e of h(this,Sr).values())clearTimeout(e);x(this,Sr,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,_e,AL).call(this),h(this,Qt).classList.remove("hidden"),Nv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Ka,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=h(this,Qt).children;if(!h(this,qr)){x(this,qr,Array.from(t));const o=P(this,_e,TL).bind(this),a=P(this,_e,CL).bind(this),l=this._uiManager._signal;for(const c of h(this,qr)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",P(this,_e,xL).bind(this,u),{signal:l}),qe._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(f=>c.setAttribute("aria-label",f))}}const r=h(this,qr)[0];let s=0;for(const o of t){if(o===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(h(this,qr).length/4);if(i!==s){if(i<s)for(let a=0;a<s-i;a++)h(this,Qt).append(h(this,Qt).firstChild);else if(i>s)for(let a=0;a<i-s;a++)h(this,Qt).firstChild.before(h(this,Qt).lastChild);let o=0;for(const a of t){const c=h(this,qr)[o++].getAttribute("data-resizer-name");qe._l10nPromise.get(`pdfjs-editor-resizer-label-${c}`).then(u=>a.setAttribute("aria-label",u))}}P(this,_e,yw).call(this,0),x(this,pi,!0),h(this,Qt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){h(this,pi)&&P(this,_e,mw).call(this,h(this,jf),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){P(this,_e,ld).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!h(this,mn)){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=h(this,mn))==null||s.show())});return}(t=h(this,mn))==null||t.show()}unselect(){var e,t,r,s;(e=h(this,Qt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=h(this,mn))==null||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return h(this,Uf)}set isEditing(e){x(this,Uf,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){x(this,qa,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){h(this,Sr)||x(this,Sr,new Map);const{action:r}=e;let s=h(this,Sr).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),h(this,Sr).delete(r),h(this,Sr).size===0&&x(this,Sr,null)},qe._telemetryTimeout),h(this,Sr).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,ou,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,ou,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ga=new WeakMap,qr=new WeakMap,gn=new WeakMap,ou=new WeakMap,qa=new WeakMap,Qt=new WeakMap,Ka=new WeakMap,au=new WeakMap,lu=new WeakMap,mn=new WeakMap,jf=new WeakMap,Xa=new WeakMap,go=new WeakMap,Uf=new WeakMap,Ya=new WeakMap,pi=new WeakMap,_s=new WeakMap,cu=new WeakMap,uu=new WeakMap,Sr=new WeakMap,$f=new WeakMap,ly=new WeakMap,_e=new WeakSet,dw=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this.fixAndSetPosition()},zf=new WeakSet,fw=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},pw=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},AL=function(){if(h(this,Qt))return;x(this,Qt,document.createElement("div")),h(this,Qt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");h(this,Qt).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",P(this,_e,bL).bind(this,r),{signal:t}),s.addEventListener("contextmenu",Kn,{signal:t}),s.tabIndex=-1}this.div.prepend(h(this,Qt))},bL=function(e,t){var y;t.preventDefault();const{isMac:r}=zn.platform;if(t.button!==0||t.ctrlKey&&r)return;(y=h(this,gn))==null||y.toggle(!1);const s=P(this,_e,mw).bind(this,e),i=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",Kn,{signal:o});const l=this.x,c=this.y,u=this.width,f=this.height,p=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{var w;this.parent.togglePointerEvents(!0),(w=h(this,gn))==null||w.toggle(!0),this._isDraggable=i,window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",Kn),this.parent.div.style.cursor=p,this.div.style.cursor=g,P(this,_e,gw).call(this,l,c,u,f)};window.addEventListener("pointerup",m,{signal:o}),window.addEventListener("blur",m,{signal:o})},gw=function(e,t,r,s){const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===r&&l===s||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=i,this.y=o;const[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=s,this.x=e,this.y=t;const[c,u]=this.parentDimensions;this.setDims(c*r,u*s),this.fixAndSetPosition()},mustExec:!0})},mw=function(e,t){const[r,s]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,c=qe.MIN_SIZE/r,u=qe.MIN_SIZE/s,f=W=>Math.round(W*1e4)/1e4,p=P(this,_e,pw).call(this,this.rotation),g=(W,U)=>[p[0]*W+p[2]*U,p[1]*W+p[3]*U],m=P(this,_e,pw).call(this,360-this.rotation),y=(W,U)=>[m[0]*W+m[2]*U,m[1]*W+m[3]*U];let w,_,E=!1,S=!1;switch(e){case"topLeft":E=!0,w=(W,U)=>[0,0],_=(W,U)=>[W,U];break;case"topMiddle":w=(W,U)=>[W/2,0],_=(W,U)=>[W/2,U];break;case"topRight":E=!0,w=(W,U)=>[W,0],_=(W,U)=>[0,U];break;case"middleRight":S=!0,w=(W,U)=>[W,U/2],_=(W,U)=>[0,U/2];break;case"bottomRight":E=!0,w=(W,U)=>[W,U],_=(W,U)=>[0,0];break;case"bottomMiddle":w=(W,U)=>[W/2,U],_=(W,U)=>[W/2,0];break;case"bottomLeft":E=!0,w=(W,U)=>[0,U],_=(W,U)=>[W,0];break;case"middleLeft":S=!0,w=(W,U)=>[0,U/2],_=(W,U)=>[W,U/2];break}const R=w(a,l),D=_(a,l);let F=g(...D);const C=f(i+F[0]),T=f(o+F[1]);let k=1,M=1,[O,B]=this.screenToPageTranslation(t.movementX,t.movementY);if([O,B]=y(O/r,B/s),E){const W=Math.hypot(a,l);k=M=Math.max(Math.min(Math.hypot(D[0]-R[0]-O,D[1]-R[1]-B)/W,1/a,1/l),c/a,u/l)}else S?k=Math.max(c,Math.min(1,Math.abs(D[0]-R[0]-O)))/a:M=Math.max(u,Math.min(1,Math.abs(D[1]-R[1]-B)))/l;const N=f(a*k),q=f(l*M);F=g(..._(N,q));const re=C-F[0],Z=T-F[1];this.width=N,this.height=q,this.x=re,this.y=Z,this.setDims(r*N,s*q),this.fixAndSetPosition()},vw=function(e){const{isMac:t}=zn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},SL=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let r,s;const i=this._uiManager._signal;t&&(this.div.classList.add("moving"),r={passive:!0,capture:!0,signal:i},x(this,cu,e.clientX),x(this,uu,e.clientY),s=a=>{const{clientX:l,clientY:c}=a,[u,f]=this.screenToPageTranslation(l-h(this,cu),c-h(this,uu));x(this,cu,l),x(this,uu,c),this._uiManager.dragSelectedEditors(u,f)},window.addEventListener("pointermove",s,r));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,r)),x(this,Xa,!1),this._uiManager.endDragSession()||P(this,_e,vw).call(this,e)};window.addEventListener("pointerup",o,{signal:i}),window.addEventListener("blur",o,{signal:i})},TL=function(e){qe._resizerKeyboardManager.exec(this,e)},CL=function(e){var t;h(this,pi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==h(this,Qt)&&P(this,_e,ld).call(this)},xL=function(e){x(this,jf,h(this,pi)?e:"")},yw=function(e){if(h(this,qr))for(const t of h(this,qr))t.tabIndex=e},ld=function(){if(x(this,pi,!1),P(this,_e,yw).call(this,-1),h(this,Ka)){const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=h(this,Ka);P(this,_e,gw).call(this,e,t,r,s),x(this,Ka,null)}},I(qe,zf),me(qe,"_borderLineWidth",-1),me(qe,"_colorManager",new iw),me(qe,"_zIndex",1),me(qe,"_telemetryTimeout",1e3);let Ve=qe;class h$ extends Ve{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const I1=3285377520,Ar=4294901760,ds=65535;class RL{constructor(e){this.h1=e?e&4294967295:I1,this.h2=e?e&4294967295:I1}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let y=0,w=e.length;y<w;y++){const _=e.charCodeAt(y);_<=255?t[r++]=_:(t[r++]=_>>>8,t[r++]=_&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,l=0,c=this.h1,u=this.h2;const f=3432918353,p=461845907,g=f&ds,m=p&ds;for(let y=0;y<s;y++)y&1?(a=o[y],a=a*f&Ar|a*g&ds,a=a<<15|a>>>17,a=a*p&Ar|a*m&ds,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[y],l=l*f&Ar|l*g&ds,l=l<<15|l>>>17,l=l*p&Ar|l*m&ds,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,i){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*f&Ar|a*g&ds,a=a<<15|a>>>17,a=a*p&Ar|a*m&ds,s&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ar|e*36045&ds,t=t*4283543511&Ar|((t<<16|e>>>16)*2950163797&Ar)>>>16,e^=t>>>1,e=e*444984403&Ar|e*60499&ds,t=t*3301882366&Ar|((t<<16|e>>>16)*3120437893&Ar)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const _w=Object.freeze({map:null,hash:"",transfer:void 0});var Qa,Jt,cy,PL;class dS{constructor(){I(this,cy);I(this,Qa,!1);I(this,Jt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=h(this,Jt).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return h(this,Jt).get(e)}remove(e){if(h(this,Jt).delete(e),h(this,Jt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of h(this,Jt).values())if(t instanceof Ve)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=h(this,Jt).get(e);let s=!1;if(r!==void 0)for(const[i,o]of Object.entries(t))r[i]!==o&&(s=!0,r[i]=o);else s=!0,h(this,Jt).set(e,t);s&&P(this,cy,PL).call(this),t instanceof Ve&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return h(this,Jt).has(e)}getAll(){return h(this,Jt).size>0?iS(h(this,Jt)):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return h(this,Jt).size}resetModified(){h(this,Qa)&&(x(this,Qa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new IL(this)}get serializable(){if(h(this,Jt).size===0)return _w;const e=new Map,t=new RL,r=[],s=Object.create(null);let i=!1;for(const[o,a]of h(this,Jt)){const l=a instanceof Ve?a.serialize(!1,s):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:_w}get editorStats(){let e=null;const t=new Map;for(const r of h(this,Jt).values()){if(!(r instanceof Ve))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[a,l]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}}Qa=new WeakMap,Jt=new WeakMap,cy=new WeakSet,PL=function(){h(this,Qa)||(x(this,Qa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Hf;class IL extends dS{constructor(t){super();I(this,Hf);const{map:r,hash:s,transfer:i}=t.serializable,o=structuredClone(r,i?{transfer:i}:null);x(this,Hf,{map:o,hash:s,transfer:i})}get print(){ze("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,Hf)}}Hf=new WeakMap;var hu;class d${constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){I(this,hu,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),h(this,hu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||h(this,hu).has(e.loadedName))){if(Dt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:i}=e,o=new FontFace(r,s,i);this.addNativeFontFace(o);try{await o.load(),h(this,hu).add(r),t==null||t(e)}catch{ye(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw ye(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ke(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(wn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ke(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Dt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ke(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(R,D){return R.charCodeAt(D)<<24|R.charCodeAt(D+1)<<16|R.charCodeAt(D+2)<<8|R.charCodeAt(D+3)&255}function s(R,D,F,C){const T=R.substring(0,D),k=R.substring(D+F);return T+C+k}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(R,D){if(++c>30){ye("Load test font never loaded."),D();return}if(l.font="30px "+R,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(u.bind(null,R,D))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,f.length,f);const m=16,y=1482184792;let w=r(p,m);for(i=0,o=f.length-3;i<o;i+=4)w=w-y+r(f,i)|0;i<f.length&&(w=w-y+r(f+"XXX",i)|0),p=s(p,m,4,XU(w));const _=`url(data:font/opentype;base64,${btoa(p)});`,E=`@font-face {font-family:"${f}";src:${_}}`;this.insertRule(E);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const R of[e.loadedName,f]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=R,S.append(D)}this._document.body.append(S),u(f,()=>{S.remove(),t.complete()})}}hu=new WeakMap;class f${constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=Qk(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),r}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(i){ye(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(i,o){};const s=[];for(let i=0,o=r.length;i<o;)switch(r[i++]){case Qs.BEZIER_CURVE_TO:{const[a,l,c,u,f,p]=r.slice(i,i+6);s.push(g=>g.bezierCurveTo(a,l,c,u,f,p)),i+=6}break;case Qs.MOVE_TO:{const[a,l]=r.slice(i,i+2);s.push(c=>c.moveTo(a,l)),i+=2}break;case Qs.LINE_TO:{const[a,l]=r.slice(i,i+2);s.push(c=>c.lineTo(a,l)),i+=2}break;case Qs.QUADRATIC_CURVE_TO:{const[a,l,c,u]=r.slice(i,i+4);s.push(f=>f.quadraticCurveTo(a,l,c,u)),i+=4}break;case Qs.RESTORE:s.push(a=>a.restore());break;case Qs.SAVE:s.push(a=>a.save());break;case Qs.SCALE:Dt(s.length===2,"Scale command is only valid at the third position.");break;case Qs.TRANSFORM:{const[a,l,c,u,f,p]=r.slice(i,i+6);s.push(g=>g.transform(a,l,c,u,f,p)),i+=6}break;case Qs.TRANSLATE:{const[a,l]=r.slice(i,i+2);s.push(c=>c.translate(a,l)),i+=2}break}return this.compiledGlyphs[t]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let l=2,c=s.length;l<c;l++)s[l](o)}}}if(wn){var Ew=Promise.withResolvers(),Md=null;(async()=>{const e=await Xg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Xg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Xg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Xg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let i,o;return new Map(Object.entries({fs:e,http:t,https:r,url:s,canvas:i,path2d:o}))})().then(e=>{Md=e,Ew.resolve()},e=>{ye(`loadPackages: ${e}`),Md=new Map,Ew.resolve()})}class js{static get promise(){return Ew.promise}static get(e){return Md==null?void 0:Md.get(e)}}const kL=function(n){return js.get("fs").promises.readFile(n).then(t=>new Uint8Array(t))};class p$ extends Zy{}class g$ extends Mv{_createCanvas(e,t){return js.get("canvas").createCanvas(e,t)}}class m$ extends e_{_fetchData(e,t){return kL(e).then(r=>({cMapData:r,compressionType:t}))}}class v$ extends t_{_fetchData(e){return kL(e)}}const Rn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ww(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class rg{constructor(){this.constructor===rg&&ze("Cannot initialize BaseShadingPattern.")}getPattern(){ze("Abstract method `getPattern` called.")}}class y$ extends rg{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===Rn.STROKE||s===Rn.FILL){const o=t.current.getClippedPathBoundingBox(s,it(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l,!0),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=ie.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),ww(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(r);i.setTransform(f)}else ww(e,this._bbox),i=this._createGradient(e);return i}}function R0(n,e,t,r,s,i,o,a){const l=e.coords,c=e.colors,u=n.data,f=n.width*4;let p;l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=o,o=p),l[r+1]>l[s+1]&&(p=r,r=s,s=p,p=o,o=a,a=p),l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=o,o=p);const g=(l[t]+e.offsetX)*e.scaleX,m=(l[t+1]+e.offsetY)*e.scaleY,y=(l[r]+e.offsetX)*e.scaleX,w=(l[r+1]+e.offsetY)*e.scaleY,_=(l[s]+e.offsetX)*e.scaleX,E=(l[s+1]+e.offsetY)*e.scaleY;if(m>=E)return;const S=c[i],R=c[i+1],D=c[i+2],F=c[o],C=c[o+1],T=c[o+2],k=c[a],M=c[a+1],O=c[a+2],B=Math.round(m),N=Math.round(E);let q,re,Z,W,U,z,X,ce;for(let se=B;se<=N;se++){if(se<w){const fe=se<m?0:(m-se)/(m-w);q=g-(g-y)*fe,re=S-(S-F)*fe,Z=R-(R-C)*fe,W=D-(D-T)*fe}else{let fe;se>E?fe=1:w===E?fe=0:fe=(w-se)/(w-E),q=y-(y-_)*fe,re=F-(F-k)*fe,Z=C-(C-M)*fe,W=T-(T-O)*fe}let ae;se<m?ae=0:se>E?ae=1:ae=(m-se)/(m-E),U=g-(g-_)*ae,z=S-(S-k)*ae,X=R-(R-M)*ae,ce=D-(D-O)*ae;const je=Math.round(Math.min(q,U)),Ue=Math.round(Math.max(q,U));let Pe=f*se+je*4;for(let fe=je;fe<=Ue;fe++)ae=(q-fe)/(q-U),ae<0?ae=0:ae>1&&(ae=1),u[Pe++]=re-(re-z)*ae|0,u[Pe++]=Z-(Z-X)*ae|0,u[Pe++]=W-(W-ce)*ae|0,u[Pe++]=255}}function _$(n,e,t){const r=e.coords,s=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(i=0;i<l;i++){let u=i*a;for(let f=0;f<c;f++,u++)R0(n,t,r[u],r[u+1],r[u+a],s[u],s[u+1],s[u+a]),R0(n,t,r[u+a+1],r[u+1],r[u+a],s[u+a+1],s[u+1],s[u+a])}break;case"triangles":for(i=0,o=r.length;i<o;i+=3)R0(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class E$ extends rg{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),g=c/f,m=u/p,y={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/m},w=f+2*2,_=p+2*2,E=r.getCanvas("mesh",w,_,!1),S=E.context,R=S.createImageData(f,p);if(t){const F=R.data;for(let C=0,T=F.length;C<T;C+=4)F[C]=t[0],F[C+1]=t[1],F[C+2]=t[2],F[C+3]=255}for(const F of this._figures)_$(R,F,y);return S.putImageData(R,2,2),{canvas:E.canvas,offsetX:a-2*g,offsetY:l-2*m,scaleX:g,scaleY:m}}getPattern(e,t,r,s){ww(e,this._bbox);let i;if(s===Rn.SHADING)i=ie.singularValueDecompose2dScale(it(e));else if(i=ie.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=ie.singularValueDecompose2dScale(this.matrix);i=[i[0]*a[0],i[1]*a[1]]}const o=this._createMeshCanvas(i,s===Rn.SHADING?null:this._background,t.cachedCanvases);return s!==Rn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class w$ extends rg{getPattern(){return"hotpink"}}function A$(n){switch(n[0]){case"RadialAxial":return new y$(n);case"Mesh":return new E$(n);case"Dummy":return new w$}throw new Error(`Unknown IR type: ${n[0]}`)}const k1={COLORED:1,UNCOLORED:2},uy=class uy{constructor(e,t,r,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,r=this.bbox,s=this.xstep,i=this.ystep,o=this.paintType,a=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;Yy("TilingType: "+a);const u=r[0],f=r[1],p=r[2],g=r[3],m=ie.singularValueDecompose2dScale(this.matrix),y=ie.singularValueDecompose2dScale(this.baseTransform),w=[m[0]*y[0],m[1]*y[1]],_=this.getSizeAndScale(s,this.ctx.canvas.width,w[0]),E=this.getSizeAndScale(i,this.ctx.canvas.height,w[1]),S=e.cachedCanvases.getCanvas("pattern",_.size,E.size,!0),R=S.context,D=c.createCanvasGraphics(R);D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,o,l);let F=u,C=f,T=p,k=g;return u<0&&(F=0,T+=Math.abs(u)),f<0&&(C=0,k+=Math.abs(f)),R.translate(-(_.scale*F),-(E.scale*C)),D.transform(_.scale,0,0,E.scale,0,0),R.save(),this.clipBbox(D,F,C,T,k),D.baseTransform=it(D.ctx),D.executeOperatorList(t),D.endDrawing(),{canvas:S.canvas,scaleX:_.scale,scaleY:E.scale,offsetX:F,offsetY:C}}getSizeAndScale(e,t,r){e=Math.abs(e);const s=Math.max(uy.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const o=s-t,a=i-r;e.ctx.rect(t,r,o,a),e.current.updateRectMinMax(it(e.ctx),[t,r,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case k1.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,i.fillColor=o.fillStyle,i.strokeColor=o.strokeStyle;break;case k1.UNCOLORED:const a=ie.makeHexColor(r[0],r[1],r[2]);s.fillStyle=a,s.strokeStyle=a,i.fillColor=a,i.strokeColor=a;break;default:throw new KU(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,s){let i=r;s!==Rn.SHADING&&(i=ie.transform(i,t.baseTransform),this.matrix&&(i=ie.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};me(uy,"MAX_PATTERN_SIZE",3e3);let Aw=uy;function b$({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=zn.isLittleEndian?4278190080:255,[l,c]=o?[i,a]:[a,i],u=r>>3,f=r&7,p=n.length;t=new Uint32Array(t.buffer);let g=0;for(let m=0;m<s;m++){for(const w=e+u;e<w;e++){const _=e<p?n[e]:255;t[g++]=_&128?c:l,t[g++]=_&64?c:l,t[g++]=_&32?c:l,t[g++]=_&16?c:l,t[g++]=_&8?c:l,t[g++]=_&4?c:l,t[g++]=_&2?c:l,t[g++]=_&1?c:l}if(f===0)continue;const y=e<p?n[e++]:255;for(let w=0;w<f;w++)t[g++]=y&1<<7-w?c:l}return{srcPos:e,destPos:g}}const L1=16,M1=100,S$=15,N1=10,D1=1e3,Bn=16;function T$(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,s){e.translate(r,s),this.__originalTranslate(r,s)},n.scale=function(r,s){e.scale(r,s),this.__originalScale(r,s)},n.transform=function(r,s,i,o,a,l){e.transform(r,s,i,o,a,l),this.__originalTransform(r,s,i,o,a,l)},n.setTransform=function(r,s,i,o,a,l){e.setTransform(r,s,i,o,a,l),this.__originalSetTransform(r,s,i,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,o,a){e.bezierCurveTo(t,r,s,i,o,a),this.__originalBezierCurveTo(t,r,s,i,o,a)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class C${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Yg(n,e,t,r,s,i,o,a,l,c){const[u,f,p,g,m,y]=it(n);if(f===0&&p===0){const E=o*u+m,S=Math.round(E),R=a*g+y,D=Math.round(R),F=(o+l)*u+m,C=Math.abs(Math.round(F)-S)||1,T=(a+c)*g+y,k=Math.abs(Math.round(T)-D)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(g),S,D),n.drawImage(e,t,r,s,i,0,0,C,k),n.setTransform(u,f,p,g,m,y),[C,k]}if(u===0&&g===0){const E=a*p+m,S=Math.round(E),R=o*f+y,D=Math.round(R),F=(a+c)*p+m,C=Math.abs(Math.round(F)-S)||1,T=(o+l)*f+y,k=Math.abs(Math.round(T)-D)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,S,D),n.drawImage(e,t,r,s,i,0,0,k,C),n.setTransform(u,f,p,g,m,y),[k,C]}n.drawImage(e,t,r,s,i,o,a,l,c);const w=Math.hypot(u,f),_=Math.hypot(p,g);return[w*l,_*c]}function x$(n){const{width:e,height:t}=n;if(e>D1||t>D1)return null;const r=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let o=new Uint8Array(i*(t+1)),a,l,c;const u=e+7&-8;let f=new Uint8Array(u*t),p=0;for(const _ of n.data){let E=128;for(;E>0;)f[p++]=_&E?0:255,E>>=1}let g=0;for(p=0,f[p]!==0&&(o[0]=1,++g),l=1;l<e;l++)f[p]!==f[p+1]&&(o[l]=f[p]?2:1,++g),p++;for(f[p]!==0&&(o[l]=2,++g),a=1;a<t;a++){p=a*u,c=a*i,f[p-u]!==f[p]&&(o[c]=f[p]?1:8,++g);let _=(f[p]?4:0)+(f[p-u]?8:0);for(l=1;l<e;l++)_=(_>>2)+(f[p+1]?4:0)+(f[p-u+1]?8:0),s[_]&&(o[c+l]=s[_],++g),p++;if(f[p-u]!==f[p]&&(o[c+l]=f[p]?2:4,++g),g>r)return null}for(p=u*(t-1),c=a*i,f[p]!==0&&(o[c]=8,++g),l=1;l<e;l++)f[p]!==f[p+1]&&(o[c+l]=f[p]?4:8,++g),p++;if(f[p]!==0&&(o[c+l]=4,++g),g>r)return null;const m=new Int32Array([0,i,-1,0,-i,0,0,0,1]),y=new Path2D;for(a=0;g&&a<=t;a++){let _=a*i;const E=_+e;for(;_<E&&!o[_];)_++;if(_===E)continue;y.moveTo(_%i,a);const S=_;let R=o[_];do{const D=m[R];do _+=D;while(!o[_]);const F=o[_];F!==5&&F!==10?(R=F,o[_]=0):(R=F&51*R>>4,o[_]&=R>>2|R<<2),y.lineTo(_%i,_/i|0),o[_]||--g}while(S!==_);--a}return f=null,o=null,function(_){_.save(),_.scale(1/e,-1/t),_.translate(0,-t),_.fill(y),_.beginPath(),_.restore()}}class O1{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Xk,this.textMatrixScale=1,this.fontMatrix=KE,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=fn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=ie.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=ie.applyTransform(t,e),s=ie.applyTransform(t.slice(2),e),i=ie.applyTransform([t[0],t[3]],e),o=ie.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],s[0],i[0],o[0]),this.minY=Math.min(this.minY,r[1],s[1],i[1],o[1]),this.maxX=Math.max(this.maxX,r[0],s[0],i[0],o[0]),this.maxY=Math.max(this.maxY,r[1],s[1],i[1],o[1])}updateScalingPathMinMax(e,t){ie.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,s,i,o,a,l,c,u){const f=ie.bezierBoundingBox(t,r,s,i,o,a,l,c,u);u||this.updateRectMinMax(e,f)}getPathBoundingBox(e=Rn.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Rn.STROKE){t||ze("Stroke bounding box must include transform.");const s=ie.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;r[0]-=i,r[1]-=o,r[2]+=i,r[3]+=o}return r}updateClipFromPath(){const e=ie.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Rn.FILL,t=null){return ie.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function F1(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Bn,i=(t-s)/Bn,o=s===0?i:i+1,a=n.createImageData(r,Bn);let l=0,c;const u=e.data,f=a.data;let p,g,m,y;if(e.kind===Tm.GRAYSCALE_1BPP){const w=u.byteLength,_=new Uint32Array(f.buffer,0,f.byteLength>>2),E=_.length,S=r+7>>3,R=4294967295,D=zn.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(m=p<i?Bn:s,c=0,g=0;g<m;g++){const F=w-l;let C=0;const T=F>S?r:F*8-7,k=T&-8;let M=0,O=0;for(;C<k;C+=8)O=u[l++],_[c++]=O&128?R:D,_[c++]=O&64?R:D,_[c++]=O&32?R:D,_[c++]=O&16?R:D,_[c++]=O&8?R:D,_[c++]=O&4?R:D,_[c++]=O&2?R:D,_[c++]=O&1?R:D;for(;C<T;C++)M===0&&(O=u[l++],M=128),_[c++]=O&M?R:D,M>>=1}for(;c<E;)_[c++]=0;n.putImageData(a,0,p*Bn)}}else if(e.kind===Tm.RGBA_32BPP){for(g=0,y=r*Bn*4,p=0;p<i;p++)f.set(u.subarray(l,l+y)),l+=y,n.putImageData(a,0,g),g+=Bn;p<o&&(y=r*s*4,f.set(u.subarray(l,l+y)),n.putImageData(a,0,g))}else if(e.kind===Tm.RGB_24BPP)for(m=Bn,y=r*m,p=0;p<o;p++){for(p>=i&&(m=s,y=r*m),c=0,g=y;g--;)f[c++]=u[l++],f[c++]=u[l++],f[c++]=u[l++],f[c++]=255;n.putImageData(a,0,p*Bn)}else throw new Error(`bad image kind: ${e.kind}`)}function V1(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Bn,i=(t-s)/Bn,o=s===0?i:i+1,a=n.createImageData(r,Bn);let l=0;const c=e.data,u=a.data;for(let f=0;f<o;f++){const p=f<i?Bn:s;({srcPos:l}=b$({src:c,srcPos:l,dest:u,width:r,height:p,nonBlackColor:0})),n.putImageData(a,0,f*Bn)}}function Yh(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Qg(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!wn){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function B1(n,e){if(e)return!0;const t=ie.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*ea.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const R$=["butt","round","square"],P$=["miter","round","bevel"],I$={},j1={};var aa,bw,Sw;const qS=class qS{constructor(e,t,r,s,i,{optionalContentConfig:o,markedContentStack:a=null},l,c){I(this,aa);this.ctx=e,this.current=new O1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new C$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...it(this.compositeCtx))}this.ctx.save(),Qg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=it(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,o=e.fnArray;let a=t||0;const l=i.length;if(l===a)return a;const c=l-a>N1&&typeof r=="function",u=c?Date.now()+S$:0;let f=0;const p=this.commonObjs,g=this.objs;let m;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,r),a;if(m=o[a],m!==$r.dependency)this[m].apply(this,i[a]);else for(const y of i[a]){const w=y.startsWith("g_")?p:g;if(!w.has(y))return w.get(y,r),a}if(a++,a===l)return a;if(c&&++f>N1){if(Date.now()>u)return r(),a;f=0}}}endDrawing(){P(this,aa,bw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,aa,Sw).call(this)}_scaleImage(e,t){const r=e.width,s=e.height;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=s,c="prescale1",u,f;for(;i>2&&a>1||o>2&&l>1;){let p=a,g=l;i>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/p),o>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/g),u=this.cachedCanvases.getCanvas(c,p,g),f=u.context,f.clearRect(0,0,p,g),f.drawImage(e,0,0,a,l,0,0,p,g),e=u.canvas,a=p,l=g,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,o=this.current.patternFill,a=it(t);let l,c,u,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),i]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const k=l.get(c);if(k&&!o){const M=Math.round(Math.min(a[0],a[2])+a[4]),O=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:k,offsetX:M,offsetY:O}}u=k}u||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),V1(f.context,e));let p=ie.transform(a,[1/r,0,0,-1/s,0,0]);p=ie.transform(p,[1,0,0,1,0,-s]);const[g,m,y,w]=ie.getAxialAlignedBoundingBox([0,0,r,s],p),_=Math.round(y-g)||1,E=Math.round(w-m)||1,S=this.cachedCanvases.getCanvas("fillCanvas",_,E),R=S.context,D=g,F=m;R.translate(-D,-F),R.transform(...p),u||(u=this._scaleImage(f.canvas,Js(R)),u=u.img,l&&o&&l.set(c,u)),R.imageSmoothingEnabled=B1(it(R),e.interpolate),Yg(R,u,0,0,u.width,u.height,0,0,r,s),R.globalCompositeOperation="source-in";const C=ie.transform(Js(R),[1,0,0,1,-D,-F]);return R.fillStyle=o?i.getPattern(t,this,C,Rn.FILL):i,R.fillRect(0,0,r,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,S.canvas)),{canvas:S.canvas,offsetX:Math.round(D),offsetY:Math.round(F)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=R$[e]}setLineJoin(e){this.ctx.lineJoin=P$[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...it(this.suspendedCtx)),Yh(this.suspendedCtx,i),T$(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Yh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],o=s[1],a=s[2]-i,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,o,a,l,c,u,f){let p=e.canvas,g=l-u,m=c-f;if(o){if(g<0||m<0||g+r>p.width||m+s>p.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,s),_=w.context;_.drawImage(p,-g,-m),o.some(E=>E!==0)&&(_.globalCompositeOperation="destination-atop",_.fillStyle=ie.makeHexColor(...o),_.fillRect(0,0,r,s),_.globalCompositeOperation="source-over"),p=w.canvas,g=m=0}else if(o.some(w=>w!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(g,m,r,s),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=ie.makeHexColor(...o),e.fillRect(g,m,r,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const y=new Path2D;y.rect(l,c,r,s),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(p,g,m,r,s,l,c,r,s),t.restore()}save(){this.inSMaskMode?(Yh(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Yh(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,s,i,o){this.ctx.transform(e,t,r,s,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const s=this.ctx,i=this.current;let o=i.x,a=i.y,l,c;const u=it(s),f=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,p=f?r.slice(0):null;for(let g=0,m=0,y=e.length;g<y;g++)switch(e[g]|0){case $r.rectangle:o=t[m++],a=t[m++];const w=t[m++],_=t[m++],E=o+w,S=a+_;s.moveTo(o,a),w===0||_===0?s.lineTo(E,S):(s.lineTo(E,a),s.lineTo(E,S),s.lineTo(o,S)),f||i.updateRectMinMax(u,[o,a,E,S]),s.closePath();break;case $r.moveTo:o=t[m++],a=t[m++],s.moveTo(o,a),f||i.updatePathMinMax(u,o,a);break;case $r.lineTo:o=t[m++],a=t[m++],s.lineTo(o,a),f||i.updatePathMinMax(u,o,a);break;case $r.curveTo:l=o,c=a,o=t[m+4],a=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],o,a),i.updateCurvePathMinMax(u,l,c,t[m],t[m+1],t[m+2],t[m+3],o,a,p),m+=6;break;case $r.curveTo2:l=o,c=a,s.bezierCurveTo(o,a,t[m],t[m+1],t[m+2],t[m+3]),i.updateCurvePathMinMax(u,l,c,o,a,t[m],t[m+1],t[m+2],t[m+3],p),o=t[m+2],a=t[m+3],m+=4;break;case $r.curveTo3:l=o,c=a,o=t[m+2],a=t[m+3],s.bezierCurveTo(t[m],t[m+1],o,a,o,a),i.updateCurvePathMinMax(u,l,c,t[m],t[m+1],o,a,o,a,p),m+=4;break;case $r.closePath:s.closePath();break}f&&i.updateScalingPathMinMax(u,p),i.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(t.save(),t.strokeStyle=r.getPattern(t,this,Js(t),Rn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=r.getPattern(t,this,Js(t),Rn.FILL),i=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=I$}eoClip(){this.pendingClip=j1}beginText(){this.current.textMatrix=Xk,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||KE,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ye("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",o=((u=r.systemFontInfo)==null?void 0:u.css)||`"${i}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const l=r.italic?"italic":"normal";let c=t;t<L1?c=L1:t>M1&&(c=M1),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,s,i,o){this.current.textMatrix=[e,t,r,s,i,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s){const i=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=l&fn.FILL_STROKE_MASK,f=!!(l&fn.ADD_TO_PATH_FLAG),p=o.patternFill&&!a.missingFile;let g;(a.disableFontFace||f||p)&&(g=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||p?(i.save(),i.translate(t,r),i.beginPath(),g(i,c),s&&i.setTransform(...s),(u===fn.FILL||u===fn.FILL_STROKE)&&i.fill(),(u===fn.STROKE||u===fn.FILL_STROKE)&&i.stroke(),i.restore()):((u===fn.FILL||u===fn.FILL_STROKE)&&i.fillText(e,t,r),(u===fn.STROKE||u===fn.FILL_STROKE)&&i.strokeText(e,t,r)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:it(i),x:t,y:r,fontSize:c,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return ke(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,f=e.length,p=r.vertical,g=p?1:-1,m=r.defaultVMetrics,y=s*t.fontMatrix[0],w=t.textRenderingMode===fn.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),c>0?i.scale(u,-1):i.scale(u,1);let _;if(t.patternFill){i.save();const F=t.fillColor.getPattern(i,this,Js(i),Rn.FILL);_=it(i),i.restore(),i.fillStyle=F}let E=t.lineWidth;const S=t.textMatrixScale;if(S===0||E===0){const F=t.textRenderingMode&fn.FILL_STROKE_MASK;(F===fn.STROKE||F===fn.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=S;if(o!==1&&(i.scale(o,o),E/=o),i.lineWidth=E,r.isInvalidPDFjsFont){const F=[];let C=0;for(const T of e)F.push(T.unicode),C+=T.width;i.fillText(F.join(""),0,0),t.x+=C*y*u,i.restore(),this.compose();return}let R=0,D;for(D=0;D<f;++D){const F=e[D];if(typeof F=="number"){R+=g*F*s/1e3;continue}let C=!1;const T=(F.isSpace?l:0)+a,k=F.fontChar,M=F.accent;let O,B,N=F.width;if(p){const re=F.vmetric||m,Z=-(F.vmetric?re[1]:N*.5)*y,W=re[2]*y;N=re?-re[0]:N,O=Z/o,B=(R+W)/o}else O=R/o,B=0;if(r.remeasure&&N>0){const re=i.measureText(k).width*1e3/s*o;if(N<re&&this.isFontSubpixelAAEnabled){const Z=N/re;C=!0,i.save(),i.scale(Z,1),O/=Z}else N!==re&&(O+=(N-re)/2e3*s/o)}if(this.contentVisible&&(F.isInFont||r.missingFile)){if(w&&!M)i.fillText(k,O,B);else if(this.paintChar(k,O,B,_),M){const re=O+s*M.offset.x/o,Z=B-s*M.offset.y/o;this.paintChar(M.fontChar,re,Z,_)}}const q=p?N*y-T*c:N*y+T*c;R+=q,C&&i.restore()}p?t.y-=R:t.x+=R*u,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,o=r.fontDirection,a=s.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*o,f=r.fontMatrix||KE,p=e.length,g=r.textRenderingMode===fn.INVISIBLE;let m,y,w,_;if(!(g||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(u,o),m=0;m<p;++m){if(y=e[m],typeof y=="number"){_=a*y*i/1e3,this.ctx.translate(_,0),r.x+=_*u;continue}const E=(y.isSpace?c:0)+l,S=s.charProcOperatorList[y.operatorListId];if(!S){ye(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(S),this.restore()),w=ie.applyTransform([y.width,0],f)[0]*i+E,t.translate(w,0),r.x+=w*u}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,o){this.ctx.rect(r,s,i-r,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],s=this.baseTransform||it(this.ctx),i={createCanvasGraphics:o=>new qS(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Aw(e,r,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){const s=ie.makeHexColor(e,t,r);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,r){const s=ie.makeHexColor(e,t,r);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=A$(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Js(t),Rn.SHADING);const s=Js(t);if(s){const{width:i,height:o}=t.canvas,[a,l,c,u]=ie.getAxialAlignedBoundingBox([0,0,i,o],s);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ze("Should not call beginInlineImage")}beginImageData(){ze("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=it(this.ctx),t)){const r=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],r,s),this.current.updateRectMinMax(it(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Yy("TODO: Support non-isolated groups."),e.knockout&&ye("Knockout groups not supported.");const r=it(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=ie.getAxialAlignedBoundingBox(e.bbox,it(t));const i=[0,0,t.canvas.width,t.canvas.height];s=ie.intersect(s,i)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,l,c),p=f.context;p.translate(-o,-a),p.transform(...r),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Yh(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=it(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=ie.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(P(this,aa,bw).call(this),Qg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[l,c]=ie.singularValueDecompose2dScale(it(this.ctx)),{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),p=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:g,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),Qg(this.ctx)}else Qg(this.ctx),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.endPath()}this.current=new O1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),P(this,aa,Sw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=x$(e)),s.compiled)){s.compiled(r);return}const i=this._createMaskCanvas(e),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=it(a);a.transform(t,r,s,i,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,f=o.length;u<f;u+=2){const p=ie.transform(l,[t,r,s,i,o[u],o[u+1]]),[g,m]=ie.applyTransform([0,0],p);a.drawImage(c.canvas,g,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:o,width:a,height:l,transform:c}=i,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=u.context;f.save();const p=this.getObject(o,i);V1(f,p),f.globalCompositeOperation="source-in",f.fillStyle=s?r.getPattern(f,this,Js(t),Rn.FILL):r,f.fillRect(0,0,a,l),f.restore(),t.save(),t.transform(...c),t.scale(1,-1),Yg(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ye("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){ye("Dependent image isn't ready yet");return}const o=i.width,a=i.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[t,0,0,r,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;if(this.save(),!wn){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/t,-1/r);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,r).context;F1(l,e),i=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(i,Js(s));s.imageSmoothingEnabled=B1(it(s),e.interpolate),Yg(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o).context;F1(l,e),s=this.applyTransferMapsToCanvas(l)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),Yg(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===j1?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=it(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let o,a;if(r===0&&s===0){const l=Math.abs(t),c=Math.abs(i);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,f=c*e;o=u<1?1/u:1,a=f<1?1/f:1}}else{const l=Math.abs(t*i-r*s),c=Math.hypot(t,r),u=Math.hypot(s,i);if(e===0)o=u/l,a=c/l;else{const f=e*l;o=u>f?u/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=r||1,s===1&&i===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(s,i),o.length>0){const a=Math.max(s,i);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};aa=new WeakSet,bw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Sw=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Wc=qS;for(const n in $r)Wc.prototype[n]!==void 0&&(Wc.prototype[$r[n]]=Wc.prototype[n]);var Wf,Gf;class Di{static get workerPort(){return h(this,Wf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,Wf,e)}static get workerSrc(){return h(this,Gf)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,Gf,e)}}Wf=new WeakMap,Gf=new WeakMap,I(Di,Wf,null),I(Di,Gf,"");const Jg={UNKNOWN:0,DATA:1,ERROR:2},bt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function tr(n){switch(n instanceof Error||typeof n=="object"&&n!==null||ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Zl(n.message);case"MissingPDFException":return new Jl(n.message);case"PasswordException":return new YE(n.message,n.code);case"UnexpectedResponseException":return new Qy(n.message,n.status);case"UnknownErrorException":return new QE(n.message,n.details);default:return new QE(n.message,n.toString())}}var Os,LL,ML,km;class cd{constructor(e,t,r){I(this,Os);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const i=s.data;if(i.targetName!==this.sourceName)return;if(i.stream){P(this,Os,ML).call(this,i);return}if(i.callback){const a=i.callbackId,l=this.callbackCapabilities[a];if(!l)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],i.callback===Jg.DATA)l.resolve(i.data);else if(i.callback===Jg.ERROR)l.reject(tr(i.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[i.action];if(!o)throw new Error(`Unknown action from worker: ${i.action}`);if(i.callbackId){const a=this.sourceName,l=i.sourceName;new Promise(function(c){c(o(i.data))}).then(function(c){r.postMessage({sourceName:a,targetName:l,callback:Jg.DATA,callbackId:i.callbackId,data:c})},function(c){r.postMessage({sourceName:a,targetName:l,callback:Jg.ERROR,callbackId:i.callbackId,reason:tr(c)})});return}if(i.streamId){P(this,Os,LL).call(this,i);return}o(i.data)},r.addEventListener("message",this._onComObjOnMessage)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:c.desiredSize},s),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[i].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:bt.PULL,streamId:i,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Dt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[i].cancelCall=u,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:bt.CANCEL,streamId:i,reason:tr(c)}),u.promise}},r)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Os=new WeakSet,LL=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:bt.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:bt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Dt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:bt.ERROR,streamId:t,reason:tr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(a(e.data,l))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.START_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:bt.START_COMPLETE,streamId:t,reason:tr(c)})})},ML=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case bt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(tr(e.reason));break;case bt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(tr(e.reason));break;case bt.PULL:if(!a){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){var c;l((c=a.onPull)==null?void 0:c.call(a))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,success:!0})},function(l){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,reason:tr(l)})});break;case bt.ENQUEUE:if(Dt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case bt.CLOSE:if(Dt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),P(this,Os,km).call(this,o,t);break;case bt.ERROR:Dt(o,"error should have stream controller"),o.controller.error(tr(e.reason)),P(this,Os,km).call(this,o,t);break;case bt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(tr(e.reason)),P(this,Os,km).call(this,o,t);break;case bt.CANCEL:if(!a)break;new Promise(function(l){var c;l((c=a.onCancel)==null?void 0:c.call(a,tr(e.reason)))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){i.postMessage({sourceName:r,targetName:s,stream:bt.CANCEL_COMPLETE,streamId:t,reason:tr(l)})}),a.sinkCapability.reject(tr(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},km=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Ja,qf;class k${constructor({parsedData:e,rawData:t}){I(this,Ja);I(this,qf);x(this,Ja,e),x(this,qf,t)}getRaw(){return h(this,qf)}get(e){return h(this,Ja).get(e)??null}getAll(){return iS(h(this,Ja))}has(e){return h(this,Ja).has(e)}}Ja=new WeakMap,qf=new WeakMap;const ro=Symbol("INTERNAL");var Kf,Xf,Yf,du;class L${constructor(e,{name:t,intent:r,usage:s}){I(this,Kf,!1);I(this,Xf,!1);I(this,Yf,!1);I(this,du,!0);x(this,Kf,!!(e&xr.DISPLAY)),x(this,Xf,!!(e&xr.PRINT)),this.name=t,this.intent=r,this.usage=s}get visible(){if(h(this,Yf))return h(this,du);if(!h(this,du))return!1;const{print:e,view:t}=this.usage;return h(this,Kf)?(t==null?void 0:t.viewState)!=="OFF":h(this,Xf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==ro&&ze("Internal method `_setVisible` called."),x(this,Yf,r),x(this,du,t)}}Kf=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,du=new WeakMap;var mo,$e,fu,pu,Qf,Tw;class M${constructor(e,t=xr.DISPLAY){I(this,Qf);I(this,mo,null);I(this,$e,new Map);I(this,fu,null);I(this,pu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,pu,e.order);for(const r of e.groups)h(this,$e).set(r.id,new L$(t,r));if(e.baseState==="OFF")for(const r of h(this,$e).values())r._setVisible(ro,!1);for(const r of e.on)h(this,$e).get(r)._setVisible(ro,!0);for(const r of e.off)h(this,$e).get(r)._setVisible(ro,!1);x(this,fu,this.getHash())}}isVisible(e){if(h(this,$e).size===0)return!0;if(!e)return Yy("Optional content group not defined."),!0;if(e.type==="OCG")return h(this,$e).has(e.id)?h(this,$e).get(e.id).visible:(ye(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,Qf,Tw).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!h(this,$e).has(t))return ye(`Optional content group not found: ${t}`),!0;if(h(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!h(this,$e).has(t))return ye(`Optional content group not found: ${t}`),!0;if(!h(this,$e).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!h(this,$e).has(t))return ye(`Optional content group not found: ${t}`),!0;if(!h(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!h(this,$e).has(t))return ye(`Optional content group not found: ${t}`),!0;if(h(this,$e).get(t).visible)return!1}return!0}return ye(`Unknown optional content policy ${e.policy}.`),!0}return ye(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const r=h(this,$e).get(e);if(!r){ye(`Optional content group not found: ${e}`);return}r._setVisible(ro,!!t,!0),x(this,mo,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=h(this,$e).get(s);if(i)switch(r){case"ON":i._setVisible(ro,!0);break;case"OFF":i._setVisible(ro,!1);break;case"Toggle":i._setVisible(ro,!i.visible);break}}x(this,mo,null)}get hasInitialVisibility(){return h(this,fu)===null||this.getHash()===h(this,fu)}getOrder(){return h(this,$e).size?h(this,pu)?h(this,pu).slice():[...h(this,$e).keys()]:null}getGroups(){return h(this,$e).size>0?iS(h(this,$e)):null}getGroup(e){return h(this,$e).get(e)||null}getHash(){if(h(this,mo)!==null)return h(this,mo);const e=new RL;for(const[t,r]of h(this,$e))e.update(`${t}:${r.visible}`);return x(this,mo,e.hexdigest())}}mo=new WeakMap,$e=new WeakMap,fu=new WeakMap,pu=new WeakMap,Qf=new WeakSet,Tw=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let o;if(Array.isArray(i))o=P(this,Qf,Tw).call(this,i);else if(h(this,$e).has(i))o=h(this,$e).get(i).visible;else return ye(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class N${constructor(e,{disableRange:t=!1,disableStream:r=!1}){Dt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Dt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new D$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new O$(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class D${constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=uS(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O${constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function F$(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),i(u)}if(t=o(n),t){const u=c(t);return i(u)}if(t=r("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),i(u)}function r(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),g=Jy(f);f=p.decode(g),e=!1}catch{}}return f}function i(u){return e&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),e&&(u=s("iso-8859-1",u))),u}function o(u){const f=[];let p;const g=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(u))!==null;){let[,y,w,_]=p;if(y=parseInt(y,10),y in f){if(y===0)break;continue}f[y]=[w,_]}const m=[];for(let y=0;y<f.length&&y in f;++y){let[w,_]=f[y];_=a(_),w&&(_=unescape(_),y===0&&(_=l(_))),m.push(_)}return m.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const g=f[p].indexOf('"');g!==-1&&(f[p]=f[p].slice(0,g),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function l(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),m=u.slice(f+1).replace(/^[^']*'/,"");return s(p,m)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,g,m){if(g==="q"||g==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,w){return String.fromCharCode(parseInt(w,16))}),s(p,m);try{m=atob(m)}catch{}return s(p,m)})}return""}function fS({getResponseHeader:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function pS(n){const e=n("Content-Disposition");if(e){let t=F$(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(uS(t))return t}return null}function r_(n,e){return n===404||n===0&&e.startsWith("file:")?new Jl('Missing PDF "'+e+'".'):new Qy(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function NL(n){return n===200||n===206}function DL(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function OL(n){const e=new Headers;for(const t in n){const r=n[t];r!==void 0&&e.append(t,r)}return e}function FL(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ye(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class U1{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new V$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new B$(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class V${constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=OL(this._stream.httpHeaders);const r=t.url;fetch(r,DL(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!NL(s.status))throw r_(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const i=l=>s.headers.get(l),{allowRangeRequests:o,suggestedLength:a}=fS({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=pS(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Zl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:FL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class B${constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=OL(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${r-1}`);const i=s.url;fetch(i,DL(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!NL(o.status))throw r_(o.status,i);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:FL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const P0=200,I0=206;function j$(n){const e=n.response;return typeof e!="string"?e:Jy(e).buffer}class U${constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const s={begin:e,end:t};for(const i in r)s[i]=r[i];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const i in this.httpHeaders){const o=this.httpHeaders[i];o!==void 0&&t.setRequestHeader(i,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=I0):s.expectedStatus=P0,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){var l,c,u;const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(l=r.onError)==null||l.call(r,s.status);return}const i=s.status||P0;if(!(i===P0&&r.expectedStatus===I0)&&i!==r.expectedStatus){(c=r.onError)==null||c.call(r,s.status);return}const a=j$(s);if(i===I0){const f=s.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);r.onDone({begin:parseInt(p[1],10),chunk:a})}else a?r.onDone({begin:0,chunk:a}):(u=r.onError)==null||u.call(r,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class $${constructor(e){this._source=e,this._manager=new U$(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new z$(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new H$(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class z${constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=o=>t.getResponseHeader(o),{allowRangeRequests:s,suggestedLength:i}=fS({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=pS(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=r_(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H${constructor(e,t,r){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=r_(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const VL=/^file:\/\/\/[a-zA-Z]:\//;function W$(n){const e=js.get("url"),t=e.parse(n);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(n)?e.parse(`file:///${n}`):(t.host||(t.protocol="file:"),t)}class G${constructor(e){this.source=e,this.url=W$(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new X$(this):new q$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new Y$(this,e,t):new K$(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class BL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Zl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class jL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Ov(n,e){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:e}}class q$ extends BL{constructor(e){super(e);const t=r=>{if(r.statusCode===404){const a=new Jl(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(r);const s=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:i,suggestedLength:o}=fS({getResponseHeader:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=o||this._contentLength,this._filename=pS(s)};if(this._request=null,this._url.protocol==="http:"){const r=js.get("http");this._request=r.request(Ov(this._url,e.httpHeaders),t)}else{const r=js.get("https");this._request=r.request(Ov(this._url,e.httpHeaders),t)}this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class K$ extends jL{constructor(e,t,r){super(e),this._httpHeaders={};for(const i in e.httpHeaders){const o=e.httpHeaders[i];o!==void 0&&(this._httpHeaders[i]=o)}this._httpHeaders.Range=`bytes=${t}-${r-1}`;const s=i=>{if(i.statusCode===404){const o=new Jl(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(i)};if(this._request=null,this._url.protocol==="http:"){const i=js.get("http");this._request=i.request(Ov(this._url,this._httpHeaders),s)}else{const i=js.get("https");this._request=i.request(Ov(this._url,this._httpHeaders),s)}this._request.on("error",i=>{this._storedError=i}),this._request.end()}}class X$ extends BL{constructor(e){super(e);let t=decodeURIComponent(this._url.path);VL.test(this._url.href)&&(t=t.replace(/^\//,""));const r=js.get("fs");r.promises.lstat(t).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(t)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Jl(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class Y$ extends jL{constructor(e,t,r){super(e);let s=decodeURIComponent(this._url.path);VL.test(this._url.href)&&(s=s.replace(/^\//,""));const i=js.get("fs");this._setReadableStream(i.createReadStream(s,{start:t,end:r-1}))}}const Q$=1e5,On=30,J$=.8;var cR,vo,Vn,Jf,Zf,Za,gi,ep,tp,el,gu,mu,yo,vu,np,yu,tl,rp,sp,Mt,nl,rl,_o,_u,qi,UL,$L,Cw,Fs,Lm,zL,HL;let Fv=(Mt=class{constructor({textContentSource:e,container:t,viewport:r}){I(this,qi);I(this,vo,Promise.withResolvers());I(this,Vn,null);I(this,Jf,!1);I(this,Zf,!!((cR=globalThis.FontInspector)!=null&&cR.enabled));I(this,Za,null);I(this,gi,null);I(this,ep,0);I(this,tp,0);I(this,el,null);I(this,gu,null);I(this,mu,0);I(this,yo,0);I(this,vu,Object.create(null));I(this,np,[]);I(this,yu,null);I(this,tl,[]);I(this,rp,new WeakMap);I(this,sp,null);var l;if(e instanceof ReadableStream)x(this,yu,e);else if(typeof e=="object")x(this,yu,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,Vn,x(this,gu,t)),x(this,yo,r.scale*(globalThis.devicePixelRatio||1)),x(this,mu,r.rotation),x(this,gi,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:a}=r.rawDims;x(this,sp,[1,0,0,-1,-o,a+i]),x(this,tp,s),x(this,ep,i),P(l=Mt,Fs,zL).call(l),$l(t,r),h(this,vo).promise.catch(()=>{}).then(()=>{h(Mt,_u).delete(this),x(this,gi,null),x(this,vu,null)})}render(){const e=()=>{h(this,el).read().then(({value:t,done:r})=>{if(r){h(this,vo).resolve();return}h(this,Za)??x(this,Za,t.lang),Object.assign(h(this,vu),t.styles),P(this,qi,UL).call(this,t.items),e()},h(this,vo).reject)};return x(this,el,h(this,yu).getReader()),h(Mt,_u).add(this),e(),h(this,vo).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==h(this,mu)&&(t==null||t(),x(this,mu,s),$l(h(this,gu),{rotation:s})),r!==h(this,yo)){t==null||t(),x(this,yo,r);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:P(i=Mt,Fs,Lm).call(i,h(this,Za))};for(const a of h(this,tl))o.properties=h(this,rp).get(a),o.div=a,P(this,qi,Cw).call(this,o)}}cancel(){var t;const e=new Zl("TextLayer task cancelled.");(t=h(this,el))==null||t.cancel(e).catch(()=>{}),x(this,el,null),h(this,vo).reject(e)}get textDivs(){return h(this,tl)}get textContentItemsStr(){return h(this,np)}static cleanup(){if(!(h(this,_u).size>0)){h(this,nl).clear();for(const{canvas:e}of h(this,rl).values())e.remove();h(this,rl).clear()}}},vo=new WeakMap,Vn=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,Za=new WeakMap,gi=new WeakMap,ep=new WeakMap,tp=new WeakMap,el=new WeakMap,gu=new WeakMap,mu=new WeakMap,yo=new WeakMap,vu=new WeakMap,np=new WeakMap,yu=new WeakMap,tl=new WeakMap,rp=new WeakMap,sp=new WeakMap,nl=new WeakMap,rl=new WeakMap,_o=new WeakMap,_u=new WeakMap,qi=new WeakSet,UL=function(e){var s,i;if(h(this,Jf))return;(i=h(this,gi)).ctx??(i.ctx=P(s=Mt,Fs,Lm).call(s,h(this,Za)));const t=h(this,tl),r=h(this,np);for(const o of e){if(t.length>Q$){ye("Ignoring additional textDivs for performance reasons."),x(this,Jf,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=h(this,Vn);x(this,Vn,document.createElement("span")),h(this,Vn).classList.add("markedContent"),o.id!==null&&h(this,Vn).setAttribute("id",`${o.id}`),a.append(h(this,Vn))}else o.type==="endMarkedContent"&&x(this,Vn,h(this,Vn).parentNode);continue}r.push(o.str),P(this,qi,$L).call(this,o)}},$L=function(e){var y;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};h(this,tl).push(t);const s=ie.transform(h(this,sp),e.transform);let i=Math.atan2(s[1],s[0]);const o=h(this,vu)[e.fontName];o.vertical&&(i+=Math.PI/2);const a=h(this,Zf)&&o.fontSubstitution||o.fontFamily,l=Math.hypot(s[2],s[3]),c=l*P(y=Mt,Fs,HL).call(y,a,h(this,Za));let u,f;i===0?(u=s[4],f=s[5]-c):(u=s[4]+c*Math.sin(i),f=s[5]-c*Math.cos(i));const p="calc(var(--scale-factor)*",g=t.style;h(this,Vn)===h(this,gu)?(g.left=`${(100*u/h(this,tp)).toFixed(2)}%`,g.top=`${(100*f/h(this,ep)).toFixed(2)}%`):(g.left=`${p}${u.toFixed(2)}px)`,g.top=`${p}${f.toFixed(2)}px)`),g.fontSize=`${p}${(h(Mt,_o)*l).toFixed(2)}px)`,g.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,h(this,Zf)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),_=Math.abs(e.transform[3]);w!==_&&Math.max(w,_)/Math.min(w,_)>1.5&&(m=!0)}if(m&&(r.canvasWidth=o.vertical?e.height:e.width),h(this,rp).set(t,r),h(this,gi).div=t,h(this,gi).properties=r,P(this,qi,Cw).call(this,h(this,gi)),r.hasText&&h(this,Vn).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),h(this,Vn).append(w)}},Cw=function(e){const{div:t,properties:r,ctx:s,prevFontSize:i,prevFontFamily:o}=e,{style:a}=t;let l="";if(h(Mt,_o)>1&&(l=`scale(${1/h(Mt,_o)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=a,{canvasWidth:u,fontSize:f}=r;(i!==f||o!==c)&&(s.font=`${f*h(this,yo)}px ${c}`,e.prevFontSize=f,e.prevFontFamily=c);const{width:p}=s.measureText(t.textContent);p>0&&(l=`scaleX(${u*h(this,yo)/p}) ${l}`)}r.angle!==0&&(l=`rotate(${r.angle}deg) ${l}`),l.length>0&&(a.transform=l)},Fs=new WeakSet,Lm=function(e=null){let t=h(this,rl).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,rl).set(e,t)}return t},zL=function(){if(h(this,_o)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),x(this,_o,e.getBoundingClientRect().height),e.remove()},HL=function(e,t){const r=h(this,nl).get(e);if(r)return r;const s=P(this,Fs,Lm).call(this,t),i=s.font;s.canvas.width=s.canvas.height=On,s.font=`${On}px ${e}`;const o=s.measureText("");let a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(a){const f=a/(a+l);return h(this,nl).set(e,f),s.canvas.width=s.canvas.height=0,s.font=i,f}s.strokeStyle="red",s.clearRect(0,0,On,On),s.strokeText("g",0,0);let c=s.getImageData(0,0,On,On).data;l=0;for(let f=c.length-1-3;f>=0;f-=4)if(c[f]>0){l=Math.ceil(f/4/On);break}s.clearRect(0,0,On,On),s.strokeText("A",0,On),c=s.getImageData(0,0,On,On).data,a=0;for(let f=0,p=c.length;f<p;f+=4)if(c[f]>0){a=On-Math.floor(f/4/On);break}s.canvas.width=s.canvas.height=0,s.font=i;const u=a?a/(a+l):J$;return h(this,nl).set(e,u),u},I(Mt,Fs),I(Mt,nl,new Map),I(Mt,rl,new Map),I(Mt,_o,null),I(Mt,_u,new Set),Mt);function Z$(){nL("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:n,container:e,viewport:t,...r}=arguments[0],s=Object.keys(r);s.length>0&&ye("Ignoring `renderTextLayer` parameters: "+s.join(", "));const i=new Fv({textContentSource:n,container:e,viewport:t}),{textDivs:o,textContentItemsStr:a}=i;return{promise:i.render(),textDivs:o,textContentItemsStr:a}}function e3(){nL("`updateTextLayer`, please use `TextLayer` instead.")}class af{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(af.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const c of i.children)s(c)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const t3=65536,n3=100,r3=5e3,s3=wn?g$:n$,i3=wn?m$:eL,o3=wn?p$:t$,a3=wn?v$:tL;function l3(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new xw,{docId:t}=e,r=n.url?c3(n.url):null,s=n.data?u3(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof WL?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:t3;let u=n.worker instanceof Gc?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!cS(n.docBaseUrl)?n.docBaseUrl:null,g=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,y=n.CMapReaderFactory||i3,w=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,_=n.StandardFontDataFactory||a3,E=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,R=n.isEvalSupported!==!1,D=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!wn,F=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,C=typeof n.disableFontFace=="boolean"?n.disableFontFace:wn,T=n.fontExtraProperties===!0,k=n.enableXfa===!0,M=n.ownerDocument||globalThis.document,O=n.disableRange===!0,B=n.disableStream===!0,N=n.disableAutoFetch===!0,q=n.pdfBug===!0,re=n.enableHWA===!0,Z=l?l.length:n.length??NaN,W=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!wn&&!C,U=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:y===eL&&_===tL&&g&&w&&od(g,document.baseURI)&&od(w,document.baseURI),z=n.canvasFactory||new s3({ownerDocument:M,enableHWA:re}),X=n.filterFactory||new o3({docId:t,ownerDocument:M}),ce=null;HU(f);const se={canvasFactory:z,filterFactory:X};if(U||(se.cMapReaderFactory=new y({baseUrl:g,isCompressed:m}),se.standardFontDataFactory=new _({baseUrl:w})),!u){const Ue={verbosity:f,port:Di.workerPort};u=Ue.port?Gc.fromPort(Ue):new Gc(Ue),e._worker=u}const ae={docId:t,apiVersion:"4.4.168",data:s,password:a,disableAutoFetch:N,rangeChunkSize:c,length:Z,docBaseUrl:p,enableXfa:k,evaluatorOptions:{maxImageSize:S,disableFontFace:C,ignoreErrors:E,isEvalSupported:R,isOffscreenCanvasSupported:D,canvasMaxAreaInBytes:F,fontExtraProperties:T,useSystemFonts:W,cMapUrl:U?g:null,standardFontDataUrl:U?w:null}},je={disableFontFace:C,fontExtraProperties:T,ownerDocument:M,pdfBug:q,styleElement:ce,loadingParams:{disableAutoFetch:N,enableXfa:k}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ue=u.messageHandler.sendWithPromise("GetDocRequest",ae,s?[s.buffer]:null);let Pe;if(l)Pe=new N$(l,{disableRange:O,disableStream:B});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");Pe=(ut=>wn?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&od(ut.url)?new U1(ut):new G$(ut):od(ut.url)?new U1(ut):new $$(ut))({url:r,length:Z,httpHeaders:i,withCredentials:o,rangeChunkSize:c,disableRange:O,disableStream:B})}return Ue.then(fe=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ut=new cd(t,fe,u.port),Je=new p3(ut,e,Pe,je,se);e._transport=Je,ut.send("Ready",null)})}).catch(e._capability.reject),e}function c3(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(wn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function u3(n){if(wn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Jy(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $1(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var hy;const dy=class dy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${er(dy,hy)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};hy=new WeakMap,I(dy,hy,0);let xw=dy,WL=class{constructor(e,t,r=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class h3{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ke(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Eo,mi,Ir,yc,Mm;class d3{constructor(e,t,r,s=!1){I(this,Ir);I(this,Eo,null);I(this,mi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new R1:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new GL,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new tg({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ke(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:s=co.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null}){var S,R;(S=this._stats)==null||S.time("Overall");const f=this._transport.getRenderingIntent(r,s,u),{renderingIntent:p,cacheKey:g}=f;x(this,mi,!1),P(this,Ir,Mm).call(this),a||(a=this._transport.getOptionalContentConfig(p));let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const y=!!(p&xr.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(f));const w=D=>{var F;m.renderTasks.delete(_),(this._maybeCleanupAfterRender||y)&&x(this,mi,!0),P(this,Ir,yc).call(this,!y),D?(_.capability.reject(D),this._abortOperatorList({intentState:m,reason:D instanceof Error?D:new Error(D)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new Pw({callback:w,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c});(m.renderTasks||(m.renderTasks=new Set)).add(_);const E=_.task;return Promise.all([m.displayReadyCapability.promise,a]).then(([D,F])=>{var C;if(this.destroyed){w();return}if((C=this._stats)==null||C.time("Rendering"),!(F.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:D,optionalContentConfig:F}),_.operatorListChanged()}).catch(w),E}getOperatorList({intent:e="display",annotationMode:t=co.ENABLE,printAnnotationStorage:r=null}={}){var l;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))}const i=this._transport.getRenderingIntent(e,t,r,!0);let o=this._intentStates.get(i.cacheKey);o||(o=Object.create(null),this._intentStates.set(i.cacheKey,o));let a;return o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(i)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>af.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),x(this,mi,!1),P(this,Ir,Mm).call(this),Promise.all(e)}cleanup(e=!1){x(this,mi,!0);const t=P(this,Ir,yc).call(this,!1);return e&&t&&this._stats&&(this._stats=new R1),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&P(this,Ir,yc).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r}){const{map:s,transfer:i}=r,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},i).getReader(),l=this._intentStates.get(t);l.streamReader=a;const c=()=>{a.read().then(({value:u,done:f})=>{if(f){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,l),c())},u=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const f of l.renderTasks)f.operatorListChanged();P(this,Ir,yc).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(u);else if(l.opListReadCapability)l.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof lS){let s=n3;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Zl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Eo=new WeakMap,mi=new WeakMap,Ir=new WeakSet,yc=function(e=!1){if(P(this,Ir,Mm).call(this),!h(this,mi)||this.destroyed)return!1;if(e)return x(this,Eo,setTimeout(()=>{x(this,Eo,null),P(this,Ir,yc).call(this,!1)},r3)),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,mi,!1),!0},Mm=function(){h(this,Eo)&&(clearTimeout(h(this,Eo)),x(this,Eo,null))};var sl,fy;class f3{constructor(){I(this,sl,new Set);I(this,fy,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};h(this,fy).then(()=>{for(const s of h(this,sl))s.call(this,r)})}addEventListener(e,t){h(this,sl).add(t)}removeEventListener(e,t){h(this,sl).delete(t)}terminate(){h(this,sl).clear()}}sl=new WeakMap,fy=new WeakMap;const oi={isWorkerDisabled:!1,fakeWorkerId:0};wn&&(oi.isWorkerDisabled=!0,Di.workerSrc||(Di.workerSrc="./pdf.worker.mjs")),oi.isSameOrigin=function(n,e){let t;try{if(t=new URL(n),!t.origin||t.origin==="null")return!1}catch{return!1}const r=new URL(e,t);return t.origin===r.origin},oi.createCDNWrapper=function(n){const e=`await import("${n}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var il,Eu,Nm,wu,Dm;const nr=class nr{constructor({name:e=null,port:t=null,verbosity:r=WU()}={}){I(this,Eu);var s;if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=h(nr,il))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(h(nr,il)||x(nr,il,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return wn?Promise.all([js.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new cd("main","worker",e),this._messageHandler.on("ready",function(){}),P(this,Eu,Nm).call(this)}_initialize(){if(oi.isWorkerDisabled||h(nr,wu,Dm)){this._setupFakeWorker();return}let{workerSrc:e}=nr;try{oi.isSameOrigin(window.location.href,e)||(e=oi.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new cd("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:i.signal}),r.on("test",a=>{if(i.abort(),this.destroyed||!a){s();return}this._messageHandler=r,this._port=t,this._webWorker=t,P(this,Eu,Nm).call(this)}),r.on("ready",a=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{Yy("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){oi.isWorkerDisabled||(ye("Setting up fake worker."),oi.isWorkerDisabled=!0),nr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new f3;this._port=t;const r=`fake${oi.fakeWorkerId++}`,s=new cd(r+"_worker",r,t);e.setup(s,t),this._messageHandler=new cd(r,r+"_worker",t),P(this,Eu,Nm).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=h(nr,il))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var r;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(r=h(this,il))==null?void 0:r.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new nr(e)}static get workerSrc(){if(Di.workerSrc)return Di.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ke(this,"_setupFakeWorkerGlobal",(async()=>h(this,wu,Dm)?h(this,wu,Dm):(await import(this.workerSrc)).WorkerMessageHandler)())}};il=new WeakMap,Eu=new WeakSet,Nm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},wu=new WeakSet,Dm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},I(nr,wu),I(nr,il);let Gc=nr;var vi,Es,Au,bu,ws,ol,ud;class p3{constructor(e,t,r,s,i){I(this,ol);I(this,vi,new Map);I(this,Es,new Map);I(this,Au,new Map);I(this,bu,new Map);I(this,ws,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new GL,this.fontLoader=new d$({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ke(this,"annotationStorage",new dS)}getRenderingIntent(e,t=co.ENABLE,r=null,s=!1){let i=xr.DISPLAY,o=_w;switch(e){case"any":i=xr.ANY;break;case"display":break;case"print":i=xr.PRINT;break;default:ye(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case co.DISABLE:i+=xr.ANNOTATIONS_DISABLE;break;case co.ENABLE:break;case co.ENABLE_FORMS:i+=xr.ANNOTATIONS_FORMS;break;case co.ENABLE_STORAGE:i+=xr.ANNOTATIONS_STORAGE,o=(i&xr.PRINT&&r instanceof IL?r:this.annotationStorage).serializable;break;default:ye(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(i+=xr.OPLIST),{renderingIntent:i,cacheKey:`${i}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=h(this,ws))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of h(this,Es).values())e.push(s._destroy());h(this,Es).clear(),h(this,Au).clear(),h(this,bu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),h(this,vi).clear(),this.filterFactory.destroy(),Fv.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Zl("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}Dt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",r=>{const s=Promise.withResolvers(),i=this._fullReader;return i.headersReady.then(()=>{var o;(!i.isStreamingSupported||!i.isRangeSupported)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),i.onProgress=a=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:a.loaded,total:a.total})}),s.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(r,s)=>{Dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){s.close();return}Dt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new h3(r,this))}),e.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new YE(r.message,r.code);break;case"InvalidPDFException":s=new Yk(r.message);break;case"MissingPDFException":s=new Jl(r.message);break;case"UnexpectedResponseException":s=new Qy(r.message,r.status);break;case"UnknownErrorException":s=new QE(r.message,r.details);break;default:ze("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",r=>{if(x(this,ws,Promise.withResolvers()),t.onPassword){const s=i=>{i instanceof Error?h(this,ws).reject(i):h(this,ws).resolve({password:i})};try{t.onPassword(s,r.code)}catch(i){h(this,ws).reject(i)}}else h(this,ws).reject(new YE(r.message,r.code));return h(this,ws).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;h(this,Es).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in i){const g=i.error;ye(`Error during font loading: ${g}`),this.commonObjs.resolve(r,g);break}const u=c&&((o=globalThis.FontInspector)!=null&&o.enabled)?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,f=new f$(i,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:p}=i;Dt(p,"The imageRef must be defined.");for(const g of h(this,Es).values())for(const[,m]of g.objs)if((m==null?void 0:m.ref)===p)return m.dataLen?(this.commonObjs.resolve(r,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,o])=>{var l;if(this.destroyed)return;const a=h(this,Es).get(s);if(!a.objs.has(r)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":a.objs.resolve(r,o),(o==null?void 0:o.dataLen)>jU&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&ye("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=h(this,Au).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&h(this,bu).set(i.refStr,e);const o=new d3(t,i,this,this._params.pdfBug);return h(this,Es).set(t,o),o});return h(this,Au).set(t,s),s}getPageIndex(e){return $1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return P(this,ol,ud).call(this,"GetFieldObjects")}hasJSActions(){return P(this,ol,ud).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return P(this,ol,ud).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,ol,ud).call(this,"GetOptionalContentConfig").then(t=>new M$(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=h(this,vi).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new k$(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return h(this,vi).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of h(this,Es).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),h(this,vi).clear(),this.filterFactory.destroy(!0),Fv.cleanup()}}cachedPageNumber(e){if(!$1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return h(this,bu).get(t)??null}}vi=new WeakMap,Es=new WeakMap,Au=new WeakMap,bu=new WeakMap,ws=new WeakMap,ol=new WeakSet,ud=function(e,t=null){const r=h(this,vi).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return h(this,vi).set(e,s),s};const Zg=Symbol("INITIAL_DATA");var Kr,ip,Rw;class GL{constructor(){I(this,ip);I(this,Kr,Object.create(null))}get(e,t=null){if(t){const s=P(this,ip,Rw).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=h(this,Kr)[e];if(!r||r.data===Zg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=h(this,Kr)[e];return!!t&&t.data!==Zg}resolve(e,t=null){const r=P(this,ip,Rw).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in h(this,Kr)){const{data:r}=h(this,Kr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}x(this,Kr,Object.create(null))}*[Symbol.iterator](){for(const e in h(this,Kr)){const{data:t}=h(this,Kr)[e];t!==Zg&&(yield[e,t])}}}Kr=new WeakMap,ip=new WeakSet,Rw=function(e){var t;return(t=h(this,Kr))[e]||(t[e]={...Promise.withResolvers(),data:Zg})};var wo;class g3{constructor(e){I(this,wo,null);x(this,wo,e),this.onContinue=null}get promise(){return h(this,wo).capability.promise}cancel(e=0){h(this,wo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=h(this,wo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=h(this,wo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}wo=new WeakMap;var Ao,al;const Pa=class Pa{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){I(this,Ao,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new g3(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(h(Pa,al).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(Pa,al).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:o}=this.params;this.gfx=new Wc(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),h(this,Ao)&&(window.cancelAnimationFrame(h(this,Ao)),x(this,Ao,null)),h(Pa,al).delete(this._canvas),this.callback(e||new lS(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Ao,window.requestAnimationFrame(()=>{x(this,Ao,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(Pa,al).delete(this._canvas),this.callback())))}};Ao=new WeakMap,al=new WeakMap,I(Pa,al,new WeakSet);let Pw=Pa;const m3="4.4.168",v3="19fbc8998";function z1(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Qh(n){return Math.max(0,Math.min(255,255*n))}class H1{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Qh(e),[e,e,e]}static G_HTML([e]){const t=z1(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Qh)}static RGB_HTML(e){return`#${e.map(z1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[Qh(1-Math.min(1,e+s)),Qh(1-Math.min(1,r+s)),Qh(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,o=1-r,a=Math.min(s,i,o);return["CMYK",s,i,o,a]}}class qL{static setupStorage(e,t,r,s,i){const o=s.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var f,p;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:r});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);o.append(g),a&&af.shouldBuildText(s.name)&&c.push(g)}return{textDivs:c}}const u=[[s,-1,o]];for(;u.length>0;){const[g,m,y]=u.at(-1);if(m+1===g.children.length){u.pop();continue}const w=g.children[++u.at(-1)[1]];if(w===null)continue;const{name:_}=w;if(_==="#text"){const S=document.createTextNode(w.value);c.push(S),y.append(S);continue}const E=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,_):document.createElement(_);if(y.append(E),w.attributes&&this.setAttributes({html:E,element:w,storage:t,intent:i,linkService:r}),((p=w.children)==null?void 0:p.length)>0)u.push([w,-1,E]);else if(w.value){const S=document.createTextNode(w.value);a&&af.shouldBuildText(_)&&c.push(S),E.append(S)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const sg=1e3,y3=9,Hl=new WeakSet;function Oi(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class _3{static create(e){switch(e.data.annotationType){case Rt.LINK:return new KL(e);case Rt.TEXT:return new E3(e);case Rt.WIDGET:switch(e.data.fieldType){case"Tx":return new w3(e);case"Btn":return e.data.radioButton?new QL(e):e.data.checkBox?new b3(e):new S3(e);case"Ch":return new T3(e);case"Sig":return new A3(e)}return new ec(e);case Rt.POPUP:return new kw(e);case Rt.FREETEXT:return new nM(e);case Rt.LINE:return new x3(e);case Rt.SQUARE:return new R3(e);case Rt.CIRCLE:return new P3(e);case Rt.POLYLINE:return new rM(e);case Rt.CARET:return new k3(e);case Rt.INK:return new sM(e);case Rt.POLYGON:return new I3(e);case Rt.HIGHLIGHT:return new L3(e);case Rt.UNDERLINE:return new M3(e);case Rt.SQUIGGLY:return new N3(e);case Rt.STRIKEOUT:return new D3(e);case Rt.STAMP:return new iM(e);case Rt.FILEATTACHMENT:return new O3(e);default:return new wt(e)}}}var ll,Su,Tu,op,Iw;const KS=class KS{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){I(this,op);I(this,ll,null);I(this,Su,!1);I(this,Tu,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e!=null&&e.str||t!=null&&t.str||r!=null&&r.str)}get hasPopupData(){return KS._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;h(this,ll)||x(this,ll,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&P(this,op,Iw).call(this,t),(r=h(this,Tu))==null||r.popup.updateEdited(e)}resetEdited(){var e;h(this,ll)&&(P(this,op,Iw).call(this,h(this,ll).rect),(e=h(this,Tu))==null||e.popup.resetEdited(),x(this,ll,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof ec||(i.tabIndex=sg);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.popupRef&&i.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof kw){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,i),i}const{width:a,height:l}=Oi(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(y>0||w>0){const E=`calc(${y}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;o.borderRadius=E}else if(this instanceof QL){const E=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=E}switch(t.borderStyle.style){case Xh.SOLID:o.borderStyle="solid";break;case Xh.DASHED:o.borderStyle="dashed";break;case Xh.BEVELED:ye("Unimplemented border style: beveled");break;case Xh.INSET:ye("Unimplemented border style: inset");break;case Xh.UNDERLINE:o.borderBottomStyle="solid";break}const _=t.borderColor||null;_?(x(this,Su,!0),o.borderColor=ie.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):o.borderWidth=0}const c=ie.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:g}=s.rawDims;o.left=`${100*(c[0]-p)/u}%`,o.top=`${100*(c[1]-g)/f}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*a/u}%`,o.height=`${100*l/f}%`):this.setRotation(m,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:o}=Oi(this.data.rect);let a,l;e%180===0?(a=100*i/r,l=100*o/s):(a=100*o/r,l=100*i/s),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],o=i[0],a=i.slice(1);s.target.style[r]=H1[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:H1[`${o}_rgb`](a)})};return ke(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const o=r[s];if(o){const a={detail:{[s]:i},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,w,_,E]=e.subarray(2,6);if(s===y&&i===w&&t===_&&r===E)return}const{style:o}=this.container;let a;if(h(this,Su)){const{borderColor:y,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=s-t,c=i-r,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const g=u.createElement("clipPath"),m=`clippath_${this.data.id}`;g.setAttribute("id",m),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let y=2,w=e.length;y<w;y+=8){const _=e[y],E=e[y+1],S=e[y+2],R=e[y+3],D=u.createElement("rect"),F=(S-t)/l,C=(i-E)/c,T=(_-S)/l,k=(E-R)/c;D.setAttribute("x",F),D.setAttribute("y",C),D.setAttribute("width",T),D.setAttribute("height",k),g.append(D),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${C}" width="${T}" height="${k}"/>`)}h(this,Su)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const r=x(this,Tu,new kw({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(r.render())}render(){ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:o,exportValues:a}of s){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Hl.has(c)){ye(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==t&&Hl.has(s)&&r.push({id:o,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ll=new WeakMap,Su=new WeakMap,Tu=new WeakMap,op=new WeakSet,Iw=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;r==null||r.splice(0,4,...e);const{width:c,height:u}=Oi(e);t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,s===0?(t.width=`${100*c/i}%`,t.height=`${100*u/o}%`):this.setRotation(s)};let wt=KS;var pr,Sa,XL,YL;class KL extends wt{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});I(this,pr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(P(this,pr,XL).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(P(this,pr,YL).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&P(this,pr,Sa).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),P(this,pr,Sa).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const o=s.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),P(this,pr,Sa).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),P(this,pr,Sa).call(this),!this._fieldObjects){ye('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var f;s==null||s();const{fields:i,refs:o,include:a}=r,l=[];if(i.length!==0||o.length!==0){const p=new Set(o);for(const g of i){const m=this._fieldObjects[g]||[];for(const{id:y}of m)p.add(y)}for(const g of Object.values(this._fieldObjects))for(const m of g)p.has(m.id)===a&&l.push(m)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const c=this.annotationStorage,u=[];for(const p of l){const{id:g}=p;switch(u.push(g),p.type){case"text":{const y=p.defaultValue||"";c.setValue(g,{value:y});break}case"checkbox":case"radiobutton":{const y=p.defaultValue===p.exportValues;c.setValue(g,{value:y});break}case"combobox":case"listbox":{const y=p.defaultValue||"";c.setValue(g,{value:y});break}default:continue}const m=document.querySelector(`[data-element-id="${g}"]`);if(m){if(!Hl.has(m)){ye(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}pr=new WeakSet,Sa=function(){this.container.setAttribute("data-internal-link","")},XL=function(t,r,s=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(r.content,r.filename,s),!1},P(this,pr,Sa).call(this)},YL=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),P(this,pr,Sa).call(this)};class E3 extends wt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ec extends wt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return zn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(e,t,r,s){var i,o,a;for(const[l,c]of r)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,s),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ie.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||y3,i=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(T0*s))||1,f=c/u;o=Math.min(s,l(f/T0))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(c/T0))}i.fontSize=`calc(${o}px * var(--scale-factor))`,i.color=ie.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class w3 extends ec{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",c??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Hl.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=sg,this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(r,"value",p.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";r.value=u.userValue=g,u.formattedValue=null});let f=p=>{const{formattedValue:g}=u;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{var y;if(u.focused)return;const{target:m}=g;u.userValue&&(m.value=u.userValue),u.lastCommittedValue=m.value,u.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(y){u.userValue=y.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),y.target.value=u.userValue},formattedValue(y){const{formattedValue:w}=y.detail;u.formattedValue=w,w!=null&&y.target!==document.activeElement&&(y.target.value=w),e.setValue(t,{formattedValue:w})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var S;const{charLimit:w}=y.detail,{target:_}=y;if(w===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",w);let E=u.userValue;!E||E.length<=w||(E=E.slice(0,w),_.value=u.userValue=E,e.setValue(t,{value:E}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),r.addEventListener("keydown",g=>{var w;u.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(u.commitKey=3),m===-1)return;const{value:y}=g.target;u.lastCommittedValue!==y&&(u.lastCommittedValue=y,u.userValue=y,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,r.addEventListener("blur",g=>{var y,w;if(!u.focused||!g.relatedTarget)return;(y=this.data.actions)!=null&&y.Blur||(u.focused=!1);const{value:m}=g.target;u.userValue=m,u.lastCommittedValue!==m&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),p(g)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",g=>{var D;u.lastCommittedValue=null;const{data:m,target:y}=g,{value:w,selectionStart:_,selectionEnd:E}=y;let S=_,R=E;switch(g.inputType){case"deleteWordBackward":{const F=w.substring(0,_).match(/\w*[^\w]*$/);F&&(S-=F[0].length);break}case"deleteWordForward":{const F=w.substring(_).match(/^[^\w]*\w*/);F&&(R+=F[0].length);break}case"deleteContentBackward":_===E&&(S-=1);break;case"deleteContentForward":_===E&&(R+=1);break}g.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:m||"",willCommit:!1,selStart:S,selEnd:R}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class A3 extends ec{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class b3 extends ec{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Hl.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=sg,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class QL extends ec{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Hl.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=sg,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const p=u&&f.id===r;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class S3 extends KL{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class T3 extends ec{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Hl.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=sg;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of s.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,r.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),i=!1),s.append(f)}let o=null;if(i){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:g}=s;return g?Array.prototype.filter.call(p,m=>m.selected).map(m=>m[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=a(!1);const c=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const g=p.detail.value,m=new Set(Array.isArray(g)?g:[g]);for(const y of s.options)y.selected=m.has(y.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(p){s.multiple=!0},remove(p){const g=s.options,m=p.detail.remove;g[m].selected=!1,s.remove(m),g.length>0&&Array.prototype.findIndex.call(g,w=>w.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},clear(p){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(p){const{index:g,displayValue:m,exportValue:y}=p.detail.insert,w=s.children[g],_=document.createElement("option");_.textContent=m,_.value=y,w?w.before(_):s.append(_),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},items(p){const{items:g}=p.detail;for(;s.length!==0;)s.remove(0);for(const m of g){const{displayValue:y,exportValue:w}=m,_=document.createElement("option");_.textContent=y,_.value=w,s.append(_)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},indices(p){const g=new Set(p.detail.indices);for(const m of p.target.options)m.selected=g.has(m.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),s.addEventListener("input",u=>{var g;const f=a(!0),p=a(!1);e.setValue(t,{value:f}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class kw extends wt{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:wt._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new C3({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${Jk}${r}`).join(",")),this.container}}var Cu,py,gy,xu,cl,pt,yi,ul,ap,lp,Ru,_i,Xr,Ei,cp,wi,up,hl,dl,He,Om,Lw,JL,ZL,eM,tM,Fm,Vm,Mw;class C3{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:f}){I(this,He);I(this,Cu,P(this,He,eM).bind(this));I(this,py,P(this,He,Mw).bind(this));I(this,gy,P(this,He,Vm).bind(this));I(this,xu,P(this,He,Fm).bind(this));I(this,cl,null);I(this,pt,null);I(this,yi,null);I(this,ul,null);I(this,ap,null);I(this,lp,null);I(this,Ru,null);I(this,_i,!1);I(this,Xr,null);I(this,Ei,null);I(this,cp,null);I(this,wi,null);I(this,up,null);I(this,hl,null);I(this,dl,!1);var p;x(this,pt,e),x(this,up,s),x(this,yi,o),x(this,wi,a),x(this,lp,l),x(this,cl,t),x(this,cp,c),x(this,Ru,u),x(this,ap,r),x(this,ul,rL.toDateObject(i)),this.trigger=r.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",h(this,xu)),g.addEventListener("mouseenter",h(this,gy)),g.addEventListener("mouseleave",h(this,py)),g.classList.add("popupTriggerArea");for(const g of r)(p=g.container)==null||p.addEventListener("keydown",h(this,Cu));h(this,pt).hidden=!0,f&&P(this,He,Fm).call(this)}render(){if(h(this,Xr))return;const e=x(this,Xr,document.createElement("div"));if(e.className="popup",h(this,cl)){const i=e.style.outlineColor=ie.makeHexColor(...h(this,cl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=ie.makeHexColor(...h(this,cl).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=h(this,up),e.append(t),h(this,ul)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),i.setAttribute("data-l10n-args",JSON.stringify({date:h(this,ul).toLocaleDateString(),time:h(this,ul).toLocaleTimeString()})),t.append(i)}const s=h(this,He,Om);if(s)qL.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(h(this,yi));e.append(i)}h(this,pt).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,o=s.length;i<o;++i){const a=s[i];r.append(document.createTextNode(a)),i<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;h(this,hl)||x(this,hl,{contentsObj:h(this,yi),richText:h(this,wi)}),e&&x(this,Ei,null),t&&(x(this,wi,P(this,He,ZL).call(this,t)),x(this,yi,null)),(r=h(this,Xr))==null||r.remove(),x(this,Xr,null)}resetEdited(){var e;h(this,hl)&&({contentsObj:er(this,yi)._,richText:er(this,wi)._}=h(this,hl),x(this,hl,null),(e=h(this,Xr))==null||e.remove(),x(this,Xr,null),x(this,Ei,null))}forceHide(){x(this,dl,this.isVisible),h(this,dl)&&(h(this,pt).hidden=!0)}maybeShow(){h(this,dl)&&(h(this,Xr)||P(this,He,Vm).call(this),x(this,dl,!1),h(this,pt).hidden=!1)}get isVisible(){return h(this,pt).hidden===!1}}Cu=new WeakMap,py=new WeakMap,gy=new WeakMap,xu=new WeakMap,cl=new WeakMap,pt=new WeakMap,yi=new WeakMap,ul=new WeakMap,ap=new WeakMap,lp=new WeakMap,Ru=new WeakMap,_i=new WeakMap,Xr=new WeakMap,Ei=new WeakMap,cp=new WeakMap,wi=new WeakMap,up=new WeakMap,hl=new WeakMap,dl=new WeakMap,He=new WeakSet,Om=function(){const e=h(this,wi),t=h(this,yi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&h(this,wi).html||null},Lw=function(){var e,t,r;return((r=(t=(e=h(this,He,Om))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},JL=function(){var e,t,r;return((r=(t=(e=h(this,He,Om))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},ZL=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:h(this,He,JL),fontSize:h(this,He,Lw)?`calc(${h(this,He,Lw)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},eM=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&h(this,_i))&&P(this,He,Fm).call(this)},tM=function(){if(h(this,Ei)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=h(this,lp);let o=!!h(this,Ru),a=o?h(this,Ru):h(this,cp);for(const m of h(this,ap))if(!a||ie.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const l=ie.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,f=l[0]+u,p=l[1];x(this,Ei,[100*(f-s)/t,100*(p-i)/r]);const{style:g}=h(this,pt);g.left=`${h(this,Ei)[0]}%`,g.top=`${h(this,Ei)[1]}%`},Fm=function(){x(this,_i,!h(this,_i)),h(this,_i)?(P(this,He,Vm).call(this),h(this,pt).addEventListener("click",h(this,xu)),h(this,pt).addEventListener("keydown",h(this,Cu))):(P(this,He,Mw).call(this),h(this,pt).removeEventListener("click",h(this,xu)),h(this,pt).removeEventListener("keydown",h(this,Cu)))},Vm=function(){h(this,Xr)||this.render(),this.isVisible?h(this,_i)&&h(this,pt).classList.add("focused"):(P(this,He,tM).call(this),h(this,pt).hidden=!1,h(this,pt).style.zIndex=parseInt(h(this,pt).style.zIndex)+1e3)},Mw=function(){h(this,pt).classList.remove("focused"),!(h(this,_i)||!this.isVisible)&&(h(this,pt).hidden=!0,h(this,pt).style.zIndex=parseInt(h(this,pt).style.zIndex)-1e3)};class nM extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Te.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var hp;class x3 extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,hp,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:r,height:s}=Oi(t.rect),i=this.svgFactory.create(r,s,!0),o=x(this,hp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,hp)}addHighlightArea(){this.container.classList.add("highlightArea")}}hp=new WeakMap;var dp;class R3 extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,dp,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:r,height:s}=Oi(t.rect),i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=x(this,dp,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}dp=new WeakMap;var fp;class P3 extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,fp,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:r,height:s}=Oi(t.rect),i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=x(this,fp,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",s/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}fp=new WeakMap;var pp;class rM extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,pp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i}}=this;if(!r)return this.container;const{width:o,height:a}=Oi(t),l=this.svgFactory.create(o,a,!0);let c=[];for(let f=0,p=r.length;f<p;f+=2){const g=r[f]-t[0],m=t[3]-r[f+1];c.push(`${g},${m}`)}c=c.join(" ");const u=x(this,pp,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}pp=new WeakMap;class I3 extends rM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class k3 extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var gp;class sM extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});I(this,gp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Te.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:r,borderStyle:s,popupRef:i}}=this,{width:o,height:a}=Oi(t),l=this.svgFactory.create(o,a,!0);for(const c of r){let u=[];for(let p=0,g=c.length;p<g;p+=2){const m=c[p]-t[0],y=t[3]-c[p+1];u.push(`${m},${y}`)}u=u.join(" ");const f=this.svgFactory.createElement(this.svgElementName);h(this,gp).push(f),f.setAttribute("points",u),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),!i&&this.hasPopupData&&this._createPopup(),l.append(f)}return this.container.append(l),this.container}getElementsToTriggerPopup(){return h(this,gp)}addHighlightArea(){this.container.classList.add("highlightArea")}}gp=new WeakMap;class L3 extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class M3 extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class N3 extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class D3 extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class iM extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var mp,vp,Nw;class O3 extends wt{constructor(t){var s;super(t,{isRenderable:!0});I(this,vp);I(this,mp,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",P(this,vp,Nw).bind(this)),x(this,mp,s);const{isMac:i}=zn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&P(this,vp,Nw).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return h(this,mp)}addHighlightArea(){this.container.classList.add("highlightArea")}}mp=new WeakMap,vp=new WeakSet,Nw=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var yp,fl,Pu,ql,oM,Dw,uR;let F3=(uR=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:o}){I(this,ql);I(this,yp,null);I(this,fl,null);I(this,Pu,new Map);this.div=e,x(this,yp,t),x(this,fl,r),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){var o;const{annotations:t}=e,r=this.div;$l(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new aS,annotationStorage:e.annotationStorage||new dS,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Rt.POPUP;if(l){const f=s.get(a.id);if(!f)continue;i.elements=f}else{const{width:f,height:p}=Oi(a.rect);if(f<=0||p<=0)continue}i.data=a;const c=_3.create(i);if(!c.isRenderable)continue;if(!l&&a.popupRef){const f=s.get(a.popupRef);f?f.push(c):s.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),P(this,ql,oM).call(this,u,a.id),c.annotationEditorType>0&&(h(this,Pu).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}P(this,ql,Dw).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,$l(t,{rotation:e.rotation}),P(this,ql,Dw).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(h(this,Pu).values())}getEditableAnnotation(e){return h(this,Pu).get(e)}},yp=new WeakMap,fl=new WeakMap,Pu=new WeakMap,ql=new WeakSet,oM=function(e,t){var s;const r=e.firstChild||e;r.id=`${Jk}${t}`,this.div.append(e),(s=h(this,yp))==null||s.moveElementInDOM(this.div,e,r,!1)},Dw=function(){if(!h(this,fl))return;const e=this.div;for(const[t,r]of h(this,fl)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(r):i.classList.contains("annotationContent")?i.after(r):i.before(r):s.append(r)}h(this,fl).clear()},uR);const em=/\r\n?|\n/g;var _p,Ep,wp,Ap,bp,Yr,or,Sp,ar,Iu,Ct,aM,lM,cM,Bm,Vi,jm,Um,uM,Fw,hM;const Ye=class Ye extends Ve{constructor(t){super({...t,name:"freeTextEditor"});I(this,Ct);I(this,_p,this.editorDivBlur.bind(this));I(this,Ep,this.editorDivFocus.bind(this));I(this,wp,this.editorDivInput.bind(this));I(this,Ap,this.editorDivKeydown.bind(this));I(this,bp,this.editorDivPaste.bind(this));I(this,Yr);I(this,or,"");I(this,Sp,`${this.id}-editor`);I(this,ar);I(this,Iu,null);x(this,Yr,t.color||Ye._defaultColor||Ve._defaultLineColor),x(this,ar,t.fontSize||Ye._defaultFontSize)}static get _keyboardManager(){const t=Ye.prototype,r=o=>o.isEmpty(),s=zl.TRANSLATE_SMALL,i=zl.TRANSLATE_BIG;return ke(this,"_keyboardManager",new ng([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){Ve.initialize(t,r,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case pe.FREETEXT_SIZE:Ye._defaultFontSize=r;break;case pe.FREETEXT_COLOR:Ye._defaultColor=r;break}}updateParams(t,r){switch(t){case pe.FREETEXT_SIZE:P(this,Ct,aM).call(this,r);break;case pe.FREETEXT_COLOR:P(this,Ct,lM).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.FREETEXT_SIZE,Ye._defaultFontSize],[pe.FREETEXT_COLOR,Ye._defaultColor||Ve._defaultLineColor]]}get propertiesToUpdate(){return[[pe.FREETEXT_SIZE,h(this,ar)],[pe.FREETEXT_COLOR,h(this,Yr)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ye._internalPadding*t,-(Ye._internalPadding+h(this,ar))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Te.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",h(this,Ap),{signal:t}),this.editorDiv.addEventListener("focus",h(this,Ep),{signal:t}),this.editorDiv.addEventListener("blur",h(this,_p),{signal:t}),this.editorDiv.addEventListener("input",h(this,wp),{signal:t}),this.editorDiv.addEventListener("paste",h(this,bp),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,Sp)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",h(this,Ap)),this.editorDiv.removeEventListener("focus",h(this,Ep)),this.editorDiv.removeEventListener("blur",h(this,_p)),this.editorDiv.removeEventListener("input",h(this,wp)),this.editorDiv.removeEventListener("paste",h(this,bp)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=h(this,or),r=x(this,or,P(this,Ct,cM).call(this).trimEnd());if(t===r)return;const s=i=>{if(x(this,or,i),!i){this.remove();return}P(this,Ct,Um).call(this),this._uiManager.rebuild(this),P(this,Ct,Bm).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),P(this,Ct,Bm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,Sp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Ve._l10nPromise.get("pdfjs-free-text-default-content").then(i=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",i)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${h(this,ar)}px * var(--scale-factor))`,s.color=h(this,Yr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Nv(this,this.div,["dblclick","keydown"]),this.width){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=h(this,Iu);let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,f]=this.pageDimensions,[p,g]=this.pageTranslation;let m,y;switch(this.rotation){case 0:m=t+(a[0]-p)/u,y=r+this.height-(a[1]-g)/f;break;case 90:m=t+(a[0]-p)/u,y=r-(a[1]-g)/f,[l,c]=[c,-l];break;case 180:m=t-this.width+(a[0]-p)/u,y=r-(a[1]-g)/f,[l,c]=[-l,-c];break;case 270:m=t+(a[0]-p-this.height*f)/u,y=r+(a[1]-g-this.width*u)/f,[l,c]=[-c,l];break}this.setAt(m*i,y*o,l,c)}else this.setAt(t*i,r*o,this.width*i,this.height*o);P(this,Ct,Um).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,y,w;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=P(m=Ye,Vi,Fw).call(m,r.getData("text")||"").replaceAll(em,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],f=[];if(l.nodeType===Node.TEXT_NODE){const _=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(em,"")),_!==this.editorDiv){let E=u;for(const S of this.editorDiv.childNodes){if(S===_){E=f;continue}E.push(P(y=Ye,Vi,jm).call(y,S))}}u.push(l.nodeValue.slice(0,c).replaceAll(em,""))}else if(l===this.editorDiv){let _=u,E=0;for(const S of this.editorDiv.childNodes)E++===c&&(_=f),_.push(P(w=Ye,Vi,jm).call(w,S))}x(this,or,`${u.join(`
`)}${i}${f.join(`
`)}`),P(this,Ct,Um).call(this);const p=new Range;let g=u.reduce((_,E)=>_+E.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const E=_.nodeValue.length;if(g<=E){p.setStart(_,g),p.setEnd(_,g);break}g-=E}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static deserialize(t,r,s){var a;let i=null;if(t instanceof nM){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:f,id:p},textContent:g,textPosition:m,parent:{page:{pageNumber:y}}}=t;if(!g||g.length===0)return null;i=t={annotationType:Te.FREETEXT,color:Array.from(c),fontSize:l,value:g.join(`
`),position:m,pageIndex:y-1,rect:u.slice(0),rotation:f,id:p,deleted:!1}}const o=super.deserialize(t,r,s);return x(o,ar,t.fontSize),x(o,Yr,ie.makeHexColor(...t.color)),x(o,or,P(a=Ye,Vi,Fw).call(a,t.value)),o.annotationElementId=t.id||null,x(o,Iu,i),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const r=Ye._internalPadding*this.parentScale,s=this.getRect(r,r),i=Ve._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,Yr)),o={annotationType:Te.FREETEXT,color:i,fontSize:h(this,ar),value:P(this,Ct,uM).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!P(this,Ct,hM).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:s}=r;s.fontSize=`calc(${h(this,ar)}px * var(--scale-factor))`,s.color=h(this,Yr),r.replaceChildren();for(const o of h(this,or).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),r.append(a)}const i=Ye._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:h(this,or)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};_p=new WeakMap,Ep=new WeakMap,wp=new WeakMap,Ap=new WeakMap,bp=new WeakMap,Yr=new WeakMap,or=new WeakMap,Sp=new WeakMap,ar=new WeakMap,Iu=new WeakMap,Ct=new WeakSet,aM=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-h(this,ar))*this.parentScale),x(this,ar,i),P(this,Ct,Bm).call(this)},s=h(this,ar);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},lM=function(t){const r=i=>{x(this,Yr,this.editorDiv.style.color=i)},s=h(this,Yr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},cM=function(){var r;const t=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)t.push(P(r=Ye,Vi,jm).call(r,s));return t.join(`
`)},Bm=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Vi=new WeakSet,jm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(em,"")},Um=function(){if(this.editorDiv.replaceChildren(),!!h(this,or))for(const t of h(this,or).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},uM=function(){return h(this,or).replaceAll(" "," ")},Fw=function(t){return t.replaceAll(" "," ")},hM=function(t){const{value:r,fontSize:s,color:i,pageIndex:o}=h(this,Iu);return this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},I(Ye,Vi),me(Ye,"_freeTextDefaultContent",""),me(Ye,"_internalPadding",0),me(Ye,"_defaultColor",null),me(Ye,"_defaultFontSize",10),me(Ye,"_type","freetext"),me(Ye,"_editorType",Te.FREETEXT);let Ow=Ye;var Tp,bo,Qr,Mn,dM,$m,fM,pM,Bw;class Vw{constructor(e,t=0,r=0,s=!0){I(this,Mn);I(this,Tp);I(this,bo,[]);I(this,Qr,[]);let i=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:_,y:E,width:S,height:R}of e){const D=Math.floor((_-t)/u)*u,F=Math.ceil((_+S+t)/u)*u,C=Math.floor((E-t)/u)*u,T=Math.ceil((E+R+t)/u)*u,k=[D,C,T,!0],M=[F,C,T,!1];h(this,bo).push(k,M),i=Math.min(i,D),o=Math.max(o,F),a=Math.min(a,C),l=Math.max(l,T)}const f=o-i+2*r,p=l-a+2*r,g=i-r,m=a-r,y=h(this,bo).at(s?-1:-2),w=[y[0],y[2]];for(const _ of h(this,bo)){const[E,S,R]=_;_[0]=(E-g)/f,_[1]=(S-m)/p,_[2]=(R-m)/p}x(this,Tp,{x:g,y:m,width:f,height:p,lastPoint:w})}getOutlines(){h(this,bo).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of h(this,bo))t[3]?(e.push(...P(this,Mn,Bw).call(this,t)),P(this,Mn,fM).call(this,t)):(P(this,Mn,pM).call(this,t),e.push(...P(this,Mn,Bw).call(this,t)));return P(this,Mn,dM).call(this,e)}}Tp=new WeakMap,bo=new WeakMap,Qr=new WeakMap,Mn=new WeakSet,dM=function(e){const t=[],r=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const s=[];let i;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,u,f]=o;r.delete(o);let p=a,g=l;for(i=[a,c],s.push(i);;){let m;if(r.has(u))m=u;else if(r.has(f))m=f;else break;r.delete(m),[a,l,c,u,f]=m,p!==a&&(i.push(p,g,a,g===l?l:c),p=a),g=g===l?c:l}i.push(p,g)}return new V3(s,h(this,Tp))},$m=function(e){const t=h(this,Qr);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,o=t[i][0];if(o===e)return i;o<e?r=i+1:s=i-1}return s+1},fM=function([,e,t]){const r=P(this,Mn,$m).call(this,e);h(this,Qr).splice(r,0,[e,t])},pM=function([,e,t]){const r=P(this,Mn,$m).call(this,e);for(let s=r;s<h(this,Qr).length;s++){const[i,o]=h(this,Qr)[s];if(i!==e)break;if(i===e&&o===t){h(this,Qr).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,o]=h(this,Qr)[s];if(i!==e)break;if(i===e&&o===t){h(this,Qr).splice(s,1);return}}},Bw=function(e){const[t,r,s]=e,i=[[t,r,s]],o=P(this,Mn,$m).call(this,s);for(let a=0;a<o;a++){const[l,c]=h(this,Qr)[a];for(let u=0,f=i.length;u<f;u++){const[,p,g]=i[u];if(!(c<=p||g<=l)){if(p>=l){if(g>c)i[u][1]=c;else{if(f===1)return[];i.splice(u,1),u--,f--}continue}i[u][2]=l,g>c&&i.push([t,c,g])}}}return i};class gM{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Uw}}var Cp,ku;class V3 extends gM{constructor(t,r){super();I(this,Cp);I(this,ku);x(this,ku,t),x(this,Cp,r)}toSVGPath(){const t=[];for(const r of h(this,ku)){let[s,i]=r;t.push(`M${s} ${i}`);for(let o=2;o<r.length;o+=2){const a=r[o],l=r[o+1];a===s?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],o){const a=[],l=s-t,c=i-r;for(const u of h(this,ku)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=t+u[p]*l,f[p+1]=i-u[p+1]*c;a.push(f)}return a}get box(){return h(this,Cp)}}Cp=new WeakMap,ku=new WeakMap;var As,Ai,Lu,Mu,bs,be,pl,gl,xp,Rp,Nu,Du,So,Pp,my,vy,Ip,jw;const ri=class ri{constructor({x:e,y:t},r,s,i,o,a=0){I(this,Ip);I(this,As);I(this,Ai,[]);I(this,Lu);I(this,Mu);I(this,bs,[]);I(this,be,new Float64Array(18));I(this,pl);I(this,gl);I(this,xp);I(this,Rp);I(this,Nu);I(this,Du);I(this,So,[]);x(this,As,r),x(this,Du,i*s),x(this,Mu,o),h(this,be).set([NaN,NaN,NaN,NaN,e,t],6),x(this,Lu,a),x(this,Rp,h(ri,Pp)*s),x(this,xp,h(ri,vy)*s),x(this,Nu,s),h(this,So).push(e,t)}get free(){return!0}isEmpty(){return isNaN(h(this,be)[8])}add({x:e,y:t}){var k;x(this,pl,e),x(this,gl,t);const[r,s,i,o]=h(this,As);let[a,l,c,u]=h(this,be).subarray(8,12);const f=e-c,p=t-u,g=Math.hypot(f,p);if(g<h(this,xp))return!1;const m=g-h(this,Rp),y=m/g,w=y*f,_=y*p;let E=a,S=l;a=c,l=u,c+=w,u+=_,(k=h(this,So))==null||k.push(e,t);const R=-_/m,D=w/m,F=R*h(this,Du),C=D*h(this,Du);return h(this,be).set(h(this,be).subarray(2,8),0),h(this,be).set([c+F,u+C],4),h(this,be).set(h(this,be).subarray(14,18),12),h(this,be).set([c-F,u-C],16),isNaN(h(this,be)[6])?(h(this,bs).length===0&&(h(this,be).set([a+F,l+C],2),h(this,bs).push(NaN,NaN,NaN,NaN,(a+F-r)/i,(l+C-s)/o),h(this,be).set([a-F,l-C],14),h(this,Ai).push(NaN,NaN,NaN,NaN,(a-F-r)/i,(l-C-s)/o)),h(this,be).set([E,S,a,l,c,u],6),!this.isEmpty()):(h(this,be).set([E,S,a,l,c,u],6),Math.abs(Math.atan2(S-l,E-a)-Math.atan2(_,w))<Math.PI/2?([a,l,c,u]=h(this,be).subarray(2,6),h(this,bs).push(NaN,NaN,NaN,NaN,((a+c)/2-r)/i,((l+u)/2-s)/o),[a,l,E,S]=h(this,be).subarray(14,18),h(this,Ai).push(NaN,NaN,NaN,NaN,((E+a)/2-r)/i,((S+l)/2-s)/o),!0):([E,S,a,l,c,u]=h(this,be).subarray(0,6),h(this,bs).push(((E+5*a)/6-r)/i,((S+5*l)/6-s)/o,((5*a+c)/6-r)/i,((5*l+u)/6-s)/o,((a+c)/2-r)/i,((l+u)/2-s)/o),[c,u,a,l,E,S]=h(this,be).subarray(12,18),h(this,Ai).push(((E+5*a)/6-r)/i,((S+5*l)/6-s)/o,((5*a+c)/6-r)/i,((5*l+u)/6-s)/o,((a+c)/2-r)/i,((l+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=h(this,bs),t=h(this,Ai),r=h(this,be).subarray(4,6),s=h(this,be).subarray(16,18),[i,o,a,l]=h(this,As),[c,u,f,p]=P(this,Ip,jw).call(this);if(isNaN(h(this,be)[6])&&!this.isEmpty())return`M${(h(this,be)[2]-i)/a} ${(h(this,be)[3]-o)/l} L${(h(this,be)[4]-i)/a} ${(h(this,be)[5]-o)/l} L${c} ${u} L${f} ${p} L${(h(this,be)[16]-i)/a} ${(h(this,be)[17]-o)/l} L${(h(this,be)[14]-i)/a} ${(h(this,be)[15]-o)/l} Z`;const g=[];g.push(`M${e[4]} ${e[5]}`);for(let m=6;m<e.length;m+=6)isNaN(e[m])?g.push(`L${e[m+4]} ${e[m+5]}`):g.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);g.push(`L${(r[0]-i)/a} ${(r[1]-o)/l} L${c} ${u} L${f} ${p} L${(s[0]-i)/a} ${(s[1]-o)/l}`);for(let m=t.length-6;m>=6;m-=6)isNaN(t[m])?g.push(`L${t[m+4]} ${t[m+5]}`):g.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);return g.push(`L${t[4]} ${t[5]} Z`),g.join(" ")}getOutlines(){var _;const e=h(this,bs),t=h(this,Ai),r=h(this,be),s=r.subarray(4,6),i=r.subarray(16,18),[o,a,l,c]=h(this,As),u=new Float64Array((((_=h(this,So))==null?void 0:_.length)??0)+2);for(let E=0,S=u.length-2;E<S;E+=2)u[E]=(h(this,So)[E]-o)/l,u[E+1]=(h(this,So)[E+1]-a)/c;u[u.length-2]=(h(this,pl)-o)/l,u[u.length-1]=(h(this,gl)-a)/c;const[f,p,g,m]=P(this,Ip,jw).call(this);if(isNaN(r[6])&&!this.isEmpty()){const E=new Float64Array(36);return E.set([NaN,NaN,NaN,NaN,(r[2]-o)/l,(r[3]-a)/c,NaN,NaN,NaN,NaN,(r[4]-o)/l,(r[5]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(r[16]-o)/l,(r[17]-a)/c,NaN,NaN,NaN,NaN,(r[14]-o)/l,(r[15]-a)/c],0),new Uw(E,u,h(this,As),h(this,Nu),h(this,Lu),h(this,Mu))}const y=new Float64Array(h(this,bs).length+24+h(this,Ai).length);let w=e.length;for(let E=0;E<w;E+=2){if(isNaN(e[E])){y[E]=y[E+1]=NaN;continue}y[E]=e[E],y[E+1]=e[E+1]}y.set([NaN,NaN,NaN,NaN,(s[0]-o)/l,(s[1]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(i[0]-o)/l,(i[1]-a)/c],w),w+=24;for(let E=t.length-6;E>=6;E-=6)for(let S=0;S<6;S+=2){if(isNaN(t[E+S])){y[w]=y[w+1]=NaN,w+=2;continue}y[w]=t[E+S],y[w+1]=t[E+S+1],w+=2}return y.set([NaN,NaN,NaN,NaN,t[4],t[5]],w),new Uw(y,u,h(this,As),h(this,Nu),h(this,Lu),h(this,Mu))}};As=new WeakMap,Ai=new WeakMap,Lu=new WeakMap,Mu=new WeakMap,bs=new WeakMap,be=new WeakMap,pl=new WeakMap,gl=new WeakMap,xp=new WeakMap,Rp=new WeakMap,Nu=new WeakMap,Du=new WeakMap,So=new WeakMap,Pp=new WeakMap,my=new WeakMap,vy=new WeakMap,Ip=new WeakSet,jw=function(){const e=h(this,be).subarray(4,6),t=h(this,be).subarray(16,18),[r,s,i,o]=h(this,As);return[(h(this,pl)+(e[0]-t[0])/2-r)/i,(h(this,gl)+(e[1]-t[1])/2-s)/o,(h(this,pl)+(t[0]-e[0])/2-r)/i,(h(this,gl)+(t[1]-e[1])/2-s)/o]},I(ri,Pp,8),I(ri,my,2),I(ri,vy,h(ri,Pp)+h(ri,my));let Vv=ri;var Ou,ml,bi,kp,lr,Lp,yt,Hn,hd,dd,mM;class Uw extends gM{constructor(t,r,s,i,o,a){super();I(this,Hn);I(this,Ou);I(this,ml,null);I(this,bi);I(this,kp);I(this,lr);I(this,Lp);I(this,yt);x(this,yt,t),x(this,lr,r),x(this,Ou,s),x(this,Lp,i),x(this,bi,o),x(this,kp,a),P(this,Hn,mM).call(this,a);const{x:l,y:c,width:u,height:f}=h(this,ml);for(let p=0,g=t.length;p<g;p+=2)t[p]=(t[p]-l)/u,t[p+1]=(t[p+1]-c)/f;for(let p=0,g=r.length;p<g;p+=2)r[p]=(r[p]-l)/u,r[p+1]=(r[p+1]-c)/f}toSVGPath(){const t=[`M${h(this,yt)[4]} ${h(this,yt)[5]}`];for(let r=6,s=h(this,yt).length;r<s;r+=6){if(isNaN(h(this,yt)[r])){t.push(`L${h(this,yt)[r+4]} ${h(this,yt)[r+5]}`);continue}t.push(`C${h(this,yt)[r]} ${h(this,yt)[r+1]} ${h(this,yt)[r+2]} ${h(this,yt)[r+3]} ${h(this,yt)[r+4]} ${h(this,yt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],o){const a=s-t,l=i-r;let c,u;switch(o){case 0:c=P(this,Hn,hd).call(this,h(this,yt),t,i,a,-l),u=P(this,Hn,hd).call(this,h(this,lr),t,i,a,-l);break;case 90:c=P(this,Hn,dd).call(this,h(this,yt),t,r,a,l),u=P(this,Hn,dd).call(this,h(this,lr),t,r,a,l);break;case 180:c=P(this,Hn,hd).call(this,h(this,yt),s,r,-a,l),u=P(this,Hn,hd).call(this,h(this,lr),s,r,-a,l);break;case 270:c=P(this,Hn,dd).call(this,h(this,yt),s,i,-a,-l),u=P(this,Hn,dd).call(this,h(this,lr),s,i,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return h(this,ml)}getNewOutline(t,r){const{x:s,y:i,width:o,height:a}=h(this,ml),[l,c,u,f]=h(this,Ou),p=o*u,g=a*f,m=s*u+l,y=i*f+c,w=new Vv({x:h(this,lr)[0]*p+m,y:h(this,lr)[1]*g+y},h(this,Ou),h(this,Lp),t,h(this,kp),r??h(this,bi));for(let _=2;_<h(this,lr).length;_+=2)w.add({x:h(this,lr)[_]*p+m,y:h(this,lr)[_+1]*g+y});return w.getOutlines()}}Ou=new WeakMap,ml=new WeakMap,bi=new WeakMap,kp=new WeakMap,lr=new WeakMap,Lp=new WeakMap,yt=new WeakMap,Hn=new WeakSet,hd=function(t,r,s,i,o){const a=new Float64Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l]*i,a[l+1]=s+t[l+1]*o;return a},dd=function(t,r,s,i,o){const a=new Float64Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l+1]*i,a[l+1]=s+t[l]*o;return a},mM=function(t){const r=h(this,yt);let s=r[4],i=r[5],o=s,a=i,l=s,c=i,u=s,f=i;const p=t?Math.max:Math.min;for(let _=6,E=r.length;_<E;_+=6){if(isNaN(r[_]))o=Math.min(o,r[_+4]),a=Math.min(a,r[_+5]),l=Math.max(l,r[_+4]),c=Math.max(c,r[_+5]),f<r[_+5]?(u=r[_+4],f=r[_+5]):f===r[_+5]&&(u=p(u,r[_+4]));else{const S=ie.bezierBoundingBox(s,i,...r.slice(_,_+6));o=Math.min(o,S[0]),a=Math.min(a,S[1]),l=Math.max(l,S[2]),c=Math.max(c,S[3]),f<S[3]?(u=S[2],f=S[3]):f===S[3]&&(u=p(u,S[2]))}s=r[_+4],i=r[_+5]}const g=o-h(this,bi),m=a-h(this,bi),y=l-o+2*h(this,bi),w=c-a+2*h(this,bi);x(this,ml,{x:g,y:m,width:y,height:w,lastPoint:[u,f]})};var Mp,Np,Jr,vl,Fu,It,Dp,Vu,Op,Fp,Zr,Bu,Xe,$w,zw,vM,Ta,yM,so;const si=class si{constructor({editor:e=null,uiManager:t=null}){I(this,Xe);I(this,Mp,P(this,Xe,vM).bind(this));I(this,Np,P(this,Xe,yM).bind(this));I(this,Jr,null);I(this,vl,null);I(this,Fu);I(this,It,null);I(this,Dp,!1);I(this,Vu,!1);I(this,Op,null);I(this,Fp);I(this,Zr,null);I(this,Bu);var r;e?(x(this,Vu,!1),x(this,Bu,pe.HIGHLIGHT_COLOR),x(this,Op,e)):(x(this,Vu,!0),x(this,Bu,pe.HIGHLIGHT_DEFAULT_COLOR)),x(this,Zr,(e==null?void 0:e._uiManager)||t),x(this,Fp,h(this,Zr)._eventBus),x(this,Fu,(e==null?void 0:e.color)||((r=h(this,Zr))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return ke(this,"_keyboardManager",new ng([[["Escape","mac+Escape"],si.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],si.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],si.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],si.prototype._moveToPrevious],[["Home","mac+Home"],si.prototype._moveToBeginning],[["End","mac+End"],si.prototype._moveToEnd]]))}renderButton(){const e=x(this,Jr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=h(this,Zr)._signal;e.addEventListener("click",P(this,Xe,Ta).bind(this),{signal:t}),e.addEventListener("keydown",h(this,Mp),{signal:t});const r=x(this,vl,document.createElement("span"));return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=h(this,Fu),e.append(r),e}renderMainDropdown(){const e=x(this,It,P(this,Xe,$w).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===h(this,Jr)){P(this,Xe,Ta).call(this,e);return}const t=e.target.getAttribute("data-color");t&&P(this,Xe,zw).call(this,t,e)}_moveToNext(e){var t,r;if(!h(this,Xe,so)){P(this,Xe,Ta).call(this,e);return}if(e.target===h(this,Jr)){(t=h(this,It).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=h(this,It))==null?void 0:t.firstChild)||e.target===h(this,Jr)){h(this,Xe,so)&&this._hideDropdownFromKeyboard();return}h(this,Xe,so)||P(this,Xe,Ta).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!h(this,Xe,so)){P(this,Xe,Ta).call(this,e);return}(t=h(this,It).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!h(this,Xe,so)){P(this,Xe,Ta).call(this,e);return}(t=h(this,It).lastChild)==null||t.focus()}hideDropdown(){var e;(e=h(this,It))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",h(this,Np))}_hideDropdownFromKeyboard(){var e;if(!h(this,Vu)){if(!h(this,Xe,so)){(e=h(this,Op))==null||e.unselect();return}this.hideDropdown(),h(this,Jr).focus({preventScroll:!0,focusVisible:h(this,Dp)})}}updateColor(e){if(h(this,vl)&&(h(this,vl).style.backgroundColor=e),!h(this,It))return;const t=h(this,Zr).highlightColors.values();for(const r of h(this,It).children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=h(this,Jr))==null||e.remove(),x(this,Jr,null),x(this,vl,null),(t=h(this,It))==null||t.remove(),x(this,It,null)}};Mp=new WeakMap,Np=new WeakMap,Jr=new WeakMap,vl=new WeakMap,Fu=new WeakMap,It=new WeakMap,Dp=new WeakMap,Vu=new WeakMap,Op=new WeakMap,Fp=new WeakMap,Zr=new WeakMap,Bu=new WeakMap,Xe=new WeakSet,$w=function(){const e=document.createElement("div"),t=h(this,Zr)._signal;e.addEventListener("contextmenu",Kn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,s]of h(this,Zr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${r}`);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.setAttribute("aria-selected",s===h(this,Fu)),i.addEventListener("click",P(this,Xe,zw).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",h(this,Mp),{signal:t}),e},zw=function(e,t){t.stopPropagation(),h(this,Fp).dispatch("switchannotationeditorparams",{source:this,type:h(this,Bu),value:e})},vM=function(e){si._keyboardManager.exec(this,e)},Ta=function(e){if(h(this,Xe,so)){this.hideDropdown();return}if(x(this,Dp,e.detail===0),window.addEventListener("pointerdown",h(this,Np),{signal:h(this,Zr)._signal}),h(this,It)){h(this,It).classList.remove("hidden");return}const t=x(this,It,P(this,Xe,$w).call(this));h(this,Jr).append(t)},yM=function(e){var t;(t=h(this,It))!=null&&t.contains(e.target)||this.hideDropdown()},so=function(){return h(this,It)&&!h(this,It).classList.contains("hidden")};let Bv=si;var ju,Vp,To,yl,Uu,Tr,Bp,jp,_l,es,Tn,cr,yy,$u,El,kt,zu,Ss,Up,Ee,Hw,Ww,_M,EM,wM,Gw,fd,kr,_c,AM,zm,pd,bM,SM,TM,CM;const Oe=class Oe extends Ve{constructor(t){super({...t,name:"highlightEditor"});I(this,Ee);I(this,ju,null);I(this,Vp,0);I(this,To);I(this,yl,null);I(this,Uu,null);I(this,Tr,null);I(this,Bp,null);I(this,jp,0);I(this,_l,null);I(this,es,null);I(this,Tn,null);I(this,cr,!1);I(this,yy,P(this,Ee,AM).bind(this));I(this,$u,null);I(this,El);I(this,kt,null);I(this,zu,"");I(this,Ss);I(this,Up,"");this.color=t.color||Oe._defaultColor,x(this,Ss,t.thickness||Oe._defaultThickness),x(this,El,t.opacity||Oe._defaultOpacity),x(this,To,t.boxes||null),x(this,Up,t.methodOfCreation||""),x(this,zu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(x(this,cr,!0),P(this,Ee,Ww).call(this,t),P(this,Ee,fd).call(this)):(x(this,ju,t.anchorNode),x(this,Vp,t.anchorOffset),x(this,Bp,t.focusNode),x(this,jp,t.focusOffset),P(this,Ee,Hw).call(this),P(this,Ee,fd).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Oe.prototype;return ke(this,"_keyboardManager",new ng([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,cr)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(this,Ss),methodOfCreation:h(this,Up)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;Ve.initialize(t,r),Oe._defaultColor||(Oe._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case pe.HIGHLIGHT_DEFAULT_COLOR:Oe._defaultColor=r;break;case pe.HIGHLIGHT_THICKNESS:Oe._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return h(this,$u)}updateParams(t,r){switch(t){case pe.HIGHLIGHT_COLOR:P(this,Ee,_M).call(this,r);break;case pe.HIGHLIGHT_THICKNESS:P(this,Ee,EM).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.HIGHLIGHT_DEFAULT_COLOR,Oe._defaultColor],[pe.HIGHLIGHT_THICKNESS,Oe._defaultThickness]]}get propertiesToUpdate(){return[[pe.HIGHLIGHT_COLOR,this.color||Oe._defaultColor],[pe.HIGHLIGHT_THICKNESS,h(this,Ss)||Oe._defaultThickness],[pe.HIGHLIGHT_FREE,h(this,cr)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(x(this,Uu,new Bv({editor:this})),t.addColorPicker(h(this,Uu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,Ee,pd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,P(this,Ee,pd).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){P(this,Ee,Gw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,Ee,fd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?P(this,Ee,Gw).call(this):t&&(P(this,Ee,fd).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,o,a;const{drawLayer:r}=this.parent;let s;h(this,cr)?(t=(t-this.rotation+360)%360,s=P(i=Oe,kr,_c).call(i,h(this,es).box,t)):s=P(o=Oe,kr,_c).call(o,this,t),r.rotate(h(this,Tn),t),r.rotate(h(this,kt),t),r.updateBox(h(this,Tn),s),r.updateBox(h(this,kt),P(a=Oe,kr,_c).call(a,h(this,Tr).box,t))}render(){if(this.div)return this.div;const t=super.render();h(this,zu)&&(t.setAttribute("aria-label",h(this,zu)),t.setAttribute("role","mark")),h(this,cr)?t.classList.add("free"):this.div.addEventListener("keydown",h(this,yy),{signal:this._uiManager._signal});const r=x(this,_l,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=h(this,yl);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),Nv(this,h(this,_l),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(h(this,kt),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(h(this,kt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:P(this,Ee,zm).call(this,!0);break;case 1:case 3:P(this,Ee,zm).call(this,!1);break}}select(){var t,r;super.select(),h(this,kt)&&((t=this.parent)==null||t.drawLayer.removeClass(h(this,kt),"hovered"),(r=this.parent)==null||r.drawLayer.addClass(h(this,kt),"selected"))}unselect(){var t;super.unselect(),h(this,kt)&&((t=this.parent)==null||t.drawLayer.removeClass(h(this,kt),"selected"),h(this,cr)||P(this,Ee,zm).call(this,!1))}get _mustFixPosition(){return!h(this,cr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(h(this,Tn),t),this.parent.drawLayer.show(h(this,kt),t))}static startHighlighting(t,r,{target:s,x:i,y:o}){const{x:a,y:l,width:c,height:u}=s.getBoundingClientRect(),f=w=>{P(this,kr,TM).call(this,t,w)},p=t._signal,g={capture:!0,passive:!1,signal:p},m=w=>{w.preventDefault(),w.stopPropagation()},y=w=>{s.removeEventListener("pointermove",f),window.removeEventListener("blur",y),window.removeEventListener("pointerup",y),window.removeEventListener("pointerdown",m,g),window.removeEventListener("contextmenu",Kn),P(this,kr,CM).call(this,t,w)};window.addEventListener("blur",y,{signal:p}),window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("pointerdown",m,g),window.addEventListener("contextmenu",Kn,{signal:p}),s.addEventListener("pointermove",f,{signal:p}),this._freeHighlight=new Vv({x:i,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,r,s){var y;const i=super.deserialize(t,r,s),{rect:[o,a,l,c],color:u,quadPoints:f}=t;i.color=ie.makeHexColor(...u),x(i,El,t.opacity);const[p,g]=i.pageDimensions;i.width=(l-o)/p,i.height=(c-a)/g;const m=x(i,To,[]);for(let w=0;w<f.length;w+=8)m.push({x:(f[4]-l)/p,y:(c-(1-f[w+5]))/g,width:(f[w+2]-f[w])/p,height:(f[w+5]-f[w+1])/g});return P(y=i,Ee,Hw).call(y),i}serialize(t=!1){if(this.isEmpty()||t)return null;const r=this.getRect(0,0),s=Ve._colorManager.convert(this.color);return{annotationType:Te.HIGHLIGHT,color:s,opacity:h(this,El),thickness:h(this,Ss),quadPoints:P(this,Ee,bM).call(this),outlines:P(this,Ee,SM).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:P(this,Ee,pd).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};ju=new WeakMap,Vp=new WeakMap,To=new WeakMap,yl=new WeakMap,Uu=new WeakMap,Tr=new WeakMap,Bp=new WeakMap,jp=new WeakMap,_l=new WeakMap,es=new WeakMap,Tn=new WeakMap,cr=new WeakMap,yy=new WeakMap,$u=new WeakMap,El=new WeakMap,kt=new WeakMap,zu=new WeakMap,Ss=new WeakMap,Up=new WeakMap,Ee=new WeakSet,Hw=function(){const t=new Vw(h(this,To),.001);x(this,es,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=h(this,es).box;const r=new Vw(h(this,To),.0025,.001,this._uiManager.direction==="ltr");x(this,Tr,r.getOutlines());const{lastPoint:s}=h(this,Tr).box;x(this,$u,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Ww=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,p;if(x(this,es,t),x(this,Tr,t.getNewOutline(h(this,Ss)/2+1.5,.0025)),r>=0)x(this,Tn,r),x(this,yl,s),this.parent.drawLayer.finalizeLine(r,t),x(this,kt,this.parent.drawLayer.highlightOutline(h(this,Tr)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(h(this,Tn),t),this.parent.drawLayer.updateBox(h(this,Tn),P(f=Oe,kr,_c).call(f,h(this,es).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(h(this,kt),h(this,Tr)),this.parent.drawLayer.updateBox(h(this,kt),P(p=Oe,kr,_c).call(p,h(this,Tr).box,g))}const{x:o,y:a,width:l,height:c}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[g,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*m/g,this.height=c*g/m;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[g,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*m/g,this.height=c*g/m;break}}const{lastPoint:u}=h(this,Tr).box;x(this,$u,[(u[0]-o)/l,(u[1]-a)/c])},_M=function(t){const r=i=>{var o,a;this.color=i,(o=this.parent)==null||o.drawLayer.changeColor(h(this,Tn),i),(a=h(this,Uu))==null||a.updateColor(i)},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},EM=function(t){const r=h(this,Ss),s=i=>{x(this,Ss,i),P(this,Ee,wM).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},wM=function(t){if(!h(this,cr))return;P(this,Ee,Ww).call(this,{highlightOutlines:h(this,es).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},Gw=function(){h(this,Tn)===null||!this.parent||(this.parent.drawLayer.remove(h(this,Tn)),x(this,Tn,null),this.parent.drawLayer.remove(h(this,kt)),x(this,kt,null))},fd=function(t=this.parent){h(this,Tn)===null&&({id:er(this,Tn)._,clipPathId:er(this,yl)._}=t.drawLayer.highlight(h(this,es),this.color,h(this,El)),x(this,kt,t.drawLayer.highlightOutline(h(this,Tr))),h(this,_l)&&(h(this,_l).style.clipPath=h(this,yl)))},kr=new WeakSet,_c=function({x:t,y:r,width:s,height:i},o){switch(o){case 90:return{x:1-r-i,y:t,width:i,height:s};case 180:return{x:1-t-s,y:1-r-i,width:s,height:i};case 270:return{x:r,y:1-t-s,width:i,height:s}}return{x:t,y:r,width:s,height:i}},AM=function(t){Oe._keyboardManager.exec(this,t)},zm=function(t){if(!h(this,ju))return;const r=window.getSelection();t?r.setPosition(h(this,ju),h(this,Vp)):r.setPosition(h(this,Bp),h(this,jp))},pd=function(){return h(this,cr)?this.rotation:0},bM=function(){if(h(this,cr))return null;const[t,r]=this.pageDimensions,s=h(this,To),i=new Float32Array(s.length*8);let o=0;for(const{x:a,y:l,width:c,height:u}of s){const f=a*t,p=(1-l-u)*r;i[o]=i[o+4]=f,i[o+1]=i[o+3]=p,i[o+2]=i[o+6]=f+c*t,i[o+5]=i[o+7]=p+u*r,o+=8}return i},SM=function(t){return h(this,es).serialize(t,P(this,Ee,pd).call(this))},TM=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},CM=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},I(Oe,kr),me(Oe,"_defaultColor",null),me(Oe,"_defaultOpacity",1),me(Oe,"_defaultThickness",12),me(Oe,"_l10nPromise"),me(Oe,"_type","highlight"),me(Oe,"_editorType",Te.HIGHLIGHT),me(Oe,"_freeHighlightId",-1),me(Oe,"_freeHighlight",null),me(Oe,"_freeHighlightClipId","");let jv=Oe;var wl,Al,$p,zp,Hp,bl,Ts,Si,Cr,Sl,Tl,Ti,Cl,xl,Co,J,xM,RM,PM,IM,Kw,kM,Xw,LM,MM,NM,DM,OM,Ca,Yw,Hm,Wm,Ec,Qw,Gm,Ki,FM,Jw,VM,BM,Zw,qm,gd;const st=class st extends Ve{constructor(t){super({...t,name:"inkEditor"});I(this,J);I(this,wl,0);I(this,Al,0);I(this,$p,this.canvasPointermove.bind(this));I(this,zp,this.canvasPointerleave.bind(this));I(this,Hp,this.canvasPointerup.bind(this));I(this,bl,this.canvasPointerdown.bind(this));I(this,Ts,null);I(this,Si,new Path2D);I(this,Cr,!1);I(this,Sl,!1);I(this,Tl,!1);I(this,Ti,null);I(this,Cl,0);I(this,xl,0);I(this,Co,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,r){Ve.initialize(t,r)}static updateDefaultParams(t,r){switch(t){case pe.INK_THICKNESS:st._defaultThickness=r;break;case pe.INK_COLOR:st._defaultColor=r;break;case pe.INK_OPACITY:st._defaultOpacity=r/100;break}}updateParams(t,r){switch(t){case pe.INK_THICKNESS:P(this,J,xM).call(this,r);break;case pe.INK_COLOR:P(this,J,RM).call(this,r);break;case pe.INK_OPACITY:P(this,J,PM).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.INK_THICKNESS,st._defaultThickness],[pe.INK_COLOR,st._defaultColor||Ve._defaultLineColor],[pe.INK_OPACITY,Math.round(st._defaultOpacity*100)]]}get propertiesToUpdate(){return[[pe.INK_THICKNESS,this.thickness||st._defaultThickness],[pe.INK_COLOR,this.color||st._defaultColor||Ve._defaultLineColor],[pe.INK_OPACITY,Math.round(100*(this.opacity??st._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(P(this,J,Hm).call(this),P(this,J,Wm).call(this)),this.isAttachedToDOM||(this.parent.add(this),P(this,J,Ec).call(this)),P(this,J,gd).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,h(this,Ts)&&(clearTimeout(h(this,Ts)),x(this,Ts,null)),(t=h(this,Ti))==null||t.disconnect(),x(this,Ti,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,r]=this.parentDimensions,s=this.width*t,i=this.height*r;this.setDimensions(s,i)}enableEditMode(){h(this,Cr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",h(this,bl),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",h(this,bl)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){h(this,Cr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,Cr,!0),this.div.classList.add("disabled"),P(this,J,gd).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||h(this,Cr)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),P(this,J,kM).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),P(this,J,Xw).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),P(this,J,Yw).call(this,t)}canvasPointerleave(t){P(this,J,Yw).call(this,t)}get isResizable(){return!this.isEmpty()&&h(this,Cr)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,i,o,a]=P(this,J,IM).call(this);if(this.setAt(s,i,0,0),this.setDims(o,a),P(this,J,Hm).call(this),this.width){const[l,c]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*c),this.setAt(t*l,r*c,this.width*l,this.height*c),x(this,Tl,!0),P(this,J,Ec).call(this),this.setDims(this.width*l,this.height*c),P(this,J,Ca).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return P(this,J,Wm).call(this),this.div}setDimensions(t,r){const s=Math.round(t),i=Math.round(r);if(h(this,Cl)===s&&h(this,xl)===i)return;x(this,Cl,s),x(this,xl,i),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=r/a,this.fixAndSetPosition(),h(this,Cr)&&P(this,J,Qw).call(this,t,r),P(this,J,Ec).call(this),P(this,J,Ca).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,r,s){var w,_,E;if(t instanceof sM)return null;const i=super.deserialize(t,r,s);i.thickness=t.thickness,i.color=ie.makeHexColor(...t.color),i.opacity=t.opacity;const[o,a]=i.pageDimensions,l=i.width*o,c=i.height*a,u=i.parentScale,f=t.thickness/2;x(i,Cr,!0),x(i,Cl,Math.round(l)),x(i,xl,Math.round(c));const{paths:p,rect:g,rotation:m}=t;for(let{bezier:S}of p){S=P(w=st,Ki,VM).call(w,S,g,m);const R=[];i.paths.push(R);let D=u*(S[0]-f),F=u*(S[1]-f);for(let T=2,k=S.length;T<k;T+=6){const M=u*(S[T]-f),O=u*(S[T+1]-f),B=u*(S[T+2]-f),N=u*(S[T+3]-f),q=u*(S[T+4]-f),re=u*(S[T+5]-f);R.push([[D,F],[M,O],[B,N],[q,re]]),D=q,F=re}const C=P(this,Ki,FM).call(this,R);i.bezierPath2D.push(C)}const y=P(_=i,J,Zw).call(_);return x(i,Al,Math.max(Ve.MIN_SIZE,y[2]-y[0])),x(i,wl,Math.max(Ve.MIN_SIZE,y[3]-y[1])),P(E=i,J,Qw).call(E,l,c),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),r=Ve._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Te.INK,color:r,thickness:this.thickness,opacity:this.opacity,paths:P(this,J,BM).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};wl=new WeakMap,Al=new WeakMap,$p=new WeakMap,zp=new WeakMap,Hp=new WeakMap,bl=new WeakMap,Ts=new WeakMap,Si=new WeakMap,Cr=new WeakMap,Sl=new WeakMap,Tl=new WeakMap,Ti=new WeakMap,Cl=new WeakMap,xl=new WeakMap,Co=new WeakMap,J=new WeakSet,xM=function(t){const r=i=>{this.thickness=i,P(this,J,gd).call(this)},s=this.thickness;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},RM=function(t){const r=i=>{this.color=i,P(this,J,Ca).call(this)},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},PM=function(t){const r=i=>{this.opacity=i,P(this,J,Ca).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},IM=function(){const{parentRotation:t,parentDimensions:[r,s]}=this;switch(t){case 90:return[0,s,s,r];case 180:return[r,s,r,s];case 270:return[r,0,s,r];default:return[0,0,r,s]}},Kw=function(){const{ctx:t,color:r,opacity:s,thickness:i,parentScale:o,scaleFactor:a}=this;t.lineWidth=i*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${r}${l$(s)}`},kM=function(t,r){const s=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Kn,{signal:s}),this.canvas.addEventListener("pointerleave",h(this,zp),{signal:s}),this.canvas.addEventListener("pointermove",h(this,$p),{signal:s}),this.canvas.addEventListener("pointerup",h(this,Hp),{signal:s}),this.canvas.removeEventListener("pointerdown",h(this,bl)),this.isEditing=!0,h(this,Tl)||(x(this,Tl,!0),P(this,J,Ec).call(this),this.thickness||(this.thickness=st._defaultThickness),this.color||(this.color=st._defaultColor||Ve._defaultLineColor),this.opacity??(this.opacity=st._defaultOpacity)),this.currentPath.push([t,r]),x(this,Sl,!1),P(this,J,Kw).call(this),x(this,Co,()=>{P(this,J,NM).call(this),h(this,Co)&&window.requestAnimationFrame(h(this,Co))}),window.requestAnimationFrame(h(this,Co))},Xw=function(t,r){const[s,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&r===i)return;const o=this.currentPath;let a=h(this,Si);if(o.push([t,r]),x(this,Sl,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,r);return}o.length===3&&(x(this,Si,a=new Path2D),a.moveTo(...o[0])),P(this,J,DM).call(this,a,...o.at(-3),...o.at(-2),t,r)},LM=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);h(this,Si).lineTo(...t)},MM=function(t,r){x(this,Co,null),t=Math.min(Math.max(t,0),this.canvas.width),r=Math.min(Math.max(r,0),this.canvas.height),P(this,J,Xw).call(this,t,r),P(this,J,LM).call(this);let s;if(this.currentPath.length!==1)s=P(this,J,OM).call(this);else{const c=[t,r];s=[[c,c.slice(),c.slice(),c]]}const i=h(this,Si),o=this.currentPath;this.currentPath=[],x(this,Si,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(P(this,J,Hm).call(this),P(this,J,Wm).call(this)),P(this,J,gd).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},NM=function(){if(!h(this,Sl))return;x(this,Sl,!1);const t=Math.ceil(this.thickness*this.parentScale),r=this.currentPath.slice(-3),s=r.map(a=>a[0]),i=r.map(a=>a[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...i)-t,Math.max(...i)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(h(this,Si)),o.restore()},DM=function(t,r,s,i,o,a,l){const c=(r+i)/2,u=(s+o)/2,f=(i+a)/2,p=(o+l)/2;t.bezierCurveTo(c+2*(i-c)/3,u+2*(o-u)/3,f+2*(i-f)/3,p+2*(o-p)/3,f,p)},OM=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const r=[];let s,[i,o]=t[0];for(s=1;s<t.length-2;s++){const[g,m]=t[s],[y,w]=t[s+1],_=(g+y)/2,E=(m+w)/2,S=[i+2*(g-i)/3,o+2*(m-o)/3],R=[_+2*(g-_)/3,E+2*(m-E)/3];r.push([[i,o],S,R,[_,E]]),[i,o]=[_,E]}const[a,l]=t[s],[c,u]=t[s+1],f=[i+2*(a-i)/3,o+2*(l-o)/3],p=[c+2*(a-c)/3,u+2*(l-u)/3];return r.push([[i,o],f,p,[c,u]]),r},Ca=function(){if(this.isEmpty()){P(this,J,Gm).call(this);return}P(this,J,Kw).call(this);const{canvas:t,ctx:r}=this;r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),P(this,J,Gm).call(this);for(const s of this.bezierPath2D)r.stroke(s)},Yw=function(t){this.canvas.removeEventListener("pointerleave",h(this,zp)),this.canvas.removeEventListener("pointermove",h(this,$p)),this.canvas.removeEventListener("pointerup",h(this,Hp)),this.canvas.addEventListener("pointerdown",h(this,bl),{signal:this._uiManager._signal}),h(this,Ts)&&clearTimeout(h(this,Ts)),x(this,Ts,setTimeout(()=>{x(this,Ts,null),this.canvas.removeEventListener("contextmenu",Kn)},10)),P(this,J,MM).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Hm=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Wm=function(){x(this,Ti,new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&this.setDimensions(r.width,r.height)})),h(this,Ti).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=h(this,Ti))==null||t.disconnect(),x(this,Ti,null)},{once:!0})},Ec=function(){if(!h(this,Tl))return;const[t,r]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*r),P(this,J,Gm).call(this)},Qw=function(t,r){const s=P(this,J,qm).call(this),i=(t-s)/h(this,Al),o=(r-s)/h(this,wl);this.scaleFactor=Math.min(i,o)},Gm=function(){const t=P(this,J,qm).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ki=new WeakSet,FM=function(t){const r=new Path2D;for(let s=0,i=t.length;s<i;s++){const[o,a,l,c]=t[s];s===0&&r.moveTo(...o),r.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}return r},Jw=function(t,r,s){const[i,o,a,l]=r;switch(s){case 0:for(let c=0,u=t.length;c<u;c+=2)t[c]+=i,t[c+1]=l-t[c+1];break;case 90:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=t[c+1]+i,t[c+1]=f+o}break;case 180:for(let c=0,u=t.length;c<u;c+=2)t[c]=a-t[c],t[c+1]+=o;break;case 270:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=a-t[c+1],t[c+1]=l-f}break;default:throw new Error("Invalid rotation")}return t},VM=function(t,r,s){const[i,o,a,l]=r;switch(s){case 0:for(let c=0,u=t.length;c<u;c+=2)t[c]-=i,t[c+1]=l-t[c+1];break;case 90:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=t[c+1]-o,t[c+1]=f-i}break;case 180:for(let c=0,u=t.length;c<u;c+=2)t[c]=a-t[c],t[c+1]-=o;break;case 270:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=l-t[c+1],t[c+1]=a-f}break;default:throw new Error("Invalid rotation")}return t},BM=function(t,r,s,i){var u,f;const o=[],a=this.thickness/2,l=t*r+a,c=t*s+a;for(const p of this.paths){const g=[],m=[];for(let y=0,w=p.length;y<w;y++){const[_,E,S,R]=p[y];if(_[0]===R[0]&&_[1]===R[1]&&w===1){const N=t*_[0]+l,q=t*_[1]+c;g.push(N,q),m.push(N,q);break}const D=t*_[0]+l,F=t*_[1]+c,C=t*E[0]+l,T=t*E[1]+c,k=t*S[0]+l,M=t*S[1]+c,O=t*R[0]+l,B=t*R[1]+c;y===0&&(g.push(D,F),m.push(D,F)),g.push(C,T,k,M,O,B),m.push(C,T),y===w-1&&m.push(O,B)}o.push({bezier:P(u=st,Ki,Jw).call(u,g,i,this.rotation),points:P(f=st,Ki,Jw).call(f,m,i,this.rotation)})}return o},Zw=function(){let t=1/0,r=-1/0,s=1/0,i=-1/0;for(const o of this.paths)for(const[a,l,c,u]of o){const f=ie.bezierBoundingBox(...a,...l,...c,...u);t=Math.min(t,f[0]),s=Math.min(s,f[1]),r=Math.max(r,f[2]),i=Math.max(i,f[3])}return[t,s,r,i]},qm=function(){return h(this,Cr)?Math.ceil(this.thickness*this.parentScale):0},gd=function(t=!1){if(this.isEmpty())return;if(!h(this,Cr)){P(this,J,Ca).call(this);return}const r=P(this,J,Zw).call(this),s=P(this,J,qm).call(this);x(this,Al,Math.max(Ve.MIN_SIZE,r[2]-r[0])),x(this,wl,Math.max(Ve.MIN_SIZE,r[3]-r[1]));const i=Math.ceil(s+h(this,Al)*this.scaleFactor),o=Math.ceil(s+h(this,wl)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=i/a,this.height=o/l,this.setAspectRatio(i,o);const c=this.translationX,u=this.translationY;this.translationX=-r[0],this.translationY=-r[1],P(this,J,Ec).call(this),P(this,J,Ca).call(this),x(this,Cl,i),x(this,xl,o),this.setDims(i,o);const f=t?s/this.scaleFactor/2:0;this.translate(c-this.translationX-f,u-this.translationY-f)},I(st,Ki),me(st,"_defaultColor",null),me(st,"_defaultOpacity",1),me(st,"_defaultThickness",1),me(st,"_type","ink"),me(st,"_editorType",Te.INK);let qw=st;var Zt,en,xo,Ci,Ro,Hu,Cs,xi,xs,ts,Wp,De,md,vd,Km,tA,jM,UM,nA,Xm,$M;const Vd=class Vd extends Ve{constructor(t){super({...t,name:"stampEditor"});I(this,De);I(this,Zt,null);I(this,en,null);I(this,xo,null);I(this,Ci,null);I(this,Ro,null);I(this,Hu,"");I(this,Cs,null);I(this,xi,null);I(this,xs,null);I(this,ts,!1);I(this,Wp,!1);x(this,Ci,t.bitmapUrl),x(this,Ro,t.bitmapFile)}static initialize(t,r){Ve.initialize(t,r)}static get supportedTypes(){return ke(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(r=>`image/${r}`))}static get supportedTypesStr(){return ke(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,r){r.pasteEditor(Te.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,r;h(this,en)&&(x(this,Zt,null),this._uiManager.imageManager.deleteId(h(this,en)),(t=h(this,Cs))==null||t.remove(),x(this,Cs,null),(r=h(this,xi))==null||r.disconnect(),x(this,xi,null),h(this,xs)&&(clearTimeout(h(this,xs)),x(this,xs,null))),super.remove()}rebuild(){if(!this.parent){h(this,en)&&P(this,De,Km).call(this);return}super.rebuild(),this.div!==null&&(h(this,en)&&h(this,Cs)===null&&P(this,De,Km).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(h(this,xo)||h(this,Zt)||h(this,Ci)||h(this,Ro)||h(this,en))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;if(this.width&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),h(this,Zt)?P(this,De,tA).call(this):P(this,De,Km).call(this),this.width){const[s,i]=this.parentDimensions;this.setAt(t*s,r*i,this.width*s,this.height*i)}return this.div}getImageForAltText(){return h(this,Cs)}static deserialize(t,r,s){if(t instanceof iM)return null;const i=super.deserialize(t,r,s),{rect:o,bitmapUrl:a,bitmapId:l,isSvg:c,accessibilityData:u}=t;l&&s.imageManager.isValidId(l)?x(i,en,l):x(i,Ci,a),x(i,ts,c);const[f,p]=i.pageDimensions;return i.width=(o[2]-o[0])/f,i.height=(o[3]-o[1])/p,u&&(i.altTextData=u),i}serialize(t=!1,r=null){if(this.isEmpty())return null;const s={annotationType:Te.STAMP,bitmapId:h(this,en),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(this,ts),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=P(this,De,Xm).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:i,altText:o}=this.altTextData;if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),r===null)return s;r.stamps||(r.stamps=new Map);const a=h(this,ts)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(h(this,en)))r.stamps.set(h(this,en),{area:a,serialized:s}),s.bitmap=P(this,De,Xm).call(this,!1);else if(h(this,ts)){const l=r.stamps.get(h(this,en));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=P(this,De,Xm).call(this,!1))}return s}};Zt=new WeakMap,en=new WeakMap,xo=new WeakMap,Ci=new WeakMap,Ro=new WeakMap,Hu=new WeakMap,Cs=new WeakMap,xi=new WeakMap,xs=new WeakMap,ts=new WeakMap,Wp=new WeakMap,De=new WeakSet,md=function(t,r=!1){if(!t){this.remove();return}x(this,Zt,t.bitmap),r||(x(this,en,t.id),x(this,ts,t.isSvg)),t.file&&x(this,Hu,t.file.name),P(this,De,tA).call(this)},vd=function(){x(this,xo,null),this._uiManager.enableWaiting(!1),h(this,Cs)&&this.div.focus()},Km=function(){if(h(this,en)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,en)).then(s=>P(this,De,md).call(this,s,!0)).finally(()=>P(this,De,vd).call(this));return}if(h(this,Ci)){const s=h(this,Ci);x(this,Ci,null),this._uiManager.enableWaiting(!0),x(this,xo,this._uiManager.imageManager.getFromUrl(s).then(i=>P(this,De,md).call(this,i)).finally(()=>P(this,De,vd).call(this)));return}if(h(this,Ro)){const s=h(this,Ro);x(this,Ro,null),this._uiManager.enableWaiting(!0),x(this,xo,this._uiManager.imageManager.getFromFile(s).then(i=>P(this,De,md).call(this,i)).finally(()=>P(this,De,vd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Vd.supportedTypesStr;const r=this._uiManager._signal;x(this,xo,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);P(this,De,md).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>P(this,De,vd).call(this))),t.click()},tA=function(){const{div:t}=this;let{width:r,height:s}=h(this,Zt);const[i,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*i,s=this.height*o;else if(r>a*i||s>a*o){const f=Math.min(a*i/r,a*o/s);r*=f,s*=f}const[l,c]=this.parentDimensions;this.setDims(r*l/i,s*c/o),this._uiManager.enableWaiting(!1);const u=x(this,Cs,document.createElement("canvas"));t.append(u),t.hidden=!1,P(this,De,nA).call(this,r,s),P(this,De,$M).call(this),h(this,Wp)||(this.parent.addUndoableEditor(this),x(this,Wp,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,Hu)&&u.setAttribute("aria-label",h(this,Hu))},jM=function(t,r){var a;const[s,i]=this.parentDimensions;this.width=t/s,this.height=r/i,this.setDims(t,r),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,h(this,xs)!==null&&clearTimeout(h(this,xs)),x(this,xs,setTimeout(()=>{x(this,xs,null),P(this,De,nA).call(this,t,r)},200))},UM=function(t,r){const{width:s,height:i}=h(this,Zt);let o=s,a=i,l=h(this,Zt);for(;o>2*t||a>2*r;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=f.transferToImageBitmap()}return l},nA=function(t,r){t=Math.ceil(t),r=Math.ceil(r);const s=h(this,Cs);if(!s||s.width===t&&s.height===r)return;s.width=t,s.height=r;const i=h(this,ts)?h(this,Zt):P(this,De,UM).call(this,t,r);if(this._uiManager.hasMLManager&&!this.hasAltText()){const l=new OffscreenCanvas(t,r).getContext("2d");l.drawImage(i,0,0,i.width,i.height,0,0,t,r),this._uiManager.mlGuess({service:"image-to-text",request:{data:l.getImageData(0,0,t,r).data,width:t,height:r,channels:4}}).then(c=>{const u=(c==null?void 0:c.output)||"";this.parent&&u&&!this.hasAltText()&&(this.altTextData={altText:u,decorative:!1})})}const o=s.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(i,0,0,i.width,i.height,0,0,t,r)},Xm=function(t){if(t){if(h(this,ts)){const i=this._uiManager.imageManager.getSvgUrl(h(this,en));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=h(this,Zt),r.getContext("2d").drawImage(h(this,Zt),0,0),r.toDataURL()}if(h(this,ts)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*ea.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ea.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(h(this,Zt),0,0,h(this,Zt).width,h(this,Zt).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(h(this,Zt))},$M=function(){this._uiManager._signal&&(x(this,xi,new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&P(this,De,jM).call(this,r.width,r.height)})),h(this,xi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=h(this,xi))==null||t.disconnect(),x(this,xi,null)},{once:!0}))},me(Vd,"_type","stamp"),me(Vd,"_editorType",Te.STAMP);let eA=Vd;var Rl,Wu,Rs,Pl,Ri,Pi,Ii,ur,Po,Gu,qu,Cn,oe,Io,sn,zM,sA,iA,oA,Ym;const jr=class jr{constructor({uiManager:e,pageIndex:t,div:r,accessibilityManager:s,annotationLayer:i,drawLayer:o,textLayer:a,viewport:l,l10n:c}){I(this,sn);I(this,Rl);I(this,Wu,!1);I(this,Rs,null);I(this,Pl,null);I(this,Ri,null);I(this,Pi,null);I(this,Ii,null);I(this,ur,new Map);I(this,Po,!1);I(this,Gu,!1);I(this,qu,!1);I(this,Cn,null);I(this,oe);const u=[...h(jr,Io).values()];if(!jr._initialized){jr._initialized=!0;for(const f of u)f.initialize(c,e)}e.registerEditorTypes(u),x(this,oe,e),this.pageIndex=t,this.div=r,x(this,Rl,s),x(this,Rs,i),this.viewport=l,x(this,Cn,a),this.drawLayer=o,h(this,oe).addLayer(this)}get isEmpty(){return h(this,ur).size===0}get isInvisible(){return this.isEmpty&&h(this,oe).getMode()===Te.NONE}updateToolbar(e){h(this,oe).updateToolbar(e)}updateMode(e=h(this,oe).getMode()){switch(P(this,sn,Ym).call(this),e){case Te.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Te.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Te.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of h(jr,Io).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=h(this,Cn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(h(this,oe).getMode()!==Te.INK)return;if(!e){for(const r of h(this,ur).values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){h(this,oe).setEditingState(e)}addCommands(e){h(this,oe).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=h(this,Rs))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of h(this,ur).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(h(this,oe).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!h(this,Rs))return;const t=h(this,Rs).getEditableAnnotations();for(const r of t){if(r.hide(),h(this,oe).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;x(this,qu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of h(this,ur).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(h(this,Rs)){const i=h(this,Rs).getEditableAnnotations();for(const o of i){const{id:a}=o.data;if(h(this,oe).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(h(this,oe).addChangedExistingAnnotation(l),l.renderAnnotationElement(o),l.show(!1)),o.show()}}P(this,sn,Ym).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of h(jr,Io).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,qu,!1)}getEditableAnnotation(e){var t;return((t=h(this,Rs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){h(this,oe).getActive()!==e&&h(this,oe).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=h(this,Cn))!=null&&e.div&&!h(this,Pi)&&(x(this,Pi,P(this,sn,zM).bind(this)),h(this,Cn).div.addEventListener("pointerdown",h(this,Pi),{signal:h(this,oe)._signal}),h(this,Cn).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=h(this,Cn))!=null&&e.div&&h(this,Pi)&&(h(this,Cn).div.removeEventListener("pointerdown",h(this,Pi)),x(this,Pi,null),h(this,Cn).div.classList.remove("highlighting"))}enableClick(){if(h(this,Ri))return;const e=h(this,oe)._signal;x(this,Ri,this.pointerdown.bind(this)),x(this,Pl,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",h(this,Ri),{signal:e}),this.div.addEventListener("pointerup",h(this,Pl),{signal:e})}disableClick(){h(this,Ri)&&(this.div.removeEventListener("pointerdown",h(this,Ri)),this.div.removeEventListener("pointerup",h(this,Pl)),x(this,Ri,null),x(this,Pl,null))}attach(e){h(this,ur).set(e.id,e);const{annotationElementId:t}=e;t&&h(this,oe).isDeletedAnnotationElement(t)&&h(this,oe).removeDeletedAnnotationElement(e)}detach(e){var t;h(this,ur).delete(e.id),(t=h(this,Rl))==null||t.removePointerInTextLayer(e.contentDiv),!h(this,qu)&&e.annotationElementId&&h(this,oe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),h(this,oe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,h(this,Gu)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(h(this,oe).addDeletedAnnotationElement(e.annotationElementId),Ve.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),h(this,oe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),h(this,oe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!h(this,Ii)&&(e._focusEventsAllowed=!1,x(this,Ii,setTimeout(()=>{x(this,Ii,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:h(this,oe)._signal}),t.focus())},0))),e._structTreeParentId=(r=h(this,Rl))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return h(this,oe).getId()}get _signal(){return h(this,oe)._signal}canCreateNewEmptyEditor(){var e;return(e=h(this,sn,sA))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){h(this,oe).updateToolbar(e),h(this,oe).updateMode(e);const{offsetX:r,offsetY:s}=P(this,sn,oA).call(this),i=this.getNextId(),o=P(this,sn,iA).call(this,{parent:this,id:i,x:r,y:s,uiManager:h(this,oe),isCentered:!0,...t});o&&this.add(o)}deserialize(e){var t;return((t=h(jr,Io).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,h(this,oe)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=P(this,sn,iA).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:h(this,oe),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(P(this,sn,oA).call(this),!0)}setSelected(e){h(this,oe).setSelected(e)}toggleSelected(e){h(this,oe).toggleSelected(e)}isSelected(e){return h(this,oe).isSelected(e)}unselect(e){h(this,oe).unselect(e)}pointerup(e){const{isMac:t}=zn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&h(this,Po)){if(x(this,Po,!1),!h(this,Wu)){x(this,Wu,!0);return}if(h(this,oe).getMode()===Te.STAMP){h(this,oe).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(h(this,oe).getMode()===Te.HIGHLIGHT&&this.enableTextSelection(),h(this,Po)){x(this,Po,!1);return}const{isMac:t}=zn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;x(this,Po,!0);const r=h(this,oe).getActive();x(this,Wu,!r||r.isEmpty())}findNewParent(e,t,r){const s=h(this,oe).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=h(this,oe).getActive())==null?void 0:e.parent)===this&&(h(this,oe).commitOrRemove(),h(this,oe).setActiveEditor(null)),h(this,Ii)&&(clearTimeout(h(this,Ii)),x(this,Ii,null));for(const r of h(this,ur).values())(t=h(this,Rl))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,h(this,ur).clear(),h(this,oe).removeLayer(this)}render({viewport:e}){this.viewport=e,$l(this.div,e);for(const t of h(this,oe).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){h(this,oe).commitOrRemove(),P(this,sn,Ym).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,$l(this.div,{rotation:r}),t!==r)for(const s of h(this,ur).values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return h(this,oe).viewParameters.realScale}};Rl=new WeakMap,Wu=new WeakMap,Rs=new WeakMap,Pl=new WeakMap,Ri=new WeakMap,Pi=new WeakMap,Ii=new WeakMap,ur=new WeakMap,Po=new WeakMap,Gu=new WeakMap,qu=new WeakMap,Cn=new WeakMap,oe=new WeakMap,Io=new WeakMap,sn=new WeakSet,zM=function(e){if(h(this,oe).unselectAll(),e.target===h(this,Cn).div){const{isMac:t}=zn.platform;if(e.button!==0||e.ctrlKey&&t)return;h(this,oe).showAllEditors("highlight",!0,!0),h(this,Cn).div.classList.add("free"),jv.startHighlighting(this,h(this,oe).direction==="ltr",e),h(this,Cn).div.addEventListener("pointerup",()=>{h(this,Cn).div.classList.remove("free")},{once:!0,signal:h(this,oe)._signal}),e.preventDefault()}},sA=function(){return h(jr,Io).get(h(this,oe).getMode())},iA=function(e){const t=h(this,sn,sA);return t?new t.prototype.constructor(e):null},oA=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+s),c=(i+a)/2-e,u=(o+l)/2-t,[f,p]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:f,offsetY:p}},Ym=function(){x(this,Gu,!0);for(const e of h(this,ur).values())e.isEmpty()&&e.remove();x(this,Gu,!1)},me(jr,"_initialized",!1),I(jr,Io,new Map([Ow,qw,eA,jv].map(e=>[e._editorType,e])));let rA=jr;var Ps,Gp,Lt,ko,qp,lA,Kl,cA,HM;const Kt=class Kt{constructor({pageIndex:e}){I(this,Kl);I(this,Ps,null);I(this,Gp,0);I(this,Lt,new Map);I(this,ko,new Map);this.pageIndex=e}setParent(e){if(!h(this,Ps)){x(this,Ps,e);return}if(h(this,Ps)!==e){if(h(this,Lt).size>0)for(const t of h(this,Lt).values())t.remove(),e.append(t);x(this,Ps,e)}}static get _svgFactory(){return ke(this,"_svgFactory",new aS)}highlight(e,t,r,s=!1){const i=er(this,Gp)._++,o=P(this,Kl,cA).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const a=Kt._svgFactory.createElement("defs");o.append(a);const l=Kt._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),s&&h(this,ko).set(i,l);const u=P(this,Kl,HM).call(this,a,c),f=Kt._svgFactory.createElement("use");return o.append(f),o.setAttribute("fill",t),o.setAttribute("fill-opacity",r),f.setAttribute("href",`#${c}`),h(this,Lt).set(i,o),{id:i,clipPathId:`url(#${u})`}}highlightOutline(e){const t=er(this,Gp)._++,r=P(this,Kl,cA).call(this,e.box);r.classList.add("highlightOutline");const s=Kt._svgFactory.createElement("defs");r.append(s);const i=Kt._svgFactory.createElement("path");s.append(i);const o=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",o),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.free){r.classList.add("free");const u=Kt._svgFactory.createElement("mask");s.append(u),a=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const f=Kt._svgFactory.createElement("rect");u.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Kt._svgFactory.createElement("use");u.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const l=Kt._svgFactory.createElement("use");r.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return r.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),h(this,Lt).set(t,r),t}finalizeLine(e,t){const r=h(this,ko).get(e);h(this,ko).delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){h(this,Lt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),h(this,ko).delete(e)}updatePath(e,t){h(this,ko).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var r;P(r=Kt,qp,lA).call(r,h(this,Lt).get(e),t)}show(e,t){h(this,Lt).get(e).classList.toggle("hidden",!t)}rotate(e,t){h(this,Lt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){h(this,Lt).get(e).setAttribute("fill",t)}changeOpacity(e,t){h(this,Lt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){h(this,Lt).get(e).classList.add(t)}removeClass(e,t){h(this,Lt).get(e).classList.remove(t)}remove(e){h(this,Ps)!==null&&(h(this,Lt).get(e).remove(),h(this,Lt).delete(e))}destroy(){x(this,Ps,null);for(const e of h(this,Lt).values())e.remove();h(this,Lt).clear()}};Ps=new WeakMap,Gp=new WeakMap,Lt=new WeakMap,ko=new WeakMap,qp=new WeakSet,lA=function(e,{x:t=0,y:r=0,width:s=1,height:i=1}={}){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},Kl=new WeakSet,cA=function(e){var r;const t=Kt._svgFactory.create(1,1,!0);return h(this,Ps).append(t),t.setAttribute("aria-hidden",!0),P(r=Kt,qp,lA).call(r,t,e),t},HM=function(e,t){const r=Kt._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Kt._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},I(Kt,qp);let aA=Kt;var B3=de.AbortException,j3=de.AnnotationEditorLayer,U3=de.AnnotationEditorParamsType,$3=de.AnnotationEditorType,z3=de.AnnotationEditorUIManager,WM=de.AnnotationLayer,GM=de.AnnotationMode,H3=de.CMapCompressionType,W3=de.ColorPicker,G3=de.DOMSVGFactory,q3=de.DrawLayer,K3=de.FeatureTest,gS=de.GlobalWorkerOptions,X3=de.ImageKind,Y3=de.InvalidPDFException,Q3=de.MissingPDFException,J3=de.OPS,Z3=de.Outliner,ez=de.PDFDataRangeTransport,tz=de.PDFDateString,nz=de.PDFWorker,rz=de.PasswordResponses,sz=de.PermissionFlag,iz=de.PixelsPerInch,oz=de.RenderingCancelledException,qM=de.TextLayer,az=de.UnexpectedResponseException,lz=de.Util,cz=de.VerbosityLevel,uz=de.XfaLayer,hz=de.build,dz=de.createValidAbsoluteUrl,fz=de.fetchData,KM=de.getDocument,pz=de.getFilenameFromUrl,gz=de.getPdfFilenameFromUrl,mz=de.getXfaPageViewport,vz=de.isDataScheme,yz=de.isPdfFile,_z=de.noContextMenu,Ez=de.normalizeUnicode,wz=de.renderTextLayer,Az=de.setLayerDimensions,bz=de.shadow,Sz=de.updateTextLayer,Tz=de.version;const Cz=Object.freeze(Object.defineProperty({__proto__:null,AbortException:B3,AnnotationEditorLayer:j3,AnnotationEditorParamsType:U3,AnnotationEditorType:$3,AnnotationEditorUIManager:z3,AnnotationLayer:WM,AnnotationMode:GM,CMapCompressionType:H3,ColorPicker:W3,DOMSVGFactory:G3,DrawLayer:q3,FeatureTest:K3,GlobalWorkerOptions:gS,ImageKind:X3,InvalidPDFException:Y3,MissingPDFException:Q3,OPS:J3,Outliner:Z3,PDFDataRangeTransport:ez,PDFDateString:tz,PDFWorker:nz,PasswordResponses:rz,PermissionFlag:sz,PixelsPerInch:iz,RenderingCancelledException:oz,TextLayer:qM,UnexpectedResponseException:az,Util:lz,VerbosityLevel:cz,XfaLayer:uz,build:hz,createValidAbsoluteUrl:dz,fetchData:fz,getDocument:KM,getFilenameFromUrl:pz,getPdfFilenameFromUrl:gz,getXfaPageViewport:mz,isDataScheme:vz,isPdfFile:yz,noContextMenu:_z,normalizeUnicode:Ez,renderTextLayer:wz,setLayerDimensions:Az,shadow:bz,updateTextLayer:Sz,version:Tz},Symbol.toStringTag,{value:"Module"}));var Ut=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},xz=["onCopy","onCut","onPaste"],Rz=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Pz=["onFocus","onBlur"],Iz=["onInput","onInvalid","onReset","onSubmit"],kz=["onLoad","onError"],Lz=["onKeyDown","onKeyPress","onKeyUp"],Mz=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Nz=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Dz=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Oz=["onSelect"],Fz=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Vz=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Bz=["onScroll"],jz=["onWheel"],Uz=["onAnimationStart","onAnimationEnd","onAnimationIteration"],$z=["onTransitionEnd"],zz=["onToggle"],Hz=["onChange"],Wz=Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut([],xz,!0),Rz,!0),Pz,!0),Iz,!0),kz,!0),Lz,!0),Mz,!0),Nz,!0),Dz,!0),Oz,!0),Fz,!0),Vz,!0),Bz,!0),jz,!0),Uz,!0),$z,!0),Hz,!0),zz,!0);function XM(n,e){var t={};return Wz.forEach(function(r){var s=n[r];s&&(e?t[r]=function(i){return s(i,e(r))}:t[r]=s)}),t}function ig(n){var e=!1,t=new Promise(function(r,s){n.then(function(i){return!e&&r(i)}).catch(function(i){return!e&&s(i)})});return{promise:t,cancel:function(){e=!0}}}function YM(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=YM(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function s_(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=YM(n))&&(r&&(r+=" "),r+=e);return r}var Gz="Invariant failed";function Ke(n,e){if(!n)throw new Error(Gz)}var qz=function(){},Kz=qz;const En=_y(Kz);var W1=Object.prototype.hasOwnProperty;function G1(n,e,t){for(t of n.keys())if(qc(t,e))return t}function qc(n,e){var t,r,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&qc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(s=r,s&&typeof s=="object"&&(s=G1(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(s=r[0],s&&typeof s=="object"&&(s=G1(e,s),!s)||!qc(r[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(W1.call(n,t)&&++r&&!W1.call(e,t)||!(t in e)||!qc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}const QM=A.createContext(null);function Kc({children:n,type:e}){return V.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const Xz="noopener noreferrer nofollow";class Yz{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ke(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ke(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Ke(this.pdfDocument),Ke(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ke(Array.isArray(t));const r=t[0];new Promise(s=>{Ke(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(i=>{s(i)}).catch(()=>{Ke(!1)}):typeof r=="number"?s(r):Ke(!1)}).then(s=>{const i=s+1;Ke(this.pdfViewer),Ke(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Ke(this.pdfViewer),Ke(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||Xz,e.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const q1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},i_=typeof window<"u",JM=i_&&window.location.protocol==="file:";function Qz(n){return typeof n<"u"}function wa(n){return Qz(n)&&n!==null}function Jz(n){return typeof n=="string"}function Zz(n){return n instanceof ArrayBuffer}function eH(n){return Ke(i_),n instanceof Blob}function uA(n){return Jz(n)&&/^data:/.test(n)}function K1(n){Ke(uA(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function tH(){return i_&&window.devicePixelRatio||1}const ZM="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function X1(){En(!JM,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ZM}`)}function nH(){En(!JM,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${ZM}`)}function Wl(n){n!=null&&n.cancel&&n.cancel()}function hA(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function rH(n){return n.name==="RenderingCancelledException"}function sH(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}function iH(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function rh(){return A.useReducer(iH,{value:void 0,error:void 0})}var oH=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},Y1=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const{PDFDataRangeTransport:aH}=Cz,lH=(n,e)=>{switch(e){case q1.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case q1.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function Q1(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const cH=A.forwardRef(function(e,t){var{children:r,className:s,error:i="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:u,loading:f="Loading PDF…",noData:p="No PDF file specified.",onItemClick:g,onLoadError:m,onLoadProgress:y,onLoadSuccess:w,onPassword:_=lH,onSourceError:E,onSourceSuccess:S,options:R,renderMode:D,rotate:F}=e,C=Y1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[T,k]=rh(),{value:M,error:O}=T,[B,N]=rh(),{value:q,error:re}=B,Z=A.useRef(new Yz),W=A.useRef([]),U=A.useRef(void 0),z=A.useRef(void 0);l&&l!==U.current&&Q1(l)&&(En(!qc(l,U.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),U.current=l),R&&R!==z.current&&(En(!qc(R,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=R);const X=A.useRef({scrollPageIntoView:Ae=>{const{dest:We,pageNumber:ht,pageIndex:rt=ht-1}=Ae;if(g){g({dest:We,pageIndex:rt,pageNumber:ht});return}const us=W.current[rt];if(us){us.scrollIntoView();return}En(!1,`An internal link leading to page ${ht} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});A.useImperativeHandle(t,()=>({linkService:Z,pages:W,viewer:X}),[]);function ce(){S&&S()}function se(){O&&(En(!1,O.toString()),E&&E(O))}function ae(){k({type:"RESET"})}A.useEffect(ae,[l,k]);const je=A.useCallback(()=>oH(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return uA(l)?{data:K1(l)}:(X1(),{url:l});if(l instanceof aH)return{range:l};if(Zz(l))return{data:l};if(i_&&eH(l))return{data:yield sH(l)};if(Ke(typeof l=="object"),Ke(Q1(l)),"url"in l&&typeof l.url=="string"){if(uA(l.url)){const{url:Ae}=l,We=Y1(l,["url"]),ht=K1(Ae);return Object.assign({data:ht},We)}X1()}return l}),[l]);A.useEffect(()=>{const Ae=ig(je());return Ae.promise.then(We=>{k({type:"RESOLVE",value:We})}).catch(We=>{k({type:"REJECT",error:We})}),()=>{Wl(Ae)}},[je,k]),A.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){se();return}ce()}},[M]);function Ue(){q&&(w&&w(q),W.current=new Array(q.numPages),Z.current.setDocument(q))}function Pe(){re&&(En(!1,re.toString()),m&&m(re))}A.useEffect(function(){N({type:"RESET"})},[N,M]),A.useEffect(function(){if(!M)return;const We=R?Object.assign(Object.assign({},M),R):M,ht=KM(We);y&&(ht.onProgress=y),_&&(ht.onPassword=_);const rt=ht,us=rt.promise.then(Gs=>{N({type:"RESOLVE",value:Gs})}).catch(Gs=>{rt.destroyed||N({type:"REJECT",error:Gs})});return()=>{us.finally(()=>rt.destroy())}},[R,N,M]),A.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){Pe();return}Ue()}},[q]),A.useEffect(function(){Z.current.setViewer(X.current),Z.current.setExternalLinkRel(o),Z.current.setExternalLinkTarget(a)},[o,a]);const fe=A.useCallback((Ae,We)=>{W.current[Ae]=We},[]),ut=A.useCallback(Ae=>{delete W.current[Ae]},[]),Je=A.useMemo(()=>({imageResourcesPath:u,linkService:Z.current,onItemClick:g,pdf:q,registerPage:fe,renderMode:D,rotate:F,unregisterPage:ut}),[u,g,q,fe,D,F,ut]),Ie=A.useMemo(()=>XM(C,()=>q),[C,q]);function Jn(){return V.jsx(QM.Provider,{value:Je,children:r})}function wr(){return l?q==null?V.jsx(Kc,{type:"loading",children:typeof f=="function"?f():f}):q===!1?V.jsx(Kc,{type:"error",children:typeof i=="function"?i():i}):Jn():V.jsx(Kc,{type:"no-data",children:typeof p=="function"?p():p})}return V.jsx("div",Object.assign({className:s_("react-pdf__Document",s),ref:c,style:{"--scale-factor":"1"}},Ie,{children:wr()}))});function eN(){return A.useContext(QM)}function tN(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(i){t.forEach(function(o){typeof o=="function"?o(i):o&&(o.current=i)})}}const nN=A.createContext(null),rN={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},uH=/^H(\d+)$/;function hH(n){return n in rN}function o_(n){return"children"in n}function sN(n){return o_(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function dH(n){const e={};if(o_(n)){const{role:t}=n,r=t.match(uH);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(hH(t)){const s=rN[t];s&&(e.role=s)}}return e}function iN(n){const e={};if(o_(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),sN(n)){const[t]=n.children;if(t){const r=iN(t);return Object.assign(Object.assign({},e),r)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function fH(n){return n?Object.assign(Object.assign({},dH(n)),iN(n)):null}function oN({className:n,node:e}){const t=A.useMemo(()=>fH(e),[e]),r=A.useMemo(()=>!o_(e)||sN(e)?null:e.children.map((s,i)=>V.jsx(oN,{node:s},i)),[e]);return V.jsx("span",Object.assign({className:n},t,{children:r}))}function a_(){return A.useContext(nN)}function pH(){const n=a_();Ke(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,s]=rh(),{value:i,error:o}=r,{customTextRenderer:a,page:l}=n;function c(){i&&t&&t(i)}function u(){o&&(En(!1,o.toString()),e&&e(o))}return A.useEffect(function(){s({type:"RESET"})},[s,l]),A.useEffect(function(){if(a||!l)return;const p=ig(l.getStructTree()),g=p;return p.promise.then(m=>{s({type:"RESOLVE",value:m})}).catch(m=>{s({type:"REJECT",error:m})}),()=>Wl(g)},[a,l,s]),A.useEffect(()=>{if(i!==void 0){if(i===!1){u();return}c()}},[i]),i?V.jsx(oN,{className:"react-pdf__Page__structTree structTree",node:i}):null}const J1=GM;function gH(n){const e=a_();Ke(e);const t=Object.assign(Object.assign({},e),n),{_className:r,canvasBackground:s,devicePixelRatio:i=tH(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:c,renderTextLayer:u,rotate:f,scale:p}=t,{canvasRef:g}=n;Ke(l);const m=A.useRef(null);function y(){l&&a&&a(hA(l,p))}function w(R){rH(R)||(En(!1,R.toString()),o&&o(R))}const _=A.useMemo(()=>l.getViewport({scale:p*i,rotation:f}),[i,l,f,p]),E=A.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);A.useEffect(function(){if(!l)return;l.cleanup();const{current:D}=m;if(!D)return;D.width=_.width,D.height=_.height,D.style.width=`${Math.floor(E.width)}px`,D.style.height=`${Math.floor(E.height)}px`,D.style.visibility="hidden";const F={annotationMode:c?J1.ENABLE_FORMS:J1.ENABLE,canvasContext:D.getContext("2d",{alpha:!1}),viewport:_};s&&(F.background=s);const C=l.render(F),T=C;return C.promise.then(()=>{D.style.visibility="",y()}).catch(w),()=>Wl(T)},[s,l,c,_,E]);const S=A.useCallback(()=>{const{current:R}=m;R&&(R.width=0,R.height=0)},[]);return A.useEffect(()=>S,[S]),V.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:tN(g,m),style:{display:"block",userSelect:"none"},children:u?V.jsx(pH,{}):null})}function mH(n){return"str"in n}function vH(){const n=a_();Ke(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:l,rotate:c,scale:u}=n;Ke(o);const[f,p]=rh(),{value:g,error:m}=f,y=A.useRef(null),w=A.useRef(void 0);En(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){g&&r&&r(g)}function E(){m&&(En(!1,m.toString()),t&&t(m))}A.useEffect(function(){p({type:"RESET"})},[o,p]),A.useEffect(function(){if(!o)return;const k=ig(o.getTextContent()),M=k;return k.promise.then(O=>{p({type:"RESOLVE",value:O})}).catch(O=>{p({type:"REJECT",error:O})}),()=>Wl(M)},[o,p]),A.useEffect(()=>{if(g!==void 0){if(g===!1){E();return}_()}},[g]);const S=A.useCallback(()=>{i&&i()},[i]),R=A.useCallback(T=>{En(!1,T.toString()),s&&s(T)},[s]);function D(){const T=w.current;T&&T.classList.add("active")}function F(){const T=w.current;T&&T.classList.remove("active")}const C=A.useMemo(()=>o.getViewport({scale:u,rotation:c}),[o,c,u]);return A.useLayoutEffect(function(){if(!o||!g)return;const{current:k}=y;if(!k)return;k.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),O={container:k,textContentSource:M,viewport:C},B=new qM(O),N=B;return B.render().then(()=>{const q=document.createElement("div");q.className="endOfContent",k.append(q),w.current=q;const re=k.querySelectorAll('[role="presentation"]');if(e){let Z=0;g.items.forEach((W,U)=>{if(!mH(W))return;const z=re[Z];if(!z)return;const X=e(Object.assign({pageIndex:a,pageNumber:l,itemIndex:U},W));z.innerHTML=X,Z+=W.str&&W.hasEOL?2:1})}S()}).catch(R),()=>Wl(N)},[e,R,S,o,a,l,g,C]),V.jsx("div",{className:s_("react-pdf__Page__textContent","textLayer"),onMouseUp:F,onMouseDown:D,ref:y})}function yH(){const n=eN(),e=a_();Ke(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:r,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:c,pdf:u,renderForms:f,rotate:p,scale:g=1}=t;Ke(u),Ke(c),Ke(s);const[m,y]=rh(),{value:w,error:_}=m,E=A.useRef(null);En(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){w&&o&&o(w)}function R(){_&&(En(!1,_.toString()),i&&i(_))}A.useEffect(function(){y({type:"RESET"})},[y,c]),A.useEffect(function(){if(!c)return;const k=ig(c.getAnnotations()),M=k;return k.promise.then(O=>{y({type:"RESOLVE",value:O})}).catch(O=>{y({type:"REJECT",error:O})}),()=>{Wl(M)}},[y,c]),A.useEffect(()=>{if(w!==void 0){if(w===!1){R();return}S()}},[w]);function D(){l&&l()}function F(T){En(!1,`${T}`),a&&a(T)}const C=A.useMemo(()=>c.getViewport({scale:g,rotation:p}),[c,p,g]);return A.useEffect(function(){if(!u||!c||!s||!w)return;const{current:k}=E;if(!k)return;const M=C.clone({dontFlip:!0}),O={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:k,l10n:null,page:c,viewport:M},B={annotations:w,annotationStorage:u.annotationStorage,div:k,imageResourcesPath:r,linkService:s,page:c,renderForms:f,viewport:M};k.innerHTML="";try{new WM(O).render(B),D()}catch(N){F(N)}return()=>{}},[w,r,s,c,u,f,C]),V.jsx("div",{className:s_("react-pdf__Page__annotations","annotationLayer"),ref:E})}var _H=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Z1=1;function EH(n){const e=eN(),t=Object.assign(Object.assign({},e),n),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:o,children:a,className:l,customRenderer:c,customTextRenderer:u,devicePixelRatio:f,error:p="Failed to load the page.",height:g,inputRef:m,loading:y="Loading page…",noData:w="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:E,onGetStructTreeError:S,onGetStructTreeSuccess:R,onGetTextError:D,onGetTextSuccess:F,onLoadError:C,onLoadSuccess:T,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:M,onRenderError:O,onRenderSuccess:B,onRenderTextLayerError:N,onRenderTextLayerSuccess:q,pageIndex:re,pageNumber:Z,pdf:W,registerPage:U,renderAnnotationLayer:z=!0,renderForms:X=!1,renderMode:ce="canvas",renderTextLayer:se=!0,rotate:ae,scale:je=Z1,unregisterPage:Ue,width:Pe}=t,fe=_H(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ut,Je]=rh(),{value:Ie,error:Jn}=ut,wr=A.useRef(null);Ke(W);const Ae=wa(Z)?Z-1:re??null,We=Z??(wa(re)?re+1:null),ht=ae??(Ie?Ie.rotate:null),rt=A.useMemo(()=>{if(!Ie)return null;let dt=1;const Ks=je??Z1;if(Pe||g){const pa=Ie.getViewport({scale:1,rotation:ht});Pe?dt=Pe/pa.width:g&&(dt=g/pa.height)}return Ks*dt},[g,Ie,ht,je,Pe]);A.useEffect(function(){return()=>{wa(Ae)&&s&&Ue&&Ue(Ae)}},[s,W,Ae,Ue]);function us(){if(T){if(!Ie||!rt)return;T(hA(Ie,rt))}if(s&&U){if(!wa(Ae)||!wr.current)return;U(Ae,wr.current)}}function Gs(){Jn&&(En(!1,Jn.toString()),C&&C(Jn))}A.useEffect(function(){Je({type:"RESET"})},[Je,W,Ae]),A.useEffect(function(){if(!W||!We)return;const Ks=ig(W.getPage(We)),pa=Ks;return Ks.promise.then(sc=>{Je({type:"RESOLVE",value:sc})}).catch(sc=>{Je({type:"REJECT",error:sc})}),()=>Wl(pa)},[Je,W,We]),A.useEffect(()=>{if(Ie!==void 0){if(Ie===!1){Gs();return}us()}},[Ie,rt]);const qs=A.useMemo(()=>Ie&&wa(Ae)&&We&&wa(ht)&&wa(rt)?{_className:r,canvasBackground:i,customTextRenderer:u,devicePixelRatio:f,onGetAnnotationsError:_,onGetAnnotationsSuccess:E,onGetStructTreeError:S,onGetStructTreeSuccess:R,onGetTextError:D,onGetTextSuccess:F,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:M,onRenderError:O,onRenderSuccess:B,onRenderTextLayerError:N,onRenderTextLayerSuccess:q,page:Ie,pageIndex:Ae,pageNumber:We,renderForms:X,renderTextLayer:se,rotate:ht,scale:rt}:null,[r,i,u,f,_,E,S,R,D,F,k,M,O,B,N,q,Ie,Ae,We,X,se,ht,rt]),Sh=A.useMemo(()=>XM(fe,()=>Ie&&(rt?hA(Ie,rt):void 0)),[fe,Ie,rt]),fa=`${Ae}@${rt}/${ht}`;function T_(){switch(ce){case"custom":return Ke(c),V.jsx(c,{},`${fa}_custom`);case"none":return null;case"canvas":default:return V.jsx(gH,{canvasRef:o},`${fa}_canvas`)}}function Th(){return se?V.jsx(vH,{},`${fa}_text`):null}function Ch(){return z?V.jsx(yH,{},`${fa}_annotations`):null}function dg(){return V.jsxs(nN.Provider,{value:qs,children:[T_(),Th(),Ch(),a]})}function jt(){return We?W===null||Ie===void 0||Ie===null?V.jsx(Kc,{type:"loading",children:typeof y=="function"?y():y}):W===!1||Ie===!1?V.jsx(Kc,{type:"error",children:typeof p=="function"?p():p}):dg():V.jsx(Kc,{type:"no-data",children:typeof w=="function"?w():w})}return V.jsx("div",Object.assign({className:s_(r,l),"data-page-number":We,ref:tN(m,wr),style:{"--scale-factor":`${rt}`,backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Sh,{children:jt()}))}nH();gS.workerSrc="pdf.worker.mjs";function wH(){const[n,e]=A.useState("");A.useEffect(()=>{e("https://fmcjrkoabikaexixbppg.supabase.co/storage/v1/object/public/resume/resume.pdf")},[]);const[t]=A.useState(1);return V.jsx("div",{className:"pdf-div",children:n&&V.jsx(cH,{file:n,children:V.jsx(EH,{pageNumber:t,renderTextLayer:!1,renderAnnotationLayer:!1})})})}const AH="/assets/linkedin-DvbM5N3o.png",bH="/assets/instagram-DsqoG5P9.png",SH="/assets/youtube-rHJN1bq4.png",TH="/assets/gmail-DoONwEbf.png",CH="/assets/contact-Ctb_tZ2q.png";function xH(){return V.jsxs("div",{className:"contact",children:[V.jsxs("div",{className:"socialMedia",children:[V.jsxs("h2",{className:"contact-title",children:["contact",V.jsx("span",{children:"."})]}),V.jsxs("p",{className:"contact-description",children:["Get in touch with me via social media ",V.jsx("br",{})," or send me an email."]}),V.jsxs("div",{className:"contact-icons",children:[V.jsx("a",{href:"https://www.linkedin.com/in/g-adarsh-sonu/",target:"_blank",children:V.jsx("img",{src:AH,alt:"LinkedIn"})}),V.jsx("a",{href:"https://instagram.com/g_adarsh_sonu",target:"_blank",children:V.jsx("img",{src:bH,alt:"Instagram"})}),V.jsx("a",{href:"mailto:g.adarsh043@gmail.com",children:V.jsx("img",{src:TH,alt:"Gmail"})}),V.jsx("a",{href:"https://youtube.com/@g_adarsh_sonu",target:"_blank",children:V.jsx("img",{src:SH,alt:"YouTube"})})]})]}),V.jsx("div",{className:"contact-image-container",children:V.jsx("img",{src:CH,alt:"Contact",className:"contact-image"})})]})}var ex={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},RH=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},lN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(t[u],t[f],t[p],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new PH;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const m=c<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IH=function(n){const e=aN(n);return lN.encodeByteArray(e,!0)},Uv=function(n){return IH(n).replace(/\./g,"")},kH=function(n){try{return lN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=()=>LH().__FIREBASE_DEFAULTS__,NH=()=>{if(typeof process>"u"||typeof ex>"u")return;const n=ex.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kH(n[1]);return e&&JSON.parse(e)},mS=()=>{try{return MH()||NH()||DH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OH=n=>{var e,t;return(t=(e=mS())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},cN=n=>{const e=OH(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uN=()=>{var n;return(n=mS())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Uv(JSON.stringify(t)),Uv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BH(){var n;const e=(n=mS())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jH(){return!BH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UH(){try{return typeof indexedDB=="object"}catch{return!1}}function $H(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH="FirebaseError";class tc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=zH,Object.setPrototypeOf(this,tc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dN.prototype.create)}}class dN{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?HH(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new tc(s,a,r)}}function HH(n,e){return n.replace(WH,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const WH=/\{\$([^}]+)}/g;function dA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(tx(i)&&tx(o)){if(!dA(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function tx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n){return n&&n._delegate?n._delegate:n}class sh{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new FH;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KH(e))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xa){return this.instances.has(e)}getOptions(e=xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xa){return this.component?this.component.multipleInstances?e:xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qH(n){return n===xa?void 0:n}function KH(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ce||(Ce={}));const YH={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},QH=Ce.INFO,JH={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},ZH=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=JH[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pN{constructor(e){this.name=e,this._logLevel=QH,this._logHandler=ZH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const e5=(n,e)=>e.some(t=>n instanceof t);let nx,rx;function t5(){return nx||(nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n5(){return rx||(rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gN=new WeakMap,fA=new WeakMap,mN=new WeakMap,k0=new WeakMap,vS=new WeakMap;function r5(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Wo(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&gN.set(t,n)}).catch(()=>{}),vS.set(e,n),e}function s5(n){if(fA.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});fA.set(n,e)}let pA={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fA.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function i5(n){pA=n(pA)}function o5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(L0(this),e,...t);return mN.set(r,e.sort?e.sort():[e]),Wo(r)}:n5().includes(n)?function(...e){return n.apply(L0(this),e),Wo(gN.get(this))}:function(...e){return Wo(n.apply(L0(this),e))}}function a5(n){return typeof n=="function"?o5(n):(n instanceof IDBTransaction&&s5(n),e5(n,t5())?new Proxy(n,pA):n)}function Wo(n){if(n instanceof IDBRequest)return r5(n);if(k0.has(n))return k0.get(n);const e=a5(n);return e!==n&&(k0.set(n,e),vS.set(e,n)),e}const L0=n=>vS.get(n);function l5(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=Wo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Wo(o.result),l.oldVersion,l.newVersion,Wo(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const c5=["get","getKey","getAll","getAllKeys","count"],u5=["put","add","delete","clear"],M0=new Map;function sx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(M0.get(e))return M0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=u5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||c5.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return M0.set(e,i),i}i5(n=>({...n,get:(e,t,r)=>sx(e,t)||n.get(e,t,r),has:(e,t)=>!!sx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(d5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function d5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gA="@firebase/app",ix="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new pN("@firebase/app"),f5="@firebase/app-compat",p5="@firebase/analytics-compat",g5="@firebase/analytics",m5="@firebase/app-check-compat",v5="@firebase/app-check",y5="@firebase/auth",_5="@firebase/auth-compat",E5="@firebase/database",w5="@firebase/data-connect",A5="@firebase/database-compat",b5="@firebase/functions",S5="@firebase/functions-compat",T5="@firebase/installations",C5="@firebase/installations-compat",x5="@firebase/messaging",R5="@firebase/messaging-compat",P5="@firebase/performance",I5="@firebase/performance-compat",k5="@firebase/remote-config",L5="@firebase/remote-config-compat",M5="@firebase/storage",N5="@firebase/storage-compat",D5="@firebase/firestore",O5="@firebase/vertexai",F5="@firebase/firestore-compat",V5="firebase",B5="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="[DEFAULT]",j5={[gA]:"fire-core",[f5]:"fire-core-compat",[g5]:"fire-analytics",[p5]:"fire-analytics-compat",[v5]:"fire-app-check",[m5]:"fire-app-check-compat",[y5]:"fire-auth",[_5]:"fire-auth-compat",[E5]:"fire-rtdb",[w5]:"fire-data-connect",[A5]:"fire-rtdb-compat",[b5]:"fire-fn",[S5]:"fire-fn-compat",[T5]:"fire-iid",[C5]:"fire-iid-compat",[x5]:"fire-fcm",[R5]:"fire-fcm-compat",[P5]:"fire-perf",[I5]:"fire-perf-compat",[k5]:"fire-rc",[L5]:"fire-rc-compat",[M5]:"fire-gcs",[N5]:"fire-gcs-compat",[D5]:"fire-fst",[F5]:"fire-fst-compat",[O5]:"fire-vertex","fire-js":"fire-js",[V5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map,U5=new Map,vA=new Map;function ox(n,e){try{n.container.addComponent(e)}catch(t){Wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function lf(n){const e=n.name;if(vA.has(e))return Wi.debug(`There were multiple attempts to register component ${e}.`),!1;vA.set(e,n);for(const t of $v.values())ox(t,n);for(const t of U5.values())ox(t,n);return!0}function vN(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Go=new dN("app","Firebase",$5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=B5;function _N(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mA,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Go.create("bad-app-name",{appName:String(s)});if(t||(t=uN()),!t)throw Go.create("no-options");const i=$v.get(s);if(i){if(dA(t,i.options)&&dA(r,i.config))return i;throw Go.create("duplicate-app",{appName:s})}const o=new XH(s);for(const l of vA.values())o.addComponent(l);const a=new z5(t,r,o);return $v.set(s,a),a}function EN(n=mA){const e=$v.get(n);if(!e&&n===mA&&uN())return _N();if(!e)throw Go.create("no-app",{appName:n});return e}function qo(n,e,t){var r;let s=(r=j5[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wi.warn(a.join(" "));return}lf(new sh(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="firebase-heartbeat-database",W5=1,cf="firebase-heartbeat-store";let N0=null;function wN(){return N0||(N0=l5(H5,W5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Go.create("idb-open",{originalErrorMessage:n.message})})),N0}async function G5(n){try{const t=(await wN()).transaction(cf),r=await t.objectStore(cf).get(AN(n));return await t.done,r}catch(e){if(e instanceof tc)Wi.warn(e.message);else{const t=Go.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wi.warn(t.message)}}}async function ax(n,e){try{const r=(await wN()).transaction(cf,"readwrite");await r.objectStore(cf).put(e,AN(n)),await r.done}catch(t){if(t instanceof tc)Wi.warn(t.message);else{const r=Go.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Wi.warn(r.message)}}}function AN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=1024,K5=30*24*60*60*1e3;class X5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Q5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=lx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=K5}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lx(),{heartbeatsToSend:r,unsentEntries:s}=Y5(this._heartbeatsCache.heartbeats),i=Uv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Wi.warn(t),""}}}function lx(){return new Date().toISOString().substring(0,10)}function Y5(n,e=q5){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),cx(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),cx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Q5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UH()?$H().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await G5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ax(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ax(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cx(n){return Uv(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(n){lf(new sh("platform-logger",e=>new h5(e),"PRIVATE")),lf(new sh("heartbeat",e=>new X5(e),"PRIVATE")),qo(gA,ix,n),qo(gA,ix,"esm2017"),qo("fire-js","")}J5("");var Z5="firebase",e6="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qo(Z5,e6,"app");var ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ml,bN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function k(){}k.prototype=T.prototype,C.D=T.prototype,C.prototype=new k,C.prototype.constructor=C,C.C=function(M,O,B){for(var N=Array(arguments.length-2),q=2;q<arguments.length;q++)N[q-2]=arguments[q];return T.prototype[O].apply(M,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,T,k){k||(k=0);var M=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)M[O]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(O=0;16>O;++O)M[O]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=C.g[0],k=C.g[1],O=C.g[2];var B=C.g[3],N=T+(B^k&(O^B))+M[0]+3614090360&4294967295;T=k+(N<<7&4294967295|N>>>25),N=B+(O^T&(k^O))+M[1]+3905402710&4294967295,B=T+(N<<12&4294967295|N>>>20),N=O+(k^B&(T^k))+M[2]+606105819&4294967295,O=B+(N<<17&4294967295|N>>>15),N=k+(T^O&(B^T))+M[3]+3250441966&4294967295,k=O+(N<<22&4294967295|N>>>10),N=T+(B^k&(O^B))+M[4]+4118548399&4294967295,T=k+(N<<7&4294967295|N>>>25),N=B+(O^T&(k^O))+M[5]+1200080426&4294967295,B=T+(N<<12&4294967295|N>>>20),N=O+(k^B&(T^k))+M[6]+2821735955&4294967295,O=B+(N<<17&4294967295|N>>>15),N=k+(T^O&(B^T))+M[7]+4249261313&4294967295,k=O+(N<<22&4294967295|N>>>10),N=T+(B^k&(O^B))+M[8]+1770035416&4294967295,T=k+(N<<7&4294967295|N>>>25),N=B+(O^T&(k^O))+M[9]+2336552879&4294967295,B=T+(N<<12&4294967295|N>>>20),N=O+(k^B&(T^k))+M[10]+4294925233&4294967295,O=B+(N<<17&4294967295|N>>>15),N=k+(T^O&(B^T))+M[11]+2304563134&4294967295,k=O+(N<<22&4294967295|N>>>10),N=T+(B^k&(O^B))+M[12]+1804603682&4294967295,T=k+(N<<7&4294967295|N>>>25),N=B+(O^T&(k^O))+M[13]+4254626195&4294967295,B=T+(N<<12&4294967295|N>>>20),N=O+(k^B&(T^k))+M[14]+2792965006&4294967295,O=B+(N<<17&4294967295|N>>>15),N=k+(T^O&(B^T))+M[15]+1236535329&4294967295,k=O+(N<<22&4294967295|N>>>10),N=T+(O^B&(k^O))+M[1]+4129170786&4294967295,T=k+(N<<5&4294967295|N>>>27),N=B+(k^O&(T^k))+M[6]+3225465664&4294967295,B=T+(N<<9&4294967295|N>>>23),N=O+(T^k&(B^T))+M[11]+643717713&4294967295,O=B+(N<<14&4294967295|N>>>18),N=k+(B^T&(O^B))+M[0]+3921069994&4294967295,k=O+(N<<20&4294967295|N>>>12),N=T+(O^B&(k^O))+M[5]+3593408605&4294967295,T=k+(N<<5&4294967295|N>>>27),N=B+(k^O&(T^k))+M[10]+38016083&4294967295,B=T+(N<<9&4294967295|N>>>23),N=O+(T^k&(B^T))+M[15]+3634488961&4294967295,O=B+(N<<14&4294967295|N>>>18),N=k+(B^T&(O^B))+M[4]+3889429448&4294967295,k=O+(N<<20&4294967295|N>>>12),N=T+(O^B&(k^O))+M[9]+568446438&4294967295,T=k+(N<<5&4294967295|N>>>27),N=B+(k^O&(T^k))+M[14]+3275163606&4294967295,B=T+(N<<9&4294967295|N>>>23),N=O+(T^k&(B^T))+M[3]+4107603335&4294967295,O=B+(N<<14&4294967295|N>>>18),N=k+(B^T&(O^B))+M[8]+1163531501&4294967295,k=O+(N<<20&4294967295|N>>>12),N=T+(O^B&(k^O))+M[13]+2850285829&4294967295,T=k+(N<<5&4294967295|N>>>27),N=B+(k^O&(T^k))+M[2]+4243563512&4294967295,B=T+(N<<9&4294967295|N>>>23),N=O+(T^k&(B^T))+M[7]+1735328473&4294967295,O=B+(N<<14&4294967295|N>>>18),N=k+(B^T&(O^B))+M[12]+2368359562&4294967295,k=O+(N<<20&4294967295|N>>>12),N=T+(k^O^B)+M[5]+4294588738&4294967295,T=k+(N<<4&4294967295|N>>>28),N=B+(T^k^O)+M[8]+2272392833&4294967295,B=T+(N<<11&4294967295|N>>>21),N=O+(B^T^k)+M[11]+1839030562&4294967295,O=B+(N<<16&4294967295|N>>>16),N=k+(O^B^T)+M[14]+4259657740&4294967295,k=O+(N<<23&4294967295|N>>>9),N=T+(k^O^B)+M[1]+2763975236&4294967295,T=k+(N<<4&4294967295|N>>>28),N=B+(T^k^O)+M[4]+1272893353&4294967295,B=T+(N<<11&4294967295|N>>>21),N=O+(B^T^k)+M[7]+4139469664&4294967295,O=B+(N<<16&4294967295|N>>>16),N=k+(O^B^T)+M[10]+3200236656&4294967295,k=O+(N<<23&4294967295|N>>>9),N=T+(k^O^B)+M[13]+681279174&4294967295,T=k+(N<<4&4294967295|N>>>28),N=B+(T^k^O)+M[0]+3936430074&4294967295,B=T+(N<<11&4294967295|N>>>21),N=O+(B^T^k)+M[3]+3572445317&4294967295,O=B+(N<<16&4294967295|N>>>16),N=k+(O^B^T)+M[6]+76029189&4294967295,k=O+(N<<23&4294967295|N>>>9),N=T+(k^O^B)+M[9]+3654602809&4294967295,T=k+(N<<4&4294967295|N>>>28),N=B+(T^k^O)+M[12]+3873151461&4294967295,B=T+(N<<11&4294967295|N>>>21),N=O+(B^T^k)+M[15]+530742520&4294967295,O=B+(N<<16&4294967295|N>>>16),N=k+(O^B^T)+M[2]+3299628645&4294967295,k=O+(N<<23&4294967295|N>>>9),N=T+(O^(k|~B))+M[0]+4096336452&4294967295,T=k+(N<<6&4294967295|N>>>26),N=B+(k^(T|~O))+M[7]+1126891415&4294967295,B=T+(N<<10&4294967295|N>>>22),N=O+(T^(B|~k))+M[14]+2878612391&4294967295,O=B+(N<<15&4294967295|N>>>17),N=k+(B^(O|~T))+M[5]+4237533241&4294967295,k=O+(N<<21&4294967295|N>>>11),N=T+(O^(k|~B))+M[12]+1700485571&4294967295,T=k+(N<<6&4294967295|N>>>26),N=B+(k^(T|~O))+M[3]+2399980690&4294967295,B=T+(N<<10&4294967295|N>>>22),N=O+(T^(B|~k))+M[10]+4293915773&4294967295,O=B+(N<<15&4294967295|N>>>17),N=k+(B^(O|~T))+M[1]+2240044497&4294967295,k=O+(N<<21&4294967295|N>>>11),N=T+(O^(k|~B))+M[8]+1873313359&4294967295,T=k+(N<<6&4294967295|N>>>26),N=B+(k^(T|~O))+M[15]+4264355552&4294967295,B=T+(N<<10&4294967295|N>>>22),N=O+(T^(B|~k))+M[6]+2734768916&4294967295,O=B+(N<<15&4294967295|N>>>17),N=k+(B^(O|~T))+M[13]+1309151649&4294967295,k=O+(N<<21&4294967295|N>>>11),N=T+(O^(k|~B))+M[4]+4149444226&4294967295,T=k+(N<<6&4294967295|N>>>26),N=B+(k^(T|~O))+M[11]+3174756917&4294967295,B=T+(N<<10&4294967295|N>>>22),N=O+(T^(B|~k))+M[2]+718787259&4294967295,O=B+(N<<15&4294967295|N>>>17),N=k+(B^(O|~T))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+B&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var k=T-this.blockSize,M=this.B,O=this.h,B=0;B<T;){if(O==0)for(;B<=k;)s(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<T;)if(M[O++]=C.charCodeAt(B++),O==this.blockSize){s(this,M),O=0;break}}else for(;B<T;)if(M[O++]=C[B++],O==this.blockSize){s(this,M),O=0;break}}this.h=O,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var k=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=k&255,k/=256;for(this.u(C),C=Array(16),T=k=0;4>T;++T)for(var M=0;32>M;M+=8)C[k++]=this.g[T]>>>M&255;return C};function i(C,T){var k=a;return Object.prototype.hasOwnProperty.call(k,C)?k[C]:k[C]=T(C)}function o(C,T){this.h=T;for(var k=[],M=!0,O=C.length-1;0<=O;O--){var B=C[O]|0;M&&B==T||(k[O]=B,M=!1)}this.g=k}var a={};function l(C){return-128<=C&&128>C?i(C,function(T){return new o([T|0],0>T?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return w(c(-C));for(var T=[],k=1,M=0;C>=k;M++)T[M]=C/k|0,k*=4294967296;return new o(T,0)}function u(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return w(u(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(T,8)),M=f,O=0;O<C.length;O+=8){var B=Math.min(8,C.length-O),N=parseInt(C.substring(O,O+B),T);8>B?(B=c(Math.pow(T,B)),M=M.j(B).add(c(N))):(M=M.j(k),M=M.add(c(N)))}return M}var f=l(0),p=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(y(this))return-w(this).m();for(var C=0,T=1,k=0;k<this.g.length;k++){var M=this.i(k);C+=(0<=M?M:4294967296+M)*T,T*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(y(this))return"-"+w(this).toString(C);for(var T=c(Math.pow(C,6)),k=this,M="";;){var O=R(k,T).g;k=_(k,O.j(T));var B=((0<k.g.length?k.g[0]:k.h)>>>0).toString(C);if(k=O,m(k))return B+M;for(;6>B.length;)B="0"+B;M=B+M}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function y(C){return C.h==-1}n.l=function(C){return C=_(this,C),y(C)?-1:m(C)?0:1};function w(C){for(var T=C.g.length,k=[],M=0;M<T;M++)k[M]=~C.g[M];return new o(k,~C.h).add(p)}n.abs=function(){return y(this)?w(this):this},n.add=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],M=0,O=0;O<=T;O++){var B=M+(this.i(O)&65535)+(C.i(O)&65535),N=(B>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);M=N>>>16,B&=65535,N&=65535,k[O]=N<<16|B}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(C,T){return C.add(w(T))}n.j=function(C){if(m(this)||m(C))return f;if(y(this))return y(C)?w(this).j(w(C)):w(w(this).j(C));if(y(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var T=this.g.length+C.g.length,k=[],M=0;M<2*T;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(var O=0;O<C.g.length;O++){var B=this.i(M)>>>16,N=this.i(M)&65535,q=C.i(O)>>>16,re=C.i(O)&65535;k[2*M+2*O]+=N*re,E(k,2*M+2*O),k[2*M+2*O+1]+=B*re,E(k,2*M+2*O+1),k[2*M+2*O+1]+=N*q,E(k,2*M+2*O+1),k[2*M+2*O+2]+=B*q,E(k,2*M+2*O+2)}for(M=0;M<T;M++)k[M]=k[2*M+1]<<16|k[2*M];for(M=T;M<2*T;M++)k[M]=0;return new o(k,0)};function E(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function S(C,T){this.g=C,this.h=T}function R(C,T){if(m(T))throw Error("division by zero");if(m(C))return new S(f,f);if(y(C))return T=R(w(C),T),new S(w(T.g),w(T.h));if(y(T))return T=R(C,w(T)),new S(w(T.g),T.h);if(30<C.g.length){if(y(C)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var k=p,M=T;0>=M.l(C);)k=D(k),M=D(M);var O=F(k,1),B=F(M,1);for(M=F(M,2),k=F(k,2);!m(M);){var N=B.add(M);0>=N.l(C)&&(O=O.add(k),B=N),M=F(M,1),k=F(k,1)}return T=_(C,O.j(T)),new S(O,T)}for(O=f;0<=C.l(T);){for(k=Math.max(1,Math.floor(C.m()/T.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),B=c(k),N=B.j(T);y(N)||0<N.l(C);)k-=M,B=c(k),N=B.j(T);m(B)&&(B=p),O=O.add(B),C=_(C,N)}return new S(O,C)}n.A=function(C){return R(this,C).h},n.and=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)&C.i(M);return new o(k,this.h&C.h)},n.or=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)|C.i(M);return new o(k,this.h|C.h)},n.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)^C.i(M);return new o(k,this.h^C.h)};function D(C){for(var T=C.g.length+1,k=[],M=0;M<T;M++)k[M]=C.i(M)<<1|C.i(M-1)>>>31;return new o(k,C.h)}function F(C,T){var k=T>>5;T%=32;for(var M=C.g.length-k,O=[],B=0;B<M;B++)O[B]=0<T?C.i(B+k)>>>T|C.i(B+k+1)<<32-T:C.i(B+k);return new o(O,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Ml=o}).apply(typeof ux<"u"?ux:typeof self<"u"?self:typeof window<"u"?window:{});var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var SN,yd,TN,Qm,yA,CN,xN,RN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,b){return d==Array.prototype||d==Object.prototype||(d[v]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof tm=="object"&&tm];for(var v=0;v<d.length;++v){var b=d[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(d,v){if(v)e:{var b=r;d=d.split(".");for(var L=0;L<d.length-1;L++){var j=d[L];if(!(j in b))break e;b=b[j]}d=d[d.length-1],L=b[d],v=v(L),v!=L&&v!=null&&e(b,d,{configurable:!0,writable:!0,value:v})}}function i(d,v){d instanceof String&&(d+="");var b=0,L=!1,j={next:function(){if(!L&&b<d.length){var $=b++;return{value:v($,d[$]),done:!1}}return L=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(d){return d||function(){return i(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function u(d,v,b){return d.call.apply(d.bind,arguments)}function f(d,v,b){if(!d)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,L),d.apply(v,j)}}return function(){return d.apply(v,arguments)}}function p(d,v,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function g(d,v){var b=Array.prototype.slice.call(arguments,1);return function(){var L=b.slice();return L.push.apply(L,arguments),d.apply(this,L)}}function m(d,v){function b(){}b.prototype=v.prototype,d.aa=v.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(L,j,$){for(var K=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)K[Ge-2]=arguments[Ge];return v.prototype[j].apply(L,K)}}function y(d){const v=d.length;if(0<v){const b=Array(v);for(let L=0;L<v;L++)b[L]=d[L];return b}return[]}function w(d,v){for(let b=1;b<arguments.length;b++){const L=arguments[b];if(l(L)){const j=d.length||0,$=L.length||0;d.length=j+$;for(let K=0;K<$;K++)d[j+K]=L[K]}else d.push(L)}}class _{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function E(d){return/^[\s\xa0]*$/.test(d)}function S(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(d,v,b){for(const L in d)v.call(b,d[L],L,d)}function C(d,v){for(const b in d)v.call(void 0,d[b],b,d)}function T(d){const v={};for(const b in d)v[b]=d[b];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,v){let b,L;for(let j=1;j<arguments.length;j++){L=arguments[j];for(b in L)d[b]=L[b];for(let $=0;$<k.length;$++)b=k[$],Object.prototype.hasOwnProperty.call(L,b)&&(d[b]=L[b])}}function O(d){var v=1;d=d.split(":");const b=[];for(;0<v&&d.length;)b.push(d.shift()),v--;return d.length&&b.push(d.join(":")),b}function B(d){a.setTimeout(()=>{throw d},0)}function N(){var d=z;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class q{constructor(){this.h=this.g=null}add(v,b){const L=re.get();L.set(v,b),this.h?this.h.next=L:this.g=L,this.h=L}}var re=new _(()=>new Z,d=>d.reset());class Z{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let W,U=!1,z=new q,X=()=>{const d=a.Promise.resolve(void 0);W=()=>{d.then(ce)}};var ce=()=>{for(var d;d=N();){try{d.h.call(d.g)}catch(b){B(b)}var v=re;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}U=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var je=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,v),a.removeEventListener("test",b,v)}catch{}return d}();function Ue(d,v){if(ae.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,L=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(D){e:{try{R(v.nodeName);var j=!0;break e}catch{}j=!1}j||(v=null)}}else b=="mouseover"?v=d.fromElement:b=="mouseout"&&(v=d.toElement);this.relatedTarget=v,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Pe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ue.aa.h.call(this)}}m(Ue,ae);var Pe={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ut=0;function Je(d,v,b,L,j){this.listener=d,this.proxy=null,this.src=v,this.type=b,this.capture=!!L,this.ha=j,this.key=++ut,this.da=this.fa=!1}function Ie(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Jn(d){this.src=d,this.g={},this.h=0}Jn.prototype.add=function(d,v,b,L,j){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var K=Ae(d,v,L,j);return-1<K?(v=d[K],b||(v.fa=!1)):(v=new Je(v,this.src,$,!!L,j),v.fa=b,d.push(v)),v};function wr(d,v){var b=v.type;if(b in d.g){var L=d.g[b],j=Array.prototype.indexOf.call(L,v,void 0),$;($=0<=j)&&Array.prototype.splice.call(L,j,1),$&&(Ie(v),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Ae(d,v,b,L){for(var j=0;j<d.length;++j){var $=d[j];if(!$.da&&$.listener==v&&$.capture==!!b&&$.ha==L)return j}return-1}var We="closure_lm_"+(1e6*Math.random()|0),ht={};function rt(d,v,b,L,j){if(Array.isArray(v)){for(var $=0;$<v.length;$++)rt(d,v[$],b,L,j);return null}return b=dg(b),d&&d[fe]?d.K(v,b,c(L)?!!L.capture:!!L,j):us(d,v,b,!1,L,j)}function us(d,v,b,L,j,$){if(!v)throw Error("Invalid event type");var K=c(j)?!!j.capture:!!j,Ge=Th(d);if(Ge||(d[We]=Ge=new Jn(d)),b=Ge.add(v,b,L,K,$),b.proxy)return b;if(L=Gs(),b.proxy=L,L.src=d,L.listener=b,d.addEventListener)je||(j=K),j===void 0&&(j=!1),d.addEventListener(v.toString(),L,j);else if(d.attachEvent)d.attachEvent(fa(v.toString()),L);else if(d.addListener&&d.removeListener)d.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Gs(){function d(b){return v.call(d.src,d.listener,b)}const v=T_;return d}function qs(d,v,b,L,j){if(Array.isArray(v))for(var $=0;$<v.length;$++)qs(d,v[$],b,L,j);else L=c(L)?!!L.capture:!!L,b=dg(b),d&&d[fe]?(d=d.i,v=String(v).toString(),v in d.g&&($=d.g[v],b=Ae($,b,L,j),-1<b&&(Ie($[b]),Array.prototype.splice.call($,b,1),$.length==0&&(delete d.g[v],d.h--)))):d&&(d=Th(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Ae(v,b,L,j)),(b=-1<d?v[d]:null)&&Sh(b))}function Sh(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[fe])wr(v.i,d);else{var b=d.type,L=d.proxy;v.removeEventListener?v.removeEventListener(b,L,d.capture):v.detachEvent?v.detachEvent(fa(b),L):v.addListener&&v.removeListener&&v.removeListener(L),(b=Th(v))?(wr(b,d),b.h==0&&(b.src=null,v[We]=null)):Ie(d)}}}function fa(d){return d in ht?ht[d]:ht[d]="on"+d}function T_(d,v){if(d.da)d=!0;else{v=new Ue(v,this);var b=d.listener,L=d.ha||d.src;d.fa&&Sh(d),d=b.call(L,v)}return d}function Th(d){return d=d[We],d instanceof Jn?d:null}var Ch="__closure_events_fn_"+(1e9*Math.random()>>>0);function dg(d){return typeof d=="function"?d:(d[Ch]||(d[Ch]=function(v){return d.handleEvent(v)}),d[Ch])}function jt(){se.call(this),this.i=new Jn(this),this.M=this,this.F=null}m(jt,se),jt.prototype[fe]=!0,jt.prototype.removeEventListener=function(d,v,b,L){qs(this,d,v,b,L)};function dt(d,v){var b,L=d.F;if(L)for(b=[];L;L=L.F)b.push(L);if(d=d.M,L=v.type||v,typeof v=="string")v=new ae(v,d);else if(v instanceof ae)v.target=v.target||d;else{var j=v;v=new ae(L,d),M(v,j)}if(j=!0,b)for(var $=b.length-1;0<=$;$--){var K=v.g=b[$];j=Ks(K,L,!0,v)&&j}if(K=v.g=d,j=Ks(K,L,!0,v)&&j,j=Ks(K,L,!1,v)&&j,b)for($=0;$<b.length;$++)K=v.g=b[$],j=Ks(K,L,!1,v)&&j}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var b=d.g[v],L=0;L<b.length;L++)Ie(b[L]);delete d.g[v],d.h--}}this.F=null},jt.prototype.K=function(d,v,b,L){return this.i.add(String(d),v,!1,b,L)},jt.prototype.L=function(d,v,b,L){return this.i.add(String(d),v,!0,b,L)};function Ks(d,v,b,L){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var j=!0,$=0;$<v.length;++$){var K=v[$];if(K&&!K.da&&K.capture==b){var Ge=K.listener,qt=K.ha||K.src;K.fa&&wr(d.i,K),j=Ge.call(qt,L)!==!1&&j}}return j&&!L.defaultPrevented}function pa(d,v,b){if(typeof d=="function")b&&(d=p(d,b));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:a.setTimeout(d,v||0)}function sc(d){d.g=pa(()=>{d.g=null,d.i&&(d.i=!1,sc(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class pO extends se{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:sc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xh(d){se.call(this),this.h=d,this.g={}}m(xh,se);var XS=[];function YS(d){F(d.g,function(v,b){this.g.hasOwnProperty(b)&&Sh(v)},d),d.g={}}xh.prototype.N=function(){xh.aa.N.call(this),YS(this)},xh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var C_=a.JSON.stringify,gO=a.JSON.parse,mO=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function x_(){}x_.prototype.h=null;function QS(d){return d.h||(d.h=d.i())}function JS(){}var Rh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function R_(){ae.call(this,"d")}m(R_,ae);function P_(){ae.call(this,"c")}m(P_,ae);var ga={},ZS=null;function fg(){return ZS=ZS||new jt}ga.La="serverreachability";function eT(d){ae.call(this,ga.La,d)}m(eT,ae);function Ph(d){const v=fg();dt(v,new eT(v))}ga.STAT_EVENT="statevent";function tT(d,v){ae.call(this,ga.STAT_EVENT,d),this.stat=v}m(tT,ae);function bn(d){const v=fg();dt(v,new tT(v,d))}ga.Ma="timingevent";function nT(d,v){ae.call(this,ga.Ma,d),this.size=v}m(nT,ae);function Ih(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},v)}function kh(){this.g=!0}kh.prototype.xa=function(){this.g=!1};function vO(d,v,b,L,j,$){d.info(function(){if(d.g)if($)for(var K="",Ge=$.split("&"),qt=0;qt<Ge.length;qt++){var Ne=Ge[qt].split("=");if(1<Ne.length){var ln=Ne[0];Ne=Ne[1];var cn=ln.split("_");K=2<=cn.length&&cn[1]=="type"?K+(ln+"="+Ne+"&"):K+(ln+"=redacted&")}}else K=null;else K=$;return"XMLHTTP REQ ("+L+") [attempt "+j+"]: "+v+`
`+b+`
`+K})}function yO(d,v,b,L,j,$,K){d.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+j+"]: "+v+`
`+b+`
`+$+" "+K})}function ic(d,v,b,L){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+EO(d,b)+(L?" "+L:"")})}function _O(d,v){d.info(function(){return"TIMEOUT: "+v})}kh.prototype.info=function(){};function EO(d,v){if(!d.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var L=b[d];if(!(2>L.length)){var j=L[1];if(Array.isArray(j)&&!(1>j.length)){var $=j[0];if($!="noop"&&$!="stop"&&$!="close")for(var K=1;K<j.length;K++)j[K]=""}}}}return C_(b)}catch{return v}}var pg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},I_;function gg(){}m(gg,x_),gg.prototype.g=function(){return new XMLHttpRequest},gg.prototype.i=function(){return{}},I_=new gg;function Yi(d,v,b,L){this.j=d,this.i=v,this.l=b,this.R=L||1,this.U=new xh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sT}function sT(){this.i=null,this.g="",this.h=!1}var iT={},k_={};function L_(d,v,b){d.L=1,d.v=_g(Xs(v)),d.m=b,d.P=!0,oT(d,null)}function oT(d,v){d.F=Date.now(),mg(d),d.A=Xs(d.v);var b=d.A,L=d.R;Array.isArray(L)||(L=[String(L)]),ET(b.i,"t",L),d.C=0,b=d.j.J,d.h=new sT,d.g=VT(d.j,b?v:null,!d.m),0<d.O&&(d.M=new pO(p(d.Y,d,d.g),d.O)),v=d.U,b=d.g,L=d.ca;var j="readystatechange";Array.isArray(j)||(j&&(XS[0]=j.toString()),j=XS);for(var $=0;$<j.length;$++){var K=rt(b,j[$],L||v.handleEvent,!1,v.h||v);if(!K)break;v.g[K.key]=K}v=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Ph(),vO(d.i,d.u,d.A,d.l,d.R,d.m)}Yi.prototype.ca=function(d){d=d.target;const v=this.M;v&&Ys(d)==3?v.j():this.Y(d)},Yi.prototype.Y=function(d){try{if(d==this.g)e:{const cn=Ys(this.g);var v=this.g.Ba();const lc=this.g.Z();if(!(3>cn)&&(cn!=3||this.g&&(this.h.h||this.g.oa()||xT(this.g)))){this.J||cn!=4||v==7||(v==8||0>=lc?Ph(3):Ph(2)),M_(this);var b=this.g.Z();this.X=b;t:if(aT(this)){var L=xT(this.g);d="";var j=L.length,$=Ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ma(this),Lh(this);var K="";break t}this.h.i=new a.TextDecoder}for(v=0;v<j;v++)this.h.h=!0,d+=this.h.i.decode(L[v],{stream:!($&&v==j-1)});L.length=0,this.h.g+=d,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=b==200,yO(this.i,this.u,this.A,this.l,this.R,cn,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,qt=this.g;if((Ge=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ge)){var Ne=Ge;break t}}Ne=null}if(b=Ne)ic(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,N_(this,b);else{this.o=!1,this.s=3,bn(12),ma(this),Lh(this);break e}}if(this.P){b=!0;let Vr;for(;!this.J&&this.C<K.length;)if(Vr=wO(this,K),Vr==k_){cn==4&&(this.s=4,bn(14),b=!1),ic(this.i,this.l,null,"[Incomplete Response]");break}else if(Vr==iT){this.s=4,bn(15),ic(this.i,this.l,K,"[Invalid Chunk]"),b=!1;break}else ic(this.i,this.l,Vr,null),N_(this,Vr);if(aT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cn!=4||K.length!=0||this.h.h||(this.s=1,bn(16),b=!1),this.o=this.o&&b,!b)ic(this.i,this.l,K,"[Invalid Chunked Response]"),ma(this),Lh(this);else if(0<K.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),j_(ln),ln.M=!0,bn(11))}}else ic(this.i,this.l,K,null),N_(this,K);cn==4&&ma(this),this.o&&!this.J&&(cn==4?NT(this.j,this):(this.o=!1,mg(this)))}else VO(this.g),b==400&&0<K.indexOf("Unknown SID")?(this.s=3,bn(12)):(this.s=0,bn(13)),ma(this),Lh(this)}}}catch{}finally{}};function aT(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function wO(d,v){var b=d.C,L=v.indexOf(`
`,b);return L==-1?k_:(b=Number(v.substring(b,L)),isNaN(b)?iT:(L+=1,L+b>v.length?k_:(v=v.slice(L,L+b),d.C=L+b,v)))}Yi.prototype.cancel=function(){this.J=!0,ma(this)};function mg(d){d.S=Date.now()+d.I,lT(d,d.I)}function lT(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ih(p(d.ba,d),v)}function M_(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Yi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(_O(this.i,this.A),this.L!=2&&(Ph(),bn(17)),ma(this),this.s=2,Lh(this)):lT(this,this.S-d)};function Lh(d){d.j.G==0||d.J||NT(d.j,d)}function ma(d){M_(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,YS(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function N_(d,v){try{var b=d.j;if(b.G!=0&&(b.g==d||D_(b.h,d))){if(!d.K&&D_(b.h,d)&&b.G==3){try{var L=b.Da.g.parse(v)}catch{L=null}if(Array.isArray(L)&&L.length==3){var j=L;if(j[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Tg(b),bg(b);else break e;B_(b),bn(18)}}else b.za=j[1],0<b.za-b.T&&37500>j[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ih(p(b.Za,b),6e3));if(1>=hT(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ya(b,11)}else if((d.K||b.g==d)&&Tg(b),!E(v))for(j=b.Da.g.parse(v),v=0;v<j.length;v++){let Ne=j[v];if(b.T=Ne[0],Ne=Ne[1],b.G==2)if(Ne[0]=="c"){b.K=Ne[1],b.ia=Ne[2];const ln=Ne[3];ln!=null&&(b.la=ln,b.j.info("VER="+b.la));const cn=Ne[4];cn!=null&&(b.Aa=cn,b.j.info("SVER="+b.Aa));const lc=Ne[5];lc!=null&&typeof lc=="number"&&0<lc&&(L=1.5*lc,b.L=L,b.j.info("backChannelRequestTimeoutMs_="+L)),L=b;const Vr=d.g;if(Vr){const xg=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xg){var $=L.h;$.g||xg.indexOf("spdy")==-1&&xg.indexOf("quic")==-1&&xg.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(O_($,$.h),$.h=null))}if(L.D){const U_=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;U_&&(L.ya=U_,Ze(L.I,L.D,U_))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),L=b;var K=d;if(L.qa=FT(L,L.J?L.ia:null,L.W),K.K){dT(L.h,K);var Ge=K,qt=L.L;qt&&(Ge.I=qt),Ge.B&&(M_(Ge),mg(Ge)),L.g=K}else LT(L);0<b.i.length&&Sg(b)}else Ne[0]!="stop"&&Ne[0]!="close"||ya(b,7);else b.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?ya(b,7):V_(b):Ne[0]!="noop"&&b.l&&b.l.ta(Ne),b.v=0)}}Ph(4)}catch{}}var AO=class{constructor(d,v){this.g=d,this.map=v}};function cT(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uT(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function hT(d){return d.h?1:d.g?d.g.size:0}function D_(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function O_(d,v){d.g?d.g.add(v):d.h=v}function dT(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}cT.prototype.cancel=function(){if(this.i=fT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function fT(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const b of d.g.values())v=v.concat(b.D);return v}return y(d.i)}function bO(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var v=[],b=d.length,L=0;L<b;L++)v.push(d[L]);return v}v=[],b=0;for(L in d)v[b++]=d[L];return v}function SO(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var v=[];d=d.length;for(var b=0;b<d;b++)v.push(b);return v}v=[],b=0;for(const L in d)v[b++]=L;return v}}}function pT(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var b=SO(d),L=bO(d),j=L.length,$=0;$<j;$++)v.call(void 0,L[$],b&&b[$],d)}var gT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TO(d,v){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var L=d[b].indexOf("="),j=null;if(0<=L){var $=d[b].substring(0,L);j=d[b].substring(L+1)}else $=d[b];v($,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function va(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof va){this.h=d.h,vg(this,d.j),this.o=d.o,this.g=d.g,yg(this,d.s),this.l=d.l;var v=d.i,b=new Dh;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),mT(this,b),this.m=d.m}else d&&(v=String(d).match(gT))?(this.h=!1,vg(this,v[1]||"",!0),this.o=Mh(v[2]||""),this.g=Mh(v[3]||"",!0),yg(this,v[4]),this.l=Mh(v[5]||"",!0),mT(this,v[6]||"",!0),this.m=Mh(v[7]||"")):(this.h=!1,this.i=new Dh(null,this.h))}va.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Nh(v,vT,!0),":");var b=this.g;return(b||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Nh(v,vT,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Nh(b,b.charAt(0)=="/"?RO:xO,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Nh(b,IO)),d.join("")};function Xs(d){return new va(d)}function vg(d,v,b){d.j=b?Mh(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function yg(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function mT(d,v,b){v instanceof Dh?(d.i=v,kO(d.i,d.h)):(b||(v=Nh(v,PO)),d.i=new Dh(v,d.h))}function Ze(d,v,b){d.i.set(v,b)}function _g(d){return Ze(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Mh(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Nh(d,v,b){return typeof d=="string"?(d=encodeURI(d).replace(v,CO),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function CO(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var vT=/[#\/\?@]/g,xO=/[#\?:]/g,RO=/[#\?]/g,PO=/[#\?@]/g,IO=/#/g;function Dh(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Qi(d){d.g||(d.g=new Map,d.h=0,d.i&&TO(d.i,function(v,b){d.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}n=Dh.prototype,n.add=function(d,v){Qi(this),this.i=null,d=oc(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(v),this.h+=1,this};function yT(d,v){Qi(d),v=oc(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function _T(d,v){return Qi(d),v=oc(d,v),d.g.has(v)}n.forEach=function(d,v){Qi(this),this.g.forEach(function(b,L){b.forEach(function(j){d.call(v,j,L,this)},this)},this)},n.na=function(){Qi(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let L=0;L<v.length;L++){const j=d[L];for(let $=0;$<j.length;$++)b.push(v[L])}return b},n.V=function(d){Qi(this);let v=[];if(typeof d=="string")_T(this,d)&&(v=v.concat(this.g.get(oc(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)v=v.concat(d[b])}return v},n.set=function(d,v){return Qi(this),this.i=null,d=oc(this,d),_T(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function ET(d,v,b){yT(d,v),0<b.length&&(d.i=null,d.g.set(oc(d,v),y(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var L=v[b];const $=encodeURIComponent(String(L)),K=this.V(L);for(L=0;L<K.length;L++){var j=$;K[L]!==""&&(j+="="+encodeURIComponent(String(K[L]))),d.push(j)}}return this.i=d.join("&")};function oc(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function kO(d,v){v&&!d.j&&(Qi(d),d.i=null,d.g.forEach(function(b,L){var j=L.toLowerCase();L!=j&&(yT(this,L),ET(this,j,b))},d)),d.j=v}function LO(d,v){const b=new kh;if(a.Image){const L=new Image;L.onload=g(Ji,b,"TestLoadImage: loaded",!0,v,L),L.onerror=g(Ji,b,"TestLoadImage: error",!1,v,L),L.onabort=g(Ji,b,"TestLoadImage: abort",!1,v,L),L.ontimeout=g(Ji,b,"TestLoadImage: timeout",!1,v,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=d}else v(!1)}function MO(d,v){const b=new kh,L=new AbortController,j=setTimeout(()=>{L.abort(),Ji(b,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:L.signal}).then($=>{clearTimeout(j),$.ok?Ji(b,"TestPingServer: ok",!0,v):Ji(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(j),Ji(b,"TestPingServer: error",!1,v)})}function Ji(d,v,b,L,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),L(b)}catch{}}function NO(){this.g=new mO}function DO(d,v,b){const L=b||"";try{pT(d,function(j,$){let K=j;c(j)&&(K=C_(j)),v.push(L+$+"="+encodeURIComponent(K))})}catch(j){throw v.push(L+"type="+encodeURIComponent("_badmap")),j}}function Eg(d){this.l=d.Ub||null,this.j=d.eb||!1}m(Eg,x_),Eg.prototype.g=function(){return new wg(this.l,this.j)},Eg.prototype.i=function(d){return function(){return d}}({});function wg(d,v){jt.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(wg,jt),n=wg.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,Fh(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oh(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Fh(this)),this.g&&(this.readyState=3,Fh(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wT(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function wT(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Oh(this):Fh(this),this.readyState==3&&wT(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Oh(this))},n.Qa=function(d){this.g&&(this.response=d,Oh(this))},n.ga=function(){this.g&&Oh(this)};function Oh(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Fh(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=v.next();return d.join(`\r
`)};function Fh(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(wg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function AT(d){let v="";return F(d,function(b,L){v+=L,v+=":",v+=b,v+=`\r
`}),v}function F_(d,v,b){e:{for(L in b){var L=!1;break e}L=!0}L||(b=AT(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):Ze(d,v,b))}function ft(d){jt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(ft,jt);var OO=/^https?$/i,FO=["POST","PUT"];n=ft.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,b,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():I_.g(),this.v=this.o?QS(this.o):QS(I_),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch($){bT(this,$);return}if(d=b||"",b=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var j in L)b.set(j,L[j]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const $ of L.keys())b.set($,L.get($));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),j=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(FO,v,void 0))||L||j||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,K]of b)this.g.setRequestHeader($,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{CT(this),this.u=!0,this.g.send(d),this.u=!1}catch($){bT(this,$)}};function bT(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,ST(d),Ag(d)}function ST(d){d.A||(d.A=!0,dt(d,"complete"),dt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,dt(this,"complete"),dt(this,"abort"),Ag(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ag(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?TT(this):this.bb())},n.bb=function(){TT(this)};function TT(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Ys(d)!=4||d.Z()!=2)){if(d.u&&Ys(d)==4)pa(d.Ea,0,d);else if(dt(d,"readystatechange"),Ys(d)==4){d.h=!1;try{const K=d.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var L;if(L=K===0){var j=String(d.D).match(gT)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),L=!OO.test(j?j.toLowerCase():"")}b=L}if(b)dt(d,"complete"),dt(d,"success");else{d.m=6;try{var $=2<Ys(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",ST(d)}}finally{Ag(d)}}}}function Ag(d,v){if(d.g){CT(d);const b=d.g,L=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||dt(d,"ready");try{b.onreadystatechange=L}catch{}}}function CT(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Ys(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Ys(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),gO(v)}};function xT(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function VO(d){const v={};d=(d.g&&2<=Ys(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<d.length;L++){if(E(d[L]))continue;var b=O(d[L]);const j=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=v[j]||[];v[j]=$,$.push(b)}C(v,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vh(d,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||v}function RT(d){this.Aa=0,this.i=[],this.j=new kh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vh("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vh("baseRetryDelayMs",5e3,d),this.cb=Vh("retryDelaySeedMs",1e4,d),this.Wa=Vh("forwardChannelMaxRetries",2,d),this.wa=Vh("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new cT(d&&d.concurrentRequestLimit),this.Da=new NO,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=RT.prototype,n.la=8,n.G=1,n.connect=function(d,v,b,L){bn(0),this.W=d,this.H=v||{},b&&L!==void 0&&(this.H.OSID=b,this.H.OAID=L),this.F=this.X,this.I=FT(this,null,this.W),Sg(this)};function V_(d){if(PT(d),d.G==3){var v=d.U++,b=Xs(d.I);if(Ze(b,"SID",d.K),Ze(b,"RID",v),Ze(b,"TYPE","terminate"),Bh(d,b),v=new Yi(d,d.j,v),v.L=2,v.v=_g(Xs(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=v.v,b=!0),b||(v.g=VT(v.j,null),v.g.ea(v.v)),v.F=Date.now(),mg(v)}OT(d)}function bg(d){d.g&&(j_(d),d.g.cancel(),d.g=null)}function PT(d){bg(d),d.u&&(a.clearTimeout(d.u),d.u=null),Tg(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Sg(d){if(!uT(d.h)&&!d.s){d.s=!0;var v=d.Ga;W||X(),U||(W(),U=!0),z.add(v,d),d.B=0}}function BO(d,v){return hT(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ih(p(d.Ga,d,v),DT(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const j=new Yi(this,this.j,d);let $=this.o;if(this.S&&($?($=T($),M($,this.S)):$=this.S),this.m!==null||this.O||(j.H=$,$=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var L=this.i[b];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(v+=L,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=kT(this,j,v),b=Xs(this.I),Ze(b,"RID",d),Ze(b,"CVER",22),this.D&&Ze(b,"X-HTTP-Session-Id",this.D),Bh(this,b),$&&(this.O?v="headers="+encodeURIComponent(String(AT($)))+"&"+v:this.m&&F_(b,this.m,$)),O_(this.h,j),this.Ua&&Ze(b,"TYPE","init"),this.P?(Ze(b,"$req",v),Ze(b,"SID","null"),j.T=!0,L_(j,b,null)):L_(j,b,v),this.G=2}}else this.G==3&&(d?IT(this,d):this.i.length==0||uT(this.h)||IT(this))};function IT(d,v){var b;v?b=v.l:b=d.U++;const L=Xs(d.I);Ze(L,"SID",d.K),Ze(L,"RID",b),Ze(L,"AID",d.T),Bh(d,L),d.m&&d.o&&F_(L,d.m,d.o),b=new Yi(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),v&&(d.i=v.D.concat(d.i)),v=kT(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),O_(d.h,b),L_(b,L,v)}function Bh(d,v){d.H&&F(d.H,function(b,L){Ze(v,L,b)}),d.l&&pT({},function(b,L){Ze(v,L,b)})}function kT(d,v,b){b=Math.min(d.i.length,b);var L=d.l?p(d.l.Na,d.l,d):null;e:{var j=d.i;let $=-1;for(;;){const K=["count="+b];$==-1?0<b?($=j[0].g,K.push("ofs="+$)):$=0:K.push("ofs="+$);let Ge=!0;for(let qt=0;qt<b;qt++){let Ne=j[qt].g;const ln=j[qt].map;if(Ne-=$,0>Ne)$=Math.max(0,j[qt].g-100),Ge=!1;else try{DO(ln,K,"req"+Ne+"_")}catch{L&&L(ln)}}if(Ge){L=K.join("&");break e}}}return d=d.i.splice(0,b),v.D=d,L}function LT(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;W||X(),U||(W(),U=!0),z.add(v,d),d.v=0}}function B_(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ih(p(d.Fa,d),DT(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,MT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ih(p(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bn(10),bg(this),MT(this))};function j_(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function MT(d){d.g=new Yi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=Xs(d.qa);Ze(v,"RID","rpc"),Ze(v,"SID",d.K),Ze(v,"AID",d.T),Ze(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ze(v,"TO",d.ja),Ze(v,"TYPE","xmlhttp"),Bh(d,v),d.m&&d.o&&F_(v,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=_g(Xs(v)),b.m=null,b.P=!0,oT(b,d)}n.Za=function(){this.C!=null&&(this.C=null,bg(this),B_(this),bn(19))};function Tg(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function NT(d,v){var b=null;if(d.g==v){Tg(d),j_(d),d.g=null;var L=2}else if(D_(d.h,v))b=v.D,dT(d.h,v),L=1;else return;if(d.G!=0){if(v.o)if(L==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var j=d.B;L=fg(),dt(L,new nT(L,b)),Sg(d)}else LT(d);else if(j=v.s,j==3||j==0&&0<v.X||!(L==1&&BO(d,v)||L==2&&B_(d)))switch(b&&0<b.length&&(v=d.h,v.i=v.i.concat(b)),j){case 1:ya(d,5);break;case 4:ya(d,10);break;case 3:ya(d,6);break;default:ya(d,2)}}}function DT(d,v){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*v}function ya(d,v){if(d.j.info("Error code "+v),v==2){var b=p(d.fb,d),L=d.Xa;const j=!L;L=new va(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vg(L,"https"),_g(L),j?LO(L.toString(),b):MO(L.toString(),b)}else bn(2);d.G=0,d.l&&d.l.sa(v),OT(d),PT(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))};function OT(d){if(d.G=0,d.ka=[],d.l){const v=fT(d.h);(v.length!=0||d.i.length!=0)&&(w(d.ka,v),w(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function FT(d,v,b){var L=b instanceof va?Xs(b):new va(b);if(L.g!="")v&&(L.g=v+"."+L.g),yg(L,L.s);else{var j=a.location;L=j.protocol,v=v?v+"."+j.hostname:j.hostname,j=+j.port;var $=new va(null);L&&vg($,L),v&&($.g=v),j&&yg($,j),b&&($.l=b),L=$}return b=d.D,v=d.ya,b&&v&&Ze(L,b,v),Ze(L,"VER",d.la),Bh(d,L),L}function VT(d,v,b){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new ft(new Eg({eb:b})):new ft(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function BT(){}n=BT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Cg(){}Cg.prototype.g=function(d,v){return new Zn(d,v)};function Zn(d,v){jt.call(this),this.g=new RT(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!E(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!E(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new ac(this)}m(Zn,jt),Zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){V_(this.g)},Zn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=C_(d),d=b);v.i.push(new AO(v.Ya++,d)),v.G==3&&Sg(v)},Zn.prototype.N=function(){this.g.l=null,delete this.j,V_(this.g),delete this.g,Zn.aa.N.call(this)};function jT(d){R_.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const b in v){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}m(jT,R_);function UT(){P_.call(this),this.status=1}m(UT,P_);function ac(d){this.g=d}m(ac,BT),ac.prototype.ua=function(){dt(this.g,"a")},ac.prototype.ta=function(d){dt(this.g,new jT(d))},ac.prototype.sa=function(d){dt(this.g,new UT)},ac.prototype.ra=function(){dt(this.g,"b")},Cg.prototype.createWebChannel=Cg.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,RN=function(){return new Cg},xN=function(){return fg()},CN=ga,yA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pg.NO_ERROR=0,pg.TIMEOUT=8,pg.HTTP_ERROR=6,Qm=pg,rT.COMPLETE="complete",TN=rT,JS.EventType=Rh,Rh.OPEN="a",Rh.CLOSE="b",Rh.ERROR="c",Rh.MESSAGE="d",jt.prototype.listen=jt.prototype.K,yd=JS,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,SN=ft}).apply(typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{});const hx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new pN("@firebase/firestore");function wc(){return Gl.logLevel}function ee(n,...e){if(Gl.logLevel<=Ce.DEBUG){const t=e.map(yS);Gl.debug(`Firestore (${_h}): ${n}`,...t)}}function Gi(n,...e){if(Gl.logLevel<=Ce.ERROR){const t=e.map(yS);Gl.error(`Firestore (${_h}): ${n}`,...t)}}function ih(n,...e){if(Gl.logLevel<=Ce.WARN){const t=e.map(yS);Gl.warn(`Firestore (${_h}): ${n}`,...t)}}function yS(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n="Unexpected state"){const e=`FIRESTORE (${_h}) INTERNAL ASSERTION FAILED: `+n;throw Gi(e),new Error(e)}function lt(n,e){n||ve()}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends tc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vn.UNAUTHENTICATED))}shutdown(){}}class n6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class r6{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new Nl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nl,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string"),new PN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new vn(e)}}class s6{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class i6{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new s6(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class o6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){lt(this.o===void 0);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt(typeof t.token=="string"),this.R=t.token,new o6(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=l6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%e.length))}return r}}function xe(n,e){return n<e?-1:n>e?1:0}function oh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Xn(0,0))}static max(){return new ge(new Xn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(),r===void 0?r=e.length-t:r>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return uf.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=e.get(s),o=t.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mt extends uf{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new mt(t)}static emptyPath(){return new mt([])}}const u6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends uf{construct(e,t,r){return new Pn(e,t,r)}static isValidIdentifier(e){return u6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new le(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new le(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new le(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(mt.fromString(e))}static fromName(e){return new he(mt.fromString(e).popFirst(5))}static empty(){return new he(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new mt(e.slice()))}}function h6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new Xn(t+1,0):new Xn(t,r));return new ta(s,he.empty(),e)}function d6(n){return new ta(n.readTime,n.key,-1)}class ta{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ta(ge.min(),he.empty(),-1)}static max(){return new ta(ge.max(),he.empty(),-1)}}function f6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==p6)throw n;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):H.reject(t)}static resolve(e){return new H((t,r)=>{t(e)})}static reject(e){return new H((t,r)=>{r(e)})}static waitFor(e){return new H((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},l=>r(l))}),o=!0,i===s&&t()})}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next(s=>s?H.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new H((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,t){return new H((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}function m6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Eh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}c_.oe=-1;function u_(n){return n==null}function _A(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dx(e)),e=y6(n.get(t),e);return dx(e)}function y6(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case"":t+="";break;default:t+=i}}return t}function dx(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function og(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nm(this.root,e,this.comparator,!0)}}class nm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??nn.RED,this.left=s??nn.EMPTY,this.right=i??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new nn(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return nn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,r,s,i){return this}insert(e,t,r){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new px(this.data.getIterator())}getIteratorFrom(e){return new px(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class px{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new Do([])}unionWith(e){let t=new Bt(Pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Do(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new IN("Invalid base64 string: "+i):i}}(e);return new an(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new an(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const E6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(n){if(lt(!!n),typeof n=="string"){let e=0;const t=E6.exec(n);if(lt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ra(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function h_(n){const e=n.mapValue.fields.__previous_value__;return _S(e)?h_(e):e}function hf(n){const e=na(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t,r,s,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class df{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new df("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof df&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_S(n)?4:b6(n)?9007199254740991:A6(n)?10:11:ve()}function Us(n,e){if(n===e)return!0;const t=sa(n);if(t!==sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hf(n).isEqual(hf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=na(s.timestampValue),a=na(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return ra(s.bytesValue).isEqual(ra(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return _t(s.geoPointValue.latitude)===_t(i.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return _t(s.integerValue)===_t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=_t(s.doubleValue),a=_t(i.doubleValue);return o===a?_A(o)===_A(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return oh(n.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(fx(o)!==fx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Us(o[l],a[l])))return!1;return!0}(n,e);default:return ve()}}function ff(n,e){return(n.values||[]).find(t=>Us(t,e))!==void 0}function ah(n,e){if(n===e)return 0;const t=sa(n),r=sa(e);if(t!==r)return xe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=_t(i.integerValue||i.doubleValue),l=_t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return gx(n.timestampValue,e.timestampValue);case 4:return gx(hf(n),hf(e));case 5:return xe(n.stringValue,e.stringValue);case 6:return function(i,o){const a=ra(i),l=ra(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=xe(a[c],l[c]);if(u!==0)return u}return xe(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=xe(_t(i.latitude),_t(o.latitude));return a!==0?a:xe(_t(i.longitude),_t(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mx(n.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const f=i.fields||{},p=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,m=(l=p.value)===null||l===void 0?void 0:l.arrayValue,y=xe(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:mx(g,m)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===rm.mapValue&&o===rm.mapValue)return 0;if(i===rm.mapValue)return 1;if(o===rm.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=xe(l[f],u[f]);if(p!==0)return p;const g=ah(a[l[f]],c[u[f]]);if(g!==0)return g}return xe(l.length,u.length)}(n.mapValue,e.mapValue);default:throw ve()}}function gx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xe(n,e);const t=na(n),r=na(e),s=xe(t.seconds,r.seconds);return s!==0?s:xe(t.nanos,r.nanos)}function mx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=ah(t[s],r[s]);if(i)return i}return xe(t.length,r.length)}function lh(n){return EA(n)}function EA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=na(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ra(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=EA(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${EA(t.fields[o])}`;return s+"}"}(n.mapValue):ve()}function Jm(n){switch(sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=h_(n);return e?16+Jm(e):16;case 5:return 2*n.stringValue.length;case 6:return ra(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Jm(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return og(r.fields,(i,o)=>{s+=i.length+Jm(o)}),s}(n.mapValue);default:throw ve()}}function wA(n){return!!n&&"integerValue"in n}function ES(n){return!!n&&"arrayValue"in n}function vx(n){return!!n&&"nullValue"in n}function yx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function D0(n){return!!n&&"mapValue"in n}function A6(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Nd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return og(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function b6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.value=e}static empty(){return new Ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!D0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nd(t)}setAll(e){let t=Pn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=Nd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());D0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];D0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){og(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ls(Nd(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _n(e,0,ge.min(),ge.min(),ge.min(),Ls.empty(),0)}static newFoundDocument(e,t,r,s){return new _n(e,1,t,ge.min(),r,s,0)}static newNoDocument(e,t){return new _n(e,2,t,ge.min(),ge.min(),Ls.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,ge.min(),ge.min(),Ls.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,t){this.position=e,this.inclusive=t}}function _x(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=ah(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ex(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Us(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t="asc"){this.field=e,this.dir=t}}function S6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{}class Ot extends kN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new C6(e,t,r):t==="array-contains"?new P6(e,r):t==="in"?new I6(e,r):t==="not-in"?new k6(e,r):t==="array-contains-any"?new L6(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new x6(e,r):new R6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ah(t,this.value)):t!==null&&sa(this.value)===sa(t)&&this.matchesComparison(ah(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $s extends kN{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new $s(e,t)}matches(e){return LN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function LN(n){return n.op==="and"}function MN(n){return T6(n)&&LN(n)}function T6(n){for(const e of n.filters)if(e instanceof $s)return!1;return!0}function AA(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+lh(n.value);if(MN(n))return n.filters.map(e=>AA(e)).join(",");{const e=n.filters.map(t=>AA(t)).join(",");return`${n.op}(${e})`}}function NN(n,e){return n instanceof Ot?function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&Us(r.value,s.value)}(n,e):n instanceof $s?function(r,s){return s instanceof $s&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&NN(o,s.filters[a]),!0):!1}(n,e):void ve()}function DN(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${lh(t.value)}`}(n):n instanceof $s?function(t){return t.op.toString()+" {"+t.getFilters().map(DN).join(" ,")+"}"}(n):"Filter"}class C6 extends Ot{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class x6 extends Ot{constructor(e,t){super(e,"in",t),this.keys=ON("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class R6 extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=ON("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ON(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class P6 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ES(t)&&ff(t.arrayValue,this.value)}}class I6 extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ff(this.value.arrayValue,t)}}class k6 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ff(this.value.arrayValue,t)}}class L6 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ES(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ff(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function wx(n,e=null,t=[],r=[],s=null,i=null,o=null){return new M6(n,e,t,r,s,i,o)}function wS(n){const e=Re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>AA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),u_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lh(r)).join(",")),e.ue=t}return e.ue}function AS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!S6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ex(n.startAt,e.startAt)&&Ex(n.endAt,e.endAt)}function bA(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function N6(n,e,t,r,s,i,o,a){return new d_(n,e,t,r,s,i,o,a)}function FN(n){return new d_(n)}function Ax(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function D6(n){return n.collectionGroup!==null}function Dd(n){const e=Re(n);if(e.ce===null){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Bt(Pn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Hv(i,r))}),t.has(Pn.keyField().canonicalString())||e.ce.push(new Hv(Pn.keyField(),r))}return e.ce}function Ds(n){const e=Re(n);return e.le||(e.le=O6(e,Dd(n))),e.le}function O6(n,e){if(n.limitType==="F")return wx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Hv(s.field,i)});const t=n.endAt?new zv(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zv(n.startAt.position,n.startAt.inclusive):null;return wx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function SA(n,e,t){return new d_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function f_(n,e){return AS(Ds(n),Ds(e))&&n.limitType===e.limitType}function VN(n){return`${wS(Ds(n))}|lt:${n.limitType}`}function Ac(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>DN(s)).join(", ")}]`),u_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>lh(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>lh(s)).join(",")),`Target(${r})`}(Ds(n))}; limitType=${n.limitType})`}function p_(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of Dd(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=_x(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Dd(r),s)||r.endAt&&!function(o,a,l){const c=_x(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Dd(r),s))}(n,e)}function F6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BN(n){return(e,t)=>{let r=!1;for(const s of Dd(n)){const i=V6(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function V6(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ah(l,c):ve()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){og(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return _6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=new At(he.comparator);function ia(){return B6}const jN=new At(he.comparator);function _d(...n){let e=jN;for(const t of n)e=e.insert(t.key,t);return e}function j6(n){let e=jN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Na(){return Od()}function UN(){return Od()}function Od(){return new nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const U6=new Bt(he.comparator);function Le(...n){let e=U6;for(const t of n)e=e.add(t);return e}const $6=new Bt(xe);function z6(){return $6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_A(e)?"-0":e}}function W6(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this._=void 0}}function G6(n,e,t){return n instanceof TA?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&_S(i)&&(i=h_(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Wv?$N(n,e):n instanceof Gv?zN(n,e):function(s,i){const o=K6(s,i),a=bx(o)+bx(s.Pe);return wA(o)&&wA(s.Pe)?W6(a):H6(s.serializer,a)}(n,e)}function q6(n,e,t){return n instanceof Wv?$N(n,e):n instanceof Gv?zN(n,e):t}function K6(n,e){return n instanceof CA?function(r){return wA(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class TA extends g_{}class Wv extends g_{constructor(e){super(),this.elements=e}}function $N(n,e){const t=HN(e);for(const r of n.elements)t.some(s=>Us(s,r))||t.push(r);return{arrayValue:{values:t}}}class Gv extends g_{constructor(e){super(),this.elements=e}}function zN(n,e){let t=HN(e);for(const r of n.elements)t=t.filter(s=>!Us(s,r));return{arrayValue:{values:t}}}class CA extends g_{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function bx(n){return _t(n.integerValue||n.doubleValue)}function HN(n){return ES(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function X6(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Wv&&s instanceof Wv||r instanceof Gv&&s instanceof Gv?oh(r.elements,s.elements,Us):r instanceof CA&&s instanceof CA?Us(r.Pe,s.Pe):r instanceof TA&&s instanceof TA}(n.transform,e.transform)}class Dl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dl}static exists(e){return new Dl(void 0,e)}static updateTime(e){return new Dl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bS{}function WN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Q6(n.key,Dl.none()):new SS(n.key,n.data,Dl.none());{const t=n.data,r=Ls.empty();let s=new Bt(Pn.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new m_(n.key,r,new Do(s.toArray()),Dl.none())}}function Y6(n,e,t){n instanceof SS?function(s,i,o){const a=s.value.clone(),l=Tx(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof m_?function(s,i,o){if(!Zm(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Tx(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(GN(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Fd(n,e,t,r){return n instanceof SS?function(i,o,a,l){if(!Zm(i.precondition,o))return a;const c=i.value.clone(),u=Cx(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof m_?function(i,o,a,l){if(!Zm(i.precondition,o))return a;const c=Cx(i.fieldTransforms,l,o),u=o.data;return u.setAll(GN(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(i,o,a){return Zm(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Sx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oh(r,s,(i,o)=>X6(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class SS extends bS{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class m_ extends bS{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function GN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Tx(n,e,t){const r=new Map;lt(n.length===t.length);for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,q6(o,a,t[s]))}return r}function Cx(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,G6(i,o,e))}return r}class Q6 extends bS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Y6(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=UN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const l=WN(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&oh(this.mutations,e.mutations,(t,r)=>Sx(t,r))&&oh(this.baseMutations,e.baseMutations,(t,r)=>Sx(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Se;function qN(n){if(n===void 0)return Gi("GRPC error has no .code"),Y.UNKNOWN;switch(n){case St.OK:return Y.OK;case St.CANCELLED:return Y.CANCELLED;case St.UNKNOWN:return Y.UNKNOWN;case St.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case St.INTERNAL:return Y.INTERNAL;case St.UNAVAILABLE:return Y.UNAVAILABLE;case St.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case St.NOT_FOUND:return Y.NOT_FOUND;case St.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case St.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case St.ABORTED:return Y.ABORTED;case St.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case St.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case St.DATA_LOSS:return Y.DATA_LOSS;default:return ve()}}(Se=St||(St={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=new Ml([4294967295,4294967295],0);function xx(n){const e=t9().encode(n),t=new bN;return t.update(e),new Uint8Array(t.digest())}function Rx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ml([t,r],0),new Ml([s,i],0)]}class TS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ed(`Invalid padding: ${t}`);if(r<0)throw new Ed(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ed(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ed(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ml.fromNumber(this.Te)}Ee(e,t,r){let s=e.add(t.multiply(Ml.fromNumber(r)));return s.compare(n9)===1&&(s=new Ml([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=xx(e),[r,s]=Rx(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new TS(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=xx(e),[r,s]=Rx(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ag.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new v_(ge.min(),s,new At(xe),ia(),Le())}}class ag{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ag(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class KN{constructor(e,t){this.targetId=e,this.me=t}}class XN{constructor(e,t,r=an.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Px{constructor(){this.fe=0,this.ge=Ix(),this.pe=an.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),r=Le();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ve()}}),new ag(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Ix()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class r9{constructor(e){this.Le=e,this.Be=new Map,this.ke=ia(),this.qe=sm(),this.Qe=sm(),this.Ke=new At(xe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.me.count,s=this.Ye(t);if(s){const i=s.target;if(bA(i))if(r===0){const o=new he(i.path);this.We(t,o,_n.newNoDocument(o,ge.min()))}else lt(r===1);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=ra(r).toUint8Array()}catch(l){if(l instanceof IN)return ih("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new TS(o,s,i)}catch(l){return ih(l instanceof Ed?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(t,i,null),s++)}),s}it(e){const t=new Map;this.Be.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&bA(a.target)){const l=new he(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,_n.newNoDocument(l,e))}i.be&&(t.set(o,i.ve()),i.Ce())}});let r=Le();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new v_(e,t,this.Ke,this.ke,r);return this.ke=ia(),this.qe=sm(),this.Qe=sm(),this.Ke=new At(xe),s}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Px,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Bt(xe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(xe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Px),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function sm(){return new At(he.comparator)}function Ix(){return new At(he.comparator)}const s9={asc:"ASCENDING",desc:"DESCENDING"},i9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o9={and:"AND",or:"OR"};class a9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xA(n,e){return n.useProto3Json||u_(e)?e:{value:e}}function l9(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c9(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Xc(n){return lt(!!n),ge.fromTimestamp(function(t){const r=na(t);return new Xn(r.seconds,r.nanos)}(n))}function u9(n,e){return RA(n,e).canonicalString()}function RA(n,e){const t=function(s){return new mt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function YN(n){const e=mt.fromString(n);return lt(tD(e)),e}function O0(n,e){const t=YN(e);if(t.get(1)!==n.databaseId.projectId)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(JN(t))}function QN(n,e){return u9(n.databaseId,e)}function h9(n){const e=YN(n);return e.length===4?mt.emptyPath():JN(e)}function kx(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JN(n){return lt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function d9(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(lt(u===void 0||typeof u=="string"),an.fromBase64String(u||"")):(lt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),an.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Y.UNKNOWN:qN(c.code);return new le(u,c.message||"")}(o);t=new XN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=O0(n,r.document.name),i=Xc(r.document.updateTime),o=r.document.createTime?Xc(r.document.createTime):ge.min(),a=new Ls({mapValue:{fields:r.document.fields}}),l=_n.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new ev(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=O0(n,r.document),i=r.readTime?Xc(r.readTime):ge.min(),o=_n.newNoDocument(s,i),a=r.removedTargetIds||[];t=new ev([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=O0(n,r.document),i=r.removedTargetIds||[];t=new ev([],i,s,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new e9(s,i),a=r.targetId;t=new KN(a,o)}}return t}function f9(n,e){return{documents:[QN(n,e.path)]}}function p9(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=QN(n,s);const i=function(c){if(c.length!==0)return eD($s.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:bc(p.field),direction:v9(p.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=xA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:t,parent:s}}function g9(n){let e=h9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){lt(r===1);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];t.where&&(i=function(f){const p=ZN(f);return p instanceof $s&&MN(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(p=>function(m){return new Hv(Sc(m.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,u_(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new zv(g,p)}(t.startAt));let c=null;return t.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new zv(g,p)}(t.endAt)),N6(e,s,o,i,a,"F",l,c)}function m9(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Sc(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Sc(t.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sc(t.unaryFilter.field);return Ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sc(t.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Sc(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $s.create(t.compositeFilter.filters.map(r=>ZN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(n):ve()}function v9(n){return s9[n]}function y9(n){return i9[n]}function _9(n){return o9[n]}function bc(n){return{fieldPath:n.canonicalString()}}function Sc(n){return Pn.fromServerFormat(n.fieldPath)}function eD(n){return n instanceof Ot?function(t){if(t.op==="=="){if(yx(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NAN"}};if(vx(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yx(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NAN"}};if(vx(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(t.field),op:y9(t.op),value:t.value}}}(n):n instanceof $s?function(t){const r=t.getFilters().map(s=>eD(s));return r.length===1?r[0]:{compositeFilter:{op:_9(t.op),filters:r}}}(n):ve()}function tD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,r,s,i=ge.min(),o=ge.min(),a=an.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e){this.ht=e}}function w9(n){const e=g9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?SA(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(){this.ln=new b9}addToCollectionParentIndex(e,t){return this.ln.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(ta.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class b9{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Bt(mt.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Bt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(41943040,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ch(0)}static Qn(){return new ch(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx([n,e],[t,r]){const s=xe(n,t);return s===0?xe(e,r):s}class S9{constructor(e){this.Gn=e,this.buffer=new Bt(Mx),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Mx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Eh(t)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await l_(t)}await this.Yn(3e5)})}}class C9{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return H.resolve(c_.oe);const r=new S9(t);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Lx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lx):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),wc()<=Ce.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function x9(n,e){return new C9(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(){this.changes=new nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Fd(r.mutation,s,Do.empty(),Xn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){const s=Na();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=_d();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Na();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=ia();const o=Od(),a=function(){return Od()}();return t.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof m_)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Fd(u.mutation,c,u.mutation.getFieldMask(),Xn.now())):o.set(c.key,Do.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var f;return a.set(c,new P9(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Od();let s=new At((o,a)=>o-a),i=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Do.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||Le()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=UN();u.forEach(p=>{if(!i.has(p)){const g=WN(t.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):D6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):H.resolve(Na());let a=-1,l=i;return o.next(c=>H.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Le())).next(u=>({batchId:a,changes:j6(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let s=_d();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=_d();return this.indexManager.getCollectionParents(e,i).next(a=>H.forEach(a,l=>{const c=function(f,p){return new d_(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,_n.newInvalidDocument(u)))});let a=_d();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Fd(u.mutation,c,Do.empty(),Xn.now()),p_(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return H.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Xc(s.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:w9(s.bundledQuery),readTime:Xc(s.readTime)}}(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(){this.overlays=new At(he.comparator),this.Er=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Na();return H.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.Tt(e,t,i)}),H.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Er.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Er.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const s=Na(),i=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return H.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new At((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Na(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Na(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return H.resolve(a)}Tt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Er.get(s.largestBatchId).delete(r.key);this.Er.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Z6(t,r));let i=this.Er.get(t);i===void 0&&(i=Le(),this.Er.set(t,i)),this.Er.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.dr=new Bt(Ht.Ar),this.Rr=new Bt(Ht.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Ht(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new he(new mt([])),r=new Ht(t,e),s=new Ht(t,e+1),i=[];return this.Rr.forEachInRange([r,s],o=>{this.gr(o),i.push(o.key)}),i}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new he(new mt([])),r=new Ht(t,e),s=new Ht(t,e+1);let i=Le();return this.Rr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new Ht(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return he.comparator(e.key,t.key)||xe(e.br,t.br)}static Vr(e,t){return xe(e.br,t.br)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Bt(Ht.Ar)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new J6(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.vr=this.vr.add(new Ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Fr(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),s=new Ht(t,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([r,s],o=>{const a=this.Cr(o.br);i.push(a)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(xe);return t.forEach(s=>{const i=new Ht(s,0),o=new Ht(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([i,o],a=>{r=r.add(a.br)})}),H.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new Ht(new he(i),0);let a=new Bt(xe);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.br)),!0)},o),H.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){lt(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return H.forEach(t.mutations,s=>{const i=new Ht(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Ht(t,0),s=this.vr.firstAfterOrEqual(r);return H.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e){this.Nr=e,this.docs=function(){return new At(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=ia();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_n.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=ia();const o=t.path,a=new he(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||f6(d6(u),r)<=0||(s.has(u.key)||p_(t,u))&&(i=i.insert(u.key,u.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ve()}Lr(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new O9(this)}getSize(e){return H.resolve(this.size)}}class O9 extends R9{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.persistence=e,this.Br=new nc(t=>wS(t),AS),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.kr=0,this.qr=new CS,this.targetCount=0,this.Qr=ch.qn()}forEachTarget(e,t){return this.Br.forEach((r,s)=>t(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),H.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new ch(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Un(t),H.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Br.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t){this.Kr={},this.overlays={},this.$r=new c_(0),this.Ur=!1,this.Ur=!0,this.Wr=new M9,this.referenceDelegate=e(this),this.Gr=new F9(this),this.indexManager=new A9,this.remoteDocumentCache=function(s){return new D9(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new E9(t),this.jr=new k9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new L9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new N9(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const s=new V9(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(i=>this.referenceDelegate.Jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Yr(e,t){return H.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class V9 extends g6{constructor(e){super(),this.currentSequenceNumber=e}}class xS{constructor(e){this.persistence=e,this.Zr=new CS,this.Xr=null}static ei(e){return new xS(e)}get ti(){if(this.Xr)return this.Xr;throw ve()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),H.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.ti.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.ti,r=>{const s=he.fromPath(r);return this.ni(e,s).next(i=>{i||t.removeEntry(s,ge.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return H.or([()=>H.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class qv{constructor(e,t){this.persistence=e,this.ri=new nc(r=>v6(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=x9(this,t)}static ei(e,t){return new qv(e,t)}Hr(){}Jr(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return H.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(i=>i?H.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(r++,i.removeEntry(o,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),H.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jm(e.data.value)),t}ir(e,t,r){return H.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return H.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=s}static zi(e,t){let r=Le(),s=Le();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new RS(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return jH()?8:m6(VH())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.Xi(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.es(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new B9;return this.ts(e,t,o).next(a=>{if(i.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>i.result)}ns(e,t,r,s){return r.documentReadCount<this.Ji?(wc()<=Ce.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ac(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),H.resolve()):(wc()<=Ce.DEBUG&&ee("QueryEngine","Query:",Ac(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(wc()<=Ce.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ac(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ds(t))):H.resolve())}Xi(e,t){if(Ax(t))return H.resolve(null);let r=Ds(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=SA(t,null,"F"),r=Ds(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Le(...i);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(t,a);return this.ss(t,c,o,l.readTime)?this.Xi(e,SA(t,null,"F")):this.os(e,c,t,l)}))})))}es(e,t,r,s){return Ax(t)||s.isEqual(ge.min())?H.resolve(null):this.Zi.getDocuments(e,r).next(i=>{const o=this.rs(t,i);return this.ss(t,o,r,s)?H.resolve(null):(wc()<=Ce.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ac(t)),this.os(e,o,t,h6(s,-1)).next(a=>a))})}rs(e,t){let r=new Bt(BN(e));return t.forEach((s,i)=>{p_(e,i)&&(r=r.add(i))}),r}ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ts(e,t,r){return wc()<=Ce.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ac(t)),this.Zi.getDocumentsMatchingQuery(e,t,ta.min(),r)}os(e,t,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,t,r,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new At(xe),this.cs=new nc(i=>wS(i),AS),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I9(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function $9(n,e,t,r){return new U9(n,e,t,r)}async function rD(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Le();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function sD(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function z9(n,e){const t=Re(n),r=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const a=[];e.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;a.push(t.Gr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(i,u.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(an.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),s=s.insert(f,g),function(y,w,_){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,u)&&a.push(t.Gr.updateTargetData(i,g))});let l=ia(),c=Le();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(H9(i,o,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!r.isEqual(ge.min())){const u=t.Gr.getLastRemoteSnapshotVersion(i).next(f=>t.Gr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return H.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(t.us=s,i))}function H9(n,e,t){let r=Le(),s=Le();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=ia();return t.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:s}})}function W9(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Gr.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):t.Gr.allocateTargetId(r).next(o=>(s=new Oo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function PA(n,e,t){const r=Re(n),s=r.us.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Eh(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function Nx(n,e,t){const r=Re(n);let s=ge.min(),i=Le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Re(l),p=f.cs.get(u);return p!==void 0?H.resolve(f.us.get(p)):f.Gr.getTargetData(c,u)}(r,o,Ds(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?s:ge.min(),t?i:Le())).next(a=>(G9(r,F6(e),a),{documents:a,ds:i})))}function G9(n,e,t){let r=n.ls.get(e)||ge.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.ls.set(e,r)}class Dx{constructor(){this.activeTargetIds=z6()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q9{constructor(){this._o=new Dx,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Dx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im=null;function F0(){return im===null?im=function(){return 268435456+Math.round(2147483648*Math.random())}():im++,"0x"+im.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class Q9 extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${s}/databases/${i}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Oo(t,r,s,i,o){const a=F0(),l=this.No(t,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,i,o),this.Bo(t,l,c,s).then(u=>(ee("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw ih("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}ko(t,r,s,i,o,a){return this.Oo(t,r,s,i,o)}Lo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_h}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>t[o]=i),s&&s.headers.forEach((i,o)=>t[o]=i)}No(t,r){const s=X9[t];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,s){const i=F0();return new Promise((o,a)=>{const l=new SN;l.setWithCredentials(!0),l.listenOnce(TN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qm.NO_ERROR:const u=l.getResponseJson();ee(dn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Qm.TIMEOUT:ee(dn,`RPC '${e}' ${i} timed out`),a(new le(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Qm.HTTP_ERROR:const f=l.getStatus();if(ee(dn,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const m=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(_)>=0?_:Y.UNKNOWN}(g.status);a(new le(m,g.message))}else a(new le(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new le(Y.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{ee(dn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ee(dn,`RPC '${e}' ${i} sending request:`,s),l.send(t,"POST",c,r,15)})}qo(e,t,r){const s=F0(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RN(),a=xN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=i.join("");ee(dn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,g=!1;const m=new Y9({Eo:w=>{g?ee(dn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(ee(dn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),ee(dn,`RPC '${e}' stream ${s} sending:`,w),f.send(w))},Ao:()=>f.close()}),y=(w,_,E)=>{w.listen(_,S=>{try{E(S)}catch(R){setTimeout(()=>{throw R},0)}})};return y(f,yd.EventType.OPEN,()=>{g||(ee(dn,`RPC '${e}' stream ${s} transport opened.`),m.So())}),y(f,yd.EventType.CLOSE,()=>{g||(g=!0,ee(dn,`RPC '${e}' stream ${s} transport closed`),m.Do())}),y(f,yd.EventType.ERROR,w=>{g||(g=!0,ih(dn,`RPC '${e}' stream ${s} transport errored:`,w),m.Do(new le(Y.UNAVAILABLE,"The operation could not be completed")))}),y(f,yd.EventType.MESSAGE,w=>{var _;if(!g){const E=w.data[0];lt(!!E);const S=E,R=(S==null?void 0:S.error)||((_=S[0])===null||_===void 0?void 0:_.error);if(R){ee(dn,`RPC '${e}' stream ${s} received error:`,R);const D=R.status;let F=function(k){const M=St[k];if(M!==void 0)return qN(M)}(D),C=R.message;F===void 0&&(F=Y.INTERNAL,C="Unknown error status: "+D+" with message "+R.message),g=!0,m.Do(new le(F,C)),f.close()}else ee(dn,`RPC '${e}' stream ${s} received:`,E),m.vo(E)}}),y(a,CN.STAT_EVENT,w=>{w.stat===yA.PROXY?ee(dn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===yA.NOPROXY&&ee(dn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.bo()},0),m}}function V0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(n){return new a9(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t,r=1e3,s=1.5,i=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=s,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,t,r,s,i,o,a,l){this.li=e,this.Yo=r,this.Zo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new oD(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Gi(t.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===t&&this.I_(r,s)},r=>{e(()=>{const s=new le(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(s)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.E_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z9 extends J9{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=d9(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Xc(o.readTime):ge.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=kx(this.serializer),t.addTarget=function(i,o){let a;const l=o.target;if(a=bA(l)?{documents:f9(i,l)}:{query:p9(i,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=c9(i,o.resumeToken);const c=xA(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=l9(i,o.snapshotVersion.toTimestamp());const c=xA(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=m9(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=kx(this.serializer),t.removeTarget=e,this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Oo(e,RA(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(Y.UNKNOWN,i.toString())})}ko(e,t,r,s,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,RA(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Y.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class tW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Gi(t),this.C_=!1):ee("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{cg(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Re(l);c.k_.add(4),await lg(c),c.K_.set("Unknown"),c.k_.delete(4),await y_(c)}(this))})}),this.K_=new tW(r,s)}}async function y_(n){if(cg(n))for(const e of n.q_)await e(!0)}async function lg(n){for(const e of n.q_)await e(!1)}function aD(n,e){const t=Re(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),LS(t)?kS(t):wh(t).s_()&&IS(t,e))}function PS(n,e){const t=Re(n),r=wh(t);t.B_.delete(e),r.s_()&&lD(t,e),t.B_.size===0&&(r.s_()?r.a_():cg(t)&&t.K_.set("Unknown"))}function IS(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wh(n).V_(e)}function lD(n,e){n.U_.xe(e),wh(n).m_(e)}function kS(n){n.U_=new r9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),wh(n).start(),n.K_.F_()}function LS(n){return cg(n)&&!wh(n).i_()&&n.B_.size>0}function cg(n){return Re(n).k_.size===0}function cD(n){n.U_=void 0}async function rW(n){n.K_.set("Online")}async function sW(n){n.B_.forEach((e,t)=>{IS(n,e)})}async function iW(n,e){cD(n),LS(n)?(n.K_.O_(e),kS(n)):n.K_.set("Unknown")}async function oW(n,e,t){if(n.K_.set("Online"),e instanceof XN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.B_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.B_.delete(a),s.U_.removeTarget(a))}(n,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fx(n,r)}else if(e instanceof ev?n.U_.$e(e):e instanceof KN?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(ge.min()))try{const r=await sD(n.localStore);t.compareTo(r)>=0&&await function(i,o){const a=i.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.B_.get(c);u&&i.B_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.B_.get(l);if(!u)return;i.B_.set(l,u.withResumeToken(an.EMPTY_BYTE_STRING,u.snapshotVersion)),lD(i,l);const f=new Oo(u.target,l,c,u.sequenceNumber);IS(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Fx(n,r)}}async function Fx(n,e,t){if(!Eh(e))throw e;n.k_.add(1),await lg(n),n.K_.set("Offline"),t||(t=()=>sD(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await y_(n)})}async function Vx(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=cg(t);t.k_.add(3),await lg(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await y_(t)}async function aW(n,e){const t=Re(n);e?(t.k_.delete(2),await y_(t)):e||(t.k_.add(2),await lg(t),t.K_.set("Unknown"))}function wh(n){return n.W_||(n.W_=function(t,r,s){const i=Re(t);return i.b_(),new Z9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Ro:rW.bind(null,n),mo:sW.bind(null,n),po:iW.bind(null,n),R_:oW.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),LS(n)?kS(n):n.K_.set("Unknown")):(await n.W_.stop(),cD(n))})),n.W_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Nl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new MS(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uD(n,e){if(Gi("AsyncQueue",`${e}: ${n}`),Eh(n))return new le(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{static emptySet(e){return new Yc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=_d(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Yc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.z_=new At(he.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ve():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class uh{constructor(e,t,r,s,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new uh(e,t,Yc.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&f_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class cW{constructor(){this.queries=jx(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const s=Re(t),i=s.queries;s.queries=jx(),i.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new le(Y.ABORTED,"Firestore shutting down"))}}function jx(){return new nc(n=>VN(n),f_)}async function uW(n,e){const t=Re(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Y_()&&e.Z_()&&(r=2):(i=new lW,r=e.Z_()?0:1);try{switch(r){case 0:i.H_=await t.onListen(s,!0);break;case 1:i.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=uD(o,`Initialization of query '${Ac(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.J_.push(e),e.ea(t.onlineState),i.H_&&e.ta(i.H_)&&NS(t)}async function hW(n,e){const t=Re(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.J_.indexOf(e);o>=0&&(i.J_.splice(o,1),i.J_.length===0?s=e.Z_()?0:1:!i.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dW(n,e){const t=Re(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.J_)a.ta(s)&&(r=!0);o.H_=s}}r&&NS(t)}function fW(n,e,t){const r=Re(n),s=r.queries.get(e);if(s)for(const i of s.J_)i.onError(t);r.queries.delete(e)}function NS(n){n.X_.forEach(e=>{e.next()})}var IA,Ux;(Ux=IA||(IA={})).na="default",Ux.Cache="cache";class pW{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new uh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=uh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==IA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.key=e}}class dD{constructor(e){this.key=e}}class gW{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Le(),this.mutatedKeys=Le(),this.Va=BN(e),this.ma=new Yc(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new Bx,s=t?t.ma:this.ma;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const p=s.get(u),g=p_(this.query,f)?f:null,m=!!p&&this.mutatedKeys.has(p.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;p&&g?p.data.isEqual(g.data)?m!==y&&(r.track({type:3,doc:g}),w=!0):this.ya(p,g)||(r.track({type:2,doc:g}),w=!0,(l&&this.Va(g,l)>0||c&&this.Va(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),w=!0):p&&!g&&(r.track({type:1,doc:p}),w=!0,(l||c)&&(a=!0)),w&&(g?(o=o.add(g),i=y?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{ma:o,pa:r,ss:a,mutatedKeys:i}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,f)=>function(g,m){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return y(g)-y(m)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),s=s!=null&&s;const a=t&&!s?this.Sa():[],l=this.Ra.size===0&&this.current&&!s?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new uh(this.query,e.ma,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Bx,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Le(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new dD(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new hD(r))}),t}va(e){this.da=e.ds,this.Ra=Le();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return uh.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class mW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vW{constructor(e){this.key=e,this.Fa=!1}}class yW{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new nc(a=>VN(a),f_),this.Oa=new Map,this.Na=new Set,this.La=new At(he.comparator),this.Ba=new Map,this.ka=new CS,this.qa={},this.Qa=new Map,this.Ka=ch.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function _W(n,e,t=!0){const r=vD(n);let s;const i=r.xa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Ca()):s=await fD(r,e,t,!0),s}async function EW(n,e){const t=vD(n);await fD(t,e,!0,!1)}async function fD(n,e,t,r){const s=await W9(n.localStore,Ds(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await wW(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&aD(n.remoteStore,s),a}async function wW(n,e,t,r,s){n.Ua=(f,p,g)=>async function(y,w,_,E){let S=w.view.ga(_);S.ss&&(S=await Nx(y.localStore,w.query,!1).then(({documents:C})=>w.view.ga(C,S)));const R=E&&E.targetChanges.get(w.targetId),D=E&&E.targetMismatches.get(w.targetId)!=null,F=w.view.applyChanges(S,y.isPrimaryClient,R,D);return zx(y,w.targetId,F.ba),F.snapshot}(n,f,p,g);const i=await Nx(n.localStore,e,!0),o=new gW(e,i.ds),a=o.ga(i.documents),l=ag.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);zx(n,t,c.ba);const u=new mW(e,t,o);return n.xa.set(e,u),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),c.snapshot}async function AW(n,e,t){const r=Re(n),s=r.xa.get(e),i=r.Oa.get(s.targetId);if(i.length>1)return r.Oa.set(s.targetId,i.filter(o=>!f_(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await PA(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&PS(r.remoteStore,s.targetId),kA(r,s.targetId)}).catch(l_)):(kA(r,s.targetId),await PA(r.localStore,s.targetId,!0))}async function bW(n,e){const t=Re(n),r=t.xa.get(e),s=t.Oa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),PS(t.remoteStore,r.targetId))}async function pD(n,e){const t=Re(n);try{const r=await z9(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Ba.get(i);o&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Fa=!0:s.modifiedDocuments.size>0?lt(o.Fa):s.removedDocuments.size>0&&(lt(o.Fa),o.Fa=!1))}),await mD(t,r,e)}catch(r){await l_(r)}}function $x(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.xa.forEach((i,o)=>{const a=o.view.ea(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Re(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.J_)p.ea(a)&&(c=!0)}),c&&NS(l)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SW(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ba.get(e),i=s&&s.key;if(i){let o=new At(he.comparator);o=o.insert(i,_n.newNoDocument(i,ge.min()));const a=Le().add(i),l=new v_(ge.min(),new Map,new At(xe),o,a);await pD(r,l),r.La=r.La.remove(i),r.Ba.delete(e),DS(r)}else await PA(r.localStore,e,!1).then(()=>kA(r,e,t)).catch(l_)}function kA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||gD(n,r)})}function gD(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(PS(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),DS(n))}function zx(n,e,t){for(const r of t)r instanceof hD?(n.ka.addReference(r.key,e),TW(n,r)):r instanceof dD?(ee("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||gD(n,r.key)):ve()}function TW(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(ee("SyncEngine","New document in limbo: "+t),n.Na.add(r),DS(n))}function DS(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new he(mt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new vW(t)),n.La=n.La.insert(t,r),aD(n.remoteStore,new Oo(Ds(FN(t.path)),r,"TargetPurposeLimboResolution",c_.oe))}}async function mD(n,e,t){const r=Re(n),s=[],i=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=RS.zi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ma.R_(s),await async function(l,c){const u=Re(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(c,p=>H.forEach(p.Wi,g=>u.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>H.forEach(p.Gi,g=>u.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Eh(f))throw f;ee("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=u.us.get(p),m=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(m);u.us=u.us.insert(p,y)}}}(r.localStore,i))}async function CW(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await rD(t.localStore,e);t.currentUser=e,function(i,o){i.Qa.forEach(a=>{a.forEach(l=>{l.reject(new le(Y.CANCELLED,o))})}),i.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mD(t,r.Ts)}}function xW(n,e){const t=Re(n),r=t.Ba.get(e);if(r&&r.Fa)return Le().add(r.key);{let s=Le();const i=t.Oa.get(e);if(!i)return s;for(const o of i){const a=t.xa.get(o);s=s.unionWith(a.view.fa)}return s}}function vD(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SW.bind(null,e),e.Ma.R_=dW.bind(null,e.eventManager),e.Ma.Wa=fW.bind(null,e.eventManager),e}class Kv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iD(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return $9(this.persistence,new j9,e.initialUser,this.serializer)}ja(e){return new nD(xS.ei,this.serializer)}za(e){return new q9}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kv.provider={build:()=>new Kv};class RW extends Kv{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){lt(this.persistence.referenceDelegate instanceof qv);const r=this.persistence.referenceDelegate.garbageCollector;return new T9(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new nD(r=>qv.ei(r,t),this.serializer)}}class LA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$x(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CW.bind(null,this.syncEngine),await aW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cW}()}createDatastore(e){const t=iD(e.databaseInfo.databaseId),r=function(i){return new Q9(i)}(e.databaseInfo);return function(i,o,a,l){return new eW(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new nW(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>$x(this.syncEngine,t,0),function(){return Ox.p()?new Ox:new K9}())}createSyncEngine(e,t){return function(s,i,o,a,l,c,u){const f=new yW(s,i,o,a,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=Re(s);ee("RemoteStore","RemoteStore shutting down."),i.k_.add(5),await lg(i),i.Q_.shutdown(),i.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}LA.provider={build:()=>new LA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=c6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=uD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function B0(n,e){n.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rD(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Hx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await kW(n);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Vx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Vx(e.remoteStore,s)),n._onlineComponents=e}async function kW(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await B0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ih("Error using user provided cache. Falling back to memory cache: "+t),await B0(n,new Kv)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await B0(n,new RW(void 0));return n._offlineComponents}async function LW(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Hx(n,n._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Hx(n,new LA))),n._onlineComponents}async function MW(n){const e=await LW(n),t=e.eventManager;return t.onListen=_W.bind(null,e.syncEngine),t.onUnlisten=AW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bW.bind(null,e.syncEngine),t}function NW(n,e,t={}){const r=new Nl;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new PW({next:p=>{u.eu(),o.enqueueAndForget(()=>hW(i,f)),p.fromCache&&l.source==="server"?c.reject(new le(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new pW(a,u,{includeMetadataChanges:!0,ua:!0});return uW(i,f)}(await MW(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new Map;function DW(n,e,t,r){if(e===!0&&r===!0)throw new le(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Gx(n){if(he.isDocumentKey(n))throw new le(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OW(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve()}function MA(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OW(n);throw new le(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class OS{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new t6;switch(r.type){case"firstParty":return new i6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Wx.get(t);r&&(ee("ComponentProvider","Removing Datastore"),Wx.delete(t),r.terminate())}(this),Promise.resolve()}}function FW(n,e,t,r={}){var s;const i=(n=MA(n,OS))._getSettings(),o=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ih("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=vn.MOCK_USER;else{a=hN(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new le(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new vn(c)}n._authCredentials=new n6(new PN(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new __(this.firestore,e,this._query)}}class Ah{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ah(this.firestore,e,this._key)}}class Qc extends __{constructor(e,t,r){super(e,t,FN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ah(this.firestore,null,new he(e))}withConverter(e){return new Qc(this.firestore,e,this._path)}}function VW(n,e,...t){if(n=fN(n),n instanceof OS){const r=mt.fromString(e,...t);return Gx(r),new Qc(n,null,r)}{if(!(n instanceof Ah||n instanceof Qc))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return Gx(r),new Qc(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new oD(this,"async_queue_retry"),this.fu=()=>{const r=V0();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=V0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=V0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Nl;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Eh(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Gi("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=MS.createAndSchedule(this,e,t,r,i=>this.Su(i));return this.du.push(s),s}pu(){this.Au&&ve()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class _D extends OS{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Kx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kx(e),this._firestoreClient=void 0,await e}}}function BW(n,e){const t=typeof n=="object"?n:EN(),r=typeof n=="string"?n:"(default)",s=vN(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=cN("firestore");i&&FW(s,...i)}return s}function jW(n){if(n._terminated)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UW(n),n._firestoreClient}function UW(n){var e,t,r;const s=n._freezeSettings(),i=function(a,l,c,u){return new w6(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,yD(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new IW(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xv(an.fromBase64String(e))}catch(t){throw new le(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xv(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}const HW=new RegExp("[~\\*/\\[\\]]");function WW(n,e,t){if(e.search(HW)>=0)throw Xx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new ED(...e.split("."))._internalPath}catch{throw Xx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function Xx(n,e,t,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new le(Y.INVALID_ARGUMENT,i+n+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ah(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(AD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GW extends wD{data(){return super.data()}}function AD(n,e){return typeof e=="string"?WW(n,e):e instanceof ED?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KW{convertValue(e,t="none"){switch(sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return og(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>_t(o.doubleValue));return new zW(i)}convertGeoPoint(e){return new $W(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=h_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hf(e));default:return null}}convertTimestamp(e){const t=na(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);lt(tD(r));const s=new df(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(t)||Gi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XW extends wD{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(AD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class tv extends XW{data(e={}){return super.data(e)}}class YW{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new om(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tv(this._firestore,this._userDataWriter,r.key,r,new om(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new tv(s._firestore,s._userDataWriter,a.doc.key,a.doc,new om(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new tv(s._firestore,s._userDataWriter,a.doc.key,a.doc,new om(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:QW(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}class JW extends KW{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ah(this.firestore,null,t)}}function ZW(n){n=MA(n,__);const e=MA(n.firestore,_D),t=jW(e),r=new JW(e);return qW(n._query),NW(t,n._query).then(s=>new YW(e,r,n,s))}(function(e,t=!0){(function(s){_h=s})(yN),lf(new sh("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new _D(new r6(r.getProvider("auth-internal")),new a6(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new le(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new df(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),qo(hx,"4.7.5",e),qo(hx,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebasestorage.googleapis.com",eG="storageBucket",tG=2*60*1e3,nG=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends tc{constructor(e,t,r=0){super(j0(e),`Firebase Storage: ${t} (${j0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ws.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return j0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zs||(zs={}));function j0(n){return"storage/"+n}function rG(){const n="An unknown error occurred, please check the error payload for server response.";return new Ws(zs.UNKNOWN,n)}function sG(){return new Ws(zs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iG(){return new Ws(zs.CANCELED,"User canceled the upload/download.")}function oG(n){return new Ws(zs.INVALID_URL,"Invalid URL '"+n+"'.")}function aG(n){return new Ws(zs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Yx(n){return new Ws(zs.INVALID_ARGUMENT,n)}function SD(){return new Ws(zs.APP_DELETED,"The Firebase app was deleted.")}function lG(n){return new Ws(zs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ss.makeFromUrl(e,t)}catch{return new ss(e,"")}if(r.path==="")return r;throw aG(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${u}/b/${s}/o${p}`,"i"),m={bucket:1,path:3},y=t===bD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",_=new RegExp(`^https?://${y}/${s}/${w}`,"i"),S=[{regex:a,indices:l,postModify:i},{regex:g,indices:m,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<S.length;R++){const D=S[R],F=D.regex.exec(e);if(F){const C=F[D.indices.bucket];let T=F[D.indices.path];T||(T=""),r=new ss(C,T),D.postModify(r);break}}if(r==null)throw oG(e);return r}}class cG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uG(n,e,t){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function f(w){s=setTimeout(()=>{s=null,n(g,l())},w)}function p(){i&&clearTimeout(i)}function g(w,..._){if(c){p();return}if(w){p(),u.call(null,w,..._);return}if(l()||o){p(),u.call(null,w,..._);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let m=!1;function y(w){m||(m=!0,p(),!c&&(s!==null?(w||(a=2),clearTimeout(s),f(0)):w||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,y(!0)},t),y}function hG(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dG(n){return n!==void 0}function Qx(n,e,t,r){if(r<e)throw Yx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Yx(`Invalid value for '${n}'. Expected ${t} or less.`)}function fG(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Yv;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Yv||(Yv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pG(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e,t,r,s,i,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,m)=>{this.resolve_=g,this.reject_=m,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new am(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Yv.NO_ERROR,l=i.getStatus();if(!a||pG(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Yv.ABORT;r(!1,new am(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new am(c,i))})},t=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());dG(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=rG();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?SD():iG();o(l)}else{const l=sG();o(l)}};this.canceled_?t(!1,new am(!1,null,!0)):this.backoffId_=uG(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class am{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function mG(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function vG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yG(n,e){e&&(n["X-Firebase-GMPID"]=e)}function _G(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function EG(n,e,t,r,s,i,o=!0){const a=fG(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return yG(c,e),mG(c,t),vG(c,i),_G(c,r),new gG(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wG(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function AG(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t){this._service=e,t instanceof ss?this._location=t:this._location=ss.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qv(e,t)}get root(){const e=new ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AG(this._location.path)}get storage(){return this._service}get parent(){const e=wG(this._location.path);if(e===null)return null;const t=new ss(this._location.bucket,e);return new Qv(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lG(e)}}function Jx(n,e){const t=e==null?void 0:e[eG];return t==null?null:ss.makeFromBucketSpec(t,n)}function bG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:hN(s,n.app.options.projectId))}class SG{constructor(e,t,r,s,i){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=bD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tG,this._maxUploadRetryTime=nG,this._requests=new Set,s!=null?this._bucket=ss.makeFromBucketSpec(s,this._host):this._bucket=Jx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ss.makeFromBucketSpec(this._url,e):this._bucket=Jx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qv(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new cG(SD());{const o=EG(e,this._appId,r,s,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Zx="@firebase/storage",eR="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="storage";function TG(n=EN(),e){n=fN(n);const r=vN(n,TD).getImmediate({identifier:e}),s=cN("storage");return s&&CG(r,...s),r}function CG(n,e,t,r={}){bG(n,e,t,r)}function xG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new SG(t,r,s,e,yN)}function RG(){lf(new sh(TD,xG,"PUBLIC").setMultipleInstances(!0)),qo(Zx,eR,""),qo(Zx,eR,"esm2017")}RG();const PG={apiKey:"AIzaSyCJH3g_kDzcdTsYyBfYnWN9Vu0NVHQr1Wk",authDomain:"my-portfolio-page-4ceda.firebaseapp.com",projectId:"my-portfolio-page-4ceda",storageBucket:"my-portfolio-page-4ceda.appspot.com",messagingSenderId:"835759719339",appId:"1:835759719339:web:03a12d09572082289608ee",measurementId:"G-V5690YXT75"},CD=_N(PG),IG=BW(CD);TG(CD);function kG(){const[n,e]=A.useState([]);return A.useEffect(()=>{(async()=>{const s=(await ZW(VW(IG,"projects"))).docs.map(i=>i.data());console.log(s),e(s)})()},[]),V.jsxs(Ni,{direction:"column",className:"works",style:{paddingTop:"0px"},children:[V.jsx(Ma,{size:"8",weight:"bold",className:"title",style:{display:"flex",justifyContent:"center",padding:"20px"},children:"My Projects"}),V.jsx(sS,{}),V.jsx(Ni,{wrap:"wrap",gap:"4",justify:"center",children:n.map((t,r)=>V.jsxs(jk,{className:"project-card",children:[V.jsx(Ma,{weight:"bold",children:t.name}),V.jsx("br",{}),V.jsx(Ma,{style:{display:"flex",height:"50px",justifyContent:"center"},children:t.description}),V.jsxs(Ma,{size:"1",children:["Tech Stack: ",t.tech]}),V.jsx("br",{}),V.jsxs(Ni,{gap:"3",marginTop:"2",style:{display:"flex",justifyContent:"center"},children:[V.jsx(GE,{onClick:()=>window.open(t.github,"_blank"),children:"GitHub"}),t.live&&t.live!=="null"&&V.jsx(GE,{onClick:()=>window.open(t.live,"_blank"),children:"Live Demo"})]})]},r))})]})}const LG=()=>V.jsxs(rB,{children:[V.jsx(pc,{path:"/",element:V.jsx(T1,{})}),V.jsx(pc,{path:"/resume",element:V.jsx(wH,{})}),V.jsx(pc,{path:"/contact",element:V.jsx(xH,{})}),V.jsx(pc,{path:"/projects",element:V.jsx(kG,{})}),V.jsx(pc,{path:"/*",element:V.jsx(T1,{})})]});function xD(n,e=[]){let t=[];function r(i,o){const a=A.createContext(o),l=t.length;t=[...t,o];const c=f=>{var _;const{scope:p,children:g,...m}=f,y=((_=p==null?void 0:p[n])==null?void 0:_[l])||a,w=A.useMemo(()=>m,Object.values(m));return V.jsx(y.Provider,{value:w,children:g})};c.displayName=i+"Provider";function u(f,p){var y;const g=((y=p==null?void 0:p[n])==null?void 0:y[l])||a,m=A.useContext(g);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,MG(s,...e)]}function MG(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var NG="DismissableLayer",NA="dismissableLayer.update",DG="dismissableLayer.pointerDownOutside",OG="dismissableLayer.focusOutside",tR,RD=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),PD=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(RD),[u,f]=A.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=A.useState({}),m=xt(e,C=>f(C)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(w),E=u?y.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,R=E>=_,D=BG(C=>{const T=C.target,k=[...c.branches].some(M=>M.contains(T));!R||k||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),F=jG(C=>{const T=C.target;[...c.branches].some(M=>M.contains(T))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return VI(C=>{E===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(tR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),nR(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tR)}},[u,p,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),nR())},[u,c]),A.useEffect(()=>{const C=()=>g({});return document.addEventListener(NA,C),()=>document.removeEventListener(NA,C)},[]),V.jsx(vt.div,{...l,ref:m,style:{pointerEvents:S?R?"auto":"none":void 0,...n.style},onFocusCapture:ue(n.onFocusCapture,F.onFocusCapture),onBlurCapture:ue(n.onBlurCapture,F.onBlurCapture),onPointerDownCapture:ue(n.onPointerDownCapture,D.onPointerDownCapture)})});PD.displayName=NG;var FG="DismissableLayerBranch",VG=A.forwardRef((n,e)=>{const t=A.useContext(RD),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),V.jsx(vt.div,{...n,ref:s})});VG.displayName=FG;function BG(n,e=globalThis==null?void 0:globalThis.document){const t=Yn(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){ID(DG,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function jG(n,e=globalThis==null?void 0:globalThis.document){const t=Yn(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&ID(OG,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nR(){const n=new CustomEvent(NA);document.dispatchEvent(n)}function ID(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Vb(s,i):s.dispatchEvent(i)}var U0=0;function UG(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??rR()),document.body.insertAdjacentElement("beforeend",n[1]??rR()),U0++,()=>{U0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),U0--}},[])}function rR(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}function $G(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var E_=n=>{const{present:e,children:t}=n,r=zG(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=xt(r.ref,HG(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};E_.displayName="Presence";function zG(n){const[e,t]=A.useState(),r=A.useRef({}),s=A.useRef(n),i=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=$G(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=lm(r.current);i.current=a==="mounted"?c:"none"},[a]),Vs(()=>{const c=r.current,u=s.current;if(u!==n){const p=i.current,g=lm(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Vs(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=g=>{const y=lm(r.current).includes(g.animationName);if(g.target===e&&y&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=g=>{g.target===e&&(i.current=lm(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function lm(n){return(n==null?void 0:n.animationName)||"none"}function HG(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var nv="right-scroll-bar-position",rv="width-before-scroll-bar",WG="with-scroll-bars-hidden",GG="--removed-body-scroll-bar-size",kD=$B(),$0=function(){},w_=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:$0,onWheelCapture:$0,onTouchMoveCapture:$0}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,f=n.shards,p=n.sideCar,g=n.noIsolation,m=n.inert,y=n.allowPinchZoom,w=n.as,_=w===void 0?"div":w,E=n.gapMode,S=WI(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=p,D=BB([t,e]),F=ks(ks({},S),s);return A.createElement(A.Fragment,null,u&&A.createElement(R,{sideCar:kD,removeScrollBar:c,shards:f,noIsolation:g,inert:m,setCallbacks:i,allowPinchZoom:!!y,lockRef:t,gapMode:E}),o?A.cloneElement(A.Children.only(a),ks(ks({},F),{ref:D})):A.createElement(_,ks({},F,{className:l,ref:D}),a))});w_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};w_.classNames={fullWidth:rv,zeroRight:nv};var qG={left:0,top:0,right:0,gap:0},z0=function(n){return parseInt(n||"",10)||0},KG=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[z0(t),z0(r),z0(s)]},XG=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return qG;var e=KG(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},YG=qI(),Jc="data-scroll-locked",QG=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(WG,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Jc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(rv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(nv," .").concat(nv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(rv," .").concat(rv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Jc,`] {
    `).concat(GG,": ").concat(a,`px;
  }
`)},sR=function(){var n=parseInt(document.body.getAttribute(Jc)||"0",10);return isFinite(n)?n:0},JG=function(){A.useEffect(function(){return document.body.setAttribute(Jc,(sR()+1).toString()),function(){var n=sR()-1;n<=0?document.body.removeAttribute(Jc):document.body.setAttribute(Jc,n.toString())}},[])},ZG=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;JG();var i=A.useMemo(function(){return XG(s)},[s]);return A.createElement(YG,{styles:QG(i,!e,s,t?"":"!important")})},DA=!1;if(typeof window<"u")try{var cm=Object.defineProperty({},"passive",{get:function(){return DA=!0,!0}});window.addEventListener("test",cm,cm),window.removeEventListener("test",cm,cm)}catch{DA=!1}var dc=DA?{passive:!1}:!1,eq=function(n){return n.tagName==="TEXTAREA"},LD=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!eq(n)&&t[e]==="visible")},tq=function(n){return LD(n,"overflowY")},nq=function(n){return LD(n,"overflowX")},iR=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=MD(n,r);if(s){var i=ND(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},rq=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},sq=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},MD=function(n,e){return n==="v"?tq(e):nq(e)},ND=function(n,e){return n==="v"?rq(e):sq(e)},iq=function(n,e){return n==="h"&&e==="rtl"?-1:1},oq=function(n,e,t,r,s){var i=iq(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,l=e.contains(a),c=!1,u=o>0,f=0,p=0;do{var g=ND(n,a),m=g[0],y=g[1],w=g[2],_=y-w-i*m;(m||_)&&MD(n,a)&&(f+=_,p+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(f)<1||!s)||!u&&(Math.abs(p)<1||!s))&&(c=!0),c},um=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},oR=function(n){return[n.deltaX,n.deltaY]},aR=function(n){return n&&"current"in n?n.current:n},aq=function(n,e){return n[0]===e[0]&&n[1]===e[1]},lq=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},cq=0,fc=[];function uq(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),s=A.useState(cq++)[0],i=A.useState(qI)[0],o=A.useRef(n);A.useEffect(function(){o.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var y=OB([n.lockRef.current],(n.shards||[]).map(aR),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=A.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var _=um(y),E=t.current,S="deltaX"in y?y.deltaX:E[0]-_[0],R="deltaY"in y?y.deltaY:E[1]-_[1],D,F=y.target,C=Math.abs(S)>Math.abs(R)?"h":"v";if("touches"in y&&C==="h"&&F.type==="range")return!1;var T=iR(C,F);if(!T)return!0;if(T?D=C:(D=C==="v"?"h":"v",T=iR(C,F)),!T)return!1;if(!r.current&&"changedTouches"in y&&(S||R)&&(r.current=D),!D)return!0;var k=r.current||D;return oq(k,w,y,k==="h"?S:R,!0)},[]),l=A.useCallback(function(y){var w=y;if(!(!fc.length||fc[fc.length-1]!==i)){var _="deltaY"in w?oR(w):um(w),E=e.current.filter(function(D){return D.name===w.type&&(D.target===w.target||w.target===D.shadowParent)&&aq(D.delta,_)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var S=(o.current.shards||[]).map(aR).filter(Boolean).filter(function(D){return D.contains(w.target)}),R=S.length>0?a(w,S[0]):!o.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),c=A.useCallback(function(y,w,_,E){var S={name:y,delta:w,target:_,should:E,shadowParent:hq(_)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(R){return R!==S})},1)},[]),u=A.useCallback(function(y){t.current=um(y),r.current=void 0},[]),f=A.useCallback(function(y){c(y.type,oR(y),y.target,a(y,n.lockRef.current))},[]),p=A.useCallback(function(y){c(y.type,um(y),y.target,a(y,n.lockRef.current))},[]);A.useEffect(function(){return fc.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,dc),document.addEventListener("touchmove",l,dc),document.addEventListener("touchstart",u,dc),function(){fc=fc.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,dc),document.removeEventListener("touchmove",l,dc),document.removeEventListener("touchstart",u,dc)}},[]);var g=n.removeScrollBar,m=n.inert;return A.createElement(A.Fragment,null,m?A.createElement(i,{styles:lq(s)}):null,g?A.createElement(ZG,{gapMode:n.gapMode}):null)}function hq(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const dq=zB(kD,uq);var DD=A.forwardRef(function(n,e){return A.createElement(w_,ks({},n,{ref:e,sideCar:dq}))});DD.classNames=w_.classNames;var OA=["Enter"," "],fq=["ArrowDown","PageUp","Home"],OD=["ArrowUp","PageDown","End"],pq=[...fq,...OD],gq={ltr:[...OA,"ArrowRight"],rtl:[...OA,"ArrowLeft"]},mq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ug="Menu",[pf,vq,yq]=rS(ug),[rc,_q]=xD(ug,[yq,zy,qy]),A_=zy(),FD=qy(),[Eq,bh]=rc(ug),[wq,hg]=rc(ug),VD=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=A_(e),[l,c]=A.useState(null),u=A.useRef(!1),f=Yn(i),p=eS(s);return A.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),V.jsx(E4,{...a,children:V.jsx(Eq,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:c,children:V.jsx(wq,{scope:e,onClose:A.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:p,modal:o,children:r})})})};VD.displayName=ug;var Aq="MenuAnchor",FS=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=A_(t);return V.jsx(_k,{...s,...r,ref:e})});FS.displayName=Aq;var bq="MenuPortal",[Y8,BD]=rc(bq,{forceMount:void 0}),Nr="MenuContent",[Sq,VS]=rc(Nr),jD=A.forwardRef((n,e)=>{const t=BD(Nr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=bh(Nr,n.__scopeMenu),o=hg(Nr,n.__scopeMenu);return V.jsx(pf.Provider,{scope:n.__scopeMenu,children:V.jsx(E_,{present:r||i.open,children:V.jsx(pf.Slot,{scope:n.__scopeMenu,children:o.modal?V.jsx(Tq,{...s,ref:e}):V.jsx(Cq,{...s,ref:e})})})})}),Tq=A.forwardRef((n,e)=>{const t=bh(Nr,n.__scopeMenu),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return ZB(i)},[]),V.jsx(BS,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:ue(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Cq=A.forwardRef((n,e)=>{const t=bh(Nr,n.__scopeMenu);return V.jsx(BS,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),BS=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:g,disableOutsideScroll:m,...y}=n,w=bh(Nr,t),_=hg(Nr,t),E=A_(t),S=FD(t),R=vq(t),[D,F]=A.useState(null),C=A.useRef(null),T=xt(e,C,w.onContentChange),k=A.useRef(0),M=A.useRef(""),O=A.useRef(0),B=A.useRef(null),N=A.useRef("right"),q=A.useRef(0),re=m?DD:A.Fragment,Z=m?{as:Fr,allowPinchZoom:!0}:void 0,W=z=>{var fe,ut;const X=M.current+z,ce=R().filter(Je=>!Je.disabled),se=document.activeElement,ae=(fe=ce.find(Je=>Je.ref.current===se))==null?void 0:fe.textValue,je=ce.map(Je=>Je.textValue),Ue=Vq(je,X,ae),Pe=(ut=ce.find(Je=>Je.textValue===Ue))==null?void 0:ut.ref.current;(function Je(Ie){M.current=Ie,window.clearTimeout(k.current),Ie!==""&&(k.current=window.setTimeout(()=>Je(""),1e3))})(X),Pe&&setTimeout(()=>Pe.focus())};A.useEffect(()=>()=>window.clearTimeout(k.current),[]),UG();const U=A.useCallback(z=>{var ce,se;return N.current===((ce=B.current)==null?void 0:ce.side)&&jq(z,(se=B.current)==null?void 0:se.area)},[]);return V.jsx(Sq,{scope:t,searchRef:M,onItemEnter:A.useCallback(z=>{U(z)&&z.preventDefault()},[U]),onItemLeave:A.useCallback(z=>{var X;U(z)||((X=C.current)==null||X.focus(),F(null))},[U]),onTriggerLeave:A.useCallback(z=>{U(z)&&z.preventDefault()},[U]),pointerGraceTimerRef:O,onPointerGraceIntentChange:A.useCallback(z=>{B.current=z},[]),children:V.jsx(re,{...Z,children:V.jsx($I,{asChild:!0,trapped:s,onMountAutoFocus:ue(i,z=>{var X;z.preventDefault(),(X=C.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:V.jsx(PD,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:g,children:V.jsx(Gk,{asChild:!0,...S,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:F,onEntryFocus:ue(l,z=>{_.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:V.jsx(Ek,{role:"menu","aria-orientation":"vertical","data-state":nO(w.open),"data-radix-menu-content":"",dir:_.dir,...E,...y,ref:T,style:{outline:"none",...y.style},onKeyDown:ue(y.onKeyDown,z=>{const ce=z.target.closest("[data-radix-menu-content]")===z.currentTarget,se=z.ctrlKey||z.altKey||z.metaKey,ae=z.key.length===1;ce&&(z.key==="Tab"&&z.preventDefault(),!se&&ae&&W(z.key));const je=C.current;if(z.target!==je||!pq.includes(z.key))return;z.preventDefault();const Pe=R().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);OD.includes(z.key)&&Pe.reverse(),Oq(Pe)}),onBlur:ue(n.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(k.current),M.current="")}),onPointerMove:ue(n.onPointerMove,gf(z=>{const X=z.target,ce=q.current!==z.clientX;if(z.currentTarget.contains(X)&&ce){const se=z.clientX>q.current?"right":"left";N.current=se,q.current=z.clientX}}))})})})})})})});jD.displayName=Nr;var xq="MenuGroup",jS=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return V.jsx(vt.div,{role:"group",...r,ref:e})});jS.displayName=xq;var Rq="MenuLabel",UD=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return V.jsx(vt.div,{...r,ref:e})});UD.displayName=Rq;var Jv="MenuItem",lR="menu.itemSelect",b_=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=A.useRef(null),o=hg(Jv,n.__scopeMenu),a=VS(Jv,n.__scopeMenu),l=xt(e,i),c=A.useRef(!1),u=()=>{const f=i.current;if(!t&&f){const p=new CustomEvent(lR,{bubbles:!0,cancelable:!0});f.addEventListener(lR,g=>r==null?void 0:r(g),{once:!0}),Vb(f,p),p.defaultPrevented?c.current=!1:o.onClose()}};return V.jsx($D,{...s,ref:l,disabled:t,onClick:ue(n.onClick,u),onPointerDown:f=>{var p;(p=n.onPointerDown)==null||p.call(n,f),c.current=!0},onPointerUp:ue(n.onPointerUp,f=>{var p;c.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:ue(n.onKeyDown,f=>{const p=a.searchRef.current!=="";t||p&&f.key===" "||OA.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});b_.displayName=Jv;var $D=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=VS(Jv,t),a=FD(t),l=A.useRef(null),c=xt(e,l),[u,f]=A.useState(!1),[p,g]=A.useState("");return A.useEffect(()=>{const m=l.current;m&&g((m.textContent??"").trim())},[i.children]),V.jsx(pf.ItemSlot,{scope:t,disabled:r,textValue:s??p,children:V.jsx(qk,{asChild:!0,...a,focusable:!r,children:V.jsx(vt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:ue(n.onPointerMove,gf(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ue(n.onPointerLeave,gf(m=>o.onItemLeave(m))),onFocus:ue(n.onFocus,()=>f(!0)),onBlur:ue(n.onBlur,()=>f(!1))})})})}),Pq="MenuCheckboxItem",zD=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return V.jsx(KD,{scope:n.__scopeMenu,checked:t,children:V.jsx(b_,{role:"menuitemcheckbox","aria-checked":Zv(t)?"mixed":t,...s,ref:e,"data-state":$S(t),onSelect:ue(s.onSelect,()=>r==null?void 0:r(Zv(t)?!0:!t),{checkForDefaultPrevented:!1})})})});zD.displayName=Pq;var HD="MenuRadioGroup",[Iq,kq]=rc(HD,{value:void 0,onValueChange:()=>{}}),WD=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=Yn(r);return V.jsx(Iq,{scope:n.__scopeMenu,value:t,onValueChange:i,children:V.jsx(jS,{...s,ref:e})})});WD.displayName=HD;var GD="MenuRadioItem",qD=A.forwardRef((n,e)=>{const{value:t,...r}=n,s=kq(GD,n.__scopeMenu),i=t===s.value;return V.jsx(KD,{scope:n.__scopeMenu,checked:i,children:V.jsx(b_,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":$S(i),onSelect:ue(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});qD.displayName=GD;var US="MenuItemIndicator",[KD,Lq]=rc(US,{checked:!1}),XD=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=Lq(US,t);return V.jsx(E_,{present:r||Zv(i.checked)||i.checked===!0,children:V.jsx(vt.span,{...s,ref:e,"data-state":$S(i.checked)})})});XD.displayName=US;var Mq="MenuSeparator",YD=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return V.jsx(vt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});YD.displayName=Mq;var Nq="MenuArrow",QD=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=A_(t);return V.jsx(wk,{...s,...r,ref:e})});QD.displayName=Nq;var Dq="MenuSub",[Q8,JD]=rc(Dq),wd="MenuSubTrigger",ZD=A.forwardRef((n,e)=>{const t=bh(wd,n.__scopeMenu),r=hg(wd,n.__scopeMenu),s=JD(wd,n.__scopeMenu),i=VS(wd,n.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:n.__scopeMenu},u=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>u,[u]),A.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),V.jsx(FS,{asChild:!0,...c,children:V.jsx($D,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":nO(t.open),...n,ref:Fb(e,s.onTriggerChange),onClick:f=>{var p;(p=n.onClick)==null||p.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:ue(n.onPointerMove,gf(f=>{i.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:ue(n.onPointerLeave,gf(f=>{var g,m;u();const p=(g=t.content)==null?void 0:g.getBoundingClientRect();if(p){const y=(m=t.content)==null?void 0:m.dataset.side,w=y==="right",_=w?-5:5,E=p[w?"left":"right"],S=p[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:E,y:p.top},{x:S,y:p.top},{x:S,y:p.bottom},{x:E,y:p.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ue(n.onKeyDown,f=>{var g;const p=i.searchRef.current!=="";n.disabled||p&&f.key===" "||gq[r.dir].includes(f.key)&&(t.onOpenChange(!0),(g=t.content)==null||g.focus(),f.preventDefault())})})})});ZD.displayName=wd;var eO="MenuSubContent",tO=A.forwardRef((n,e)=>{const t=BD(Nr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=bh(Nr,n.__scopeMenu),o=hg(Nr,n.__scopeMenu),a=JD(eO,n.__scopeMenu),l=A.useRef(null),c=xt(e,l);return V.jsx(pf.Provider,{scope:n.__scopeMenu,children:V.jsx(E_,{present:r||i.open,children:V.jsx(pf.Slot,{scope:n.__scopeMenu,children:V.jsx(BS,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ue(n.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ue(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ue(n.onKeyDown,u=>{var g;const f=u.currentTarget.contains(u.target),p=mq[o.dir].includes(u.key);f&&p&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});tO.displayName=eO;function nO(n){return n?"open":"closed"}function Zv(n){return n==="indeterminate"}function $S(n){return Zv(n)?"indeterminate":n?"checked":"unchecked"}function Oq(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function Fq(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function Vq(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=Fq(n,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function Bq(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function jq(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Bq(t,e)}function gf(n){return e=>e.pointerType==="mouse"?n(e):void 0}var Uq=VD,$q=FS,zq=jD,Hq=jS,Wq=UD,Gq=b_,qq=zD,Kq=WD,Xq=qD,Yq=XD,Qq=YD,Jq=QD,Zq=ZD,e8=tO,S_="Menubar",[FA,t8,n8]=rS(S_),[rO,J8]=xD(S_,[n8,qy]),Qn=_q(),sO=qy(),[r8,zS]=rO(S_),iO=A.forwardRef((n,e)=>{const{__scopeMenubar:t,value:r,onValueChange:s,defaultValue:i,loop:o=!0,dir:a,...l}=n,c=eS(a),u=sO(t),[f="",p]=FI({prop:r,onChange:s,defaultProp:i}),[g,m]=A.useState(null);return V.jsx(r8,{scope:t,value:f,onMenuOpen:A.useCallback(y=>{p(y),m(y)},[p]),onMenuClose:A.useCallback(()=>p(""),[p]),onMenuToggle:A.useCallback(y=>{p(w=>w?"":y),m(y)},[p]),dir:c,loop:o,children:V.jsx(FA.Provider,{scope:t,children:V.jsx(FA.Slot,{scope:t,children:V.jsx(Gk,{asChild:!0,...u,orientation:"horizontal",loop:o,dir:c,currentTabStopId:g,onCurrentTabStopIdChange:m,children:V.jsx(vt.div,{role:"menubar",...l,ref:e})})})})})});iO.displayName=S_;var HS="MenubarMenu",[s8,oO]=rO(HS),aO=n=>{const{__scopeMenubar:e,value:t,...r}=n,s=bm(),i=t||s||"LEGACY_REACT_AUTO_VALUE",o=zS(HS,e),a=Qn(e),l=A.useRef(null),c=A.useRef(!1),u=o.value===i;return A.useEffect(()=>{u||(c.current=!1)},[u]),V.jsx(s8,{scope:e,value:i,triggerId:bm(),triggerRef:l,contentId:bm(),wasKeyboardTriggerOpenRef:c,children:V.jsx(Uq,{...a,open:u,onOpenChange:f=>{f||o.onMenuClose()},modal:!1,dir:o.dir,...r})})};aO.displayName=HS;var VA="MenubarTrigger",lO=A.forwardRef((n,e)=>{const{__scopeMenubar:t,disabled:r=!1,...s}=n,i=sO(t),o=Qn(t),a=zS(VA,t),l=oO(VA,t),c=A.useRef(null),u=xt(e,c,l.triggerRef),[f,p]=A.useState(!1),g=a.value===l.value;return V.jsx(FA.ItemSlot,{scope:t,value:l.value,disabled:r,children:V.jsx(qk,{asChild:!0,...i,focusable:!r,tabStopId:l.value,children:V.jsx($q,{asChild:!0,...o,children:V.jsx(vt.button,{type:"button",role:"menuitem",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":g,"aria-controls":g?l.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":g?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:u,onPointerDown:ue(n.onPointerDown,m=>{!r&&m.button===0&&m.ctrlKey===!1&&(a.onMenuOpen(l.value),g||m.preventDefault())}),onPointerEnter:ue(n.onPointerEnter,()=>{var y;!!a.value&&!g&&(a.onMenuOpen(l.value),(y=c.current)==null||y.focus())}),onKeyDown:ue(n.onKeyDown,m=>{r||(["Enter"," "].includes(m.key)&&a.onMenuToggle(l.value),m.key==="ArrowDown"&&a.onMenuOpen(l.value),["Enter"," ","ArrowDown"].includes(m.key)&&(l.wasKeyboardTriggerOpenRef.current=!0,m.preventDefault()))}),onFocus:ue(n.onFocus,()=>p(!0)),onBlur:ue(n.onBlur,()=>p(!1))})})})})});lO.displayName=VA;var BA="MenubarContent",i8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,align:r="start",...s}=n,i=Qn(t),o=zS(BA,t),a=oO(BA,t),l=t8(t),c=A.useRef(!1);return V.jsx(zq,{id:a.contentId,"aria-labelledby":a.triggerId,"data-radix-menubar-content":"",...i,...s,ref:e,align:r,onCloseAutoFocus:ue(n.onCloseAutoFocus,u=>{var p;!!!o.value&&!c.current&&((p=a.triggerRef.current)==null||p.focus()),c.current=!1,u.preventDefault()}),onFocusOutside:ue(n.onFocusOutside,u=>{const f=u.target;l().some(g=>{var m;return(m=g.ref.current)==null?void 0:m.contains(f)})&&u.preventDefault()}),onInteractOutside:ue(n.onInteractOutside,()=>{c.current=!0}),onEntryFocus:u=>{a.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:ue(n.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const f=u.target,p=f.hasAttribute("data-radix-menubar-subtrigger"),g=f.closest("[data-radix-menubar-content]")!==u.currentTarget,y=(o.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!y&&p||g&&y)return;let E=l().filter(D=>!D.disabled).map(D=>D.value);y&&E.reverse();const S=E.indexOf(a.value);E=o.loop?R8(E,S+1):E.slice(S+1);const[R]=E;R&&o.onMenuOpen(R)}},{checkForDefaultPrevented:!1}),style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});i8.displayName=BA;var o8="MenubarGroup",a8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Hq,{...s,...r,ref:e})});a8.displayName=o8;var l8="MenubarLabel",c8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Wq,{...s,...r,ref:e})});c8.displayName=l8;var u8="MenubarItem",h8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Gq,{...s,...r,ref:e})});h8.displayName=u8;var d8="MenubarCheckboxItem",f8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(qq,{...s,...r,ref:e})});f8.displayName=d8;var p8="MenubarRadioGroup",g8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Kq,{...s,...r,ref:e})});g8.displayName=p8;var m8="MenubarRadioItem",v8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Xq,{...s,...r,ref:e})});v8.displayName=m8;var y8="MenubarItemIndicator",_8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Yq,{...s,...r,ref:e})});_8.displayName=y8;var E8="MenubarSeparator",w8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Qq,{...s,...r,ref:e})});w8.displayName=E8;var A8="MenubarArrow",b8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Jq,{...s,...r,ref:e})});b8.displayName=A8;var S8="MenubarSubTrigger",T8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(Zq,{"data-radix-menubar-subtrigger":"",...s,...r,ref:e})});T8.displayName=S8;var C8="MenubarSubContent",x8=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Qn(t);return V.jsx(e8,{...s,"data-radix-menubar-content":"",...r,ref:e,style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});x8.displayName=C8;function R8(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var P8=iO,I8=aO,Jh=lO;const k8="/assets/my_dp-CLCiIRTc.png";function L8(){const n=$V(),e=Ob(),t=r=>e.pathname===r;return V.jsxs("div",{className:"navbar",children:[V.jsx("div",{className:"avatar",children:V.jsx(K4,{className:"AvatarRoot",onClick:()=>n("/"),children:V.jsx(X4,{className:"AvatarImage",src:k8,alt:"G Adarsh Sonu"})})}),V.jsx("div",{className:"menu",children:V.jsx(P8,{className:"MenubarRoot",children:V.jsxs(I8,{children:[V.jsx(Jh,{className:`MenubarTrigger ${t("/")?"active":""}`,onClick:()=>n("/"),children:"Home"}),"|",V.jsx(Jh,{className:`MenubarTrigger ${t("/resume")?"active":""}`,onClick:()=>n("/resume"),children:"Resume"}),"|",V.jsx(Jh,{className:`MenubarTrigger ${t("/projects")?"active":""}`,onClick:()=>n("/projects"),children:"Projects"}),"|",V.jsx(Jh,{className:"MenubarTrigger",onClick:()=>window.open("https://www.youtube.com/@g_adarsh_sonu","_blank"),children:"Youtube"}),"|",V.jsx(Jh,{className:`MenubarTrigger ${t("/contact")?"active":""}`,onClick:()=>n("/contact"),children:"Contact"})]})})})]})}var cO={exports:{}},M8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",N8=M8,D8=N8;function uO(){}function hO(){}hO.resetWarningCache=uO;var O8=function(){function n(r,s,i,o,a,l){if(l!==D8){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:hO,resetWarningCache:uO};return t.PropTypes=t,t};cO.exports=O8();var F8=cO.exports;const jA=_y(F8),V8="/assets/dark-mode-DCiUdDtp.png",B8="/assets/light-mode-B0-5GaYb.png";function dO({appearance:n,toggleAppearance:e}){const[t,r]=A.useState(6),[s,i]=A.useState(t),o=A.useRef(null),[a,l]=A.useState(!1);A.useEffect(()=>{const y=setTimeout(()=>l(!0),5e3);return()=>clearTimeout(y)},[]);const c=y=>{o.current&&clearTimeout(o.current),i(y.target.id)},u=()=>{o.current=setTimeout(()=>i(t),300)},f=(y,w)=>y===w||w===t?"80%":w===y+1||w===y-1?"50%":"30%",p=y=>{r(y),y<7||y>22?e("dark"):e("light")},g=y=>t!==parseInt(y)?null:n==="dark"?V.jsx("img",{className:"modeImage",src:V8}):V.jsx("img",{className:"modeImage",src:B8}),m=[{id:"1"},{id:"2"},{id:"3"},{id:"4"},{id:"5"},{id:"6"},{id:"7",color:"teal"},{id:"8",color:"teal"},{id:"9",color:"teal"},{id:"10",color:"teal"},{id:"11",color:"teal"},{id:"12",color:"teal"},{id:"13",color:"teal"},{id:"14",color:"teal"},{id:"15",color:"teal"},{id:"16",color:"teal"},{id:"17",color:"teal"},{id:"18",color:"teal"},{id:"19",color:"teal"},{id:"20",color:"teal"},{id:"21",color:"teal"},{id:"22",color:"teal"},{id:"23"},{id:"24"},{id:"25"},{id:"26"},{id:"27"},{id:"28"}];return a?V.jsx(Ni,{justify:"center",className:"circadian",children:m.map(({id:y,color:w})=>V.jsxs("div",{id:y,className:"circadian-seperatorBlock",onMouseEnter:c,onMouseLeave:u,onClick:()=>p(parseInt(y)),children:[g(y),V.jsx(sS,{className:"seperator",orientation:"vertical",style:{height:f(parseInt(s),parseInt(y)),backgroundColor:w}})]},y))}):null}dO.propTypes={appearance:jA.string,toggleAppearance:jA.func};gS.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();function fO(){const[n,e]=A.useState("dark"),t=r=>{e(r)};return V.jsx(Ik,{accentColor:"grass",appearance:n,children:V.jsxs(oB,{children:[V.jsx(L8,{}),V.jsx("br",{}),V.jsx(LG,{}),V.jsx("br",{}),V.jsx(dO,{appearance:n,toggleAppearance:t}),V.jsx("br",{})]})})}fO.propTypes={appearance:jA.string};SI(document.getElementById("root")).render(V.jsx(A.StrictMode,{children:V.jsx(fO,{})}));
