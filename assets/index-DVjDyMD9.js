var yO=Object.defineProperty;var nT=n=>{throw TypeError(n)};var _O=(n,e,t)=>e in n?yO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ve=(n,e,t)=>_O(n,typeof e!="symbol"?e+"":e,t),Z_=(n,e,t)=>e.has(n)||nT("Cannot "+t);var h=(n,e,t)=>(Z_(n,e,"read from private field"),t?t.call(n):e.get(n)),L=(n,e,t)=>e.has(n)?nT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),I=(n,e,t,r)=>(Z_(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),k=(n,e,t)=>(Z_(n,e,"access private method"),t);var tr=(n,e,t,r)=>({set _(s){I(n,e,s,t)},get _(){return h(n,e,r)}});function wO(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Jp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var LR={exports:{}},Py={},MR={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=Symbol.for("react.element"),EO=Symbol.for("react.portal"),AO=Symbol.for("react.fragment"),bO=Symbol.for("react.strict_mode"),SO=Symbol.for("react.profiler"),TO=Symbol.for("react.provider"),CO=Symbol.for("react.context"),xO=Symbol.for("react.forward_ref"),RO=Symbol.for("react.suspense"),PO=Symbol.for("react.memo"),IO=Symbol.for("react.lazy"),rT=Symbol.iterator;function kO(n){return n===null||typeof n!="object"?null:(n=rT&&n[rT]||n["@@iterator"],typeof n=="function"?n:null)}var NR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DR=Object.assign,OR={};function mh(n,e,t){this.props=n,this.context=e,this.refs=OR,this.updater=t||NR}mh.prototype.isReactComponent={};mh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};mh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function FR(){}FR.prototype=mh.prototype;function tb(n,e,t){this.props=n,this.context=e,this.refs=OR,this.updater=t||NR}var nb=tb.prototype=new FR;nb.constructor=tb;DR(nb,mh.prototype);nb.isPureReactComponent=!0;var sT=Array.isArray,VR=Object.prototype.hasOwnProperty,rb={current:null},jR={key:!0,ref:!0,__self:!0,__source:!0};function BR(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)VR.call(e,r)&&!jR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Zp,type:n,key:i,ref:o,props:s,_owner:rb.current}}function LO(n,e){return{$$typeof:Zp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function sb(n){return typeof n=="object"&&n!==null&&n.$$typeof===Zp}function MO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var iT=/\/+/g;function e0(n,e){return typeof n=="object"&&n!==null&&n.key!=null?MO(""+n.key):e.toString(36)}function yg(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Zp:case EO:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+e0(o,0):r,sT(s)?(t="",n!=null&&(t=n.replace(iT,"$&/")+"/"),yg(s,e,t,"",function(c){return c})):s!=null&&(sb(s)&&(s=LO(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iT,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sT(n))for(var a=0;a<n.length;a++){i=n[a];var l=r+e0(i,a);o+=yg(i,e,t,l,s)}else if(l=kO(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=r+e0(i,a++),o+=yg(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nm(n,e,t){if(n==null)return n;var r=[],s=0;return yg(n,r,"","",function(i){return e.call(t,i,s++)}),r}function NO(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Dn={current:null},_g={transition:null},DO={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:_g,ReactCurrentOwner:rb};function UR(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Nm,forEach:function(n,e,t){Nm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Nm(n,function(){e++}),e},toArray:function(n){return Nm(n,function(e){return e})||[]},only:function(n){if(!sb(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ae.Component=mh;Ae.Fragment=AO;Ae.Profiler=SO;Ae.PureComponent=tb;Ae.StrictMode=bO;Ae.Suspense=RO;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DO;Ae.act=UR;Ae.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=DR({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rb.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)VR.call(e,l)&&!jR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Zp,type:n.type,key:s,ref:i,props:r,_owner:o}};Ae.createContext=function(n){return n={$$typeof:CO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TO,_context:n},n.Consumer=n};Ae.createElement=BR;Ae.createFactory=function(n){var e=BR.bind(null,n);return e.type=n,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(n){return{$$typeof:xO,render:n}};Ae.isValidElement=sb;Ae.lazy=function(n){return{$$typeof:IO,_payload:{_status:-1,_result:n},_init:NO}};Ae.memo=function(n,e){return{$$typeof:PO,type:n,compare:e===void 0?null:e}};Ae.startTransition=function(n){var e=_g.transition;_g.transition={};try{n()}finally{_g.transition=e}};Ae.unstable_act=UR;Ae.useCallback=function(n,e){return Dn.current.useCallback(n,e)};Ae.useContext=function(n){return Dn.current.useContext(n)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(n){return Dn.current.useDeferredValue(n)};Ae.useEffect=function(n,e){return Dn.current.useEffect(n,e)};Ae.useId=function(){return Dn.current.useId()};Ae.useImperativeHandle=function(n,e,t){return Dn.current.useImperativeHandle(n,e,t)};Ae.useInsertionEffect=function(n,e){return Dn.current.useInsertionEffect(n,e)};Ae.useLayoutEffect=function(n,e){return Dn.current.useLayoutEffect(n,e)};Ae.useMemo=function(n,e){return Dn.current.useMemo(n,e)};Ae.useReducer=function(n,e,t){return Dn.current.useReducer(n,e,t)};Ae.useRef=function(n){return Dn.current.useRef(n)};Ae.useState=function(n){return Dn.current.useState(n)};Ae.useSyncExternalStore=function(n,e,t){return Dn.current.useSyncExternalStore(n,e,t)};Ae.useTransition=function(){return Dn.current.useTransition()};Ae.version="18.3.1";MR.exports=Ae;var A=MR.exports;const ro=Jp(A),$R=wO({__proto__:null,default:ro},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OO=A,FO=Symbol.for("react.element"),VO=Symbol.for("react.fragment"),jO=Object.prototype.hasOwnProperty,BO=OO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UO={key:!0,ref:!0,__self:!0,__source:!0};function zR(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jO.call(e,r)&&!UO.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:FO,type:n,key:i,ref:o,props:s,_owner:BO.current}}Py.Fragment=VO;Py.jsx=zR;Py.jsxs=zR;LR.exports=Py;var x=LR.exports,HR={exports:{}},Er={},WR={exports:{}},GR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,H){var X=B.length;B.push(H);e:for(;0<X;){var ne=X-1>>>1,J=B[ne];if(0<s(J,H))B[ne]=H,B[X]=J,X=ne;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],X=B.pop();if(X!==H){B[0]=X;e:for(var ne=0,J=B.length,re=J>>>1;ne<re;){var me=2*(ne+1)-1,Fe=B[me],be=me+1,ce=B[be];if(0>s(Fe,X))be<J&&0>s(ce,Fe)?(B[ne]=ce,B[be]=X,ne=be):(B[ne]=Fe,B[me]=X,ne=me);else if(be<J&&0>s(ce,X))B[ne]=ce,B[be]=X,ne=be;else break e}}return H}function s(B,H){var X=B.sortIndex-H.sortIndex;return X!==0?X:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var H=t(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=B)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=t(c)}}function R(B){if(y=!1,S(B),!g)if(t(l)!==null)g=!0,W(O);else{var H=t(c);H!==null&&U(R,H.startTime-B)}}function O(B,H){g=!1,y&&(y=!1,v(T),T=-1),m=!0;var X=p;try{for(S(H),f=t(l);f!==null&&(!(f.expirationTime>H)||B&&!F());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var J=ne(f.expirationTime<=H);H=n.unstable_now(),typeof J=="function"?f.callback=J:f===t(l)&&r(l),S(H)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var me=t(c);me!==null&&U(R,me.startTime-H),re=!1}return re}finally{f=null,p=X,m=!1}}var j=!1,C=null,T=-1,P=5,M=-1;function F(){return!(n.unstable_now()-M<P)}function V(){if(C!==null){var B=n.unstable_now();M=B;var H=!0;try{H=C(!0,B)}finally{H?D():(j=!1,C=null)}}else j=!1}var D;if(typeof E=="function")D=function(){E(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=V,D=function(){$.postMessage(null)}}else D=function(){w(V,0)};function W(B){C=B,j||(j=!0,D())}function U(B,H){T=w(function(){B(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,W(O))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var X=p;p=H;try{return B()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=p;p=B;try{return H()}finally{p=X}},n.unstable_scheduleCallback=function(B,H,X){var ne=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,B={id:u++,callback:H,priorityLevel:B,startTime:X,expirationTime:J,sortIndex:-1},X>ne?(B.sortIndex=X,e(c,B),t(l)===null&&B===t(c)&&(y?(v(T),T=-1):y=!0,U(R,X-ne))):(B.sortIndex=J,e(l,B),g||m||(g=!0,W(O))),B},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(B){var H=p;return function(){var X=p;p=H;try{return B.apply(this,arguments)}finally{p=X}}}})(GR);WR.exports=GR;var $O=WR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zO=A,_r=$O;function Y(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qR=new Set,zd={};function Zl(n,e){Qu(n,e),Qu(n+"Capture",e)}function Qu(n,e){for(zd[n]=e,n=0;n<e.length;n++)qR.add(e[n])}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rw=Object.prototype.hasOwnProperty,HO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oT={},aT={};function WO(n){return rw.call(aT,n)?!0:rw.call(oT,n)?!1:HO.test(n)?aT[n]=!0:(oT[n]=!0,!1)}function GO(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function qO(n,e,t,r){if(e===null||typeof e>"u"||GO(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){an[n]=new On(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];an[e]=new On(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){an[n]=new On(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){an[n]=new On(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){an[n]=new On(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){an[n]=new On(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){an[n]=new On(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){an[n]=new On(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){an[n]=new On(n,5,!1,n.toLowerCase(),null,!1,!1)});var ib=/[\-:]([a-z])/g;function ob(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ib,ob);an[e]=new On(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ib,ob);an[e]=new On(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ib,ob);an[e]=new On(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){an[n]=new On(n,1,!1,n.toLowerCase(),null,!1,!1)});an.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){an[n]=new On(n,1,!1,n.toLowerCase(),null,!0,!0)});function ab(n,e,t,r){var s=an.hasOwnProperty(e)?an[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qO(e,t,s,r)&&(t=null),r||s===null?WO(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Qi=zO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dm=Symbol.for("react.element"),Rc=Symbol.for("react.portal"),Pc=Symbol.for("react.fragment"),lb=Symbol.for("react.strict_mode"),sw=Symbol.for("react.profiler"),KR=Symbol.for("react.provider"),XR=Symbol.for("react.context"),cb=Symbol.for("react.forward_ref"),iw=Symbol.for("react.suspense"),ow=Symbol.for("react.suspense_list"),ub=Symbol.for("react.memo"),lo=Symbol.for("react.lazy"),YR=Symbol.for("react.offscreen"),lT=Symbol.iterator;function zh(n){return n===null||typeof n!="object"?null:(n=lT&&n[lT]||n["@@iterator"],typeof n=="function"?n:null)}var ut=Object.assign,t0;function rd(n){if(t0===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);t0=e&&e[1]||""}return`
`+t0+n}var n0=!1;function r0(n,e){if(!n||n0)return"";n0=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{n0=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?rd(n):""}function KO(n){switch(n.tag){case 5:return rd(n.type);case 16:return rd("Lazy");case 13:return rd("Suspense");case 19:return rd("SuspenseList");case 0:case 2:case 15:return n=r0(n.type,!1),n;case 11:return n=r0(n.type.render,!1),n;case 1:return n=r0(n.type,!0),n;default:return""}}function aw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Pc:return"Fragment";case Rc:return"Portal";case sw:return"Profiler";case lb:return"StrictMode";case iw:return"Suspense";case ow:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case XR:return(n.displayName||"Context")+".Consumer";case KR:return(n._context.displayName||"Context")+".Provider";case cb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ub:return e=n.displayName||null,e!==null?e:aw(n.type)||"Memo";case lo:e=n._payload,n=n._init;try{return aw(n(e))}catch{}}return null}function XO(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return aw(e);case 8:return e===lb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function QR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YO(n){var e=QR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Om(n){n._valueTracker||(n._valueTracker=YO(n))}function JR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=QR(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function fv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function lw(n,e){var t=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function cT(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Qo(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ZR(n,e){e=e.checked,e!=null&&ab(n,"checked",e,!1)}function cw(n,e){ZR(n,e);var t=Qo(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?uw(n,e.type,t):e.hasOwnProperty("defaultValue")&&uw(n,e.type,Qo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function uT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function uw(n,e,t){(e!=="number"||fv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var sd=Array.isArray;function Uc(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Qo(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function hw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function hT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Y(92));if(sd(t)){if(1<t.length)throw Error(Y(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Qo(t)}}function eP(n,e){var t=Qo(e.value),r=Qo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function dT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function tP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?tP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Fm,nP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Fm=Fm||document.createElement("div"),Fm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Hd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QO=["Webkit","ms","Moz","O"];Object.keys(Cd).forEach(function(n){QO.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Cd[e]=Cd[n]})});function rP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Cd.hasOwnProperty(n)&&Cd[n]?(""+e).trim():e+"px"}function sP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=rP(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var JO=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fw(n,e){if(e){if(JO[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function pw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mw=null;function hb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gw=null,$c=null,zc=null;function fT(n){if(n=nm(n)){if(typeof gw!="function")throw Error(Y(280));var e=n.stateNode;e&&(e=Ny(e),gw(n.stateNode,n.type,e))}}function iP(n){$c?zc?zc.push(n):zc=[n]:$c=n}function oP(){if($c){var n=$c,e=zc;if(zc=$c=null,fT(n),e)for(n=0;n<e.length;n++)fT(e[n])}}function aP(n,e){return n(e)}function lP(){}var s0=!1;function cP(n,e,t){if(s0)return n(e,t);s0=!0;try{return aP(n,e,t)}finally{s0=!1,($c!==null||zc!==null)&&(lP(),oP())}}function Wd(n,e){var t=n.stateNode;if(t===null)return null;var r=Ny(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Y(231,e,typeof t));return t}var vw=!1;if(Ui)try{var Hh={};Object.defineProperty(Hh,"passive",{get:function(){vw=!0}}),window.addEventListener("test",Hh,Hh),window.removeEventListener("test",Hh,Hh)}catch{vw=!1}function ZO(n,e,t,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var xd=!1,pv=null,mv=!1,yw=null,eF={onError:function(n){xd=!0,pv=n}};function tF(n,e,t,r,s,i,o,a,l){xd=!1,pv=null,ZO.apply(eF,arguments)}function nF(n,e,t,r,s,i,o,a,l){if(tF.apply(this,arguments),xd){if(xd){var c=pv;xd=!1,pv=null}else throw Error(Y(198));mv||(mv=!0,yw=c)}}function ec(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function uP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function pT(n){if(ec(n)!==n)throw Error(Y(188))}function rF(n){var e=n.alternate;if(!e){if(e=ec(n),e===null)throw Error(Y(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return pT(s),n;if(i===r)return pT(s),e;i=i.sibling}throw Error(Y(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(t.alternate!==r)throw Error(Y(190))}if(t.tag!==3)throw Error(Y(188));return t.stateNode.current===t?n:e}function hP(n){return n=rF(n),n!==null?dP(n):null}function dP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=dP(n);if(e!==null)return e;n=n.sibling}return null}var fP=_r.unstable_scheduleCallback,mT=_r.unstable_cancelCallback,sF=_r.unstable_shouldYield,iF=_r.unstable_requestPaint,wt=_r.unstable_now,oF=_r.unstable_getCurrentPriorityLevel,db=_r.unstable_ImmediatePriority,pP=_r.unstable_UserBlockingPriority,gv=_r.unstable_NormalPriority,aF=_r.unstable_LowPriority,mP=_r.unstable_IdlePriority,Iy=null,Os=null;function lF(n){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(Iy,n,void 0,(n.current.flags&128)===128)}catch{}}var os=Math.clz32?Math.clz32:hF,cF=Math.log,uF=Math.LN2;function hF(n){return n>>>=0,n===0?32:31-(cF(n)/uF|0)|0}var Vm=64,jm=4194304;function id(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vv(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=id(a):(i&=o,i!==0&&(r=id(i)))}else o=t&~s,o!==0?r=id(o):i!==0&&(r=id(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-os(e),s=1<<t,r|=n[t],e&=~s;return r}function dF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fF(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-os(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&r)&&(s[o]=dF(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function _w(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function gP(){var n=Vm;return Vm<<=1,!(Vm&4194240)&&(Vm=64),n}function i0(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function em(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-os(e),n[e]=t}function pF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-os(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function fb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-os(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Ue=0;function vP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var yP,pb,_P,wP,EP,ww=!1,Bm=[],Bo=null,Uo=null,$o=null,Gd=new Map,qd=new Map,uo=[],mF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gT(n,e){switch(n){case"focusin":case"focusout":Bo=null;break;case"dragenter":case"dragleave":Uo=null;break;case"mouseover":case"mouseout":$o=null;break;case"pointerover":case"pointerout":Gd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qd.delete(e.pointerId)}}function Wh(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=nm(e),e!==null&&pb(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function gF(n,e,t,r,s){switch(e){case"focusin":return Bo=Wh(Bo,n,e,t,r,s),!0;case"dragenter":return Uo=Wh(Uo,n,e,t,r,s),!0;case"mouseover":return $o=Wh($o,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return Gd.set(i,Wh(Gd.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qd.set(i,Wh(qd.get(i)||null,n,e,t,r,s)),!0}return!1}function AP(n){var e=Da(n.target);if(e!==null){var t=ec(e);if(t!==null){if(e=t.tag,e===13){if(e=uP(t),e!==null){n.blockedOn=e,EP(n.priority,function(){_P(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function wg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ew(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);mw=r,t.target.dispatchEvent(r),mw=null}else return e=nm(t),e!==null&&pb(e),n.blockedOn=t,!1;e.shift()}return!0}function vT(n,e,t){wg(n)&&t.delete(e)}function vF(){ww=!1,Bo!==null&&wg(Bo)&&(Bo=null),Uo!==null&&wg(Uo)&&(Uo=null),$o!==null&&wg($o)&&($o=null),Gd.forEach(vT),qd.forEach(vT)}function Gh(n,e){n.blockedOn===e&&(n.blockedOn=null,ww||(ww=!0,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,vF)))}function Kd(n){function e(s){return Gh(s,n)}if(0<Bm.length){Gh(Bm[0],n);for(var t=1;t<Bm.length;t++){var r=Bm[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Bo!==null&&Gh(Bo,n),Uo!==null&&Gh(Uo,n),$o!==null&&Gh($o,n),Gd.forEach(e),qd.forEach(e),t=0;t<uo.length;t++)r=uo[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<uo.length&&(t=uo[0],t.blockedOn===null);)AP(t),t.blockedOn===null&&uo.shift()}var Hc=Qi.ReactCurrentBatchConfig,yv=!0;function yF(n,e,t,r){var s=Ue,i=Hc.transition;Hc.transition=null;try{Ue=1,mb(n,e,t,r)}finally{Ue=s,Hc.transition=i}}function _F(n,e,t,r){var s=Ue,i=Hc.transition;Hc.transition=null;try{Ue=4,mb(n,e,t,r)}finally{Ue=s,Hc.transition=i}}function mb(n,e,t,r){if(yv){var s=Ew(n,e,t,r);if(s===null)m0(n,e,r,_v,t),gT(n,r);else if(gF(s,n,e,t,r))r.stopPropagation();else if(gT(n,r),e&4&&-1<mF.indexOf(n)){for(;s!==null;){var i=nm(s);if(i!==null&&yP(i),i=Ew(n,e,t,r),i===null&&m0(n,e,r,_v,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else m0(n,e,r,null,t)}}var _v=null;function Ew(n,e,t,r){if(_v=null,n=hb(r),n=Da(n),n!==null)if(e=ec(n),e===null)n=null;else if(t=e.tag,t===13){if(n=uP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return _v=n,null}function bP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oF()){case db:return 1;case pP:return 4;case gv:case aF:return 16;case mP:return 536870912;default:return 16}default:return 16}}var Do=null,gb=null,Eg=null;function SP(){if(Eg)return Eg;var n,e=gb,t=e.length,r,s="value"in Do?Do.value:Do.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return Eg=s.slice(n,1<r?1-r:void 0)}function Ag(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Um(){return!0}function yT(){return!1}function Ar(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Um:yT,this.isPropagationStopped=yT,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Um)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Um)},persist:function(){},isPersistent:Um}),e}var gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vb=Ar(gh),tm=ut({},gh,{view:0,detail:0}),wF=Ar(tm),o0,a0,qh,ky=ut({},tm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qh&&(qh&&n.type==="mousemove"?(o0=n.screenX-qh.screenX,a0=n.screenY-qh.screenY):a0=o0=0,qh=n),o0)},movementY:function(n){return"movementY"in n?n.movementY:a0}}),_T=Ar(ky),EF=ut({},ky,{dataTransfer:0}),AF=Ar(EF),bF=ut({},tm,{relatedTarget:0}),l0=Ar(bF),SF=ut({},gh,{animationName:0,elapsedTime:0,pseudoElement:0}),TF=Ar(SF),CF=ut({},gh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xF=Ar(CF),RF=ut({},gh,{data:0}),wT=Ar(RF),PF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LF(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=kF[n])?!!e[n]:!1}function yb(){return LF}var MF=ut({},tm,{key:function(n){if(n.key){var e=PF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ag(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?IF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yb,charCode:function(n){return n.type==="keypress"?Ag(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ag(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),NF=Ar(MF),DF=ut({},ky,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ET=Ar(DF),OF=ut({},tm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yb}),FF=Ar(OF),VF=ut({},gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),jF=Ar(VF),BF=ut({},ky,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),UF=Ar(BF),$F=[9,13,27,32],_b=Ui&&"CompositionEvent"in window,Rd=null;Ui&&"documentMode"in document&&(Rd=document.documentMode);var zF=Ui&&"TextEvent"in window&&!Rd,TP=Ui&&(!_b||Rd&&8<Rd&&11>=Rd),AT=" ",bT=!1;function CP(n,e){switch(n){case"keyup":return $F.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ic=!1;function HF(n,e){switch(n){case"compositionend":return xP(e);case"keypress":return e.which!==32?null:(bT=!0,AT);case"textInput":return n=e.data,n===AT&&bT?null:n;default:return null}}function WF(n,e){if(Ic)return n==="compositionend"||!_b&&CP(n,e)?(n=SP(),Eg=gb=Do=null,Ic=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TP&&e.locale!=="ko"?null:e.data;default:return null}}var GF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ST(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!GF[n.type]:e==="textarea"}function RP(n,e,t,r){iP(r),e=wv(e,"onChange"),0<e.length&&(t=new vb("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Pd=null,Xd=null;function qF(n){jP(n,0)}function Ly(n){var e=Mc(n);if(JR(e))return n}function KF(n,e){if(n==="change")return e}var PP=!1;if(Ui){var c0;if(Ui){var u0="oninput"in document;if(!u0){var TT=document.createElement("div");TT.setAttribute("oninput","return;"),u0=typeof TT.oninput=="function"}c0=u0}else c0=!1;PP=c0&&(!document.documentMode||9<document.documentMode)}function CT(){Pd&&(Pd.detachEvent("onpropertychange",IP),Xd=Pd=null)}function IP(n){if(n.propertyName==="value"&&Ly(Xd)){var e=[];RP(e,Xd,n,hb(n)),cP(qF,e)}}function XF(n,e,t){n==="focusin"?(CT(),Pd=e,Xd=t,Pd.attachEvent("onpropertychange",IP)):n==="focusout"&&CT()}function YF(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ly(Xd)}function QF(n,e){if(n==="click")return Ly(e)}function JF(n,e){if(n==="input"||n==="change")return Ly(e)}function ZF(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var cs=typeof Object.is=="function"?Object.is:ZF;function Yd(n,e){if(cs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!rw.call(e,s)||!cs(n[s],e[s]))return!1}return!0}function xT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function RT(n,e){var t=xT(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=xT(t)}}function kP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?kP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function LP(){for(var n=window,e=fv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=fv(n.document)}return e}function wb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function eV(n){var e=LP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&kP(t.ownerDocument.documentElement,t)){if(r!==null&&wb(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=RT(t,i);var o=RT(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tV=Ui&&"documentMode"in document&&11>=document.documentMode,kc=null,Aw=null,Id=null,bw=!1;function PT(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;bw||kc==null||kc!==fv(r)||(r=kc,"selectionStart"in r&&wb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Id&&Yd(Id,r)||(Id=r,r=wv(Aw,"onSelect"),0<r.length&&(e=new vb("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=kc)))}function $m(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Lc={animationend:$m("Animation","AnimationEnd"),animationiteration:$m("Animation","AnimationIteration"),animationstart:$m("Animation","AnimationStart"),transitionend:$m("Transition","TransitionEnd")},h0={},MP={};Ui&&(MP=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function My(n){if(h0[n])return h0[n];if(!Lc[n])return n;var e=Lc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in MP)return h0[n]=e[t];return n}var NP=My("animationend"),DP=My("animationiteration"),OP=My("animationstart"),FP=My("transitionend"),VP=new Map,IT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ha(n,e){VP.set(n,e),Zl(e,[n])}for(var d0=0;d0<IT.length;d0++){var f0=IT[d0],nV=f0.toLowerCase(),rV=f0[0].toUpperCase()+f0.slice(1);ha(nV,"on"+rV)}ha(NP,"onAnimationEnd");ha(DP,"onAnimationIteration");ha(OP,"onAnimationStart");ha("dblclick","onDoubleClick");ha("focusin","onFocus");ha("focusout","onBlur");ha(FP,"onTransitionEnd");Qu("onMouseEnter",["mouseout","mouseover"]);Qu("onMouseLeave",["mouseout","mouseover"]);Qu("onPointerEnter",["pointerout","pointerover"]);Qu("onPointerLeave",["pointerout","pointerover"]);Zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sV=new Set("cancel close invalid load scroll toggle".split(" ").concat(od));function kT(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,nF(r,e,void 0,n),n.currentTarget=null}function jP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;kT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;kT(s,a,c),i=l}}}if(mv)throw n=yw,mv=!1,yw=null,n}function tt(n,e){var t=e[Rw];t===void 0&&(t=e[Rw]=new Set);var r=n+"__bubble";t.has(r)||(BP(e,n,2,!1),t.add(r))}function p0(n,e,t){var r=0;e&&(r|=4),BP(t,n,r,e)}var zm="_reactListening"+Math.random().toString(36).slice(2);function Qd(n){if(!n[zm]){n[zm]=!0,qR.forEach(function(t){t!=="selectionchange"&&(sV.has(t)||p0(t,!1,n),p0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[zm]||(e[zm]=!0,p0("selectionchange",!1,e))}}function BP(n,e,t,r){switch(bP(e)){case 1:var s=yF;break;case 4:s=_F;break;default:s=mb}t=s.bind(null,e,t,n),s=void 0,!vw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function m0(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Da(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}cP(function(){var c=i,u=hb(t),f=[];e:{var p=VP.get(n);if(p!==void 0){var m=vb,g=n;switch(n){case"keypress":if(Ag(t)===0)break e;case"keydown":case"keyup":m=NF;break;case"focusin":g="focus",m=l0;break;case"focusout":g="blur",m=l0;break;case"beforeblur":case"afterblur":m=l0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=_T;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=AF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=FF;break;case NP:case DP:case OP:m=TF;break;case FP:m=jF;break;case"scroll":m=wF;break;case"wheel":m=UF;break;case"copy":case"cut":case"paste":m=xF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ET}var y=(e&4)!==0,w=!y&&n==="scroll",v=y?p!==null?p+"Capture":null:p;y=[];for(var E=c,S;E!==null;){S=E;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,v!==null&&(R=Wd(E,v),R!=null&&y.push(Jd(E,R,S)))),w)break;E=E.return}0<y.length&&(p=new m(p,g,null,t,u),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==mw&&(g=t.relatedTarget||t.fromElement)&&(Da(g)||g[$i]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=c,g=g?Da(g):null,g!==null&&(w=ec(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(y=_T,R="onMouseLeave",v="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(y=ET,R="onPointerLeave",v="onPointerEnter",E="pointer"),w=m==null?p:Mc(m),S=g==null?p:Mc(g),p=new y(R,E+"leave",m,t,u),p.target=w,p.relatedTarget=S,R=null,Da(u)===c&&(y=new y(v,E+"enter",g,t,u),y.target=S,y.relatedTarget=w,R=y),w=R,m&&g)t:{for(y=m,v=g,E=0,S=y;S;S=fc(S))E++;for(S=0,R=v;R;R=fc(R))S++;for(;0<E-S;)y=fc(y),E--;for(;0<S-E;)v=fc(v),S--;for(;E--;){if(y===v||v!==null&&y===v.alternate)break t;y=fc(y),v=fc(v)}y=null}else y=null;m!==null&&LT(f,p,m,y,!1),g!==null&&w!==null&&LT(f,w,g,y,!0)}}e:{if(p=c?Mc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var O=KF;else if(ST(p))if(PP)O=JF;else{O=YF;var j=XF}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=QF);if(O&&(O=O(n,c))){RP(f,O,t,u);break e}j&&j(n,p,c),n==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&uw(p,"number",p.value)}switch(j=c?Mc(c):window,n){case"focusin":(ST(j)||j.contentEditable==="true")&&(kc=j,Aw=c,Id=null);break;case"focusout":Id=Aw=kc=null;break;case"mousedown":bw=!0;break;case"contextmenu":case"mouseup":case"dragend":bw=!1,PT(f,t,u);break;case"selectionchange":if(tV)break;case"keydown":case"keyup":PT(f,t,u)}var C;if(_b)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ic?CP(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(TP&&t.locale!=="ko"&&(Ic||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ic&&(C=SP()):(Do=u,gb="value"in Do?Do.value:Do.textContent,Ic=!0)),j=wv(c,T),0<j.length&&(T=new wT(T,n,null,t,u),f.push({event:T,listeners:j}),C?T.data=C:(C=xP(t),C!==null&&(T.data=C)))),(C=zF?HF(n,t):WF(n,t))&&(c=wv(c,"onBeforeInput"),0<c.length&&(u=new wT("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=C))}jP(f,e)})}function Jd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function wv(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wd(n,t),i!=null&&r.unshift(Jd(n,i,s)),i=Wd(n,e),i!=null&&r.push(Jd(n,i,s))),n=n.return}return r}function fc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function LT(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Wd(t,i),l!=null&&o.unshift(Jd(t,l,a))):s||(l=Wd(t,i),l!=null&&o.push(Jd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var iV=/\r\n?/g,oV=/\u0000|\uFFFD/g;function MT(n){return(typeof n=="string"?n:""+n).replace(iV,`
`).replace(oV,"")}function Hm(n,e,t){if(e=MT(e),MT(n)!==e&&t)throw Error(Y(425))}function Ev(){}var Sw=null,Tw=null;function Cw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xw=typeof setTimeout=="function"?setTimeout:void 0,aV=typeof clearTimeout=="function"?clearTimeout:void 0,NT=typeof Promise=="function"?Promise:void 0,lV=typeof queueMicrotask=="function"?queueMicrotask:typeof NT<"u"?function(n){return NT.resolve(null).then(n).catch(cV)}:xw;function cV(n){setTimeout(function(){throw n})}function g0(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Kd(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Kd(e)}function zo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function DT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var vh=Math.random().toString(36).slice(2),Ms="__reactFiber$"+vh,Zd="__reactProps$"+vh,$i="__reactContainer$"+vh,Rw="__reactEvents$"+vh,uV="__reactListeners$"+vh,hV="__reactHandles$"+vh;function Da(n){var e=n[Ms];if(e)return e;for(var t=n.parentNode;t;){if(e=t[$i]||t[Ms]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=DT(n);n!==null;){if(t=n[Ms])return t;n=DT(n)}return e}n=t,t=n.parentNode}return null}function nm(n){return n=n[Ms]||n[$i],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Mc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Y(33))}function Ny(n){return n[Zd]||null}var Pw=[],Nc=-1;function da(n){return{current:n}}function nt(n){0>Nc||(n.current=Pw[Nc],Pw[Nc]=null,Nc--)}function Qe(n,e){Nc++,Pw[Nc]=n.current,n.current=e}var Jo={},Sn=da(Jo),Gn=da(!1),Bl=Jo;function Ju(n,e){var t=n.type.contextTypes;if(!t)return Jo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function qn(n){return n=n.childContextTypes,n!=null}function Av(){nt(Gn),nt(Sn)}function OT(n,e,t){if(Sn.current!==Jo)throw Error(Y(168));Qe(Sn,e),Qe(Gn,t)}function UP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,XO(n)||"Unknown",s));return ut({},t,r)}function bv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Jo,Bl=Sn.current,Qe(Sn,n),Qe(Gn,Gn.current),!0}function FT(n,e,t){var r=n.stateNode;if(!r)throw Error(Y(169));t?(n=UP(n,e,Bl),r.__reactInternalMemoizedMergedChildContext=n,nt(Gn),nt(Sn),Qe(Sn,n)):nt(Gn),Qe(Gn,t)}var ai=null,Dy=!1,v0=!1;function $P(n){ai===null?ai=[n]:ai.push(n)}function dV(n){Dy=!0,$P(n)}function fa(){if(!v0&&ai!==null){v0=!0;var n=0,e=Ue;try{var t=ai;for(Ue=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ai=null,Dy=!1}catch(s){throw ai!==null&&(ai=ai.slice(n+1)),fP(db,fa),s}finally{Ue=e,v0=!1}}return null}var Dc=[],Oc=0,Sv=null,Tv=0,Ir=[],kr=0,Ul=null,Mi=1,Ni="";function Ca(n,e){Dc[Oc++]=Tv,Dc[Oc++]=Sv,Sv=n,Tv=e}function zP(n,e,t){Ir[kr++]=Mi,Ir[kr++]=Ni,Ir[kr++]=Ul,Ul=n;var r=Mi;n=Ni;var s=32-os(r)-1;r&=~(1<<s),t+=1;var i=32-os(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mi=1<<32-os(e)+s|t<<s|r,Ni=i+n}else Mi=1<<i|t<<s|r,Ni=n}function Eb(n){n.return!==null&&(Ca(n,1),zP(n,1,0))}function Ab(n){for(;n===Sv;)Sv=Dc[--Oc],Dc[Oc]=null,Tv=Dc[--Oc],Dc[Oc]=null;for(;n===Ul;)Ul=Ir[--kr],Ir[kr]=null,Ni=Ir[--kr],Ir[kr]=null,Mi=Ir[--kr],Ir[kr]=null}var vr=null,gr=null,rt=!1,ss=null;function HP(n,e){var t=Nr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function VT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,vr=n,gr=zo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,vr=n,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ul!==null?{id:Mi,overflow:Ni}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Nr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,vr=n,gr=null,!0):!1;default:return!1}}function Iw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function kw(n){if(rt){var e=gr;if(e){var t=e;if(!VT(n,e)){if(Iw(n))throw Error(Y(418));e=zo(t.nextSibling);var r=vr;e&&VT(n,e)?HP(r,t):(n.flags=n.flags&-4097|2,rt=!1,vr=n)}}else{if(Iw(n))throw Error(Y(418));n.flags=n.flags&-4097|2,rt=!1,vr=n}}}function jT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vr=n}function Wm(n){if(n!==vr)return!1;if(!rt)return jT(n),rt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Cw(n.type,n.memoizedProps)),e&&(e=gr)){if(Iw(n))throw WP(),Error(Y(418));for(;e;)HP(n,e),e=zo(e.nextSibling)}if(jT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Y(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){gr=zo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}gr=null}}else gr=vr?zo(n.stateNode.nextSibling):null;return!0}function WP(){for(var n=gr;n;)n=zo(n.nextSibling)}function Zu(){gr=vr=null,rt=!1}function bb(n){ss===null?ss=[n]:ss.push(n)}var fV=Qi.ReactCurrentBatchConfig;function Kh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Y(309));var r=t.stateNode}if(!r)throw Error(Y(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(Y(284));if(!t._owner)throw Error(Y(290,n))}return n}function Gm(n,e){throw n=Object.prototype.toString.call(e),Error(Y(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function BT(n){var e=n._init;return e(n._payload)}function GP(n){function e(v,E){if(n){var S=v.deletions;S===null?(v.deletions=[E],v.flags|=16):S.push(E)}}function t(v,E){if(!n)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function r(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function s(v,E){return v=qo(v,E),v.index=0,v.sibling=null,v}function i(v,E,S){return v.index=S,n?(S=v.alternate,S!==null?(S=S.index,S<E?(v.flags|=2,E):S):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,E,S,R){return E===null||E.tag!==6?(E=S0(S,v.mode,R),E.return=v,E):(E=s(E,S),E.return=v,E)}function l(v,E,S,R){var O=S.type;return O===Pc?u(v,E,S.props.children,R,S.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===lo&&BT(O)===E.type)?(R=s(E,S.props),R.ref=Kh(v,E,S),R.return=v,R):(R=Pg(S.type,S.key,S.props,null,v.mode,R),R.ref=Kh(v,E,S),R.return=v,R)}function c(v,E,S,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=T0(S,v.mode,R),E.return=v,E):(E=s(E,S.children||[]),E.return=v,E)}function u(v,E,S,R,O){return E===null||E.tag!==7?(E=Dl(S,v.mode,R,O),E.return=v,E):(E=s(E,S),E.return=v,E)}function f(v,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=S0(""+E,v.mode,S),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Dm:return S=Pg(E.type,E.key,E.props,null,v.mode,S),S.ref=Kh(v,null,E),S.return=v,S;case Rc:return E=T0(E,v.mode,S),E.return=v,E;case lo:var R=E._init;return f(v,R(E._payload),S)}if(sd(E)||zh(E))return E=Dl(E,v.mode,S,null),E.return=v,E;Gm(v,E)}return null}function p(v,E,S,R){var O=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(v,E,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dm:return S.key===O?l(v,E,S,R):null;case Rc:return S.key===O?c(v,E,S,R):null;case lo:return O=S._init,p(v,E,O(S._payload),R)}if(sd(S)||zh(S))return O!==null?null:u(v,E,S,R,null);Gm(v,S)}return null}function m(v,E,S,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(S)||null,a(E,v,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Dm:return v=v.get(R.key===null?S:R.key)||null,l(E,v,R,O);case Rc:return v=v.get(R.key===null?S:R.key)||null,c(E,v,R,O);case lo:var j=R._init;return m(v,E,S,j(R._payload),O)}if(sd(R)||zh(R))return v=v.get(S)||null,u(E,v,R,O,null);Gm(E,R)}return null}function g(v,E,S,R){for(var O=null,j=null,C=E,T=E=0,P=null;C!==null&&T<S.length;T++){C.index>T?(P=C,C=null):P=C.sibling;var M=p(v,C,S[T],R);if(M===null){C===null&&(C=P);break}n&&C&&M.alternate===null&&e(v,C),E=i(M,E,T),j===null?O=M:j.sibling=M,j=M,C=P}if(T===S.length)return t(v,C),rt&&Ca(v,T),O;if(C===null){for(;T<S.length;T++)C=f(v,S[T],R),C!==null&&(E=i(C,E,T),j===null?O=C:j.sibling=C,j=C);return rt&&Ca(v,T),O}for(C=r(v,C);T<S.length;T++)P=m(C,v,T,S[T],R),P!==null&&(n&&P.alternate!==null&&C.delete(P.key===null?T:P.key),E=i(P,E,T),j===null?O=P:j.sibling=P,j=P);return n&&C.forEach(function(F){return e(v,F)}),rt&&Ca(v,T),O}function y(v,E,S,R){var O=zh(S);if(typeof O!="function")throw Error(Y(150));if(S=O.call(S),S==null)throw Error(Y(151));for(var j=O=null,C=E,T=E=0,P=null,M=S.next();C!==null&&!M.done;T++,M=S.next()){C.index>T?(P=C,C=null):P=C.sibling;var F=p(v,C,M.value,R);if(F===null){C===null&&(C=P);break}n&&C&&F.alternate===null&&e(v,C),E=i(F,E,T),j===null?O=F:j.sibling=F,j=F,C=P}if(M.done)return t(v,C),rt&&Ca(v,T),O;if(C===null){for(;!M.done;T++,M=S.next())M=f(v,M.value,R),M!==null&&(E=i(M,E,T),j===null?O=M:j.sibling=M,j=M);return rt&&Ca(v,T),O}for(C=r(v,C);!M.done;T++,M=S.next())M=m(C,v,T,M.value,R),M!==null&&(n&&M.alternate!==null&&C.delete(M.key===null?T:M.key),E=i(M,E,T),j===null?O=M:j.sibling=M,j=M);return n&&C.forEach(function(V){return e(v,V)}),rt&&Ca(v,T),O}function w(v,E,S,R){if(typeof S=="object"&&S!==null&&S.type===Pc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Dm:e:{for(var O=S.key,j=E;j!==null;){if(j.key===O){if(O=S.type,O===Pc){if(j.tag===7){t(v,j.sibling),E=s(j,S.props.children),E.return=v,v=E;break e}}else if(j.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===lo&&BT(O)===j.type){t(v,j.sibling),E=s(j,S.props),E.ref=Kh(v,j,S),E.return=v,v=E;break e}t(v,j);break}else e(v,j);j=j.sibling}S.type===Pc?(E=Dl(S.props.children,v.mode,R,S.key),E.return=v,v=E):(R=Pg(S.type,S.key,S.props,null,v.mode,R),R.ref=Kh(v,E,S),R.return=v,v=R)}return o(v);case Rc:e:{for(j=S.key;E!==null;){if(E.key===j)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){t(v,E.sibling),E=s(E,S.children||[]),E.return=v,v=E;break e}else{t(v,E);break}else e(v,E);E=E.sibling}E=T0(S,v.mode,R),E.return=v,v=E}return o(v);case lo:return j=S._init,w(v,E,j(S._payload),R)}if(sd(S))return g(v,E,S,R);if(zh(S))return y(v,E,S,R);Gm(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(t(v,E.sibling),E=s(E,S),E.return=v,v=E):(t(v,E),E=S0(S,v.mode,R),E.return=v,v=E),o(v)):t(v,E)}return w}var eh=GP(!0),qP=GP(!1),Cv=da(null),xv=null,Fc=null,Sb=null;function Tb(){Sb=Fc=xv=null}function Cb(n){var e=Cv.current;nt(Cv),n._currentValue=e}function Lw(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Wc(n,e){xv=n,Sb=Fc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zn=!0),n.firstContext=null)}function Fr(n){var e=n._currentValue;if(Sb!==n)if(n={context:n,memoizedValue:e,next:null},Fc===null){if(xv===null)throw Error(Y(308));Fc=n,xv.dependencies={lanes:0,firstContext:n}}else Fc=Fc.next=n;return e}var Oa=null;function xb(n){Oa===null?Oa=[n]:Oa.push(n)}function KP(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,xb(e)):(t.next=s.next,s.next=t),e.interleaved=t,zi(n,r)}function zi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var co=!1;function Rb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Di(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ho(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zi(n,t)}return s=r.interleaved,s===null?(e.next=e,xb(r)):(e.next=s.next,s.next=e),r.interleaved=e,zi(n,t)}function bg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,fb(n,t)}}function UT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Rv(n,e,t,r){var s=n.updateQueue;co=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,u=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,y=a;switch(p=e,m=t,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break e;f=ut({},f,p);break e;case 2:co=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);zl|=o,n.lanes=o,n.memoizedState=f}}function $T(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var rm={},Fs=da(rm),ef=da(rm),tf=da(rm);function Fa(n){if(n===rm)throw Error(Y(174));return n}function Pb(n,e){switch(Qe(tf,e),Qe(ef,n),Qe(Fs,rm),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=dw(e,n)}nt(Fs),Qe(Fs,e)}function th(){nt(Fs),nt(ef),nt(tf)}function YP(n){Fa(tf.current);var e=Fa(Fs.current),t=dw(e,n.type);e!==t&&(Qe(ef,n),Qe(Fs,t))}function Ib(n){ef.current===n&&(nt(Fs),nt(ef))}var at=da(0);function Pv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var y0=[];function kb(){for(var n=0;n<y0.length;n++)y0[n]._workInProgressVersionPrimary=null;y0.length=0}var Sg=Qi.ReactCurrentDispatcher,_0=Qi.ReactCurrentBatchConfig,$l=0,lt=null,Nt=null,Wt=null,Iv=!1,kd=!1,nf=0,pV=0;function hn(){throw Error(Y(321))}function Lb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!cs(n[t],e[t]))return!1;return!0}function Mb(n,e,t,r,s,i){if($l=i,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sg.current=n===null||n.memoizedState===null?yV:_V,n=t(r,s),kd){i=0;do{if(kd=!1,nf=0,25<=i)throw Error(Y(301));i+=1,Wt=Nt=null,e.updateQueue=null,Sg.current=wV,n=t(r,s)}while(kd)}if(Sg.current=kv,e=Nt!==null&&Nt.next!==null,$l=0,Wt=Nt=lt=null,Iv=!1,e)throw Error(Y(300));return n}function Nb(){var n=nf!==0;return nf=0,n}function gs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?lt.memoizedState=Wt=n:Wt=Wt.next=n,Wt}function Vr(){if(Nt===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var e=Wt===null?lt.memoizedState:Wt.next;if(e!==null)Wt=e,Nt=n;else{if(n===null)throw Error(Y(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Wt===null?lt.memoizedState=Wt=n:Wt=Wt.next=n}return Wt}function rf(n,e){return typeof e=="function"?e(n):e}function w0(n){var e=Vr(),t=e.queue;if(t===null)throw Error(Y(311));t.lastRenderedReducer=n;var r=Nt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if(($l&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,lt.lanes|=u,zl|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,cs(r,e.memoizedState)||(zn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,lt.lanes|=i,zl|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function E0(n){var e=Vr(),t=e.queue;if(t===null)throw Error(Y(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);cs(i,e.memoizedState)||(zn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function QP(){}function JP(n,e){var t=lt,r=Vr(),s=e(),i=!cs(r.memoizedState,s);if(i&&(r.memoizedState=s,zn=!0),r=r.queue,Db(tI.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||Wt!==null&&Wt.memoizedState.tag&1){if(t.flags|=2048,sf(9,eI.bind(null,t,r,s,e),void 0,null),Gt===null)throw Error(Y(349));$l&30||ZP(t,e,s)}return s}function ZP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function eI(n,e,t,r){e.value=t,e.getSnapshot=r,nI(e)&&rI(n)}function tI(n,e,t){return t(function(){nI(e)&&rI(n)})}function nI(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!cs(n,t)}catch{return!0}}function rI(n){var e=zi(n,1);e!==null&&as(e,n,1,-1)}function zT(n){var e=gs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rf,lastRenderedState:n},e.queue=n,n=n.dispatch=vV.bind(null,lt,n),[e.memoizedState,n]}function sf(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function sI(){return Vr().memoizedState}function Tg(n,e,t,r){var s=gs();lt.flags|=n,s.memoizedState=sf(1|e,t,void 0,r===void 0?null:r)}function Oy(n,e,t,r){var s=Vr();r=r===void 0?null:r;var i=void 0;if(Nt!==null){var o=Nt.memoizedState;if(i=o.destroy,r!==null&&Lb(r,o.deps)){s.memoizedState=sf(e,t,i,r);return}}lt.flags|=n,s.memoizedState=sf(1|e,t,i,r)}function HT(n,e){return Tg(8390656,8,n,e)}function Db(n,e){return Oy(2048,8,n,e)}function iI(n,e){return Oy(4,2,n,e)}function oI(n,e){return Oy(4,4,n,e)}function aI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function lI(n,e,t){return t=t!=null?t.concat([n]):null,Oy(4,4,aI.bind(null,e,n),t)}function Ob(){}function cI(n,e){var t=Vr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Lb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function uI(n,e){var t=Vr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Lb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function hI(n,e,t){return $l&21?(cs(t,e)||(t=gP(),lt.lanes|=t,zl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zn=!0),n.memoizedState=t)}function mV(n,e){var t=Ue;Ue=t!==0&&4>t?t:4,n(!0);var r=_0.transition;_0.transition={};try{n(!1),e()}finally{Ue=t,_0.transition=r}}function dI(){return Vr().memoizedState}function gV(n,e,t){var r=Go(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},fI(n))pI(e,t);else if(t=KP(n,e,t,r),t!==null){var s=Ln();as(t,n,r,s),mI(t,e,r)}}function vV(n,e,t){var r=Go(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(fI(n))pI(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,cs(a,o)){var l=e.interleaved;l===null?(s.next=s,xb(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=KP(n,e,s,r),t!==null&&(s=Ln(),as(t,n,r,s),mI(t,e,r))}}function fI(n){var e=n.alternate;return n===lt||e!==null&&e===lt}function pI(n,e){kd=Iv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function mI(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,fb(n,t)}}var kv={readContext:Fr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},yV={readContext:Fr,useCallback:function(n,e){return gs().memoizedState=[n,e===void 0?null:e],n},useContext:Fr,useEffect:HT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Tg(4194308,4,aI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Tg(4194308,4,n,e)},useInsertionEffect:function(n,e){return Tg(4,2,n,e)},useMemo:function(n,e){var t=gs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=gs();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=gV.bind(null,lt,n),[r.memoizedState,n]},useRef:function(n){var e=gs();return n={current:n},e.memoizedState=n},useState:zT,useDebugValue:Ob,useDeferredValue:function(n){return gs().memoizedState=n},useTransition:function(){var n=zT(!1),e=n[0];return n=mV.bind(null,n[1]),gs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=lt,s=gs();if(rt){if(t===void 0)throw Error(Y(407));t=t()}else{if(t=e(),Gt===null)throw Error(Y(349));$l&30||ZP(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,HT(tI.bind(null,r,i,n),[n]),r.flags|=2048,sf(9,eI.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=gs(),e=Gt.identifierPrefix;if(rt){var t=Ni,r=Mi;t=(r&~(1<<32-os(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=nf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=pV++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},_V={readContext:Fr,useCallback:cI,useContext:Fr,useEffect:Db,useImperativeHandle:lI,useInsertionEffect:iI,useLayoutEffect:oI,useMemo:uI,useReducer:w0,useRef:sI,useState:function(){return w0(rf)},useDebugValue:Ob,useDeferredValue:function(n){var e=Vr();return hI(e,Nt.memoizedState,n)},useTransition:function(){var n=w0(rf)[0],e=Vr().memoizedState;return[n,e]},useMutableSource:QP,useSyncExternalStore:JP,useId:dI,unstable_isNewReconciler:!1},wV={readContext:Fr,useCallback:cI,useContext:Fr,useEffect:Db,useImperativeHandle:lI,useInsertionEffect:iI,useLayoutEffect:oI,useMemo:uI,useReducer:E0,useRef:sI,useState:function(){return E0(rf)},useDebugValue:Ob,useDeferredValue:function(n){var e=Vr();return Nt===null?e.memoizedState=n:hI(e,Nt.memoizedState,n)},useTransition:function(){var n=E0(rf)[0],e=Vr().memoizedState;return[n,e]},useMutableSource:QP,useSyncExternalStore:JP,useId:dI,unstable_isNewReconciler:!1};function $r(n,e){if(n&&n.defaultProps){e=ut({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Mw(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ut({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Fy={isMounted:function(n){return(n=n._reactInternals)?ec(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ln(),s=Go(n),i=Di(r,s);i.payload=e,t!=null&&(i.callback=t),e=Ho(n,i,s),e!==null&&(as(e,n,s,r),bg(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ln(),s=Go(n),i=Di(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Ho(n,i,s),e!==null&&(as(e,n,s,r),bg(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ln(),r=Go(n),s=Di(t,r);s.tag=2,e!=null&&(s.callback=e),e=Ho(n,s,r),e!==null&&(as(e,n,r,t),bg(e,n,r))}};function WT(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Yd(t,r)||!Yd(s,i):!0}function gI(n,e,t){var r=!1,s=Jo,i=e.contextType;return typeof i=="object"&&i!==null?i=Fr(i):(s=qn(e)?Bl:Sn.current,r=e.contextTypes,i=(r=r!=null)?Ju(n,s):Jo),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fy,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function GT(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Fy.enqueueReplaceState(e,e.state,null)}function Nw(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Rb(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Fr(i):(i=qn(e)?Bl:Sn.current,s.context=Ju(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Mw(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fy.enqueueReplaceState(s,s.state,null),Rv(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function nh(n,e){try{var t="",r=e;do t+=KO(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function A0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Dw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var EV=typeof WeakMap=="function"?WeakMap:Map;function vI(n,e,t){t=Di(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Mv||(Mv=!0,Ww=r),Dw(n,e)},t}function yI(n,e,t){t=Di(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){Dw(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Dw(n,e),typeof r!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function qT(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new EV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=DV.bind(null,n,e,t),e.then(n,n))}function KT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function XT(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Di(-1,1),e.tag=2,Ho(t,e,1))),t.lanes|=1),n)}var AV=Qi.ReactCurrentOwner,zn=!1;function Pn(n,e,t,r){e.child=n===null?qP(e,null,t,r):eh(e,n.child,t,r)}function YT(n,e,t,r,s){t=t.render;var i=e.ref;return Wc(e,s),r=Mb(n,e,t,r,i,s),t=Nb(),n!==null&&!zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Hi(n,e,s)):(rt&&t&&Eb(e),e.flags|=1,Pn(n,e,r,s),e.child)}function QT(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!Hb(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,_I(n,e,i,r,s)):(n=Pg(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Yd,t(o,r)&&n.ref===e.ref)return Hi(n,e,s)}return e.flags|=1,n=qo(i,r),n.ref=e.ref,n.return=e,e.child=n}function _I(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Yd(i,r)&&n.ref===e.ref)if(zn=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(zn=!0);else return e.lanes=n.lanes,Hi(n,e,s)}return Ow(n,e,t,r,s)}function wI(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(jc,dr),dr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Qe(jc,dr),dr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Qe(jc,dr),dr|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Qe(jc,dr),dr|=r;return Pn(n,e,s,t),e.child}function EI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ow(n,e,t,r,s){var i=qn(t)?Bl:Sn.current;return i=Ju(e,i),Wc(e,s),t=Mb(n,e,t,r,i,s),r=Nb(),n!==null&&!zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Hi(n,e,s)):(rt&&r&&Eb(e),e.flags|=1,Pn(n,e,t,s),e.child)}function JT(n,e,t,r,s){if(qn(t)){var i=!0;bv(e)}else i=!1;if(Wc(e,s),e.stateNode===null)Cg(n,e),gI(e,t,r),Nw(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Fr(c):(c=qn(t)?Bl:Sn.current,c=Ju(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&GT(e,o,r,c),co=!1;var p=e.memoizedState;o.state=p,Rv(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Gn.current||co?(typeof u=="function"&&(Mw(e,t,u,r),l=e.memoizedState),(a=co||WT(e,t,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XP(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:$r(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Fr(l):(l=qn(t)?Bl:Sn.current,l=Ju(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&GT(e,o,r,l),co=!1,p=e.memoizedState,o.state=p,Rv(e,r,o,s);var g=e.memoizedState;a!==f||p!==g||Gn.current||co?(typeof m=="function"&&(Mw(e,t,m,r),g=e.memoizedState),(c=co||WT(e,t,c,r,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return Fw(n,e,t,r,i,s)}function Fw(n,e,t,r,s,i){EI(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&FT(e,t,!1),Hi(n,e,i);r=e.stateNode,AV.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=eh(e,n.child,null,i),e.child=eh(e,null,a,i)):Pn(n,e,a,i),e.memoizedState=r.state,s&&FT(e,t,!0),e.child}function AI(n){var e=n.stateNode;e.pendingContext?OT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&OT(n,e.context,!1),Pb(n,e.containerInfo)}function ZT(n,e,t,r,s){return Zu(),bb(s),e.flags|=256,Pn(n,e,t,r),e.child}var Vw={dehydrated:null,treeContext:null,retryLane:0};function jw(n){return{baseLanes:n,cachePool:null,transitions:null}}function bI(n,e,t){var r=e.pendingProps,s=at.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Qe(at,s&1),n===null)return kw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=By(o,r,0,null),n=Dl(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=jw(t),e.memoizedState=Vw,n):Fb(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return bV(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=qo(a,i):(i=Dl(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?jw(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=Vw,r}return i=n.child,n=i.sibling,r=qo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Fb(n,e){return e=By({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function qm(n,e,t,r){return r!==null&&bb(r),eh(e,n.child,null,t),n=Fb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function bV(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=A0(Error(Y(422))),qm(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=By({mode:"visible",children:r.children},s,0,null),i=Dl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&eh(e,n.child,null,o),e.child.memoizedState=jw(o),e.memoizedState=Vw,i);if(!(e.mode&1))return qm(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Y(419)),r=A0(i,r,void 0),qm(n,e,o,r)}if(a=(o&n.childLanes)!==0,zn||a){if(r=Gt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zi(n,s),as(r,n,s,-1))}return zb(),r=A0(Error(Y(421))),qm(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=OV.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,gr=zo(s.nextSibling),vr=e,rt=!0,ss=null,n!==null&&(Ir[kr++]=Mi,Ir[kr++]=Ni,Ir[kr++]=Ul,Mi=n.id,Ni=n.overflow,Ul=e),e=Fb(e,r.children),e.flags|=4096,e)}function eC(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Lw(n.return,e,t)}function b0(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function SI(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pn(n,e,r.children,t),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&eC(n,t,e);else if(n.tag===19)eC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Qe(at,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Pv(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),b0(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Pv(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}b0(e,!0,t,null,i);break;case"together":b0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Hi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),zl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Y(153));if(e.child!==null){for(n=e.child,t=qo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=qo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function SV(n,e,t){switch(e.tag){case 3:AI(e),Zu();break;case 5:YP(e);break;case 1:qn(e.type)&&bv(e);break;case 4:Pb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qe(Cv,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(at,at.current&1),e.flags|=128,null):t&e.child.childLanes?bI(n,e,t):(Qe(at,at.current&1),n=Hi(n,e,t),n!==null?n.sibling:null);Qe(at,at.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return SI(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,wI(n,e,t)}return Hi(n,e,t)}var TI,Bw,CI,xI;TI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Bw=function(){};CI=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,Fa(Fs.current);var i=null;switch(t){case"input":s=lw(n,s),r=lw(n,r),i=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),i=[];break;case"textarea":s=hw(n,s),r=hw(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ev)}fw(t,r);var o;t=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tt("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};xI=function(n,e,t,r){t!==r&&(e.flags|=4)};function Xh(n,e){if(!rt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function dn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function TV(n,e,t){var r=e.pendingProps;switch(Ab(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(e),null;case 1:return qn(e.type)&&Av(),dn(e),null;case 3:return r=e.stateNode,th(),nt(Gn),nt(Sn),kb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Wm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(Kw(ss),ss=null))),Bw(n,e),dn(e),null;case 5:Ib(e);var s=Fa(tf.current);if(t=e.type,n!==null&&e.stateNode!=null)CI(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return dn(e),null}if(n=Fa(Fs.current),Wm(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Ms]=e,r[Zd]=i,n=(e.mode&1)!==0,t){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(s=0;s<od.length;s++)tt(od[s],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":cT(r,i),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},tt("invalid",r);break;case"textarea":hT(r,i),tt("invalid",r)}fw(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Hm(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Hm(r.textContent,a,n),s=["children",""+a]):zd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tt("scroll",r)}switch(t){case"input":Om(r),uT(r,i,!0);break;case"textarea":Om(r),dT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ev)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=tP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Ms]=e,n[Zd]=r,TI(n,e,!1,!1),e.stateNode=n;e:{switch(o=pw(t,r),t){case"dialog":tt("cancel",n),tt("close",n),s=r;break;case"iframe":case"object":case"embed":tt("load",n),s=r;break;case"video":case"audio":for(s=0;s<od.length;s++)tt(od[s],n);s=r;break;case"source":tt("error",n),s=r;break;case"img":case"image":case"link":tt("error",n),tt("load",n),s=r;break;case"details":tt("toggle",n),s=r;break;case"input":cT(n,r),s=lw(n,r),tt("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),tt("invalid",n);break;case"textarea":hT(n,r),s=hw(n,r),tt("invalid",n);break;default:s=r}fw(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?sP(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nP(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Hd(n,l):typeof l=="number"&&Hd(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&tt("scroll",n):l!=null&&ab(n,i,l,o))}switch(t){case"input":Om(n),uT(n,r,!1);break;case"textarea":Om(n),dT(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Qo(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Uc(n,!!r.multiple,i,!1):r.defaultValue!=null&&Uc(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Ev)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dn(e),null;case 6:if(n&&e.stateNode!=null)xI(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(t=Fa(tf.current),Fa(Fs.current),Wm(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ms]=e,(i=r.nodeValue!==t)&&(n=vr,n!==null))switch(n.tag){case 3:Hm(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Hm(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ms]=e,e.stateNode=r}return dn(e),null;case 13:if(nt(at),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&gr!==null&&e.mode&1&&!(e.flags&128))WP(),Zu(),e.flags|=98560,i=!1;else if(i=Wm(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[Ms]=e}else Zu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dn(e),i=!1}else ss!==null&&(Kw(ss),ss=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||at.current&1?Ft===0&&(Ft=3):zb())),e.updateQueue!==null&&(e.flags|=4),dn(e),null);case 4:return th(),Bw(n,e),n===null&&Qd(e.stateNode.containerInfo),dn(e),null;case 10:return Cb(e.type._context),dn(e),null;case 17:return qn(e.type)&&Av(),dn(e),null;case 19:if(nt(at),i=e.memoizedState,i===null)return dn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xh(i,!1);else{if(Ft!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Pv(n),o!==null){for(e.flags|=128,Xh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Qe(at,at.current&1|2),e.child}n=n.sibling}i.tail!==null&&wt()>rh&&(e.flags|=128,r=!0,Xh(i,!1),e.lanes=4194304)}else{if(!r)if(n=Pv(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Xh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rt)return dn(e),null}else 2*wt()-i.renderingStartTime>rh&&t!==1073741824&&(e.flags|=128,r=!0,Xh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=wt(),e.sibling=null,t=at.current,Qe(at,r?t&1|2:t&1),e):(dn(e),null);case 22:case 23:return $b(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dr&1073741824&&(dn(e),e.subtreeFlags&6&&(e.flags|=8192)):dn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function CV(n,e){switch(Ab(e),e.tag){case 1:return qn(e.type)&&Av(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return th(),nt(Gn),nt(Sn),kb(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Ib(e),null;case 13:if(nt(at),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Zu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return nt(at),null;case 4:return th(),null;case 10:return Cb(e.type._context),null;case 22:case 23:return $b(),null;case 24:return null;default:return null}}var Km=!1,_n=!1,xV=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Vc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){mt(n,e,r)}else t.current=null}function Uw(n,e,t){try{t()}catch(r){mt(n,e,r)}}var tC=!1;function RV(n,e){if(Sw=yv,n=LP(),wb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;t:for(;;){for(var m;f!==t||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===s&&(a=o),p===i&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Tw={focusedElem:n,selectionRange:t},yv=!1,ie=e;ie!==null;)if(e=ie,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ie=n;else for(;ie!==null;){e=ie;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:$r(e.type,y),w);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(R){mt(e,e.return,R)}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}return g=tC,tC=!1,g}function Ld(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&Uw(e,t,i)}s=s.next}while(s!==r)}}function Vy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function $w(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function RI(n){var e=n.alternate;e!==null&&(n.alternate=null,RI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ms],delete e[Zd],delete e[Rw],delete e[uV],delete e[hV])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function PI(n){return n.tag===5||n.tag===3||n.tag===4}function nC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||PI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zw(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ev));else if(r!==4&&(n=n.child,n!==null))for(zw(n,e,t),n=n.sibling;n!==null;)zw(n,e,t),n=n.sibling}function Hw(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Hw(n,e,t),n=n.sibling;n!==null;)Hw(n,e,t),n=n.sibling}var nn=null,rs=!1;function no(n,e,t){for(t=t.child;t!==null;)II(n,e,t),t=t.sibling}function II(n,e,t){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(Iy,t)}catch{}switch(t.tag){case 5:_n||Vc(t,e);case 6:var r=nn,s=rs;nn=null,no(n,e,t),nn=r,rs=s,nn!==null&&(rs?(n=nn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):nn.removeChild(t.stateNode));break;case 18:nn!==null&&(rs?(n=nn,t=t.stateNode,n.nodeType===8?g0(n.parentNode,t):n.nodeType===1&&g0(n,t),Kd(n)):g0(nn,t.stateNode));break;case 4:r=nn,s=rs,nn=t.stateNode.containerInfo,rs=!0,no(n,e,t),nn=r,rs=s;break;case 0:case 11:case 14:case 15:if(!_n&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Uw(t,e,o),s=s.next}while(s!==r)}no(n,e,t);break;case 1:if(!_n&&(Vc(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){mt(t,e,a)}no(n,e,t);break;case 21:no(n,e,t);break;case 22:t.mode&1?(_n=(r=_n)||t.memoizedState!==null,no(n,e,t),_n=r):no(n,e,t);break;default:no(n,e,t)}}function rC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new xV),e.forEach(function(r){var s=FV.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Br(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,rs=!1;break e;case 3:nn=a.stateNode.containerInfo,rs=!0;break e;case 4:nn=a.stateNode.containerInfo,rs=!0;break e}a=a.return}if(nn===null)throw Error(Y(160));II(i,o,s),nn=null,rs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){mt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kI(e,n),e=e.sibling}function kI(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Br(e,n),fs(n),r&4){try{Ld(3,n,n.return),Vy(3,n)}catch(y){mt(n,n.return,y)}try{Ld(5,n,n.return)}catch(y){mt(n,n.return,y)}}break;case 1:Br(e,n),fs(n),r&512&&t!==null&&Vc(t,t.return);break;case 5:if(Br(e,n),fs(n),r&512&&t!==null&&Vc(t,t.return),n.flags&32){var s=n.stateNode;try{Hd(s,"")}catch(y){mt(n,n.return,y)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ZR(s,i),pw(a,o);var c=pw(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?sP(s,f):u==="dangerouslySetInnerHTML"?nP(s,f):u==="children"?Hd(s,f):ab(s,u,f,c)}switch(a){case"input":cw(s,i);break;case"textarea":eP(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Uc(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Uc(s,!!i.multiple,i.defaultValue,!0):Uc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Zd]=i}catch(y){mt(n,n.return,y)}}break;case 6:if(Br(e,n),fs(n),r&4){if(n.stateNode===null)throw Error(Y(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(y){mt(n,n.return,y)}}break;case 3:if(Br(e,n),fs(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Kd(e.containerInfo)}catch(y){mt(n,n.return,y)}break;case 4:Br(e,n),fs(n);break;case 13:Br(e,n),fs(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bb=wt())),r&4&&rC(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(_n=(c=_n)||u,Br(e,n),_n=c):Br(e,n),fs(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(ie=n,u=n.child;u!==null;){for(f=ie=u;ie!==null;){switch(p=ie,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ld(4,p,p.return);break;case 1:Vc(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){mt(r,t,y)}}break;case 5:Vc(p,p.return);break;case 22:if(p.memoizedState!==null){iC(f);continue}}m!==null?(m.return=p,ie=m):iC(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=rP("display",o))}catch(y){mt(n,n.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){mt(n,n.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Br(e,n),fs(n),r&4&&rC(n);break;case 21:break;default:Br(e,n),fs(n)}}function fs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(PI(t)){var r=t;break e}t=t.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Hd(s,""),r.flags&=-33);var i=nC(n);Hw(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nC(n);zw(n,a,o);break;default:throw Error(Y(161))}}catch(l){mt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function PV(n,e,t){ie=n,LI(n)}function LI(n,e,t){for(var r=(n.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Km;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||_n;a=Km;var c=_n;if(Km=o,(_n=l)&&!c)for(ie=s;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?oC(s):l!==null?(l.return=o,ie=l):oC(s);for(;i!==null;)ie=i,LI(i),i=i.sibling;ie=s,Km=a,_n=c}sC(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):sC(n)}}function sC(n){for(;ie!==null;){var e=ie;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_n||Vy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_n)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:$r(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$T(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}$T(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Kd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}_n||e.flags&512&&$w(e)}catch(p){mt(e,e.return,p)}}if(e===n){ie=null;break}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}}function iC(n){for(;ie!==null;){var e=ie;if(e===n){ie=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ie=t;break}ie=e.return}}function oC(n){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Vy(4,e)}catch(l){mt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){mt(e,s,l)}}var i=e.return;try{$w(e)}catch(l){mt(e,i,l)}break;case 5:var o=e.return;try{$w(e)}catch(l){mt(e,o,l)}}}catch(l){mt(e,e.return,l)}if(e===n){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var IV=Math.ceil,Lv=Qi.ReactCurrentDispatcher,Vb=Qi.ReactCurrentOwner,Dr=Qi.ReactCurrentBatchConfig,Ne=0,Gt=null,Tt=null,sn=0,dr=0,jc=da(0),Ft=0,of=null,zl=0,jy=0,jb=0,Md=null,$n=null,Bb=0,rh=1/0,ri=null,Mv=!1,Ww=null,Wo=null,Xm=!1,Oo=null,Nv=0,Nd=0,Gw=null,xg=-1,Rg=0;function Ln(){return Ne&6?wt():xg!==-1?xg:xg=wt()}function Go(n){return n.mode&1?Ne&2&&sn!==0?sn&-sn:fV.transition!==null?(Rg===0&&(Rg=gP()),Rg):(n=Ue,n!==0||(n=window.event,n=n===void 0?16:bP(n.type)),n):1}function as(n,e,t,r){if(50<Nd)throw Nd=0,Gw=null,Error(Y(185));em(n,t,r),(!(Ne&2)||n!==Gt)&&(n===Gt&&(!(Ne&2)&&(jy|=t),Ft===4&&ho(n,sn)),Kn(n,r),t===1&&Ne===0&&!(e.mode&1)&&(rh=wt()+500,Dy&&fa()))}function Kn(n,e){var t=n.callbackNode;fF(n,e);var r=vv(n,n===Gt?sn:0);if(r===0)t!==null&&mT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&mT(t),e===1)n.tag===0?dV(aC.bind(null,n)):$P(aC.bind(null,n)),lV(function(){!(Ne&6)&&fa()}),t=null;else{switch(vP(r)){case 1:t=db;break;case 4:t=pP;break;case 16:t=gv;break;case 536870912:t=mP;break;default:t=gv}t=BI(t,MI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function MI(n,e){if(xg=-1,Rg=0,Ne&6)throw Error(Y(327));var t=n.callbackNode;if(Gc()&&n.callbackNode!==t)return null;var r=vv(n,n===Gt?sn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Dv(n,r);else{e=r;var s=Ne;Ne|=2;var i=DI();(Gt!==n||sn!==e)&&(ri=null,rh=wt()+500,Nl(n,e));do try{MV();break}catch(a){NI(n,a)}while(!0);Tb(),Lv.current=i,Ne=s,Tt!==null?e=0:(Gt=null,sn=0,e=Ft)}if(e!==0){if(e===2&&(s=_w(n),s!==0&&(r=s,e=qw(n,s))),e===1)throw t=of,Nl(n,0),ho(n,r),Kn(n,wt()),t;if(e===6)ho(n,r);else{if(s=n.current.alternate,!(r&30)&&!kV(s)&&(e=Dv(n,r),e===2&&(i=_w(n),i!==0&&(r=i,e=qw(n,i))),e===1))throw t=of,Nl(n,0),ho(n,r),Kn(n,wt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:xa(n,$n,ri);break;case 3:if(ho(n,r),(r&130023424)===r&&(e=Bb+500-wt(),10<e)){if(vv(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Ln(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=xw(xa.bind(null,n,$n,ri),e);break}xa(n,$n,ri);break;case 4:if(ho(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-os(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IV(r/1960))-r,10<r){n.timeoutHandle=xw(xa.bind(null,n,$n,ri),r);break}xa(n,$n,ri);break;case 5:xa(n,$n,ri);break;default:throw Error(Y(329))}}}return Kn(n,wt()),n.callbackNode===t?MI.bind(null,n):null}function qw(n,e){var t=Md;return n.current.memoizedState.isDehydrated&&(Nl(n,e).flags|=256),n=Dv(n,e),n!==2&&(e=$n,$n=t,e!==null&&Kw(e)),n}function Kw(n){$n===null?$n=n:$n.push.apply($n,n)}function kV(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!cs(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ho(n,e){for(e&=~jb,e&=~jy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-os(e),r=1<<t;n[t]=-1,e&=~r}}function aC(n){if(Ne&6)throw Error(Y(327));Gc();var e=vv(n,0);if(!(e&1))return Kn(n,wt()),null;var t=Dv(n,e);if(n.tag!==0&&t===2){var r=_w(n);r!==0&&(e=r,t=qw(n,r))}if(t===1)throw t=of,Nl(n,0),ho(n,e),Kn(n,wt()),t;if(t===6)throw Error(Y(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,xa(n,$n,ri),Kn(n,wt()),null}function Ub(n,e){var t=Ne;Ne|=1;try{return n(e)}finally{Ne=t,Ne===0&&(rh=wt()+500,Dy&&fa())}}function Hl(n){Oo!==null&&Oo.tag===0&&!(Ne&6)&&Gc();var e=Ne;Ne|=1;var t=Dr.transition,r=Ue;try{if(Dr.transition=null,Ue=1,n)return n()}finally{Ue=r,Dr.transition=t,Ne=e,!(Ne&6)&&fa()}}function $b(){dr=jc.current,nt(jc)}function Nl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,aV(t)),Tt!==null)for(t=Tt.return;t!==null;){var r=t;switch(Ab(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Av();break;case 3:th(),nt(Gn),nt(Sn),kb();break;case 5:Ib(r);break;case 4:th();break;case 13:nt(at);break;case 19:nt(at);break;case 10:Cb(r.type._context);break;case 22:case 23:$b()}t=t.return}if(Gt=n,Tt=n=qo(n.current,null),sn=dr=e,Ft=0,of=null,jb=jy=zl=0,$n=Md=null,Oa!==null){for(e=0;e<Oa.length;e++)if(t=Oa[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}Oa=null}return n}function NI(n,e){do{var t=Tt;try{if(Tb(),Sg.current=kv,Iv){for(var r=lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Iv=!1}if($l=0,Wt=Nt=lt=null,kd=!1,nf=0,Vb.current=null,t===null||t.return===null){Ft=1,of=e,Tt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=KT(o);if(m!==null){m.flags&=-257,XT(m,o,a,i,e),m.mode&1&&qT(i,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){qT(i,c,e),zb();break e}l=Error(Y(426))}}else if(rt&&a.mode&1){var w=KT(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),XT(w,o,a,i,e),bb(nh(l,a));break e}}i=l=nh(l,a),Ft!==4&&(Ft=2),Md===null?Md=[i]:Md.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=vI(i,l,e);UT(i,v);break e;case 1:a=l;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Wo===null||!Wo.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=yI(i,a,e);UT(i,R);break e}}i=i.return}while(i!==null)}FI(t)}catch(O){e=O,Tt===t&&t!==null&&(Tt=t=t.return);continue}break}while(!0)}function DI(){var n=Lv.current;return Lv.current=kv,n===null?kv:n}function zb(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Gt===null||!(zl&268435455)&&!(jy&268435455)||ho(Gt,sn)}function Dv(n,e){var t=Ne;Ne|=2;var r=DI();(Gt!==n||sn!==e)&&(ri=null,Nl(n,e));do try{LV();break}catch(s){NI(n,s)}while(!0);if(Tb(),Ne=t,Lv.current=r,Tt!==null)throw Error(Y(261));return Gt=null,sn=0,Ft}function LV(){for(;Tt!==null;)OI(Tt)}function MV(){for(;Tt!==null&&!sF();)OI(Tt)}function OI(n){var e=jI(n.alternate,n,dr);n.memoizedProps=n.pendingProps,e===null?FI(n):Tt=e,Vb.current=null}function FI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=CV(t,e),t!==null){t.flags&=32767,Tt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ft=6,Tt=null;return}}else if(t=TV(t,e,dr),t!==null){Tt=t;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=n}while(e!==null);Ft===0&&(Ft=5)}function xa(n,e,t){var r=Ue,s=Dr.transition;try{Dr.transition=null,Ue=1,NV(n,e,t,r)}finally{Dr.transition=s,Ue=r}return null}function NV(n,e,t,r){do Gc();while(Oo!==null);if(Ne&6)throw Error(Y(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Y(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(pF(n,i),n===Gt&&(Tt=Gt=null,sn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Xm||(Xm=!0,BI(gv,function(){return Gc(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Dr.transition,Dr.transition=null;var o=Ue;Ue=1;var a=Ne;Ne|=4,Vb.current=null,RV(n,t),kI(t,n),eV(Tw),yv=!!Sw,Tw=Sw=null,n.current=t,PV(t),iF(),Ne=a,Ue=o,Dr.transition=i}else n.current=t;if(Xm&&(Xm=!1,Oo=n,Nv=s),i=n.pendingLanes,i===0&&(Wo=null),lF(t.stateNode),Kn(n,wt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mv)throw Mv=!1,n=Ww,Ww=null,n;return Nv&1&&n.tag!==0&&Gc(),i=n.pendingLanes,i&1?n===Gw?Nd++:(Nd=0,Gw=n):Nd=0,fa(),null}function Gc(){if(Oo!==null){var n=vP(Nv),e=Dr.transition,t=Ue;try{if(Dr.transition=null,Ue=16>n?16:n,Oo===null)var r=!1;else{if(n=Oo,Oo=null,Nv=0,Ne&6)throw Error(Y(331));var s=Ne;for(Ne|=4,ie=n.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:Ld(8,u,i)}var f=u.child;if(f!==null)f.return=u,ie=f;else for(;ie!==null;){u=ie;var p=u.sibling,m=u.return;if(RI(u),u===c){ie=null;break}if(p!==null){p.return=m,ie=p;break}ie=m}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ld(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ie=v;break e}ie=i.return}}var E=n.current;for(ie=E;ie!==null;){o=ie;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ie=S;else e:for(o=E;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vy(9,a)}}catch(O){mt(a,a.return,O)}if(a===o){ie=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ie=R;break e}ie=a.return}}if(Ne=s,fa(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(Iy,n)}catch{}r=!0}return r}finally{Ue=t,Dr.transition=e}}return!1}function lC(n,e,t){e=nh(t,e),e=vI(n,e,1),n=Ho(n,e,1),e=Ln(),n!==null&&(em(n,1,e),Kn(n,e))}function mt(n,e,t){if(n.tag===3)lC(n,n,t);else for(;e!==null;){if(e.tag===3){lC(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wo===null||!Wo.has(r))){n=nh(t,n),n=yI(e,n,1),e=Ho(e,n,1),n=Ln(),e!==null&&(em(e,1,n),Kn(e,n));break}}e=e.return}}function DV(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ln(),n.pingedLanes|=n.suspendedLanes&t,Gt===n&&(sn&t)===t&&(Ft===4||Ft===3&&(sn&130023424)===sn&&500>wt()-Bb?Nl(n,0):jb|=t),Kn(n,e)}function VI(n,e){e===0&&(n.mode&1?(e=jm,jm<<=1,!(jm&130023424)&&(jm=4194304)):e=1);var t=Ln();n=zi(n,e),n!==null&&(em(n,e,t),Kn(n,t))}function OV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),VI(n,t)}function FV(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),VI(n,t)}var jI;jI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Gn.current)zn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return zn=!1,SV(n,e,t);zn=!!(n.flags&131072)}else zn=!1,rt&&e.flags&1048576&&zP(e,Tv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cg(n,e),n=e.pendingProps;var s=Ju(e,Sn.current);Wc(e,t),s=Mb(null,e,r,n,s,t);var i=Nb();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qn(r)?(i=!0,bv(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rb(e),s.updater=Fy,e.stateNode=s,s._reactInternals=e,Nw(e,r,n,t),e=Fw(null,e,r,!0,i,t)):(e.tag=0,rt&&i&&Eb(e),Pn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Cg(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=jV(r),n=$r(r,n),s){case 0:e=Ow(null,e,r,n,t);break e;case 1:e=JT(null,e,r,n,t);break e;case 11:e=YT(null,e,r,n,t);break e;case 14:e=QT(null,e,r,$r(r.type,n),t);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),Ow(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),JT(n,e,r,s,t);case 3:e:{if(AI(e),n===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,XP(n,e),Rv(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=nh(Error(Y(423)),e),e=ZT(n,e,r,t,s);break e}else if(r!==s){s=nh(Error(Y(424)),e),e=ZT(n,e,r,t,s);break e}else for(gr=zo(e.stateNode.containerInfo.firstChild),vr=e,rt=!0,ss=null,t=qP(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Zu(),r===s){e=Hi(n,e,t);break e}Pn(n,e,r,t)}e=e.child}return e;case 5:return YP(e),n===null&&kw(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,Cw(r,s)?o=null:i!==null&&Cw(r,i)&&(e.flags|=32),EI(n,e),Pn(n,e,o,t),e.child;case 6:return n===null&&kw(e),null;case 13:return bI(n,e,t);case 4:return Pb(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=eh(e,null,r,t):Pn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),YT(n,e,r,s,t);case 7:return Pn(n,e,e.pendingProps,t),e.child;case 8:return Pn(n,e,e.pendingProps.children,t),e.child;case 12:return Pn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Qe(Cv,r._currentValue),r._currentValue=o,i!==null)if(cs(i.value,o)){if(i.children===s.children&&!Gn.current){e=Hi(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Di(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),Lw(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Lw(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Wc(e,t),s=Fr(s),r=r(s),e.flags|=1,Pn(n,e,r,t),e.child;case 14:return r=e.type,s=$r(r,e.pendingProps),s=$r(r.type,s),QT(n,e,r,s,t);case 15:return _I(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),Cg(n,e),e.tag=1,qn(r)?(n=!0,bv(e)):n=!1,Wc(e,t),gI(e,r,s),Nw(e,r,s,t),Fw(null,e,r,!0,n,t);case 19:return SI(n,e,t);case 22:return wI(n,e,t)}throw Error(Y(156,e.tag))};function BI(n,e){return fP(n,e)}function VV(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(n,e,t,r){return new VV(n,e,t,r)}function Hb(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jV(n){if(typeof n=="function")return Hb(n)?1:0;if(n!=null){if(n=n.$$typeof,n===cb)return 11;if(n===ub)return 14}return 2}function qo(n,e){var t=n.alternate;return t===null?(t=Nr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Pg(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")Hb(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Pc:return Dl(t.children,s,i,e);case lb:o=8,s|=8;break;case sw:return n=Nr(12,t,e,s|2),n.elementType=sw,n.lanes=i,n;case iw:return n=Nr(13,t,e,s),n.elementType=iw,n.lanes=i,n;case ow:return n=Nr(19,t,e,s),n.elementType=ow,n.lanes=i,n;case YR:return By(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case KR:o=10;break e;case XR:o=9;break e;case cb:o=11;break e;case ub:o=14;break e;case lo:o=16,r=null;break e}throw Error(Y(130,n==null?n:typeof n,""))}return e=Nr(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function Dl(n,e,t,r){return n=Nr(7,n,r,e),n.lanes=t,n}function By(n,e,t,r){return n=Nr(22,n,r,e),n.elementType=YR,n.lanes=t,n.stateNode={isHidden:!1},n}function S0(n,e,t){return n=Nr(6,n,null,e),n.lanes=t,n}function T0(n,e,t){return e=Nr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function BV(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i0(0),this.expirationTimes=i0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wb(n,e,t,r,s,i,o,a,l){return n=new BV(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Nr(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rb(i),n}function UV(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rc,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function UI(n){if(!n)return Jo;n=n._reactInternals;e:{if(ec(n)!==n||n.tag!==1)throw Error(Y(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(n.tag===1){var t=n.type;if(qn(t))return UP(n,t,e)}return e}function $I(n,e,t,r,s,i,o,a,l){return n=Wb(t,r,!0,n,s,i,o,a,l),n.context=UI(null),t=n.current,r=Ln(),s=Go(t),i=Di(r,s),i.callback=e??null,Ho(t,i,s),n.current.lanes=s,em(n,s,r),Kn(n,r),n}function Uy(n,e,t,r){var s=e.current,i=Ln(),o=Go(s);return t=UI(t),e.context===null?e.context=t:e.pendingContext=t,e=Di(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ho(s,e,o),n!==null&&(as(n,s,o,i),bg(n,s,o)),o}function Ov(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function cC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Gb(n,e){cC(n,e),(n=n.alternate)&&cC(n,e)}function $V(){return null}var zI=typeof reportError=="function"?reportError:function(n){console.error(n)};function qb(n){this._internalRoot=n}$y.prototype.render=qb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Y(409));Uy(n,e,null,null)};$y.prototype.unmount=qb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Hl(function(){Uy(null,n,null,null)}),e[$i]=null}};function $y(n){this._internalRoot=n}$y.prototype.unstable_scheduleHydration=function(n){if(n){var e=wP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<uo.length&&e!==0&&e<uo[t].priority;t++);uo.splice(t,0,n),t===0&&AP(n)}};function Kb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function uC(){}function zV(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ov(o);i.call(c)}}var o=$I(e,r,n,0,null,!1,!1,"",uC);return n._reactRootContainer=o,n[$i]=o.current,Qd(n.nodeType===8?n.parentNode:n),Hl(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ov(l);a.call(c)}}var l=Wb(n,0,!1,null,null,!1,!1,"",uC);return n._reactRootContainer=l,n[$i]=l.current,Qd(n.nodeType===8?n.parentNode:n),Hl(function(){Uy(e,l,t,r)}),l}function Hy(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ov(o);a.call(l)}}Uy(e,o,n,s)}else o=zV(t,e,n,s,r);return Ov(o)}yP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=id(e.pendingLanes);t!==0&&(fb(e,t|1),Kn(e,wt()),!(Ne&6)&&(rh=wt()+500,fa()))}break;case 13:Hl(function(){var r=zi(n,1);if(r!==null){var s=Ln();as(r,n,1,s)}}),Gb(n,1)}};pb=function(n){if(n.tag===13){var e=zi(n,134217728);if(e!==null){var t=Ln();as(e,n,134217728,t)}Gb(n,134217728)}};_P=function(n){if(n.tag===13){var e=Go(n),t=zi(n,e);if(t!==null){var r=Ln();as(t,n,e,r)}Gb(n,e)}};wP=function(){return Ue};EP=function(n,e){var t=Ue;try{return Ue=n,e()}finally{Ue=t}};gw=function(n,e,t){switch(e){case"input":if(cw(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=Ny(r);if(!s)throw Error(Y(90));JR(r),cw(r,s)}}}break;case"textarea":eP(n,t);break;case"select":e=t.value,e!=null&&Uc(n,!!t.multiple,e,!1)}};aP=Ub;lP=Hl;var HV={usingClientEntryPoint:!1,Events:[nm,Mc,Ny,iP,oP,Ub]},Yh={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WV={bundleType:Yh.bundleType,version:Yh.version,rendererPackageName:Yh.rendererPackageName,rendererConfig:Yh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=hP(n),n===null?null:n.stateNode},findFiberByHostInstance:Yh.findFiberByHostInstance||$V,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{Iy=Ym.inject(WV),Os=Ym}catch{}}Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HV;Er.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kb(e))throw Error(Y(200));return UV(n,e,null,t)};Er.createRoot=function(n,e){if(!Kb(n))throw Error(Y(299));var t=!1,r="",s=zI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wb(n,1,!1,null,null,t,!1,r,s),n[$i]=e.current,Qd(n.nodeType===8?n.parentNode:n),new qb(e)};Er.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Y(188)):(n=Object.keys(n).join(","),Error(Y(268,n)));return n=hP(e),n=n===null?null:n.stateNode,n};Er.flushSync=function(n){return Hl(n)};Er.hydrate=function(n,e,t){if(!zy(e))throw Error(Y(200));return Hy(null,n,e,!0,t)};Er.hydrateRoot=function(n,e,t){if(!Kb(n))throw Error(Y(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=zI;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=$I(e,null,n,1,t??null,s,!1,i,o),n[$i]=e.current,Qd(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new $y(e)};Er.render=function(n,e,t){if(!zy(e))throw Error(Y(200));return Hy(null,n,e,!1,t)};Er.unmountComponentAtNode=function(n){if(!zy(n))throw Error(Y(40));return n._reactRootContainer?(Hl(function(){Hy(null,null,n,!1,function(){n._reactRootContainer=null,n[$i]=null})}),!0):!1};Er.unstable_batchedUpdates=Ub;Er.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!zy(t))throw Error(Y(200));if(n==null||n._reactInternals===void 0)throw Error(Y(38));return Hy(n,e,t,!1,r)};Er.version="18.3.1-next-f1338f8080-20240426";function HI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HI)}catch(n){console.error(n)}}HI(),HR.exports=Er;var Wy=HR.exports,WI,hC=Wy;WI=hC.createRoot,hC.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function af(){return af=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},af.apply(this,arguments)}var Fo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Fo||(Fo={}));const dC="popstate";function GV(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Xw("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:qI(s)}return KV(e,t,null,n)}function Vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function GI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qV(){return Math.random().toString(36).substr(2,8)}function fC(n,e){return{usr:n.state,key:n.key,idx:e}}function Xw(n,e,t,r){return t===void 0&&(t=null),af({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?yh(e):e,{state:t,key:e&&e.key||r||qV()})}function qI(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function KV(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Fo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(af({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Fo.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:v})}function p(w,v){a=Fo.Push;let E=Xw(y.location,w,v);c=u()+1;let S=fC(E,c),R=y.createHref(E);try{o.pushState(S,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(R)}i&&l&&l({action:a,location:y.location,delta:1})}function m(w,v){a=Fo.Replace;let E=Xw(y.location,w,v);c=u();let S=fC(E,c),R=y.createHref(E);o.replaceState(S,"",R),i&&l&&l({action:a,location:y.location,delta:0})}function g(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof w=="string"?w:qI(w);return E=E.replace(/ $/,"%20"),Vt(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let y={get action(){return a},get location(){return n(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(dC,f),l=w,()=>{s.removeEventListener(dC,f),l=null}},createHref(w){return e(s,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(w){return o.go(w)}};return y}var pC;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(pC||(pC={}));function XV(n,e,t){return t===void 0&&(t="/"),YV(n,e,t,!1)}function YV(n,e,t,r){let s=typeof e=="string"?yh(e):e,i=YI(s.pathname||"/",t);if(i==null)return null;let o=KI(n);QV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=lj(i);a=oj(o[l],c,r)}return a}function KI(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Vt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ol([r,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(Vt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),KI(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:sj(c,i.index),routesMeta:u})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of XI(i.path))s(i,o,l)}),e}function XI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=XI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function QV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ij(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const JV=/^:[\w-]+$/,ZV=3,ej=2,tj=1,nj=10,rj=-2,mC=n=>n==="*";function sj(n,e){let t=n.split("/"),r=t.length;return t.some(mC)&&(r+=rj),e&&(r+=ej),t.filter(s=>!mC(s)).reduce((s,i)=>s+(JV.test(i)?ZV:i===""?tj:nj),r)}function ij(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function oj(n,e,t){let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=gC({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f&&c&&t&&!r[r.length-1].route.index&&(f=gC({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ol([i,f.pathname]),pathnameBase:pj(Ol([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Ol([i,f.pathnameBase]))}return o}function gC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=aj(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let y=a[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[f];return m&&!g?c[p]=void 0:c[p]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:n}}function aj(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),GI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lj(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function YI(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function cj(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?yh(n):n;return{pathname:t?t.startsWith("/")?t:uj(t,e):e,search:mj(r),hash:gj(s)}}function uj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function C0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dj(n,e){let t=hj(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function fj(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=yh(n):(s=af({},n),Vt(!s.pathname||!s.pathname.includes("?"),C0("?","pathname","search",s)),Vt(!s.pathname||!s.pathname.includes("#"),C0("#","pathname","hash",s)),Vt(!s.search||!s.search.includes("#"),C0("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=cj(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ol=n=>n.join("/").replace(/\/\/+/g,"/"),pj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function vj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const QI=["post","put","patch","delete"];new Set(QI);const yj=["get",...QI];new Set(yj);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lf(){return lf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lf.apply(this,arguments)}const Xb=A.createContext(null),_j=A.createContext(null),Gy=A.createContext(null),qy=A.createContext(null),_h=A.createContext({outlet:null,matches:[],isDataRoute:!1}),JI=A.createContext(null);function Ky(){return A.useContext(qy)!=null}function Xy(){return Ky()||Vt(!1),A.useContext(qy).location}function ZI(n){A.useContext(Gy).static||A.useLayoutEffect(n)}function wj(){let{isDataRoute:n}=A.useContext(_h);return n?Mj():Ej()}function Ej(){Ky()||Vt(!1);let n=A.useContext(Xb),{basename:e,future:t,navigator:r}=A.useContext(Gy),{matches:s}=A.useContext(_h),{pathname:i}=Xy(),o=JSON.stringify(dj(s,t.v7_relativeSplatPath)),a=A.useRef(!1);return ZI(()=>{a.current=!0}),A.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=fj(c,JSON.parse(o),i,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ol([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,i,n])}function Aj(n,e){return bj(n,e)}function bj(n,e,t,r){Ky()||Vt(!1);let{navigator:s}=A.useContext(Gy),{matches:i}=A.useContext(_h),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Xy(),u;if(e){var f;let w=typeof e=="string"?yh(e):e;l==="/"||(f=w.pathname)!=null&&f.startsWith(l)||Vt(!1),u=w}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=XV(n,{pathname:m}),y=Rj(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ol([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Ol([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,r);return e&&y?A.createElement(qy.Provider,{value:{location:lf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Fo.Pop}},y):y}function Sj(){let n=Lj(),e=vj(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const Tj=A.createElement(Sj,null);class Cj extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(_h.Provider,{value:this.props.routeContext},A.createElement(JI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xj(n){let{routeContext:e,match:t,children:r}=n,s=A.useContext(Xb);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(_h.Provider,{value:e},r)}function Rj(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Vt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=t,g=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,g=!1,y=null,w=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,y=f.route.errorElement||Tj,l&&(c<0&&p===0?(g=!0,w=null):c===p&&(g=!0,w=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),E=()=>{let S;return m?S=y:g?S=w:f.route.Component?S=A.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,A.createElement(xj,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?A.createElement(Cj,{location:t.location,revalidation:t.revalidation,component:y,error:m,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var ek=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(ek||{}),Fv=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Fv||{});function Pj(n){let e=A.useContext(Xb);return e||Vt(!1),e}function Ij(n){let e=A.useContext(_j);return e||Vt(!1),e}function kj(n){let e=A.useContext(_h);return e||Vt(!1),e}function tk(n){let e=kj(),t=e.matches[e.matches.length-1];return t.route.id||Vt(!1),t.route.id}function Lj(){var n;let e=A.useContext(JI),t=Ij(Fv.UseRouteError),r=tk(Fv.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Mj(){let{router:n}=Pj(ek.UseNavigateStable),e=tk(Fv.UseNavigateStable),t=A.useRef(!1);return ZI(()=>{t.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,lf({fromRouteId:e},i)))},[n,e])}function Ra(n){Vt(!1)}function Nj(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Fo.Pop,navigator:i,static:o=!1,future:a}=n;Ky()&&Vt(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:i,static:o,future:lf({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=yh(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:g="default"}=r,y=A.useMemo(()=>{let w=YI(u,l);return w==null?null:{location:{pathname:w,search:f,hash:p,state:m,key:g},navigationType:s}},[l,u,f,p,m,g,s]);return y==null?null:A.createElement(Gy.Provider,{value:c},A.createElement(qy.Provider,{children:t,value:y}))}function Dj(n){let{children:e,location:t}=n;return Aj(Yw(e),t)}new Promise(()=>{});function Yw(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){t.push.apply(t,Yw(r.props.children,i));return}r.type!==Ra&&Vt(!1),!r.props.index||!r.props.children||Vt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yw(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Oj="6";try{window.__reactRouterVersion=Oj}catch{}const Fj="startTransition",vC=$R[Fj];function Vj(n){let{basename:e,children:t,future:r,window:s}=n,i=A.useRef();i.current==null&&(i.current=GV({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=A.useCallback(f=>{c&&vC?vC(()=>l(f)):l(f)},[l,c]);return A.useLayoutEffect(()=>o.listen(u),[o,u]),A.createElement(Nj,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var yC;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(yC||(yC={}));var _C;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(_C||(_C={}));function jj(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Yb(...n){return e=>n.forEach(t=>jj(t,e))}function xt(...n){return A.useCallback(Yb(...n),n)}var wr=A.forwardRef((n,e)=>{const{children:t,...r}=n,s=A.Children.toArray(t),i=s.find(Bj);if(i){const o=i.props.children,a=s.map(l=>l===i?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:l);return x.jsx(Qw,{...r,ref:e,children:A.isValidElement(o)?A.cloneElement(o,void 0,a):null})}return x.jsx(Qw,{...r,ref:e,children:t})});wr.displayName="Slot";var Qw=A.forwardRef((n,e)=>{const{children:t,...r}=n;if(A.isValidElement(t)){const s=$j(t);return A.cloneElement(t,{...Uj(r,t.props),ref:e?Yb(e,s):s})}return A.Children.count(t)>1?A.Children.only(null):null});Qw.displayName="SlotClone";var nk=({children:n})=>x.jsx(x.Fragment,{children:n});function Bj(n){return A.isValidElement(n)&&n.type===nk}function Uj(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{i(...a),s(...a)}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function $j(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var zj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vt=zj.reduce((n,e)=>{const t=A.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?wr:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(a,{...o,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Qb(n,e){n&&Wy.flushSync(()=>n.dispatchEvent(e))}var Hj="VisuallyHidden",Jb=A.forwardRef((n,e)=>x.jsx(vt.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Jb.displayName=Hj;var Wj=Jb,rk={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],s=0;s<arguments.length;s++){var i=arguments[s];if(i){var o=typeof i;if(o==="string"||o==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var a=t.apply(null,i);a&&r.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){r.push(i.toString());continue}for(var l in i)e.call(i,l)&&i[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(rk);var Gj=rk.exports;const An=Jp(Gj);function sm(n,e=[]){let t=[];function r(i,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:p,children:m,...g}=f,y=(p==null?void 0:p[n][l])||a,w=A.useMemo(()=>g,Object.values(g));return x.jsx(y.Provider,{value:w,children:m})}function u(f,p){const m=(p==null?void 0:p[n][l])||a,g=A.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,qj(s,...e)]}function qj(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function he(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var Us=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},Kj=$R.useId||(()=>{}),Xj=0;function Ig(n){const[e,t]=A.useState(Kj());return Us(()=>{t(r=>r??String(Xj++))},[n]),e?`radix-${e}`:""}function Qn(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function sk({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=Yj({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:r,a=Qn(t),l=A.useCallback(c=>{if(i){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else s(c)},[i,n,s,a]);return[o,l]}function Yj({defaultProp:n,onChange:e}){const t=A.useState(n),[r]=t,s=A.useRef(r),i=Qn(e);return A.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),t}function ik(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Qj="DismissableLayer",Jw="dismissableLayer.update",Jj="dismissableLayer.pointerDownOutside",Zj="dismissableLayer.focusOutside",wC,ok=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ak=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(ok),[u,f]=A.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),g=xt(e,C=>f(C)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),E=u?y.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,R=E>=v,O=n3(C=>{const T=C.target,P=[...c.branches].some(M=>M.contains(T));!R||P||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),j=r3(C=>{const T=C.target;[...c.branches].some(M=>M.contains(T))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return ik(C=>{E===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(wC=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),EC(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=wC)}},[u,p,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),EC())},[u,c]),A.useEffect(()=>{const C=()=>m({});return document.addEventListener(Jw,C),()=>document.removeEventListener(Jw,C)},[]),x.jsx(vt.div,{...l,ref:g,style:{pointerEvents:S?R?"auto":"none":void 0,...n.style},onFocusCapture:he(n.onFocusCapture,j.onFocusCapture),onBlurCapture:he(n.onBlurCapture,j.onBlurCapture),onPointerDownCapture:he(n.onPointerDownCapture,O.onPointerDownCapture)})});ak.displayName=Qj;var e3="DismissableLayerBranch",t3=A.forwardRef((n,e)=>{const t=A.useContext(ok),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),x.jsx(vt.div,{...n,ref:s})});t3.displayName=e3;function n3(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){lk(Jj,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function r3(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&lk(Zj,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function EC(){const n=new CustomEvent(Jw);document.dispatchEvent(n)}function lk(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Qb(s,i):s.dispatchEvent(i)}var x0="focusScope.autoFocusOnMount",R0="focusScope.autoFocusOnUnmount",AC={bubbles:!1,cancelable:!0},s3="FocusScope",ck=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,l]=A.useState(null),c=Qn(s),u=Qn(i),f=A.useRef(null),p=xt(e,y=>l(y)),m=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let y=function(S){if(m.paused||!a)return;const R=S.target;a.contains(R)?f.current=R:so(f.current,{select:!0})},w=function(S){if(m.paused||!a)return;const R=S.relatedTarget;R!==null&&(a.contains(R)||so(f.current,{select:!0}))},v=function(S){if(document.activeElement===document.body)for(const O of S)O.removedNodes.length>0&&so(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const E=new MutationObserver(v);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),E.disconnect()}}},[r,a,m.paused]),A.useEffect(()=>{if(a){SC.add(m);const y=document.activeElement;if(!a.contains(y)){const v=new CustomEvent(x0,AC);a.addEventListener(x0,c),a.dispatchEvent(v),v.defaultPrevented||(i3(u3(uk(a)),{select:!0}),document.activeElement===y&&so(a))}return()=>{a.removeEventListener(x0,c),setTimeout(()=>{const v=new CustomEvent(R0,AC);a.addEventListener(R0,u),a.dispatchEvent(v),v.defaultPrevented||so(y??document.body,{select:!0}),a.removeEventListener(R0,u),SC.remove(m)},0)}}},[a,c,u,m]);const g=A.useCallback(y=>{if(!t&&!r||m.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(w&&v){const E=y.currentTarget,[S,R]=o3(E);S&&R?!y.shiftKey&&v===R?(y.preventDefault(),t&&so(S,{select:!0})):y.shiftKey&&v===S&&(y.preventDefault(),t&&so(R,{select:!0})):v===E&&y.preventDefault()}},[t,r,m.paused]);return x.jsx(vt.div,{tabIndex:-1,...o,ref:p,onKeyDown:g})});ck.displayName=s3;function i3(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(so(r,{select:e}),document.activeElement!==t)return}function o3(n){const e=uk(n),t=bC(e,n),r=bC(e.reverse(),n);return[t,r]}function uk(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function bC(n,e){for(const t of n)if(!a3(t,{upTo:e}))return t}function a3(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function l3(n){return n instanceof HTMLInputElement&&"select"in n}function so(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&l3(n)&&e&&n.select()}}var SC=c3();function c3(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=TC(n,e),n.unshift(e)},remove(e){var t;n=TC(n,e),(t=n[0])==null||t.resume()}}}function TC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function u3(n){return n.filter(e=>e.tagName!=="A")}function h3(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var hk=n=>{const{present:e,children:t}=n,r=d3(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=xt(r.ref,f3(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};hk.displayName="Presence";function d3(n){const[e,t]=A.useState(),r=A.useRef({}),s=A.useRef(n),i=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=h3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=Qm(r.current);i.current=a==="mounted"?c:"none"},[a]),Us(()=>{const c=r.current,u=s.current;if(u!==n){const p=i.current,m=Qm(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Us(()=>{if(e){const c=f=>{const m=Qm(r.current).includes(f.animationName);f.target===e&&m&&Wy.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(i.current=Qm(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function Qm(n){return(n==null?void 0:n.animationName)||"none"}function f3(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ns=function(){return Ns=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ns.apply(this,arguments)};function dk(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function p3(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function P0(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function m3(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var g3=typeof window<"u"?A.useLayoutEffect:A.useEffect,CC=new WeakMap;function v3(n,e){var t=m3(null,function(r){return n.forEach(function(s){return P0(s,r)})});return g3(function(){var r=CC.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||P0(a,null)}),i.forEach(function(a){s.has(a)||P0(a,o)})}CC.set(t,n)},[n]),t}function y3(n){return n}function _3(n,e){e===void 0&&(e=y3);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return s}function w3(n){n===void 0&&(n={});var e=_3(null);return e.options=Ns({async:!0,ssr:!1},n),e}var fk=function(n){var e=n.sideCar,t=dk(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,Ns({},t))};fk.isSideCarExport=!0;function E3(n,e){return n.useMedium(e),fk}var A3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function b3(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=A3();return e&&n.setAttribute("nonce",e),n}function S3(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function T3(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var C3=function(){var n=0,e=null;return{add:function(t){n==0&&(e=b3())&&(S3(e,t),T3(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},x3=function(){var n=C3();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},pk=function(){var n=x3(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},R3=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},pc=new WeakMap,Jm=new WeakMap,Zm={},I0=0,mk=function(n){return n&&(n.host||mk(n.parentNode))},P3=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=mk(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},I3=function(n,e,t,r){var s=P3(e,Array.isArray(n)?n:[n]);Zm[t]||(Zm[t]=new WeakMap);var i=Zm[t],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),g=m!==null&&m!=="false",y=(pc.get(p)||0)+1,w=(i.get(p)||0)+1;pc.set(p,y),i.set(p,w),o.push(p),y===1&&g&&Jm.set(p,!0),w===1&&p.setAttribute(t,"true"),g||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return u(e),a.clear(),I0++,function(){o.forEach(function(f){var p=pc.get(f)-1,m=i.get(f)-1;pc.set(f,p),i.set(f,m),p||(Jm.has(f)||f.removeAttribute(r),Jm.delete(f)),m||f.removeAttribute(t)}),I0--,I0||(pc=new WeakMap,pc=new WeakMap,Jm=new WeakMap,Zm={})}},k3=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=R3(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),I3(r,s,t,"aria-hidden")):function(){return null}};const pa={asChild:{type:"boolean"}},L3={width:{type:"string",className:"rt-r-w",customProperties:["--width"],responsive:!0},minWidth:{type:"string",className:"rt-r-min-w",customProperties:["--min-width"],responsive:!0},maxWidth:{type:"string",className:"rt-r-max-w",customProperties:["--max-width"],responsive:!0}},M3={height:{type:"string",className:"rt-r-h",customProperties:["--height"],responsive:!0},minHeight:{type:"string",className:"rt-r-min-h",customProperties:["--min-height"],responsive:!0},maxHeight:{type:"string",className:"rt-r-max-h",customProperties:["--max-height"],responsive:!0}},Zb=["gray","gold","bronze","brown","yellow","amber","orange","tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","lime","mint","sky"],N3=["auto","gray","mauve","slate","sage","olive","sand"],gk={color:{type:"enum",values:Zb,default:void 0}},eS={color:{type:"enum",values:Zb,default:""}},Yy={highContrast:{type:"boolean",className:"rt-high-contrast",default:void 0}},D3=["normal","start","end","both"],vk={trim:{type:"enum",className:"rt-r-lt",values:D3,responsive:!0}},O3=["left","center","right"],F3={align:{type:"enum",className:"rt-r-ta",values:O3,responsive:!0}},V3=["wrap","nowrap","pretty","balance"],tS={wrap:{type:"enum",className:"rt-r-tw",values:V3,responsive:!0}},nS={truncate:{type:"boolean",className:"rt-truncate"}},j3=["light","regular","medium","bold"],yk={weight:{type:"enum",className:"rt-r-weight",values:j3,responsive:!0}},rS=["initial","xs","sm","md","lg","xl"];function _k(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Dd(n){return typeof n=="object"&&Object.keys(n).some(e=>rS.includes(e))}function B3({className:n,customProperties:e,...t}){const r=wk({allowArbitraryValues:!0,className:n,...t}),s=U3({customProperties:e,...t});return[r,s]}function wk({allowArbitraryValues:n,value:e,className:t,propValues:r,parseValue:s=i=>i}){const i=[];if(e){if(typeof e=="string"&&r.includes(e))return xC(t,e,s);if(Dd(e)){const o=e;for(const a in o){if(!_k(o,a)||!rS.includes(a))continue;const l=o[a];if(l!==void 0){if(r.includes(l)){const c=xC(t,l,s),u=a==="initial"?c:`${a}:${c}`;i.push(u)}else if(n){const c=a==="initial"?t:`${a}:${t}`;i.push(c)}}}return i.join(" ")}if(n)return t}}function xC(n,e,t){const r=n?"-":"",s=t(e),i=s==null?void 0:s.startsWith("-"),o=i?"-":"",a=i?s==null?void 0:s.substring(1):s;return`${o}${n}${r}${a}`}function U3({customProperties:n,value:e,propValues:t,parseValue:r=s=>s}){let s={};if(!(!e||typeof e=="string"&&t.includes(e))){if(typeof e=="string"&&(s=Object.fromEntries(n.map(i=>[i,e]))),Dd(e)){const i=e;for(const o in i){if(!_k(i,o)||!rS.includes(o))continue;const a=i[o];if(!t.includes(a))for(const l of n)s={[o==="initial"?l:`${l}-${o}`]:a,...s}}}for(const i in s){const o=s[i];o!==void 0&&(s[i]=r(o))}return s}}function RC(...n){let e={};for(const t of n)t&&(e={...e,...t});return Object.keys(e).length?e:void 0}function $3(...n){return Object.assign({},...n)}function Ji(n,...e){let t,r;const s={...n},i=$3(...e);for(const o in i){let a=s[o];const l=i[o];if(l.default!==void 0&&a===void 0&&(a=l.default),l.type==="enum"&&![l.default,...l.values].includes(a)&&!Dd(a)&&(a=l.default),s[o]=a,"className"in l&&l.className){delete s[o];const c="responsive"in l;if(!a||Dd(a)&&!c)continue;if(Dd(a)&&(l.default!==void 0&&a.initial===void 0&&(a.initial=l.default),l.type==="enum"&&([l.default,...l.values].includes(a.initial)||(a.initial=l.default))),l.type==="enum"){const u=wk({allowArbitraryValues:!1,value:a,className:l.className,propValues:l.values,parseValue:l.parseValue});t=An(t,u);continue}if(l.type==="string"||l.type==="enum | string"){const u=l.type==="string"?[]:l.values,[f,p]=B3({className:l.className,customProperties:l.customProperties,propValues:u,parseValue:l.parseValue,value:a});r=RC(r,p),t=An(t,f);continue}if(l.type==="boolean"&&a){t=An(t,l.className);continue}}}return s.className=An(t,n.className),s.style=RC(r,n.style),s}const ba=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],tc={m:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:ba,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},z3=["span","div","label","p"],H3=["1","2","3","4","5","6","7","8","9"],W3={as:{type:"enum",values:z3,default:"span"},...pa,size:{type:"enum",className:"rt-r-size",values:H3,responsive:!0},...yk,...F3,...vk,...nS,...tS,...gk,...Yy},sS=A.forwardRef((n,e)=>{const{children:t,className:r,asChild:s,as:i="span",color:o,...a}=Ji(n,W3,tc);return A.createElement(wr,{"data-accent-color":o,...a,ref:e,className:An("rt-Text",r)},s?t:A.createElement(i,null,t))});sS.displayName="Text";const G3=["top","right","bottom","left"],Zo=Math.min,pr=Math.max,Vv=Math.round,eg=Math.floor,ea=n=>({x:n,y:n}),q3={left:"right",right:"left",bottom:"top",top:"bottom"},K3={start:"end",end:"start"};function Zw(n,e,t){return pr(n,Zo(e,t))}function Wi(n,e){return typeof n=="function"?n(e):n}function Gi(n){return n.split("-")[0]}function wh(n){return n.split("-")[1]}function iS(n){return n==="x"?"y":"x"}function oS(n){return n==="y"?"height":"width"}function ta(n){return["top","bottom"].includes(Gi(n))?"y":"x"}function aS(n){return iS(ta(n))}function X3(n,e,t){t===void 0&&(t=!1);const r=wh(n),s=aS(n),i=oS(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=jv(o)),[o,jv(o)]}function Y3(n){const e=jv(n);return[eE(n),e,eE(e)]}function eE(n){return n.replace(/start|end/g,e=>K3[e])}function Q3(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function J3(n,e,t,r){const s=wh(n);let i=Q3(Gi(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(eE)))),i}function jv(n){return n.replace(/left|right|bottom|top/g,e=>q3[e])}function Z3(n){return{top:0,right:0,bottom:0,left:0,...n}}function Ek(n){return typeof n!="number"?Z3(n):{top:n,right:n,bottom:n,left:n}}function Bv(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function PC(n,e,t){let{reference:r,floating:s}=n;const i=ta(e),o=aS(e),a=oS(o),l=Gi(e),c=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(wh(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const e4=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:f}=PC(c,r,l),p=r,m={},g=0;for(let y=0;y<a.length;y++){const{name:w,fn:v}=a[y],{x:E,y:S,data:R,reset:O}=await v({x:u,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});u=E??u,f=S??f,m={...m,[w]:{...m[w],...R}},O&&g<=50&&(g++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):O.rects),{x:u,y:f}=PC(c,p,l)),y=-1)}return{x:u,y:f,placement:p,strategy:s,middlewareData:m}};async function cf(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Wi(e,n),g=Ek(m),w=a[p?f==="floating"?"reference":"floating":f],v=Bv(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},O=Bv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:S,strategy:l}):E);return{top:(v.top-O.top+g.top)/R.y,bottom:(O.bottom-v.bottom+g.bottom)/R.y,left:(v.left-O.left+g.left)/R.x,right:(O.right-v.right+g.right)/R.x}}const t4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Wi(n,e)||{};if(c==null)return{};const f=Ek(u),p={x:t,y:r},m=aS(s),g=oS(m),y=await o.getDimensions(c),w=m==="y",v=w?"top":"left",E=w?"bottom":"right",S=w?"clientHeight":"clientWidth",R=i.reference[g]+i.reference[m]-p[m]-i.floating[g],O=p[m]-i.reference[m],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=j?j[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(j)))&&(C=a.floating[S]||i.floating[g]);const T=R/2-O/2,P=C/2-y[g]/2-1,M=Zo(f[v],P),F=Zo(f[E],P),V=M,D=C-y[g]-F,z=C/2-y[g]/2+T,$=Zw(V,z,D),W=!l.arrow&&wh(s)!=null&&z!==$&&i.reference[g]/2-(z<V?M:F)-y[g]/2<0,U=W?z<V?z-V:z-D:0;return{[m]:p[m]+U,data:{[m]:$,centerOffset:z-$-U,...W&&{alignmentOffset:U}},reset:W}}}),n4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...w}=Wi(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const v=Gi(s),E=ta(a),S=Gi(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(S||!y?[jv(a)]:Y3(a)),j=g!=="none";!p&&j&&O.push(...J3(a,y,g,R));const C=[a,...O],T=await cf(e,w),P=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&P.push(T[v]),f){const z=X3(s,o,R);P.push(T[z[0]],T[z[1]])}if(M=[...M,{placement:s,overflows:P}],!P.every(z=>z<=0)){var F,V;const z=(((F=i.flip)==null?void 0:F.index)||0)+1,$=C[z];if($)return{data:{index:z,overflows:M},reset:{placement:$}};let W=(V=M.filter(U=>U.overflows[0]<=0).sort((U,B)=>U.overflows[1]-B.overflows[1])[0])==null?void 0:V.placement;if(!W)switch(m){case"bestFit":{var D;const U=(D=M.filter(B=>{if(j){const H=ta(B.placement);return H===E||H==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(H=>H>0).reduce((H,X)=>H+X,0)]).sort((B,H)=>B[1]-H[1])[0])==null?void 0:D[0];U&&(W=U);break}case"initialPlacement":W=a;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function IC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function kC(n){return G3.some(e=>n[e]>=0)}const r4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Wi(n,e);switch(r){case"referenceHidden":{const i=await cf(e,{...s,elementContext:"reference"}),o=IC(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:kC(o)}}}case"escaped":{const i=await cf(e,{...s,altBoundary:!0}),o=IC(i,t.floating);return{data:{escapedOffsets:o,escaped:kC(o)}}}default:return{}}}}};async function s4(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Gi(t),a=wh(t),l=ta(t)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=Wi(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const i4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await s4(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},o4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y:E}=w;return{x:v,y:E}}},...l}=Wi(n,e),c={x:t,y:r},u=await cf(e,l),f=ta(Gi(s)),p=iS(f);let m=c[p],g=c[f];if(i){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",E=m+u[w],S=m-u[v];m=Zw(E,m,S)}if(o){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",E=g+u[w],S=g-u[v];g=Zw(E,g,S)}const y=a.fn({...e,[p]:m,[f]:g});return{...y,data:{x:y.x-t,y:y.y-r,enabled:{[p]:i,[f]:o}}}}}},a4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Wi(n,e),u={x:t,y:r},f=ta(s),p=iS(f);let m=u[p],g=u[f];const y=Wi(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const S=p==="y"?"height":"width",R=i.reference[p]-i.floating[S]+w.mainAxis,O=i.reference[p]+i.reference[S]-w.mainAxis;m<R?m=R:m>O&&(m=O)}if(c){var v,E;const S=p==="y"?"width":"height",R=["top","left"].includes(Gi(s)),O=i.reference[f]-i.floating[S]+(R&&((v=o.offset)==null?void 0:v[f])||0)+(R?0:w.crossAxis),j=i.reference[f]+i.reference[S]+(R?0:((E=o.offset)==null?void 0:E[f])||0)-(R?w.crossAxis:0);g<O?g=O:g>j&&(g=j)}return{[p]:m,[f]:g}}}},l4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Wi(n,e),u=await cf(e,c),f=Gi(s),p=wh(s),m=ta(s)==="y",{width:g,height:y}=i.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=f,w=p==="end"?"top":"bottom");const E=y-u.top-u.bottom,S=g-u.left-u.right,R=Zo(y-u[w],E),O=Zo(g-u[v],S),j=!e.middlewareData.shift;let C=R,T=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=E),j&&!p){const M=pr(u.left,0),F=pr(u.right,0),V=pr(u.top,0),D=pr(u.bottom,0);m?T=g-2*(M!==0||F!==0?M+F:pr(u.left,u.right)):C=y-2*(V!==0||D!==0?V+D:pr(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:C});const P=await o.getDimensions(a.floating);return g!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function Qy(){return typeof window<"u"}function Eh(n){return Ak(n)?(n.nodeName||"").toLowerCase():"#document"}function yr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function qs(n){var e;return(e=(Ak(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Ak(n){return Qy()?n instanceof Node||n instanceof yr(n).Node:!1}function us(n){return Qy()?n instanceof Element||n instanceof yr(n).Element:!1}function $s(n){return Qy()?n instanceof HTMLElement||n instanceof yr(n).HTMLElement:!1}function LC(n){return!Qy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof yr(n).ShadowRoot}function im(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=hs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function c4(n){return["table","td","th"].includes(Eh(n))}function Jy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function lS(n){const e=cS(),t=us(n)?hs(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function u4(n){let e=na(n);for(;$s(e)&&!sh(e);){if(lS(e))return e;if(Jy(e))return null;e=na(e)}return null}function cS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sh(n){return["html","body","#document"].includes(Eh(n))}function hs(n){return yr(n).getComputedStyle(n)}function Zy(n){return us(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function na(n){if(Eh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||LC(n)&&n.host||qs(n);return LC(e)?e.host:e}function bk(n){const e=na(n);return sh(e)?n.ownerDocument?n.ownerDocument.body:n.body:$s(e)&&im(e)?e:bk(e)}function uf(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=bk(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=yr(s);if(i){const a=tE(o);return e.concat(o,o.visualViewport||[],im(s)?s:[],a&&t?uf(a):[])}return e.concat(s,uf(s,[],t))}function tE(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Sk(n){const e=hs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=$s(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=Vv(t)!==i||Vv(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function uS(n){return us(n)?n:n.contextElement}function qc(n){const e=uS(n);if(!$s(e))return ea(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=Sk(e);let o=(i?Vv(t.width):t.width)/r,a=(i?Vv(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const h4=ea(0);function Tk(n){const e=yr(n);return!cS()||!e.visualViewport?h4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function d4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==yr(n)?!1:e}function Wl(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=uS(n);let o=ea(1);e&&(r?us(r)&&(o=qc(r)):o=qc(n));const a=d4(i,t,r)?Tk(i):ea(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const p=yr(i),m=r&&us(r)?yr(r):r;let g=p,y=tE(g);for(;y&&r&&m!==g;){const w=qc(y),v=y.getBoundingClientRect(),E=hs(y),S=v.left+(y.clientLeft+parseFloat(E.paddingLeft))*w.x,R=v.top+(y.clientTop+parseFloat(E.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=S,c+=R,g=yr(y),y=tE(g)}}return Bv({width:u,height:f,x:l,y:c})}function f4(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=qs(r),a=e?Jy(e.floating):!1;if(r===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},c=ea(1);const u=ea(0),f=$s(r);if((f||!f&&!i)&&((Eh(r)!=="body"||im(o))&&(l=Zy(r)),$s(r))){const p=Wl(r);c=qc(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function p4(n){return Array.from(n.getClientRects())}function nE(n,e){const t=Zy(n).scrollLeft;return e?e.left+t:Wl(qs(n)).left+t}function m4(n){const e=qs(n),t=Zy(n),r=n.ownerDocument.body,s=pr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=pr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+nE(n);const a=-t.scrollTop;return hs(r).direction==="rtl"&&(o+=pr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function g4(n,e){const t=yr(n),r=qs(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=cS();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function v4(n,e){const t=Wl(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=$s(n)?qc(n):ea(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function MC(n,e,t){let r;if(e==="viewport")r=g4(n,t);else if(e==="document")r=m4(qs(n));else if(us(e))r=v4(e,t);else{const s=Tk(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Bv(r)}function Ck(n,e){const t=na(n);return t===e||!us(t)||sh(t)?!1:hs(t).position==="fixed"||Ck(t,e)}function y4(n,e){const t=e.get(n);if(t)return t;let r=uf(n,[],!1).filter(a=>us(a)&&Eh(a)!=="body"),s=null;const i=hs(n).position==="fixed";let o=i?na(n):n;for(;us(o)&&!sh(o);){const a=hs(o),l=lS(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||im(o)&&!l&&Ck(n,o))?r=r.filter(u=>u!==o):s=a,o=na(o)}return e.set(n,r),r}function _4(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?Jy(e)?[]:y4(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=MC(e,u,s);return c.top=pr(f.top,c.top),c.right=Zo(f.right,c.right),c.bottom=Zo(f.bottom,c.bottom),c.left=pr(f.left,c.left),c},MC(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function w4(n){const{width:e,height:t}=Sk(n);return{width:e,height:t}}function E4(n,e,t){const r=$s(e),s=qs(e),i=t==="fixed",o=Wl(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ea(0);if(r||!r&&!i)if((Eh(e)!=="body"||im(s))&&(a=Zy(e)),r){const m=Wl(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=nE(s));let c=0,u=0;if(s&&!r&&!i){const m=s.getBoundingClientRect();u=m.top+a.scrollTop,c=m.left+a.scrollLeft-nE(s,m)}const f=o.left+a.scrollLeft-l.x-c,p=o.top+a.scrollTop-l.y-u;return{x:f,y:p,width:o.width,height:o.height}}function k0(n){return hs(n).position==="static"}function NC(n,e){if(!$s(n)||hs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return qs(n)===t&&(t=t.ownerDocument.body),t}function xk(n,e){const t=yr(n);if(Jy(n))return t;if(!$s(n)){let s=na(n);for(;s&&!sh(s);){if(us(s)&&!k0(s))return s;s=na(s)}return t}let r=NC(n,e);for(;r&&c4(r)&&k0(r);)r=NC(r,e);return r&&sh(r)&&k0(r)&&!lS(r)?t:r||u4(n)||t}const A4=async function(n){const e=this.getOffsetParent||xk,t=this.getDimensions,r=await t(n.floating);return{reference:E4(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function b4(n){return hs(n).direction==="rtl"}const S4={convertOffsetParentRelativeRectToViewportRelativeRect:f4,getDocumentElement:qs,getClippingRect:_4,getOffsetParent:xk,getElementRects:A4,getClientRects:p4,getDimensions:w4,getScale:qc,isElement:us,isRTL:b4};function T4(n,e){let t=null,r;const s=qs(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:f,height:p}=n.getBoundingClientRect();if(a||e(),!f||!p)return;const m=eg(u),g=eg(s.clientWidth-(c+f)),y=eg(s.clientHeight-(u+p)),w=eg(c),E={rootMargin:-m+"px "+-g+"px "+-y+"px "+-w+"px",threshold:pr(0,Zo(1,l))||1};let S=!0;function R(O){const j=O[0].intersectionRatio;if(j!==l){if(!S)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{t=new IntersectionObserver(R,{...E,root:s.ownerDocument})}catch{t=new IntersectionObserver(R,E)}t.observe(n)}return o(!0),i}function C4(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=uS(n),u=s||i?[...c?uf(c):[],...uf(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",t,{passive:!0}),i&&v.addEventListener("resize",t)});const f=c&&a?T4(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[E]=v;E&&E.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let g,y=l?Wl(n):null;l&&w();function w(){const v=Wl(n);y&&(v.x!==y.x||v.y!==y.y||v.width!==y.width||v.height!==y.height)&&t(),y=v,g=requestAnimationFrame(w)}return t(),()=>{var v;u.forEach(E=>{s&&E.removeEventListener("scroll",t),i&&E.removeEventListener("resize",t)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const x4=i4,R4=o4,P4=n4,I4=l4,k4=r4,DC=t4,L4=a4,M4=(n,e,t)=>{const r=new Map,s={platform:S4,...t},i={...s.platform,_c:r};return e4(n,e,{...s,platform:i})};var kg=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Uv(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Uv(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!Uv(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function Rk(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function OC(n,e){const t=Rk(n);return Math.round(e*t)/t}function L0(n){const e=A.useRef(n);return kg(()=>{e.current=n}),e}function N4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=A.useState(r);Uv(p,r)||m(r);const[g,y]=A.useState(null),[w,v]=A.useState(null),E=A.useCallback(B=>{B!==j.current&&(j.current=B,y(B))},[]),S=A.useCallback(B=>{B!==C.current&&(C.current=B,v(B))},[]),R=i||g,O=o||w,j=A.useRef(null),C=A.useRef(null),T=A.useRef(u),P=l!=null,M=L0(l),F=L0(s),V=L0(c),D=A.useCallback(()=>{if(!j.current||!C.current)return;const B={placement:e,strategy:t,middleware:p};F.current&&(B.platform=F.current),M4(j.current,C.current,B).then(H=>{const X={...H,isPositioned:V.current!==!1};z.current&&!Uv(T.current,X)&&(T.current=X,Wy.flushSync(()=>{f(X)}))})},[p,e,t,F,V]);kg(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[c]);const z=A.useRef(!1);kg(()=>(z.current=!0,()=>{z.current=!1}),[]),kg(()=>{if(R&&(j.current=R),O&&(C.current=O),R&&O){if(M.current)return M.current(R,O,D);D()}},[R,O,D,M,P]);const $=A.useMemo(()=>({reference:j,floating:C,setReference:E,setFloating:S}),[E,S]),W=A.useMemo(()=>({reference:R,floating:O}),[R,O]),U=A.useMemo(()=>{const B={position:t,left:0,top:0};if(!W.floating)return B;const H=OC(W.floating,u.x),X=OC(W.floating,u.y);return a?{...B,transform:"translate("+H+"px, "+X+"px)",...Rk(W.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:H,top:X}},[t,a,W.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:D,refs:$,elements:W,floatingStyles:U}),[u,D,$,W,U])}const D4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?DC({element:r.current,padding:s}).fn(t):{}:r?DC({element:r,padding:s}).fn(t):{}}}},O4=(n,e)=>({...x4(n),options:[n,e]}),F4=(n,e)=>({...R4(n),options:[n,e]}),V4=(n,e)=>({...L4(n),options:[n,e]}),j4=(n,e)=>({...P4(n),options:[n,e]}),B4=(n,e)=>({...I4(n),options:[n,e]}),U4=(n,e)=>({...k4(n),options:[n,e]}),$4=(n,e)=>({...D4(n),options:[n,e]});var z4="Arrow",Pk=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return x.jsx(vt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});Pk.displayName=z4;var H4=Pk;function W4(n){const[e,t]=A.useState(void 0);return Us(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var hS="Popper",[Ik,e_]=sm(hS),[G4,kk]=Ik(hS),Lk=n=>{const{__scopePopper:e,children:t}=n,[r,s]=A.useState(null);return x.jsx(G4,{scope:e,anchor:r,onAnchorChange:s,children:t})};Lk.displayName=hS;var Mk="PopperAnchor",Nk=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=kk(Mk,t),o=A.useRef(null),a=xt(e,o);return A.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:x.jsx(vt.div,{...s,ref:a})});Nk.displayName=Mk;var dS="PopperContent",[q4,K4]=Ik(dS),Dk=A.forwardRef((n,e)=>{var ce,Je,Ze,ke,Zn,br;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:g,...y}=n,w=kk(dS,t),[v,E]=A.useState(null),S=xt(e,Se=>E(Se)),[R,O]=A.useState(null),j=W4(R),C=(j==null?void 0:j.width)??0,T=(j==null?void 0:j.height)??0,P=r+(i!=="center"?"-"+i:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(c)?c:[c],V=F.length>0,D={padding:M,boundary:F.filter(Y4),altBoundary:V},{refs:z,floatingStyles:$,placement:W,isPositioned:U,middlewareData:B}=N4({strategy:"fixed",placement:P,whileElementsMounted:(...Se)=>C4(...Se,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[O4({mainAxis:s+T,alignmentAxis:o}),l&&F4({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?V4():void 0,...D}),l&&j4({...D}),B4({...D,apply:({elements:Se,rects:We,availableWidth:ht,availableHeight:st})=>{const{width:ds,height:Xs}=We.reference,Ys=Se.floating.style;Ys.setProperty("--radix-popper-available-width",`${ht}px`),Ys.setProperty("--radix-popper-available-height",`${st}px`),Ys.setProperty("--radix-popper-anchor-width",`${ds}px`),Ys.setProperty("--radix-popper-anchor-height",`${Xs}px`)}}),R&&$4({element:R,padding:a}),Q4({arrowWidth:C,arrowHeight:T}),p&&U4({strategy:"referenceHidden",...D})]}),[H,X]=Vk(W),ne=Qn(g);Us(()=>{U&&(ne==null||ne())},[U,ne]);const J=(ce=B.arrow)==null?void 0:ce.x,re=(Je=B.arrow)==null?void 0:Je.y,me=((Ze=B.arrow)==null?void 0:Ze.centerOffset)!==0,[Fe,be]=A.useState();return Us(()=>{v&&be(window.getComputedStyle(v).zIndex)},[v]),x.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:U?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Fe,"--radix-popper-transform-origin":[(ke=B.transformOrigin)==null?void 0:ke.x,(Zn=B.transformOrigin)==null?void 0:Zn.y].join(" "),...((br=B.hide)==null?void 0:br.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:x.jsx(q4,{scope:t,placedSide:H,onArrowChange:O,arrowX:J,arrowY:re,shouldHideArrow:me,children:x.jsx(vt.div,{"data-side":H,"data-align":X,...y,ref:S,style:{...y.style,animation:U?void 0:"none"}})})})});Dk.displayName=dS;var Ok="PopperArrow",X4={top:"bottom",right:"left",bottom:"top",left:"right"},Fk=A.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=K4(Ok,r),o=X4[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(H4,{...s,ref:t,style:{...s.style,display:"block"}})})});Fk.displayName=Ok;function Y4(n){return n!==null}var Q4=n=>({name:"transformOrigin",options:n,fn(e){var w,v,E;const{placement:t,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=Vk(t),f={start:"0%",center:"50%",end:"100%"}[u],p=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,m=(((E=s.arrow)==null?void 0:E.y)??0)+l/2;let g="",y="";return c==="bottom"?(g=o?f:`${p}px`,y=`${-l}px`):c==="top"?(g=o?f:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,y=o?f:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,y=o?f:`${m}px`),{data:{x:g,y}}}});function Vk(n){const[e,t="center"]=n.split("-");return[e,t]}var J4=Lk,jk=Nk,Bk=Dk,Uk=Fk,[t_,Iq]=sm("Tooltip",[e_]),fS=e_(),$k="TooltipProvider",Z4=700,FC="tooltip.open",[eB,zk]=t_($k),Hk=n=>{const{__scopeTooltip:e,delayDuration:t=Z4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,[o,a]=A.useState(!0),l=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),x.jsx(eB,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:A.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Hk.displayName=$k;var Wk="Tooltip",[kq,n_]=t_(Wk),rE="TooltipTrigger",tB=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=n_(rE,t),i=zk(rE,t),o=fS(t),a=A.useRef(null),l=xt(e,a,s.onTriggerChange),c=A.useRef(!1),u=A.useRef(!1),f=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),x.jsx(jk,{asChild:!0,...o,children:x.jsx(vt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:he(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:he(n.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:he(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:he(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:he(n.onBlur,s.onClose),onClick:he(n.onClick,s.onClose)})})});tB.displayName=rE;var nB="TooltipPortal",[Lq,rB]=t_(nB,{forceMount:void 0}),ih="TooltipContent",sB=A.forwardRef((n,e)=>{const t=rB(ih,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=n_(ih,n.__scopeTooltip);return x.jsx(hk,{present:r||o.open,children:o.disableHoverableContent?x.jsx(Gk,{side:s,...i,ref:e}):x.jsx(iB,{side:s,...i,ref:e})})}),iB=A.forwardRef((n,e)=>{const t=n_(ih,n.__scopeTooltip),r=zk(ih,n.__scopeTooltip),s=A.useRef(null),i=xt(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:f}=r,p=A.useCallback(()=>{a(null),f(!1)},[f]),m=A.useCallback((g,y)=>{const w=g.currentTarget,v={x:g.clientX,y:g.clientY},E=cB(v,w.getBoundingClientRect()),S=uB(v,E),R=hB(y.getBoundingClientRect()),O=fB([...S,...R]);a(O),f(!0)},[f]);return A.useEffect(()=>()=>p(),[p]),A.useEffect(()=>{if(l&&u){const g=w=>m(w,u),y=w=>m(w,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",y)}}},[l,u,m,p]),A.useEffect(()=>{if(o){const g=y=>{const w=y.target,v={x:y.clientX,y:y.clientY},E=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),S=!dB(v,o);E?p():S&&(p(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,p]),x.jsx(Gk,{...n,ref:i})}),[oB,aB]=t_(Wk,{isInside:!1}),Gk=A.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,l=n_(ih,t),c=fS(t),{onClose:u}=l;return A.useEffect(()=>(document.addEventListener(FC,u),()=>document.removeEventListener(FC,u)),[u]),A.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),x.jsx(ak,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:x.jsxs(Bk,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(nk,{children:r}),x.jsx(oB,{scope:t,isInside:!0,children:x.jsx(Wj,{id:l.contentId,role:"tooltip",children:s||r})})]})})});sB.displayName=ih;var qk="TooltipArrow",lB=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=fS(t);return aB(qk,t).isInside?null:x.jsx(Uk,{...s,...r,ref:e})});lB.displayName=qk;function cB(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function uB(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function hB(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function dB(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function fB(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),pB(e)}function pB(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var mB=Hk,Kk=A.createContext(void 0),gB=n=>{const{dir:e,children:t}=n;return x.jsx(Kk.Provider,{value:e,children:t})};function pS(n){const e=A.useContext(Kk);return n||e||"ltr"}function vB(n){switch(n){case"tomato":case"red":case"ruby":case"crimson":case"pink":case"plum":case"purple":case"violet":return"mauve";case"iris":case"indigo":case"blue":case"sky":case"cyan":return"slate";case"teal":case"jade":case"mint":case"green":return"sage";case"grass":case"lime":return"olive";case"yellow":case"amber":case"orange":case"brown":case"gold":case"bronze":return"sand";case"gray":return"gray"}}const Xk=["none","small","medium","large","full"],Yk={radius:{type:"enum",values:Xk,default:void 0}},yB=["inherit","light","dark"],_B=["solid","translucent"],wB=["90%","95%","100%","105%","110%"],fr={...pa,hasBackground:{type:"boolean",default:!0},appearance:{type:"enum",values:yB,default:"inherit"},accentColor:{type:"enum",values:Zb,default:"indigo"},grayColor:{type:"enum",values:N3,default:"auto"},panelBackground:{type:"enum",values:_B,default:"translucent"},radius:{type:"enum",values:Xk,default:"medium"},scaling:{type:"enum",values:wB,default:"100%"}},mc=()=>{},sE=A.createContext(void 0),Qk=A.forwardRef((n,e)=>A.useContext(sE)===void 0?A.createElement(mB,{delayDuration:200},A.createElement(gB,{dir:"ltr"},A.createElement(Jk,{...n,ref:e}))):A.createElement(mS,{...n,ref:e}));Qk.displayName="Theme";const Jk=A.forwardRef((n,e)=>{const{appearance:t=fr.appearance.default,accentColor:r=fr.accentColor.default,grayColor:s=fr.grayColor.default,panelBackground:i=fr.panelBackground.default,radius:o=fr.radius.default,scaling:a=fr.scaling.default,hasBackground:l=fr.hasBackground.default,...c}=n,[u,f]=A.useState(t);A.useEffect(()=>f(t),[t]);const[p,m]=A.useState(r);A.useEffect(()=>m(r),[r]);const[g,y]=A.useState(s);A.useEffect(()=>y(s),[s]);const[w,v]=A.useState(i);A.useEffect(()=>v(i),[i]);const[E,S]=A.useState(o);A.useEffect(()=>S(o),[o]);const[R,O]=A.useState(a);return A.useEffect(()=>O(a),[a]),A.createElement(mS,{...c,ref:e,isRoot:!0,hasBackground:l,appearance:u,accentColor:p,grayColor:g,panelBackground:w,radius:E,scaling:R,onAppearanceChange:f,onAccentColorChange:m,onGrayColorChange:y,onPanelBackgroundChange:v,onRadiusChange:S,onScalingChange:O})});Jk.displayName="ThemeRoot";const mS=A.forwardRef((n,e)=>{const t=A.useContext(sE),{asChild:r,isRoot:s,hasBackground:i,appearance:o=(t==null?void 0:t.appearance)??fr.appearance.default,accentColor:a=(t==null?void 0:t.accentColor)??fr.accentColor.default,grayColor:l=(t==null?void 0:t.resolvedGrayColor)??fr.grayColor.default,panelBackground:c=(t==null?void 0:t.panelBackground)??fr.panelBackground.default,radius:u=(t==null?void 0:t.radius)??fr.radius.default,scaling:f=(t==null?void 0:t.scaling)??fr.scaling.default,onAppearanceChange:p=mc,onAccentColorChange:m=mc,onGrayColorChange:g=mc,onPanelBackgroundChange:y=mc,onRadiusChange:w=mc,onScalingChange:v=mc,...E}=n,S=r?wr:"div",R=l==="auto"?vB(a):l,O=n.appearance==="light"||n.appearance==="dark",j=i===void 0?s||O:i;return A.createElement(sE.Provider,{value:A.useMemo(()=>({appearance:o,accentColor:a,grayColor:l,resolvedGrayColor:R,panelBackground:c,radius:u,scaling:f,onAppearanceChange:p,onAccentColorChange:m,onGrayColorChange:g,onPanelBackgroundChange:y,onRadiusChange:w,onScalingChange:v}),[o,a,l,R,c,u,f,p,m,g,y,w,v])},A.createElement(S,{"data-is-root-theme":s?"true":"false","data-accent-color":a,"data-gray-color":R,"data-has-background":j?"true":"false","data-panel-background":c,"data-radius":u,"data-scaling":f,ref:e,...E,className:An("radix-themes",{light:o==="light",dark:o==="dark"},E.className)}))});mS.displayName="ThemeImpl";var gS="Avatar",[EB,Mq]=sm(gS),[AB,Zk]=EB(gS),eL=A.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=A.useState("idle");return x.jsx(AB,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:x.jsx(vt.span,{...r,ref:e})})});eL.displayName=gS;var tL="AvatarImage",nL=A.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,o=Zk(tL,t),a=SB(r),l=Qn(c=>{s(c),o.onImageLoadingStatusChange(c)});return Us(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?x.jsx(vt.img,{...i,ref:e,src:r}):null});nL.displayName=tL;var rL="AvatarFallback",bB=A.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=Zk(rL,t),[o,a]=A.useState(r===void 0);return A.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?x.jsx(vt.span,{...s,ref:e}):null});bB.displayName=rL;function SB(n){const[e,t]=A.useState("idle");return Us(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,i=o=>()=>{r&&t(o)};return t("loading"),s.onload=i("loaded"),s.onerror=i("error"),s.src=n,()=>{r=!1}},[n]),e}var TB=eL,CB=nL;const xB=["1","2","3"],RB=["solid","soft","surface","outline"],PB={...pa,size:{type:"enum",className:"rt-r-size",values:xB,default:"1",responsive:!0},variant:{type:"enum",className:"rt-variant",values:RB,default:"soft"},...eS,...Yy,...Yk},iE=A.forwardRef((n,e)=>{const{asChild:t,className:r,color:s,radius:i,...o}=Ji(n,PB,tc);return A.createElement(t?wr:"span",{"data-accent-color":s,"data-radius":i,...o,ref:e,className:An("rt-reset","rt-Badge",r)})});iE.displayName="Badge";const oE=A.forwardRef((n,e)=>{const{asChild:t,children:r,className:s,...i}=n,o=t?wr:"blockquote";return A.createElement(sS,{asChild:!0,...i,ref:e,className:An("rt-Blockquote",s)},A.createElement(o,null,r))});oE.displayName="Blockquote";const Sa=["0","1","2","3","4","5","6","7","8","9"],IB={p:{type:"enum | string",className:"rt-r-p",customProperties:["--p"],values:Sa,responsive:!0},px:{type:"enum | string",className:"rt-r-px",customProperties:["--pl","--pr"],values:Sa,responsive:!0},py:{type:"enum | string",className:"rt-r-py",customProperties:["--pt","--pb"],values:Sa,responsive:!0},pt:{type:"enum | string",className:"rt-r-pt",customProperties:["--pt"],values:Sa,responsive:!0},pr:{type:"enum | string",className:"rt-r-pr",customProperties:["--pr"],values:Sa,responsive:!0},pb:{type:"enum | string",className:"rt-r-pb",customProperties:["--pb"],values:Sa,responsive:!0},pl:{type:"enum | string",className:"rt-r-pl",customProperties:["--pl"],values:Sa,responsive:!0}},M0=["visible","hidden","clip","scroll","auto"],kB=["static","relative","absolute","fixed","sticky"],Qh=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],LB=["0","1"],MB=["0","1"],NB={...IB,...L3,...M3,position:{type:"enum",className:"rt-r-position",values:kB,responsive:!0},inset:{type:"enum | string",className:"rt-r-inset",customProperties:["--inset"],values:Qh,responsive:!0},top:{type:"enum | string",className:"rt-r-top",customProperties:["--top"],values:Qh,responsive:!0},right:{type:"enum | string",className:"rt-r-right",customProperties:["--right"],values:Qh,responsive:!0},bottom:{type:"enum | string",className:"rt-r-bottom",customProperties:["--bottom"],values:Qh,responsive:!0},left:{type:"enum | string",className:"rt-r-left",customProperties:["--left"],values:Qh,responsive:!0},overflow:{type:"enum",className:"rt-r-overflow",values:M0,responsive:!0},overflowX:{type:"enum",className:"rt-r-ox",values:M0,responsive:!0},overflowY:{type:"enum",className:"rt-r-oy",values:M0,responsive:!0},flexBasis:{type:"string",className:"rt-r-fb",customProperties:["--flex-basis"],responsive:!0},flexShrink:{type:"enum | string",className:"rt-r-fs",customProperties:["--flex-shrink"],values:LB,responsive:!0},flexGrow:{type:"enum | string",className:"rt-r-fg",customProperties:["--flex-grow"],values:MB,responsive:!0},gridArea:{type:"string",className:"rt-r-ga",customProperties:["--grid-area"],responsive:!0},gridColumn:{type:"string",className:"rt-r-gc",customProperties:["--grid-column"],responsive:!0},gridColumnStart:{type:"string",className:"rt-r-gcs",customProperties:["--grid-column-start"],responsive:!0},gridColumnEnd:{type:"string",className:"rt-r-gce",customProperties:["--grid-column-end"],responsive:!0},gridRow:{type:"string",className:"rt-r-gr",customProperties:["--grid-row"],responsive:!0},gridRowStart:{type:"string",className:"rt-r-grs",customProperties:["--grid-row-start"],responsive:!0},gridRowEnd:{type:"string",className:"rt-r-gre",customProperties:["--grid-row-end"],responsive:!0}},DB=["1","2","3","4"],OB=["classic","solid","soft","surface","outline","ghost"],VC={...pa,size:{type:"enum",className:"rt-r-size",values:DB,default:"2",responsive:!0},variant:{type:"enum",className:"rt-variant",values:OB,default:"solid"},...eS,...Yy,...Yk,loading:{type:"boolean",className:"rt-loading",default:!1}},N0=["0","1","2","3","4","5","6","7","8","9"],FB={gap:{type:"enum | string",className:"rt-r-gap",customProperties:["--gap"],values:N0,responsive:!0},gapX:{type:"enum | string",className:"rt-r-cg",customProperties:["--column-gap"],values:N0,responsive:!0},gapY:{type:"enum | string",className:"rt-r-rg",customProperties:["--row-gap"],values:N0,responsive:!0}},VB=["div","span"],jB=["none","inline-flex","flex"],BB=["row","column","row-reverse","column-reverse"],UB=["start","center","end","baseline","stretch"],$B=["start","center","end","between"],zB=["nowrap","wrap","wrap-reverse"],HB={as:{type:"enum",values:VB,default:"div"},...pa,display:{type:"enum",className:"rt-r-display",values:jB,responsive:!0},direction:{type:"enum",className:"rt-r-fd",values:BB,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:UB,responsive:!0},justify:{type:"enum",className:"rt-r-jc",values:$B,parseValue:WB,responsive:!0},wrap:{type:"enum",className:"rt-r-fw",values:zB,responsive:!0},...FB};function WB(n){return n==="between"?"space-between":n}const oh=A.forwardRef((n,e)=>{const{className:t,asChild:r,as:s="div",...i}=Ji(n,HB,NB,tc);return A.createElement(r?wr:s,{...i,ref:e,className:An("rt-Flex",t)})});oh.displayName="Flex";const GB=["1","2","3"],qB={size:{type:"enum",className:"rt-r-size",values:GB,default:"2",responsive:!0},loading:{type:"boolean",default:!0}},sL=A.forwardRef((n,e)=>{const{className:t,children:r,loading:s,...i}=Ji(n,qB,tc);if(!s)return r;const o=A.createElement("span",{...i,ref:e,className:An("rt-Spinner",t)},A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}),A.createElement("span",{className:"rt-SpinnerLeaf"}));return r===void 0?o:A.createElement(oh,{asChild:!0,position:"relative",align:"center",justify:"center"},A.createElement("span",null,A.createElement("span",{"aria-hidden":!0,style:{display:"contents",visibility:"hidden"},inert:void 0},r),A.createElement(oh,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},A.createElement("span",null,o))))});sL.displayName="Spinner";function KB(n,e){if(n!==void 0)return typeof n=="string"?e(n):Object.fromEntries(Object.entries(n).map(([t,r])=>[t,e(r)]))}function XB(n){switch(n){case"1":return"1";case"2":case"3":return"2";case"4":return"3"}}const iL=A.forwardRef((n,e)=>{const{size:t=VC.size.default}=n,{className:r,children:s,asChild:i,color:o,radius:a,disabled:l=n.loading,...c}=Ji(n,VC,tc);return A.createElement(i?wr:"button",{"data-disabled":l||void 0,"data-accent-color":o,"data-radius":a,...c,ref:e,className:An("rt-reset","rt-BaseButton",r),disabled:l},n.loading?A.createElement(A.Fragment,null,A.createElement("span",{style:{display:"contents",visibility:"hidden"},"aria-hidden":!0},s),A.createElement(Jb,null,s),A.createElement(oh,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},A.createElement("span",null,A.createElement(sL,{size:KB(t,XB)})))):s)});iL.displayName="BaseButton";const Lg=A.forwardRef(({className:n,...e},t)=>A.createElement(iL,{...e,ref:t,className:An("rt-Button",n)}));Lg.displayName="Button";const YB=["1","2","3","4","5"],QB=["surface","classic","ghost"],JB={...pa,size:{type:"enum",className:"rt-r-size",values:YB,default:"1",responsive:!0},variant:{type:"enum",className:"rt-variant",values:QB,default:"surface"}},oL=A.forwardRef((n,e)=>{const{asChild:t,className:r,...s}=Ji(n,JB,tc);return A.createElement(t?wr:"div",{ref:e,...s,className:An("rt-reset","rt-BaseCard","rt-Card",r)})});oL.displayName="Card";function vS(n){const e=n+"CollectionProvider",[t,r]=sm(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:y}=m,w=ro.useRef(null),v=ro.useRef(new Map).current;return x.jsx(s,{scope:g,itemMap:v,collectionRef:w,children:y})};o.displayName=e;const a=n+"CollectionSlot",l=ro.forwardRef((m,g)=>{const{scope:y,children:w}=m,v=i(a,y),E=xt(g,v.collectionRef);return x.jsx(wr,{ref:E,children:w})});l.displayName=a;const c=n+"CollectionItemSlot",u="data-radix-collection-item",f=ro.forwardRef((m,g)=>{const{scope:y,children:w,...v}=m,E=ro.useRef(null),S=xt(g,E),R=i(c,y);return ro.useEffect(()=>(R.itemMap.set(E,{ref:E,...v}),()=>void R.itemMap.delete(E))),x.jsx(wr,{[u]:"",ref:S,children:w})});f.displayName=c;function p(m){const g=i(n+"CollectionConsumer",m);return ro.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((R,O)=>v.indexOf(R.ref.current)-v.indexOf(O.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},p,r]}var D0="rovingFocusGroup.onEntryFocus",ZB={bubbles:!1,cancelable:!0},r_="RovingFocusGroup",[aE,aL,eU]=vS(r_),[tU,s_]=sm(r_,[eU]),[nU,rU]=tU(r_),lL=A.forwardRef((n,e)=>x.jsx(aE.Provider,{scope:n.__scopeRovingFocusGroup,children:x.jsx(aE.Slot,{scope:n.__scopeRovingFocusGroup,children:x.jsx(sU,{...n,ref:e})})}));lL.displayName=r_;var sU=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=n,p=A.useRef(null),m=xt(e,p),g=pS(i),[y=null,w]=sk({prop:o,defaultProp:a,onChange:l}),[v,E]=A.useState(!1),S=Qn(c),R=aL(t),O=A.useRef(!1),[j,C]=A.useState(0);return A.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(D0,S),()=>T.removeEventListener(D0,S)},[S]),x.jsx(nU,{scope:t,orientation:r,dir:g,loop:s,currentTabStopId:y,onItemFocus:A.useCallback(T=>w(T),[w]),onItemShiftTab:A.useCallback(()=>E(!0),[]),onFocusableItemAdd:A.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:A.useCallback(()=>C(T=>T-1),[]),children:x.jsx(vt.div,{tabIndex:v||j===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:he(n.onMouseDown,()=>{O.current=!0}),onFocus:he(n.onFocus,T=>{const P=!O.current;if(T.target===T.currentTarget&&P&&!v){const M=new CustomEvent(D0,ZB);if(T.currentTarget.dispatchEvent(M),!M.defaultPrevented){const F=R().filter(W=>W.focusable),V=F.find(W=>W.active),D=F.find(W=>W.id===y),$=[V,D,...F].filter(Boolean).map(W=>W.ref.current);hL($,u)}}O.current=!1}),onBlur:he(n.onBlur,()=>E(!1))})})}),cL="RovingFocusGroupItem",uL=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,...o}=n,a=Ig(),l=i||a,c=rU(cL,t),u=c.currentTabStopId===l,f=aL(t),{onFocusableItemAdd:p,onFocusableItemRemove:m}=c;return A.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),x.jsx(aE.ItemSlot,{scope:t,id:l,focusable:r,active:s,children:x.jsx(vt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:he(n.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:he(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:he(n.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=aU(g,c.orientation,c.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=f().filter(E=>E.focusable).map(E=>E.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const E=v.indexOf(g.currentTarget);v=c.loop?lU(v,E+1):v.slice(E+1)}setTimeout(()=>hL(v))}})})})});uL.displayName=cL;var iU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oU(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function aU(n,e,t){const r=oU(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return iU[r]}function hL(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function lU(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var dL=lL,fL=uL;const cU=["1","2","3","4","5","6","7","8","9"],uU=["auto","always","hover","none"],hU={...pa,size:{type:"enum",className:"rt-r-size",values:cU,responsive:!0},...yk,...vk,...nS,...tS,underline:{type:"enum",className:"rt-underline",values:uU,default:"auto"},...eS,...Yy},Kt=A.forwardRef((n,e)=>{const{children:t,className:r,color:s,asChild:i,...o}=Ji(n,hU);return A.createElement(sS,{...o,"data-accent-color":s,ref:e,asChild:!0,className:An("rt-reset","rt-Link",r)},i?t:A.createElement("a",null,t))});Kt.displayName="Link";const dU=["horizontal","vertical"],fU=["1","2","3","4"],pU={orientation:{type:"enum",className:"rt-r-orientation",values:dU,default:"horizontal",responsive:!0},size:{type:"enum",className:"rt-r-size",values:fU,default:"1",responsive:!0},color:{...gk.color,default:"gray"},decorative:{type:"boolean",default:!0}},pL=A.forwardRef((n,e)=>{const{className:t,color:r,decorative:s,...i}=Ji(n,pU,tc);return A.createElement("span",{"data-accent-color":r,role:s?void 0:"separator",...i,ref:e,className:An("rt-Separator",t)})});pL.displayName="Separator";const mU={...pa,...nS,...tS},$v=A.forwardRef((n,e)=>{const{asChild:t,className:r,...s}=Ji(n,mU);return A.createElement(t?wr:"strong",{...s,ref:e,className:An("rt-Strong",r)})});$v.displayName="Strong";const jC="/assets/PortFolio-CXYOnYlH.png",BC="/assets/PortFolio%20-%20cartoon-C4WEmp8n.png";var mL={exports:{}},gU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vU=gU,yU=vU;function gL(){}function vL(){}vL.resetWarningCache=gL;var _U=function(){function n(r,s,i,o,a,l){if(l!==yU){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vL,resetWarningCache:gL};return t.PropTypes=t,t};mL.exports=_U();var wU=mL.exports;const ls=Jp(wU);var yL={},_L={},wL={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(typeof window<"u"){var a;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(a=window).gtag.apply(a,i)}},t=e;n.default=t})(wL);var EL={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function t(a){return a.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(l,c,u){return c>0&&c+l.length!==u.length&&l.search(e)>-1&&u.charAt(c-2)!==":"&&(u.charAt(c+l.length)!=="-"||u.charAt(c-1)==="-")&&u.charAt(c-1).search(/[^\s-]/)<0?l.toLowerCase():l.substr(1).search(/[A-Z]|\../)>-1?l:l.charAt(0).toUpperCase()+l.substr(1)})}function r(a){return typeof a=="string"&&a.indexOf("@")!==-1}var s="REDACTED (Potential Email Address)";function i(a){return r(a)?(console.warn("This arg looks like an email address, redacting."),s):a}function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=a||"";return l&&(u=t(a)),c&&(u=i(u)),u}})(EL);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.GA4=void 0;var e=o(wL),t=o(EL),r=["eventCategory","eventAction","eventLabel","eventValue","hitType"],s=["title","location"],i=["page","hitType"];function o(z){return z&&z.__esModule?z:{default:z}}function a(z,$){if(z==null)return{};var W=l(z,$),U,B;if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(z);for(B=0;B<H.length;B++)U=H[B],!($.indexOf(U)>=0)&&Object.prototype.propertyIsEnumerable.call(z,U)&&(W[U]=z[U])}return W}function l(z,$){if(z==null)return{};var W={},U=Object.keys(z),B,H;for(H=0;H<U.length;H++)B=U[H],!($.indexOf(B)>=0)&&(W[B]=z[B]);return W}function c(z){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},c(z)}function u(z){return m(z)||p(z)||E(z)||f()}function f(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(z){if(typeof Symbol<"u"&&z[Symbol.iterator]!=null||z["@@iterator"]!=null)return Array.from(z)}function m(z){if(Array.isArray(z))return S(z)}function g(z,$){var W=Object.keys(z);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(z);$&&(U=U.filter(function(B){return Object.getOwnPropertyDescriptor(z,B).enumerable})),W.push.apply(W,U)}return W}function y(z){for(var $=1;$<arguments.length;$++){var W=arguments[$]!=null?arguments[$]:{};$%2?g(Object(W),!0).forEach(function(U){P(z,U,W[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(W)):g(Object(W)).forEach(function(U){Object.defineProperty(z,U,Object.getOwnPropertyDescriptor(W,U))})}return z}function w(z,$){return O(z)||R(z,$)||E(z,$)||v()}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(z,$){if(z){if(typeof z=="string")return S(z,$);var W=Object.prototype.toString.call(z).slice(8,-1);if(W==="Object"&&z.constructor&&(W=z.constructor.name),W==="Map"||W==="Set")return Array.from(z);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return S(z,$)}}function S(z,$){($==null||$>z.length)&&($=z.length);for(var W=0,U=new Array($);W<$;W++)U[W]=z[W];return U}function R(z,$){var W=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(W!=null){var U,B,H,X,ne=[],J=!0,re=!1;try{if(H=(W=W.call(z)).next,$!==0)for(;!(J=(U=H.call(W)).done)&&(ne.push(U.value),ne.length!==$);J=!0);}catch(me){re=!0,B=me}finally{try{if(!J&&W.return!=null&&(X=W.return(),Object(X)!==X))return}finally{if(re)throw B}}return ne}}function O(z){if(Array.isArray(z))return z}function j(z,$){if(!(z instanceof $))throw new TypeError("Cannot call a class as a function")}function C(z,$){for(var W=0;W<$.length;W++){var U=$[W];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(z,M(U.key),U)}}function T(z,$,W){return $&&C(z.prototype,$),Object.defineProperty(z,"prototype",{writable:!1}),z}function P(z,$,W){return $=M($),$ in z?Object.defineProperty(z,$,{value:W,enumerable:!0,configurable:!0,writable:!0}):z[$]=W,z}function M(z){var $=F(z,"string");return c($)==="symbol"?$:String($)}function F(z,$){if(c(z)!=="object"||z===null)return z;var W=z[Symbol.toPrimitive];if(W!==void 0){var U=W.call(z,$||"default");if(c(U)!=="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(z)}var V=function(){function z(){var $=this;j(this,z),P(this,"reset",function(){$.isInitialized=!1,$._testMode=!1,$._currentMeasurementId,$._hasLoadedGA=!1,$._isQueuing=!1,$._queueGtag=[]}),P(this,"_gtag",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];$._testMode||$._isQueuing?$._queueGtag.push(U):e.default.apply(void 0,U)}),P(this,"_loadGA",function(W,U){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!$._hasLoadedGA){var H=document.createElement("script");H.async=!0,H.src="".concat(B,"?id=").concat(W),U&&H.setAttribute("nonce",U),document.body.appendChild(H),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},$._hasLoadedGA=!0}}),P(this,"_toGtagOptions",function(W){if(W){var U={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},B=Object.entries(W).reduce(function(H,X){var ne=w(X,2),J=ne[0],re=ne[1];return U[J]?H[U[J]]=re:H[J]=re,H},{});return B}}),P(this,"initialize",function(W){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!W)throw new Error("Require GA_MEASUREMENT_ID");var B=typeof W=="string"?[{trackingId:W}]:W;$._currentMeasurementId=B[0].trackingId;var H=U.gaOptions,X=U.gtagOptions,ne=U.nonce,J=U.testMode,re=J===void 0?!1:J,me=U.gtagUrl;if($._testMode=re,re||$._loadGA($._currentMeasurementId,ne,me),$.isInitialized||($._gtag("js",new Date),B.forEach(function(ce){var Je=y(y(y({},$._toGtagOptions(y(y({},H),ce.gaOptions))),X),ce.gtagOptions);Object.keys(Je).length?$._gtag("config",ce.trackingId,Je):$._gtag("config",ce.trackingId)})),$.isInitialized=!0,!re){var Fe=u($._queueGtag);for($._queueGtag=[],$._isQueuing=!1;Fe.length;){var be=Fe.shift();$._gtag.apply($,u(be)),be[0]==="get"&&($._isQueuing=!0)}}}),P(this,"set",function(W){if(!W){console.warn("`fieldsObject` is required in .set()");return}if(c(W)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(W).length===0&&console.warn("empty `fieldsObject` given to .set()"),$._gaCommand("set",W)}),P(this,"_gaCommandSendEvent",function(W,U,B,H,X){$._gtag("event",U,y(y({event_category:W,event_label:B,value:H},X&&{non_interaction:X.nonInteraction}),$._toGtagOptions(X)))}),P(this,"_gaCommandSendEventParameters",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];if(typeof U[0]=="string")$._gaCommandSendEvent.apply($,u(U.slice(1)));else{var H=U[0],X=H.eventCategory,ne=H.eventAction,J=H.eventLabel,re=H.eventValue;H.hitType;var me=a(H,r);$._gaCommandSendEvent(X,ne,J,re,me)}}),P(this,"_gaCommandSendTiming",function(W,U,B,H){$._gtag("event","timing_complete",{name:U,value:B,event_category:W,event_label:H})}),P(this,"_gaCommandSendPageview",function(W,U){if(U&&Object.keys(U).length){var B=$._toGtagOptions(U),H=B.title,X=B.location,ne=a(B,s);$._gtag("event","page_view",y(y(y(y({},W&&{page_path:W}),H&&{page_title:H}),X&&{page_location:X}),ne))}else W?$._gtag("event","page_view",{page_path:W}):$._gtag("event","page_view")}),P(this,"_gaCommandSendPageviewParameters",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];if(typeof U[0]=="string")$._gaCommandSendPageview.apply($,u(U.slice(1)));else{var H=U[0],X=H.page;H.hitType;var ne=a(H,i);$._gaCommandSendPageview(X,ne)}}),P(this,"_gaCommandSend",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];var H=typeof U[0]=="string"?U[0]:U[0].hitType;switch(H){case"event":$._gaCommandSendEventParameters.apply($,U);break;case"pageview":$._gaCommandSendPageviewParameters.apply($,U);break;case"timing":$._gaCommandSendTiming.apply($,u(U.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(H));break;default:console.warn("Send command doesn't exist: ".concat(H))}}),P(this,"_gaCommandSet",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];typeof U[0]=="string"&&(U[0]=P({},U[0],U[1])),$._gtag("set",$._toGtagOptions(U[0]))}),P(this,"_gaCommand",function(W){for(var U=arguments.length,B=new Array(U>1?U-1:0),H=1;H<U;H++)B[H-1]=arguments[H];switch(W){case"send":$._gaCommandSend.apply($,B);break;case"set":$._gaCommandSet.apply($,B);break;default:console.warn("Command doesn't exist: ".concat(W))}}),P(this,"ga",function(){for(var W=arguments.length,U=new Array(W),B=0;B<W;B++)U[B]=arguments[B];if(typeof U[0]=="string")$._gaCommand.apply($,U);else{var H=U[0];$._gtag("get",$._currentMeasurementId,"client_id",function(X){$._isQueuing=!1;var ne=$._queueGtag;for(H({get:function(me){return me==="clientId"?X:me==="trackingId"?$._currentMeasurementId:me==="apiVersion"?"1":void 0}});ne.length;){var J=ne.shift();$._gtag.apply($,u(J))}}),$._isQueuing=!0}return $.ga}),P(this,"event",function(W,U){if(typeof W=="string")$._gtag("event",W,$._toGtagOptions(U));else{var B=W.action,H=W.category,X=W.label,ne=W.value,J=W.nonInteraction,re=W.transport;if(!H||!B){console.warn("args.category AND args.action are required in event()");return}var me={hitType:"event",eventCategory:(0,t.default)(H),eventAction:(0,t.default)(B)};X&&(me.eventLabel=(0,t.default)(X)),typeof ne<"u"&&(typeof ne!="number"?console.warn("Expected `args.value` arg to be a Number."):me.eventValue=ne),typeof J<"u"&&(typeof J!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):me.nonInteraction=J),typeof re<"u"&&(typeof re!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(re)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),me.transport=re)),$._gaCommand("send",me)}}),P(this,"send",function(W){$._gaCommand("send",W)}),this.reset()}return T(z,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),z}();n.GA4=V;var D=new V;n.default=D})(_L);(function(n){function e(a){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ReactGAImplementation=void 0;var t=s(_L);function r(a){if(typeof WeakMap!="function")return null;var l=new WeakMap,c=new WeakMap;return(r=function(f){return f?c:l})(a)}function s(a,l){if(a&&a.__esModule)return a;if(a===null||e(a)!=="object"&&typeof a!="function")return{default:a};var c=r(l);if(c&&c.has(a))return c.get(a);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in a)if(p!=="default"&&Object.prototype.hasOwnProperty.call(a,p)){var m=f?Object.getOwnPropertyDescriptor(a,p):null;m&&(m.get||m.set)?Object.defineProperty(u,p,m):u[p]=a[p]}return u.default=a,c&&c.set(a,u),u}var i=t.GA4;n.ReactGAImplementation=i;var o=t.default;n.default=o})(yL);const ma=Jp(yL),EU="G-V5690YXT75",AU=()=>{try{ma.initialize(EU,{debug:!1,titleCase:!1,gaOptions:{send_page_view:!1}})}catch(n){console.error(" Error initializing Google Analytics:",n)}},om=(n,e)=>{ma.send({hitType:"pageview",page:n,title:e})},Mg=(n,e,t={})=>{ma.event({action:n,category:"User Interaction",label:e,custom_parameters:{timestamp:new Date().toISOString(),user_agent:navigator.userAgent,screen_resolution:`${screen.width}x${screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`,...t}})},O0=(n,e,t={})=>{ma.event({action:"project_interaction",category:"Projects",label:n,custom_parameters:{action_type:e,project_name:n,timestamp:new Date().toISOString(),...t}})},Oi=(n,e,t={})=>{ma.event({action:"button_click",category:"UI Interaction",label:n,custom_parameters:{button_location:e,page_url:window.location.pathname,timestamp:new Date().toISOString(),...t}})},UC=(n,e,t="click")=>{ma.event({action:"navigation",category:"Site Navigation",label:`${n} -> ${e}`,custom_parameters:{from_page:n,to_page:e,navigation_method:t,timestamp:new Date().toISOString()}})},Jh=(n,e=null,t=null)=>{ma.event({action:"chatbot_interaction",category:"AI Assistant",label:n,custom_parameters:{action_type:n,message_preview:e?e.substring(0,50):null,response_time:t,timestamp:new Date().toISOString()}})},bU=()=>{var e;const n={session_start:new Date().toISOString(),user_agent:navigator.userAgent,language:navigator.language,platform:navigator.platform,screen_resolution:`${screen.width}x${screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,referrer:document.referrer||"direct",is_mobile:window.innerWidth<=768,connection_type:((e=navigator.connection)==null?void 0:e.effectiveType)||"unknown"};return ma.event({action:"session_start",category:"User Session",custom_parameters:n}),n};function lE({isMobile:n}){const[e,t]=A.useState(50),[r,s]=A.useState(!0),i=c=>{const u=c.currentTarget.offsetWidth,f=c.clientX-c.currentTarget.getBoundingClientRect().left,p=Math.min(Math.max(f/u*100,0),100);t(p)},o=()=>{t(50)},a=()=>{s(!r)},l=e>50?150-e:100;return A.useEffect(()=>{om("/","Home - Adarsh Gella Portfolio")},[]),x.jsxs(oh,{direction:"column",gap:"2",style:{position:"relative"},className:n?"mwebHome":"",children:[n&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"imageContainer",onClick:a,children:x.jsx("img",{src:r?jC:BC,alt:"Main and Cartoon Image",className:"imageContainer-main",style:{borderRadius:"15px"}})}),x.jsxs(oE,{size:"5",children:["Hi, I'm ",x.jsx($v,{children:"Adarsh Gella!"}),x.jsx("br",{}),"I'm a student at ",x.jsx(Kt,{href:"https://www.utdallas.edu/fact-sheets/ecs/ms-computer-science/",underline:"hover",target:"blank",children:"UTD"}),", currently pursuing a master's in Computer Science.",x.jsx("br",{}),x.jsx("br",{}),"I'm really passionate about front-end development, especially when it comes to creating intuitive and engaging user interfaces.  ",x.jsx("br",{}),"Right now, I'm working on some new ",x.jsx(Kt,{href:"https://github.com/gadarsh043?tab=repositories",underline:"hover",target:"blank",children:"UI projects"})," and also developing content for my ",x.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),".",x.jsx("br",{}),x.jsx("br",{}),"I love exploring new tech, coding, and user experience. When I'm not coding, you'll probably catch me watching a ton of movies or series, capturing moments for my YouTube channel, or just dancing around with my friends.",x.jsx("br",{}),x.jsx("br",{}),"I enjoy sharing insights about coding practices, discussing new ideas, recommending my",x.jsx(Kt,{href:"https://www.imdb.com/user/ur129777024/lists/",underline:"hover",target:"blank",children:" latest movie finds"}),", or talking about my ",x.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),". I'm all in! Hit me up on ",x.jsx(Kt,{href:"https://www.linkedin.com/in/g-adarsh-sonu/",underline:"hover",target:"blank",children:"LinkedIn"}),", ",x.jsx(Kt,{href:"mailto:g.adarsh043@gmail.com",target:"blank",underline:"hover",children:"Gmail"}),", or",x.jsx(Kt,{href:"https://www.instagram.com/g_adarsh_sonu/",underline:"hover",target:"blank",children:" Instagram"}),"let's connect and chat about what we're into!"]})]}),!n&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"imageContainer",onMouseMove:i,onMouseLeave:o,children:[x.jsx("img",{src:jC,alt:"Main Image",className:"imageContainer-main",style:{clipPath:`polygon(0 0, ${e}% 0, ${e}% 100%, 0 100%)`,opacity:`${e+80}%`,borderRadius:"15px"}}),x.jsx("img",{src:BC,alt:"Cartoon Image",className:"imageContainer-cartoon",style:{opacity:`${l}%`,borderRadius:"15px"}})]}),x.jsx("br",{}),x.jsx("br",{}),x.jsxs(oE,{size:"5",children:["Hi, I'm ",x.jsx($v,{children:"Adarsh Gella!"}),x.jsx("br",{}),"I'm a student at ",x.jsx(Kt,{href:"https://www.utdallas.edu/fact-sheets/ecs/ms-computer-science/",underline:"hover",target:"blank",children:"UTD"}),", currently pursuing a master's in Computer Science. ",x.jsx("br",{}),"I'm really passionate about front-end development, especially when it comes to ",x.jsx("br",{}),"creating intuitive and engaging user interfaces. Right now, I'm working on some new ",x.jsx("br",{}),x.jsx(Kt,{href:"https://github.com/gadarsh043?tab=repositories",underline:"hover",target:"blank",children:"UI projects"})," and also developing content for my ",x.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),".",x.jsx("br",{}),x.jsx("br",{}),"I love exploring new tech, coding, and user experience. When I'm not coding, ",x.jsx("br",{}),"you'll probably catch me watching a ton of movies or series, capturing moments for ",x.jsx("br",{}),"my YouTube channel, or just dancing around with my friends.",x.jsx("br",{}),x.jsx("br",{}),"I enjoy sharing insights about coding practices, discussing new ideas, recommending my ",x.jsx("br",{}),x.jsx(Kt,{href:"https://www.imdb.com/user/ur129777024/lists/",underline:"hover",target:"blank",children:"latest movie finds"}),", or talking about my ",x.jsx(Kt,{href:"https://www.youtube.com/@g_adarsh_sonu",underline:"hover",target:"blank",children:"YouTube channel"}),". I'm all in! Hit me up on ",x.jsx(Kt,{href:"https://www.linkedin.com/in/g-adarsh-sonu/",underline:"hover",target:"blank",children:"LinkedIn"}),", ",x.jsx(Kt,{href:"mailto:g.adarsh043@gmail.com",target:"blank",underline:"hover",children:"Gmail"}),", or ",x.jsx("br",{}),x.jsx(Kt,{href:"https://www.instagram.com/g_adarsh_sonu/",underline:"hover",target:"blank",children:"Instagram"}),"let's connect and chat about what we're into!"]}),x.jsx("br",{}),x.jsx("br",{})]})]})}lE.propTypes={isMobile:ls.bool};const SU="modulepreload",TU=function(n){return"/"+n},$C={},tg=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=TU(l),l in $C)return;$C[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":SU,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var Od={};Od.d=(n,e)=>{for(var t in e)Od.o(e,t)&&!Od.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Od.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var fe=globalThis.pdfjsLib={};Od.d(fe,{AbortException:()=>rc,AnnotationEditorLayer:()=>yA,AnnotationEditorParamsType:()=>pe,AnnotationEditorType:()=>xe,AnnotationEditorUIManager:()=>ql,AnnotationLayer:()=>bz,AnnotationMode:()=>fo,CMapCompressionType:()=>uE,ColorPicker:()=>Xv,DOMSVGFactory:()=>wS,DrawLayer:()=>AA,FeatureTest:()=>Hn,GlobalWorkerOptions:()=>Fi,ImageKind:()=>Ng,InvalidPDFException:()=>bL,MissingPDFException:()=>nc,OPS:()=>zr,Outliner:()=>ZE,PDFDataRangeTransport:()=>yM,PDFDateString:()=>IL,PDFWorker:()=>Xc,PasswordResponses:()=>PU,PermissionFlag:()=>RU,PixelsPerInch:()=>ra,RenderingCancelledException:()=>ES,TextLayer:()=>qv,UnexpectedResponseException:()=>l_,Util:()=>ae,VerbosityLevel:()=>i_,XfaLayer:()=>wM,build:()=>rz,createValidAbsoluteUrl:()=>MU,fetchData:()=>f_,getDocument:()=>K$,getFilenameFromUrl:()=>zU,getPdfFilenameFromUrl:()=>HU,getXfaPageViewport:()=>WU,isDataScheme:()=>AS,isPdfFile:()=>bS,noContextMenu:()=>Xn,normalizeUnicode:()=>jU,renderTextLayer:()=>j$,setLayerDimensions:()=>Gl,shadow:()=>Le,updateTextLayer:()=>B$,version:()=>nz});const bn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),AL=[1,0,0,1,0,0],cE=[.001,0,0,.001,0,0],CU=1e7,F0=1.35,Pr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},fo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xU="pdfjs_internal_editor_",xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},pe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},RU={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ng={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Rt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Zh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},i_={ERRORS:0,WARNINGS:1,INFOS:5},uE={NONE:0,BINARY:1},zr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},PU={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let o_=i_.WARNINGS;function IU(n){Number.isInteger(n)&&(o_=n)}function kU(){return o_}function a_(n){o_>=i_.INFOS&&console.log(`Info: ${n}`)}function _e(n){o_>=i_.WARNINGS&&console.log(`Warning: ${n}`)}function ze(n){throw new Error(n)}function Dt(n,e){n||ze(e)}function LU(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function MU(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=VU(n)}catch{}}const r=e?new URL(n,e):new URL(n);if(LU(r))return r}catch{}return null}function Le(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const ga=function(){function e(t,r){this.constructor===e&&ze("Cannot initialize BaseException."),this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class hE extends ga{constructor(e,t){super(e,"PasswordException"),this.code=t}}class dE extends ga{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class bL extends ga{constructor(e){super(e,"InvalidPDFException")}}class nc extends ga{constructor(e){super(e,"MissingPDFException")}}class l_ extends ga{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class NU extends ga{constructor(e){super(e,"FormatError")}}class rc extends ga{constructor(e){super(e,"AbortException")}}function SL(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ze("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),o=n.subarray(s,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function c_(n){typeof n!="string"&&ze("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function DU(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function yS(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function OU(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function FU(){try{return new Function(""),!0}catch{return!1}}class Hn{static get isLittleEndian(){return Le(this,"isLittleEndian",OU())}static get isEvalSupported(){return Le(this,"isEvalSupported",FU())}static get isOffscreenCanvasSupported(){return Le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Le(this,"platform",{isMac:navigator.platform.includes("Mac")}):Le(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return Le(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const V0=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var ji,Dg,fE;class ae{static makeHexColor(e,t,r){return`#${V0[e]}${V0[t]}${V0[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[r,s]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[s,i]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],s[0],i[0],o[0]),Math.min(r[1],s[1],i[1],o[1]),Math.max(r[0],s[0],i[0],o[0]),Math.max(r[1],s[1],i[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(r+o)/2,l=Math.sqrt((r+o)**2-4*(r*o-i*s))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,s,o]}static bezierBoundingBox(e,t,r,s,i,o,a,l,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],k(this,ji,fE).call(this,e,r,i,a,t,s,o,l,3*(-e+3*(r-i)+a),6*(e-2*r+i),3*(r-e),c),k(this,ji,fE).call(this,e,r,i,a,t,s,o,l,3*(-t+3*(s-o)+l),6*(t-2*s+o),3*(s-t),c),c}}ji=new WeakSet,Dg=function(e,t,r,s,i,o,a,l,c,u){if(c<=0||c>=1)return;const f=1-c,p=c*c,m=p*c,g=f*(f*(f*e+3*c*t)+3*p*r)+m*s,y=f*(f*(f*i+3*c*o)+3*p*a)+m*l;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],y),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],y)},fE=function(e,t,r,s,i,o,a,l,c,u,f,p){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&k(this,ji,Dg).call(this,e,t,r,s,i,o,a,l,-f/u,p);return}const m=u**2-4*f*c;if(m<0)return;const g=Math.sqrt(m),y=2*c;k(this,ji,Dg).call(this,e,t,r,s,i,o,a,l,(-u+g)/y,p),k(this,ji,Dg).call(this,e,t,r,s,i,o,a,l,(-u-g)/y,p)},L(ae,ji);function VU(n){return decodeURIComponent(escape(n))}let j0=null,zC=null;function jU(n){return j0||(j0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zC=new Map([["","t"]])),n.replaceAll(j0,(e,t,r)=>t?t.normalize("NFKC"):zC.get(r))}function BU(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return SL(n)}const TL="pdfjs_internal_id_",ei={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class u_{constructor(){this.constructor===u_&&ze("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var wf;const i1=class i1{constructor({enableHWA:e=!1}={}){L(this,wf,!1);this.constructor===i1&&ze("Cannot initialize BaseCanvasFactory."),I(this,wf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!h(this,wf)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ze("Abstract method `_createCanvas` called.")}};wf=new WeakMap;let zv=i1;class h_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===h_&&ze("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),r=this.isCompressed?uE.BINARY:uE.NONE;return this._fetchData(t,r).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){ze("Abstract method `_fetchData` called.")}}class d_{constructor({baseUrl:e=null}){this.constructor===d_&&ze("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){ze("Abstract method `_fetchData` called.")}}class _S{constructor(){this.constructor===_S&&ze("Cannot initialize BaseSVGFactory.")}create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ze("Abstract method `_createSVG` called.")}}const ni="http://www.w3.org/2000/svg",Ma=class Ma{};ve(Ma,"CSS",96),ve(Ma,"PDF",72),ve(Ma,"PDF_TO_CSS_UNITS",Ma.CSS/Ma.PDF);let ra=Ma;var ja,vs,ci,Vn,uy,Ba,oe,mn,yc,_c,Og,CL,pE,wc,ad,ld,mE,cd;class UU extends u_{constructor({docId:t,ownerDocument:r=globalThis.document}={}){super();L(this,oe);L(this,ja);L(this,vs);L(this,ci);L(this,Vn);L(this,uy);L(this,Ba,0);I(this,ci,t),I(this,Vn,r)}addFilter(t){if(!t)return"none";let r=h(this,oe,mn).get(t);if(r)return r;const[s,i,o]=k(this,oe,Og).call(this,t),a=t.length===1?s:`${s}${i}${o}`;if(r=h(this,oe,mn).get(a),r)return h(this,oe,mn).set(t,r),r;const l=`g_${h(this,ci)}_transfer_map_${tr(this,Ba)._++}`,c=`url(#${l})`;h(this,oe,mn).set(t,c),h(this,oe,mn).set(a,c);const u=k(this,oe,wc).call(this,l);return k(this,oe,ld).call(this,s,i,o,u),c}addHCMFilter(t,r){var g;const s=`${t}-${r}`,i="base";let o=h(this,oe,yc).get(i);if((o==null?void 0:o.key)===s||(o?((g=o.filter)==null||g.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},h(this,oe,yc).set(i,o)),!t||!r))return o.url;const a=k(this,oe,cd).call(this,t);t=ae.makeHexColor(...a);const l=k(this,oe,cd).call(this,r);if(r=ae.makeHexColor(...l),h(this,oe,_c).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const c=new Array(256);for(let y=0;y<=255;y++){const w=y/255;c[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const u=c.join(","),f=`g_${h(this,ci)}_hcm_filter`,p=o.filter=k(this,oe,wc).call(this,f);k(this,oe,ld).call(this,u,u,u,p),k(this,oe,pE).call(this,p);const m=(y,w)=>{const v=a[y]/255,E=l[y]/255,S=new Array(w+1);for(let R=0;R<=w;R++)S[R]=v+R/w*(E-v);return S.join(",")};return k(this,oe,ld).call(this,m(0,5),m(1,5),m(2,5),p),o.url=`url(#${f})`,o.url}addAlphaFilter(t){let r=h(this,oe,mn).get(t);if(r)return r;const[s]=k(this,oe,Og).call(this,[t]),i=`alpha_${s}`;if(r=h(this,oe,mn).get(i),r)return h(this,oe,mn).set(t,r),r;const o=`g_${h(this,ci)}_alpha_map_${tr(this,Ba)._++}`,a=`url(#${o})`;h(this,oe,mn).set(t,a),h(this,oe,mn).set(i,a);const l=k(this,oe,wc).call(this,o);return k(this,oe,mE).call(this,s,l),a}addLuminosityFilter(t){let r=h(this,oe,mn).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=k(this,oe,Og).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=h(this,oe,mn).get(i),r)return h(this,oe,mn).set(t,r),r;const o=`g_${h(this,ci)}_luminosity_map_${tr(this,Ba)._++}`,a=`url(#${o})`;h(this,oe,mn).set(t,a),h(this,oe,mn).set(i,a);const l=k(this,oe,wc).call(this,o);return k(this,oe,CL).call(this,l),t&&k(this,oe,mE).call(this,s,l),a}addHighlightHCMFilter(t,r,s,i,o){var E;const a=`${r}-${s}-${i}-${o}`;let l=h(this,oe,yc).get(t);if((l==null?void 0:l.key)===a||(l?((E=l.filter)==null||E.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},h(this,oe,yc).set(t,l)),!r||!s))return l.url;const[c,u]=[r,s].map(k(this,oe,cd).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,g]=[i,o].map(k(this,oe,cd).bind(this));p<f&&([f,p,m,g]=[p,f,g,m]),h(this,oe,_c).style.color="";const y=(S,R,O)=>{const j=new Array(256),C=(p-f)/O,T=S/255,P=(R-S)/(255*O);let M=0;for(let F=0;F<=O;F++){const V=Math.round(f+F*C),D=T+F*P;for(let z=M;z<=V;z++)j[z]=D;M=V+1}for(let F=M;F<256;F++)j[F]=j[M-1];return j.join(",")},w=`g_${h(this,ci)}_hcm_${t}_filter`,v=l.filter=k(this,oe,wc).call(this,w);return k(this,oe,pE).call(this,v),k(this,oe,ld).call(this,y(m[0],g[0],5),y(m[1],g[1],5),y(m[2],g[2],5),v),l.url=`url(#${w})`,l.url}destroy(t=!1){t&&h(this,oe,yc).size!==0||(h(this,vs)&&(h(this,vs).parentNode.parentNode.remove(),I(this,vs,null)),h(this,ja)&&(h(this,ja).clear(),I(this,ja,null)),I(this,Ba,0))}}ja=new WeakMap,vs=new WeakMap,ci=new WeakMap,Vn=new WeakMap,uy=new WeakMap,Ba=new WeakMap,oe=new WeakSet,mn=function(){return h(this,ja)||I(this,ja,new Map)},yc=function(){return h(this,uy)||I(this,uy,new Map)},_c=function(){if(!h(this,vs)){const t=h(this,Vn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=h(this,Vn).createElementNS(ni,"svg");s.setAttribute("width",0),s.setAttribute("height",0),I(this,vs,h(this,Vn).createElementNS(ni,"defs")),t.append(s),s.append(h(this,vs)),h(this,Vn).body.append(t)}return h(this,vs)},Og=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=c[p]/255;const f=u.join(",");return[f,f,f]}const[r,s,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=r[c]/255,a[c]=s[c]/255,l[c]=i[c]/255;return[o.join(","),a.join(","),l.join(",")]},CL=function(t){const r=h(this,Vn).createElementNS(ni,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},pE=function(t){const r=h(this,Vn).createElementNS(ni,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},wc=function(t){const r=h(this,Vn).createElementNS(ni,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),h(this,oe,_c).append(r),r},ad=function(t,r,s){const i=h(this,Vn).createElementNS(ni,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},ld=function(t,r,s,i){const o=h(this,Vn).createElementNS(ni,"feComponentTransfer");i.append(o),k(this,oe,ad).call(this,o,"feFuncR",t),k(this,oe,ad).call(this,o,"feFuncG",r),k(this,oe,ad).call(this,o,"feFuncB",s)},mE=function(t,r){const s=h(this,Vn).createElementNS(ni,"feComponentTransfer");r.append(s),k(this,oe,ad).call(this,s,"feFuncA",t)},cd=function(t){return h(this,oe,_c).style.color=t,SS(getComputedStyle(h(this,oe,_c)).getPropertyValue("color"))};class $U extends zv{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}async function f_(n,e="text"){if(ud(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class xL extends h_{_fetchData(e,t){return f_(e,this.isCompressed?"arraybuffer":"text").then(r=>({cMapData:r instanceof ArrayBuffer?new Uint8Array(r):c_(r),compressionType:t}))}}class RL extends d_{_fetchData(e){return f_(e,"arraybuffer").then(t=>new Uint8Array(t))}}class wS extends _S{_createSVG(e){return document.createElementNS(ni,e)}}class am{constructor({viewBox:e,scale:t,rotation:r,offsetX:s=0,offsetY:i=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=s,this.offsetY=i;const a=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,u,f,p;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,u=0,f=0,p=1;break;case 90:c=0,u=1,f=1,p=0;break;case 270:c=0,u=-1,f=-1,p=0;break;case 0:c=1,u=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let m,g,y,w;c===0?(m=Math.abs(l-e[1])*t+s,g=Math.abs(a-e[0])*t+i,y=(e[3]-e[1])*t,w=(e[2]-e[0])*t):(m=Math.abs(a-e[0])*t+s,g=Math.abs(l-e[1])*t+i,y=(e[2]-e[0])*t,w=(e[3]-e[1])*t),this.transform=[c*t,u*t,f*t,p*t,m-c*t*a-f*t*l,g-u*t*a-p*t*l],this.width=y,this.height=w}get rawDims(){const{viewBox:e}=this;return Le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new am({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return ae.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ae.applyTransform([e[0],e[1]],this.transform),r=ae.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return ae.applyInverseTransform([e,t],this.transform)}}class ES extends ga{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function AS(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function bS(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function zU(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function HU(n,e="document.pdf"){if(typeof n!="string")return e;if(AS(n))return _e('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let i=r.exec(s[1])||r.exec(s[2])||r.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=r.exec(decodeURIComponent(i))[0]}catch{}return i||e}class HC{constructor(){ve(this,"started",Object.create(null));ve(this,"times",[])}time(e){e in this.started&&_e(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_e(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function ud(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Xn(n){n.preventDefault()}function PL(n){console.log("Deprecated API usage: "+n)}let WC;class IL{static toDateObject(e){if(!e||typeof e!="string")return null;WC||(WC=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=WC.exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=u,a+=f):c==="+"&&(o-=u,a-=f),new Date(Date.UTC(r,s,i,o,a,l))}}function WU(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new am({viewBox:i,scale:e,rotation:t})}function SS(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_e(`Not a valid color format: "${n}"`),[0,0,0])}function GU(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,SS(r))}e.remove()}function ot(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform();return[e,t,r,s,i,o]}function ti(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform().invertSelf();return[e,t,r,s,i,o]}function Gl(n,e,t=!1,r=!0){if(e instanceof am){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:o}=n,a=Hn.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${i}px`,u=a?`round(${l}, 1px)`:`calc(${l})`,f=a?`round(${c}, 1px)`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}r&&n.setAttribute("data-main-rotation",e.rotation)}var Ua,$a,sr,za,hy,kL,Mn,LL,ML,Fg,NL,vE;const dy=class dy{constructor(e){L(this,Mn);L(this,Ua,null);L(this,$a,null);L(this,sr);L(this,za,null);I(this,sr,e)}render(){const e=I(this,Ua,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=h(this,sr)._uiManager._signal;e.addEventListener("contextmenu",Xn,{signal:t}),e.addEventListener("pointerdown",k(dy,hy,kL),{signal:t});const r=I(this,za,document.createElement("div"));r.className="buttons",e.append(r);const s=h(this,sr).toolbarPosition;if(s){const{style:i}=e,o=h(this,sr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return k(this,Mn,NL).call(this),e}hide(){var e;h(this,Ua).classList.add("hidden"),(e=h(this,$a))==null||e.hideDropdown()}show(){h(this,Ua).classList.remove("hidden")}addAltTextButton(e){k(this,Mn,Fg).call(this,e),h(this,za).prepend(e,h(this,Mn,vE))}addColorPicker(e){I(this,$a,e);const t=e.renderButton();k(this,Mn,Fg).call(this,t),h(this,za).prepend(t,h(this,Mn,vE))}remove(){var e;h(this,Ua).remove(),(e=h(this,$a))==null||e.destroy(),I(this,$a,null)}};Ua=new WeakMap,$a=new WeakMap,sr=new WeakMap,za=new WeakMap,hy=new WeakSet,kL=function(e){e.stopPropagation()},Mn=new WeakSet,LL=function(e){h(this,sr)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},ML=function(e){h(this,sr)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Fg=function(e){const t=h(this,sr)._uiManager._signal;e.addEventListener("focusin",k(this,Mn,LL).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,Mn,ML).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Xn,{signal:t})},NL=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${h(this,sr).editorType}-button`),k(this,Mn,Fg).call(this,e),e.addEventListener("click",t=>{h(this,sr)._uiManager.delete()},{signal:h(this,sr)._uiManager._signal}),h(this,za).append(e)},vE=function(){const e=document.createElement("div");return e.className="divider",e},L(dy,hy);let gE=dy;var Ef,Ha,Wa,ca,DL,OL,FL;class qU{constructor(e){L(this,ca);L(this,Ef,null);L(this,Ha,null);L(this,Wa);I(this,Wa,e)}show(e,t,r){const[s,i]=k(this,ca,OL).call(this,t,r),{style:o}=h(this,Ha)||I(this,Ha,k(this,ca,DL).call(this));e.append(h(this,Ha)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,Ha).remove()}}Ef=new WeakMap,Ha=new WeakMap,Wa=new WeakMap,ca=new WeakSet,DL=function(){const e=I(this,Ha,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Xn,{signal:h(this,Wa)._signal});const t=I(this,Ef,document.createElement("div"));return t.className="buttons",e.append(t),k(this,ca,FL).call(this),e},OL=function(e,t){let r=0,s=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const a=i.x+(t?i.width:0);if(o>r){s=a,r=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,r]},FL=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=h(this,Wa)._signal;e.addEventListener("contextmenu",Xn,{signal:r}),e.addEventListener("click",()=>{h(this,Wa).highlightSelection("floating_button")},{signal:r}),h(this,Ef).append(e)};function Hv(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function KU(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var fy;class XU{constructor(){L(this,fy,0)}get id(){return`${xU}${tr(this,fy)._++}`}}fy=new WeakMap;var Af,py,Tr,bf,_E;const o1=class o1{constructor(){L(this,bf);L(this,Af,BU());L(this,py,0);L(this,Tr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Le(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return k(this,bf,_E).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return k(this,bf,_E).call(this,e,e)}async getFromId(e){h(this,Tr)||I(this,Tr,new Map);const t=h(this,Tr).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=h(this,Tr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){h(this,Tr)||I(this,Tr,new Map);const t=h(this,Tr).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${h(this,Af)}_`)}};Af=new WeakMap,py=new WeakMap,Tr=new WeakMap,bf=new WeakSet,_E=async function(e,t){h(this,Tr)||I(this,Tr,new Map);let r=h(this,Tr).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${h(this,Af)}_${tr(this,py)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await f_(t,"blob")):s=r.file=t,s.type==="image/svg+xml"){const i=o1._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=async()=>{const f=r.svgUrl=o.result;a.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(s),await l}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){console.error(s),r=null}return h(this,Tr).set(e,r),r&&h(this,Tr).set(r.id,r),r};let yE=o1;var $t,po,Sf,zt;class YU{constructor(e=128){L(this,$t,[]);L(this,po,!1);L(this,Sf);L(this,zt,-1);I(this,Sf,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),h(this,po))return;const l={cmd:e,undo:t,post:r,type:i};if(h(this,zt)===-1){h(this,$t).length>0&&(h(this,$t).length=0),I(this,zt,0),h(this,$t).push(l);return}if(o&&h(this,$t)[h(this,zt)].type===i){a&&(l.undo=h(this,$t)[h(this,zt)].undo),h(this,$t)[h(this,zt)]=l;return}const c=h(this,zt)+1;c===h(this,Sf)?h(this,$t).splice(0,1):(I(this,zt,c),c<h(this,$t).length&&h(this,$t).splice(c)),h(this,$t).push(l)}undo(){if(h(this,zt)===-1)return;I(this,po,!0);const{undo:e,post:t}=h(this,$t)[h(this,zt)];e(),t==null||t(),I(this,po,!1),I(this,zt,h(this,zt)-1)}redo(){if(h(this,zt)<h(this,$t).length-1){I(this,zt,h(this,zt)+1),I(this,po,!0);const{cmd:e,post:t}=h(this,$t)[h(this,zt)];e(),t==null||t(),I(this,po,!1)}}hasSomethingToUndo(){return h(this,zt)!==-1}hasSomethingToRedo(){return h(this,zt)<h(this,$t).length-1}destroy(){I(this,$t,null)}}$t=new WeakMap,po=new WeakMap,Sf=new WeakMap,zt=new WeakMap;var my,VL;class lm{constructor(e){L(this,my);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Hn.platform;for(const[r,s,i={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(k(this,my,VL).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(s.bind(e,...o,t)(),i||(t.stopPropagation(),t.preventDefault()))}}my=new WeakSet,VL=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const gy=class gy{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return GU(e),Le(this,"_colors",e)}convert(e){const t=SS(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,o)=>i===t[o]))return gy._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ae.makeHexColor(...t):e}};ve(gy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let wE=gy;var nu,ir,Pt,Yt,ru,ui,su,Hr,iu,Ga,ys,Wr,qa,Tf,Cf,_s,ou,mo,ws,vy,go,xf,Ka,Rf,au,Qt,je,hi,Xa,Pf,If,kf,Lf,Mf,Nf,Df,Of,Ff,Vf,jf,Bf,Uf,vo,Es,di,$f,ee,Vg,jL,BL,jg,UL,$L,zL,EE,HL,AE,bE,WL,Cn,io,GL,qL,SE,KL,hd,TE;const Bc=class Bc{constructor(e,t,r,s,i,o,a,l,c){L(this,ee);L(this,nu,new AbortController);L(this,ir,null);L(this,Pt,new Map);L(this,Yt,new Map);L(this,ru,null);L(this,ui,null);L(this,su,null);L(this,Hr,new YU);L(this,iu,0);L(this,Ga,new Set);L(this,ys,null);L(this,Wr,null);L(this,qa,new Set);L(this,Tf,!1);L(this,Cf,null);L(this,_s,null);L(this,ou,null);L(this,mo,!1);L(this,ws,null);L(this,vy,new XU);L(this,go,!1);L(this,xf,!1);L(this,Ka,null);L(this,Rf,null);L(this,au,null);L(this,Qt,xe.NONE);L(this,je,new Set);L(this,hi,null);L(this,Xa,null);L(this,Pf,null);L(this,If,this.blur.bind(this));L(this,kf,this.focus.bind(this));L(this,Lf,this.copy.bind(this));L(this,Mf,this.cut.bind(this));L(this,Nf,this.paste.bind(this));L(this,Df,this.keydown.bind(this));L(this,Of,this.keyup.bind(this));L(this,Ff,this.onEditingAction.bind(this));L(this,Vf,this.onPageChanging.bind(this));L(this,jf,this.onScaleChanging.bind(this));L(this,Bf,this.onRotationChanging.bind(this));L(this,Uf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});L(this,vo,[0,0]);L(this,Es,null);L(this,di,null);L(this,$f,null);this._signal=h(this,nu).signal,I(this,di,e),I(this,$f,t),I(this,ru,r),this._eventBus=s,this._eventBus._on("editingaction",h(this,Ff)),this._eventBus._on("pagechanging",h(this,Vf)),this._eventBus._on("scalechanging",h(this,jf)),this._eventBus._on("rotationchanging",h(this,Bf)),k(this,ee,UL).call(this),k(this,ee,WL).call(this),k(this,ee,EE).call(this),I(this,ui,i.annotationStorage),I(this,Cf,i.filterFactory),I(this,Xa,o),I(this,ou,a||null),I(this,Tf,l),I(this,au,c||null),this.viewParameters={realScale:ra.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Bc.prototype,t=o=>h(o,di).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Le(this,"_keyboardManager",new lm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,di).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,di).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r;(e=h(this,nu))==null||e.abort(),I(this,nu,null),this._signal=null,this._eventBus._off("editingaction",h(this,Ff)),this._eventBus._off("pagechanging",h(this,Vf)),this._eventBus._off("scalechanging",h(this,jf)),this._eventBus._off("rotationchanging",h(this,Bf));for(const s of h(this,Yt).values())s.destroy();h(this,Yt).clear(),h(this,Pt).clear(),h(this,qa).clear(),I(this,ir,null),h(this,je).clear(),h(this,Hr).destroy(),(t=h(this,ru))==null||t.destroy(),(r=h(this,ws))==null||r.hide(),I(this,ws,null),h(this,_s)&&(clearTimeout(h(this,_s)),I(this,_s,null)),h(this,Es)&&(clearTimeout(h(this,Es)),I(this,Es,null))}async mlGuess(e){var t;return((t=h(this,au))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!h(this,au)}get hcmFilter(){return Le(this,"hcmFilter",h(this,Xa)?h(this,Cf).addHCMFilter(h(this,Xa).foreground,h(this,Xa).background):"none")}get direction(){return Le(this,"direction",getComputedStyle(h(this,di)).direction)}get highlightColors(){return Le(this,"highlightColors",h(this,ou)?new Map(h(this,ou).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){I(this,Rf,e)}editAltText(e){var t;(t=h(this,ru))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){I(this,iu,e-1)}focusMainContainer(){h(this,di).focus()}findParent(e,t){for(const r of h(this,Yt).values()){const{x:s,y:i,width:o,height:a}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=i&&t<=i+a)return r}return null}disableUserSelect(e=!1){h(this,$f).classList.toggle("noUserSelect",e)}addShouldRescale(e){h(this,qa).add(e)}removeShouldRescale(e){h(this,qa).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ra.PDF_TO_CSS_UNITS;for(const t of h(this,qa))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o}=t,a=t.toString(),c=k(this,ee,Vg).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(u){t.empty(),h(this,Qt)===xe.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:xe.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const f of h(this,Yt).values())if(f.hasTextLayer(c)){f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o,text:a});break}}}addToAnnotationStorage(e){!e.isEmpty()&&h(this,ui)&&!h(this,ui).has(e.id)&&h(this,ui).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,h(this,mo)&&(I(this,mo,!1),k(this,ee,jg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of h(this,je))if(t.div.contains(e)){I(this,Ka,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!h(this,Ka))return;const[e,t]=h(this,Ka);I(this,Ka,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,ee,EE).call(this),k(this,ee,AE).call(this)}removeEditListeners(){k(this,ee,HL).call(this),k(this,ee,bE).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of h(this,Wr))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of h(this,Wr))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=h(this,ir))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of h(this,je)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of h(this,Wr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){_e(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const l of r){const c=s.deserialize(l);if(!c)return;i.push(c)}const o=()=>{for(const l of i)k(this,ee,SE).call(this,l);k(this,ee,TE).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){_e(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,Qt)!==xe.NONE&&!this.isEditorHandlingKeyboard&&Bc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,mo)&&(I(this,mo,!1),k(this,ee,jg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,ee,$L).call(this),k(this,ee,AE).call(this),k(this,ee,Cn).call(this,{isEditing:h(this,Qt)!==xe.NONE,isEmpty:k(this,ee,hd).call(this),hasSomethingToUndo:h(this,Hr).hasSomethingToUndo(),hasSomethingToRedo:h(this,Hr).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,ee,zL).call(this),k(this,ee,bE).call(this),k(this,ee,Cn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!h(this,Wr)){I(this,Wr,e);for(const t of h(this,Wr))k(this,ee,io).call(this,t.defaultPropertiesToUpdate)}}getId(){return h(this,vy).id}get currentLayer(){return h(this,Yt).get(h(this,iu))}getLayer(e){return h(this,Yt).get(e)}get currentPageIndex(){return h(this,iu)}addLayer(e){h(this,Yt).set(e.pageIndex,e),h(this,go)?e.enable():e.disable()}removeLayer(e){h(this,Yt).delete(e.pageIndex)}updateMode(e,t=null,r=!1){if(h(this,Qt)!==e){if(I(this,Qt,e),e===xe.NONE){this.setEditingState(!1),k(this,ee,qL).call(this);return}this.setEditingState(!0),k(this,ee,GL).call(this),this.unselectAll();for(const s of h(this,Yt).values())s.updateMode(e);if(!t&&r){this.addNewEditorFromKeyboard();return}if(t){for(const s of h(this,Pt).values())if(s.annotationElementId===t){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==h(this,Qt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var r;if(h(this,Wr)){switch(e){case pe.CREATE:this.currentLayer.addNewEditor();return;case pe.HIGHLIGHT_DEFAULT_COLOR:(r=h(this,Rf))==null||r.updateColor(t);break;case pe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,Pf)||I(this,Pf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of h(this,je))s.updateParams(e,t);for(const s of h(this,Wr))s.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const o of h(this,Pt).values())o.editorType===e&&o.show(t);(((i=h(this,Pf))==null?void 0:i.get(pe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,ee,io).call(this,[[pe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(h(this,xf)!==e){I(this,xf,e);for(const t of h(this,Yt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of h(this,Pt).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return h(this,Pt).get(e)}addEditor(e){h(this,Pt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(h(this,_s)&&clearTimeout(h(this,_s)),I(this,_s,setTimeout(()=>{this.focusMainContainer(),I(this,_s,null)},0))),h(this,Pt).delete(e.id),this.unselect(e),(!e.annotationElementId||!h(this,Ga).has(e.annotationElementId))&&((t=h(this,ui))==null||t.remove(e.id))}addDeletedAnnotationElement(e){h(this,Ga).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return h(this,Ga).has(e)}removeDeletedAnnotationElement(e){h(this,Ga).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){h(this,ir)!==e&&(I(this,ir,e),e&&k(this,ee,io).call(this,e.propertiesToUpdate))}updateUI(e){h(this,ee,KL)===e&&k(this,ee,io).call(this,e.propertiesToUpdate)}toggleSelected(e){if(h(this,je).has(e)){h(this,je).delete(e),e.unselect(),k(this,ee,Cn).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,je).add(e),e.select(),k(this,ee,io).call(this,e.propertiesToUpdate),k(this,ee,Cn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of h(this,je))t!==e&&t.unselect();h(this,je).clear(),h(this,je).add(e),e.select(),k(this,ee,io).call(this,e.propertiesToUpdate),k(this,ee,Cn).call(this,{hasSelectedEditor:!0})}isSelected(e){return h(this,je).has(e)}get firstSelectedEditor(){return h(this,je).values().next().value}unselect(e){e.unselect(),h(this,je).delete(e),k(this,ee,Cn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,je).size!==0}get isEnterHandled(){return h(this,je).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){h(this,Hr).undo(),k(this,ee,Cn).call(this,{hasSomethingToUndo:h(this,Hr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,ee,hd).call(this)})}redo(){h(this,Hr).redo(),k(this,ee,Cn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,Hr).hasSomethingToRedo(),isEmpty:k(this,ee,hd).call(this)})}addCommands(e){h(this,Hr).add(e),k(this,ee,Cn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,ee,hd).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...h(this,je)],t=()=>{for(const s of e)s.remove()},r=()=>{for(const s of e)k(this,ee,SE).call(this,s)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=h(this,ir))==null||e.commitOrRemove()}hasSomethingToControl(){return h(this,ir)||this.hasSelection}selectAll(){for(const e of h(this,je))e.commit();k(this,ee,TE).call(this,h(this,Pt).values())}unselectAll(){if(!(h(this,ir)&&(h(this,ir).commitOrRemove(),h(this,Qt)!==xe.NONE))&&this.hasSelection){for(const e of h(this,je))e.unselect();h(this,je).clear(),k(this,ee,Cn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;h(this,vo)[0]+=e,h(this,vo)[1]+=t;const[s,i]=h(this,vo),o=[...h(this,je)],a=1e3;h(this,Es)&&clearTimeout(h(this,Es)),I(this,Es,setTimeout(()=>{I(this,Es,null),h(this,vo)[0]=h(this,vo)[1]=0,this.addCommands({cmd:()=>{for(const l of o)h(this,Pt).has(l.id)&&l.translateInPage(s,i)},undo:()=>{for(const l of o)h(this,Pt).has(l.id)&&l.translateInPage(-s,-i)},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),I(this,ys,new Map);for(const e of h(this,je))h(this,ys).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,ys))return!1;this.disableUserSelect(!1);const e=h(this,ys);I(this,ys,null);let t=!1;for(const[{x:s,y:i,pageIndex:o},a]of e)a.newX=s,a.newY=i,a.newPageIndex=o,t||(t=s!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(s,i,o,a)=>{if(h(this,Pt).has(s.id)){const l=h(this,Yt).get(a);l?s._setParentAndPosition(l,i,o):(s.pageIndex=a,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:a}]of e)r(s,i,o,a)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:a}]of e)r(s,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(h(this,ys))for(const r of h(this,ys).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||h(this,je).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return h(this,ir)===e}getActive(){return h(this,ir)}getMode(){return h(this,Qt)}get imageManager(){return Le(this,"imageManager",new yE)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,f,p)=>({x:(u-s)/o,y:1-(c+f-r)/i,width:p/o,height:f/i});break;case"180":a=(c,u,f,p)=>({x:1-(c+f-r)/i,y:1-(u+p-s)/o,width:f/i,height:p/o});break;case"270":a=(c,u,f,p)=>({x:1-(u+p-s)/o,y:(c-r)/i,width:p/o,height:f/i});break;default:a=(c,u,f,p)=>({x:(c-r)/i,y:(u-s)/o,width:f/i,height:p/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:p,y:m,width:g,height:y}of f.getClientRects())g===0||y===0||l.push(a(p,m,g,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(h(this,su)||I(this,su,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=h(this,su))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=h(this,su))==null?void 0:s.get(e.data.id);if(!t)return;const r=h(this,ui).getRawValue(t);r&&(h(this,Qt)===xe.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}};nu=new WeakMap,ir=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,ru=new WeakMap,ui=new WeakMap,su=new WeakMap,Hr=new WeakMap,iu=new WeakMap,Ga=new WeakMap,ys=new WeakMap,Wr=new WeakMap,qa=new WeakMap,Tf=new WeakMap,Cf=new WeakMap,_s=new WeakMap,ou=new WeakMap,mo=new WeakMap,ws=new WeakMap,vy=new WeakMap,go=new WeakMap,xf=new WeakMap,Ka=new WeakMap,Rf=new WeakMap,au=new WeakMap,Qt=new WeakMap,je=new WeakMap,hi=new WeakMap,Xa=new WeakMap,Pf=new WeakMap,If=new WeakMap,kf=new WeakMap,Lf=new WeakMap,Mf=new WeakMap,Nf=new WeakMap,Df=new WeakMap,Of=new WeakMap,Ff=new WeakMap,Vf=new WeakMap,jf=new WeakMap,Bf=new WeakMap,Uf=new WeakMap,vo=new WeakMap,Es=new WeakMap,di=new WeakMap,$f=new WeakMap,ee=new WeakSet,Vg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},jL=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=k(this,ee,Vg).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(h(this,ws)||I(this,ws,new qU(this)),h(this,ws).show(r,s,this.direction==="ltr"))},BL=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){h(this,hi)&&((i=h(this,ws))==null||i.hide(),I(this,hi,null),k(this,ee,Cn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===h(this,hi))return;if(!k(this,ee,Vg).call(this,e).closest(".textLayer")){h(this,hi)&&((o=h(this,ws))==null||o.hide(),I(this,hi,null),k(this,ee,Cn).call(this,{hasSelectedText:!1}));return}if((a=h(this,ws))==null||a.hide(),I(this,hi,t),k(this,ee,Cn).call(this,{hasSelectedText:!0}),!(h(this,Qt)!==xe.HIGHLIGHT&&h(this,Qt)!==xe.NONE)&&(h(this,Qt)===xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),I(this,mo,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=this._signal,c=u=>{u.type==="pointerup"&&u.button!==0||(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),u.type==="pointerup"&&k(this,ee,jg).call(this,"main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}},jg=function(e=""){h(this,Qt)===xe.HIGHLIGHT?this.highlightSelection(e):h(this,Tf)&&k(this,ee,jL).call(this)},UL=function(){document.addEventListener("selectionchange",k(this,ee,BL).bind(this),{signal:this._signal})},$L=function(){const e=this._signal;window.addEventListener("focus",h(this,kf),{signal:e}),window.addEventListener("blur",h(this,If),{signal:e})},zL=function(){window.removeEventListener("focus",h(this,kf)),window.removeEventListener("blur",h(this,If))},EE=function(){const e=this._signal;window.addEventListener("keydown",h(this,Df),{signal:e}),window.addEventListener("keyup",h(this,Of),{signal:e})},HL=function(){window.removeEventListener("keydown",h(this,Df)),window.removeEventListener("keyup",h(this,Of))},AE=function(){const e=this._signal;document.addEventListener("copy",h(this,Lf),{signal:e}),document.addEventListener("cut",h(this,Mf),{signal:e}),document.addEventListener("paste",h(this,Nf),{signal:e})},bE=function(){document.removeEventListener("copy",h(this,Lf)),document.removeEventListener("cut",h(this,Mf)),document.removeEventListener("paste",h(this,Nf))},WL=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Cn=function(e){Object.entries(e).some(([r,s])=>h(this,Uf)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,Uf),e)}),h(this,Qt)===xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,ee,io).call(this,[[pe.HIGHLIGHT_FREE,!0]]))},io=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},GL=function(){if(!h(this,go)){I(this,go,!0);for(const e of h(this,Yt).values())e.enable();for(const e of h(this,Pt).values())e.enable()}},qL=function(){if(this.unselectAll(),h(this,go)){I(this,go,!1);for(const e of h(this,Yt).values())e.disable();for(const e of h(this,Pt).values())e.disable()}},SE=function(e){const t=h(this,Yt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},KL=function(){let e=null;for(e of h(this,je));return e},hd=function(){if(h(this,Pt).size===0)return!0;if(h(this,Pt).size===1)for(const e of h(this,Pt).values())return e.isEmpty();return!1},TE=function(e){for(const t of h(this,je))t.unselect();h(this,je).clear();for(const t of e)t.isEmpty()||(h(this,je).add(t),t.select());k(this,ee,Cn).call(this,{hasSelectedEditor:this.hasSelection})},ve(Bc,"TRANSLATE_SMALL",1),ve(Bc,"TRANSLATE_BIG",10);let ql=Bc;var fi,pi,Gr,mi,or,lu,qr,zf,CE;const si=class si{constructor(e){L(this,zf);L(this,fi,"");L(this,pi,!1);L(this,Gr,null);L(this,mi,null);L(this,or,null);L(this,lu,!1);L(this,qr,null);I(this,qr,e)}static initialize(e){si._l10nPromise||(si._l10nPromise=e)}async render(){const e=I(this,Gr,document.createElement("button"));e.className="altText";const t=await si._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const r=h(this,qr)._uiManager._signal;e.addEventListener("contextmenu",Xn,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),h(this,qr)._uiManager.editAltText(h(this,qr))};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(I(this,lu,!0),s(i))},{signal:r}),await k(this,zf,CE).call(this),e}finish(){h(this,Gr)&&(h(this,Gr).focus({focusVisible:h(this,lu)}),I(this,lu,!1))}isEmpty(){return!h(this,fi)&&!h(this,pi)}get data(){return{altText:h(this,fi),decorative:h(this,pi)}}set data({altText:e,decorative:t}){h(this,fi)===e&&h(this,pi)===t||(I(this,fi,e),I(this,pi,t),k(this,zf,CE).call(this))}toggle(e=!1){h(this,Gr)&&(!e&&h(this,or)&&(clearTimeout(h(this,or)),I(this,or,null)),h(this,Gr).disabled=!e)}destroy(){var e;(e=h(this,Gr))==null||e.remove(),I(this,Gr,null),I(this,mi,null)}};fi=new WeakMap,pi=new WeakMap,Gr=new WeakMap,mi=new WeakMap,or=new WeakMap,lu=new WeakMap,qr=new WeakMap,zf=new WeakSet,CE=async function(){var s;const e=h(this,Gr);if(!e)return;if(!h(this,fi)&&!h(this,pi)){e.classList.remove("done"),(s=h(this,mi))==null||s.remove();return}e.classList.add("done"),si._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(i=>{e.setAttribute("aria-label",i)});let t=h(this,mi);if(!t){I(this,mi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const i=t.id=`alt-text-tooltip-${h(this,qr).id}`;e.setAttribute("aria-describedby",i);const o=100,a=h(this,qr)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(h(this,or)),I(this,or,null)},{once:!0}),e.addEventListener("mouseenter",()=>{I(this,or,setTimeout(()=>{I(this,or,null),h(this,mi).classList.add("show"),h(this,qr)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),e.addEventListener("mouseleave",()=>{var l;h(this,or)&&(clearTimeout(h(this,or)),I(this,or,null)),(l=h(this,mi))==null||l.classList.remove("show")},{signal:a})}t.innerText=h(this,pi)?await si._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):h(this,fi),t.parentNode||e.append(t);const r=h(this,qr).getImageForAltText();r==null||r.setAttribute("aria-describedby",t.id)},ve(si,"_l10nPromise",null);let Wv=si;var Ya,Kr,gn,cu,Qa,Jt,Ja,uu,hu,vn,Hf,Za,yo,Wf,el,gi,As,du,fu,Cr,Gf,yy,we,xE,qf,RE,PE,XL,YL,IE,kE,LE,QL,JL,ZL,eM,ME,dd;const qe=class qe{constructor(e){L(this,we);L(this,Ya,null);L(this,Kr,null);L(this,gn,null);L(this,cu,!1);L(this,Qa,!1);L(this,Jt,null);L(this,Ja,null);L(this,uu,this.focusin.bind(this));L(this,hu,this.focusout.bind(this));L(this,vn,null);L(this,Hf,"");L(this,Za,!1);L(this,yo,null);L(this,Wf,!1);L(this,el,!1);L(this,gi,!1);L(this,As,null);L(this,du,0);L(this,fu,0);L(this,Cr,null);ve(this,"_initialOptions",Object.create(null));ve(this,"_isVisible",!0);ve(this,"_uiManager",null);ve(this,"_focusEventsAllowed",!0);ve(this,"_l10nPromise",null);L(this,Gf,!1);L(this,yy,qe._zIndex++);this.constructor===qe&&ze("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=qe.prototype._resizeWithKeyboard,t=ql.TRANSLATE_SMALL,r=ql.TRANSLATE_BIG;return Le(this,"_resizerKeyboardManager",new lm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],qe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new QU({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,r){if(qe._l10nPromise||(qe._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(i=>[i,e.get(i.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),r!=null&&r.strings)for(const i of r.strings)qe._l10nPromise.set(i,e.get(i));if(qe._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);qe._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,Gf)}set _isDraggable(e){var t;I(this,Gf,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,yy)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,we,dd).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(h(this,Za)?I(this,Za,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/o,this.fixAndSetPosition()}translate(e,t){k(this,we,xE).call(this,this.parentDimensions,e,t)}translateInPage(e,t){h(this,yo)||I(this,yo,[this.x,this.y]),k(this,we,xE).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){h(this,yo)||I(this,yo,[this.x,this.y]);const[r,s]=this.parentDimensions;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:o}=this;const[a,l]=this.getBaseTranslation();i+=a,o+=l,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!h(this,yo)&&(h(this,yo)[0]!==this.x||h(this,yo)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=qe,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:s,y:i,width:o,height:a}=this;if(o*=t,a*=r,s*=t,i*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-o,s)),i=Math.max(0,Math.min(r-a,i));break;case 90:s=Math.max(0,Math.min(t-a,s)),i=Math.min(r,Math.max(o,i));break;case 180:s=Math.min(t,Math.max(o,s)),i=Math.min(r,Math.max(a,i));break;case 270:s=Math.min(t,Math.max(a,s)),i=Math.max(0,Math.min(r-o,i));break}this.x=s/=t,this.y=i/=r;const[l,c]=this.getBaseTranslation();s+=l,i+=c;const{style:u}=this.div;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return k(r=qe,qf,RE).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return k(r=qe,qf,RE).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this,s=t*e,i=r*e;return Hn.isCSSRoundSupported?[Math.round(s),Math.round(i)]:[s,i]}setDims(e,t){const[r,s]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,h(this,Qa)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!h(this,Qa)&&t.endsWith("%");if(s&&i)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!h(this,Qa)&&!i&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=h(this,gn))==null||e.finish()}async addEditToolbar(){return h(this,vn)||h(this,el)?h(this,vn):(I(this,vn,new gE(this)),this.div.append(h(this,vn).render()),h(this,gn)&&h(this,vn).addAltTextButton(await h(this,gn).render()),h(this,vn))}removeEditToolbar(){var e;h(this,vn)&&(h(this,vn).remove(),I(this,vn,null),(e=h(this,gn))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){h(this,gn)||(Wv.initialize(qe._l10nPromise),I(this,gn,new Wv(this)),h(this,Ya)&&(h(this,gn).data=h(this,Ya),I(this,Ya,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=h(this,gn))==null?void 0:e.data}set altTextData(e){h(this,gn)&&(h(this,gn).data=e)}hasAltText(){var e;return!((e=h(this,gn))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=h(this,cu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",h(this,uu),{signal:e}),this.div.addEventListener("focusout",h(this,hu),{signal:e});const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*r/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Hv(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(I(this,Za,!0),this._isDraggable){k(this,we,QL).call(this,e);return}k(this,we,LE).call(this,e)}moveInDOM(){h(this,As)&&clearTimeout(h(this,As)),I(this,As,setTimeout(()=>{var e;I(this,As,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/s,u=t/s,f=this.x*i,p=this.y*o,m=this.width*i,g=this.height*o;switch(r){case 0:return[f+c+a,o-p-u-g+l,f+c+m+a,o-p-u+l];case 90:return[f+u+a,o-p+c+l,f+u+g+a,o-p+c+m+l];case 180:return[f-c-m+a,o-p+u+l,f-c+a,o-p+u+g+l];case 270:return[f-u-g+a,o-p-c-m+l,f-u+a,o-p-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,o]=e,a=i-r,l=o-s;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-s,l,a];case 180:return[i,t-s,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){I(this,el,!0)}disableEditMode(){I(this,el,!1)}isInEditMode(){return h(this,el)}shouldGetKeyboardEvents(){return h(this,gi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,r;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",h(this,uu),{signal:e}),(r=this.div)==null||r.addEventListener("focusout",h(this,hu),{signal:e})}rotate(e){}serialize(e=!1,t=null){ze("An editor must be serializable")}static deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});s.rotation=e.rotation,I(s,Ya,e.accessibilityData);const[i,o]=s.pageDimensions,[a,l,c,u]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/i,s.y=l/o,s.width=c/i,s.height=u/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",h(this,uu)),this.div.removeEventListener("focusout",h(this,hu)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(this,As)&&(clearTimeout(h(this,As)),I(this,As,null)),k(this,we,dd).call(this),this.removeEditToolbar(),h(this,Cr)){for(const e of h(this,Cr).values())clearTimeout(e);I(this,Cr,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,we,XL).call(this),h(this,Jt).classList.remove("hidden"),Hv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),I(this,Ja,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=h(this,Jt).children;if(!h(this,Kr)){I(this,Kr,Array.from(t));const o=k(this,we,JL).bind(this),a=k(this,we,ZL).bind(this),l=this._uiManager._signal;for(const c of h(this,Kr)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",k(this,we,eM).bind(this,u),{signal:l}),qe._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(f=>c.setAttribute("aria-label",f))}}const r=h(this,Kr)[0];let s=0;for(const o of t){if(o===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(h(this,Kr).length/4);if(i!==s){if(i<s)for(let a=0;a<s-i;a++)h(this,Jt).append(h(this,Jt).firstChild);else if(i>s)for(let a=0;a<i-s;a++)h(this,Jt).firstChild.before(h(this,Jt).lastChild);let o=0;for(const a of t){const c=h(this,Kr)[o++].getAttribute("data-resizer-name");qe._l10nPromise.get(`pdfjs-editor-resizer-label-${c}`).then(u=>a.setAttribute("aria-label",u))}}k(this,we,ME).call(this,0),I(this,gi,!0),h(this,Jt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){h(this,gi)&&k(this,we,kE).call(this,h(this,Hf),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){k(this,we,dd).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!h(this,vn)){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=h(this,vn))==null||s.show())});return}(t=h(this,vn))==null||t.show()}unselect(){var e,t,r,s;(e=h(this,Jt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=h(this,vn))==null||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return h(this,Wf)}set isEditing(e){I(this,Wf,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){I(this,Qa,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){h(this,Cr)||I(this,Cr,new Map);const{action:r}=e;let s=h(this,Cr).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),h(this,Cr).delete(r),h(this,Cr).size===0&&I(this,Cr,null)},qe._telemetryTimeout),h(this,Cr).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),I(this,cu,!1)}disable(){this.div&&(this.div.tabIndex=-1),I(this,cu,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ya=new WeakMap,Kr=new WeakMap,gn=new WeakMap,cu=new WeakMap,Qa=new WeakMap,Jt=new WeakMap,Ja=new WeakMap,uu=new WeakMap,hu=new WeakMap,vn=new WeakMap,Hf=new WeakMap,Za=new WeakMap,yo=new WeakMap,Wf=new WeakMap,el=new WeakMap,gi=new WeakMap,As=new WeakMap,du=new WeakMap,fu=new WeakMap,Cr=new WeakMap,Gf=new WeakMap,yy=new WeakMap,we=new WeakSet,xE=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this.fixAndSetPosition()},qf=new WeakSet,RE=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},PE=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},XL=function(){if(h(this,Jt))return;I(this,Jt,document.createElement("div")),h(this,Jt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");h(this,Jt).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",k(this,we,YL).bind(this,r),{signal:t}),s.addEventListener("contextmenu",Xn,{signal:t}),s.tabIndex=-1}this.div.prepend(h(this,Jt))},YL=function(e,t){var y;t.preventDefault();const{isMac:r}=Hn.platform;if(t.button!==0||t.ctrlKey&&r)return;(y=h(this,gn))==null||y.toggle(!1);const s=k(this,we,kE).bind(this,e),i=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",Xn,{signal:o});const l=this.x,c=this.y,u=this.width,f=this.height,p=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const g=()=>{var w;this.parent.togglePointerEvents(!0),(w=h(this,gn))==null||w.toggle(!0),this._isDraggable=i,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",Xn),this.parent.div.style.cursor=p,this.div.style.cursor=m,k(this,we,IE).call(this,l,c,u,f)};window.addEventListener("pointerup",g,{signal:o}),window.addEventListener("blur",g,{signal:o})},IE=function(e,t,r,s){const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===r&&l===s||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=i,this.y=o;const[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=s,this.x=e,this.y=t;const[c,u]=this.parentDimensions;this.setDims(c*r,u*s),this.fixAndSetPosition()},mustExec:!0})},kE=function(e,t){const[r,s]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,c=qe.MIN_SIZE/r,u=qe.MIN_SIZE/s,f=U=>Math.round(U*1e4)/1e4,p=k(this,we,PE).call(this,this.rotation),m=(U,B)=>[p[0]*U+p[2]*B,p[1]*U+p[3]*B],g=k(this,we,PE).call(this,360-this.rotation),y=(U,B)=>[g[0]*U+g[2]*B,g[1]*U+g[3]*B];let w,v,E=!1,S=!1;switch(e){case"topLeft":E=!0,w=(U,B)=>[0,0],v=(U,B)=>[U,B];break;case"topMiddle":w=(U,B)=>[U/2,0],v=(U,B)=>[U/2,B];break;case"topRight":E=!0,w=(U,B)=>[U,0],v=(U,B)=>[0,B];break;case"middleRight":S=!0,w=(U,B)=>[U,B/2],v=(U,B)=>[0,B/2];break;case"bottomRight":E=!0,w=(U,B)=>[U,B],v=(U,B)=>[0,0];break;case"bottomMiddle":w=(U,B)=>[U/2,B],v=(U,B)=>[U/2,0];break;case"bottomLeft":E=!0,w=(U,B)=>[0,B],v=(U,B)=>[U,0];break;case"middleLeft":S=!0,w=(U,B)=>[0,B/2],v=(U,B)=>[U,B/2];break}const R=w(a,l),O=v(a,l);let j=m(...O);const C=f(i+j[0]),T=f(o+j[1]);let P=1,M=1,[F,V]=this.screenToPageTranslation(t.movementX,t.movementY);if([F,V]=y(F/r,V/s),E){const U=Math.hypot(a,l);P=M=Math.max(Math.min(Math.hypot(O[0]-R[0]-F,O[1]-R[1]-V)/U,1/a,1/l),c/a,u/l)}else S?P=Math.max(c,Math.min(1,Math.abs(O[0]-R[0]-F)))/a:M=Math.max(u,Math.min(1,Math.abs(O[1]-R[1]-V)))/l;const D=f(a*P),z=f(l*M);j=m(...v(D,z));const $=C-j[0],W=T-j[1];this.width=D,this.height=z,this.x=$,this.y=W,this.setDims(r*D,s*z),this.fixAndSetPosition()},LE=function(e){const{isMac:t}=Hn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},QL=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let r,s;const i=this._uiManager._signal;t&&(this.div.classList.add("moving"),r={passive:!0,capture:!0,signal:i},I(this,du,e.clientX),I(this,fu,e.clientY),s=a=>{const{clientX:l,clientY:c}=a,[u,f]=this.screenToPageTranslation(l-h(this,du),c-h(this,fu));I(this,du,l),I(this,fu,c),this._uiManager.dragSelectedEditors(u,f)},window.addEventListener("pointermove",s,r));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,r)),I(this,Za,!1),this._uiManager.endDragSession()||k(this,we,LE).call(this,e)};window.addEventListener("pointerup",o,{signal:i}),window.addEventListener("blur",o,{signal:i})},JL=function(e){qe._resizerKeyboardManager.exec(this,e)},ZL=function(e){var t;h(this,gi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==h(this,Jt)&&k(this,we,dd).call(this)},eM=function(e){I(this,Hf,h(this,gi)?e:"")},ME=function(e){if(h(this,Kr))for(const t of h(this,Kr))t.tabIndex=e},dd=function(){if(I(this,gi,!1),k(this,we,ME).call(this,-1),h(this,Ja)){const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=h(this,Ja);k(this,we,IE).call(this,e,t,r,s),I(this,Ja,null)}},L(qe,qf),ve(qe,"_borderLineWidth",-1),ve(qe,"_colorManager",new wE),ve(qe,"_zIndex",1),ve(qe,"_telemetryTimeout",1e3);let Be=qe;class QU extends Be{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const GC=3285377520,Sr=4294901760,ps=65535;class tM{constructor(e){this.h1=e?e&4294967295:GC,this.h2=e?e&4294967295:GC}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let y=0,w=e.length;y<w;y++){const v=e.charCodeAt(y);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,l=0,c=this.h1,u=this.h2;const f=3432918353,p=461845907,m=f&ps,g=p&ps;for(let y=0;y<s;y++)y&1?(a=o[y],a=a*f&Sr|a*m&ps,a=a<<15|a>>>17,a=a*p&Sr|a*g&ps,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[y],l=l*f&Sr|l*m&ps,l=l<<15|l>>>17,l=l*p&Sr|l*g&ps,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,i){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*f&Sr|a*m&ps,a=a<<15|a>>>17,a=a*p&Sr|a*g&ps,s&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Sr|e*36045&ps,t=t*4283543511&Sr|((t<<16|e>>>16)*2950163797&Sr)>>>16,e^=t>>>1,e=e*444984403&Sr|e*60499&ps,t=t*3301882366&Sr|((t<<16|e>>>16)*3120437893&Sr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const NE=Object.freeze({map:null,hash:"",transfer:void 0});var tl,Zt,_y,nM;class TS{constructor(){L(this,_y);L(this,tl,!1);L(this,Zt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=h(this,Zt).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return h(this,Zt).get(e)}remove(e){if(h(this,Zt).delete(e),h(this,Zt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of h(this,Zt).values())if(t instanceof Be)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=h(this,Zt).get(e);let s=!1;if(r!==void 0)for(const[i,o]of Object.entries(t))r[i]!==o&&(s=!0,r[i]=o);else s=!0,h(this,Zt).set(e,t);s&&k(this,_y,nM).call(this),t instanceof Be&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return h(this,Zt).has(e)}getAll(){return h(this,Zt).size>0?yS(h(this,Zt)):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return h(this,Zt).size}resetModified(){h(this,tl)&&(I(this,tl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rM(this)}get serializable(){if(h(this,Zt).size===0)return NE;const e=new Map,t=new tM,r=[],s=Object.create(null);let i=!1;for(const[o,a]of h(this,Zt)){const l=a instanceof Be?a.serialize(!1,s):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:NE}get editorStats(){let e=null;const t=new Map;for(const r of h(this,Zt).values()){if(!(r instanceof Be))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[a,l]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}}tl=new WeakMap,Zt=new WeakMap,_y=new WeakSet,nM=function(){h(this,tl)||(I(this,tl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Kf;class rM extends TS{constructor(t){super();L(this,Kf);const{map:r,hash:s,transfer:i}=t.serializable,o=structuredClone(r,i?{transfer:i}:null);I(this,Kf,{map:o,hash:s,transfer:i})}get print(){ze("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,Kf)}}Kf=new WeakMap;var pu;class JU{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){L(this,pu,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),h(this,pu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||h(this,pu).has(e.loadedName))){if(Dt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:i}=e,o=new FontFace(r,s,i);this.addNativeFontFace(o);try{await o.load(),h(this,pu).add(r),t==null||t(e)}catch{_e(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw _e(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Le(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(bn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Le(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Dt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Le(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(R,O){return R.charCodeAt(O)<<24|R.charCodeAt(O+1)<<16|R.charCodeAt(O+2)<<8|R.charCodeAt(O+3)&255}function s(R,O,j,C){const T=R.substring(0,O),P=R.substring(O+j);return T+C+P}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(R,O){if(++c>30){_e("Load test font never loaded."),O();return}if(l.font="30px "+R,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(u.bind(null,R,O))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,f.length,f);const g=16,y=1482184792;let w=r(p,g);for(i=0,o=f.length-3;i<o;i+=4)w=w-y+r(f,i)|0;i<f.length&&(w=w-y+r(f+"XXX",i)|0),p=s(p,g,4,DU(w));const v=`url(data:font/opentype;base64,${btoa(p)});`,E=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(E);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const R of[e.loadedName,f]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=R,S.append(O)}this._document.body.append(S),u(f,()=>{S.remove(),t.complete()})}}pu=new WeakMap;class ZU{constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=SL(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),r}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(i){_e(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(i,o){};const s=[];for(let i=0,o=r.length;i<o;)switch(r[i++]){case ei.BEZIER_CURVE_TO:{const[a,l,c,u,f,p]=r.slice(i,i+6);s.push(m=>m.bezierCurveTo(a,l,c,u,f,p)),i+=6}break;case ei.MOVE_TO:{const[a,l]=r.slice(i,i+2);s.push(c=>c.moveTo(a,l)),i+=2}break;case ei.LINE_TO:{const[a,l]=r.slice(i,i+2);s.push(c=>c.lineTo(a,l)),i+=2}break;case ei.QUADRATIC_CURVE_TO:{const[a,l,c,u]=r.slice(i,i+4);s.push(f=>f.quadraticCurveTo(a,l,c,u)),i+=4}break;case ei.RESTORE:s.push(a=>a.restore());break;case ei.SAVE:s.push(a=>a.save());break;case ei.SCALE:Dt(s.length===2,"Scale command is only valid at the third position.");break;case ei.TRANSFORM:{const[a,l,c,u,f,p]=r.slice(i,i+6);s.push(m=>m.transform(a,l,c,u,f,p)),i+=6}break;case ei.TRANSLATE:{const[a,l]=r.slice(i,i+2);s.push(c=>c.translate(a,l)),i+=2}break}return this.compiledGlyphs[t]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let l=2,c=s.length;l<c;l++)s[l](o)}}}if(bn){var DE=Promise.withResolvers(),Fd=null;(async()=>{const e=await tg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await tg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await tg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await tg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let i,o;return new Map(Object.entries({fs:e,http:t,https:r,url:s,canvas:i,path2d:o}))})().then(e=>{Fd=e,DE.resolve()},e=>{_e(`loadPackages: ${e}`),Fd=new Map,DE.resolve()})}class zs{static get promise(){return DE.promise}static get(e){return Fd==null?void 0:Fd.get(e)}}const sM=function(n){return zs.get("fs").promises.readFile(n).then(t=>new Uint8Array(t))};class e$ extends u_{}class t$ extends zv{_createCanvas(e,t){return zs.get("canvas").createCanvas(e,t)}}class n$ extends h_{_fetchData(e,t){return sM(e).then(r=>({cMapData:r,compressionType:t}))}}class r$ extends d_{_fetchData(e){return sM(e)}}const In={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function OE(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class cm{constructor(){this.constructor===cm&&ze("Cannot initialize BaseShadingPattern.")}getPattern(){ze("Abstract method `getPattern` called.")}}class s$ extends cm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===In.STROKE||s===In.FILL){const o=t.current.getClippedPathBoundingBox(s,ot(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l,!0),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=ae.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),OE(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(r);i.setTransform(f)}else OE(e,this._bbox),i=this._createGradient(e);return i}}function B0(n,e,t,r,s,i,o,a){const l=e.coords,c=e.colors,u=n.data,f=n.width*4;let p;l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=o,o=p),l[r+1]>l[s+1]&&(p=r,r=s,s=p,p=o,o=a,a=p),l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=o,o=p);const m=(l[t]+e.offsetX)*e.scaleX,g=(l[t+1]+e.offsetY)*e.scaleY,y=(l[r]+e.offsetX)*e.scaleX,w=(l[r+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,E=(l[s+1]+e.offsetY)*e.scaleY;if(g>=E)return;const S=c[i],R=c[i+1],O=c[i+2],j=c[o],C=c[o+1],T=c[o+2],P=c[a],M=c[a+1],F=c[a+2],V=Math.round(g),D=Math.round(E);let z,$,W,U,B,H,X,ne;for(let J=V;J<=D;J++){if(J<w){const ce=J<g?0:(g-J)/(g-w);z=m-(m-y)*ce,$=S-(S-j)*ce,W=R-(R-C)*ce,U=O-(O-T)*ce}else{let ce;J>E?ce=1:w===E?ce=0:ce=(w-J)/(w-E),z=y-(y-v)*ce,$=j-(j-P)*ce,W=C-(C-M)*ce,U=T-(T-F)*ce}let re;J<g?re=0:J>E?re=1:re=(g-J)/(g-E),B=m-(m-v)*re,H=S-(S-P)*re,X=R-(R-M)*re,ne=O-(O-F)*re;const me=Math.round(Math.min(z,B)),Fe=Math.round(Math.max(z,B));let be=f*J+me*4;for(let ce=me;ce<=Fe;ce++)re=(z-ce)/(z-B),re<0?re=0:re>1&&(re=1),u[be++]=$-($-H)*re|0,u[be++]=W-(W-X)*re|0,u[be++]=U-(U-ne)*re|0,u[be++]=255}}function i$(n,e,t){const r=e.coords,s=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(i=0;i<l;i++){let u=i*a;for(let f=0;f<c;f++,u++)B0(n,t,r[u],r[u+1],r[u+a],s[u],s[u+1],s[u+a]),B0(n,t,r[u+a+1],r[u+1],r[u+a],s[u+a+1],s[u+1],s[u+a])}break;case"triangles":for(i=0,o=r.length;i<o;i+=3)B0(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class o$ extends cm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),m=c/f,g=u/p,y={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/g},w=f+2*2,v=p+2*2,E=r.getCanvas("mesh",w,v,!1),S=E.context,R=S.createImageData(f,p);if(t){const j=R.data;for(let C=0,T=j.length;C<T;C+=4)j[C]=t[0],j[C+1]=t[1],j[C+2]=t[2],j[C+3]=255}for(const j of this._figures)i$(R,j,y);return S.putImageData(R,2,2),{canvas:E.canvas,offsetX:a-2*m,offsetY:l-2*g,scaleX:m,scaleY:g}}getPattern(e,t,r,s){OE(e,this._bbox);let i;if(s===In.SHADING)i=ae.singularValueDecompose2dScale(ot(e));else if(i=ae.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=ae.singularValueDecompose2dScale(this.matrix);i=[i[0]*a[0],i[1]*a[1]]}const o=this._createMeshCanvas(i,s===In.SHADING?null:this._background,t.cachedCanvases);return s!==In.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class a$ extends cm{getPattern(){return"hotpink"}}function l$(n){switch(n[0]){case"RadialAxial":return new s$(n);case"Mesh":return new o$(n);case"Dummy":return new a$}throw new Error(`Unknown IR type: ${n[0]}`)}const qC={COLORED:1,UNCOLORED:2},wy=class wy{constructor(e,t,r,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,r=this.bbox,s=this.xstep,i=this.ystep,o=this.paintType,a=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;a_("TilingType: "+a);const u=r[0],f=r[1],p=r[2],m=r[3],g=ae.singularValueDecompose2dScale(this.matrix),y=ae.singularValueDecompose2dScale(this.baseTransform),w=[g[0]*y[0],g[1]*y[1]],v=this.getSizeAndScale(s,this.ctx.canvas.width,w[0]),E=this.getSizeAndScale(i,this.ctx.canvas.height,w[1]),S=e.cachedCanvases.getCanvas("pattern",v.size,E.size,!0),R=S.context,O=c.createCanvasGraphics(R);O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,o,l);let j=u,C=f,T=p,P=m;return u<0&&(j=0,T+=Math.abs(u)),f<0&&(C=0,P+=Math.abs(f)),R.translate(-(v.scale*j),-(E.scale*C)),O.transform(v.scale,0,0,E.scale,0,0),R.save(),this.clipBbox(O,j,C,T,P),O.baseTransform=ot(O.ctx),O.executeOperatorList(t),O.endDrawing(),{canvas:S.canvas,scaleX:v.scale,scaleY:E.scale,offsetX:j,offsetY:C}}getSizeAndScale(e,t,r){e=Math.abs(e);const s=Math.max(wy.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const o=s-t,a=i-r;e.ctx.rect(t,r,o,a),e.current.updateRectMinMax(ot(e.ctx),[t,r,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case qC.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,i.fillColor=o.fillStyle,i.strokeColor=o.strokeStyle;break;case qC.UNCOLORED:const a=ae.makeHexColor(r[0],r[1],r[2]);s.fillStyle=a,s.strokeStyle=a,i.fillColor=a,i.strokeColor=a;break;default:throw new NU(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,s){let i=r;s!==In.SHADING&&(i=ae.transform(i,t.baseTransform),this.matrix&&(i=ae.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};ve(wy,"MAX_PATTERN_SIZE",3e3);let FE=wy;function c$({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=Hn.isLittleEndian?4278190080:255,[l,c]=o?[i,a]:[a,i],u=r>>3,f=r&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let g=0;g<s;g++){for(const w=e+u;e<w;e++){const v=e<p?n[e]:255;t[m++]=v&128?c:l,t[m++]=v&64?c:l,t[m++]=v&32?c:l,t[m++]=v&16?c:l,t[m++]=v&8?c:l,t[m++]=v&4?c:l,t[m++]=v&2?c:l,t[m++]=v&1?c:l}if(f===0)continue;const y=e<p?n[e++]:255;for(let w=0;w<f;w++)t[m++]=y&1<<7-w?c:l}return{srcPos:e,destPos:m}}const KC=16,XC=100,u$=15,YC=10,QC=1e3,Bn=16;function h$(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,s){e.translate(r,s),this.__originalTranslate(r,s)},n.scale=function(r,s){e.scale(r,s),this.__originalScale(r,s)},n.transform=function(r,s,i,o,a,l){e.transform(r,s,i,o,a,l),this.__originalTransform(r,s,i,o,a,l)},n.setTransform=function(r,s,i,o,a,l){e.setTransform(r,s,i,o,a,l),this.__originalSetTransform(r,s,i,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,o,a){e.bezierCurveTo(t,r,s,i,o,a),this.__originalBezierCurveTo(t,r,s,i,o,a)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class d${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ng(n,e,t,r,s,i,o,a,l,c){const[u,f,p,m,g,y]=ot(n);if(f===0&&p===0){const E=o*u+g,S=Math.round(E),R=a*m+y,O=Math.round(R),j=(o+l)*u+g,C=Math.abs(Math.round(j)-S)||1,T=(a+c)*m+y,P=Math.abs(Math.round(T)-O)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(m),S,O),n.drawImage(e,t,r,s,i,0,0,C,P),n.setTransform(u,f,p,m,g,y),[C,P]}if(u===0&&m===0){const E=a*p+g,S=Math.round(E),R=o*f+y,O=Math.round(R),j=(a+c)*p+g,C=Math.abs(Math.round(j)-S)||1,T=(o+l)*f+y,P=Math.abs(Math.round(T)-O)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,S,O),n.drawImage(e,t,r,s,i,0,0,P,C),n.setTransform(u,f,p,m,g,y),[P,C]}n.drawImage(e,t,r,s,i,o,a,l,c);const w=Math.hypot(u,f),v=Math.hypot(p,m);return[w*l,v*c]}function f$(n){const{width:e,height:t}=n;if(e>QC||t>QC)return null;const r=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let o=new Uint8Array(i*(t+1)),a,l,c;const u=e+7&-8;let f=new Uint8Array(u*t),p=0;for(const v of n.data){let E=128;for(;E>0;)f[p++]=v&E?0:255,E>>=1}let m=0;for(p=0,f[p]!==0&&(o[0]=1,++m),l=1;l<e;l++)f[p]!==f[p+1]&&(o[l]=f[p]?2:1,++m),p++;for(f[p]!==0&&(o[l]=2,++m),a=1;a<t;a++){p=a*u,c=a*i,f[p-u]!==f[p]&&(o[c]=f[p]?1:8,++m);let v=(f[p]?4:0)+(f[p-u]?8:0);for(l=1;l<e;l++)v=(v>>2)+(f[p+1]?4:0)+(f[p-u+1]?8:0),s[v]&&(o[c+l]=s[v],++m),p++;if(f[p-u]!==f[p]&&(o[c+l]=f[p]?2:4,++m),m>r)return null}for(p=u*(t-1),c=a*i,f[p]!==0&&(o[c]=8,++m),l=1;l<e;l++)f[p]!==f[p+1]&&(o[c+l]=f[p]?4:8,++m),p++;if(f[p]!==0&&(o[c+l]=4,++m),m>r)return null;const g=new Int32Array([0,i,-1,0,-i,0,0,0,1]),y=new Path2D;for(a=0;m&&a<=t;a++){let v=a*i;const E=v+e;for(;v<E&&!o[v];)v++;if(v===E)continue;y.moveTo(v%i,a);const S=v;let R=o[v];do{const O=g[R];do v+=O;while(!o[v]);const j=o[v];j!==5&&j!==10?(R=j,o[v]=0):(R=j&51*R>>4,o[v]&=R>>2|R<<2),y.lineTo(v%i,v/i|0),o[v]||--m}while(S!==v);--a}return f=null,o=null,function(v){v.save(),v.scale(1/e,-1/t),v.translate(0,-t),v.fill(y),v.beginPath(),v.restore()}}class JC{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=AL,this.textMatrixScale=1,this.fontMatrix=cE,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=pn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=ae.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=ae.applyTransform(t,e),s=ae.applyTransform(t.slice(2),e),i=ae.applyTransform([t[0],t[3]],e),o=ae.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],s[0],i[0],o[0]),this.minY=Math.min(this.minY,r[1],s[1],i[1],o[1]),this.maxX=Math.max(this.maxX,r[0],s[0],i[0],o[0]),this.maxY=Math.max(this.maxY,r[1],s[1],i[1],o[1])}updateScalingPathMinMax(e,t){ae.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,s,i,o,a,l,c,u){const f=ae.bezierBoundingBox(t,r,s,i,o,a,l,c,u);u||this.updateRectMinMax(e,f)}getPathBoundingBox(e=In.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===In.STROKE){t||ze("Stroke bounding box must include transform.");const s=ae.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;r[0]-=i,r[1]-=o,r[2]+=i,r[3]+=o}return r}updateClipFromPath(){const e=ae.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=In.FILL,t=null){return ae.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ZC(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Bn,i=(t-s)/Bn,o=s===0?i:i+1,a=n.createImageData(r,Bn);let l=0,c;const u=e.data,f=a.data;let p,m,g,y;if(e.kind===Ng.GRAYSCALE_1BPP){const w=u.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),E=v.length,S=r+7>>3,R=4294967295,O=Hn.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(g=p<i?Bn:s,c=0,m=0;m<g;m++){const j=w-l;let C=0;const T=j>S?r:j*8-7,P=T&-8;let M=0,F=0;for(;C<P;C+=8)F=u[l++],v[c++]=F&128?R:O,v[c++]=F&64?R:O,v[c++]=F&32?R:O,v[c++]=F&16?R:O,v[c++]=F&8?R:O,v[c++]=F&4?R:O,v[c++]=F&2?R:O,v[c++]=F&1?R:O;for(;C<T;C++)M===0&&(F=u[l++],M=128),v[c++]=F&M?R:O,M>>=1}for(;c<E;)v[c++]=0;n.putImageData(a,0,p*Bn)}}else if(e.kind===Ng.RGBA_32BPP){for(m=0,y=r*Bn*4,p=0;p<i;p++)f.set(u.subarray(l,l+y)),l+=y,n.putImageData(a,0,m),m+=Bn;p<o&&(y=r*s*4,f.set(u.subarray(l,l+y)),n.putImageData(a,0,m))}else if(e.kind===Ng.RGB_24BPP)for(g=Bn,y=r*g,p=0;p<o;p++){for(p>=i&&(g=s,y=r*g),c=0,m=y;m--;)f[c++]=u[l++],f[c++]=u[l++],f[c++]=u[l++],f[c++]=255;n.putImageData(a,0,p*Bn)}else throw new Error(`bad image kind: ${e.kind}`)}function ex(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Bn,i=(t-s)/Bn,o=s===0?i:i+1,a=n.createImageData(r,Bn);let l=0;const c=e.data,u=a.data;for(let f=0;f<o;f++){const p=f<i?Bn:s;({srcPos:l}=c$({src:c,srcPos:l,dest:u,width:r,height:p,nonBlackColor:0})),n.putImageData(a,0,f*Bn)}}function ed(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function rg(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!bn){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function tx(n,e){if(e)return!0;const t=ae.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*ra.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const p$=["butt","round","square"],m$=["miter","round","bevel"],g$={},nx={};var ua,VE,jE;const a1=class a1{constructor(e,t,r,s,i,{optionalContentConfig:o,markedContentStack:a=null},l,c){L(this,ua);this.ctx=e,this.current=new JC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new d$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...ot(this.compositeCtx))}this.ctx.save(),rg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ot(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,o=e.fnArray;let a=t||0;const l=i.length;if(l===a)return a;const c=l-a>YC&&typeof r=="function",u=c?Date.now()+u$:0;let f=0;const p=this.commonObjs,m=this.objs;let g;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,r),a;if(g=o[a],g!==zr.dependency)this[g].apply(this,i[a]);else for(const y of i[a]){const w=y.startsWith("g_")?p:m;if(!w.has(y))return w.get(y,r),a}if(a++,a===l)return a;if(c&&++f>YC){if(Date.now()>u)return r(),a;f=0}}}endDrawing(){k(this,ua,VE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,ua,jE).call(this)}_scaleImage(e,t){const r=e.width,s=e.height;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=s,c="prescale1",u,f;for(;i>2&&a>1||o>2&&l>1;){let p=a,m=l;i>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/p),o>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/m),u=this.cachedCanvases.getCanvas(c,p,m),f=u.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,a,l,0,0,p,m),e=u.canvas,a=p,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,o=this.current.patternFill,a=ot(t);let l,c,u,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),i]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const P=l.get(c);if(P&&!o){const M=Math.round(Math.min(a[0],a[2])+a[4]),F=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:P,offsetX:M,offsetY:F}}u=P}u||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),ex(f.context,e));let p=ae.transform(a,[1/r,0,0,-1/s,0,0]);p=ae.transform(p,[1,0,0,1,0,-s]);const[m,g,y,w]=ae.getAxialAlignedBoundingBox([0,0,r,s],p),v=Math.round(y-m)||1,E=Math.round(w-g)||1,S=this.cachedCanvases.getCanvas("fillCanvas",v,E),R=S.context,O=m,j=g;R.translate(-O,-j),R.transform(...p),u||(u=this._scaleImage(f.canvas,ti(R)),u=u.img,l&&o&&l.set(c,u)),R.imageSmoothingEnabled=tx(ot(R),e.interpolate),ng(R,u,0,0,u.width,u.height,0,0,r,s),R.globalCompositeOperation="source-in";const C=ae.transform(ti(R),[1,0,0,1,-O,-j]);return R.fillStyle=o?i.getPattern(t,this,C,In.FILL):i,R.fillRect(0,0,r,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,S.canvas)),{canvas:S.canvas,offsetX:Math.round(O),offsetY:Math.round(j)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=p$[e]}setLineJoin(e){this.ctx.lineJoin=m$[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...ot(this.suspendedCtx)),ed(this.suspendedCtx,i),h$(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ed(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],o=s[1],a=s[2]-i,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,o,a,l,c,u,f){let p=e.canvas,m=l-u,g=c-f;if(o){if(m<0||g<0||m+r>p.width||g+s>p.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,s),v=w.context;v.drawImage(p,-m,-g),o.some(E=>E!==0)&&(v.globalCompositeOperation="destination-atop",v.fillStyle=ae.makeHexColor(...o),v.fillRect(0,0,r,s),v.globalCompositeOperation="source-over"),p=w.canvas,m=g=0}else if(o.some(w=>w!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(m,g,r,s),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=ae.makeHexColor(...o),e.fillRect(m,g,r,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const y=new Path2D;y.rect(l,c,r,s),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(p,m,g,r,s,l,c,r,s),t.restore()}save(){this.inSMaskMode?(ed(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ed(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,s,i,o){this.ctx.transform(e,t,r,s,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const s=this.ctx,i=this.current;let o=i.x,a=i.y,l,c;const u=ot(s),f=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,p=f?r.slice(0):null;for(let m=0,g=0,y=e.length;m<y;m++)switch(e[m]|0){case zr.rectangle:o=t[g++],a=t[g++];const w=t[g++],v=t[g++],E=o+w,S=a+v;s.moveTo(o,a),w===0||v===0?s.lineTo(E,S):(s.lineTo(E,a),s.lineTo(E,S),s.lineTo(o,S)),f||i.updateRectMinMax(u,[o,a,E,S]),s.closePath();break;case zr.moveTo:o=t[g++],a=t[g++],s.moveTo(o,a),f||i.updatePathMinMax(u,o,a);break;case zr.lineTo:o=t[g++],a=t[g++],s.lineTo(o,a),f||i.updatePathMinMax(u,o,a);break;case zr.curveTo:l=o,c=a,o=t[g+4],a=t[g+5],s.bezierCurveTo(t[g],t[g+1],t[g+2],t[g+3],o,a),i.updateCurvePathMinMax(u,l,c,t[g],t[g+1],t[g+2],t[g+3],o,a,p),g+=6;break;case zr.curveTo2:l=o,c=a,s.bezierCurveTo(o,a,t[g],t[g+1],t[g+2],t[g+3]),i.updateCurvePathMinMax(u,l,c,o,a,t[g],t[g+1],t[g+2],t[g+3],p),o=t[g+2],a=t[g+3],g+=4;break;case zr.curveTo3:l=o,c=a,o=t[g+2],a=t[g+3],s.bezierCurveTo(t[g],t[g+1],o,a,o,a),i.updateCurvePathMinMax(u,l,c,t[g],t[g+1],o,a,o,a,p),g+=4;break;case zr.closePath:s.closePath();break}f&&i.updateScalingPathMinMax(u,p),i.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(t.save(),t.strokeStyle=r.getPattern(t,this,ti(t),In.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=r.getPattern(t,this,ti(t),In.FILL),i=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=g$}eoClip(){this.pendingClip=nx}beginText(){this.current.textMatrix=AL,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||cE,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&_e("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",o=((u=r.systemFontInfo)==null?void 0:u.css)||`"${i}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const l=r.italic?"italic":"normal";let c=t;t<KC?c=KC:t>XC&&(c=XC),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,s,i,o){this.current.textMatrix=[e,t,r,s,i,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s){const i=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=l&pn.FILL_STROKE_MASK,f=!!(l&pn.ADD_TO_PATH_FLAG),p=o.patternFill&&!a.missingFile;let m;(a.disableFontFace||f||p)&&(m=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||p?(i.save(),i.translate(t,r),i.beginPath(),m(i,c),s&&i.setTransform(...s),(u===pn.FILL||u===pn.FILL_STROKE)&&i.fill(),(u===pn.STROKE||u===pn.FILL_STROKE)&&i.stroke(),i.restore()):((u===pn.FILL||u===pn.FILL_STROKE)&&i.fillText(e,t,r),(u===pn.STROKE||u===pn.FILL_STROKE)&&i.strokeText(e,t,r)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ot(i),x:t,y:r,fontSize:c,addToPath:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return Le(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,f=e.length,p=r.vertical,m=p?1:-1,g=r.defaultVMetrics,y=s*t.fontMatrix[0],w=t.textRenderingMode===pn.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),c>0?i.scale(u,-1):i.scale(u,1);let v;if(t.patternFill){i.save();const j=t.fillColor.getPattern(i,this,ti(i),In.FILL);v=ot(i),i.restore(),i.fillStyle=j}let E=t.lineWidth;const S=t.textMatrixScale;if(S===0||E===0){const j=t.textRenderingMode&pn.FILL_STROKE_MASK;(j===pn.STROKE||j===pn.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=S;if(o!==1&&(i.scale(o,o),E/=o),i.lineWidth=E,r.isInvalidPDFjsFont){const j=[];let C=0;for(const T of e)j.push(T.unicode),C+=T.width;i.fillText(j.join(""),0,0),t.x+=C*y*u,i.restore(),this.compose();return}let R=0,O;for(O=0;O<f;++O){const j=e[O];if(typeof j=="number"){R+=m*j*s/1e3;continue}let C=!1;const T=(j.isSpace?l:0)+a,P=j.fontChar,M=j.accent;let F,V,D=j.width;if(p){const $=j.vmetric||g,W=-(j.vmetric?$[1]:D*.5)*y,U=$[2]*y;D=$?-$[0]:D,F=W/o,V=(R+U)/o}else F=R/o,V=0;if(r.remeasure&&D>0){const $=i.measureText(P).width*1e3/s*o;if(D<$&&this.isFontSubpixelAAEnabled){const W=D/$;C=!0,i.save(),i.scale(W,1),F/=W}else D!==$&&(F+=(D-$)/2e3*s/o)}if(this.contentVisible&&(j.isInFont||r.missingFile)){if(w&&!M)i.fillText(P,F,V);else if(this.paintChar(P,F,V,v),M){const $=F+s*M.offset.x/o,W=V-s*M.offset.y/o;this.paintChar(M.fontChar,$,W,v)}}const z=p?D*y-T*c:D*y+T*c;R+=z,C&&i.restore()}p?t.y-=R:t.x+=R*u,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,o=r.fontDirection,a=s.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*o,f=r.fontMatrix||cE,p=e.length,m=r.textRenderingMode===pn.INVISIBLE;let g,y,w,v;if(!(m||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(u,o),g=0;g<p;++g){if(y=e[g],typeof y=="number"){v=a*y*i/1e3,this.ctx.translate(v,0),r.x+=v*u;continue}const E=(y.isSpace?c:0)+l,S=s.charProcOperatorList[y.operatorListId];if(!S){_e(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(S),this.restore()),w=ae.applyTransform([y.width,0],f)[0]*i+E,t.translate(w,0),r.x+=w*u}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,o){this.ctx.rect(r,s,i-r,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],s=this.baseTransform||ot(this.ctx),i={createCanvasGraphics:o=>new a1(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new FE(e,r,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){const s=ae.makeHexColor(e,t,r);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,r){const s=ae.makeHexColor(e,t,r);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=l$(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,ti(t),In.SHADING);const s=ti(t);if(s){const{width:i,height:o}=t.canvas,[a,l,c,u]=ae.getAxialAlignedBoundingBox([0,0,i,o],s);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ze("Should not call beginInlineImage")}beginImageData(){ze("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ot(this.ctx),t)){const r=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],r,s),this.current.updateRectMinMax(ot(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||a_("TODO: Support non-isolated groups."),e.knockout&&_e("Knockout groups not supported.");const r=ot(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=ae.getAxialAlignedBoundingBox(e.bbox,ot(t));const i=[0,0,t.canvas.width,t.canvas.height];s=ae.intersect(s,i)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,l,c),p=f.context;p.translate(-o,-a),p.transform(...r),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),ed(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=ot(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=ae.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(k(this,ua,VE).call(this),rg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[l,c]=ae.singularValueDecompose2dScale(ot(this.ctx)),{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),p=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),rg(this.ctx)}else rg(this.ctx),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.endPath()}this.current=new JC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,ua,jE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=f$(e)),s.compiled)){s.compiled(r);return}const i=this._createMaskCanvas(e),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=ot(a);a.transform(t,r,s,i,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,f=o.length;u<f;u+=2){const p=ae.transform(l,[t,r,s,i,o[u],o[u+1]]),[m,g]=ae.applyTransform([0,0],p);a.drawImage(c.canvas,m,g)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:o,width:a,height:l,transform:c}=i,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=u.context;f.save();const p=this.getObject(o,i);ex(f,p),f.globalCompositeOperation="source-in",f.fillStyle=s?r.getPattern(f,this,ti(t),In.FILL):r,f.fillRect(0,0,a,l),f.restore(),t.save(),t.transform(...c),t.scale(1,-1),ng(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){_e("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){_e("Dependent image isn't ready yet");return}const o=i.width,a=i.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[t,0,0,r,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;if(this.save(),!bn){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/t,-1/r);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,r).context;ZC(l,e),i=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(i,ti(s));s.imageSmoothingEnabled=tx(ot(s),e.interpolate),ng(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o).context;ZC(l,e),s=this.applyTransferMapsToCanvas(l)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),ng(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===nx?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ot(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let o,a;if(r===0&&s===0){const l=Math.abs(t),c=Math.abs(i);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,f=c*e;o=u<1?1/u:1,a=f<1?1/f:1}}else{const l=Math.abs(t*i-r*s),c=Math.hypot(t,r),u=Math.hypot(s,i);if(e===0)o=u/l,a=c/l;else{const f=e*l;o=u>f?u/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=r||1,s===1&&i===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(s,i),o.length>0){const a=Math.max(s,i);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ua=new WeakSet,VE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},jE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Kc=a1;for(const n in zr)Kc.prototype[n]!==void 0&&(Kc.prototype[zr[n]]=Kc.prototype[n]);var Xf,Yf;class Fi{static get workerPort(){return h(this,Xf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");I(this,Xf,e)}static get workerSrc(){return h(this,Yf)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");I(this,Yf,e)}}Xf=new WeakMap,Yf=new WeakMap,L(Fi,Xf,null),L(Fi,Yf,"");const sg={UNKNOWN:0,DATA:1,ERROR:2},bt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nr(n){switch(n instanceof Error||typeof n=="object"&&n!==null||ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new rc(n.message);case"MissingPDFException":return new nc(n.message);case"PasswordException":return new hE(n.message,n.code);case"UnexpectedResponseException":return new l_(n.message,n.status);case"UnknownErrorException":return new dE(n.message,n.details);default:return new dE(n.message,n.toString())}}var js,iM,oM,Bg;class fd{constructor(e,t,r){L(this,js);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const i=s.data;if(i.targetName!==this.sourceName)return;if(i.stream){k(this,js,oM).call(this,i);return}if(i.callback){const a=i.callbackId,l=this.callbackCapabilities[a];if(!l)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],i.callback===sg.DATA)l.resolve(i.data);else if(i.callback===sg.ERROR)l.reject(nr(i.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[i.action];if(!o)throw new Error(`Unknown action from worker: ${i.action}`);if(i.callbackId){const a=this.sourceName,l=i.sourceName;new Promise(function(c){c(o(i.data))}).then(function(c){r.postMessage({sourceName:a,targetName:l,callback:sg.DATA,callbackId:i.callbackId,data:c})},function(c){r.postMessage({sourceName:a,targetName:l,callback:sg.ERROR,callbackId:i.callbackId,reason:nr(c)})});return}if(i.streamId){k(this,js,iM).call(this,i);return}o(i.data)},r.addEventListener("message",this._onComObjOnMessage)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:c.desiredSize},s),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[i].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:bt.PULL,streamId:i,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Dt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[i].cancelCall=u,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:bt.CANCEL,streamId:i,reason:nr(c)}),u.promise}},r)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}js=new WeakSet,iM=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:bt.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:bt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Dt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:bt.ERROR,streamId:t,reason:nr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(a(e.data,l))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.START_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:bt.START_COMPLETE,streamId:t,reason:nr(c)})})},oM=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case bt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(nr(e.reason));break;case bt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(nr(e.reason));break;case bt.PULL:if(!a){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){var c;l((c=a.onPull)==null?void 0:c.call(a))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,success:!0})},function(l){i.postMessage({sourceName:r,targetName:s,stream:bt.PULL_COMPLETE,streamId:t,reason:nr(l)})});break;case bt.ENQUEUE:if(Dt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case bt.CLOSE:if(Dt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),k(this,js,Bg).call(this,o,t);break;case bt.ERROR:Dt(o,"error should have stream controller"),o.controller.error(nr(e.reason)),k(this,js,Bg).call(this,o,t);break;case bt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(nr(e.reason)),k(this,js,Bg).call(this,o,t);break;case bt.CANCEL:if(!a)break;new Promise(function(l){var c;l((c=a.onCancel)==null?void 0:c.call(a,nr(e.reason)))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:bt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){i.postMessage({sourceName:r,targetName:s,stream:bt.CANCEL_COMPLETE,streamId:t,reason:nr(l)})}),a.sinkCapability.reject(nr(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Bg=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var nl,Qf;class v${constructor({parsedData:e,rawData:t}){L(this,nl);L(this,Qf);I(this,nl,e),I(this,Qf,t)}getRaw(){return h(this,Qf)}get(e){return h(this,nl).get(e)??null}getAll(){return yS(h(this,nl))}has(e){return h(this,nl).has(e)}}nl=new WeakMap,Qf=new WeakMap;const oo=Symbol("INTERNAL");var Jf,Zf,ep,mu;class y${constructor(e,{name:t,intent:r,usage:s}){L(this,Jf,!1);L(this,Zf,!1);L(this,ep,!1);L(this,mu,!0);I(this,Jf,!!(e&Pr.DISPLAY)),I(this,Zf,!!(e&Pr.PRINT)),this.name=t,this.intent=r,this.usage=s}get visible(){if(h(this,ep))return h(this,mu);if(!h(this,mu))return!1;const{print:e,view:t}=this.usage;return h(this,Jf)?(t==null?void 0:t.viewState)!=="OFF":h(this,Zf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==oo&&ze("Internal method `_setVisible` called."),I(this,ep,r),I(this,mu,t)}}Jf=new WeakMap,Zf=new WeakMap,ep=new WeakMap,mu=new WeakMap;var _o,$e,gu,vu,tp,BE;class _${constructor(e,t=Pr.DISPLAY){L(this,tp);L(this,_o,null);L(this,$e,new Map);L(this,gu,null);L(this,vu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,I(this,vu,e.order);for(const r of e.groups)h(this,$e).set(r.id,new y$(t,r));if(e.baseState==="OFF")for(const r of h(this,$e).values())r._setVisible(oo,!1);for(const r of e.on)h(this,$e).get(r)._setVisible(oo,!0);for(const r of e.off)h(this,$e).get(r)._setVisible(oo,!1);I(this,gu,this.getHash())}}isVisible(e){if(h(this,$e).size===0)return!0;if(!e)return a_("Optional content group not defined."),!0;if(e.type==="OCG")return h(this,$e).has(e.id)?h(this,$e).get(e.id).visible:(_e(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,tp,BE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!h(this,$e).has(t))return _e(`Optional content group not found: ${t}`),!0;if(h(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!h(this,$e).has(t))return _e(`Optional content group not found: ${t}`),!0;if(!h(this,$e).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!h(this,$e).has(t))return _e(`Optional content group not found: ${t}`),!0;if(!h(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!h(this,$e).has(t))return _e(`Optional content group not found: ${t}`),!0;if(h(this,$e).get(t).visible)return!1}return!0}return _e(`Unknown optional content policy ${e.policy}.`),!0}return _e(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const r=h(this,$e).get(e);if(!r){_e(`Optional content group not found: ${e}`);return}r._setVisible(oo,!!t,!0),I(this,_o,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=h(this,$e).get(s);if(i)switch(r){case"ON":i._setVisible(oo,!0);break;case"OFF":i._setVisible(oo,!1);break;case"Toggle":i._setVisible(oo,!i.visible);break}}I(this,_o,null)}get hasInitialVisibility(){return h(this,gu)===null||this.getHash()===h(this,gu)}getOrder(){return h(this,$e).size?h(this,vu)?h(this,vu).slice():[...h(this,$e).keys()]:null}getGroups(){return h(this,$e).size>0?yS(h(this,$e)):null}getGroup(e){return h(this,$e).get(e)||null}getHash(){if(h(this,_o)!==null)return h(this,_o);const e=new tM;for(const[t,r]of h(this,$e))e.update(`${t}:${r.visible}`);return I(this,_o,e.hexdigest())}}_o=new WeakMap,$e=new WeakMap,gu=new WeakMap,vu=new WeakMap,tp=new WeakSet,BE=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let o;if(Array.isArray(i))o=k(this,tp,BE).call(this,i);else if(h(this,$e).has(i))o=h(this,$e).get(i).visible;else return _e(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class w${constructor(e,{disableRange:t=!1,disableStream:r=!1}){Dt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Dt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new E$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new A$(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class E${constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=bS(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class A${constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function b$(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),i(u)}if(t=o(n),t){const u=c(t);return i(u)}if(t=r("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),i(u)}function r(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),m=c_(f);f=p.decode(m),e=!1}catch{}}return f}function i(u){return e&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),e&&(u=s("iso-8859-1",u))),u}function o(u){const f=[];let p;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(u))!==null;){let[,y,w,v]=p;if(y=parseInt(y,10),y in f){if(y===0)break;continue}f[y]=[w,v]}const g=[];for(let y=0;y<f.length&&y in f;++y){let[w,v]=f[y];v=a(v),w&&(v=unescape(v),y===0&&(v=l(v))),g.push(v)}return g.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function l(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),g=u.slice(f+1).replace(/^[^']*'/,"");return s(p,g)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,g){if(m==="q"||m==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,w){return String.fromCharCode(parseInt(w,16))}),s(p,g);try{g=atob(g)}catch{}return s(p,g)})}return""}function CS({getResponseHeader:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function xS(n){const e=n("Content-Disposition");if(e){let t=b$(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(bS(t))return t}return null}function p_(n,e){return n===404||n===0&&e.startsWith("file:")?new nc('Missing PDF "'+e+'".'):new l_(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function aM(n){return n===200||n===206}function lM(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function cM(n){const e=new Headers;for(const t in n){const r=n[t];r!==void 0&&e.append(t,r)}return e}function uM(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(_e(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class rx{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new S$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new T$(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class S${constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=cM(this._stream.httpHeaders);const r=t.url;fetch(r,lM(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!aM(s.status))throw p_(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const i=l=>s.headers.get(l),{allowRangeRequests:o,suggestedLength:a}=CS({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=xS(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new rc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:uM(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class T${constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=cM(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${r-1}`);const i=s.url;fetch(i,lM(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!aM(o.status))throw p_(o.status,i);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:uM(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const U0=200,$0=206;function C$(n){const e=n.response;return typeof e!="string"?e:c_(e).buffer}class x${constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const s={begin:e,end:t};for(const i in r)s[i]=r[i];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const i in this.httpHeaders){const o=this.httpHeaders[i];o!==void 0&&t.setRequestHeader(i,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=$0):s.expectedStatus=U0,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){var l,c,u;const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(l=r.onError)==null||l.call(r,s.status);return}const i=s.status||U0;if(!(i===U0&&r.expectedStatus===$0)&&i!==r.expectedStatus){(c=r.onError)==null||c.call(r,s.status);return}const a=C$(s);if(i===$0){const f=s.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);r.onDone({begin:parseInt(p[1],10),chunk:a})}else a?r.onDone({begin:0,chunk:a}):(u=r.onError)==null||u.call(r,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class R${constructor(e){this._source=e,this._manager=new x$(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new P$(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new I$(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class P${constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=o=>t.getResponseHeader(o),{allowRangeRequests:s,suggestedLength:i}=CS({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=xS(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=p_(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I${constructor(e,t,r){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=p_(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const hM=/^file:\/\/\/[a-zA-Z]:\//;function k$(n){const e=zs.get("url"),t=e.parse(n);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(n)?e.parse(`file:///${n}`):(t.host||(t.protocol="file:"),t)}class L${constructor(e){this.source=e,this.url=k$(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new D$(this):new M$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new O$(this,e,t):new N$(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class dM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new rc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Gv(n,e){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:e}}class M$ extends dM{constructor(e){super(e);const t=r=>{if(r.statusCode===404){const a=new nc(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(r);const s=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:i,suggestedLength:o}=CS({getResponseHeader:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=o||this._contentLength,this._filename=xS(s)};if(this._request=null,this._url.protocol==="http:"){const r=zs.get("http");this._request=r.request(Gv(this._url,e.httpHeaders),t)}else{const r=zs.get("https");this._request=r.request(Gv(this._url,e.httpHeaders),t)}this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class N$ extends fM{constructor(e,t,r){super(e),this._httpHeaders={};for(const i in e.httpHeaders){const o=e.httpHeaders[i];o!==void 0&&(this._httpHeaders[i]=o)}this._httpHeaders.Range=`bytes=${t}-${r-1}`;const s=i=>{if(i.statusCode===404){const o=new nc(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(i)};if(this._request=null,this._url.protocol==="http:"){const i=zs.get("http");this._request=i.request(Gv(this._url,this._httpHeaders),s)}else{const i=zs.get("https");this._request=i.request(Gv(this._url,this._httpHeaders),s)}this._request.on("error",i=>{this._storedError=i}),this._request.end()}}class D$ extends dM{constructor(e){super(e);let t=decodeURIComponent(this._url.path);hM.test(this._url.href)&&(t=t.replace(/^\//,""));const r=zs.get("fs");r.promises.lstat(t).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(t)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new nc(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class O$ extends fM{constructor(e,t,r){super(e);let s=decodeURIComponent(this._url.path);hM.test(this._url.href)&&(s=s.replace(/^\//,""));const i=zs.get("fs");this._setReadableStream(i.createReadStream(s,{start:t,end:r-1}))}}const F$=1e5,Fn=30,V$=.8;var IR,wo,jn,np,rp,rl,vi,sp,ip,sl,yu,_u,Eo,wu,op,Eu,il,ap,lp,Mt,ol,al,Ao,Au,Xi,pM,mM,UE,Bs,Ug,gM,vM;let qv=(Mt=class{constructor({textContentSource:e,container:t,viewport:r}){L(this,Xi);L(this,wo,Promise.withResolvers());L(this,jn,null);L(this,np,!1);L(this,rp,!!((IR=globalThis.FontInspector)!=null&&IR.enabled));L(this,rl,null);L(this,vi,null);L(this,sp,0);L(this,ip,0);L(this,sl,null);L(this,yu,null);L(this,_u,0);L(this,Eo,0);L(this,wu,Object.create(null));L(this,op,[]);L(this,Eu,null);L(this,il,[]);L(this,ap,new WeakMap);L(this,lp,null);var l;if(e instanceof ReadableStream)I(this,Eu,e);else if(typeof e=="object")I(this,Eu,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');I(this,jn,I(this,yu,t)),I(this,Eo,r.scale*(globalThis.devicePixelRatio||1)),I(this,_u,r.rotation),I(this,vi,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:a}=r.rawDims;I(this,lp,[1,0,0,-1,-o,a+i]),I(this,ip,s),I(this,sp,i),k(l=Mt,Bs,gM).call(l),Gl(t,r),h(this,wo).promise.catch(()=>{}).then(()=>{h(Mt,Au).delete(this),I(this,vi,null),I(this,wu,null)})}render(){const e=()=>{h(this,sl).read().then(({value:t,done:r})=>{if(r){h(this,wo).resolve();return}h(this,rl)??I(this,rl,t.lang),Object.assign(h(this,wu),t.styles),k(this,Xi,pM).call(this,t.items),e()},h(this,wo).reject)};return I(this,sl,h(this,Eu).getReader()),h(Mt,Au).add(this),e(),h(this,wo).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==h(this,_u)&&(t==null||t(),I(this,_u,s),Gl(h(this,yu),{rotation:s})),r!==h(this,Eo)){t==null||t(),I(this,Eo,r);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:k(i=Mt,Bs,Ug).call(i,h(this,rl))};for(const a of h(this,il))o.properties=h(this,ap).get(a),o.div=a,k(this,Xi,UE).call(this,o)}}cancel(){var t;const e=new rc("TextLayer task cancelled.");(t=h(this,sl))==null||t.cancel(e).catch(()=>{}),I(this,sl,null),h(this,wo).reject(e)}get textDivs(){return h(this,il)}get textContentItemsStr(){return h(this,op)}static cleanup(){if(!(h(this,Au).size>0)){h(this,ol).clear();for(const{canvas:e}of h(this,al).values())e.remove();h(this,al).clear()}}},wo=new WeakMap,jn=new WeakMap,np=new WeakMap,rp=new WeakMap,rl=new WeakMap,vi=new WeakMap,sp=new WeakMap,ip=new WeakMap,sl=new WeakMap,yu=new WeakMap,_u=new WeakMap,Eo=new WeakMap,wu=new WeakMap,op=new WeakMap,Eu=new WeakMap,il=new WeakMap,ap=new WeakMap,lp=new WeakMap,ol=new WeakMap,al=new WeakMap,Ao=new WeakMap,Au=new WeakMap,Xi=new WeakSet,pM=function(e){var s,i;if(h(this,np))return;(i=h(this,vi)).ctx??(i.ctx=k(s=Mt,Bs,Ug).call(s,h(this,rl)));const t=h(this,il),r=h(this,op);for(const o of e){if(t.length>F$){_e("Ignoring additional textDivs for performance reasons."),I(this,np,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=h(this,jn);I(this,jn,document.createElement("span")),h(this,jn).classList.add("markedContent"),o.id!==null&&h(this,jn).setAttribute("id",`${o.id}`),a.append(h(this,jn))}else o.type==="endMarkedContent"&&I(this,jn,h(this,jn).parentNode);continue}r.push(o.str),k(this,Xi,mM).call(this,o)}},mM=function(e){var y;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};h(this,il).push(t);const s=ae.transform(h(this,lp),e.transform);let i=Math.atan2(s[1],s[0]);const o=h(this,wu)[e.fontName];o.vertical&&(i+=Math.PI/2);const a=h(this,rp)&&o.fontSubstitution||o.fontFamily,l=Math.hypot(s[2],s[3]),c=l*k(y=Mt,Bs,vM).call(y,a,h(this,rl));let u,f;i===0?(u=s[4],f=s[5]-c):(u=s[4]+c*Math.sin(i),f=s[5]-c*Math.cos(i));const p="calc(var(--scale-factor)*",m=t.style;h(this,jn)===h(this,yu)?(m.left=`${(100*u/h(this,ip)).toFixed(2)}%`,m.top=`${(100*f/h(this,sp)).toFixed(2)}%`):(m.left=`${p}${u.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(h(Mt,Ao)*l).toFixed(2)}px)`,m.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,h(this,rp)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(g=!0)}if(g&&(r.canvasWidth=o.vertical?e.height:e.width),h(this,ap).set(t,r),h(this,vi).div=t,h(this,vi).properties=r,k(this,Xi,UE).call(this,h(this,vi)),r.hasText&&h(this,jn).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),h(this,jn).append(w)}},UE=function(e){const{div:t,properties:r,ctx:s,prevFontSize:i,prevFontFamily:o}=e,{style:a}=t;let l="";if(h(Mt,Ao)>1&&(l=`scale(${1/h(Mt,Ao)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=a,{canvasWidth:u,fontSize:f}=r;(i!==f||o!==c)&&(s.font=`${f*h(this,Eo)}px ${c}`,e.prevFontSize=f,e.prevFontFamily=c);const{width:p}=s.measureText(t.textContent);p>0&&(l=`scaleX(${u*h(this,Eo)/p}) ${l}`)}r.angle!==0&&(l=`rotate(${r.angle}deg) ${l}`),l.length>0&&(a.transform=l)},Bs=new WeakSet,Ug=function(e=null){let t=h(this,al).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,al).set(e,t)}return t},gM=function(){if(h(this,Ao)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),I(this,Ao,e.getBoundingClientRect().height),e.remove()},vM=function(e,t){const r=h(this,ol).get(e);if(r)return r;const s=k(this,Bs,Ug).call(this,t),i=s.font;s.canvas.width=s.canvas.height=Fn,s.font=`${Fn}px ${e}`;const o=s.measureText("");let a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(a){const f=a/(a+l);return h(this,ol).set(e,f),s.canvas.width=s.canvas.height=0,s.font=i,f}s.strokeStyle="red",s.clearRect(0,0,Fn,Fn),s.strokeText("g",0,0);let c=s.getImageData(0,0,Fn,Fn).data;l=0;for(let f=c.length-1-3;f>=0;f-=4)if(c[f]>0){l=Math.ceil(f/4/Fn);break}s.clearRect(0,0,Fn,Fn),s.strokeText("A",0,Fn),c=s.getImageData(0,0,Fn,Fn).data,a=0;for(let f=0,p=c.length;f<p;f+=4)if(c[f]>0){a=Fn-Math.floor(f/4/Fn);break}s.canvas.width=s.canvas.height=0,s.font=i;const u=a?a/(a+l):V$;return h(this,ol).set(e,u),u},L(Mt,Bs),L(Mt,ol,new Map),L(Mt,al,new Map),L(Mt,Ao,null),L(Mt,Au,new Set),Mt);function j$(){PL("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:n,container:e,viewport:t,...r}=arguments[0],s=Object.keys(r);s.length>0&&_e("Ignoring `renderTextLayer` parameters: "+s.join(", "));const i=new qv({textContentSource:n,container:e,viewport:t}),{textDivs:o,textContentItemsStr:a}=i;return{promise:i.render(),textDivs:o,textContentItemsStr:a}}function B$(){PL("`updateTextLayer`, please use `TextLayer` instead.")}class hf{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(hf.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const c of i.children)s(c)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const U$=65536,$$=100,z$=5e3,H$=bn?t$:$U,W$=bn?n$:xL,G$=bn?e$:UU,q$=bn?r$:RL;function K$(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new $E,{docId:t}=e,r=n.url?X$(n.url):null,s=n.data?Y$(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof yM?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:U$;let u=n.worker instanceof Xc?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!AS(n.docBaseUrl)?n.docBaseUrl:null,m=typeof n.cMapUrl=="string"?n.cMapUrl:null,g=n.cMapPacked!==!1,y=n.CMapReaderFactory||W$,w=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,v=n.StandardFontDataFactory||q$,E=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,R=n.isEvalSupported!==!1,O=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!bn,j=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,C=typeof n.disableFontFace=="boolean"?n.disableFontFace:bn,T=n.fontExtraProperties===!0,P=n.enableXfa===!0,M=n.ownerDocument||globalThis.document,F=n.disableRange===!0,V=n.disableStream===!0,D=n.disableAutoFetch===!0,z=n.pdfBug===!0,$=n.enableHWA===!0,W=l?l.length:n.length??NaN,U=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!bn&&!C,B=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:y===xL&&v===RL&&m&&w&&ud(m,document.baseURI)&&ud(w,document.baseURI),H=n.canvasFactory||new H$({ownerDocument:M,enableHWA:$}),X=n.filterFactory||new G$({docId:t,ownerDocument:M}),ne=null;IU(f);const J={canvasFactory:H,filterFactory:X};if(B||(J.cMapReaderFactory=new y({baseUrl:m,isCompressed:g}),J.standardFontDataFactory=new v({baseUrl:w})),!u){const Fe={verbosity:f,port:Fi.workerPort};u=Fe.port?Xc.fromPort(Fe):new Xc(Fe),e._worker=u}const re={docId:t,apiVersion:"4.4.168",data:s,password:a,disableAutoFetch:D,rangeChunkSize:c,length:W,docBaseUrl:p,enableXfa:P,evaluatorOptions:{maxImageSize:S,disableFontFace:C,ignoreErrors:E,isEvalSupported:R,isOffscreenCanvasSupported:O,canvasMaxAreaInBytes:j,fontExtraProperties:T,useSystemFonts:U,cMapUrl:B?m:null,standardFontDataUrl:B?w:null}},me={disableFontFace:C,fontExtraProperties:T,ownerDocument:M,pdfBug:z,styleElement:ne,loadingParams:{disableAutoFetch:D,enableXfa:P}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Fe=u.messageHandler.sendWithPromise("GetDocRequest",re,s?[s.buffer]:null);let be;if(l)be=new w$(l,{disableRange:F,disableStream:V});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");be=(Je=>bn?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&ud(Je.url)?new rx(Je):new L$(Je):ud(Je.url)?new rx(Je):new R$(Je))({url:r,length:W,httpHeaders:i,withCredentials:o,rangeChunkSize:c,disableRange:F,disableStream:V})}return Fe.then(ce=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Je=new fd(t,ce,u.port),Ze=new ez(Je,e,be,me,J);e._transport=Ze,Je.send("Ready",null)})}).catch(e._capability.reject),e}function X$(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(bn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Y$(n){if(bn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return c_(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function sx(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Ey;const Ay=class Ay{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${tr(Ay,Ey)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Ey=new WeakMap,L(Ay,Ey,0);let $E=Ay,yM=class{constructor(e,t,r=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Q${constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var bo,yi,Lr,Ec,$g;class J${constructor(e,t,r,s=!1){L(this,Lr);L(this,bo,null);L(this,yi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new HC:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new _M,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new am({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:s=fo.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null}){var S,R;(S=this._stats)==null||S.time("Overall");const f=this._transport.getRenderingIntent(r,s,u),{renderingIntent:p,cacheKey:m}=f;I(this,yi,!1),k(this,Lr,$g).call(this),a||(a=this._transport.getOptionalContentConfig(p));let g=this._intentStates.get(m);g||(g=Object.create(null),this._intentStates.set(m,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const y=!!(p&Pr.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(f));const w=O=>{var j;g.renderTasks.delete(v),(this._maybeCleanupAfterRender||y)&&I(this,yi,!0),k(this,Lr,Ec).call(this,!y),O?(v.capability.reject(O),this._abortOperatorList({intentState:g,reason:O instanceof Error?O:new Error(O)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new HE({callback:w,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||(g.renderTasks=new Set)).add(v);const E=v.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([O,j])=>{var C;if(this.destroyed){w();return}if((C=this._stats)==null||C.time("Rendering"),!(j.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:O,optionalContentConfig:j}),v.operatorListChanged()}).catch(w),E}getOperatorList({intent:e="display",annotationMode:t=fo.ENABLE,printAnnotationStorage:r=null}={}){var l;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))}const i=this._transport.getRenderingIntent(e,t,r,!0);let o=this._intentStates.get(i.cacheKey);o||(o=Object.create(null),this._intentStates.set(i.cacheKey,o));let a;return o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(i)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>hf.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),I(this,yi,!1),k(this,Lr,$g).call(this),Promise.all(e)}cleanup(e=!1){I(this,yi,!0);const t=k(this,Lr,Ec).call(this,!1);return e&&t&&this._stats&&(this._stats=new HC),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&k(this,Lr,Ec).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r}){const{map:s,transfer:i}=r,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},i).getReader(),l=this._intentStates.get(t);l.streamReader=a;const c=()=>{a.read().then(({value:u,done:f})=>{if(f){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,l),c())},u=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const f of l.renderTasks)f.operatorListChanged();k(this,Lr,Ec).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(u);else if(l.opListReadCapability)l.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof ES){let s=$$;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new rc(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}bo=new WeakMap,yi=new WeakMap,Lr=new WeakSet,Ec=function(e=!1){if(k(this,Lr,$g).call(this),!h(this,yi)||this.destroyed)return!1;if(e)return I(this,bo,setTimeout(()=>{I(this,bo,null),k(this,Lr,Ec).call(this,!1)},z$)),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),I(this,yi,!1),!0},$g=function(){h(this,bo)&&(clearTimeout(h(this,bo)),I(this,bo,null))};var ll,by;class Z${constructor(){L(this,ll,new Set);L(this,by,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};h(this,by).then(()=>{for(const s of h(this,ll))s.call(this,r)})}addEventListener(e,t){h(this,ll).add(t)}removeEventListener(e,t){h(this,ll).delete(t)}terminate(){h(this,ll).clear()}}ll=new WeakMap,by=new WeakMap;const li={isWorkerDisabled:!1,fakeWorkerId:0};bn&&(li.isWorkerDisabled=!0,Fi.workerSrc||(Fi.workerSrc="./pdf.worker.mjs")),li.isSameOrigin=function(n,e){let t;try{if(t=new URL(n),!t.origin||t.origin==="null")return!1}catch{return!1}const r=new URL(e,t);return t.origin===r.origin},li.createCDNWrapper=function(n){const e=`await import("${n}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var cl,bu,zg,Su,Hg;const rr=class rr{constructor({name:e=null,port:t=null,verbosity:r=kU()}={}){L(this,bu);var s;if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=h(rr,cl))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(h(rr,cl)||I(rr,cl,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return bn?Promise.all([zs.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new fd("main","worker",e),this._messageHandler.on("ready",function(){}),k(this,bu,zg).call(this)}_initialize(){if(li.isWorkerDisabled||h(rr,Su,Hg)){this._setupFakeWorker();return}let{workerSrc:e}=rr;try{li.isSameOrigin(window.location.href,e)||(e=li.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new fd("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:i.signal}),r.on("test",a=>{if(i.abort(),this.destroyed||!a){s();return}this._messageHandler=r,this._port=t,this._webWorker=t,k(this,bu,zg).call(this)}),r.on("ready",a=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{a_("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){li.isWorkerDisabled||(_e("Setting up fake worker."),li.isWorkerDisabled=!0),rr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new Z$;this._port=t;const r=`fake${li.fakeWorkerId++}`,s=new fd(r+"_worker",r,t);e.setup(s,t),this._messageHandler=new fd(r,r+"_worker",t),k(this,bu,zg).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=h(rr,cl))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var r;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(r=h(this,cl))==null?void 0:r.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new rr(e)}static get workerSrc(){if(Fi.workerSrc)return Fi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Le(this,"_setupFakeWorkerGlobal",(async()=>h(this,Su,Hg)?h(this,Su,Hg):(await import(this.workerSrc)).WorkerMessageHandler)())}};cl=new WeakMap,bu=new WeakSet,zg=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Su=new WeakSet,Hg=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},L(rr,Su),L(rr,cl);let Xc=rr;var _i,bs,Tu,Cu,Ss,ul,pd;class ez{constructor(e,t,r,s,i){L(this,ul);L(this,_i,new Map);L(this,bs,new Map);L(this,Tu,new Map);L(this,Cu,new Map);L(this,Ss,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new _M,this.fontLoader=new JU({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Le(this,"annotationStorage",new TS)}getRenderingIntent(e,t=fo.ENABLE,r=null,s=!1){let i=Pr.DISPLAY,o=NE;switch(e){case"any":i=Pr.ANY;break;case"display":break;case"print":i=Pr.PRINT;break;default:_e(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case fo.DISABLE:i+=Pr.ANNOTATIONS_DISABLE;break;case fo.ENABLE:break;case fo.ENABLE_FORMS:i+=Pr.ANNOTATIONS_FORMS;break;case fo.ENABLE_STORAGE:i+=Pr.ANNOTATIONS_STORAGE,o=(i&Pr.PRINT&&r instanceof rM?r:this.annotationStorage).serializable;break;default:_e(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(i+=Pr.OPLIST),{renderingIntent:i,cacheKey:`${i}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=h(this,Ss))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of h(this,bs).values())e.push(s._destroy());h(this,bs).clear(),h(this,Tu).clear(),h(this,Cu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),h(this,_i).clear(),this.filterFactory.destroy(),qv.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new rc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}Dt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",r=>{const s=Promise.withResolvers(),i=this._fullReader;return i.headersReady.then(()=>{var o;(!i.isStreamingSupported||!i.isRangeSupported)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),i.onProgress=a=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:a.loaded,total:a.total})}),s.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(r,s)=>{Dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){s.close();return}Dt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new Q$(r,this))}),e.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new hE(r.message,r.code);break;case"InvalidPDFException":s=new bL(r.message);break;case"MissingPDFException":s=new nc(r.message);break;case"UnexpectedResponseException":s=new l_(r.message,r.status);break;case"UnknownErrorException":s=new dE(r.message,r.details);break;default:ze("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",r=>{if(I(this,Ss,Promise.withResolvers()),t.onPassword){const s=i=>{i instanceof Error?h(this,Ss).reject(i):h(this,Ss).resolve({password:i})};try{t.onPassword(s,r.code)}catch(i){h(this,Ss).reject(i)}}else h(this,Ss).reject(new hE(r.message,r.code));return h(this,Ss).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;h(this,bs).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in i){const m=i.error;_e(`Error during font loading: ${m}`),this.commonObjs.resolve(r,m);break}const u=c&&((o=globalThis.FontInspector)!=null&&o.enabled)?(m,g)=>globalThis.FontInspector.fontAdded(m,g):null,f=new ZU(i,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:p}=i;Dt(p,"The imageRef must be defined.");for(const m of h(this,bs).values())for(const[,g]of m.objs)if((g==null?void 0:g.ref)===p)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,o])=>{var l;if(this.destroyed)return;const a=h(this,bs).get(s);if(!a.objs.has(r)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":a.objs.resolve(r,o),(o==null?void 0:o.dataLen)>CU&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&_e("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=h(this,Tu).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&h(this,Cu).set(i.refStr,e);const o=new J$(t,i,this,this._params.pdfBug);return h(this,bs).set(t,o),o});return h(this,Tu).set(t,s),s}getPageIndex(e){return sx(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,ul,pd).call(this,"GetFieldObjects")}hasJSActions(){return k(this,ul,pd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,ul,pd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,ul,pd).call(this,"GetOptionalContentConfig").then(t=>new _$(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=h(this,_i).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new v$(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return h(this,_i).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of h(this,bs).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),h(this,_i).clear(),this.filterFactory.destroy(!0),qv.cleanup()}}cachedPageNumber(e){if(!sx(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return h(this,Cu).get(t)??null}}_i=new WeakMap,bs=new WeakMap,Tu=new WeakMap,Cu=new WeakMap,Ss=new WeakMap,ul=new WeakSet,pd=function(e,t=null){const r=h(this,_i).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return h(this,_i).set(e,s),s};const ig=Symbol("INITIAL_DATA");var Xr,cp,zE;class _M{constructor(){L(this,cp);L(this,Xr,Object.create(null))}get(e,t=null){if(t){const s=k(this,cp,zE).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=h(this,Xr)[e];if(!r||r.data===ig)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=h(this,Xr)[e];return!!t&&t.data!==ig}resolve(e,t=null){const r=k(this,cp,zE).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in h(this,Xr)){const{data:r}=h(this,Xr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}I(this,Xr,Object.create(null))}*[Symbol.iterator](){for(const e in h(this,Xr)){const{data:t}=h(this,Xr)[e];t!==ig&&(yield[e,t])}}}Xr=new WeakMap,cp=new WeakSet,zE=function(e){var t;return(t=h(this,Xr))[e]||(t[e]={...Promise.withResolvers(),data:ig})};var So;class tz{constructor(e){L(this,So,null);I(this,So,e),this.onContinue=null}get promise(){return h(this,So).capability.promise}cancel(e=0){h(this,So).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=h(this,So).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=h(this,So);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}So=new WeakMap;var To,hl;const Na=class Na{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){L(this,To,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new tz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(h(Na,hl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(Na,hl).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:o}=this.params;this.gfx=new Kc(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),h(this,To)&&(window.cancelAnimationFrame(h(this,To)),I(this,To,null)),h(Na,hl).delete(this._canvas),this.callback(e||new ES(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?I(this,To,window.requestAnimationFrame(()=>{I(this,To,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(Na,hl).delete(this._canvas),this.callback())))}};To=new WeakMap,hl=new WeakMap,L(Na,hl,new WeakSet);let HE=Na;const nz="4.4.168",rz="19fbc8998";function ix(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function td(n){return Math.max(0,Math.min(255,255*n))}class ox{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=td(e),[e,e,e]}static G_HTML([e]){const t=ix(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(td)}static RGB_HTML(e){return`#${e.map(ix).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[td(1-Math.min(1,e+s)),td(1-Math.min(1,r+s)),td(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,o=1-r,a=Math.min(s,i,o);return["CMYK",s,i,o,a]}}class wM{static setupStorage(e,t,r,s,i){const o=s.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var f,p;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:r});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);o.append(m),a&&hf.shouldBuildText(s.name)&&c.push(m)}return{textDivs:c}}const u=[[s,-1,o]];for(;u.length>0;){const[m,g,y]=u.at(-1);if(g+1===m.children.length){u.pop();continue}const w=m.children[++u.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const S=document.createTextNode(w.value);c.push(S),y.append(S);continue}const E=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(y.append(E),w.attributes&&this.setAttributes({html:E,element:w,storage:t,intent:i,linkService:r}),((p=w.children)==null?void 0:p.length)>0)u.push([w,-1,E]);else if(w.value){const S=document.createTextNode(w.value);a&&hf.shouldBuildText(v)&&c.push(S),E.append(S)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const um=1e3,sz=9,Kl=new WeakSet;function Vi(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class iz{static create(e){switch(e.data.annotationType){case Rt.LINK:return new EM(e);case Rt.TEXT:return new oz(e);case Rt.WIDGET:switch(e.data.fieldType){case"Tx":return new az(e);case"Btn":return e.data.radioButton?new SM(e):e.data.checkBox?new cz(e):new uz(e);case"Ch":return new hz(e);case"Sig":return new lz(e)}return new sc(e);case Rt.POPUP:return new GE(e);case Rt.FREETEXT:return new PM(e);case Rt.LINE:return new fz(e);case Rt.SQUARE:return new pz(e);case Rt.CIRCLE:return new mz(e);case Rt.POLYLINE:return new IM(e);case Rt.CARET:return new vz(e);case Rt.INK:return new kM(e);case Rt.POLYGON:return new gz(e);case Rt.HIGHLIGHT:return new yz(e);case Rt.UNDERLINE:return new _z(e);case Rt.SQUIGGLY:return new wz(e);case Rt.STRIKEOUT:return new Ez(e);case Rt.STAMP:return new LM(e);case Rt.FILEATTACHMENT:return new Az(e);default:return new Et(e)}}}var dl,xu,Ru,up,WE;const l1=class l1{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){L(this,up);L(this,dl,null);L(this,xu,!1);L(this,Ru,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e!=null&&e.str||t!=null&&t.str||r!=null&&r.str)}get hasPopupData(){return l1._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;h(this,dl)||I(this,dl,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&k(this,up,WE).call(this,t),(r=h(this,Ru))==null||r.popup.updateEdited(e)}resetEdited(){var e;h(this,dl)&&(k(this,up,WE).call(this,h(this,dl).rect),(e=h(this,Ru))==null||e.popup.resetEdited(),I(this,dl,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof sc||(i.tabIndex=um);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.popupRef&&i.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof GE){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,i),i}const{width:a,height:l}=Vi(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(y>0||w>0){const E=`calc(${y}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;o.borderRadius=E}else if(this instanceof SM){const E=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=E}switch(t.borderStyle.style){case Zh.SOLID:o.borderStyle="solid";break;case Zh.DASHED:o.borderStyle="dashed";break;case Zh.BEVELED:_e("Unimplemented border style: beveled");break;case Zh.INSET:_e("Unimplemented border style: inset");break;case Zh.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(I(this,xu,!0),o.borderColor=ae.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const c=ae.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:m}=s.rawDims;o.left=`${100*(c[0]-p)/u}%`,o.top=`${100*(c[1]-m)/f}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(o.width=`${100*a/u}%`,o.height=`${100*l/f}%`):this.setRotation(g,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:o}=Vi(this.data.rect);let a,l;e%180===0?(a=100*i/r,l=100*o/s):(a=100*o/r,l=100*i/s),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],o=i[0],a=i.slice(1);s.target.style[r]=ox[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:ox[`${o}_rgb`](a)})};return Le(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const o=r[s];if(o){const a={detail:{[s]:i},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,w,v,E]=e.subarray(2,6);if(s===y&&i===w&&t===v&&r===E)return}const{style:o}=this.container;let a;if(h(this,xu)){const{borderColor:y,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=s-t,c=i-r,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const m=u.createElement("clipPath"),g=`clippath_${this.data.id}`;m.setAttribute("id",g),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let y=2,w=e.length;y<w;y+=8){const v=e[y],E=e[y+1],S=e[y+2],R=e[y+3],O=u.createElement("rect"),j=(S-t)/l,C=(i-E)/c,T=(v-S)/l,P=(E-R)/c;O.setAttribute("x",j),O.setAttribute("y",C),O.setAttribute("width",T),O.setAttribute("height",P),m.append(O),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${C}" width="${T}" height="${P}"/>`)}h(this,xu)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const r=I(this,Ru,new GE({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(r.render())}render(){ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:o,exportValues:a}of s){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Kl.has(c)){_e(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==t&&Kl.has(s)&&r.push({id:o,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};dl=new WeakMap,xu=new WeakMap,Ru=new WeakMap,up=new WeakSet,WE=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;r==null||r.splice(0,4,...e);const{width:c,height:u}=Vi(e);t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,s===0?(t.width=`${100*c/i}%`,t.height=`${100*u/o}%`):this.setRotation(s)};let Et=l1;var mr,Pa,AM,bM;class EM extends Et{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});L(this,mr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(k(this,mr,AM).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(k(this,mr,bM).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&k(this,mr,Pa).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),k(this,mr,Pa).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const o=s.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),k(this,mr,Pa).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),k(this,mr,Pa).call(this),!this._fieldObjects){_e('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var f;s==null||s();const{fields:i,refs:o,include:a}=r,l=[];if(i.length!==0||o.length!==0){const p=new Set(o);for(const m of i){const g=this._fieldObjects[m]||[];for(const{id:y}of g)p.add(y)}for(const m of Object.values(this._fieldObjects))for(const g of m)p.has(g.id)===a&&l.push(g)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const c=this.annotationStorage,u=[];for(const p of l){const{id:m}=p;switch(u.push(m),p.type){case"text":{const y=p.defaultValue||"";c.setValue(m,{value:y});break}case"checkbox":case"radiobutton":{const y=p.defaultValue===p.exportValues;c.setValue(m,{value:y});break}case"combobox":case"listbox":{const y=p.defaultValue||"";c.setValue(m,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${m}"]`);if(g){if(!Kl.has(g)){_e(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}mr=new WeakSet,Pa=function(){this.container.setAttribute("data-internal-link","")},AM=function(t,r,s=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(r.content,r.filename,s),!1},k(this,mr,Pa).call(this)},bM=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),k(this,mr,Pa).call(this)};class oz extends Et{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class sc extends Et{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Hn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(e,t,r,s){var i,o,a;for(const[l,c]of r)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,s),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ae.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||sz,i=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(F0*s))||1,f=c/u;o=Math.min(s,l(f/F0))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(c/F0))}i.fontSize=`calc(${o}px * var(--scale-factor))`,i.color=ae.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class az extends sc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",c??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Kl.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=um,this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(r,"value",p.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue??"";r.value=u.userValue=m,u.formattedValue=null});let f=p=>{const{formattedValue:m}=u;m!=null&&(p.target.value=m),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",m=>{var y;if(u.focused)return;const{target:g}=m;u.userValue&&(g.value=u.userValue),u.lastCommittedValue=g.value,u.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const g={value(y){u.userValue=y.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),y.target.value=u.userValue},formattedValue(y){const{formattedValue:w}=y.detail;u.formattedValue=w,w!=null&&y.target!==document.activeElement&&(y.target.value=w),e.setValue(t,{formattedValue:w})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var S;const{charLimit:w}=y.detail,{target:v}=y;if(w===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",w);let E=u.userValue;!E||E.length<=w||(E=E.slice(0,w),v.value=u.userValue=E,e.setValue(t,{value:E}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(g,m)}),r.addEventListener("keydown",m=>{var w;u.commitKey=1;let g=-1;if(m.key==="Escape"?g=0:m.key==="Enter"&&!this.data.multiLine?g=2:m.key==="Tab"&&(u.commitKey=3),g===-1)return;const{value:y}=m.target;u.lastCommittedValue!==y&&(u.lastCommittedValue=y,u.userValue=y,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:g,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const p=f;f=null,r.addEventListener("blur",m=>{var y,w;if(!u.focused||!m.relatedTarget)return;(y=this.data.actions)!=null&&y.Blur||(u.focused=!1);const{value:g}=m.target;u.userValue=g,u.lastCommittedValue!==g&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:u.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),p(m)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",m=>{var O;u.lastCommittedValue=null;const{data:g,target:y}=m,{value:w,selectionStart:v,selectionEnd:E}=y;let S=v,R=E;switch(m.inputType){case"deleteWordBackward":{const j=w.substring(0,v).match(/\w*[^\w]*$/);j&&(S-=j[0].length);break}case"deleteWordForward":{const j=w.substring(v).match(/^[^\w]*\w*/);j&&(R+=j[0].length);break}case"deleteContentBackward":v===E&&(S-=1);break;case"deleteContentForward":v===E&&(R+=1);break}m.preventDefault(),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:g||"",willCommit:!1,selStart:S,selEnd:R}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class lz extends sc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class cz extends sc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Kl.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=um,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class SM extends sc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Kl.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=um,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const p=u&&f.id===r;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class uz extends EM{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class hz extends sc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Kl.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=um;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of s.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,r.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),i=!1),s.append(f)}let o=null;if(i){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:m}=s;return m?Array.prototype.filter.call(p,g=>g.selected).map(g=>g[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=a(!1);const c=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const m=p.detail.value,g=new Set(Array.isArray(m)?m:[m]);for(const y of s.options)y.selected=g.has(y.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(p){s.multiple=!0},remove(p){const m=s.options,g=p.detail.remove;m[g].selected=!1,s.remove(g),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},clear(p){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(p){const{index:m,displayValue:g,exportValue:y}=p.detail.insert,w=s.children[m],v=document.createElement("option");v.textContent=g,v.value=y,w?w.before(v):s.append(v),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},items(p){const{items:m}=p.detail;for(;s.length!==0;)s.remove(0);for(const g of m){const{displayValue:y,exportValue:w}=g,v=document.createElement("option");v.textContent=y,v.value=w,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},indices(p){const m=new Set(p.detail.indices);for(const g of p.target.options)g.selected=m.has(g.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),s.addEventListener("input",u=>{var m;const f=a(!0),p=a(!1);e.setValue(t,{value:f}),u.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class GE extends Et{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Et._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new dz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${TL}${r}`).join(",")),this.container}}var Pu,Sy,Ty,Iu,fl,pt,wi,pl,hp,dp,ku,Ei,Yr,Ai,fp,bi,pp,ml,gl,He,Wg,qE,TM,CM,xM,RM,Gg,qg,KE;class dz{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:f}){L(this,He);L(this,Pu,k(this,He,xM).bind(this));L(this,Sy,k(this,He,KE).bind(this));L(this,Ty,k(this,He,qg).bind(this));L(this,Iu,k(this,He,Gg).bind(this));L(this,fl,null);L(this,pt,null);L(this,wi,null);L(this,pl,null);L(this,hp,null);L(this,dp,null);L(this,ku,null);L(this,Ei,!1);L(this,Yr,null);L(this,Ai,null);L(this,fp,null);L(this,bi,null);L(this,pp,null);L(this,ml,null);L(this,gl,!1);var p;I(this,pt,e),I(this,pp,s),I(this,wi,o),I(this,bi,a),I(this,dp,l),I(this,fl,t),I(this,fp,c),I(this,ku,u),I(this,hp,r),I(this,pl,IL.toDateObject(i)),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",h(this,Iu)),m.addEventListener("mouseenter",h(this,Ty)),m.addEventListener("mouseleave",h(this,Sy)),m.classList.add("popupTriggerArea");for(const m of r)(p=m.container)==null||p.addEventListener("keydown",h(this,Pu));h(this,pt).hidden=!0,f&&k(this,He,Gg).call(this)}render(){if(h(this,Yr))return;const e=I(this,Yr,document.createElement("div"));if(e.className="popup",h(this,fl)){const i=e.style.outlineColor=ae.makeHexColor(...h(this,fl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=ae.makeHexColor(...h(this,fl).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=h(this,pp),e.append(t),h(this,pl)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),i.setAttribute("data-l10n-args",JSON.stringify({date:h(this,pl).toLocaleDateString(),time:h(this,pl).toLocaleTimeString()})),t.append(i)}const s=h(this,He,Wg);if(s)wM.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(h(this,wi));e.append(i)}h(this,pt).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,o=s.length;i<o;++i){const a=s[i];r.append(document.createTextNode(a)),i<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;h(this,ml)||I(this,ml,{contentsObj:h(this,wi),richText:h(this,bi)}),e&&I(this,Ai,null),t&&(I(this,bi,k(this,He,CM).call(this,t)),I(this,wi,null)),(r=h(this,Yr))==null||r.remove(),I(this,Yr,null)}resetEdited(){var e;h(this,ml)&&({contentsObj:tr(this,wi)._,richText:tr(this,bi)._}=h(this,ml),I(this,ml,null),(e=h(this,Yr))==null||e.remove(),I(this,Yr,null),I(this,Ai,null))}forceHide(){I(this,gl,this.isVisible),h(this,gl)&&(h(this,pt).hidden=!0)}maybeShow(){h(this,gl)&&(h(this,Yr)||k(this,He,qg).call(this),I(this,gl,!1),h(this,pt).hidden=!1)}get isVisible(){return h(this,pt).hidden===!1}}Pu=new WeakMap,Sy=new WeakMap,Ty=new WeakMap,Iu=new WeakMap,fl=new WeakMap,pt=new WeakMap,wi=new WeakMap,pl=new WeakMap,hp=new WeakMap,dp=new WeakMap,ku=new WeakMap,Ei=new WeakMap,Yr=new WeakMap,Ai=new WeakMap,fp=new WeakMap,bi=new WeakMap,pp=new WeakMap,ml=new WeakMap,gl=new WeakMap,He=new WeakSet,Wg=function(){const e=h(this,bi),t=h(this,wi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&h(this,bi).html||null},qE=function(){var e,t,r;return((r=(t=(e=h(this,He,Wg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},TM=function(){var e,t,r;return((r=(t=(e=h(this,He,Wg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},CM=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:h(this,He,TM),fontSize:h(this,He,qE)?`calc(${h(this,He,qE)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},xM=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&h(this,Ei))&&k(this,He,Gg).call(this)},RM=function(){if(h(this,Ai)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=h(this,dp);let o=!!h(this,ku),a=o?h(this,ku):h(this,fp);for(const g of h(this,hp))if(!a||ae.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=ae.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,f=l[0]+u,p=l[1];I(this,Ai,[100*(f-s)/t,100*(p-i)/r]);const{style:m}=h(this,pt);m.left=`${h(this,Ai)[0]}%`,m.top=`${h(this,Ai)[1]}%`},Gg=function(){I(this,Ei,!h(this,Ei)),h(this,Ei)?(k(this,He,qg).call(this),h(this,pt).addEventListener("click",h(this,Iu)),h(this,pt).addEventListener("keydown",h(this,Pu))):(k(this,He,KE).call(this),h(this,pt).removeEventListener("click",h(this,Iu)),h(this,pt).removeEventListener("keydown",h(this,Pu)))},qg=function(){h(this,Yr)||this.render(),this.isVisible?h(this,Ei)&&h(this,pt).classList.add("focused"):(k(this,He,RM).call(this),h(this,pt).hidden=!1,h(this,pt).style.zIndex=parseInt(h(this,pt).style.zIndex)+1e3)},KE=function(){h(this,pt).classList.remove("focused"),!(h(this,Ei)||!this.isVisible)&&(h(this,pt).hidden=!0,h(this,pt).style.zIndex=parseInt(h(this,pt).style.zIndex)-1e3)};class PM extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var mp;class fz extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,mp,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:r,height:s}=Vi(t.rect),i=this.svgFactory.create(r,s,!0),o=I(this,mp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,mp)}addHighlightArea(){this.container.classList.add("highlightArea")}}mp=new WeakMap;var gp;class pz extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,gp,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:r,height:s}=Vi(t.rect),i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=I(this,gp,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,gp)}addHighlightArea(){this.container.classList.add("highlightArea")}}gp=new WeakMap;var vp;class mz extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,vp,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:r,height:s}=Vi(t.rect),i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=I(this,vp,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",s/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,vp)}addHighlightArea(){this.container.classList.add("highlightArea")}}vp=new WeakMap;var yp;class IM extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,yp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i}}=this;if(!r)return this.container;const{width:o,height:a}=Vi(t),l=this.svgFactory.create(o,a,!0);let c=[];for(let f=0,p=r.length;f<p;f+=2){const m=r[f]-t[0],g=t[3]-r[f+1];c.push(`${m},${g}`)}c=c.join(" ");const u=I(this,yp,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,yp)}addHighlightArea(){this.container.classList.add("highlightArea")}}yp=new WeakMap;class gz extends IM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class vz extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var _p;class kM extends Et{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,_p,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:r,borderStyle:s,popupRef:i}}=this,{width:o,height:a}=Vi(t),l=this.svgFactory.create(o,a,!0);for(const c of r){let u=[];for(let p=0,m=c.length;p<m;p+=2){const g=c[p]-t[0],y=t[3]-c[p+1];u.push(`${g},${y}`)}u=u.join(" ");const f=this.svgFactory.createElement(this.svgElementName);h(this,_p).push(f),f.setAttribute("points",u),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),!i&&this.hasPopupData&&this._createPopup(),l.append(f)}return this.container.append(l),this.container}getElementsToTriggerPopup(){return h(this,_p)}addHighlightArea(){this.container.classList.add("highlightArea")}}_p=new WeakMap;class yz extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class _z extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class wz extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ez extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class LM extends Et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var wp,Ep,XE;class Az extends Et{constructor(t){var s;super(t,{isRenderable:!0});L(this,Ep);L(this,wp,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",k(this,Ep,XE).bind(this)),I(this,wp,s);const{isMac:i}=Hn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&k(this,Ep,XE).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return h(this,wp)}addHighlightArea(){this.container.classList.add("highlightArea")}}wp=new WeakMap,Ep=new WeakSet,XE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ap,vl,Lu,Ql,MM,YE,kR;let bz=(kR=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:o}){L(this,Ql);L(this,Ap,null);L(this,vl,null);L(this,Lu,new Map);this.div=e,I(this,Ap,t),I(this,vl,r),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){var o;const{annotations:t}=e,r=this.div;Gl(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new wS,annotationStorage:e.annotationStorage||new TS,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Rt.POPUP;if(l){const f=s.get(a.id);if(!f)continue;i.elements=f}else{const{width:f,height:p}=Vi(a.rect);if(f<=0||p<=0)continue}i.data=a;const c=iz.create(i);if(!c.isRenderable)continue;if(!l&&a.popupRef){const f=s.get(a.popupRef);f?f.push(c):s.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),k(this,Ql,MM).call(this,u,a.id),c.annotationEditorType>0&&(h(this,Lu).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}k(this,Ql,YE).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Gl(t,{rotation:e.rotation}),k(this,Ql,YE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(h(this,Lu).values())}getEditableAnnotation(e){return h(this,Lu).get(e)}},Ap=new WeakMap,vl=new WeakMap,Lu=new WeakMap,Ql=new WeakSet,MM=function(e,t){var s;const r=e.firstChild||e;r.id=`${TL}${t}`,this.div.append(e),(s=h(this,Ap))==null||s.moveElementInDOM(this.div,e,r,!1)},YE=function(){if(!h(this,vl))return;const e=this.div;for(const[t,r]of h(this,vl)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(r):i.classList.contains("annotationContent")?i.after(r):i.before(r):s.append(r)}h(this,vl).clear()},kR);const og=/\r\n?|\n/g;var bp,Sp,Tp,Cp,xp,Qr,ar,Rp,lr,Mu,Ct,NM,DM,OM,Kg,Bi,Xg,Yg,FM,JE,VM;const Ye=class Ye extends Be{constructor(t){super({...t,name:"freeTextEditor"});L(this,Ct);L(this,bp,this.editorDivBlur.bind(this));L(this,Sp,this.editorDivFocus.bind(this));L(this,Tp,this.editorDivInput.bind(this));L(this,Cp,this.editorDivKeydown.bind(this));L(this,xp,this.editorDivPaste.bind(this));L(this,Qr);L(this,ar,"");L(this,Rp,`${this.id}-editor`);L(this,lr);L(this,Mu,null);I(this,Qr,t.color||Ye._defaultColor||Be._defaultLineColor),I(this,lr,t.fontSize||Ye._defaultFontSize)}static get _keyboardManager(){const t=Ye.prototype,r=o=>o.isEmpty(),s=ql.TRANSLATE_SMALL,i=ql.TRANSLATE_BIG;return Le(this,"_keyboardManager",new lm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){Be.initialize(t,r,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case pe.FREETEXT_SIZE:Ye._defaultFontSize=r;break;case pe.FREETEXT_COLOR:Ye._defaultColor=r;break}}updateParams(t,r){switch(t){case pe.FREETEXT_SIZE:k(this,Ct,NM).call(this,r);break;case pe.FREETEXT_COLOR:k(this,Ct,DM).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.FREETEXT_SIZE,Ye._defaultFontSize],[pe.FREETEXT_COLOR,Ye._defaultColor||Be._defaultLineColor]]}get propertiesToUpdate(){return[[pe.FREETEXT_SIZE,h(this,lr)],[pe.FREETEXT_COLOR,h(this,Qr)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ye._internalPadding*t,-(Ye._internalPadding+h(this,lr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(xe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",h(this,Cp),{signal:t}),this.editorDiv.addEventListener("focus",h(this,Sp),{signal:t}),this.editorDiv.addEventListener("blur",h(this,bp),{signal:t}),this.editorDiv.addEventListener("input",h(this,Tp),{signal:t}),this.editorDiv.addEventListener("paste",h(this,xp),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,Rp)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",h(this,Cp)),this.editorDiv.removeEventListener("focus",h(this,Sp)),this.editorDiv.removeEventListener("blur",h(this,bp)),this.editorDiv.removeEventListener("input",h(this,Tp)),this.editorDiv.removeEventListener("paste",h(this,xp)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=h(this,ar),r=I(this,ar,k(this,Ct,OM).call(this).trimEnd());if(t===r)return;const s=i=>{if(I(this,ar,i),!i){this.remove();return}k(this,Ct,Yg).call(this),this._uiManager.rebuild(this),k(this,Ct,Kg).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),k(this,Ct,Kg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,Rp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Be._l10nPromise.get("pdfjs-free-text-default-content").then(i=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",i)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${h(this,lr)}px * var(--scale-factor))`,s.color=h(this,Qr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Hv(this,this.div,["dblclick","keydown"]),this.width){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=h(this,Mu);let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,f]=this.pageDimensions,[p,m]=this.pageTranslation;let g,y;switch(this.rotation){case 0:g=t+(a[0]-p)/u,y=r+this.height-(a[1]-m)/f;break;case 90:g=t+(a[0]-p)/u,y=r-(a[1]-m)/f,[l,c]=[c,-l];break;case 180:g=t-this.width+(a[0]-p)/u,y=r-(a[1]-m)/f,[l,c]=[-l,-c];break;case 270:g=t+(a[0]-p-this.height*f)/u,y=r+(a[1]-m-this.width*u)/f,[l,c]=[-c,l];break}this.setAt(g*i,y*o,l,c)}else this.setAt(t*i,r*o,this.width*i,this.height*o);k(this,Ct,Yg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var g,y,w;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=k(g=Ye,Bi,JE).call(g,r.getData("text")||"").replaceAll(og,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],f=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(og,"")),v!==this.editorDiv){let E=u;for(const S of this.editorDiv.childNodes){if(S===v){E=f;continue}E.push(k(y=Ye,Bi,Xg).call(y,S))}}u.push(l.nodeValue.slice(0,c).replaceAll(og,""))}else if(l===this.editorDiv){let v=u,E=0;for(const S of this.editorDiv.childNodes)E++===c&&(v=f),v.push(k(w=Ye,Bi,Xg).call(w,S))}I(this,ar,`${u.join(`
`)}${i}${f.join(`
`)}`),k(this,Ct,Yg).call(this);const p=new Range;let m=u.reduce((v,E)=>v+E.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const E=v.nodeValue.length;if(m<=E){p.setStart(v,m),p.setEnd(v,m);break}m-=E}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static deserialize(t,r,s){var a;let i=null;if(t instanceof PM){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:f,id:p},textContent:m,textPosition:g,parent:{page:{pageNumber:y}}}=t;if(!m||m.length===0)return null;i=t={annotationType:xe.FREETEXT,color:Array.from(c),fontSize:l,value:m.join(`
`),position:g,pageIndex:y-1,rect:u.slice(0),rotation:f,id:p,deleted:!1}}const o=super.deserialize(t,r,s);return I(o,lr,t.fontSize),I(o,Qr,ae.makeHexColor(...t.color)),I(o,ar,k(a=Ye,Bi,JE).call(a,t.value)),o.annotationElementId=t.id||null,I(o,Mu,i),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const r=Ye._internalPadding*this.parentScale,s=this.getRect(r,r),i=Be._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,Qr)),o={annotationType:xe.FREETEXT,color:i,fontSize:h(this,lr),value:k(this,Ct,FM).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!k(this,Ct,VM).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:s}=r;s.fontSize=`calc(${h(this,lr)}px * var(--scale-factor))`,s.color=h(this,Qr),r.replaceChildren();for(const o of h(this,ar).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),r.append(a)}const i=Ye._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:h(this,ar)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};bp=new WeakMap,Sp=new WeakMap,Tp=new WeakMap,Cp=new WeakMap,xp=new WeakMap,Qr=new WeakMap,ar=new WeakMap,Rp=new WeakMap,lr=new WeakMap,Mu=new WeakMap,Ct=new WeakSet,NM=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-h(this,lr))*this.parentScale),I(this,lr,i),k(this,Ct,Kg).call(this)},s=h(this,lr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},DM=function(t){const r=i=>{I(this,Qr,this.editorDiv.style.color=i)},s=h(this,Qr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},OM=function(){var r;const t=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)t.push(k(r=Ye,Bi,Xg).call(r,s));return t.join(`
`)},Kg=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Bi=new WeakSet,Xg=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(og,"")},Yg=function(){if(this.editorDiv.replaceChildren(),!!h(this,ar))for(const t of h(this,ar).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},FM=function(){return h(this,ar).replaceAll(""," ")},JE=function(t){return t.replaceAll(" ","")},VM=function(t){const{value:r,fontSize:s,color:i,pageIndex:o}=h(this,Mu);return this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},L(Ye,Bi),ve(Ye,"_freeTextDefaultContent",""),ve(Ye,"_internalPadding",0),ve(Ye,"_defaultColor",null),ve(Ye,"_defaultFontSize",10),ve(Ye,"_type","freetext"),ve(Ye,"_editorType",xe.FREETEXT);let QE=Ye;var Pp,Co,Jr,Nn,jM,Qg,BM,UM,eA;class ZE{constructor(e,t=0,r=0,s=!0){L(this,Nn);L(this,Pp);L(this,Co,[]);L(this,Jr,[]);let i=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:v,y:E,width:S,height:R}of e){const O=Math.floor((v-t)/u)*u,j=Math.ceil((v+S+t)/u)*u,C=Math.floor((E-t)/u)*u,T=Math.ceil((E+R+t)/u)*u,P=[O,C,T,!0],M=[j,C,T,!1];h(this,Co).push(P,M),i=Math.min(i,O),o=Math.max(o,j),a=Math.min(a,C),l=Math.max(l,T)}const f=o-i+2*r,p=l-a+2*r,m=i-r,g=a-r,y=h(this,Co).at(s?-1:-2),w=[y[0],y[2]];for(const v of h(this,Co)){const[E,S,R]=v;v[0]=(E-m)/f,v[1]=(S-g)/p,v[2]=(R-g)/p}I(this,Pp,{x:m,y:g,width:f,height:p,lastPoint:w})}getOutlines(){h(this,Co).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of h(this,Co))t[3]?(e.push(...k(this,Nn,eA).call(this,t)),k(this,Nn,BM).call(this,t)):(k(this,Nn,UM).call(this,t),e.push(...k(this,Nn,eA).call(this,t)));return k(this,Nn,jM).call(this,e)}}Pp=new WeakMap,Co=new WeakMap,Jr=new WeakMap,Nn=new WeakSet,jM=function(e){const t=[],r=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const s=[];let i;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,u,f]=o;r.delete(o);let p=a,m=l;for(i=[a,c],s.push(i);;){let g;if(r.has(u))g=u;else if(r.has(f))g=f;else break;r.delete(g),[a,l,c,u,f]=g,p!==a&&(i.push(p,m,a,m===l?l:c),p=a),m=m===l?c:l}i.push(p,m)}return new Sz(s,h(this,Pp))},Qg=function(e){const t=h(this,Jr);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,o=t[i][0];if(o===e)return i;o<e?r=i+1:s=i-1}return s+1},BM=function([,e,t]){const r=k(this,Nn,Qg).call(this,e);h(this,Jr).splice(r,0,[e,t])},UM=function([,e,t]){const r=k(this,Nn,Qg).call(this,e);for(let s=r;s<h(this,Jr).length;s++){const[i,o]=h(this,Jr)[s];if(i!==e)break;if(i===e&&o===t){h(this,Jr).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,o]=h(this,Jr)[s];if(i!==e)break;if(i===e&&o===t){h(this,Jr).splice(s,1);return}}},eA=function(e){const[t,r,s]=e,i=[[t,r,s]],o=k(this,Nn,Qg).call(this,s);for(let a=0;a<o;a++){const[l,c]=h(this,Jr)[a];for(let u=0,f=i.length;u<f;u++){const[,p,m]=i[u];if(!(c<=p||m<=l)){if(p>=l){if(m>c)i[u][1]=c;else{if(f===1)return[];i.splice(u,1),u--,f--}continue}i[u][2]=l,m>c&&i.push([t,c,m])}}}return i};class $M{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof nA}}var Ip,Nu;class Sz extends $M{constructor(t,r){super();L(this,Ip);L(this,Nu);I(this,Nu,t),I(this,Ip,r)}toSVGPath(){const t=[];for(const r of h(this,Nu)){let[s,i]=r;t.push(`M${s} ${i}`);for(let o=2;o<r.length;o+=2){const a=r[o],l=r[o+1];a===s?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],o){const a=[],l=s-t,c=i-r;for(const u of h(this,Nu)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=t+u[p]*l,f[p+1]=i-u[p+1]*c;a.push(f)}return a}get box(){return h(this,Ip)}}Ip=new WeakMap,Nu=new WeakMap;var Ts,Si,Du,Ou,Cs,Te,yl,_l,kp,Lp,Fu,Vu,xo,Mp,Cy,xy,Np,tA;const ii=class ii{constructor({x:e,y:t},r,s,i,o,a=0){L(this,Np);L(this,Ts);L(this,Si,[]);L(this,Du);L(this,Ou);L(this,Cs,[]);L(this,Te,new Float64Array(18));L(this,yl);L(this,_l);L(this,kp);L(this,Lp);L(this,Fu);L(this,Vu);L(this,xo,[]);I(this,Ts,r),I(this,Vu,i*s),I(this,Ou,o),h(this,Te).set([NaN,NaN,NaN,NaN,e,t],6),I(this,Du,a),I(this,Lp,h(ii,Mp)*s),I(this,kp,h(ii,xy)*s),I(this,Fu,s),h(this,xo).push(e,t)}get free(){return!0}isEmpty(){return isNaN(h(this,Te)[8])}add({x:e,y:t}){var P;I(this,yl,e),I(this,_l,t);const[r,s,i,o]=h(this,Ts);let[a,l,c,u]=h(this,Te).subarray(8,12);const f=e-c,p=t-u,m=Math.hypot(f,p);if(m<h(this,kp))return!1;const g=m-h(this,Lp),y=g/m,w=y*f,v=y*p;let E=a,S=l;a=c,l=u,c+=w,u+=v,(P=h(this,xo))==null||P.push(e,t);const R=-v/g,O=w/g,j=R*h(this,Vu),C=O*h(this,Vu);return h(this,Te).set(h(this,Te).subarray(2,8),0),h(this,Te).set([c+j,u+C],4),h(this,Te).set(h(this,Te).subarray(14,18),12),h(this,Te).set([c-j,u-C],16),isNaN(h(this,Te)[6])?(h(this,Cs).length===0&&(h(this,Te).set([a+j,l+C],2),h(this,Cs).push(NaN,NaN,NaN,NaN,(a+j-r)/i,(l+C-s)/o),h(this,Te).set([a-j,l-C],14),h(this,Si).push(NaN,NaN,NaN,NaN,(a-j-r)/i,(l-C-s)/o)),h(this,Te).set([E,S,a,l,c,u],6),!this.isEmpty()):(h(this,Te).set([E,S,a,l,c,u],6),Math.abs(Math.atan2(S-l,E-a)-Math.atan2(v,w))<Math.PI/2?([a,l,c,u]=h(this,Te).subarray(2,6),h(this,Cs).push(NaN,NaN,NaN,NaN,((a+c)/2-r)/i,((l+u)/2-s)/o),[a,l,E,S]=h(this,Te).subarray(14,18),h(this,Si).push(NaN,NaN,NaN,NaN,((E+a)/2-r)/i,((S+l)/2-s)/o),!0):([E,S,a,l,c,u]=h(this,Te).subarray(0,6),h(this,Cs).push(((E+5*a)/6-r)/i,((S+5*l)/6-s)/o,((5*a+c)/6-r)/i,((5*l+u)/6-s)/o,((a+c)/2-r)/i,((l+u)/2-s)/o),[c,u,a,l,E,S]=h(this,Te).subarray(12,18),h(this,Si).push(((E+5*a)/6-r)/i,((S+5*l)/6-s)/o,((5*a+c)/6-r)/i,((5*l+u)/6-s)/o,((a+c)/2-r)/i,((l+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=h(this,Cs),t=h(this,Si),r=h(this,Te).subarray(4,6),s=h(this,Te).subarray(16,18),[i,o,a,l]=h(this,Ts),[c,u,f,p]=k(this,Np,tA).call(this);if(isNaN(h(this,Te)[6])&&!this.isEmpty())return`M${(h(this,Te)[2]-i)/a} ${(h(this,Te)[3]-o)/l} L${(h(this,Te)[4]-i)/a} ${(h(this,Te)[5]-o)/l} L${c} ${u} L${f} ${p} L${(h(this,Te)[16]-i)/a} ${(h(this,Te)[17]-o)/l} L${(h(this,Te)[14]-i)/a} ${(h(this,Te)[15]-o)/l} Z`;const m=[];m.push(`M${e[4]} ${e[5]}`);for(let g=6;g<e.length;g+=6)isNaN(e[g])?m.push(`L${e[g+4]} ${e[g+5]}`):m.push(`C${e[g]} ${e[g+1]} ${e[g+2]} ${e[g+3]} ${e[g+4]} ${e[g+5]}`);m.push(`L${(r[0]-i)/a} ${(r[1]-o)/l} L${c} ${u} L${f} ${p} L${(s[0]-i)/a} ${(s[1]-o)/l}`);for(let g=t.length-6;g>=6;g-=6)isNaN(t[g])?m.push(`L${t[g+4]} ${t[g+5]}`):m.push(`C${t[g]} ${t[g+1]} ${t[g+2]} ${t[g+3]} ${t[g+4]} ${t[g+5]}`);return m.push(`L${t[4]} ${t[5]} Z`),m.join(" ")}getOutlines(){var v;const e=h(this,Cs),t=h(this,Si),r=h(this,Te),s=r.subarray(4,6),i=r.subarray(16,18),[o,a,l,c]=h(this,Ts),u=new Float64Array((((v=h(this,xo))==null?void 0:v.length)??0)+2);for(let E=0,S=u.length-2;E<S;E+=2)u[E]=(h(this,xo)[E]-o)/l,u[E+1]=(h(this,xo)[E+1]-a)/c;u[u.length-2]=(h(this,yl)-o)/l,u[u.length-1]=(h(this,_l)-a)/c;const[f,p,m,g]=k(this,Np,tA).call(this);if(isNaN(r[6])&&!this.isEmpty()){const E=new Float64Array(36);return E.set([NaN,NaN,NaN,NaN,(r[2]-o)/l,(r[3]-a)/c,NaN,NaN,NaN,NaN,(r[4]-o)/l,(r[5]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(r[16]-o)/l,(r[17]-a)/c,NaN,NaN,NaN,NaN,(r[14]-o)/l,(r[15]-a)/c],0),new nA(E,u,h(this,Ts),h(this,Fu),h(this,Du),h(this,Ou))}const y=new Float64Array(h(this,Cs).length+24+h(this,Si).length);let w=e.length;for(let E=0;E<w;E+=2){if(isNaN(e[E])){y[E]=y[E+1]=NaN;continue}y[E]=e[E],y[E+1]=e[E+1]}y.set([NaN,NaN,NaN,NaN,(s[0]-o)/l,(s[1]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(i[0]-o)/l,(i[1]-a)/c],w),w+=24;for(let E=t.length-6;E>=6;E-=6)for(let S=0;S<6;S+=2){if(isNaN(t[E+S])){y[w]=y[w+1]=NaN,w+=2;continue}y[w]=t[E+S],y[w+1]=t[E+S+1],w+=2}return y.set([NaN,NaN,NaN,NaN,t[4],t[5]],w),new nA(y,u,h(this,Ts),h(this,Fu),h(this,Du),h(this,Ou))}};Ts=new WeakMap,Si=new WeakMap,Du=new WeakMap,Ou=new WeakMap,Cs=new WeakMap,Te=new WeakMap,yl=new WeakMap,_l=new WeakMap,kp=new WeakMap,Lp=new WeakMap,Fu=new WeakMap,Vu=new WeakMap,xo=new WeakMap,Mp=new WeakMap,Cy=new WeakMap,xy=new WeakMap,Np=new WeakSet,tA=function(){const e=h(this,Te).subarray(4,6),t=h(this,Te).subarray(16,18),[r,s,i,o]=h(this,Ts);return[(h(this,yl)+(e[0]-t[0])/2-r)/i,(h(this,_l)+(e[1]-t[1])/2-s)/o,(h(this,yl)+(t[0]-e[0])/2-r)/i,(h(this,_l)+(t[1]-e[1])/2-s)/o]},L(ii,Mp,8),L(ii,Cy,2),L(ii,xy,h(ii,Mp)+h(ii,Cy));let Kv=ii;var ju,wl,Ti,Dp,cr,Op,yt,Wn,md,gd,zM;class nA extends $M{constructor(t,r,s,i,o,a){super();L(this,Wn);L(this,ju);L(this,wl,null);L(this,Ti);L(this,Dp);L(this,cr);L(this,Op);L(this,yt);I(this,yt,t),I(this,cr,r),I(this,ju,s),I(this,Op,i),I(this,Ti,o),I(this,Dp,a),k(this,Wn,zM).call(this,a);const{x:l,y:c,width:u,height:f}=h(this,wl);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-l)/u,t[p+1]=(t[p+1]-c)/f;for(let p=0,m=r.length;p<m;p+=2)r[p]=(r[p]-l)/u,r[p+1]=(r[p+1]-c)/f}toSVGPath(){const t=[`M${h(this,yt)[4]} ${h(this,yt)[5]}`];for(let r=6,s=h(this,yt).length;r<s;r+=6){if(isNaN(h(this,yt)[r])){t.push(`L${h(this,yt)[r+4]} ${h(this,yt)[r+5]}`);continue}t.push(`C${h(this,yt)[r]} ${h(this,yt)[r+1]} ${h(this,yt)[r+2]} ${h(this,yt)[r+3]} ${h(this,yt)[r+4]} ${h(this,yt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],o){const a=s-t,l=i-r;let c,u;switch(o){case 0:c=k(this,Wn,md).call(this,h(this,yt),t,i,a,-l),u=k(this,Wn,md).call(this,h(this,cr),t,i,a,-l);break;case 90:c=k(this,Wn,gd).call(this,h(this,yt),t,r,a,l),u=k(this,Wn,gd).call(this,h(this,cr),t,r,a,l);break;case 180:c=k(this,Wn,md).call(this,h(this,yt),s,r,-a,l),u=k(this,Wn,md).call(this,h(this,cr),s,r,-a,l);break;case 270:c=k(this,Wn,gd).call(this,h(this,yt),s,i,-a,-l),u=k(this,Wn,gd).call(this,h(this,cr),s,i,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return h(this,wl)}getNewOutline(t,r){const{x:s,y:i,width:o,height:a}=h(this,wl),[l,c,u,f]=h(this,ju),p=o*u,m=a*f,g=s*u+l,y=i*f+c,w=new Kv({x:h(this,cr)[0]*p+g,y:h(this,cr)[1]*m+y},h(this,ju),h(this,Op),t,h(this,Dp),r??h(this,Ti));for(let v=2;v<h(this,cr).length;v+=2)w.add({x:h(this,cr)[v]*p+g,y:h(this,cr)[v+1]*m+y});return w.getOutlines()}}ju=new WeakMap,wl=new WeakMap,Ti=new WeakMap,Dp=new WeakMap,cr=new WeakMap,Op=new WeakMap,yt=new WeakMap,Wn=new WeakSet,md=function(t,r,s,i,o){const a=new Float64Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l]*i,a[l+1]=s+t[l+1]*o;return a},gd=function(t,r,s,i,o){const a=new Float64Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l+1]*i,a[l+1]=s+t[l]*o;return a},zM=function(t){const r=h(this,yt);let s=r[4],i=r[5],o=s,a=i,l=s,c=i,u=s,f=i;const p=t?Math.max:Math.min;for(let v=6,E=r.length;v<E;v+=6){if(isNaN(r[v]))o=Math.min(o,r[v+4]),a=Math.min(a,r[v+5]),l=Math.max(l,r[v+4]),c=Math.max(c,r[v+5]),f<r[v+5]?(u=r[v+4],f=r[v+5]):f===r[v+5]&&(u=p(u,r[v+4]));else{const S=ae.bezierBoundingBox(s,i,...r.slice(v,v+6));o=Math.min(o,S[0]),a=Math.min(a,S[1]),l=Math.max(l,S[2]),c=Math.max(c,S[3]),f<S[3]?(u=S[2],f=S[3]):f===S[3]&&(u=p(u,S[2]))}s=r[v+4],i=r[v+5]}const m=o-h(this,Ti),g=a-h(this,Ti),y=l-o+2*h(this,Ti),w=c-a+2*h(this,Ti);I(this,wl,{x:m,y:g,width:y,height:w,lastPoint:[u,f]})};var Fp,Vp,Zr,El,Bu,It,jp,Uu,Bp,Up,es,$u,Xe,rA,sA,HM,Ia,WM,ao;const oi=class oi{constructor({editor:e=null,uiManager:t=null}){L(this,Xe);L(this,Fp,k(this,Xe,HM).bind(this));L(this,Vp,k(this,Xe,WM).bind(this));L(this,Zr,null);L(this,El,null);L(this,Bu);L(this,It,null);L(this,jp,!1);L(this,Uu,!1);L(this,Bp,null);L(this,Up);L(this,es,null);L(this,$u);var r;e?(I(this,Uu,!1),I(this,$u,pe.HIGHLIGHT_COLOR),I(this,Bp,e)):(I(this,Uu,!0),I(this,$u,pe.HIGHLIGHT_DEFAULT_COLOR)),I(this,es,(e==null?void 0:e._uiManager)||t),I(this,Up,h(this,es)._eventBus),I(this,Bu,(e==null?void 0:e.color)||((r=h(this,es))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Le(this,"_keyboardManager",new lm([[["Escape","mac+Escape"],oi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],oi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],oi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],oi.prototype._moveToPrevious],[["Home","mac+Home"],oi.prototype._moveToBeginning],[["End","mac+End"],oi.prototype._moveToEnd]]))}renderButton(){const e=I(this,Zr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=h(this,es)._signal;e.addEventListener("click",k(this,Xe,Ia).bind(this),{signal:t}),e.addEventListener("keydown",h(this,Fp),{signal:t});const r=I(this,El,document.createElement("span"));return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=h(this,Bu),e.append(r),e}renderMainDropdown(){const e=I(this,It,k(this,Xe,rA).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===h(this,Zr)){k(this,Xe,Ia).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,Xe,sA).call(this,t,e)}_moveToNext(e){var t,r;if(!h(this,Xe,ao)){k(this,Xe,Ia).call(this,e);return}if(e.target===h(this,Zr)){(t=h(this,It).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=h(this,It))==null?void 0:t.firstChild)||e.target===h(this,Zr)){h(this,Xe,ao)&&this._hideDropdownFromKeyboard();return}h(this,Xe,ao)||k(this,Xe,Ia).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!h(this,Xe,ao)){k(this,Xe,Ia).call(this,e);return}(t=h(this,It).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!h(this,Xe,ao)){k(this,Xe,Ia).call(this,e);return}(t=h(this,It).lastChild)==null||t.focus()}hideDropdown(){var e;(e=h(this,It))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",h(this,Vp))}_hideDropdownFromKeyboard(){var e;if(!h(this,Uu)){if(!h(this,Xe,ao)){(e=h(this,Bp))==null||e.unselect();return}this.hideDropdown(),h(this,Zr).focus({preventScroll:!0,focusVisible:h(this,jp)})}}updateColor(e){if(h(this,El)&&(h(this,El).style.backgroundColor=e),!h(this,It))return;const t=h(this,es).highlightColors.values();for(const r of h(this,It).children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=h(this,Zr))==null||e.remove(),I(this,Zr,null),I(this,El,null),(t=h(this,It))==null||t.remove(),I(this,It,null)}};Fp=new WeakMap,Vp=new WeakMap,Zr=new WeakMap,El=new WeakMap,Bu=new WeakMap,It=new WeakMap,jp=new WeakMap,Uu=new WeakMap,Bp=new WeakMap,Up=new WeakMap,es=new WeakMap,$u=new WeakMap,Xe=new WeakSet,rA=function(){const e=document.createElement("div"),t=h(this,es)._signal;e.addEventListener("contextmenu",Xn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,s]of h(this,es).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${r}`);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.setAttribute("aria-selected",s===h(this,Bu)),i.addEventListener("click",k(this,Xe,sA).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",h(this,Fp),{signal:t}),e},sA=function(e,t){t.stopPropagation(),h(this,Up).dispatch("switchannotationeditorparams",{source:this,type:h(this,$u),value:e})},HM=function(e){oi._keyboardManager.exec(this,e)},Ia=function(e){if(h(this,Xe,ao)){this.hideDropdown();return}if(I(this,jp,e.detail===0),window.addEventListener("pointerdown",h(this,Vp),{signal:h(this,es)._signal}),h(this,It)){h(this,It).classList.remove("hidden");return}const t=I(this,It,k(this,Xe,rA).call(this));h(this,Zr).append(t)},WM=function(e){var t;(t=h(this,It))!=null&&t.contains(e.target)||this.hideDropdown()},ao=function(){return h(this,It)&&!h(this,It).classList.contains("hidden")};let Xv=oi;var zu,$p,Ro,Al,Hu,xr,zp,Hp,bl,ts,xn,ur,Ry,Wu,Sl,kt,Gu,xs,Wp,Ee,iA,oA,GM,qM,KM,aA,vd,Mr,Ac,XM,Jg,yd,YM,QM,JM,ZM;const Ve=class Ve extends Be{constructor(t){super({...t,name:"highlightEditor"});L(this,Ee);L(this,zu,null);L(this,$p,0);L(this,Ro);L(this,Al,null);L(this,Hu,null);L(this,xr,null);L(this,zp,null);L(this,Hp,0);L(this,bl,null);L(this,ts,null);L(this,xn,null);L(this,ur,!1);L(this,Ry,k(this,Ee,XM).bind(this));L(this,Wu,null);L(this,Sl);L(this,kt,null);L(this,Gu,"");L(this,xs);L(this,Wp,"");this.color=t.color||Ve._defaultColor,I(this,xs,t.thickness||Ve._defaultThickness),I(this,Sl,t.opacity||Ve._defaultOpacity),I(this,Ro,t.boxes||null),I(this,Wp,t.methodOfCreation||""),I(this,Gu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(I(this,ur,!0),k(this,Ee,oA).call(this,t),k(this,Ee,vd).call(this)):(I(this,zu,t.anchorNode),I(this,$p,t.anchorOffset),I(this,zp,t.focusNode),I(this,Hp,t.focusOffset),k(this,Ee,iA).call(this),k(this,Ee,vd).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ve.prototype;return Le(this,"_keyboardManager",new lm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,ur)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(this,xs),methodOfCreation:h(this,Wp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;Be.initialize(t,r),Ve._defaultColor||(Ve._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case pe.HIGHLIGHT_DEFAULT_COLOR:Ve._defaultColor=r;break;case pe.HIGHLIGHT_THICKNESS:Ve._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return h(this,Wu)}updateParams(t,r){switch(t){case pe.HIGHLIGHT_COLOR:k(this,Ee,GM).call(this,r);break;case pe.HIGHLIGHT_THICKNESS:k(this,Ee,qM).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.HIGHLIGHT_DEFAULT_COLOR,Ve._defaultColor],[pe.HIGHLIGHT_THICKNESS,Ve._defaultThickness]]}get propertiesToUpdate(){return[[pe.HIGHLIGHT_COLOR,this.color||Ve._defaultColor],[pe.HIGHLIGHT_THICKNESS,h(this,xs)||Ve._defaultThickness],[pe.HIGHLIGHT_FREE,h(this,ur)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(I(this,Hu,new Xv({editor:this})),t.addColorPicker(h(this,Hu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,Ee,yd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,k(this,Ee,yd).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){k(this,Ee,aA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Ee,vd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?k(this,Ee,aA).call(this):t&&(k(this,Ee,vd).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,o,a;const{drawLayer:r}=this.parent;let s;h(this,ur)?(t=(t-this.rotation+360)%360,s=k(i=Ve,Mr,Ac).call(i,h(this,ts).box,t)):s=k(o=Ve,Mr,Ac).call(o,this,t),r.rotate(h(this,xn),t),r.rotate(h(this,kt),t),r.updateBox(h(this,xn),s),r.updateBox(h(this,kt),k(a=Ve,Mr,Ac).call(a,h(this,xr).box,t))}render(){if(this.div)return this.div;const t=super.render();h(this,Gu)&&(t.setAttribute("aria-label",h(this,Gu)),t.setAttribute("role","mark")),h(this,ur)?t.classList.add("free"):this.div.addEventListener("keydown",h(this,Ry),{signal:this._uiManager._signal});const r=I(this,bl,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=h(this,Al);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),Hv(this,h(this,bl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(h(this,kt),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(h(this,kt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,Ee,Jg).call(this,!0);break;case 1:case 3:k(this,Ee,Jg).call(this,!1);break}}select(){var t,r;super.select(),h(this,kt)&&((t=this.parent)==null||t.drawLayer.removeClass(h(this,kt),"hovered"),(r=this.parent)==null||r.drawLayer.addClass(h(this,kt),"selected"))}unselect(){var t;super.unselect(),h(this,kt)&&((t=this.parent)==null||t.drawLayer.removeClass(h(this,kt),"selected"),h(this,ur)||k(this,Ee,Jg).call(this,!1))}get _mustFixPosition(){return!h(this,ur)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(h(this,xn),t),this.parent.drawLayer.show(h(this,kt),t))}static startHighlighting(t,r,{target:s,x:i,y:o}){const{x:a,y:l,width:c,height:u}=s.getBoundingClientRect(),f=w=>{k(this,Mr,JM).call(this,t,w)},p=t._signal,m={capture:!0,passive:!1,signal:p},g=w=>{w.preventDefault(),w.stopPropagation()},y=w=>{s.removeEventListener("pointermove",f),window.removeEventListener("blur",y),window.removeEventListener("pointerup",y),window.removeEventListener("pointerdown",g,m),window.removeEventListener("contextmenu",Xn),k(this,Mr,ZM).call(this,t,w)};window.addEventListener("blur",y,{signal:p}),window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("pointerdown",g,m),window.addEventListener("contextmenu",Xn,{signal:p}),s.addEventListener("pointermove",f,{signal:p}),this._freeHighlight=new Kv({x:i,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,r,s){var y;const i=super.deserialize(t,r,s),{rect:[o,a,l,c],color:u,quadPoints:f}=t;i.color=ae.makeHexColor(...u),I(i,Sl,t.opacity);const[p,m]=i.pageDimensions;i.width=(l-o)/p,i.height=(c-a)/m;const g=I(i,Ro,[]);for(let w=0;w<f.length;w+=8)g.push({x:(f[4]-l)/p,y:(c-(1-f[w+5]))/m,width:(f[w+2]-f[w])/p,height:(f[w+5]-f[w+1])/m});return k(y=i,Ee,iA).call(y),i}serialize(t=!1){if(this.isEmpty()||t)return null;const r=this.getRect(0,0),s=Be._colorManager.convert(this.color);return{annotationType:xe.HIGHLIGHT,color:s,opacity:h(this,Sl),thickness:h(this,xs),quadPoints:k(this,Ee,YM).call(this),outlines:k(this,Ee,QM).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:k(this,Ee,yd).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};zu=new WeakMap,$p=new WeakMap,Ro=new WeakMap,Al=new WeakMap,Hu=new WeakMap,xr=new WeakMap,zp=new WeakMap,Hp=new WeakMap,bl=new WeakMap,ts=new WeakMap,xn=new WeakMap,ur=new WeakMap,Ry=new WeakMap,Wu=new WeakMap,Sl=new WeakMap,kt=new WeakMap,Gu=new WeakMap,xs=new WeakMap,Wp=new WeakMap,Ee=new WeakSet,iA=function(){const t=new ZE(h(this,Ro),.001);I(this,ts,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=h(this,ts).box;const r=new ZE(h(this,Ro),.0025,.001,this._uiManager.direction==="ltr");I(this,xr,r.getOutlines());const{lastPoint:s}=h(this,xr).box;I(this,Wu,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},oA=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,p;if(I(this,ts,t),I(this,xr,t.getNewOutline(h(this,xs)/2+1.5,.0025)),r>=0)I(this,xn,r),I(this,Al,s),this.parent.drawLayer.finalizeLine(r,t),I(this,kt,this.parent.drawLayer.highlightOutline(h(this,xr)));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(h(this,xn),t),this.parent.drawLayer.updateBox(h(this,xn),k(f=Ve,Mr,Ac).call(f,h(this,ts).box,(m-this.rotation+360)%360)),this.parent.drawLayer.updateLine(h(this,kt),h(this,xr)),this.parent.drawLayer.updateBox(h(this,kt),k(p=Ve,Mr,Ac).call(p,h(this,xr).box,m))}const{x:o,y:a,width:l,height:c}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[m,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/m,this.height=c*m/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[m,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/m,this.height=c*m/g;break}}const{lastPoint:u}=h(this,xr).box;I(this,Wu,[(u[0]-o)/l,(u[1]-a)/c])},GM=function(t){const r=i=>{var o,a;this.color=i,(o=this.parent)==null||o.drawLayer.changeColor(h(this,xn),i),(a=h(this,Hu))==null||a.updateColor(i)},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},qM=function(t){const r=h(this,xs),s=i=>{I(this,xs,i),k(this,Ee,KM).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},KM=function(t){if(!h(this,ur))return;k(this,Ee,oA).call(this,{highlightOutlines:h(this,ts).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},aA=function(){h(this,xn)===null||!this.parent||(this.parent.drawLayer.remove(h(this,xn)),I(this,xn,null),this.parent.drawLayer.remove(h(this,kt)),I(this,kt,null))},vd=function(t=this.parent){h(this,xn)===null&&({id:tr(this,xn)._,clipPathId:tr(this,Al)._}=t.drawLayer.highlight(h(this,ts),this.color,h(this,Sl)),I(this,kt,t.drawLayer.highlightOutline(h(this,xr))),h(this,bl)&&(h(this,bl).style.clipPath=h(this,Al)))},Mr=new WeakSet,Ac=function({x:t,y:r,width:s,height:i},o){switch(o){case 90:return{x:1-r-i,y:t,width:i,height:s};case 180:return{x:1-t-s,y:1-r-i,width:s,height:i};case 270:return{x:r,y:1-t-s,width:i,height:s}}return{x:t,y:r,width:s,height:i}},XM=function(t){Ve._keyboardManager.exec(this,t)},Jg=function(t){if(!h(this,zu))return;const r=window.getSelection();t?r.setPosition(h(this,zu),h(this,$p)):r.setPosition(h(this,zp),h(this,Hp))},yd=function(){return h(this,ur)?this.rotation:0},YM=function(){if(h(this,ur))return null;const[t,r]=this.pageDimensions,s=h(this,Ro),i=new Float32Array(s.length*8);let o=0;for(const{x:a,y:l,width:c,height:u}of s){const f=a*t,p=(1-l-u)*r;i[o]=i[o+4]=f,i[o+1]=i[o+3]=p,i[o+2]=i[o+6]=f+c*t,i[o+5]=i[o+7]=p+u*r,o+=8}return i},QM=function(t){return h(this,ts).serialize(t,k(this,Ee,yd).call(this))},JM=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},ZM=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},L(Ve,Mr),ve(Ve,"_defaultColor",null),ve(Ve,"_defaultOpacity",1),ve(Ve,"_defaultThickness",12),ve(Ve,"_l10nPromise"),ve(Ve,"_type","highlight"),ve(Ve,"_editorType",xe.HIGHLIGHT),ve(Ve,"_freeHighlightId",-1),ve(Ve,"_freeHighlight",null),ve(Ve,"_freeHighlightClipId","");let Yv=Ve;var Tl,Cl,Gp,qp,Kp,xl,Rs,Ci,Rr,Rl,Pl,xi,Il,kl,Po,te,eN,tN,nN,rN,cA,sN,uA,iN,oN,aN,lN,cN,ka,hA,Zg,ev,bc,dA,tv,Yi,uN,fA,hN,dN,pA,nv,_d;const it=class it extends Be{constructor(t){super({...t,name:"inkEditor"});L(this,te);L(this,Tl,0);L(this,Cl,0);L(this,Gp,this.canvasPointermove.bind(this));L(this,qp,this.canvasPointerleave.bind(this));L(this,Kp,this.canvasPointerup.bind(this));L(this,xl,this.canvasPointerdown.bind(this));L(this,Rs,null);L(this,Ci,new Path2D);L(this,Rr,!1);L(this,Rl,!1);L(this,Pl,!1);L(this,xi,null);L(this,Il,0);L(this,kl,0);L(this,Po,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,r){Be.initialize(t,r)}static updateDefaultParams(t,r){switch(t){case pe.INK_THICKNESS:it._defaultThickness=r;break;case pe.INK_COLOR:it._defaultColor=r;break;case pe.INK_OPACITY:it._defaultOpacity=r/100;break}}updateParams(t,r){switch(t){case pe.INK_THICKNESS:k(this,te,eN).call(this,r);break;case pe.INK_COLOR:k(this,te,tN).call(this,r);break;case pe.INK_OPACITY:k(this,te,nN).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[pe.INK_THICKNESS,it._defaultThickness],[pe.INK_COLOR,it._defaultColor||Be._defaultLineColor],[pe.INK_OPACITY,Math.round(it._defaultOpacity*100)]]}get propertiesToUpdate(){return[[pe.INK_THICKNESS,this.thickness||it._defaultThickness],[pe.INK_COLOR,this.color||it._defaultColor||Be._defaultLineColor],[pe.INK_OPACITY,Math.round(100*(this.opacity??it._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(k(this,te,Zg).call(this),k(this,te,ev).call(this)),this.isAttachedToDOM||(this.parent.add(this),k(this,te,bc).call(this)),k(this,te,_d).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,h(this,Rs)&&(clearTimeout(h(this,Rs)),I(this,Rs,null)),(t=h(this,xi))==null||t.disconnect(),I(this,xi,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,r]=this.parentDimensions,s=this.width*t,i=this.height*r;this.setDimensions(s,i)}enableEditMode(){h(this,Rr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",h(this,xl),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",h(this,xl)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){h(this,Rr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),I(this,Rr,!0),this.div.classList.add("disabled"),k(this,te,_d).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||h(this,Rr)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),k(this,te,sN).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),k(this,te,uA).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),k(this,te,hA).call(this,t)}canvasPointerleave(t){k(this,te,hA).call(this,t)}get isResizable(){return!this.isEmpty()&&h(this,Rr)}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,i,o,a]=k(this,te,rN).call(this);if(this.setAt(s,i,0,0),this.setDims(o,a),k(this,te,Zg).call(this),this.width){const[l,c]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*c),this.setAt(t*l,r*c,this.width*l,this.height*c),I(this,Pl,!0),k(this,te,bc).call(this),this.setDims(this.width*l,this.height*c),k(this,te,ka).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return k(this,te,ev).call(this),this.div}setDimensions(t,r){const s=Math.round(t),i=Math.round(r);if(h(this,Il)===s&&h(this,kl)===i)return;I(this,Il,s),I(this,kl,i),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=r/a,this.fixAndSetPosition(),h(this,Rr)&&k(this,te,dA).call(this,t,r),k(this,te,bc).call(this),k(this,te,ka).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,r,s){var w,v,E;if(t instanceof kM)return null;const i=super.deserialize(t,r,s);i.thickness=t.thickness,i.color=ae.makeHexColor(...t.color),i.opacity=t.opacity;const[o,a]=i.pageDimensions,l=i.width*o,c=i.height*a,u=i.parentScale,f=t.thickness/2;I(i,Rr,!0),I(i,Il,Math.round(l)),I(i,kl,Math.round(c));const{paths:p,rect:m,rotation:g}=t;for(let{bezier:S}of p){S=k(w=it,Yi,hN).call(w,S,m,g);const R=[];i.paths.push(R);let O=u*(S[0]-f),j=u*(S[1]-f);for(let T=2,P=S.length;T<P;T+=6){const M=u*(S[T]-f),F=u*(S[T+1]-f),V=u*(S[T+2]-f),D=u*(S[T+3]-f),z=u*(S[T+4]-f),$=u*(S[T+5]-f);R.push([[O,j],[M,F],[V,D],[z,$]]),O=z,j=$}const C=k(this,Yi,uN).call(this,R);i.bezierPath2D.push(C)}const y=k(v=i,te,pA).call(v);return I(i,Cl,Math.max(Be.MIN_SIZE,y[2]-y[0])),I(i,Tl,Math.max(Be.MIN_SIZE,y[3]-y[1])),k(E=i,te,dA).call(E,l,c),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),r=Be._colorManager.convert(this.ctx.strokeStyle);return{annotationType:xe.INK,color:r,thickness:this.thickness,opacity:this.opacity,paths:k(this,te,dN).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Tl=new WeakMap,Cl=new WeakMap,Gp=new WeakMap,qp=new WeakMap,Kp=new WeakMap,xl=new WeakMap,Rs=new WeakMap,Ci=new WeakMap,Rr=new WeakMap,Rl=new WeakMap,Pl=new WeakMap,xi=new WeakMap,Il=new WeakMap,kl=new WeakMap,Po=new WeakMap,te=new WeakSet,eN=function(t){const r=i=>{this.thickness=i,k(this,te,_d).call(this)},s=this.thickness;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},tN=function(t){const r=i=>{this.color=i,k(this,te,ka).call(this)},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},nN=function(t){const r=i=>{this.opacity=i,k(this,te,ka).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},rN=function(){const{parentRotation:t,parentDimensions:[r,s]}=this;switch(t){case 90:return[0,s,s,r];case 180:return[r,s,r,s];case 270:return[r,0,s,r];default:return[0,0,r,s]}},cA=function(){const{ctx:t,color:r,opacity:s,thickness:i,parentScale:o,scaleFactor:a}=this;t.lineWidth=i*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${r}${KU(s)}`},sN=function(t,r){const s=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Xn,{signal:s}),this.canvas.addEventListener("pointerleave",h(this,qp),{signal:s}),this.canvas.addEventListener("pointermove",h(this,Gp),{signal:s}),this.canvas.addEventListener("pointerup",h(this,Kp),{signal:s}),this.canvas.removeEventListener("pointerdown",h(this,xl)),this.isEditing=!0,h(this,Pl)||(I(this,Pl,!0),k(this,te,bc).call(this),this.thickness||(this.thickness=it._defaultThickness),this.color||(this.color=it._defaultColor||Be._defaultLineColor),this.opacity??(this.opacity=it._defaultOpacity)),this.currentPath.push([t,r]),I(this,Rl,!1),k(this,te,cA).call(this),I(this,Po,()=>{k(this,te,aN).call(this),h(this,Po)&&window.requestAnimationFrame(h(this,Po))}),window.requestAnimationFrame(h(this,Po))},uA=function(t,r){const[s,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&r===i)return;const o=this.currentPath;let a=h(this,Ci);if(o.push([t,r]),I(this,Rl,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,r);return}o.length===3&&(I(this,Ci,a=new Path2D),a.moveTo(...o[0])),k(this,te,lN).call(this,a,...o.at(-3),...o.at(-2),t,r)},iN=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);h(this,Ci).lineTo(...t)},oN=function(t,r){I(this,Po,null),t=Math.min(Math.max(t,0),this.canvas.width),r=Math.min(Math.max(r,0),this.canvas.height),k(this,te,uA).call(this,t,r),k(this,te,iN).call(this);let s;if(this.currentPath.length!==1)s=k(this,te,cN).call(this);else{const c=[t,r];s=[[c,c.slice(),c.slice(),c]]}const i=h(this,Ci),o=this.currentPath;this.currentPath=[],I(this,Ci,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(k(this,te,Zg).call(this),k(this,te,ev).call(this)),k(this,te,_d).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},aN=function(){if(!h(this,Rl))return;I(this,Rl,!1);const t=Math.ceil(this.thickness*this.parentScale),r=this.currentPath.slice(-3),s=r.map(a=>a[0]),i=r.map(a=>a[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...i)-t,Math.max(...i)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(h(this,Ci)),o.restore()},lN=function(t,r,s,i,o,a,l){const c=(r+i)/2,u=(s+o)/2,f=(i+a)/2,p=(o+l)/2;t.bezierCurveTo(c+2*(i-c)/3,u+2*(o-u)/3,f+2*(i-f)/3,p+2*(o-p)/3,f,p)},cN=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const r=[];let s,[i,o]=t[0];for(s=1;s<t.length-2;s++){const[m,g]=t[s],[y,w]=t[s+1],v=(m+y)/2,E=(g+w)/2,S=[i+2*(m-i)/3,o+2*(g-o)/3],R=[v+2*(m-v)/3,E+2*(g-E)/3];r.push([[i,o],S,R,[v,E]]),[i,o]=[v,E]}const[a,l]=t[s],[c,u]=t[s+1],f=[i+2*(a-i)/3,o+2*(l-o)/3],p=[c+2*(a-c)/3,u+2*(l-u)/3];return r.push([[i,o],f,p,[c,u]]),r},ka=function(){if(this.isEmpty()){k(this,te,tv).call(this);return}k(this,te,cA).call(this);const{canvas:t,ctx:r}=this;r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),k(this,te,tv).call(this);for(const s of this.bezierPath2D)r.stroke(s)},hA=function(t){this.canvas.removeEventListener("pointerleave",h(this,qp)),this.canvas.removeEventListener("pointermove",h(this,Gp)),this.canvas.removeEventListener("pointerup",h(this,Kp)),this.canvas.addEventListener("pointerdown",h(this,xl),{signal:this._uiManager._signal}),h(this,Rs)&&clearTimeout(h(this,Rs)),I(this,Rs,setTimeout(()=>{I(this,Rs,null),this.canvas.removeEventListener("contextmenu",Xn)},10)),k(this,te,oN).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Zg=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ev=function(){I(this,xi,new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&this.setDimensions(r.width,r.height)})),h(this,xi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=h(this,xi))==null||t.disconnect(),I(this,xi,null)},{once:!0})},bc=function(){if(!h(this,Pl))return;const[t,r]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*r),k(this,te,tv).call(this)},dA=function(t,r){const s=k(this,te,nv).call(this),i=(t-s)/h(this,Cl),o=(r-s)/h(this,Tl);this.scaleFactor=Math.min(i,o)},tv=function(){const t=k(this,te,nv).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Yi=new WeakSet,uN=function(t){const r=new Path2D;for(let s=0,i=t.length;s<i;s++){const[o,a,l,c]=t[s];s===0&&r.moveTo(...o),r.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}return r},fA=function(t,r,s){const[i,o,a,l]=r;switch(s){case 0:for(let c=0,u=t.length;c<u;c+=2)t[c]+=i,t[c+1]=l-t[c+1];break;case 90:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=t[c+1]+i,t[c+1]=f+o}break;case 180:for(let c=0,u=t.length;c<u;c+=2)t[c]=a-t[c],t[c+1]+=o;break;case 270:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=a-t[c+1],t[c+1]=l-f}break;default:throw new Error("Invalid rotation")}return t},hN=function(t,r,s){const[i,o,a,l]=r;switch(s){case 0:for(let c=0,u=t.length;c<u;c+=2)t[c]-=i,t[c+1]=l-t[c+1];break;case 90:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=t[c+1]-o,t[c+1]=f-i}break;case 180:for(let c=0,u=t.length;c<u;c+=2)t[c]=a-t[c],t[c+1]-=o;break;case 270:for(let c=0,u=t.length;c<u;c+=2){const f=t[c];t[c]=l-t[c+1],t[c+1]=a-f}break;default:throw new Error("Invalid rotation")}return t},dN=function(t,r,s,i){var u,f;const o=[],a=this.thickness/2,l=t*r+a,c=t*s+a;for(const p of this.paths){const m=[],g=[];for(let y=0,w=p.length;y<w;y++){const[v,E,S,R]=p[y];if(v[0]===R[0]&&v[1]===R[1]&&w===1){const D=t*v[0]+l,z=t*v[1]+c;m.push(D,z),g.push(D,z);break}const O=t*v[0]+l,j=t*v[1]+c,C=t*E[0]+l,T=t*E[1]+c,P=t*S[0]+l,M=t*S[1]+c,F=t*R[0]+l,V=t*R[1]+c;y===0&&(m.push(O,j),g.push(O,j)),m.push(C,T,P,M,F,V),g.push(C,T),y===w-1&&g.push(F,V)}o.push({bezier:k(u=it,Yi,fA).call(u,m,i,this.rotation),points:k(f=it,Yi,fA).call(f,g,i,this.rotation)})}return o},pA=function(){let t=1/0,r=-1/0,s=1/0,i=-1/0;for(const o of this.paths)for(const[a,l,c,u]of o){const f=ae.bezierBoundingBox(...a,...l,...c,...u);t=Math.min(t,f[0]),s=Math.min(s,f[1]),r=Math.max(r,f[2]),i=Math.max(i,f[3])}return[t,s,r,i]},nv=function(){return h(this,Rr)?Math.ceil(this.thickness*this.parentScale):0},_d=function(t=!1){if(this.isEmpty())return;if(!h(this,Rr)){k(this,te,ka).call(this);return}const r=k(this,te,pA).call(this),s=k(this,te,nv).call(this);I(this,Cl,Math.max(Be.MIN_SIZE,r[2]-r[0])),I(this,Tl,Math.max(Be.MIN_SIZE,r[3]-r[1]));const i=Math.ceil(s+h(this,Cl)*this.scaleFactor),o=Math.ceil(s+h(this,Tl)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=i/a,this.height=o/l,this.setAspectRatio(i,o);const c=this.translationX,u=this.translationY;this.translationX=-r[0],this.translationY=-r[1],k(this,te,bc).call(this),k(this,te,ka).call(this),I(this,Il,i),I(this,kl,o),this.setDims(i,o);const f=t?s/this.scaleFactor/2:0;this.translate(c-this.translationX-f,u-this.translationY-f)},L(it,Yi),ve(it,"_defaultColor",null),ve(it,"_defaultOpacity",1),ve(it,"_defaultThickness",1),ve(it,"_type","ink"),ve(it,"_editorType",xe.INK);let lA=it;var en,tn,Io,Ri,ko,qu,Ps,Pi,Is,ns,Xp,Oe,wd,Ed,rv,gA,fN,pN,vA,sv,mN;const $d=class $d extends Be{constructor(t){super({...t,name:"stampEditor"});L(this,Oe);L(this,en,null);L(this,tn,null);L(this,Io,null);L(this,Ri,null);L(this,ko,null);L(this,qu,"");L(this,Ps,null);L(this,Pi,null);L(this,Is,null);L(this,ns,!1);L(this,Xp,!1);I(this,Ri,t.bitmapUrl),I(this,ko,t.bitmapFile)}static initialize(t,r){Be.initialize(t,r)}static get supportedTypes(){return Le(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(r=>`image/${r}`))}static get supportedTypesStr(){return Le(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,r){r.pasteEditor(xe.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,r;h(this,tn)&&(I(this,en,null),this._uiManager.imageManager.deleteId(h(this,tn)),(t=h(this,Ps))==null||t.remove(),I(this,Ps,null),(r=h(this,Pi))==null||r.disconnect(),I(this,Pi,null),h(this,Is)&&(clearTimeout(h(this,Is)),I(this,Is,null))),super.remove()}rebuild(){if(!this.parent){h(this,tn)&&k(this,Oe,rv).call(this);return}super.rebuild(),this.div!==null&&(h(this,tn)&&h(this,Ps)===null&&k(this,Oe,rv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(h(this,Io)||h(this,en)||h(this,Ri)||h(this,ko)||h(this,tn))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;if(this.width&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),h(this,en)?k(this,Oe,gA).call(this):k(this,Oe,rv).call(this),this.width){const[s,i]=this.parentDimensions;this.setAt(t*s,r*i,this.width*s,this.height*i)}return this.div}getImageForAltText(){return h(this,Ps)}static deserialize(t,r,s){if(t instanceof LM)return null;const i=super.deserialize(t,r,s),{rect:o,bitmapUrl:a,bitmapId:l,isSvg:c,accessibilityData:u}=t;l&&s.imageManager.isValidId(l)?I(i,tn,l):I(i,Ri,a),I(i,ns,c);const[f,p]=i.pageDimensions;return i.width=(o[2]-o[0])/f,i.height=(o[3]-o[1])/p,u&&(i.altTextData=u),i}serialize(t=!1,r=null){if(this.isEmpty())return null;const s={annotationType:xe.STAMP,bitmapId:h(this,tn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(this,ns),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=k(this,Oe,sv).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:i,altText:o}=this.altTextData;if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),r===null)return s;r.stamps||(r.stamps=new Map);const a=h(this,ns)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(h(this,tn)))r.stamps.set(h(this,tn),{area:a,serialized:s}),s.bitmap=k(this,Oe,sv).call(this,!1);else if(h(this,ns)){const l=r.stamps.get(h(this,tn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=k(this,Oe,sv).call(this,!1))}return s}};en=new WeakMap,tn=new WeakMap,Io=new WeakMap,Ri=new WeakMap,ko=new WeakMap,qu=new WeakMap,Ps=new WeakMap,Pi=new WeakMap,Is=new WeakMap,ns=new WeakMap,Xp=new WeakMap,Oe=new WeakSet,wd=function(t,r=!1){if(!t){this.remove();return}I(this,en,t.bitmap),r||(I(this,tn,t.id),I(this,ns,t.isSvg)),t.file&&I(this,qu,t.file.name),k(this,Oe,gA).call(this)},Ed=function(){I(this,Io,null),this._uiManager.enableWaiting(!1),h(this,Ps)&&this.div.focus()},rv=function(){if(h(this,tn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,tn)).then(s=>k(this,Oe,wd).call(this,s,!0)).finally(()=>k(this,Oe,Ed).call(this));return}if(h(this,Ri)){const s=h(this,Ri);I(this,Ri,null),this._uiManager.enableWaiting(!0),I(this,Io,this._uiManager.imageManager.getFromUrl(s).then(i=>k(this,Oe,wd).call(this,i)).finally(()=>k(this,Oe,Ed).call(this)));return}if(h(this,ko)){const s=h(this,ko);I(this,ko,null),this._uiManager.enableWaiting(!0),I(this,Io,this._uiManager.imageManager.getFromFile(s).then(i=>k(this,Oe,wd).call(this,i)).finally(()=>k(this,Oe,Ed).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=$d.supportedTypesStr;const r=this._uiManager._signal;I(this,Io,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);k(this,Oe,wd).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>k(this,Oe,Ed).call(this))),t.click()},gA=function(){const{div:t}=this;let{width:r,height:s}=h(this,en);const[i,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*i,s=this.height*o;else if(r>a*i||s>a*o){const f=Math.min(a*i/r,a*o/s);r*=f,s*=f}const[l,c]=this.parentDimensions;this.setDims(r*l/i,s*c/o),this._uiManager.enableWaiting(!1);const u=I(this,Ps,document.createElement("canvas"));t.append(u),t.hidden=!1,k(this,Oe,vA).call(this,r,s),k(this,Oe,mN).call(this),h(this,Xp)||(this.parent.addUndoableEditor(this),I(this,Xp,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,qu)&&u.setAttribute("aria-label",h(this,qu))},fN=function(t,r){var a;const[s,i]=this.parentDimensions;this.width=t/s,this.height=r/i,this.setDims(t,r),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,h(this,Is)!==null&&clearTimeout(h(this,Is)),I(this,Is,setTimeout(()=>{I(this,Is,null),k(this,Oe,vA).call(this,t,r)},200))},pN=function(t,r){const{width:s,height:i}=h(this,en);let o=s,a=i,l=h(this,en);for(;o>2*t||a>2*r;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=f.transferToImageBitmap()}return l},vA=function(t,r){t=Math.ceil(t),r=Math.ceil(r);const s=h(this,Ps);if(!s||s.width===t&&s.height===r)return;s.width=t,s.height=r;const i=h(this,ns)?h(this,en):k(this,Oe,pN).call(this,t,r);if(this._uiManager.hasMLManager&&!this.hasAltText()){const l=new OffscreenCanvas(t,r).getContext("2d");l.drawImage(i,0,0,i.width,i.height,0,0,t,r),this._uiManager.mlGuess({service:"image-to-text",request:{data:l.getImageData(0,0,t,r).data,width:t,height:r,channels:4}}).then(c=>{const u=(c==null?void 0:c.output)||"";this.parent&&u&&!this.hasAltText()&&(this.altTextData={altText:u,decorative:!1})})}const o=s.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(i,0,0,i.width,i.height,0,0,t,r)},sv=function(t){if(t){if(h(this,ns)){const i=this._uiManager.imageManager.getSvgUrl(h(this,tn));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=h(this,en),r.getContext("2d").drawImage(h(this,en),0,0),r.toDataURL()}if(h(this,ns)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*ra.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ra.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(h(this,en),0,0,h(this,en).width,h(this,en).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(h(this,en))},mN=function(){this._uiManager._signal&&(I(this,Pi,new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&k(this,Oe,fN).call(this,r.width,r.height)})),h(this,Pi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=h(this,Pi))==null||t.disconnect(),I(this,Pi,null)},{once:!0}))},ve($d,"_type","stamp"),ve($d,"_editorType",xe.STAMP);let mA=$d;var Ll,Ku,ks,Ml,Ii,ki,Li,hr,Lo,Xu,Yu,Rn,le,Mo,on,gN,_A,wA,EA,iv;const Ur=class Ur{constructor({uiManager:e,pageIndex:t,div:r,accessibilityManager:s,annotationLayer:i,drawLayer:o,textLayer:a,viewport:l,l10n:c}){L(this,on);L(this,Ll);L(this,Ku,!1);L(this,ks,null);L(this,Ml,null);L(this,Ii,null);L(this,ki,null);L(this,Li,null);L(this,hr,new Map);L(this,Lo,!1);L(this,Xu,!1);L(this,Yu,!1);L(this,Rn,null);L(this,le);const u=[...h(Ur,Mo).values()];if(!Ur._initialized){Ur._initialized=!0;for(const f of u)f.initialize(c,e)}e.registerEditorTypes(u),I(this,le,e),this.pageIndex=t,this.div=r,I(this,Ll,s),I(this,ks,i),this.viewport=l,I(this,Rn,a),this.drawLayer=o,h(this,le).addLayer(this)}get isEmpty(){return h(this,hr).size===0}get isInvisible(){return this.isEmpty&&h(this,le).getMode()===xe.NONE}updateToolbar(e){h(this,le).updateToolbar(e)}updateMode(e=h(this,le).getMode()){switch(k(this,on,iv).call(this),e){case xe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xe.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of h(Ur,Mo).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=h(this,Rn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(h(this,le).getMode()!==xe.INK)return;if(!e){for(const r of h(this,hr).values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){h(this,le).setEditingState(e)}addCommands(e){h(this,le).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=h(this,ks))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of h(this,hr).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(h(this,le).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!h(this,ks))return;const t=h(this,ks).getEditableAnnotations();for(const r of t){if(r.hide(),h(this,le).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;I(this,Yu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of h(this,hr).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(h(this,ks)){const i=h(this,ks).getEditableAnnotations();for(const o of i){const{id:a}=o.data;if(h(this,le).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(h(this,le).addChangedExistingAnnotation(l),l.renderAnnotationElement(o),l.show(!1)),o.show()}}k(this,on,iv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of h(Ur,Mo).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),I(this,Yu,!1)}getEditableAnnotation(e){var t;return((t=h(this,ks))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){h(this,le).getActive()!==e&&h(this,le).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=h(this,Rn))!=null&&e.div&&!h(this,ki)&&(I(this,ki,k(this,on,gN).bind(this)),h(this,Rn).div.addEventListener("pointerdown",h(this,ki),{signal:h(this,le)._signal}),h(this,Rn).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=h(this,Rn))!=null&&e.div&&h(this,ki)&&(h(this,Rn).div.removeEventListener("pointerdown",h(this,ki)),I(this,ki,null),h(this,Rn).div.classList.remove("highlighting"))}enableClick(){if(h(this,Ii))return;const e=h(this,le)._signal;I(this,Ii,this.pointerdown.bind(this)),I(this,Ml,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",h(this,Ii),{signal:e}),this.div.addEventListener("pointerup",h(this,Ml),{signal:e})}disableClick(){h(this,Ii)&&(this.div.removeEventListener("pointerdown",h(this,Ii)),this.div.removeEventListener("pointerup",h(this,Ml)),I(this,Ii,null),I(this,Ml,null))}attach(e){h(this,hr).set(e.id,e);const{annotationElementId:t}=e;t&&h(this,le).isDeletedAnnotationElement(t)&&h(this,le).removeDeletedAnnotationElement(e)}detach(e){var t;h(this,hr).delete(e.id),(t=h(this,Ll))==null||t.removePointerInTextLayer(e.contentDiv),!h(this,Yu)&&e.annotationElementId&&h(this,le).addDeletedAnnotationElement(e)}remove(e){this.detach(e),h(this,le).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,h(this,Xu)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(h(this,le).addDeletedAnnotationElement(e.annotationElementId),Be.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),h(this,le).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),h(this,le).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!h(this,Li)&&(e._focusEventsAllowed=!1,I(this,Li,setTimeout(()=>{I(this,Li,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:h(this,le)._signal}),t.focus())},0))),e._structTreeParentId=(r=h(this,Ll))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return h(this,le).getId()}get _signal(){return h(this,le)._signal}canCreateNewEmptyEditor(){var e;return(e=h(this,on,_A))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){h(this,le).updateToolbar(e),h(this,le).updateMode(e);const{offsetX:r,offsetY:s}=k(this,on,EA).call(this),i=this.getNextId(),o=k(this,on,wA).call(this,{parent:this,id:i,x:r,y:s,uiManager:h(this,le),isCentered:!0,...t});o&&this.add(o)}deserialize(e){var t;return((t=h(Ur,Mo).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,h(this,le)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=k(this,on,wA).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:h(this,le),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(k(this,on,EA).call(this),!0)}setSelected(e){h(this,le).setSelected(e)}toggleSelected(e){h(this,le).toggleSelected(e)}isSelected(e){return h(this,le).isSelected(e)}unselect(e){h(this,le).unselect(e)}pointerup(e){const{isMac:t}=Hn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&h(this,Lo)){if(I(this,Lo,!1),!h(this,Ku)){I(this,Ku,!0);return}if(h(this,le).getMode()===xe.STAMP){h(this,le).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(h(this,le).getMode()===xe.HIGHLIGHT&&this.enableTextSelection(),h(this,Lo)){I(this,Lo,!1);return}const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;I(this,Lo,!0);const r=h(this,le).getActive();I(this,Ku,!r||r.isEmpty())}findNewParent(e,t,r){const s=h(this,le).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=h(this,le).getActive())==null?void 0:e.parent)===this&&(h(this,le).commitOrRemove(),h(this,le).setActiveEditor(null)),h(this,Li)&&(clearTimeout(h(this,Li)),I(this,Li,null));for(const r of h(this,hr).values())(t=h(this,Ll))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,h(this,hr).clear(),h(this,le).removeLayer(this)}render({viewport:e}){this.viewport=e,Gl(this.div,e);for(const t of h(this,le).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){h(this,le).commitOrRemove(),k(this,on,iv).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Gl(this.div,{rotation:r}),t!==r)for(const s of h(this,hr).values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return h(this,le).viewParameters.realScale}};Ll=new WeakMap,Ku=new WeakMap,ks=new WeakMap,Ml=new WeakMap,Ii=new WeakMap,ki=new WeakMap,Li=new WeakMap,hr=new WeakMap,Lo=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,Rn=new WeakMap,le=new WeakMap,Mo=new WeakMap,on=new WeakSet,gN=function(e){if(h(this,le).unselectAll(),e.target===h(this,Rn).div){const{isMac:t}=Hn.platform;if(e.button!==0||e.ctrlKey&&t)return;h(this,le).showAllEditors("highlight",!0,!0),h(this,Rn).div.classList.add("free"),Yv.startHighlighting(this,h(this,le).direction==="ltr",e),h(this,Rn).div.addEventListener("pointerup",()=>{h(this,Rn).div.classList.remove("free")},{once:!0,signal:h(this,le)._signal}),e.preventDefault()}},_A=function(){return h(Ur,Mo).get(h(this,le).getMode())},wA=function(e){const t=h(this,on,_A);return t?new t.prototype.constructor(e):null},EA=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+s),c=(i+a)/2-e,u=(o+l)/2-t,[f,p]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:f,offsetY:p}},iv=function(){I(this,Xu,!0);for(const e of h(this,hr).values())e.isEmpty()&&e.remove();I(this,Xu,!1)},ve(Ur,"_initialized",!1),L(Ur,Mo,new Map([QE,lA,mA,Yv].map(e=>[e._editorType,e])));let yA=Ur;var Ls,Yp,Lt,No,Qp,bA,Jl,SA,vN;const Xt=class Xt{constructor({pageIndex:e}){L(this,Jl);L(this,Ls,null);L(this,Yp,0);L(this,Lt,new Map);L(this,No,new Map);this.pageIndex=e}setParent(e){if(!h(this,Ls)){I(this,Ls,e);return}if(h(this,Ls)!==e){if(h(this,Lt).size>0)for(const t of h(this,Lt).values())t.remove(),e.append(t);I(this,Ls,e)}}static get _svgFactory(){return Le(this,"_svgFactory",new wS)}highlight(e,t,r,s=!1){const i=tr(this,Yp)._++,o=k(this,Jl,SA).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const a=Xt._svgFactory.createElement("defs");o.append(a);const l=Xt._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),s&&h(this,No).set(i,l);const u=k(this,Jl,vN).call(this,a,c),f=Xt._svgFactory.createElement("use");return o.append(f),o.setAttribute("fill",t),o.setAttribute("fill-opacity",r),f.setAttribute("href",`#${c}`),h(this,Lt).set(i,o),{id:i,clipPathId:`url(#${u})`}}highlightOutline(e){const t=tr(this,Yp)._++,r=k(this,Jl,SA).call(this,e.box);r.classList.add("highlightOutline");const s=Xt._svgFactory.createElement("defs");r.append(s);const i=Xt._svgFactory.createElement("path");s.append(i);const o=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",o),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.free){r.classList.add("free");const u=Xt._svgFactory.createElement("mask");s.append(u),a=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const f=Xt._svgFactory.createElement("rect");u.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Xt._svgFactory.createElement("use");u.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const l=Xt._svgFactory.createElement("use");r.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return r.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),h(this,Lt).set(t,r),t}finalizeLine(e,t){const r=h(this,No).get(e);h(this,No).delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){h(this,Lt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),h(this,No).delete(e)}updatePath(e,t){h(this,No).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var r;k(r=Xt,Qp,bA).call(r,h(this,Lt).get(e),t)}show(e,t){h(this,Lt).get(e).classList.toggle("hidden",!t)}rotate(e,t){h(this,Lt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){h(this,Lt).get(e).setAttribute("fill",t)}changeOpacity(e,t){h(this,Lt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){h(this,Lt).get(e).classList.add(t)}removeClass(e,t){h(this,Lt).get(e).classList.remove(t)}remove(e){h(this,Ls)!==null&&(h(this,Lt).get(e).remove(),h(this,Lt).delete(e))}destroy(){I(this,Ls,null);for(const e of h(this,Lt).values())e.remove();h(this,Lt).clear()}};Ls=new WeakMap,Yp=new WeakMap,Lt=new WeakMap,No=new WeakMap,Qp=new WeakSet,bA=function(e,{x:t=0,y:r=0,width:s=1,height:i=1}={}){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},Jl=new WeakSet,SA=function(e){var r;const t=Xt._svgFactory.create(1,1,!0);return h(this,Ls).append(t),t.setAttribute("aria-hidden",!0),k(r=Xt,Qp,bA).call(r,t,e),t},vN=function(e,t){const r=Xt._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Xt._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},L(Xt,Qp);let AA=Xt;var Tz=fe.AbortException,Cz=fe.AnnotationEditorLayer,xz=fe.AnnotationEditorParamsType,Rz=fe.AnnotationEditorType,Pz=fe.AnnotationEditorUIManager,yN=fe.AnnotationLayer,_N=fe.AnnotationMode,Iz=fe.CMapCompressionType,kz=fe.ColorPicker,Lz=fe.DOMSVGFactory,Mz=fe.DrawLayer,Nz=fe.FeatureTest,RS=fe.GlobalWorkerOptions,Dz=fe.ImageKind,Oz=fe.InvalidPDFException,Fz=fe.MissingPDFException,Vz=fe.OPS,jz=fe.Outliner,Bz=fe.PDFDataRangeTransport,Uz=fe.PDFDateString,$z=fe.PDFWorker,zz=fe.PasswordResponses,Hz=fe.PermissionFlag,Wz=fe.PixelsPerInch,Gz=fe.RenderingCancelledException,wN=fe.TextLayer,qz=fe.UnexpectedResponseException,Kz=fe.Util,Xz=fe.VerbosityLevel,Yz=fe.XfaLayer,Qz=fe.build,Jz=fe.createValidAbsoluteUrl,Zz=fe.fetchData,EN=fe.getDocument,e5=fe.getFilenameFromUrl,t5=fe.getPdfFilenameFromUrl,n5=fe.getXfaPageViewport,r5=fe.isDataScheme,s5=fe.isPdfFile,i5=fe.noContextMenu,o5=fe.normalizeUnicode,a5=fe.renderTextLayer,l5=fe.setLayerDimensions,c5=fe.shadow,u5=fe.updateTextLayer,h5=fe.version;const d5=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Tz,AnnotationEditorLayer:Cz,AnnotationEditorParamsType:xz,AnnotationEditorType:Rz,AnnotationEditorUIManager:Pz,AnnotationLayer:yN,AnnotationMode:_N,CMapCompressionType:Iz,ColorPicker:kz,DOMSVGFactory:Lz,DrawLayer:Mz,FeatureTest:Nz,GlobalWorkerOptions:RS,ImageKind:Dz,InvalidPDFException:Oz,MissingPDFException:Fz,OPS:Vz,Outliner:jz,PDFDataRangeTransport:Bz,PDFDateString:Uz,PDFWorker:$z,PasswordResponses:zz,PermissionFlag:Hz,PixelsPerInch:Wz,RenderingCancelledException:Gz,TextLayer:wN,UnexpectedResponseException:qz,Util:Kz,VerbosityLevel:Xz,XfaLayer:Yz,build:Qz,createValidAbsoluteUrl:Jz,fetchData:Zz,getDocument:EN,getFilenameFromUrl:e5,getPdfFilenameFromUrl:t5,getXfaPageViewport:n5,isDataScheme:r5,isPdfFile:s5,noContextMenu:i5,normalizeUnicode:o5,renderTextLayer:a5,setLayerDimensions:l5,shadow:c5,updateTextLayer:u5,version:h5},Symbol.toStringTag,{value:"Module"}));var Ut=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},f5=["onCopy","onCut","onPaste"],p5=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],m5=["onFocus","onBlur"],g5=["onInput","onInvalid","onReset","onSubmit"],v5=["onLoad","onError"],y5=["onKeyDown","onKeyPress","onKeyUp"],_5=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],w5=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],E5=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],A5=["onSelect"],b5=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],S5=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],T5=["onScroll"],C5=["onWheel"],x5=["onAnimationStart","onAnimationEnd","onAnimationIteration"],R5=["onTransitionEnd"],P5=["onToggle"],I5=["onChange"],k5=Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut([],f5,!0),p5,!0),m5,!0),g5,!0),v5,!0),y5,!0),_5,!0),w5,!0),E5,!0),A5,!0),b5,!0),S5,!0),T5,!0),C5,!0),x5,!0),R5,!0),I5,!0),P5,!0);function AN(n,e){var t={};return k5.forEach(function(r){var s=n[r];s&&(e?t[r]=function(i){return s(i,e(r))}:t[r]=s)}),t}function hm(n){var e=!1,t=new Promise(function(r,s){n.then(function(i){return!e&&r(i)}).catch(function(i){return!e&&s(i)})});return{promise:t,cancel:function(){e=!0}}}function bN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=bN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function m_(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=bN(n))&&(r&&(r+=" "),r+=e);return r}var L5="Invariant failed";function Ke(n,e){if(!n)throw new Error(L5)}var M5=function(){},N5=M5;const En=Jp(N5);var ax=Object.prototype.hasOwnProperty;function lx(n,e,t){for(t of n.keys())if(Yc(t,e))return t}function Yc(n,e){var t,r,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Yc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(s=r,s&&typeof s=="object"&&(s=lx(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(s=r[0],s&&typeof s=="object"&&(s=lx(e,s),!s)||!Yc(r[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(ax.call(n,t)&&++r&&!ax.call(e,t)||!(t in e)||!Yc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}const SN=A.createContext(null);function Qc({children:n,type:e}){return x.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const D5="noopener noreferrer nofollow";class O5{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ke(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ke(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Ke(this.pdfDocument),Ke(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ke(Array.isArray(t));const r=t[0];new Promise(s=>{Ke(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(i=>{s(i)}).catch(()=>{Ke(!1)}):typeof r=="number"?s(r):Ke(!1)}).then(s=>{const i=s+1;Ke(this.pdfViewer),Ke(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Ke(this.pdfViewer),Ke(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||D5,e.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const cx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},g_=typeof window<"u",TN=g_&&window.location.protocol==="file:";function F5(n){return typeof n<"u"}function Ta(n){return F5(n)&&n!==null}function V5(n){return typeof n=="string"}function j5(n){return n instanceof ArrayBuffer}function B5(n){return Ke(g_),n instanceof Blob}function TA(n){return V5(n)&&/^data:/.test(n)}function ux(n){Ke(TA(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function U5(){return g_&&window.devicePixelRatio||1}const CN="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function hx(){En(!TN,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${CN}`)}function $5(){En(!TN,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${CN}`)}function Xl(n){n!=null&&n.cancel&&n.cancel()}function CA(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function z5(n){return n.name==="RenderingCancelledException"}function H5(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}function W5(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function ah(){return A.useReducer(W5,{value:void 0,error:void 0})}var G5=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},dx=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const{PDFDataRangeTransport:q5}=d5,K5=(n,e)=>{switch(e){case cx.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case cx.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function fx(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const X5=A.forwardRef(function(e,t){var{children:r,className:s,error:i="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:u,loading:f="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:g,onLoadProgress:y,onLoadSuccess:w,onPassword:v=K5,onSourceError:E,onSourceSuccess:S,options:R,renderMode:O,rotate:j}=e,C=dx(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[T,P]=ah(),{value:M,error:F}=T,[V,D]=ah(),{value:z,error:$}=V,W=A.useRef(new O5),U=A.useRef([]),B=A.useRef(void 0),H=A.useRef(void 0);l&&l!==B.current&&fx(l)&&(En(!Yc(l,B.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),B.current=l),R&&R!==H.current&&(En(!Yc(R,H.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),H.current=R);const X=A.useRef({scrollPageIntoView:Se=>{const{dest:We,pageNumber:ht,pageIndex:st=ht-1}=Se;if(m){m({dest:We,pageIndex:st,pageNumber:ht});return}const ds=U.current[st];if(ds){ds.scrollIntoView();return}En(!1,`An internal link leading to page ${ht} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});A.useImperativeHandle(t,()=>({linkService:W,pages:U,viewer:X}),[]);function ne(){S&&S()}function J(){F&&(En(!1,F.toString()),E&&E(F))}function re(){P({type:"RESET"})}A.useEffect(re,[l,P]);const me=A.useCallback(()=>G5(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return TA(l)?{data:ux(l)}:(hx(),{url:l});if(l instanceof q5)return{range:l};if(j5(l))return{data:l};if(g_&&B5(l))return{data:yield H5(l)};if(Ke(typeof l=="object"),Ke(fx(l)),"url"in l&&typeof l.url=="string"){if(TA(l.url)){const{url:Se}=l,We=dx(l,["url"]),ht=ux(Se);return Object.assign({data:ht},We)}hx()}return l}),[l]);A.useEffect(()=>{const Se=hm(me());return Se.promise.then(We=>{P({type:"RESOLVE",value:We})}).catch(We=>{P({type:"REJECT",error:We})}),()=>{Xl(Se)}},[me,P]),A.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){J();return}ne()}},[M]);function Fe(){z&&(w&&w(z),U.current=new Array(z.numPages),W.current.setDocument(z))}function be(){$&&(En(!1,$.toString()),g&&g($))}A.useEffect(function(){D({type:"RESET"})},[D,M]),A.useEffect(function(){if(!M)return;const We=R?Object.assign(Object.assign({},M),R):M,ht=EN(We);y&&(ht.onProgress=y),v&&(ht.onPassword=v);const st=ht,ds=st.promise.then(Xs=>{D({type:"RESOLVE",value:Xs})}).catch(Xs=>{st.destroyed||D({type:"REJECT",error:Xs})});return()=>{ds.finally(()=>st.destroy())}},[R,D,M]),A.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){be();return}Fe()}},[z]),A.useEffect(function(){W.current.setViewer(X.current),W.current.setExternalLinkRel(o),W.current.setExternalLinkTarget(a)},[o,a]);const ce=A.useCallback((Se,We)=>{U.current[Se]=We},[]),Je=A.useCallback(Se=>{delete U.current[Se]},[]),Ze=A.useMemo(()=>({imageResourcesPath:u,linkService:W.current,onItemClick:m,pdf:z,registerPage:ce,renderMode:O,rotate:j,unregisterPage:Je}),[u,m,z,ce,O,j,Je]),ke=A.useMemo(()=>AN(C,()=>z),[C,z]);function Zn(){return x.jsx(SN.Provider,{value:Ze,children:r})}function br(){return l?z==null?x.jsx(Qc,{type:"loading",children:typeof f=="function"?f():f}):z===!1?x.jsx(Qc,{type:"error",children:typeof i=="function"?i():i}):Zn():x.jsx(Qc,{type:"no-data",children:typeof p=="function"?p():p})}return x.jsx("div",Object.assign({className:m_("react-pdf__Document",s),ref:c,style:{"--scale-factor":"1"}},ke,{children:br()}))});function xN(){return A.useContext(SN)}function RN(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(i){t.forEach(function(o){typeof o=="function"?o(i):o&&(o.current=i)})}}const PN=A.createContext(null),IN={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Y5=/^H(\d+)$/;function Q5(n){return n in IN}function v_(n){return"children"in n}function kN(n){return v_(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function J5(n){const e={};if(v_(n)){const{role:t}=n,r=t.match(Y5);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(Q5(t)){const s=IN[t];s&&(e.role=s)}}return e}function LN(n){const e={};if(v_(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),kN(n)){const[t]=n.children;if(t){const r=LN(t);return Object.assign(Object.assign({},e),r)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function Z5(n){return n?Object.assign(Object.assign({},J5(n)),LN(n)):null}function MN({className:n,node:e}){const t=A.useMemo(()=>Z5(e),[e]),r=A.useMemo(()=>!v_(e)||kN(e)?null:e.children.map((s,i)=>x.jsx(MN,{node:s},i)),[e]);return x.jsx("span",Object.assign({className:n},t,{children:r}))}function y_(){return A.useContext(PN)}function e6(){const n=y_();Ke(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,s]=ah(),{value:i,error:o}=r,{customTextRenderer:a,page:l}=n;function c(){i&&t&&t(i)}function u(){o&&(En(!1,o.toString()),e&&e(o))}return A.useEffect(function(){s({type:"RESET"})},[s,l]),A.useEffect(function(){if(a||!l)return;const p=hm(l.getStructTree()),m=p;return p.promise.then(g=>{s({type:"RESOLVE",value:g})}).catch(g=>{s({type:"REJECT",error:g})}),()=>Xl(m)},[a,l,s]),A.useEffect(()=>{if(i!==void 0){if(i===!1){u();return}c()}},[i]),i?x.jsx(MN,{className:"react-pdf__Page__structTree structTree",node:i}):null}const px=_N;function t6(n){const e=y_();Ke(e);const t=Object.assign(Object.assign({},e),n),{_className:r,canvasBackground:s,devicePixelRatio:i=U5(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:c,renderTextLayer:u,rotate:f,scale:p}=t,{canvasRef:m}=n;Ke(l);const g=A.useRef(null);function y(){l&&a&&a(CA(l,p))}function w(R){z5(R)||(En(!1,R.toString()),o&&o(R))}const v=A.useMemo(()=>l.getViewport({scale:p*i,rotation:f}),[i,l,f,p]),E=A.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);A.useEffect(function(){if(!l)return;l.cleanup();const{current:O}=g;if(!O)return;O.width=v.width,O.height=v.height,O.style.width=`${Math.floor(E.width)}px`,O.style.height=`${Math.floor(E.height)}px`,O.style.visibility="hidden";const j={annotationMode:c?px.ENABLE_FORMS:px.ENABLE,canvasContext:O.getContext("2d",{alpha:!1}),viewport:v};s&&(j.background=s);const C=l.render(j),T=C;return C.promise.then(()=>{O.style.visibility="",y()}).catch(w),()=>Xl(T)},[s,l,c,v,E]);const S=A.useCallback(()=>{const{current:R}=g;R&&(R.width=0,R.height=0)},[]);return A.useEffect(()=>S,[S]),x.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:RN(m,g),style:{display:"block",userSelect:"none"},children:u?x.jsx(e6,{}):null})}function n6(n){return"str"in n}function r6(){const n=y_();Ke(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:l,rotate:c,scale:u}=n;Ke(o);const[f,p]=ah(),{value:m,error:g}=f,y=A.useRef(null),w=A.useRef(void 0);En(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function v(){m&&r&&r(m)}function E(){g&&(En(!1,g.toString()),t&&t(g))}A.useEffect(function(){p({type:"RESET"})},[o,p]),A.useEffect(function(){if(!o)return;const P=hm(o.getTextContent()),M=P;return P.promise.then(F=>{p({type:"RESOLVE",value:F})}).catch(F=>{p({type:"REJECT",error:F})}),()=>Xl(M)},[o,p]),A.useEffect(()=>{if(m!==void 0){if(m===!1){E();return}v()}},[m]);const S=A.useCallback(()=>{i&&i()},[i]),R=A.useCallback(T=>{En(!1,T.toString()),s&&s(T)},[s]);function O(){const T=w.current;T&&T.classList.add("active")}function j(){const T=w.current;T&&T.classList.remove("active")}const C=A.useMemo(()=>o.getViewport({scale:u,rotation:c}),[o,c,u]);return A.useLayoutEffect(function(){if(!o||!m)return;const{current:P}=y;if(!P)return;P.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),F={container:P,textContentSource:M,viewport:C},V=new wN(F),D=V;return V.render().then(()=>{const z=document.createElement("div");z.className="endOfContent",P.append(z),w.current=z;const $=P.querySelectorAll('[role="presentation"]');if(e){let W=0;m.items.forEach((U,B)=>{if(!n6(U))return;const H=$[W];if(!H)return;const X=e(Object.assign({pageIndex:a,pageNumber:l,itemIndex:B},U));H.innerHTML=X,W+=U.str&&U.hasEOL?2:1})}S()}).catch(R),()=>Xl(D)},[e,R,S,o,a,l,m,C]),x.jsx("div",{className:m_("react-pdf__Page__textContent","textLayer"),onMouseUp:j,onMouseDown:O,ref:y})}function s6(){const n=xN(),e=y_();Ke(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:r,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:c,pdf:u,renderForms:f,rotate:p,scale:m=1}=t;Ke(u),Ke(c),Ke(s);const[g,y]=ah(),{value:w,error:v}=g,E=A.useRef(null);En(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){w&&o&&o(w)}function R(){v&&(En(!1,v.toString()),i&&i(v))}A.useEffect(function(){y({type:"RESET"})},[y,c]),A.useEffect(function(){if(!c)return;const P=hm(c.getAnnotations()),M=P;return P.promise.then(F=>{y({type:"RESOLVE",value:F})}).catch(F=>{y({type:"REJECT",error:F})}),()=>{Xl(M)}},[y,c]),A.useEffect(()=>{if(w!==void 0){if(w===!1){R();return}S()}},[w]);function O(){l&&l()}function j(T){En(!1,`${T}`),a&&a(T)}const C=A.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return A.useEffect(function(){if(!u||!c||!s||!w)return;const{current:P}=E;if(!P)return;const M=C.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:P,l10n:null,page:c,viewport:M},V={annotations:w,annotationStorage:u.annotationStorage,div:P,imageResourcesPath:r,linkService:s,page:c,renderForms:f,viewport:M};P.innerHTML="";try{new yN(F).render(V),O()}catch(D){j(D)}return()=>{}},[w,r,s,c,u,f,C]),x.jsx("div",{className:m_("react-pdf__Page__annotations","annotationLayer"),ref:E})}var i6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const mx=1;function o6(n){const e=xN(),t=Object.assign(Object.assign({},e),n),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:o,children:a,className:l,customRenderer:c,customTextRenderer:u,devicePixelRatio:f,error:p="Failed to load the page.",height:m,inputRef:g,loading:y="Loading page",noData:w="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:E,onGetStructTreeError:S,onGetStructTreeSuccess:R,onGetTextError:O,onGetTextSuccess:j,onLoadError:C,onLoadSuccess:T,onRenderAnnotationLayerError:P,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:V,onRenderTextLayerError:D,onRenderTextLayerSuccess:z,pageIndex:$,pageNumber:W,pdf:U,registerPage:B,renderAnnotationLayer:H=!0,renderForms:X=!1,renderMode:ne="canvas",renderTextLayer:J=!0,rotate:re,scale:me=mx,unregisterPage:Fe,width:be}=t,ce=i6(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Je,Ze]=ah(),{value:ke,error:Zn}=Je,br=A.useRef(null);Ke(U);const Se=Ta(W)?W-1:$??null,We=W??(Ta($)?$+1:null),ht=re??(ke?ke.rotate:null),st=A.useMemo(()=>{if(!ke)return null;let dt=1;const Qs=me??mx;if(be||m){const ya=ke.getViewport({scale:1,rotation:ht});be?dt=be/ya.width:m&&(dt=m/ya.height)}return Qs*dt},[m,ke,ht,me,be]);A.useEffect(function(){return()=>{Ta(Se)&&s&&Fe&&Fe(Se)}},[s,U,Se,Fe]);function ds(){if(T){if(!ke||!st)return;T(CA(ke,st))}if(s&&B){if(!Ta(Se)||!br.current)return;B(Se,br.current)}}function Xs(){Zn&&(En(!1,Zn.toString()),C&&C(Zn))}A.useEffect(function(){Ze({type:"RESET"})},[Ze,U,Se]),A.useEffect(function(){if(!U||!We)return;const Qs=hm(U.getPage(We)),ya=Qs;return Qs.promise.then(lc=>{Ze({type:"RESOLVE",value:lc})}).catch(lc=>{Ze({type:"REJECT",error:lc})}),()=>Xl(ya)},[Ze,U,We]),A.useEffect(()=>{if(ke!==void 0){if(ke===!1){Xs();return}ds()}},[ke,st]);const Ys=A.useMemo(()=>ke&&Ta(Se)&&We&&Ta(ht)&&Ta(st)?{_className:r,canvasBackground:i,customTextRenderer:u,devicePixelRatio:f,onGetAnnotationsError:v,onGetAnnotationsSuccess:E,onGetStructTreeError:S,onGetStructTreeSuccess:R,onGetTextError:O,onGetTextSuccess:j,onRenderAnnotationLayerError:P,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:V,onRenderTextLayerError:D,onRenderTextLayerSuccess:z,page:ke,pageIndex:Se,pageNumber:We,renderForms:X,renderTextLayer:J,rotate:ht,scale:st}:null,[r,i,u,f,v,E,S,R,O,j,P,M,F,V,D,z,ke,Se,We,X,J,ht,st]),xh=A.useMemo(()=>AN(ce,()=>ke&&(st?CA(ke,st):void 0)),[ce,ke,st]),va=`${Se}@${st}/${ht}`;function O_(){switch(ne){case"custom":return Ke(c),x.jsx(c,{},`${va}_custom`);case"none":return null;case"canvas":default:return x.jsx(t6,{canvasRef:o},`${va}_canvas`)}}function Rh(){return J?x.jsx(r6,{},`${va}_text`):null}function Ph(){return H?x.jsx(s6,{},`${va}_annotations`):null}function ym(){return x.jsxs(PN.Provider,{value:Ys,children:[O_(),Rh(),Ph(),a]})}function Bt(){return We?U===null||ke===void 0||ke===null?x.jsx(Qc,{type:"loading",children:typeof y=="function"?y():y}):U===!1||ke===!1?x.jsx(Qc,{type:"error",children:typeof p=="function"?p():p}):ym():x.jsx(Qc,{type:"no-data",children:typeof w=="function"?w():w})}return x.jsx("div",Object.assign({className:m_(r,l),"data-page-number":We,ref:RN(g,br),style:{"--scale-factor":`${st}`,backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},xh,{children:Bt()}))}$5();RS.workerSrc="pdf.worker.mjs";function NN({isMobile:n}){const[e,t]=A.useState("");A.useEffect(()=>{om("/resume","Resume - Adarsh Gella Portfolio"),t("https://fmcjrkoabikaexixbppg.supabase.co/storage/v1/object/public/resume/resume.pdf")},[]);const[r]=A.useState(1),s=()=>{Oi("Resume Download","resume_page",{file_url:e,device_type:n?"mobile":"desktop"}),window.open(e,"_blank")};return x.jsx("div",{className:`pdf-div ${n?"mwebPdf":""}`,onClick:s,children:e&&x.jsx(X5,{file:e,children:x.jsx(o6,{pageNumber:r,renderTextLayer:!1,renderAnnotationLayer:!1})})})}NN.propTypes={isMobile:ls.bool};const a6="/assets/linkedin-DvbM5N3o.png",l6="/assets/instagram-DsqoG5P9.png",c6="/assets/youtube-rHJN1bq4.png",u6="/assets/gmail-DoONwEbf.png",h6="/assets/contact-Ctb_tZ2q.png";function DN({isMobile:n}){A.useEffect(()=>{om("/contact","Contact - Adarsh Gella Portfolio")},[]);const e=(t,r)=>{Oi(`${t} Link`,"contact_page",{platform:t.toLowerCase(),url:r,device_type:n?"mobile":"desktop"}),Mg("social_media_click",t,{url:r})};return x.jsxs("div",{className:`contact ${n?"contactMweb":""}`,children:[x.jsxs("div",{className:"socialMedia",children:[x.jsxs("h2",{className:"contact-title",children:["contact",x.jsx("span",{children:"."})]}),x.jsxs("p",{className:"contact-description",children:["Get in touch with me via social media ",x.jsx("br",{})," or send me an email."]}),x.jsxs("div",{className:"contact-icons",children:[x.jsx("a",{href:"https://www.linkedin.com/in/g-adarsh-sonu/",target:"_blank",onClick:()=>e("LinkedIn","https://www.linkedin.com/in/g-adarsh-sonu/"),children:x.jsx("img",{src:a6,alt:"LinkedIn"})}),x.jsx("a",{href:"https://instagram.com/g_adarsh_sonu",target:"_blank",onClick:()=>e("Instagram","https://instagram.com/g_adarsh_sonu"),children:x.jsx("img",{src:l6,alt:"Instagram"})}),x.jsx("a",{href:"mailto:g.adarsh043@gmail.com",onClick:()=>e("Gmail","mailto:g.adarsh043@gmail.com"),children:x.jsx("img",{src:u6,alt:"Gmail"})}),x.jsx("a",{href:"https://youtube.com/@g_adarsh_sonu",target:"_blank",onClick:()=>e("YouTube","https://youtube.com/@g_adarsh_sonu"),children:x.jsx("img",{src:c6,alt:"YouTube"})})]})]}),x.jsx("div",{className:"contact-image-container",children:x.jsx("img",{src:h6,alt:"Contact",className:"contact-image"})})]})}DN.propTypes={isMobile:ls.bool};var gx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},d6=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},FN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(t[u],t[f],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ON(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):d6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new f6;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const g=c<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class f6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p6=function(n){const e=ON(n);return FN.encodeByteArray(e,!0)},Qv=function(n){return p6(n).replace(/\./g,"")},m6=function(n){try{return FN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=()=>g6().__FIREBASE_DEFAULTS__,y6=()=>{if(typeof process>"u"||typeof gx>"u")return;const n=gx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&m6(n[1]);return e&&JSON.parse(e)},PS=()=>{try{return v6()||y6()||_6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},w6=n=>{var e,t;return(t=(e=PS())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},VN=n=>{const e=w6(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jN=()=>{var n;return(n=PS())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qv(JSON.stringify(t)),Qv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b6(){var n;const e=(n=PS())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S6(){return!b6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T6(){try{return typeof indexedDB=="object"}catch{return!1}}function C6(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="FirebaseError";class ic extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=x6,Object.setPrototypeOf(this,ic.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,UN.prototype.create)}}class UN{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?R6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ic(s,a,r)}}function R6(n,e){return n.replace(P6,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const P6=/\{\$([^}]+)}/g;function xA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(vx(i)&&vx(o)){if(!xA(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function vx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n){return n&&n._delegate?n._delegate:n}class lh{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new E6;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(L6(e))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=La){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=La){return this.instances.has(e)}getOptions(e=La){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:k6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=La){return this.component?this.component.multipleInstances?e:La:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k6(n){return n===La?void 0:n}function L6(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new I6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Re||(Re={}));const N6={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},D6=Re.INFO,O6={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},F6=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=O6[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zN{constructor(e){this.name=e,this._logLevel=D6,this._logHandler=F6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?N6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const V6=(n,e)=>e.some(t=>n instanceof t);let yx,_x;function j6(){return yx||(yx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B6(){return _x||(_x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HN=new WeakMap,RA=new WeakMap,WN=new WeakMap,z0=new WeakMap,IS=new WeakMap;function U6(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Ko(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&HN.set(t,n)}).catch(()=>{}),IS.set(e,n),e}function $6(n){if(RA.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});RA.set(n,e)}let PA={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return RA.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ko(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function z6(n){PA=n(PA)}function H6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(H0(this),e,...t);return WN.set(r,e.sort?e.sort():[e]),Ko(r)}:B6().includes(n)?function(...e){return n.apply(H0(this),e),Ko(HN.get(this))}:function(...e){return Ko(n.apply(H0(this),e))}}function W6(n){return typeof n=="function"?H6(n):(n instanceof IDBTransaction&&$6(n),V6(n,j6())?new Proxy(n,PA):n)}function Ko(n){if(n instanceof IDBRequest)return U6(n);if(z0.has(n))return z0.get(n);const e=W6(n);return e!==n&&(z0.set(n,e),IS.set(e,n)),e}const H0=n=>IS.get(n);function G6(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=Ko(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ko(o.result),l.oldVersion,l.newVersion,Ko(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const q6=["get","getKey","getAll","getAllKeys","count"],K6=["put","add","delete","clear"],W0=new Map;function wx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(W0.get(e))return W0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=K6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||q6.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return W0.set(e,i),i}z6(n=>({...n,get:(e,t,r)=>wx(e,t)||n.get(e,t,r),has:(e,t)=>!!wx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Y6(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Y6(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const IA="@firebase/app",Ex="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new zN("@firebase/app"),Q6="@firebase/app-compat",J6="@firebase/analytics-compat",Z6="@firebase/analytics",e9="@firebase/app-check-compat",t9="@firebase/app-check",n9="@firebase/auth",r9="@firebase/auth-compat",s9="@firebase/database",i9="@firebase/data-connect",o9="@firebase/database-compat",a9="@firebase/functions",l9="@firebase/functions-compat",c9="@firebase/installations",u9="@firebase/installations-compat",h9="@firebase/messaging",d9="@firebase/messaging-compat",f9="@firebase/performance",p9="@firebase/performance-compat",m9="@firebase/remote-config",g9="@firebase/remote-config-compat",v9="@firebase/storage",y9="@firebase/storage-compat",_9="@firebase/firestore",w9="@firebase/vertexai",E9="@firebase/firestore-compat",A9="firebase",b9="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="[DEFAULT]",S9={[IA]:"fire-core",[Q6]:"fire-core-compat",[Z6]:"fire-analytics",[J6]:"fire-analytics-compat",[t9]:"fire-app-check",[e9]:"fire-app-check-compat",[n9]:"fire-auth",[r9]:"fire-auth-compat",[s9]:"fire-rtdb",[i9]:"fire-data-connect",[o9]:"fire-rtdb-compat",[a9]:"fire-fn",[l9]:"fire-fn-compat",[c9]:"fire-iid",[u9]:"fire-iid-compat",[h9]:"fire-fcm",[d9]:"fire-fcm-compat",[f9]:"fire-perf",[p9]:"fire-perf-compat",[m9]:"fire-rc",[g9]:"fire-rc-compat",[v9]:"fire-gcs",[y9]:"fire-gcs-compat",[_9]:"fire-fst",[E9]:"fire-fst-compat",[w9]:"fire-vertex","fire-js":"fire-js",[A9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map,T9=new Map,LA=new Map;function Ax(n,e){try{n.container.addComponent(e)}catch(t){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function df(n){const e=n.name;if(LA.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;LA.set(e,n);for(const t of Jv.values())Ax(t,n);for(const t of T9.values())Ax(t,n);return!0}function GN(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xo=new UN("app","Firebase",C9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=b9;function KN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kA,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Xo.create("bad-app-name",{appName:String(s)});if(t||(t=jN()),!t)throw Xo.create("no-options");const i=Jv.get(s);if(i){if(xA(t,i.options)&&xA(r,i.config))return i;throw Xo.create("duplicate-app",{appName:s})}const o=new M6(s);for(const l of LA.values())o.addComponent(l);const a=new x9(t,r,o);return Jv.set(s,a),a}function XN(n=kA){const e=Jv.get(n);if(!e&&n===kA&&jN())return KN();if(!e)throw Xo.create("no-app",{appName:n});return e}function Yo(n,e,t){var r;let s=(r=S9[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(a.join(" "));return}df(new lh(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9="firebase-heartbeat-database",P9=1,ff="firebase-heartbeat-store";let G0=null;function YN(){return G0||(G0=G6(R9,P9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ff)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xo.create("idb-open",{originalErrorMessage:n.message})})),G0}async function I9(n){try{const t=(await YN()).transaction(ff),r=await t.objectStore(ff).get(QN(n));return await t.done,r}catch(e){if(e instanceof ic)qi.warn(e.message);else{const t=Xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(t.message)}}}async function bx(n,e){try{const r=(await YN()).transaction(ff,"readwrite");await r.objectStore(ff).put(e,QN(n)),await r.done}catch(t){if(t instanceof ic)qi.warn(t.message);else{const r=Xo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qi.warn(r.message)}}}function QN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=1024,L9=30*24*60*60*1e3;class M9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new D9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=L9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Sx(),{heartbeatsToSend:r,unsentEntries:s}=N9(this._heartbeatsCache.heartbeats),i=Qv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return qi.warn(t),""}}}function Sx(){return new Date().toISOString().substring(0,10)}function N9(n,e=k9){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Tx(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Tx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class D9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T6()?C6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await I9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return bx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return bx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Tx(n){return Qv(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(n){df(new lh("platform-logger",e=>new X6(e),"PRIVATE")),df(new lh("heartbeat",e=>new M9(e),"PRIVATE")),Yo(IA,Ex,n),Yo(IA,Ex,"esm2017"),Yo("fire-js","")}O9("");var F9="firebase",V9="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yo(F9,V9,"app");var Cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fl,JN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function P(){}P.prototype=T.prototype,C.D=T.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(M,F,V){for(var D=Array(arguments.length-2),z=2;z<arguments.length;z++)D[z-2]=arguments[z];return T.prototype[F].apply(M,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,T,P){P||(P=0);var M=Array(16);if(typeof T=="string")for(var F=0;16>F;++F)M[F]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(F=0;16>F;++F)M[F]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=C.g[0],P=C.g[1],F=C.g[2];var V=C.g[3],D=T+(V^P&(F^V))+M[0]+3614090360&4294967295;T=P+(D<<7&4294967295|D>>>25),D=V+(F^T&(P^F))+M[1]+3905402710&4294967295,V=T+(D<<12&4294967295|D>>>20),D=F+(P^V&(T^P))+M[2]+606105819&4294967295,F=V+(D<<17&4294967295|D>>>15),D=P+(T^F&(V^T))+M[3]+3250441966&4294967295,P=F+(D<<22&4294967295|D>>>10),D=T+(V^P&(F^V))+M[4]+4118548399&4294967295,T=P+(D<<7&4294967295|D>>>25),D=V+(F^T&(P^F))+M[5]+1200080426&4294967295,V=T+(D<<12&4294967295|D>>>20),D=F+(P^V&(T^P))+M[6]+2821735955&4294967295,F=V+(D<<17&4294967295|D>>>15),D=P+(T^F&(V^T))+M[7]+4249261313&4294967295,P=F+(D<<22&4294967295|D>>>10),D=T+(V^P&(F^V))+M[8]+1770035416&4294967295,T=P+(D<<7&4294967295|D>>>25),D=V+(F^T&(P^F))+M[9]+2336552879&4294967295,V=T+(D<<12&4294967295|D>>>20),D=F+(P^V&(T^P))+M[10]+4294925233&4294967295,F=V+(D<<17&4294967295|D>>>15),D=P+(T^F&(V^T))+M[11]+2304563134&4294967295,P=F+(D<<22&4294967295|D>>>10),D=T+(V^P&(F^V))+M[12]+1804603682&4294967295,T=P+(D<<7&4294967295|D>>>25),D=V+(F^T&(P^F))+M[13]+4254626195&4294967295,V=T+(D<<12&4294967295|D>>>20),D=F+(P^V&(T^P))+M[14]+2792965006&4294967295,F=V+(D<<17&4294967295|D>>>15),D=P+(T^F&(V^T))+M[15]+1236535329&4294967295,P=F+(D<<22&4294967295|D>>>10),D=T+(F^V&(P^F))+M[1]+4129170786&4294967295,T=P+(D<<5&4294967295|D>>>27),D=V+(P^F&(T^P))+M[6]+3225465664&4294967295,V=T+(D<<9&4294967295|D>>>23),D=F+(T^P&(V^T))+M[11]+643717713&4294967295,F=V+(D<<14&4294967295|D>>>18),D=P+(V^T&(F^V))+M[0]+3921069994&4294967295,P=F+(D<<20&4294967295|D>>>12),D=T+(F^V&(P^F))+M[5]+3593408605&4294967295,T=P+(D<<5&4294967295|D>>>27),D=V+(P^F&(T^P))+M[10]+38016083&4294967295,V=T+(D<<9&4294967295|D>>>23),D=F+(T^P&(V^T))+M[15]+3634488961&4294967295,F=V+(D<<14&4294967295|D>>>18),D=P+(V^T&(F^V))+M[4]+3889429448&4294967295,P=F+(D<<20&4294967295|D>>>12),D=T+(F^V&(P^F))+M[9]+568446438&4294967295,T=P+(D<<5&4294967295|D>>>27),D=V+(P^F&(T^P))+M[14]+3275163606&4294967295,V=T+(D<<9&4294967295|D>>>23),D=F+(T^P&(V^T))+M[3]+4107603335&4294967295,F=V+(D<<14&4294967295|D>>>18),D=P+(V^T&(F^V))+M[8]+1163531501&4294967295,P=F+(D<<20&4294967295|D>>>12),D=T+(F^V&(P^F))+M[13]+2850285829&4294967295,T=P+(D<<5&4294967295|D>>>27),D=V+(P^F&(T^P))+M[2]+4243563512&4294967295,V=T+(D<<9&4294967295|D>>>23),D=F+(T^P&(V^T))+M[7]+1735328473&4294967295,F=V+(D<<14&4294967295|D>>>18),D=P+(V^T&(F^V))+M[12]+2368359562&4294967295,P=F+(D<<20&4294967295|D>>>12),D=T+(P^F^V)+M[5]+4294588738&4294967295,T=P+(D<<4&4294967295|D>>>28),D=V+(T^P^F)+M[8]+2272392833&4294967295,V=T+(D<<11&4294967295|D>>>21),D=F+(V^T^P)+M[11]+1839030562&4294967295,F=V+(D<<16&4294967295|D>>>16),D=P+(F^V^T)+M[14]+4259657740&4294967295,P=F+(D<<23&4294967295|D>>>9),D=T+(P^F^V)+M[1]+2763975236&4294967295,T=P+(D<<4&4294967295|D>>>28),D=V+(T^P^F)+M[4]+1272893353&4294967295,V=T+(D<<11&4294967295|D>>>21),D=F+(V^T^P)+M[7]+4139469664&4294967295,F=V+(D<<16&4294967295|D>>>16),D=P+(F^V^T)+M[10]+3200236656&4294967295,P=F+(D<<23&4294967295|D>>>9),D=T+(P^F^V)+M[13]+681279174&4294967295,T=P+(D<<4&4294967295|D>>>28),D=V+(T^P^F)+M[0]+3936430074&4294967295,V=T+(D<<11&4294967295|D>>>21),D=F+(V^T^P)+M[3]+3572445317&4294967295,F=V+(D<<16&4294967295|D>>>16),D=P+(F^V^T)+M[6]+76029189&4294967295,P=F+(D<<23&4294967295|D>>>9),D=T+(P^F^V)+M[9]+3654602809&4294967295,T=P+(D<<4&4294967295|D>>>28),D=V+(T^P^F)+M[12]+3873151461&4294967295,V=T+(D<<11&4294967295|D>>>21),D=F+(V^T^P)+M[15]+530742520&4294967295,F=V+(D<<16&4294967295|D>>>16),D=P+(F^V^T)+M[2]+3299628645&4294967295,P=F+(D<<23&4294967295|D>>>9),D=T+(F^(P|~V))+M[0]+4096336452&4294967295,T=P+(D<<6&4294967295|D>>>26),D=V+(P^(T|~F))+M[7]+1126891415&4294967295,V=T+(D<<10&4294967295|D>>>22),D=F+(T^(V|~P))+M[14]+2878612391&4294967295,F=V+(D<<15&4294967295|D>>>17),D=P+(V^(F|~T))+M[5]+4237533241&4294967295,P=F+(D<<21&4294967295|D>>>11),D=T+(F^(P|~V))+M[12]+1700485571&4294967295,T=P+(D<<6&4294967295|D>>>26),D=V+(P^(T|~F))+M[3]+2399980690&4294967295,V=T+(D<<10&4294967295|D>>>22),D=F+(T^(V|~P))+M[10]+4293915773&4294967295,F=V+(D<<15&4294967295|D>>>17),D=P+(V^(F|~T))+M[1]+2240044497&4294967295,P=F+(D<<21&4294967295|D>>>11),D=T+(F^(P|~V))+M[8]+1873313359&4294967295,T=P+(D<<6&4294967295|D>>>26),D=V+(P^(T|~F))+M[15]+4264355552&4294967295,V=T+(D<<10&4294967295|D>>>22),D=F+(T^(V|~P))+M[6]+2734768916&4294967295,F=V+(D<<15&4294967295|D>>>17),D=P+(V^(F|~T))+M[13]+1309151649&4294967295,P=F+(D<<21&4294967295|D>>>11),D=T+(F^(P|~V))+M[4]+4149444226&4294967295,T=P+(D<<6&4294967295|D>>>26),D=V+(P^(T|~F))+M[11]+3174756917&4294967295,V=T+(D<<10&4294967295|D>>>22),D=F+(T^(V|~P))+M[2]+718787259&4294967295,F=V+(D<<15&4294967295|D>>>17),D=P+(V^(F|~T))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(F+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+F&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var P=T-this.blockSize,M=this.B,F=this.h,V=0;V<T;){if(F==0)for(;V<=P;)s(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<T;)if(M[F++]=C.charCodeAt(V++),F==this.blockSize){s(this,M),F=0;break}}else for(;V<T;)if(M[F++]=C[V++],F==this.blockSize){s(this,M),F=0;break}}this.h=F,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var P=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=P&255,P/=256;for(this.u(C),C=Array(16),T=P=0;4>T;++T)for(var M=0;32>M;M+=8)C[P++]=this.g[T]>>>M&255;return C};function i(C,T){var P=a;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=T(C)}function o(C,T){this.h=T;for(var P=[],M=!0,F=C.length-1;0<=F;F--){var V=C[F]|0;M&&V==T||(P[F]=V,M=!1)}this.g=P}var a={};function l(C){return-128<=C&&128>C?i(C,function(T){return new o([T|0],0>T?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return w(c(-C));for(var T=[],P=1,M=0;C>=P;M++)T[M]=C/P|0,P*=4294967296;return new o(T,0)}function u(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return w(u(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(T,8)),M=f,F=0;F<C.length;F+=8){var V=Math.min(8,C.length-F),D=parseInt(C.substring(F,F+V),T);8>V?(V=c(Math.pow(T,V)),M=M.j(V).add(c(D))):(M=M.j(P),M=M.add(c(D)))}return M}var f=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(y(this))return-w(this).m();for(var C=0,T=1,P=0;P<this.g.length;P++){var M=this.i(P);C+=(0<=M?M:4294967296+M)*T,T*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(g(this))return"0";if(y(this))return"-"+w(this).toString(C);for(var T=c(Math.pow(C,6)),P=this,M="";;){var F=R(P,T).g;P=v(P,F.j(T));var V=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=F,g(P))return V+M;for(;6>V.length;)V="0"+V;M=V+M}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function g(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function y(C){return C.h==-1}n.l=function(C){return C=v(this,C),y(C)?-1:g(C)?0:1};function w(C){for(var T=C.g.length,P=[],M=0;M<T;M++)P[M]=~C.g[M];return new o(P,~C.h).add(p)}n.abs=function(){return y(this)?w(this):this},n.add=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],M=0,F=0;F<=T;F++){var V=M+(this.i(F)&65535)+(C.i(F)&65535),D=(V>>>16)+(this.i(F)>>>16)+(C.i(F)>>>16);M=D>>>16,V&=65535,D&=65535,P[F]=D<<16|V}return new o(P,P[P.length-1]&-2147483648?-1:0)};function v(C,T){return C.add(w(T))}n.j=function(C){if(g(this)||g(C))return f;if(y(this))return y(C)?w(this).j(w(C)):w(w(this).j(C));if(y(C))return w(this.j(w(C)));if(0>this.l(m)&&0>C.l(m))return c(this.m()*C.m());for(var T=this.g.length+C.g.length,P=[],M=0;M<2*T;M++)P[M]=0;for(M=0;M<this.g.length;M++)for(var F=0;F<C.g.length;F++){var V=this.i(M)>>>16,D=this.i(M)&65535,z=C.i(F)>>>16,$=C.i(F)&65535;P[2*M+2*F]+=D*$,E(P,2*M+2*F),P[2*M+2*F+1]+=V*$,E(P,2*M+2*F+1),P[2*M+2*F+1]+=D*z,E(P,2*M+2*F+1),P[2*M+2*F+2]+=V*z,E(P,2*M+2*F+2)}for(M=0;M<T;M++)P[M]=P[2*M+1]<<16|P[2*M];for(M=T;M<2*T;M++)P[M]=0;return new o(P,0)};function E(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function S(C,T){this.g=C,this.h=T}function R(C,T){if(g(T))throw Error("division by zero");if(g(C))return new S(f,f);if(y(C))return T=R(w(C),T),new S(w(T.g),w(T.h));if(y(T))return T=R(C,w(T)),new S(w(T.g),T.h);if(30<C.g.length){if(y(C)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var P=p,M=T;0>=M.l(C);)P=O(P),M=O(M);var F=j(P,1),V=j(M,1);for(M=j(M,2),P=j(P,2);!g(M);){var D=V.add(M);0>=D.l(C)&&(F=F.add(P),V=D),M=j(M,1),P=j(P,1)}return T=v(C,F.j(T)),new S(F,T)}for(F=f;0<=C.l(T);){for(P=Math.max(1,Math.floor(C.m()/T.m())),M=Math.ceil(Math.log(P)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),V=c(P),D=V.j(T);y(D)||0<D.l(C);)P-=M,V=c(P),D=V.j(T);g(V)&&(V=p),F=F.add(V),C=v(C,D)}return new S(F,C)}n.A=function(C){return R(this,C).h},n.and=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],M=0;M<T;M++)P[M]=this.i(M)&C.i(M);return new o(P,this.h&C.h)},n.or=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],M=0;M<T;M++)P[M]=this.i(M)|C.i(M);return new o(P,this.h|C.h)},n.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),P=[],M=0;M<T;M++)P[M]=this.i(M)^C.i(M);return new o(P,this.h^C.h)};function O(C){for(var T=C.g.length+1,P=[],M=0;M<T;M++)P[M]=C.i(M)<<1|C.i(M-1)>>>31;return new o(P,C.h)}function j(C,T){var P=T>>5;T%=32;for(var M=C.g.length-P,F=[],V=0;V<M;V++)F[V]=0<T?C.i(V+P)>>>T|C.i(V+P+1)<<32-T:C.i(V+P);return new o(F,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Fl=o}).apply(typeof Cx<"u"?Cx:typeof self<"u"?self:typeof window<"u"?window:{});var ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZN,Ad,eD,ov,MA,tD,nD,rD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,b){return d==Array.prototype||d==Object.prototype||(d[_]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ag=="object"&&ag];for(var _=0;_<d.length;++_){var b=d[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(d,_){if(_)e:{var b=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var G=d[N];if(!(G in b))break e;b=b[G]}d=d[d.length-1],N=b[d],_=_(N),_!=N&&_!=null&&e(b,d,{configurable:!0,writable:!0,value:_})}}function i(d,_){d instanceof String&&(d+="");var b=0,N=!1,G={next:function(){if(!N&&b<d.length){var q=b++;return{value:_(q,d[q]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(d){return d||function(){return i(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function c(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function u(d,_,b){return d.call.apply(d.bind,arguments)}function f(d,_,b){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),d.apply(_,G)}}return function(){return d.apply(_,arguments)}}function p(d,_,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(d,_){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function g(d,_){function b(){}b.prototype=_.prototype,d.aa=_.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(N,G,q){for(var Q=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Q[Ge-2]=arguments[Ge];return _.prototype[G].apply(N,Q)}}function y(d){const _=d.length;if(0<_){const b=Array(_);for(let N=0;N<_;N++)b[N]=d[N];return b}return[]}function w(d,_){for(let b=1;b<arguments.length;b++){const N=arguments[b];if(l(N)){const G=d.length||0,q=N.length||0;d.length=G+q;for(let Q=0;Q<q;Q++)d[G+Q]=N[Q]}else d.push(N)}}class v{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function E(d){return/^[\s\xa0]*$/.test(d)}function S(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function j(d,_,b){for(const N in d)_.call(b,d[N],N,d)}function C(d,_){for(const b in d)_.call(void 0,d[b],b,d)}function T(d){const _={};for(const b in d)_[b]=d[b];return _}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,_){let b,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(b in N)d[b]=N[b];for(let q=0;q<P.length;q++)b=P[q],Object.prototype.hasOwnProperty.call(N,b)&&(d[b]=N[b])}}function F(d){var _=1;d=d.split(":");const b=[];for(;0<_&&d.length;)b.push(d.shift()),_--;return d.length&&b.push(d.join(":")),b}function V(d){a.setTimeout(()=>{throw d},0)}function D(){var d=H;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class z{constructor(){this.h=this.g=null}add(_,b){const N=$.get();N.set(_,b),this.h?this.h.next=N:this.g=N,this.h=N}}var $=new v(()=>new W,d=>d.reset());class W{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let U,B=!1,H=new z,X=()=>{const d=a.Promise.resolve(void 0);U=()=>{d.then(ne)}};var ne=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(b){V(b)}var _=$;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}B=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,_),a.removeEventListener("test",b,_)}catch{}return d}();function Fe(d,_){if(re.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(O){e:{try{R(_.nodeName);var G=!0;break e}catch{}G=!1}G||(_=null)}}else b=="mouseover"?_=d.fromElement:b=="mouseout"&&(_=d.toElement);this.relatedTarget=_,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:be[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Fe.aa.h.call(this)}}g(Fe,re);var be={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(d,_,b,N,G){this.listener=d,this.proxy=null,this.src=_,this.type=b,this.capture=!!N,this.ha=G,this.key=++Je,this.da=this.fa=!1}function ke(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Zn(d){this.src=d,this.g={},this.h=0}Zn.prototype.add=function(d,_,b,N,G){var q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);var Q=Se(d,_,N,G);return-1<Q?(_=d[Q],b||(_.fa=!1)):(_=new Ze(_,this.src,q,!!N,G),_.fa=b,d.push(_)),_};function br(d,_){var b=_.type;if(b in d.g){var N=d.g[b],G=Array.prototype.indexOf.call(N,_,void 0),q;(q=0<=G)&&Array.prototype.splice.call(N,G,1),q&&(ke(_),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Se(d,_,b,N){for(var G=0;G<d.length;++G){var q=d[G];if(!q.da&&q.listener==_&&q.capture==!!b&&q.ha==N)return G}return-1}var We="closure_lm_"+(1e6*Math.random()|0),ht={};function st(d,_,b,N,G){if(Array.isArray(_)){for(var q=0;q<_.length;q++)st(d,_[q],b,N,G);return null}return b=ym(b),d&&d[ce]?d.K(_,b,c(N)?!!N.capture:!!N,G):ds(d,_,b,!1,N,G)}function ds(d,_,b,N,G,q){if(!_)throw Error("Invalid event type");var Q=c(G)?!!G.capture:!!G,Ge=Rh(d);if(Ge||(d[We]=Ge=new Zn(d)),b=Ge.add(_,b,N,Q,q),b.proxy)return b;if(N=Xs(),b.proxy=N,N.src=d,N.listener=b,d.addEventListener)me||(G=Q),G===void 0&&(G=!1),d.addEventListener(_.toString(),N,G);else if(d.attachEvent)d.attachEvent(va(_.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Xs(){function d(b){return _.call(d.src,d.listener,b)}const _=O_;return d}function Ys(d,_,b,N,G){if(Array.isArray(_))for(var q=0;q<_.length;q++)Ys(d,_[q],b,N,G);else N=c(N)?!!N.capture:!!N,b=ym(b),d&&d[ce]?(d=d.i,_=String(_).toString(),_ in d.g&&(q=d.g[_],b=Se(q,b,N,G),-1<b&&(ke(q[b]),Array.prototype.splice.call(q,b,1),q.length==0&&(delete d.g[_],d.h--)))):d&&(d=Rh(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Se(_,b,N,G)),(b=-1<d?_[d]:null)&&xh(b))}function xh(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[ce])br(_.i,d);else{var b=d.type,N=d.proxy;_.removeEventListener?_.removeEventListener(b,N,d.capture):_.detachEvent?_.detachEvent(va(b),N):_.addListener&&_.removeListener&&_.removeListener(N),(b=Rh(_))?(br(b,d),b.h==0&&(b.src=null,_[We]=null)):ke(d)}}}function va(d){return d in ht?ht[d]:ht[d]="on"+d}function O_(d,_){if(d.da)d=!0;else{_=new Fe(_,this);var b=d.listener,N=d.ha||d.src;d.fa&&xh(d),d=b.call(N,_)}return d}function Rh(d){return d=d[We],d instanceof Zn?d:null}var Ph="__closure_events_fn_"+(1e9*Math.random()>>>0);function ym(d){return typeof d=="function"?d:(d[Ph]||(d[Ph]=function(_){return d.handleEvent(_)}),d[Ph])}function Bt(){J.call(this),this.i=new Zn(this),this.M=this,this.F=null}g(Bt,J),Bt.prototype[ce]=!0,Bt.prototype.removeEventListener=function(d,_,b,N){Ys(this,d,_,b,N)};function dt(d,_){var b,N=d.F;if(N)for(b=[];N;N=N.F)b.push(N);if(d=d.M,N=_.type||_,typeof _=="string")_=new re(_,d);else if(_ instanceof re)_.target=_.target||d;else{var G=_;_=new re(N,d),M(_,G)}if(G=!0,b)for(var q=b.length-1;0<=q;q--){var Q=_.g=b[q];G=Qs(Q,N,!0,_)&&G}if(Q=_.g=d,G=Qs(Q,N,!0,_)&&G,G=Qs(Q,N,!1,_)&&G,b)for(q=0;q<b.length;q++)Q=_.g=b[q],G=Qs(Q,N,!1,_)&&G}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var b=d.g[_],N=0;N<b.length;N++)ke(b[N]);delete d.g[_],d.h--}}this.F=null},Bt.prototype.K=function(d,_,b,N){return this.i.add(String(d),_,!1,b,N)},Bt.prototype.L=function(d,_,b,N){return this.i.add(String(d),_,!0,b,N)};function Qs(d,_,b,N){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var G=!0,q=0;q<_.length;++q){var Q=_[q];if(Q&&!Q.da&&Q.capture==b){var Ge=Q.listener,qt=Q.ha||Q.src;Q.fa&&br(d.i,Q),G=Ge.call(qt,N)!==!1&&G}}return G&&!N.defaultPrevented}function ya(d,_,b){if(typeof d=="function")b&&(d=p(d,b));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(d,_||0)}function lc(d){d.g=ya(()=>{d.g=null,d.i&&(d.i=!1,lc(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class G2 extends J{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:lc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ih(d){J.call(this),this.h=d,this.g={}}g(Ih,J);var c1=[];function u1(d){j(d.g,function(_,b){this.g.hasOwnProperty(b)&&xh(_)},d),d.g={}}Ih.prototype.N=function(){Ih.aa.N.call(this),u1(this)},Ih.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var F_=a.JSON.stringify,q2=a.JSON.parse,K2=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function V_(){}V_.prototype.h=null;function h1(d){return d.h||(d.h=d.i())}function d1(){}var kh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function j_(){re.call(this,"d")}g(j_,re);function B_(){re.call(this,"c")}g(B_,re);var _a={},f1=null;function _m(){return f1=f1||new Bt}_a.La="serverreachability";function p1(d){re.call(this,_a.La,d)}g(p1,re);function Lh(d){const _=_m();dt(_,new p1(_))}_a.STAT_EVENT="statevent";function m1(d,_){re.call(this,_a.STAT_EVENT,d),this.stat=_}g(m1,re);function Tn(d){const _=_m();dt(_,new m1(_,d))}_a.Ma="timingevent";function g1(d,_){re.call(this,_a.Ma,d),this.size=_}g(g1,re);function Mh(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},_)}function Nh(){this.g=!0}Nh.prototype.xa=function(){this.g=!1};function X2(d,_,b,N,G,q){d.info(function(){if(d.g)if(q)for(var Q="",Ge=q.split("&"),qt=0;qt<Ge.length;qt++){var De=Ge[qt].split("=");if(1<De.length){var cn=De[0];De=De[1];var un=cn.split("_");Q=2<=un.length&&un[1]=="type"?Q+(cn+"="+De+"&"):Q+(cn+"=redacted&")}}else Q=null;else Q=q;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+_+`
`+b+`
`+Q})}function Y2(d,_,b,N,G,q,Q){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+_+`
`+b+`
`+q+" "+Q})}function cc(d,_,b,N){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+J2(d,b)+(N?" "+N:"")})}function Q2(d,_){d.info(function(){return"TIMEOUT: "+_})}Nh.prototype.info=function(){};function J2(d,_){if(!d.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var N=b[d];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var q=G[0];if(q!="noop"&&q!="stop"&&q!="close")for(var Q=1;Q<G.length;Q++)G[Q]=""}}}}return F_(b)}catch{return _}}var wm={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},v1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},U_;function Em(){}g(Em,V_),Em.prototype.g=function(){return new XMLHttpRequest},Em.prototype.i=function(){return{}},U_=new Em;function Zi(d,_,b,N){this.j=d,this.i=_,this.l=b,this.R=N||1,this.U=new Ih(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new y1}function y1(){this.i=null,this.g="",this.h=!1}var _1={},$_={};function z_(d,_,b){d.L=1,d.v=Tm(Js(_)),d.m=b,d.P=!0,w1(d,null)}function w1(d,_){d.F=Date.now(),Am(d),d.A=Js(d.v);var b=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),N1(b.i,"t",N),d.C=0,b=d.j.J,d.h=new y1,d.g=J1(d.j,b?_:null,!d.m),0<d.O&&(d.M=new G2(p(d.Y,d,d.g),d.O)),_=d.U,b=d.g,N=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(c1[0]=G.toString()),G=c1);for(var q=0;q<G.length;q++){var Q=st(b,G[q],N||_.handleEvent,!1,_.h||_);if(!Q)break;_.g[Q.key]=Q}_=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Lh(),X2(d.i,d.u,d.A,d.l,d.R,d.m)}Zi.prototype.ca=function(d){d=d.target;const _=this.M;_&&Zs(d)==3?_.j():this.Y(d)},Zi.prototype.Y=function(d){try{if(d==this.g)e:{const un=Zs(this.g);var _=this.g.Ba();const dc=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||U1(this.g)))){this.J||un!=4||_==7||(_==8||0>=dc?Lh(3):Lh(2)),H_(this);var b=this.g.Z();this.X=b;t:if(E1(this)){var N=U1(this.g);d="";var G=N.length,q=Zs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wa(this),Dh(this);var Q="";break t}this.h.i=new a.TextDecoder}for(_=0;_<G;_++)this.h.h=!0,d+=this.h.i.decode(N[_],{stream:!(q&&_==G-1)});N.length=0,this.h.g+=d,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=b==200,Y2(this.i,this.u,this.A,this.l,this.R,un,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,qt=this.g;if((Ge=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ge)){var De=Ge;break t}}De=null}if(b=De)cc(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,W_(this,b);else{this.o=!1,this.s=3,Tn(12),wa(this),Dh(this);break e}}if(this.P){b=!0;let jr;for(;!this.J&&this.C<Q.length;)if(jr=Z2(this,Q),jr==$_){un==4&&(this.s=4,Tn(14),b=!1),cc(this.i,this.l,null,"[Incomplete Response]");break}else if(jr==_1){this.s=4,Tn(15),cc(this.i,this.l,Q,"[Invalid Chunk]"),b=!1;break}else cc(this.i,this.l,jr,null),W_(this,jr);if(E1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||Q.length!=0||this.h.h||(this.s=1,Tn(16),b=!1),this.o=this.o&&b,!b)cc(this.i,this.l,Q,"[Invalid Chunked Response]"),wa(this),Dh(this);else if(0<Q.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Q_(cn),cn.M=!0,Tn(11))}}else cc(this.i,this.l,Q,null),W_(this,Q);un==4&&wa(this),this.o&&!this.J&&(un==4?K1(this.j,this):(this.o=!1,Am(this)))}else gO(this.g),b==400&&0<Q.indexOf("Unknown SID")?(this.s=3,Tn(12)):(this.s=0,Tn(13)),wa(this),Dh(this)}}}catch{}finally{}};function E1(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Z2(d,_){var b=d.C,N=_.indexOf(`
`,b);return N==-1?$_:(b=Number(_.substring(b,N)),isNaN(b)?_1:(N+=1,N+b>_.length?$_:(_=_.slice(N,N+b),d.C=N+b,_)))}Zi.prototype.cancel=function(){this.J=!0,wa(this)};function Am(d){d.S=Date.now()+d.I,A1(d,d.I)}function A1(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Mh(p(d.ba,d),_)}function H_(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Zi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Q2(this.i,this.A),this.L!=2&&(Lh(),Tn(17)),wa(this),this.s=2,Dh(this)):A1(this,this.S-d)};function Dh(d){d.j.G==0||d.J||K1(d.j,d)}function wa(d){H_(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,u1(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function W_(d,_){try{var b=d.j;if(b.G!=0&&(b.g==d||G_(b.h,d))){if(!d.K&&G_(b.h,d)&&b.G==3){try{var N=b.Da.g.parse(_)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)km(b),Pm(b);else break e;Y_(b),Tn(18)}}else b.za=G[1],0<b.za-b.T&&37500>G[2]&&b.F&&b.v==0&&!b.C&&(b.C=Mh(p(b.Za,b),6e3));if(1>=T1(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Aa(b,11)}else if((d.K||b.g==d)&&km(b),!E(_))for(G=b.Da.g.parse(_),_=0;_<G.length;_++){let De=G[_];if(b.T=De[0],De=De[1],b.G==2)if(De[0]=="c"){b.K=De[1],b.ia=De[2];const cn=De[3];cn!=null&&(b.la=cn,b.j.info("VER="+b.la));const un=De[4];un!=null&&(b.Aa=un,b.j.info("SVER="+b.Aa));const dc=De[5];dc!=null&&typeof dc=="number"&&0<dc&&(N=1.5*dc,b.L=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const jr=d.g;if(jr){const Mm=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mm){var q=N.h;q.g||Mm.indexOf("spdy")==-1&&Mm.indexOf("quic")==-1&&Mm.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(q_(q,q.h),q.h=null))}if(N.D){const J_=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;J_&&(N.ya=J_,et(N.I,N.D,J_))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),N=b;var Q=d;if(N.qa=Q1(N,N.J?N.ia:null,N.W),Q.K){C1(N.h,Q);var Ge=Q,qt=N.L;qt&&(Ge.I=qt),Ge.B&&(H_(Ge),Am(Ge)),N.g=Q}else G1(N);0<b.i.length&&Im(b)}else De[0]!="stop"&&De[0]!="close"||Aa(b,7);else b.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Aa(b,7):X_(b):De[0]!="noop"&&b.l&&b.l.ta(De),b.v=0)}}Lh(4)}catch{}}var eO=class{constructor(d,_){this.g=d,this.map=_}};function b1(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function S1(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function T1(d){return d.h?1:d.g?d.g.size:0}function G_(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function q_(d,_){d.g?d.g.add(_):d.h=_}function C1(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}b1.prototype.cancel=function(){if(this.i=x1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function x1(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const b of d.g.values())_=_.concat(b.D);return _}return y(d.i)}function tO(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var _=[],b=d.length,N=0;N<b;N++)_.push(d[N]);return _}_=[],b=0;for(N in d)_[b++]=d[N];return _}function nO(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var _=[];d=d.length;for(var b=0;b<d;b++)_.push(b);return _}_=[],b=0;for(const N in d)_[b++]=N;return _}}}function R1(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var b=nO(d),N=tO(d),G=N.length,q=0;q<G;q++)_.call(void 0,N[q],b&&b[q],d)}var P1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rO(d,_){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var N=d[b].indexOf("="),G=null;if(0<=N){var q=d[b].substring(0,N);G=d[b].substring(N+1)}else q=d[b];_(q,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ea(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ea){this.h=d.h,bm(this,d.j),this.o=d.o,this.g=d.g,Sm(this,d.s),this.l=d.l;var _=d.i,b=new Vh;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),I1(this,b),this.m=d.m}else d&&(_=String(d).match(P1))?(this.h=!1,bm(this,_[1]||"",!0),this.o=Oh(_[2]||""),this.g=Oh(_[3]||"",!0),Sm(this,_[4]),this.l=Oh(_[5]||"",!0),I1(this,_[6]||"",!0),this.m=Oh(_[7]||"")):(this.h=!1,this.i=new Vh(null,this.h))}Ea.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Fh(_,k1,!0),":");var b=this.g;return(b||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Fh(_,k1,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Fh(b,b.charAt(0)=="/"?oO:iO,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Fh(b,lO)),d.join("")};function Js(d){return new Ea(d)}function bm(d,_,b){d.j=b?Oh(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Sm(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function I1(d,_,b){_ instanceof Vh?(d.i=_,cO(d.i,d.h)):(b||(_=Fh(_,aO)),d.i=new Vh(_,d.h))}function et(d,_,b){d.i.set(_,b)}function Tm(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Oh(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Fh(d,_,b){return typeof d=="string"?(d=encodeURI(d).replace(_,sO),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function sO(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var k1=/[#\/\?@]/g,iO=/[#\?:]/g,oO=/[#\?]/g,aO=/[#\?@]/g,lO=/#/g;function Vh(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function eo(d){d.g||(d.g=new Map,d.h=0,d.i&&rO(d.i,function(_,b){d.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=Vh.prototype,n.add=function(d,_){eo(this),this.i=null,d=uc(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(_),this.h+=1,this};function L1(d,_){eo(d),_=uc(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function M1(d,_){return eo(d),_=uc(d,_),d.g.has(_)}n.forEach=function(d,_){eo(this),this.g.forEach(function(b,N){b.forEach(function(G){d.call(_,G,N,this)},this)},this)},n.na=function(){eo(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let N=0;N<_.length;N++){const G=d[N];for(let q=0;q<G.length;q++)b.push(_[N])}return b},n.V=function(d){eo(this);let _=[];if(typeof d=="string")M1(this,d)&&(_=_.concat(this.g.get(uc(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)_=_.concat(d[b])}return _},n.set=function(d,_){return eo(this),this.i=null,d=uc(this,d),M1(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function N1(d,_,b){L1(d,_),0<b.length&&(d.i=null,d.g.set(uc(d,_),y(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var N=_[b];const q=encodeURIComponent(String(N)),Q=this.V(N);for(N=0;N<Q.length;N++){var G=q;Q[N]!==""&&(G+="="+encodeURIComponent(String(Q[N]))),d.push(G)}}return this.i=d.join("&")};function uc(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function cO(d,_){_&&!d.j&&(eo(d),d.i=null,d.g.forEach(function(b,N){var G=N.toLowerCase();N!=G&&(L1(this,N),N1(this,G,b))},d)),d.j=_}function uO(d,_){const b=new Nh;if(a.Image){const N=new Image;N.onload=m(to,b,"TestLoadImage: loaded",!0,_,N),N.onerror=m(to,b,"TestLoadImage: error",!1,_,N),N.onabort=m(to,b,"TestLoadImage: abort",!1,_,N),N.ontimeout=m(to,b,"TestLoadImage: timeout",!1,_,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else _(!1)}function hO(d,_){const b=new Nh,N=new AbortController,G=setTimeout(()=>{N.abort(),to(b,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:N.signal}).then(q=>{clearTimeout(G),q.ok?to(b,"TestPingServer: ok",!0,_):to(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),to(b,"TestPingServer: error",!1,_)})}function to(d,_,b,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(b)}catch{}}function dO(){this.g=new K2}function fO(d,_,b){const N=b||"";try{R1(d,function(G,q){let Q=G;c(G)&&(Q=F_(G)),_.push(N+q+"="+encodeURIComponent(Q))})}catch(G){throw _.push(N+"type="+encodeURIComponent("_badmap")),G}}function Cm(d){this.l=d.Ub||null,this.j=d.eb||!1}g(Cm,V_),Cm.prototype.g=function(){return new xm(this.l,this.j)},Cm.prototype.i=function(d){return function(){return d}}({});function xm(d,_){Bt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(xm,Bt),n=xm.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Bh(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jh(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Bh(this)),this.g&&(this.readyState=3,Bh(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;D1(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function D1(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?jh(this):Bh(this),this.readyState==3&&D1(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,jh(this))},n.Qa=function(d){this.g&&(this.response=d,jh(this))},n.ga=function(){this.g&&jh(this)};function jh(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Bh(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=_.next();return d.join(`\r
`)};function Bh(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(xm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function O1(d){let _="";return j(d,function(b,N){_+=N,_+=":",_+=b,_+=`\r
`}),_}function K_(d,_,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=O1(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):et(d,_,b))}function ft(d){Bt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(ft,Bt);var pO=/^https?$/i,mO=["POST","PUT"];n=ft.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():U_.g(),this.v=this.o?h1(this.o):h1(U_),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(q){F1(this,q);return}if(d=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)b.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const q of N.keys())b.set(q,N.get(q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(q=>q.toLowerCase()=="content-type"),G=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(mO,_,void 0))||N||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,Q]of b)this.g.setRequestHeader(q,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{B1(this),this.u=!0,this.g.send(d),this.u=!1}catch(q){F1(this,q)}};function F1(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,V1(d),Rm(d)}function V1(d){d.A||(d.A=!0,dt(d,"complete"),dt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,dt(this,"complete"),dt(this,"abort"),Rm(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rm(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?j1(this):this.bb())},n.bb=function(){j1(this)};function j1(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Zs(d)!=4||d.Z()!=2)){if(d.u&&Zs(d)==4)ya(d.Ea,0,d);else if(dt(d,"readystatechange"),Zs(d)==4){d.h=!1;try{const Q=d.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var N;if(N=Q===0){var G=String(d.D).match(P1)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),N=!pO.test(G?G.toLowerCase():"")}b=N}if(b)dt(d,"complete"),dt(d,"success");else{d.m=6;try{var q=2<Zs(d)?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.Z()+"]",V1(d)}}finally{Rm(d)}}}}function Rm(d,_){if(d.g){B1(d);const b=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||dt(d,"ready");try{b.onreadystatechange=N}catch{}}}function B1(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Zs(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Zs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),q2(_)}};function U1(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function gO(d){const _={};d=(d.g&&2<=Zs(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(E(d[N]))continue;var b=F(d[N]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const q=_[G]||[];_[G]=q,q.push(b)}C(_,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uh(d,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||_}function $1(d){this.Aa=0,this.i=[],this.j=new Nh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uh("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uh("baseRetryDelayMs",5e3,d),this.cb=Uh("retryDelaySeedMs",1e4,d),this.Wa=Uh("forwardChannelMaxRetries",2,d),this.wa=Uh("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new b1(d&&d.concurrentRequestLimit),this.Da=new dO,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$1.prototype,n.la=8,n.G=1,n.connect=function(d,_,b,N){Tn(0),this.W=d,this.H=_||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.I=Q1(this,null,this.W),Im(this)};function X_(d){if(z1(d),d.G==3){var _=d.U++,b=Js(d.I);if(et(b,"SID",d.K),et(b,"RID",_),et(b,"TYPE","terminate"),$h(d,b),_=new Zi(d,d.j,_),_.L=2,_.v=Tm(Js(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=_.v,b=!0),b||(_.g=J1(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Am(_)}Y1(d)}function Pm(d){d.g&&(Q_(d),d.g.cancel(),d.g=null)}function z1(d){Pm(d),d.u&&(a.clearTimeout(d.u),d.u=null),km(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Im(d){if(!S1(d.h)&&!d.s){d.s=!0;var _=d.Ga;U||X(),B||(U(),B=!0),H.add(_,d),d.B=0}}function vO(d,_){return T1(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Mh(p(d.Ga,d,_),X1(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new Zi(this,this.j,d);let q=this.o;if(this.S&&(q?(q=T(q),M(q,this.S)):q=this.S),this.m!==null||this.O||(G.H=q,q=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(_+=N,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=W1(this,G,_),b=Js(this.I),et(b,"RID",d),et(b,"CVER",22),this.D&&et(b,"X-HTTP-Session-Id",this.D),$h(this,b),q&&(this.O?_="headers="+encodeURIComponent(String(O1(q)))+"&"+_:this.m&&K_(b,this.m,q)),q_(this.h,G),this.Ua&&et(b,"TYPE","init"),this.P?(et(b,"$req",_),et(b,"SID","null"),G.T=!0,z_(G,b,null)):z_(G,b,_),this.G=2}}else this.G==3&&(d?H1(this,d):this.i.length==0||S1(this.h)||H1(this))};function H1(d,_){var b;_?b=_.l:b=d.U++;const N=Js(d.I);et(N,"SID",d.K),et(N,"RID",b),et(N,"AID",d.T),$h(d,N),d.m&&d.o&&K_(N,d.m,d.o),b=new Zi(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),_&&(d.i=_.D.concat(d.i)),_=W1(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),q_(d.h,b),z_(b,N,_)}function $h(d,_){d.H&&j(d.H,function(b,N){et(_,N,b)}),d.l&&R1({},function(b,N){et(_,N,b)})}function W1(d,_,b){b=Math.min(d.i.length,b);var N=d.l?p(d.l.Na,d.l,d):null;e:{var G=d.i;let q=-1;for(;;){const Q=["count="+b];q==-1?0<b?(q=G[0].g,Q.push("ofs="+q)):q=0:Q.push("ofs="+q);let Ge=!0;for(let qt=0;qt<b;qt++){let De=G[qt].g;const cn=G[qt].map;if(De-=q,0>De)q=Math.max(0,G[qt].g-100),Ge=!1;else try{fO(cn,Q,"req"+De+"_")}catch{N&&N(cn)}}if(Ge){N=Q.join("&");break e}}}return d=d.i.splice(0,b),_.D=d,N}function G1(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;U||X(),B||(U(),B=!0),H.add(_,d),d.v=0}}function Y_(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Mh(p(d.Fa,d),X1(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,q1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Mh(p(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tn(10),Pm(this),q1(this))};function Q_(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function q1(d){d.g=new Zi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Js(d.qa);et(_,"RID","rpc"),et(_,"SID",d.K),et(_,"AID",d.T),et(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(_,"TO",d.ja),et(_,"TYPE","xmlhttp"),$h(d,_),d.m&&d.o&&K_(_,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Tm(Js(_)),b.m=null,b.P=!0,w1(b,d)}n.Za=function(){this.C!=null&&(this.C=null,Pm(this),Y_(this),Tn(19))};function km(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function K1(d,_){var b=null;if(d.g==_){km(d),Q_(d),d.g=null;var N=2}else if(G_(d.h,_))b=_.D,C1(d.h,_),N=1;else return;if(d.G!=0){if(_.o)if(N==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var G=d.B;N=_m(),dt(N,new g1(N,b)),Im(d)}else G1(d);else if(G=_.s,G==3||G==0&&0<_.X||!(N==1&&vO(d,_)||N==2&&Y_(d)))switch(b&&0<b.length&&(_=d.h,_.i=_.i.concat(b)),G){case 1:Aa(d,5);break;case 4:Aa(d,10);break;case 3:Aa(d,6);break;default:Aa(d,2)}}}function X1(d,_){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*_}function Aa(d,_){if(d.j.info("Error code "+_),_==2){var b=p(d.fb,d),N=d.Xa;const G=!N;N=new Ea(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bm(N,"https"),Tm(N),G?uO(N.toString(),b):hO(N.toString(),b)}else Tn(2);d.G=0,d.l&&d.l.sa(_),Y1(d),z1(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))};function Y1(d){if(d.G=0,d.ka=[],d.l){const _=x1(d.h);(_.length!=0||d.i.length!=0)&&(w(d.ka,_),w(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function Q1(d,_,b){var N=b instanceof Ea?Js(b):new Ea(b);if(N.g!="")_&&(N.g=_+"."+N.g),Sm(N,N.s);else{var G=a.location;N=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;var q=new Ea(null);N&&bm(q,N),_&&(q.g=_),G&&Sm(q,G),b&&(q.l=b),N=q}return b=d.D,_=d.ya,b&&_&&et(N,b,_),et(N,"VER",d.la),$h(d,N),N}function J1(d,_,b){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new ft(new Cm({eb:b})):new ft(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Z1(){}n=Z1.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lm(){}Lm.prototype.g=function(d,_){return new er(d,_)};function er(d,_){Bt.call(this),this.g=new $1(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!E(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!E(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new hc(this)}g(er,Bt),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){X_(this.g)},er.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=F_(d),d=b);_.i.push(new eO(_.Ya++,d)),_.G==3&&Im(_)},er.prototype.N=function(){this.g.l=null,delete this.j,X_(this.g),delete this.g,er.aa.N.call(this)};function eT(d){j_.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const b in _){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}g(eT,j_);function tT(){B_.call(this),this.status=1}g(tT,B_);function hc(d){this.g=d}g(hc,Z1),hc.prototype.ua=function(){dt(this.g,"a")},hc.prototype.ta=function(d){dt(this.g,new eT(d))},hc.prototype.sa=function(d){dt(this.g,new tT)},hc.prototype.ra=function(){dt(this.g,"b")},Lm.prototype.createWebChannel=Lm.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,rD=function(){return new Lm},nD=function(){return _m()},tD=_a,MA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wm.NO_ERROR=0,wm.TIMEOUT=8,wm.HTTP_ERROR=6,ov=wm,v1.COMPLETE="complete",eD=v1,d1.EventType=kh,kh.OPEN="a",kh.CLOSE="b",kh.ERROR="c",kh.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,Ad=d1,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,ZN=ft}).apply(typeof ag<"u"?ag:typeof self<"u"?self:typeof window<"u"?window:{});const xx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new zN("@firebase/firestore");function Sc(){return Yl.logLevel}function se(n,...e){if(Yl.logLevel<=Re.DEBUG){const t=e.map(kS);Yl.debug(`Firestore (${Ah}): ${n}`,...t)}}function Ki(n,...e){if(Yl.logLevel<=Re.ERROR){const t=e.map(kS);Yl.error(`Firestore (${Ah}): ${n}`,...t)}}function ch(n,...e){if(Yl.logLevel<=Re.WARN){const t=e.map(kS);Yl.warn(`Firestore (${Ah}): ${n}`,...t)}}function kS(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n="Unexpected state"){const e=`FIRESTORE (${Ah}) INTERNAL ASSERTION FAILED: `+n;throw Ki(e),new Error(e)}function ct(n,e){n||ye()}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ic{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}}class B9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class U9{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new Vl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vl,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new sD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new yn(e)}}class $9{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class z9{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $9(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ct(this.o===void 0);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct(typeof t.token=="string"),this.R=t.token,new H9(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=G9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%e.length))}return r}}function Pe(n,e){return n<e?-1:n>e?1:0}function uh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Yn(0,0))}static max(){return new ge(new Yn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(),r===void 0?r=e.length-t:r>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return pf.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=e.get(s),o=t.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gt extends pf{construct(e,t,r){return new gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new gt(t)}static emptyPath(){return new gt([])}}const K9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends pf{construct(e,t,r){return new kn(e,t,r)}static isValidIdentifier(e){return K9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ue(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ue(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ue(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(t)}static emptyPath(){return new kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(gt.fromString(e))}static fromName(e){return new de(gt.fromString(e).popFirst(5))}static empty(){return new de(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new gt(e.slice()))}}function X9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new Yn(t+1,0):new Yn(t,r));return new sa(s,de.empty(),e)}function Y9(n){return new sa(n.readTime,n.key,-1)}class sa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sa(ge.min(),de.empty(),-1)}static max(){return new sa(ge.max(),de.empty(),-1)}}function Q9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==J9)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,r)=>{t(e)})}static reject(e){return new K((t,r)=>{r(e)})}static waitFor(e){return new K((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},l=>r(l))}),o=!0,i===s&&t()})}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next(s=>s?K.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new K((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,t){return new K((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}function eH(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function bh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}w_.oe=-1;function E_(n){return n==null}function NA(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Rx(e)),e=nH(n.get(t),e);return Rx(e)}function nH(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case"":t+="";break;default:t+=i}}return t}function Rx(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lg(this.root,e,this.comparator,!1)}getReverseIterator(){return new lg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lg(this.root,e,this.comparator,!0)}}class lg{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??rn.RED,this.left=s??rn.EMPTY,this.right=i??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new rn(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return rn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,r,s,i){return this}insert(e,t,r){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ix(this.data.getIterator())}getIteratorFrom(e){return new Ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class Ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Vo([])}unionWith(e){let t=new jt(kn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iD("Invalid base64 string: "+i):i}}(e);return new ln(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const sH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(n){if(ct(!!n),typeof n=="string"){let e=0;const t=sH.exec(n);if(ct(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function A_(n){const e=n.mapValue.fields.__previous_value__;return LS(e)?A_(e):e}function mf(n){const e=ia(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e,t,r,s,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class gf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LS(n)?4:aH(n)?9007199254740991:oH(n)?10:11:ye()}function Hs(n,e){if(n===e)return!0;const t=aa(n);if(t!==aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mf(n).isEqual(mf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ia(s.timestampValue),a=ia(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return oa(s.bytesValue).isEqual(oa(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return _t(s.geoPointValue.latitude)===_t(i.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return _t(s.integerValue)===_t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=_t(s.doubleValue),a=_t(i.doubleValue);return o===a?NA(o)===NA(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return uh(n.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Px(o)!==Px(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Hs(o[l],a[l])))return!1;return!0}(n,e);default:return ye()}}function vf(n,e){return(n.values||[]).find(t=>Hs(t,e))!==void 0}function hh(n,e){if(n===e)return 0;const t=aa(n),r=aa(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=_t(i.integerValue||i.doubleValue),l=_t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return kx(n.timestampValue,e.timestampValue);case 4:return kx(mf(n),mf(e));case 5:return Pe(n.stringValue,e.stringValue);case 6:return function(i,o){const a=oa(i),l=oa(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Pe(a[c],l[c]);if(u!==0)return u}return Pe(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Pe(_t(i.latitude),_t(o.latitude));return a!==0?a:Pe(_t(i.longitude),_t(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Lx(n.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const f=i.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,g=(l=p.value)===null||l===void 0?void 0:l.arrayValue,y=Pe(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:Lx(m,g)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===cg.mapValue&&o===cg.mapValue)return 0;if(i===cg.mapValue)return 1;if(o===cg.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=Pe(l[f],u[f]);if(p!==0)return p;const m=hh(a[l[f]],c[u[f]]);if(m!==0)return m}return Pe(l.length,u.length)}(n.mapValue,e.mapValue);default:throw ye()}}function kx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=ia(n),r=ia(e),s=Pe(t.seconds,r.seconds);return s!==0?s:Pe(t.nanos,r.nanos)}function Lx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=hh(t[s],r[s]);if(i)return i}return Pe(t.length,r.length)}function dh(n){return DA(n)}function DA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ia(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return oa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return de.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=DA(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${DA(t.fields[o])}`;return s+"}"}(n.mapValue):ye()}function av(n){switch(aa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=A_(n);return e?16+av(e):16;case 5:return 2*n.stringValue.length;case 6:return oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+av(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return dm(r.fields,(i,o)=>{s+=i.length+av(o)}),s}(n.mapValue);default:throw ye()}}function OA(n){return!!n&&"integerValue"in n}function MS(n){return!!n&&"arrayValue"in n}function Mx(n){return!!n&&"nullValue"in n}function Nx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function q0(n){return!!n&&"mapValue"in n}function oH(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Vd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aH(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.value=e}static empty(){return new Ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!q0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vd(t)}setAll(e){let t=kn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=Vd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());q0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];q0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){dm(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ds(Vd(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wn(e,0,ge.min(),ge.min(),ge.min(),Ds.empty(),0)}static newFoundDocument(e,t,r,s){return new wn(e,1,t,ge.min(),r,s,0)}static newNoDocument(e,t){return new wn(e,2,t,ge.min(),ge.min(),Ds.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,ge.min(),ge.min(),Ds.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t){this.position=e,this.inclusive=t}}function Dx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),t.key):r=hh(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ox(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t="asc"){this.field=e,this.dir=t}}function lH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{}class Ot extends oD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new uH(e,t,r):t==="array-contains"?new fH(e,r):t==="in"?new pH(e,r):t==="not-in"?new mH(e,r):t==="array-contains-any"?new gH(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hH(e,r):new dH(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(hh(t,this.value)):t!==null&&aa(this.value)===aa(t)&&this.matchesComparison(hh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ws extends oD{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ws(e,t)}matches(e){return aD(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aD(n){return n.op==="and"}function lD(n){return cH(n)&&aD(n)}function cH(n){for(const e of n.filters)if(e instanceof Ws)return!1;return!0}function FA(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+dh(n.value);if(lD(n))return n.filters.map(e=>FA(e)).join(",");{const e=n.filters.map(t=>FA(t)).join(",");return`${n.op}(${e})`}}function cD(n,e){return n instanceof Ot?function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&Hs(r.value,s.value)}(n,e):n instanceof Ws?function(r,s){return s instanceof Ws&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&cD(o,s.filters[a]),!0):!1}(n,e):void ye()}function uD(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${dh(t.value)}`}(n):n instanceof Ws?function(t){return t.op.toString()+" {"+t.getFilters().map(uD).join(" ,")+"}"}(n):"Filter"}class uH extends Ot{constructor(e,t,r){super(e,t,r),this.key=de.fromName(r.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class hH extends Ot{constructor(e,t){super(e,"in",t),this.keys=hD("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dH extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=hD("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hD(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>de.fromName(r.referenceValue))}class fH extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return MS(t)&&vf(t.arrayValue,this.value)}}class pH extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vf(this.value.arrayValue,t)}}class mH extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(vf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!vf(this.value.arrayValue,t)}}class gH extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!MS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Fx(n,e=null,t=[],r=[],s=null,i=null,o=null){return new vH(n,e,t,r,s,i,o)}function NS(n){const e=Ie(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>FA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),E_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dh(r)).join(",")),e.ue=t}return e.ue}function DS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ox(n.startAt,e.startAt)&&Ox(n.endAt,e.endAt)}function VA(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yH(n,e,t,r,s,i,o,a){return new b_(n,e,t,r,s,i,o,a)}function dD(n){return new b_(n)}function Vx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _H(n){return n.collectionGroup!==null}function jd(n){const e=Ie(n);if(e.ce===null){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(kn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ey(i,r))}),t.has(kn.keyField().canonicalString())||e.ce.push(new ey(kn.keyField(),r))}return e.ce}function Vs(n){const e=Ie(n);return e.le||(e.le=wH(e,jd(n))),e.le}function wH(n,e){if(n.limitType==="F")return Fx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ey(s.field,i)});const t=n.endAt?new Zv(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Zv(n.startAt.position,n.startAt.inclusive):null;return Fx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jA(n,e,t){return new b_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function S_(n,e){return DS(Vs(n),Vs(e))&&n.limitType===e.limitType}function fD(n){return`${NS(Vs(n))}|lt:${n.limitType}`}function Tc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>uD(s)).join(", ")}]`),E_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>dh(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>dh(s)).join(",")),`Target(${r})`}(Vs(n))}; limitType=${n.limitType})`}function T_(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):de.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of jd(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Dx(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,jd(r),s)||r.endAt&&!function(o,a,l){const c=Dx(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,jd(r),s))}(n,e)}function EH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pD(n){return(e,t)=>{let r=!1;for(const s of jd(n)){const i=AH(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function AH(n,e,t){const r=n.field.isKeyField()?de.comparator(e.key,t.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?hh(l,c):ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){dm(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return rH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH=new At(de.comparator);function la(){return bH}const mD=new At(de.comparator);function bd(...n){let e=mD;for(const t of n)e=e.insert(t.key,t);return e}function SH(n){let e=mD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Va(){return Bd()}function gD(){return Bd()}function Bd(){return new oc(n=>n.toString(),(n,e)=>n.isEqual(e))}const TH=new jt(de.comparator);function Me(...n){let e=TH;for(const t of n)e=e.add(t);return e}const CH=new jt(Pe);function xH(){return CH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RH(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:NA(e)?"-0":e}}function PH(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this._=void 0}}function IH(n,e,t){return n instanceof BA?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&LS(i)&&(i=A_(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof ty?vD(n,e):n instanceof ny?yD(n,e):function(s,i){const o=LH(s,i),a=jx(o)+jx(s.Pe);return OA(o)&&OA(s.Pe)?PH(a):RH(s.serializer,a)}(n,e)}function kH(n,e,t){return n instanceof ty?vD(n,e):n instanceof ny?yD(n,e):t}function LH(n,e){return n instanceof UA?function(r){return OA(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class BA extends C_{}class ty extends C_{constructor(e){super(),this.elements=e}}function vD(n,e){const t=_D(e);for(const r of n.elements)t.some(s=>Hs(s,r))||t.push(r);return{arrayValue:{values:t}}}class ny extends C_{constructor(e){super(),this.elements=e}}function yD(n,e){let t=_D(e);for(const r of n.elements)t=t.filter(s=>!Hs(s,r));return{arrayValue:{values:t}}}class UA extends C_{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function jx(n){return _t(n.integerValue||n.doubleValue)}function _D(n){return MS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function MH(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof ty&&s instanceof ty||r instanceof ny&&s instanceof ny?uh(r.elements,s.elements,Hs):r instanceof UA&&s instanceof UA?Hs(r.Pe,s.Pe):r instanceof BA&&s instanceof BA}(n.transform,e.transform)}class jl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jl}static exists(e){return new jl(void 0,e)}static updateTime(e){return new jl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class OS{}function wD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new DH(n.key,jl.none()):new FS(n.key,n.data,jl.none());{const t=n.data,r=Ds.empty();let s=new jt(kn.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new x_(n.key,r,new Vo(s.toArray()),jl.none())}}function NH(n,e,t){n instanceof FS?function(s,i,o){const a=s.value.clone(),l=Ux(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof x_?function(s,i,o){if(!lv(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ux(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(ED(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ud(n,e,t,r){return n instanceof FS?function(i,o,a,l){if(!lv(i.precondition,o))return a;const c=i.value.clone(),u=$x(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof x_?function(i,o,a,l){if(!lv(i.precondition,o))return a;const c=$x(i.fieldTransforms,l,o),u=o.data;return u.setAll(ED(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(i,o,a){return lv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Bx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&uh(r,s,(i,o)=>MH(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class FS extends OS{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class x_ extends OS{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ED(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ux(n,e,t){const r=new Map;ct(n.length===t.length);for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,kH(o,a,t[s]))}return r}function $x(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,IH(i,o,e))}return r}class DH extends OS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&NH(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ud(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ud(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gD();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const l=wD(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&uh(this.mutations,e.mutations,(t,r)=>Bx(t,r))&&uh(this.baseMutations,e.baseMutations,(t,r)=>Bx(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Ce;function AD(n){if(n===void 0)return Ki("GRPC error has no .code"),Z.UNKNOWN;switch(n){case St.OK:return Z.OK;case St.CANCELLED:return Z.CANCELLED;case St.UNKNOWN:return Z.UNKNOWN;case St.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case St.INTERNAL:return Z.INTERNAL;case St.UNAVAILABLE:return Z.UNAVAILABLE;case St.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case St.NOT_FOUND:return Z.NOT_FOUND;case St.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case St.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case St.ABORTED:return Z.ABORTED;case St.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case St.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case St.DATA_LOSS:return Z.DATA_LOSS;default:return ye()}}(Ce=St||(St={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH=new Fl([4294967295,4294967295],0);function zx(n){const e=jH().encode(n),t=new JN;return t.update(e),new Uint8Array(t.digest())}function Hx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Fl([t,r],0),new Fl([s,i],0)]}class VS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Sd(`Invalid padding: ${t}`);if(r<0)throw new Sd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Sd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Sd(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Fl.fromNumber(this.Te)}Ee(e,t,r){let s=e.add(t.multiply(Fl.fromNumber(r)));return s.compare(BH)===1&&(s=new Fl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=zx(e),[r,s]=Hx(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new VS(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=zx(e),[r,s]=Hx(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Sd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,fm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new R_(ge.min(),s,new At(Pe),la(),Me())}}class fm{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new fm(r,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class bD{constructor(e,t){this.targetId=e,this.me=t}}class SD{constructor(e,t,r=ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Wx{constructor(){this.fe=0,this.ge=Gx(),this.pe=ln.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),t=Me(),r=Me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ye()}}),new fm(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Gx()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class UH{constructor(e){this.Le=e,this.Be=new Map,this.ke=la(),this.qe=ug(),this.Qe=ug(),this.Ke=new At(Pe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.me.count,s=this.Ye(t);if(s){const i=s.target;if(VA(i))if(r===0){const o=new de(i.path);this.We(t,o,wn.newNoDocument(o,ge.min()))}else ct(r===1);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=oa(r).toUint8Array()}catch(l){if(l instanceof iD)return ch("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new VS(o,s,i)}catch(l){return ch(l instanceof Sd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(t,i,null),s++)}),s}it(e){const t=new Map;this.Be.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&VA(a.target)){const l=new de(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,wn.newNoDocument(l,e))}i.be&&(t.set(o,i.ve()),i.Ce())}});let r=Me();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new R_(e,t,this.Ke,this.ke,r);return this.ke=la(),this.qe=ug(),this.Qe=ug(),this.Ke=new At(Pe),s}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Wx,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new jt(Pe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new jt(Pe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Wx),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ug(){return new At(de.comparator)}function Gx(){return new At(de.comparator)}const $H={asc:"ASCENDING",desc:"DESCENDING"},zH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HH={and:"AND",or:"OR"};class WH{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $A(n,e){return n.useProto3Json||E_(e)?e:{value:e}}function GH(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qH(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Jc(n){return ct(!!n),ge.fromTimestamp(function(t){const r=ia(t);return new Yn(r.seconds,r.nanos)}(n))}function KH(n,e){return zA(n,e).canonicalString()}function zA(n,e){const t=function(s){return new gt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TD(n){const e=gt.fromString(n);return ct(ID(e)),e}function K0(n,e){const t=TD(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(xD(t))}function CD(n,e){return KH(n.databaseId,e)}function XH(n){const e=TD(n);return e.length===4?gt.emptyPath():xD(e)}function qx(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xD(n){return ct(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function YH(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ct(u===void 0||typeof u=="string"),ln.fromBase64String(u||"")):(ct(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ln.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Z.UNKNOWN:AD(c.code);return new ue(u,c.message||"")}(o);t=new SD(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=K0(n,r.document.name),i=Jc(r.document.updateTime),o=r.document.createTime?Jc(r.document.createTime):ge.min(),a=new Ds({mapValue:{fields:r.document.fields}}),l=wn.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new cv(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=K0(n,r.document),i=r.readTime?Jc(r.readTime):ge.min(),o=wn.newNoDocument(s,i),a=r.removedTargetIds||[];t=new cv([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=K0(n,r.document),i=r.removedTargetIds||[];t=new cv([],i,s,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new VH(s,i),a=r.targetId;t=new bD(a,o)}}return t}function QH(n,e){return{documents:[CD(n,e.path)]}}function JH(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CD(n,s);const i=function(c){if(c.length!==0)return PD(Ws.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Cc(p.field),direction:tW(p.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=$A(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:t,parent:s}}function ZH(n){let e=XH(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ct(r===1);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];t.where&&(i=function(f){const p=RD(f);return p instanceof Ws&&lD(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(p=>function(g){return new ey(xc(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,E_(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Zv(m,p)}(t.startAt));let c=null;return t.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Zv(m,p)}(t.endAt)),yH(e,s,o,i,a,"F",l,c)}function eW(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RD(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xc(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xc(t.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xc(t.unaryFilter.field);return Ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xc(t.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(xc(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ws.create(t.compositeFilter.filters.map(r=>RD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(n):ye()}function tW(n){return $H[n]}function nW(n){return zH[n]}function rW(n){return HH[n]}function Cc(n){return{fieldPath:n.canonicalString()}}function xc(n){return kn.fromServerFormat(n.fieldPath)}function PD(n){return n instanceof Ot?function(t){if(t.op==="=="){if(Nx(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NAN"}};if(Mx(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nx(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NOT_NAN"}};if(Mx(t.value))return{unaryFilter:{field:Cc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cc(t.field),op:nW(t.op),value:t.value}}}(n):n instanceof Ws?function(t){const r=t.getFilters().map(s=>PD(s));return r.length===1?r[0]:{compositeFilter:{op:rW(t.op),filters:r}}}(n):ye()}function ID(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,r,s,i=ge.min(),o=ge.min(),a=ln.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e){this.ht=e}}function iW(n){const e=ZH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jA(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(){this.ln=new aW}addToCollectionParentIndex(e,t){return this.ln.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(sa.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class aW{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new jt(gt.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(41943040,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new fh(0)}static Qn(){return new fh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx([n,e],[t,r]){const s=Pe(n,t);return s===0?Pe(e,r):s}class lW{constructor(e){this.Gn=e,this.buffer=new jt(Xx),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Xx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cW{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bh(t)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await __(t)}await this.Yn(3e5)})}}class uW{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(w_.oe);const r=new lW(t);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Kx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kx):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Sc()<=Re.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function hW(n,e){return new uW(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(){this.changes=new oc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Ud(r.mutation,s,Vo.empty(),Yn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){const s=Va();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=bd();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Va();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=la();const o=Bd(),a=function(){return Bd()}();return t.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof x_)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Ud(u.mutation,c,u.mutation.getFieldMask(),Yn.now())):o.set(c.key,Vo.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var f;return a.set(c,new fW(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Bd();let s=new At((o,a)=>o-a),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Vo.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||Me()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=gD();u.forEach(p=>{if(!i.has(p)){const m=wD(t.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_H(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):K.resolve(Va());let a=-1,l=i;return o.next(c=>K.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?K.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Me())).next(u=>({batchId:a,changes:SH(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(r=>{let s=bd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=bd();return this.indexManager.getCollectionParents(e,i).next(a=>K.forEach(a,l=>{const c=function(f,p){return new b_(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,wn.newInvalidDocument(u)))});let a=bd();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Ud(u.mutation,c,Vo.empty(),Yn.now()),T_(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return K.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Jc(s.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:iW(s.bundledQuery),readTime:Jc(s.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(){this.overlays=new At(de.comparator),this.Er=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Va();return K.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.Tt(e,t,i)}),K.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Er.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Er.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const s=Va(),i=t.length+1,o=new de(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return K.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new At((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Va(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Va(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return K.resolve(a)}Tt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Er.get(s.largestBatchId).delete(r.key);this.Er.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FH(t,r));let i=this.Er.get(t);i===void 0&&(i=Me(),this.Er.set(t,i)),this.Er.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.dr=new jt(Ht.Ar),this.Rr=new jt(Ht.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Ht(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new de(new gt([])),r=new Ht(t,e),s=new Ht(t,e+1),i=[];return this.Rr.forEachInRange([r,s],o=>{this.gr(o),i.push(o.key)}),i}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new de(new gt([])),r=new Ht(t,e),s=new Ht(t,e+1);let i=Me();return this.Rr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new Ht(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return de.comparator(e.key,t.key)||Pe(e.br,t.br)}static Vr(e,t){return Pe(e.br,t.br)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new jt(Ht.Ar)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OH(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.vr=this.vr.add(new Ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,t){return K.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Fr(r),i=s<0?0:s;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),s=new Ht(t,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([r,s],o=>{const a=this.Cr(o.br);i.push(a)}),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Pe);return t.forEach(s=>{const i=new Ht(s,0),o=new Ht(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([i,o],a=>{r=r.add(a.br)})}),K.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;de.isDocumentKey(i)||(i=i.child(""));const o=new Ht(new de(i),0);let a=new jt(Pe);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.br)),!0)},o),K.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ct(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return K.forEach(t.mutations,s=>{const i=new Ht(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Ht(t,0),s=this.vr.firstAfterOrEqual(r);return K.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(e){this.Nr=e,this.docs=function(){return new At(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=la();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wn.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=la();const o=t.path,a=new de(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Q9(Y9(u),r)<=0||(s.has(u.key)||T_(t,u))&&(i=i.insert(u.key,u.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ye()}Lr(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wW(this)}getSize(e){return K.resolve(this.size)}}class wW extends dW{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(e){this.persistence=e,this.Br=new oc(t=>NS(t),DS),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.kr=0,this.qr=new jS,this.targetCount=0,this.Qr=fh.qn()}forEachTarget(e,t){return this.Br.forEach((r,s)=>t(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),K.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new fh(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Un(t),K.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Br.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),K.waitFor(i).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),K.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t){this.Kr={},this.overlays={},this.$r=new w_(0),this.Ur=!1,this.Ur=!0,this.Wr=new vW,this.referenceDelegate=e(this),this.Gr=new EW(this),this.indexManager=new oW,this.remoteDocumentCache=function(s){return new _W(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new sW(t),this.jr=new mW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new yW(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const s=new AW(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(i=>this.referenceDelegate.Jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Yr(e,t){return K.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class AW extends Z9{constructor(e){super(),this.currentSequenceNumber=e}}class BS{constructor(e){this.persistence=e,this.Zr=new jS,this.Xr=null}static ei(e){return new BS(e)}get ti(){if(this.Xr)return this.Xr;throw ye()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),K.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.ti.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.ti,r=>{const s=de.fromPath(r);return this.ni(e,s).next(i=>{i||t.removeEntry(s,ge.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return K.or([()=>K.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class ry{constructor(e,t){this.persistence=e,this.ri=new oc(r=>tH(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=hW(this,t)}static ei(e,t){return new ry(e,t)}Hr(){}Jr(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return K.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(i=>i?K.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(r++,i.removeEntry(o,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=av(e.data.value)),t}ir(e,t,r){return K.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return K.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=s}static zi(e,t){let r=Me(),s=Me();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new US(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return S6()?8:eH(A6())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.Xi(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.es(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new bW;return this.ts(e,t,o).next(a=>{if(i.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>i.result)}ns(e,t,r,s){return r.documentReadCount<this.Ji?(Sc()<=Re.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Tc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),K.resolve()):(Sc()<=Re.DEBUG&&se("QueryEngine","Query:",Tc(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(Sc()<=Re.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Tc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(t))):K.resolve())}Xi(e,t){if(Vx(t))return K.resolve(null);let r=Vs(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=jA(t,null,"F"),r=Vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Me(...i);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(t,a);return this.ss(t,c,o,l.readTime)?this.Xi(e,jA(t,null,"F")):this.os(e,c,t,l)}))})))}es(e,t,r,s){return Vx(t)||s.isEqual(ge.min())?K.resolve(null):this.Zi.getDocuments(e,r).next(i=>{const o=this.rs(t,i);return this.ss(t,o,r,s)?K.resolve(null):(Sc()<=Re.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tc(t)),this.os(e,o,t,X9(s,-1)).next(a=>a))})}rs(e,t){let r=new jt(pD(e));return t.forEach((s,i)=>{T_(e,i)&&(r=r.add(i))}),r}ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ts(e,t,r){return Sc()<=Re.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Tc(t)),this.Zi.getDocumentsMatchingQuery(e,t,sa.min(),r)}os(e,t,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e,t,r,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new At(Pe),this.cs=new oc(i=>NS(i),DS),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pW(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function CW(n,e,t,r){return new TW(n,e,t,r)}async function LD(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Me();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function MD(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function xW(n,e){const t=Ie(n),r=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const a=[];e.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;a.push(t.Gr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(i,u.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(ln.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(f,m),function(y,w,v){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,u)&&a.push(t.Gr.updateTargetData(i,m))});let l=la(),c=Me();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(RW(i,o,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!r.isEqual(ge.min())){const u=t.Gr.getLastRemoteSnapshotVersion(i).next(f=>t.Gr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return K.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(t.us=s,i))}function RW(n,e,t){let r=Me(),s=Me();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=la();return t.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:s}})}function PW(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Gr.getTargetData(r,e).next(i=>i?(s=i,K.resolve(s)):t.Gr.allocateTargetId(r).next(o=>(s=new jo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function HA(n,e,t){const r=Ie(n),s=r.us.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!bh(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function Yx(n,e,t){const r=Ie(n);let s=ge.min(),i=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Ie(l),p=f.cs.get(u);return p!==void 0?K.resolve(f.us.get(p)):f.Gr.getTargetData(c,u)}(r,o,Vs(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?s:ge.min(),t?i:Me())).next(a=>(IW(r,EH(e),a),{documents:a,ds:i})))}function IW(n,e,t){let r=n.ls.get(e)||ge.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.ls.set(e,r)}class Qx{constructor(){this.activeTargetIds=xH()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kW{constructor(){this._o=new Qx,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Qx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg=null;function X0(){return hg===null?hg=function(){return 268435456+Math.round(2147483648*Math.random())}():hg++,"0x"+hg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class DW extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${s}/databases/${i}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Oo(t,r,s,i,o){const a=X0(),l=this.No(t,r.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,i,o),this.Bo(t,l,c,s).then(u=>(se("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw ch("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}ko(t,r,s,i,o,a){return this.Oo(t,r,s,i,o)}Lo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ah}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>t[o]=i),s&&s.headers.forEach((i,o)=>t[o]=i)}No(t,r){const s=MW[t];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,s){const i=X0();return new Promise((o,a)=>{const l=new ZN;l.setWithCredentials(!0),l.listenOnce(eD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ov.NO_ERROR:const u=l.getResponseJson();se(fn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case ov.TIMEOUT:se(fn,`RPC '${e}' ${i} timed out`),a(new ue(Z.DEADLINE_EXCEEDED,"Request time out"));break;case ov.HTTP_ERROR:const f=l.getStatus();if(se(fn,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const g=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(v)>=0?v:Z.UNKNOWN}(m.status);a(new ue(g,m.message))}else a(new ue(Z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ue(Z.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{se(fn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);se(fn,`RPC '${e}' ${i} sending request:`,s),l.send(t,"POST",c,r,15)})}qo(e,t,r){const s=X0(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rD(),a=nD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=i.join("");se(fn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const g=new NW({Eo:w=>{m?se(fn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(se(fn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),se(fn,`RPC '${e}' stream ${s} sending:`,w),f.send(w))},Ao:()=>f.close()}),y=(w,v,E)=>{w.listen(v,S=>{try{E(S)}catch(R){setTimeout(()=>{throw R},0)}})};return y(f,Ad.EventType.OPEN,()=>{m||(se(fn,`RPC '${e}' stream ${s} transport opened.`),g.So())}),y(f,Ad.EventType.CLOSE,()=>{m||(m=!0,se(fn,`RPC '${e}' stream ${s} transport closed`),g.Do())}),y(f,Ad.EventType.ERROR,w=>{m||(m=!0,ch(fn,`RPC '${e}' stream ${s} transport errored:`,w),g.Do(new ue(Z.UNAVAILABLE,"The operation could not be completed")))}),y(f,Ad.EventType.MESSAGE,w=>{var v;if(!m){const E=w.data[0];ct(!!E);const S=E,R=(S==null?void 0:S.error)||((v=S[0])===null||v===void 0?void 0:v.error);if(R){se(fn,`RPC '${e}' stream ${s} received error:`,R);const O=R.status;let j=function(P){const M=St[P];if(M!==void 0)return AD(M)}(O),C=R.message;j===void 0&&(j=Z.INTERNAL,C="Unknown error status: "+O+" with message "+R.message),m=!0,g.Do(new ue(j,C)),f.close()}else se(fn,`RPC '${e}' stream ${s} received:`,E),g.vo(E)}}),y(a,tD.STAT_EVENT,w=>{w.stat===MA.PROXY?se(fn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===MA.NOPROXY&&se(fn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.bo()},0),g}}function Y0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(n){return new WH(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t,r=1e3,s=1.5,i=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=s,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,t,r,s,i,o,a,l){this.li=e,this.Yo=r,this.Zo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new DD(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===t&&this.I_(r,s)},r=>{e(()=>{const s=new ue(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(s)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.E_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FW extends OW{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=YH(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Jc(o.readTime):ge.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=qx(this.serializer),t.addTarget=function(i,o){let a;const l=o.target;if(a=VA(l)?{documents:QH(i,l)}:{query:JH(i,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qH(i,o.resumeToken);const c=$A(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=GH(i,o.snapshotVersion.toTimestamp());const c=$A(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=eW(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=qx(this.serializer),t.removeTarget=e,this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Oo(e,zA(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ue(Z.UNKNOWN,i.toString())})}ko(e,t,r,s,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,zA(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(Z.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class jW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ki(t),this.C_=!1):se("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{mm(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ie(l);c.k_.add(4),await pm(c),c.K_.set("Unknown"),c.k_.delete(4),await P_(c)}(this))})}),this.K_=new jW(r,s)}}async function P_(n){if(mm(n))for(const e of n.q_)await e(!0)}async function pm(n){for(const e of n.q_)await e(!1)}function OD(n,e){const t=Ie(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),WS(t)?HS(t):Sh(t).s_()&&zS(t,e))}function $S(n,e){const t=Ie(n),r=Sh(t);t.B_.delete(e),r.s_()&&FD(t,e),t.B_.size===0&&(r.s_()?r.a_():mm(t)&&t.K_.set("Unknown"))}function zS(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sh(n).V_(e)}function FD(n,e){n.U_.xe(e),Sh(n).m_(e)}function HS(n){n.U_=new UH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Sh(n).start(),n.K_.F_()}function WS(n){return mm(n)&&!Sh(n).i_()&&n.B_.size>0}function mm(n){return Ie(n).k_.size===0}function VD(n){n.U_=void 0}async function UW(n){n.K_.set("Online")}async function $W(n){n.B_.forEach((e,t)=>{zS(n,e)})}async function zW(n,e){VD(n),WS(n)?(n.K_.O_(e),HS(n)):n.K_.set("Unknown")}async function HW(n,e,t){if(n.K_.set("Online"),e instanceof SD&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.B_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.B_.delete(a),s.U_.removeTarget(a))}(n,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zx(n,r)}else if(e instanceof cv?n.U_.$e(e):e instanceof bD?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(ge.min()))try{const r=await MD(n.localStore);t.compareTo(r)>=0&&await function(i,o){const a=i.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.B_.get(c);u&&i.B_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.B_.get(l);if(!u)return;i.B_.set(l,u.withResumeToken(ln.EMPTY_BYTE_STRING,u.snapshotVersion)),FD(i,l);const f=new jo(u.target,l,c,u.sequenceNumber);zS(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await Zx(n,r)}}async function Zx(n,e,t){if(!bh(e))throw e;n.k_.add(1),await pm(n),n.K_.set("Offline"),t||(t=()=>MD(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await P_(n)})}async function eR(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=mm(t);t.k_.add(3),await pm(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await P_(t)}async function WW(n,e){const t=Ie(n);e?(t.k_.delete(2),await P_(t)):e||(t.k_.add(2),await pm(t),t.K_.set("Unknown"))}function Sh(n){return n.W_||(n.W_=function(t,r,s){const i=Ie(t);return i.b_(),new FW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Ro:UW.bind(null,n),mo:$W.bind(null,n),po:zW.bind(null,n),R_:HW.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),WS(n)?HS(n):n.K_.set("Unknown")):(await n.W_.stop(),VD(n))})),n.W_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Vl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new GS(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jD(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),bh(n))return new ue(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{static emptySet(e){return new Zc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||de.comparator(t.key,r.key):(t,r)=>de.comparator(t.key,r.key),this.keyedMap=bd(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.z_=new At(de.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ye():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ph{constructor(e,t,r,s,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ph(e,t,Zc.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&S_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class qW{constructor(){this.queries=nR(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const s=Ie(t),i=s.queries;s.queries=nR(),i.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new ue(Z.ABORTED,"Firestore shutting down"))}}function nR(){return new oc(n=>fD(n),S_)}async function KW(n,e){const t=Ie(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Y_()&&e.Z_()&&(r=2):(i=new GW,r=e.Z_()?0:1);try{switch(r){case 0:i.H_=await t.onListen(s,!0);break;case 1:i.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=jD(o,`Initialization of query '${Tc(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.J_.push(e),e.ea(t.onlineState),i.H_&&e.ta(i.H_)&&qS(t)}async function XW(n,e){const t=Ie(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.J_.indexOf(e);o>=0&&(i.J_.splice(o,1),i.J_.length===0?s=e.Z_()?0:1:!i.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function YW(n,e){const t=Ie(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.J_)a.ta(s)&&(r=!0);o.H_=s}}r&&qS(t)}function QW(n,e,t){const r=Ie(n),s=r.queries.get(e);if(s)for(const i of s.J_)i.onError(t);r.queries.delete(e)}function qS(n){n.X_.forEach(e=>{e.next()})}var WA,rR;(rR=WA||(WA={})).na="default",rR.Cache="cache";class JW{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ph(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==WA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.key=e}}class UD{constructor(e){this.key=e}}class ZW{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Me(),this.mutatedKeys=Me(),this.Va=pD(e),this.ma=new Zc(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new tR,s=t?t.ma:this.ma;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const p=s.get(u),m=T_(this.query,f)?f:null,g=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;p&&m?p.data.isEqual(m.data)?g!==y&&(r.track({type:3,doc:m}),w=!0):this.ya(p,m)||(r.track({type:2,doc:m}),w=!0,(l&&this.Va(m,l)>0||c&&this.Va(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),w=!0):p&&!m&&(r.track({type:1,doc:p}),w=!0,(l||c)&&(a=!0)),w&&(m?(o=o.add(m),i=y?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{ma:o,pa:r,ss:a,mutatedKeys:i}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,f)=>function(m,g){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return y(m)-y(g)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),s=s!=null&&s;const a=t&&!s?this.Sa():[],l=this.Ra.size===0&&this.current&&!s?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new ph(this.query,e.ma,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new tR,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Me(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new UD(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new BD(r))}),t}va(e){this.da=e.ds,this.Ra=Me();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return ph.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class eG{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tG{constructor(e){this.key=e,this.Fa=!1}}class nG{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new oc(a=>fD(a),S_),this.Oa=new Map,this.Na=new Set,this.La=new At(de.comparator),this.Ba=new Map,this.ka=new jS,this.qa={},this.Qa=new Map,this.Ka=fh.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function rG(n,e,t=!0){const r=GD(n);let s;const i=r.xa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Ca()):s=await $D(r,e,t,!0),s}async function sG(n,e){const t=GD(n);await $D(t,e,!0,!1)}async function $D(n,e,t,r){const s=await PW(n.localStore,Vs(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await iG(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&OD(n.remoteStore,s),a}async function iG(n,e,t,r,s){n.Ua=(f,p,m)=>async function(y,w,v,E){let S=w.view.ga(v);S.ss&&(S=await Yx(y.localStore,w.query,!1).then(({documents:C})=>w.view.ga(C,S)));const R=E&&E.targetChanges.get(w.targetId),O=E&&E.targetMismatches.get(w.targetId)!=null,j=w.view.applyChanges(S,y.isPrimaryClient,R,O);return iR(y,w.targetId,j.ba),j.snapshot}(n,f,p,m);const i=await Yx(n.localStore,e,!0),o=new ZW(e,i.ds),a=o.ga(i.documents),l=fm.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);iR(n,t,c.ba);const u=new eG(e,t,o);return n.xa.set(e,u),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),c.snapshot}async function oG(n,e,t){const r=Ie(n),s=r.xa.get(e),i=r.Oa.get(s.targetId);if(i.length>1)return r.Oa.set(s.targetId,i.filter(o=>!S_(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await HA(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&$S(r.remoteStore,s.targetId),GA(r,s.targetId)}).catch(__)):(GA(r,s.targetId),await HA(r.localStore,s.targetId,!0))}async function aG(n,e){const t=Ie(n),r=t.xa.get(e),s=t.Oa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$S(t.remoteStore,r.targetId))}async function zD(n,e){const t=Ie(n);try{const r=await xW(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Ba.get(i);o&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Fa=!0:s.modifiedDocuments.size>0?ct(o.Fa):s.removedDocuments.size>0&&(ct(o.Fa),o.Fa=!1))}),await WD(t,r,e)}catch(r){await __(r)}}function sR(n,e,t){const r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.xa.forEach((i,o)=>{const a=o.view.ea(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ie(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.J_)p.ea(a)&&(c=!0)}),c&&qS(l)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lG(n,e,t){const r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ba.get(e),i=s&&s.key;if(i){let o=new At(de.comparator);o=o.insert(i,wn.newNoDocument(i,ge.min()));const a=Me().add(i),l=new R_(ge.min(),new Map,new At(Pe),o,a);await zD(r,l),r.La=r.La.remove(i),r.Ba.delete(e),KS(r)}else await HA(r.localStore,e,!1).then(()=>GA(r,e,t)).catch(__)}function GA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||HD(n,r)})}function HD(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&($S(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),KS(n))}function iR(n,e,t){for(const r of t)r instanceof BD?(n.ka.addReference(r.key,e),cG(n,r)):r instanceof UD?(se("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||HD(n,r.key)):ye()}function cG(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(se("SyncEngine","New document in limbo: "+t),n.Na.add(r),KS(n))}function KS(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new de(gt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new tG(t)),n.La=n.La.insert(t,r),OD(n.remoteStore,new jo(Vs(dD(t.path)),r,"TargetPurposeLimboResolution",w_.oe))}}async function WD(n,e,t){const r=Ie(n),s=[],i=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=US.zi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ma.R_(s),await async function(l,c){const u=Ie(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(c,p=>K.forEach(p.Wi,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>K.forEach(p.Gi,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!bh(f))throw f;se("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.us.get(p),g=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(g);u.us=u.us.insert(p,y)}}}(r.localStore,i))}async function uG(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await LD(t.localStore,e);t.currentUser=e,function(i,o){i.Qa.forEach(a=>{a.forEach(l=>{l.reject(new ue(Z.CANCELLED,o))})}),i.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await WD(t,r.Ts)}}function hG(n,e){const t=Ie(n),r=t.Ba.get(e);if(r&&r.Fa)return Me().add(r.key);{let s=Me();const i=t.Oa.get(e);if(!i)return s;for(const o of i){const a=t.xa.get(o);s=s.unionWith(a.view.fa)}return s}}function GD(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lG.bind(null,e),e.Ma.R_=YW.bind(null,e.eventManager),e.Ma.Wa=QW.bind(null,e.eventManager),e}class sy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ND(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return CW(this.persistence,new SW,e.initialUser,this.serializer)}ja(e){return new kD(BS.ei,this.serializer)}za(e){return new kW}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sy.provider={build:()=>new sy};class dG extends sy{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ct(this.persistence.referenceDelegate instanceof ry);const r=this.persistence.referenceDelegate.garbageCollector;return new cW(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new kD(r=>ry.ei(r,t),this.serializer)}}class qA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uG.bind(null,this.syncEngine),await WW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qW}()}createDatastore(e){const t=ND(e.databaseInfo.databaseId),r=function(i){return new DW(i)}(e.databaseInfo);return function(i,o,a,l){return new VW(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new BW(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>sR(this.syncEngine,t,0),function(){return Jx.p()?new Jx:new LW}())}createSyncEngine(e,t){return function(s,i,o,a,l,c,u){const f=new nG(s,i,o,a,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=Ie(s);se("RemoteStore","RemoteStore shutting down."),i.k_.add(5),await pm(i),i.Q_.shutdown(),i.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}qA.provider={build:()=>new qA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=q9.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=jD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Q0(n,e){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await LD(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function oR(n,e){n.asyncQueue.verifyOperationInProgress();const t=await mG(n);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>eR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>eR(e.remoteStore,s)),n._onlineComponents=e}async function mG(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Q0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ch("Error using user provided cache. Falling back to memory cache: "+t),await Q0(n,new sy)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Q0(n,new dG(void 0));return n._offlineComponents}async function gG(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await oR(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await oR(n,new qA))),n._onlineComponents}async function vG(n){const e=await gG(n),t=e.eventManager;return t.onListen=rG.bind(null,e.syncEngine),t.onUnlisten=oG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aG.bind(null,e.syncEngine),t}function yG(n,e,t={}){const r=new Vl;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new fG({next:p=>{u.eu(),o.enqueueAndForget(()=>XW(i,f)),p.fromCache&&l.source==="server"?c.reject(new ue(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new JW(a,u,{includeMetadataChanges:!0,ua:!0});return KW(i,f)}(await vG(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Map;function _G(n,e,t,r){if(e===!0&&r===!0)throw new ue(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lR(n){if(de.isDocumentKey(n))throw new ue(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wG(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye()}function KA(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wG(n);throw new ue(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_G("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class XS{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cR(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new j9;switch(r.type){case"firstParty":return new z9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=aR.get(t);r&&(se("ComponentProvider","Removing Datastore"),aR.delete(t),r.terminate())}(this),Promise.resolve()}}function EG(n,e,t,r={}){var s;const i=(n=KA(n,XS))._getSettings(),o=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ch("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yn.MOCK_USER;else{a=BN(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ue(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yn(c)}n._authCredentials=new B9(new sD(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new I_(this.firestore,e,this._query)}}class Th{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Th(this.firestore,e,this._key)}}class eu extends I_{constructor(e,t,r){super(e,t,dD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Th(this.firestore,null,new de(e))}withConverter(e){return new eu(this.firestore,e,this._path)}}function AG(n,e,...t){if(n=$N(n),n instanceof XS){const r=gt.fromString(e,...t);return lR(r),new eu(n,null,r)}{if(!(n instanceof Th||n instanceof eu))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gt.fromString(e,...t));return lR(r),new eu(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new DD(this,"async_queue_retry"),this.fu=()=>{const r=Y0();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Y0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Y0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Vl;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!bh(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ki("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=GS.createAndSchedule(this,e,t,r,i=>this.Su(i));return this.du.push(s),s}pu(){this.Au&&ye()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class KD extends XS{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new uR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uR(e),this._firestoreClient=void 0,await e}}}function bG(n,e){const t=typeof n=="object"?n:XN(),r=typeof n=="string"?n:"(default)",s=GN(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=VN("firestore");i&&EG(s,...i)}return s}function SG(n){if(n._terminated)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||TG(n),n._firestoreClient}function TG(n){var e,t,r;const s=n._freezeSettings(),i=function(a,l,c,u){return new iH(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,qD(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new pG(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iy(ln.fromBase64String(e))}catch(t){throw new ue(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new iy(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}const RG=new RegExp("[~\\*/\\[\\]]");function PG(n,e,t){if(e.search(RG)>=0)throw hR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new XD(...e.split("."))._internalPath}catch{throw hR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function hR(n,e,t,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new ue(Z.INVALID_ARGUMENT,i+n+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Th(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IG extends YD{data(){return super.data()}}function QD(n,e){return typeof e=="string"?PG(n,e):e instanceof XD?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LG{convertValue(e,t="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return dm(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>_t(o.doubleValue));return new xG(i)}convertGeoPoint(e){return new CG(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=A_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mf(e));default:return null}}convertTimestamp(e){const t=ia(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gt.fromString(e);ct(ID(r));const s=new gf(r.get(1),r.get(3)),i=new de(r.popFirst(5));return s.isEqual(t)||Ki(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class MG extends YD{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class uv extends MG{data(e={}){return super.data(e)}}class NG{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new dg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new uv(this._firestore,this._userDataWriter,r.key,r,new dg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new uv(s._firestore,s._userDataWriter,a.doc.key,a.doc,new dg(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new uv(s._firestore,s._userDataWriter,a.doc.key,a.doc,new dg(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:DG(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}class OG extends LG{constructor(e){super(),this.firestore=e}convertBytes(e){return new iy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Th(this.firestore,null,t)}}function FG(n){n=KA(n,I_);const e=KA(n.firestore,KD),t=SG(e),r=new OG(e);return kG(n._query),yG(t,n._query).then(s=>new NG(e,r,n,s))}(function(e,t=!0){(function(s){Ah=s})(qN),df(new lh("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new KD(new U9(r.getProvider("auth-internal")),new W9(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ue(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gf(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Yo(xx,"4.7.5",e),Yo(xx,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="firebasestorage.googleapis.com",VG="storageBucket",jG=2*60*1e3,BG=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends ic{constructor(e,t,r=0){super(J0(e),`Firebase Storage: ${t} (${J0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ks.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return J0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gs||(Gs={}));function J0(n){return"storage/"+n}function UG(){const n="An unknown error occurred, please check the error payload for server response.";return new Ks(Gs.UNKNOWN,n)}function $G(){return new Ks(Gs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zG(){return new Ks(Gs.CANCELED,"User canceled the upload/download.")}function HG(n){return new Ks(Gs.INVALID_URL,"Invalid URL '"+n+"'.")}function WG(n){return new Ks(Gs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function dR(n){return new Ks(Gs.INVALID_ARGUMENT,n)}function ZD(){return new Ks(Gs.APP_DELETED,"The Firebase app was deleted.")}function GG(n){return new Ks(Gs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=is.makeFromUrl(e,t)}catch{return new is(e,"")}if(r.path==="")return r;throw WG(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${s}/o${p}`,"i"),g={bucket:1,path:3},y=t===JD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",v=new RegExp(`^https?://${y}/${s}/${w}`,"i"),S=[{regex:a,indices:l,postModify:i},{regex:m,indices:g,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<S.length;R++){const O=S[R],j=O.regex.exec(e);if(j){const C=j[O.indices.bucket];let T=j[O.indices.path];T||(T=""),r=new is(C,T),O.postModify(r);break}}if(r==null)throw HG(e);return r}}class qG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KG(n,e,t){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function f(w){s=setTimeout(()=>{s=null,n(m,l())},w)}function p(){i&&clearTimeout(i)}function m(w,...v){if(c){p();return}if(w){p(),u.call(null,w,...v);return}if(l()||o){p(),u.call(null,w,...v);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let g=!1;function y(w){g||(g=!0,p(),!c&&(s!==null?(w||(a=2),clearTimeout(s),f(0)):w||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,y(!0)},t),y}function XG(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YG(n){return n!==void 0}function fR(n,e,t,r){if(r<e)throw dR(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dR(`Invalid value for '${n}'. Expected ${t} or less.`)}function QG(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var oy;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(oy||(oy={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JG(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(e,t,r,s,i,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new fg(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===oy.NO_ERROR,l=i.getStatus();if(!a||JG(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===oy.ABORT;r(!1,new fg(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new fg(c,i))})},t=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());YG(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=UG();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?ZD():zG();o(l)}else{const l=$G();o(l)}};this.canceled_?t(!1,new fg(!1,null,!0)):this.backoffId_=KG(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function e8(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function t8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function n8(n,e){e&&(n["X-Firebase-GMPID"]=e)}function r8(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function s8(n,e,t,r,s,i,o=!0){const a=QG(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return n8(c,e),e8(c,t),t8(c,i),r8(c,r),new ZG(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function o8(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){this._service=e,t instanceof is?this._location=t:this._location=is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ay(e,t)}get root(){const e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o8(this._location.path)}get storage(){return this._service}get parent(){const e=i8(this._location.path);if(e===null)return null;const t=new is(this._location.bucket,e);return new ay(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw GG(e)}}function pR(n,e){const t=e==null?void 0:e[VG];return t==null?null:is.makeFromBucketSpec(t,n)}function a8(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:BN(s,n.app.options.projectId))}class l8{constructor(e,t,r,s,i){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=JD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jG,this._maxUploadRetryTime=BG,this._requests=new Set,s!=null?this._bucket=is.makeFromBucketSpec(s,this._host):this._bucket=pR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=is.makeFromBucketSpec(this._url,e):this._bucket=pR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ay(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new qG(ZD());{const o=s8(e,this._appId,r,s,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const mR="@firebase/storage",gR="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="storage";function c8(n=XN(),e){n=$N(n);const r=GN(n,e2).getImmediate({identifier:e}),s=VN("storage");return s&&u8(r,...s),r}function u8(n,e,t,r={}){a8(n,e,t,r)}function h8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new l8(t,r,s,e,qN)}function d8(){df(new lh(e2,h8,"PUBLIC").setMultipleInstances(!0)),Yo(mR,gR,""),Yo(mR,gR,"esm2017")}d8();const f8={apiKey:"AIzaSyCJH3g_kDzcdTsYyBfYnWN9Vu0NVHQr1Wk",authDomain:"my-portfolio-page-4ceda.firebaseapp.com",projectId:"my-portfolio-page-4ceda",storageBucket:"my-portfolio-page-4ceda.appspot.com",messagingSenderId:"835759719339",appId:"1:835759719339:web:03a12d09572082289608ee",measurementId:"G-V5690YXT75"},t2=KN(f8),p8=bG(t2);c8(t2);function m8(){const[n,e]=A.useState([]),[t,r]=A.useState([]),[s,i]=A.useState("All"),[o,a]=A.useState({}),l=[{name:"All",icon:"",color:"#6366f1"},{name:"Showcase",icon:"",color:"#f59e0b"},{name:"AI & ML",icon:"",color:"#10b981"},{name:"Web Apps",icon:"",color:"#3b82f6"},{name:"Games",icon:"",color:"#8b5cf6"},{name:"Utilities",icon:"",color:"#ef4444"}];A.useEffect(()=>{om("/projects","Projects - Adarsh Gella Portfolio"),(async()=>{try{const S=(await FG(AG(p8,"projects"))).docs.map(R=>R.data()).sort((R,O)=>{const j=R.live&&R.live!=="null"&&!R.live.includes("youtu.be")&&!R.live.includes("drive.google.com"),C=O.live&&O.live!=="null"&&!O.live.includes("youtu.be")&&!O.live.includes("drive.google.com");return j!==C?C-j:R.order-O.order});e(S),r(S),console.log(" Projects loaded:",S.length)}catch(v){console.error(" Error fetching projects:",v)}})()},[]);const c=w=>{if(i(w),w==="All")r(n);else{const v=n.filter(E=>E.category===w);r(v)}Oi(`Filter: ${w}`,"projects_page",{category_selected:w,projects_shown:w==="All"?n.length:n.filter(v=>v.category===w).length})},u=w=>{O0(w.name,"github_click",{project_tech:w.tech,project_description:w.description,project_order:w.order,github_url:w.github}),Oi("GitHub","projects_page",{project_name:w.name,button_type:"external_link"}),window.open(w.github,"_blank")},f=w=>{O0(w.name,"demo_click",{project_tech:w.tech,project_description:w.description,project_order:w.order,demo_url:w.live}),Oi("Live Demo","projects_page",{project_name:w.name,button_type:"external_link"}),window.open(w.live,"_blank")},p=w=>{O0(w.name,"card_view",{project_tech:w.tech,project_description:w.description,project_order:w.order,has_live_demo:!!(w.live&&w.live!=="null"&&!w.live.includes("youtu.be")&&!w.live.includes("drive.google.com"))})},m=w=>{a(v=>({...v,[w]:!0}))},g=w=>w.live&&w.live!=="null"&&!w.live.includes("youtu.be")&&!w.live.includes("drive.google.com"),y=()=>l.map(w=>{if(w.name==="All")return{...w,count:n.length};const v=n.filter(E=>E.category===w.name).length;return{...w,count:v}}).filter(w=>w.count>0||w.name==="All");return x.jsxs("div",{className:"projects-page",children:[x.jsxs("div",{className:"projects-header",children:[x.jsx("h1",{className:"projects-title",children:"My Projects"}),x.jsxs("p",{className:"projects-subtitle",children:["Explore ",n.length," projects showcasing my skills and experience"]})]}),x.jsx("div",{className:"category-filters",children:x.jsx("div",{className:"filters-container",children:y().map(w=>x.jsxs("button",{className:`category-btn ${s===w.name?"active":""}`,onClick:()=>c(w.name),style:{"--category-color":w.color},children:[x.jsx("span",{className:"category-icon",children:w.icon}),x.jsx("span",{className:"category-name",children:w.name}),x.jsx(iE,{className:"category-count",children:w.count})]},w.name))})}),x.jsxs("div",{className:"projects-container",children:[x.jsx("div",{className:"projects-grid",children:t.map((w,v)=>{var E;return x.jsxs(oL,{className:`project-card ${g(w)?"has-demo":"code-only"}`,onMouseEnter:()=>p(w),children:[g(w)&&x.jsx("div",{className:"project-preview",children:o[w.name]?x.jsxs("div",{className:"iframe-error",children:[x.jsx("p",{children:"Preview unavailable"}),x.jsx("div",{className:"floating-overlay",children:x.jsxs("div",{className:"floating-actions",children:[x.jsx("div",{className:"floating-icon github-icon",onClick:()=>u(w),title:"View Source Code",children:x.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:x.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}),x.jsx("div",{className:"floating-icon demo-icon",onClick:()=>f(w),title:"Open Live Demo",children:x.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:x.jsx("path",{d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})})})]})})]}):x.jsxs(x.Fragment,{children:[x.jsx("iframe",{src:w.live,className:"project-iframe",loading:"lazy",title:`${w.name} Preview`,onError:()=>m(w.name),sandbox:"allow-same-origin allow-scripts"}),x.jsx("div",{className:"floating-overlay",children:x.jsxs("div",{className:"floating-actions",children:[x.jsx("div",{className:"floating-icon github-icon",onClick:()=>u(w),title:"View Source Code",children:x.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:x.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}),x.jsx("div",{className:"floating-icon demo-icon",onClick:()=>f(w),title:"Open Live Demo",children:x.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:x.jsx("path",{d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})})})]})})]})}),x.jsxs("div",{className:"project-info",children:[x.jsxs("div",{className:"project-header",children:[x.jsx("h3",{className:"project-name",children:w.name}),w.category&&x.jsx(iE,{className:"category-badge",style:{backgroundColor:((E=l.find(S=>S.name===w.category))==null?void 0:E.color)||"#6b7280"},children:w.category})]}),x.jsx("p",{className:"project-description",children:w.description}),x.jsxs("div",{className:"project-tech",children:[x.jsx("span",{className:"tech-label",children:"Tech:"}),x.jsx("span",{className:"tech-stack",children:w.tech})]})]}),x.jsxs("div",{className:"project-actions",children:[x.jsxs(Lg,{className:"github-btn",onClick:()=>u(w),children:[x.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:x.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"GitHub"]}),g(w)&&x.jsxs(Lg,{className:"demo-btn",onClick:()=>f(w),children:[x.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:x.jsx("path",{d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})}),"Live Demo"]})]})]},v)})}),t.length===0&&x.jsxs("div",{className:"empty-state",children:[x.jsx("div",{className:"empty-icon",children:""}),x.jsx("h3",{children:"No projects found"}),x.jsxs("p",{children:['No projects found in the "',s,'" category']}),x.jsx(Lg,{onClick:()=>c("All"),children:"Show All Projects"})]})]})]})}const n2=({url:n})=>(window.location.href=n,null);n2.propTypes={url:ls.string.isRequired};const r2=({isMobile:n})=>x.jsxs(Dj,{children:[x.jsx(Ra,{path:"/",element:x.jsx(lE,{isMobile:n})}),x.jsx(Ra,{path:"/resume",element:x.jsx(NN,{isMobile:n})}),x.jsx(Ra,{path:"/contact",element:x.jsx(DN,{isMobile:n})}),x.jsx(Ra,{path:"/projects",element:x.jsx(m8,{})}),x.jsx(Ra,{path:"/notepad",element:x.jsx(n2,{url:"https://autosave-notepad.netlify.app/"})}),x.jsx(Ra,{path:"/*",element:x.jsx(lE,{})})]});r2.propTypes={isMobile:ls.bool};function s2(n,e=[]){let t=[];function r(i,o){const a=A.createContext(o),l=t.length;t=[...t,o];const c=f=>{var v;const{scope:p,children:m,...g}=f,y=((v=p==null?void 0:p[n])==null?void 0:v[l])||a,w=A.useMemo(()=>g,Object.values(g));return x.jsx(y.Provider,{value:w,children:m})};c.displayName=i+"Provider";function u(f,p){var y;const m=((y=p==null?void 0:p[n])==null?void 0:y[l])||a,g=A.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,g8(s,...e)]}function g8(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var v8="DismissableLayer",XA="dismissableLayer.update",y8="dismissableLayer.pointerDownOutside",_8="dismissableLayer.focusOutside",vR,i2=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),o2=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(i2),[u,f]=A.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),g=xt(e,C=>f(C)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),E=u?y.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,R=E>=v,O=A8(C=>{const T=C.target,P=[...c.branches].some(M=>M.contains(T));!R||P||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),j=b8(C=>{const T=C.target;[...c.branches].some(M=>M.contains(T))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return ik(C=>{E===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(vR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),yR(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=vR)}},[u,p,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),yR())},[u,c]),A.useEffect(()=>{const C=()=>m({});return document.addEventListener(XA,C),()=>document.removeEventListener(XA,C)},[]),x.jsx(vt.div,{...l,ref:g,style:{pointerEvents:S?R?"auto":"none":void 0,...n.style},onFocusCapture:he(n.onFocusCapture,j.onFocusCapture),onBlurCapture:he(n.onBlurCapture,j.onBlurCapture),onPointerDownCapture:he(n.onPointerDownCapture,O.onPointerDownCapture)})});o2.displayName=v8;var w8="DismissableLayerBranch",E8=A.forwardRef((n,e)=>{const t=A.useContext(i2),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),x.jsx(vt.div,{...n,ref:s})});E8.displayName=w8;function A8(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){a2(y8,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function b8(n,e=globalThis==null?void 0:globalThis.document){const t=Qn(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&a2(_8,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yR(){const n=new CustomEvent(XA);document.dispatchEvent(n)}function a2(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Qb(s,i):s.dispatchEvent(i)}var Z0=0;function S8(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??_R()),document.body.insertAdjacentElement("beforeend",n[1]??_R()),Z0++,()=>{Z0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Z0--}},[])}function _R(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}function T8(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var k_=n=>{const{present:e,children:t}=n,r=C8(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=xt(r.ref,x8(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};k_.displayName="Presence";function C8(n){const[e,t]=A.useState(),r=A.useRef({}),s=A.useRef(n),i=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=T8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=pg(r.current);i.current=a==="mounted"?c:"none"},[a]),Us(()=>{const c=r.current,u=s.current;if(u!==n){const p=i.current,m=pg(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Us(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=m=>{const y=pg(r.current).includes(m.animationName);if(m.target===e&&y&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=m=>{m.target===e&&(i.current=pg(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function pg(n){return(n==null?void 0:n.animationName)||"none"}function x8(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var hv="right-scroll-bar-position",dv="width-before-scroll-bar",R8="with-scroll-bars-hidden",P8="--removed-body-scroll-bar-size",l2=w3(),ew=function(){},L_=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:ew,onWheelCapture:ew,onTouchMoveCapture:ew}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,f=n.shards,p=n.sideCar,m=n.noIsolation,g=n.inert,y=n.allowPinchZoom,w=n.as,v=w===void 0?"div":w,E=n.gapMode,S=dk(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=p,O=v3([t,e]),j=Ns(Ns({},S),s);return A.createElement(A.Fragment,null,u&&A.createElement(R,{sideCar:l2,removeScrollBar:c,shards:f,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:t,gapMode:E}),o?A.cloneElement(A.Children.only(a),Ns(Ns({},j),{ref:O})):A.createElement(v,Ns({},j,{className:l,ref:O}),a))});L_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};L_.classNames={fullWidth:dv,zeroRight:hv};var I8={left:0,top:0,right:0,gap:0},tw=function(n){return parseInt(n||"",10)||0},k8=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[tw(t),tw(r),tw(s)]},L8=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return I8;var e=k8(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},M8=pk(),tu="data-scroll-locked",N8=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(R8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(tu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(hv," .").concat(hv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dv," .").concat(dv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(tu,`] {
    `).concat(P8,": ").concat(a,`px;
  }
`)},wR=function(){var n=parseInt(document.body.getAttribute(tu)||"0",10);return isFinite(n)?n:0},D8=function(){A.useEffect(function(){return document.body.setAttribute(tu,(wR()+1).toString()),function(){var n=wR()-1;n<=0?document.body.removeAttribute(tu):document.body.setAttribute(tu,n.toString())}},[])},O8=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;D8();var i=A.useMemo(function(){return L8(s)},[s]);return A.createElement(M8,{styles:N8(i,!e,s,t?"":"!important")})},YA=!1;if(typeof window<"u")try{var mg=Object.defineProperty({},"passive",{get:function(){return YA=!0,!0}});window.addEventListener("test",mg,mg),window.removeEventListener("test",mg,mg)}catch{YA=!1}var gc=YA?{passive:!1}:!1,F8=function(n){return n.tagName==="TEXTAREA"},c2=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!F8(n)&&t[e]==="visible")},V8=function(n){return c2(n,"overflowY")},j8=function(n){return c2(n,"overflowX")},ER=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=u2(n,r);if(s){var i=h2(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},B8=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},U8=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},u2=function(n,e){return n==="v"?V8(e):j8(e)},h2=function(n,e){return n==="v"?B8(e):U8(e)},$8=function(n,e){return n==="h"&&e==="rtl"?-1:1},z8=function(n,e,t,r,s){var i=$8(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,l=e.contains(a),c=!1,u=o>0,f=0,p=0;do{var m=h2(n,a),g=m[0],y=m[1],w=m[2],v=y-w-i*g;(g||v)&&u2(n,a)&&(f+=v,p+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(f)<1||!s)||!u&&(Math.abs(p)<1||!s))&&(c=!0),c},gg=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},AR=function(n){return[n.deltaX,n.deltaY]},bR=function(n){return n&&"current"in n?n.current:n},H8=function(n,e){return n[0]===e[0]&&n[1]===e[1]},W8=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},G8=0,vc=[];function q8(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),s=A.useState(G8++)[0],i=A.useState(pk)[0],o=A.useRef(n);A.useEffect(function(){o.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var y=p3([n.lockRef.current],(n.shards||[]).map(bR),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=A.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var v=gg(y),E=t.current,S="deltaX"in y?y.deltaX:E[0]-v[0],R="deltaY"in y?y.deltaY:E[1]-v[1],O,j=y.target,C=Math.abs(S)>Math.abs(R)?"h":"v";if("touches"in y&&C==="h"&&j.type==="range")return!1;var T=ER(C,j);if(!T)return!0;if(T?O=C:(O=C==="v"?"h":"v",T=ER(C,j)),!T)return!1;if(!r.current&&"changedTouches"in y&&(S||R)&&(r.current=O),!O)return!0;var P=r.current||O;return z8(P,w,y,P==="h"?S:R,!0)},[]),l=A.useCallback(function(y){var w=y;if(!(!vc.length||vc[vc.length-1]!==i)){var v="deltaY"in w?AR(w):gg(w),E=e.current.filter(function(O){return O.name===w.type&&(O.target===w.target||w.target===O.shadowParent)&&H8(O.delta,v)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var S=(o.current.shards||[]).map(bR).filter(Boolean).filter(function(O){return O.contains(w.target)}),R=S.length>0?a(w,S[0]):!o.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),c=A.useCallback(function(y,w,v,E){var S={name:y,delta:w,target:v,should:E,shadowParent:K8(v)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(R){return R!==S})},1)},[]),u=A.useCallback(function(y){t.current=gg(y),r.current=void 0},[]),f=A.useCallback(function(y){c(y.type,AR(y),y.target,a(y,n.lockRef.current))},[]),p=A.useCallback(function(y){c(y.type,gg(y),y.target,a(y,n.lockRef.current))},[]);A.useEffect(function(){return vc.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,gc),document.addEventListener("touchmove",l,gc),document.addEventListener("touchstart",u,gc),function(){vc=vc.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,gc),document.removeEventListener("touchmove",l,gc),document.removeEventListener("touchstart",u,gc)}},[]);var m=n.removeScrollBar,g=n.inert;return A.createElement(A.Fragment,null,g?A.createElement(i,{styles:W8(s)}):null,m?A.createElement(O8,{gapMode:n.gapMode}):null)}function K8(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const X8=E3(l2,q8);var d2=A.forwardRef(function(n,e){return A.createElement(L_,Ns({},n,{ref:e,sideCar:X8}))});d2.classNames=L_.classNames;var QA=["Enter"," "],Y8=["ArrowDown","PageUp","Home"],f2=["ArrowUp","PageDown","End"],Q8=[...Y8,...f2],J8={ltr:[...QA,"ArrowRight"],rtl:[...QA,"ArrowLeft"]},Z8={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gm="Menu",[yf,e7,t7]=vS(gm),[ac,n7]=s2(gm,[t7,e_,s_]),M_=e_(),p2=s_(),[r7,Ch]=ac(gm),[s7,vm]=ac(gm),m2=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=M_(e),[l,c]=A.useState(null),u=A.useRef(!1),f=Qn(i),p=pS(s);return A.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),x.jsx(J4,{...a,children:x.jsx(r7,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:c,children:x.jsx(s7,{scope:e,onClose:A.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:p,modal:o,children:r})})})};m2.displayName=gm;var i7="MenuAnchor",YS=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=M_(t);return x.jsx(jk,{...s,...r,ref:e})});YS.displayName=i7;var o7="MenuPortal",[jq,g2]=ac(o7,{forceMount:void 0}),Or="MenuContent",[a7,QS]=ac(Or),v2=A.forwardRef((n,e)=>{const t=g2(Or,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Ch(Or,n.__scopeMenu),o=vm(Or,n.__scopeMenu);return x.jsx(yf.Provider,{scope:n.__scopeMenu,children:x.jsx(k_,{present:r||i.open,children:x.jsx(yf.Slot,{scope:n.__scopeMenu,children:o.modal?x.jsx(l7,{...s,ref:e}):x.jsx(c7,{...s,ref:e})})})})}),l7=A.forwardRef((n,e)=>{const t=Ch(Or,n.__scopeMenu),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return k3(i)},[]),x.jsx(JS,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:he(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),c7=A.forwardRef((n,e)=>{const t=Ch(Or,n.__scopeMenu);return x.jsx(JS,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),JS=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:m,disableOutsideScroll:g,...y}=n,w=Ch(Or,t),v=vm(Or,t),E=M_(t),S=p2(t),R=e7(t),[O,j]=A.useState(null),C=A.useRef(null),T=xt(e,C,w.onContentChange),P=A.useRef(0),M=A.useRef(""),F=A.useRef(0),V=A.useRef(null),D=A.useRef("right"),z=A.useRef(0),$=g?d2:A.Fragment,W=g?{as:wr,allowPinchZoom:!0}:void 0,U=H=>{var ce,Je;const X=M.current+H,ne=R().filter(Ze=>!Ze.disabled),J=document.activeElement,re=(ce=ne.find(Ze=>Ze.ref.current===J))==null?void 0:ce.textValue,me=ne.map(Ze=>Ze.textValue),Fe=E7(me,X,re),be=(Je=ne.find(Ze=>Ze.textValue===Fe))==null?void 0:Je.ref.current;(function Ze(ke){M.current=ke,window.clearTimeout(P.current),ke!==""&&(P.current=window.setTimeout(()=>Ze(""),1e3))})(X),be&&setTimeout(()=>be.focus())};A.useEffect(()=>()=>window.clearTimeout(P.current),[]),S8();const B=A.useCallback(H=>{var ne,J;return D.current===((ne=V.current)==null?void 0:ne.side)&&b7(H,(J=V.current)==null?void 0:J.area)},[]);return x.jsx(a7,{scope:t,searchRef:M,onItemEnter:A.useCallback(H=>{B(H)&&H.preventDefault()},[B]),onItemLeave:A.useCallback(H=>{var X;B(H)||((X=C.current)==null||X.focus(),j(null))},[B]),onTriggerLeave:A.useCallback(H=>{B(H)&&H.preventDefault()},[B]),pointerGraceTimerRef:F,onPointerGraceIntentChange:A.useCallback(H=>{V.current=H},[]),children:x.jsx($,{...W,children:x.jsx(ck,{asChild:!0,trapped:s,onMountAutoFocus:he(i,H=>{var X;H.preventDefault(),(X=C.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:x.jsx(o2,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:m,children:x.jsx(dL,{asChild:!0,...S,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:j,onEntryFocus:he(l,H=>{v.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:x.jsx(Bk,{role:"menu","aria-orientation":"vertical","data-state":M2(w.open),"data-radix-menu-content":"",dir:v.dir,...E,...y,ref:T,style:{outline:"none",...y.style},onKeyDown:he(y.onKeyDown,H=>{const ne=H.target.closest("[data-radix-menu-content]")===H.currentTarget,J=H.ctrlKey||H.altKey||H.metaKey,re=H.key.length===1;ne&&(H.key==="Tab"&&H.preventDefault(),!J&&re&&U(H.key));const me=C.current;if(H.target!==me||!Q8.includes(H.key))return;H.preventDefault();const be=R().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);f2.includes(H.key)&&be.reverse(),_7(be)}),onBlur:he(n.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(P.current),M.current="")}),onPointerMove:he(n.onPointerMove,_f(H=>{const X=H.target,ne=z.current!==H.clientX;if(H.currentTarget.contains(X)&&ne){const J=H.clientX>z.current?"right":"left";D.current=J,z.current=H.clientX}}))})})})})})})});v2.displayName=Or;var u7="MenuGroup",ZS=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return x.jsx(vt.div,{role:"group",...r,ref:e})});ZS.displayName=u7;var h7="MenuLabel",y2=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return x.jsx(vt.div,{...r,ref:e})});y2.displayName=h7;var ly="MenuItem",SR="menu.itemSelect",N_=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=A.useRef(null),o=vm(ly,n.__scopeMenu),a=QS(ly,n.__scopeMenu),l=xt(e,i),c=A.useRef(!1),u=()=>{const f=i.current;if(!t&&f){const p=new CustomEvent(SR,{bubbles:!0,cancelable:!0});f.addEventListener(SR,m=>r==null?void 0:r(m),{once:!0}),Qb(f,p),p.defaultPrevented?c.current=!1:o.onClose()}};return x.jsx(_2,{...s,ref:l,disabled:t,onClick:he(n.onClick,u),onPointerDown:f=>{var p;(p=n.onPointerDown)==null||p.call(n,f),c.current=!0},onPointerUp:he(n.onPointerUp,f=>{var p;c.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:he(n.onKeyDown,f=>{const p=a.searchRef.current!=="";t||p&&f.key===" "||QA.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});N_.displayName=ly;var _2=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=QS(ly,t),a=p2(t),l=A.useRef(null),c=xt(e,l),[u,f]=A.useState(!1),[p,m]=A.useState("");return A.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[i.children]),x.jsx(yf.ItemSlot,{scope:t,disabled:r,textValue:s??p,children:x.jsx(fL,{asChild:!0,...a,focusable:!r,children:x.jsx(vt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:he(n.onPointerMove,_f(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:he(n.onPointerLeave,_f(g=>o.onItemLeave(g))),onFocus:he(n.onFocus,()=>f(!0)),onBlur:he(n.onBlur,()=>f(!1))})})})}),d7="MenuCheckboxItem",w2=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return x.jsx(T2,{scope:n.__scopeMenu,checked:t,children:x.jsx(N_,{role:"menuitemcheckbox","aria-checked":cy(t)?"mixed":t,...s,ref:e,"data-state":t1(t),onSelect:he(s.onSelect,()=>r==null?void 0:r(cy(t)?!0:!t),{checkForDefaultPrevented:!1})})})});w2.displayName=d7;var E2="MenuRadioGroup",[f7,p7]=ac(E2,{value:void 0,onValueChange:()=>{}}),A2=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=Qn(r);return x.jsx(f7,{scope:n.__scopeMenu,value:t,onValueChange:i,children:x.jsx(ZS,{...s,ref:e})})});A2.displayName=E2;var b2="MenuRadioItem",S2=A.forwardRef((n,e)=>{const{value:t,...r}=n,s=p7(b2,n.__scopeMenu),i=t===s.value;return x.jsx(T2,{scope:n.__scopeMenu,checked:i,children:x.jsx(N_,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":t1(i),onSelect:he(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});S2.displayName=b2;var e1="MenuItemIndicator",[T2,m7]=ac(e1,{checked:!1}),C2=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=m7(e1,t);return x.jsx(k_,{present:r||cy(i.checked)||i.checked===!0,children:x.jsx(vt.span,{...s,ref:e,"data-state":t1(i.checked)})})});C2.displayName=e1;var g7="MenuSeparator",x2=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return x.jsx(vt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});x2.displayName=g7;var v7="MenuArrow",R2=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=M_(t);return x.jsx(Uk,{...s,...r,ref:e})});R2.displayName=v7;var y7="MenuSub",[Bq,P2]=ac(y7),Td="MenuSubTrigger",I2=A.forwardRef((n,e)=>{const t=Ch(Td,n.__scopeMenu),r=vm(Td,n.__scopeMenu),s=P2(Td,n.__scopeMenu),i=QS(Td,n.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:n.__scopeMenu},u=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>u,[u]),A.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),x.jsx(YS,{asChild:!0,...c,children:x.jsx(_2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":M2(t.open),...n,ref:Yb(e,s.onTriggerChange),onClick:f=>{var p;(p=n.onClick)==null||p.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:he(n.onPointerMove,_f(f=>{i.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:he(n.onPointerLeave,_f(f=>{var m,g;u();const p=(m=t.content)==null?void 0:m.getBoundingClientRect();if(p){const y=(g=t.content)==null?void 0:g.dataset.side,w=y==="right",v=w?-5:5,E=p[w?"left":"right"],S=p[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+v,y:f.clientY},{x:E,y:p.top},{x:S,y:p.top},{x:S,y:p.bottom},{x:E,y:p.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:he(n.onKeyDown,f=>{var m;const p=i.searchRef.current!=="";n.disabled||p&&f.key===" "||J8[r.dir].includes(f.key)&&(t.onOpenChange(!0),(m=t.content)==null||m.focus(),f.preventDefault())})})})});I2.displayName=Td;var k2="MenuSubContent",L2=A.forwardRef((n,e)=>{const t=g2(Or,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Ch(Or,n.__scopeMenu),o=vm(Or,n.__scopeMenu),a=P2(k2,n.__scopeMenu),l=A.useRef(null),c=xt(e,l);return x.jsx(yf.Provider,{scope:n.__scopeMenu,children:x.jsx(k_,{present:r||i.open,children:x.jsx(yf.Slot,{scope:n.__scopeMenu,children:x.jsx(JS,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:he(n.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:he(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:he(n.onKeyDown,u=>{var m;const f=u.currentTarget.contains(u.target),p=Z8[o.dir].includes(u.key);f&&p&&(i.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});L2.displayName=k2;function M2(n){return n?"open":"closed"}function cy(n){return n==="indeterminate"}function t1(n){return cy(n)?"indeterminate":n?"checked":"unchecked"}function _7(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function w7(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function E7(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=w7(n,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function A7(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function b7(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return A7(t,e)}function _f(n){return e=>e.pointerType==="mouse"?n(e):void 0}var S7=m2,T7=YS,C7=v2,x7=ZS,R7=y2,P7=N_,I7=w2,k7=A2,L7=S2,M7=C2,N7=x2,D7=R2,O7=I2,F7=L2,D_="Menubar",[JA,V7,j7]=vS(D_),[N2,Uq]=s2(D_,[j7,s_]),Jn=n7(),D2=s_(),[B7,n1]=N2(D_),O2=A.forwardRef((n,e)=>{const{__scopeMenubar:t,value:r,onValueChange:s,defaultValue:i,loop:o=!0,dir:a,...l}=n,c=pS(a),u=D2(t),[f="",p]=sk({prop:r,onChange:s,defaultProp:i}),[m,g]=A.useState(null);return x.jsx(B7,{scope:t,value:f,onMenuOpen:A.useCallback(y=>{p(y),g(y)},[p]),onMenuClose:A.useCallback(()=>p(""),[p]),onMenuToggle:A.useCallback(y=>{p(w=>w?"":y),g(y)},[p]),dir:c,loop:o,children:x.jsx(JA.Provider,{scope:t,children:x.jsx(JA.Slot,{scope:t,children:x.jsx(dL,{asChild:!0,...u,orientation:"horizontal",loop:o,dir:c,currentTabStopId:m,onCurrentTabStopIdChange:g,children:x.jsx(vt.div,{role:"menubar",...l,ref:e})})})})})});O2.displayName=D_;var r1="MenubarMenu",[U7,F2]=N2(r1),V2=n=>{const{__scopeMenubar:e,value:t,...r}=n,s=Ig(),i=t||s||"LEGACY_REACT_AUTO_VALUE",o=n1(r1,e),a=Jn(e),l=A.useRef(null),c=A.useRef(!1),u=o.value===i;return A.useEffect(()=>{u||(c.current=!1)},[u]),x.jsx(U7,{scope:e,value:i,triggerId:Ig(),triggerRef:l,contentId:Ig(),wasKeyboardTriggerOpenRef:c,children:x.jsx(S7,{...a,open:u,onOpenChange:f=>{f||o.onMenuClose()},modal:!1,dir:o.dir,...r})})};V2.displayName=r1;var ZA="MenubarTrigger",j2=A.forwardRef((n,e)=>{const{__scopeMenubar:t,disabled:r=!1,...s}=n,i=D2(t),o=Jn(t),a=n1(ZA,t),l=F2(ZA,t),c=A.useRef(null),u=xt(e,c,l.triggerRef),[f,p]=A.useState(!1),m=a.value===l.value;return x.jsx(JA.ItemSlot,{scope:t,value:l.value,disabled:r,children:x.jsx(fL,{asChild:!0,...i,focusable:!r,tabStopId:l.value,children:x.jsx(T7,{asChild:!0,...o,children:x.jsx(vt.button,{type:"button",role:"menuitem",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":m,"aria-controls":m?l.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":m?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:u,onPointerDown:he(n.onPointerDown,g=>{!r&&g.button===0&&g.ctrlKey===!1&&(a.onMenuOpen(l.value),m||g.preventDefault())}),onPointerEnter:he(n.onPointerEnter,()=>{var y;!!a.value&&!m&&(a.onMenuOpen(l.value),(y=c.current)==null||y.focus())}),onKeyDown:he(n.onKeyDown,g=>{r||(["Enter"," "].includes(g.key)&&a.onMenuToggle(l.value),g.key==="ArrowDown"&&a.onMenuOpen(l.value),["Enter"," ","ArrowDown"].includes(g.key)&&(l.wasKeyboardTriggerOpenRef.current=!0,g.preventDefault()))}),onFocus:he(n.onFocus,()=>p(!0)),onBlur:he(n.onBlur,()=>p(!1))})})})})});j2.displayName=ZA;var eb="MenubarContent",$7=A.forwardRef((n,e)=>{const{__scopeMenubar:t,align:r="start",...s}=n,i=Jn(t),o=n1(eb,t),a=F2(eb,t),l=V7(t),c=A.useRef(!1);return x.jsx(C7,{id:a.contentId,"aria-labelledby":a.triggerId,"data-radix-menubar-content":"",...i,...s,ref:e,align:r,onCloseAutoFocus:he(n.onCloseAutoFocus,u=>{var p;!!!o.value&&!c.current&&((p=a.triggerRef.current)==null||p.focus()),c.current=!1,u.preventDefault()}),onFocusOutside:he(n.onFocusOutside,u=>{const f=u.target;l().some(m=>{var g;return(g=m.ref.current)==null?void 0:g.contains(f)})&&u.preventDefault()}),onInteractOutside:he(n.onInteractOutside,()=>{c.current=!0}),onEntryFocus:u=>{a.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:he(n.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const f=u.target,p=f.hasAttribute("data-radix-menubar-subtrigger"),m=f.closest("[data-radix-menubar-content]")!==u.currentTarget,y=(o.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!y&&p||m&&y)return;let E=l().filter(O=>!O.disabled).map(O=>O.value);y&&E.reverse();const S=E.indexOf(a.value);E=o.loop?hq(E,S+1):E.slice(S+1);const[R]=E;R&&o.onMenuOpen(R)}},{checkForDefaultPrevented:!1}),style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});$7.displayName=eb;var z7="MenubarGroup",H7=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(x7,{...s,...r,ref:e})});H7.displayName=z7;var W7="MenubarLabel",G7=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(R7,{...s,...r,ref:e})});G7.displayName=W7;var q7="MenubarItem",K7=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(P7,{...s,...r,ref:e})});K7.displayName=q7;var X7="MenubarCheckboxItem",Y7=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(I7,{...s,...r,ref:e})});Y7.displayName=X7;var Q7="MenubarRadioGroup",J7=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(k7,{...s,...r,ref:e})});J7.displayName=Q7;var Z7="MenubarRadioItem",eq=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(L7,{...s,...r,ref:e})});eq.displayName=Z7;var tq="MenubarItemIndicator",nq=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(M7,{...s,...r,ref:e})});nq.displayName=tq;var rq="MenubarSeparator",sq=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(N7,{...s,...r,ref:e})});sq.displayName=rq;var iq="MenubarArrow",oq=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(D7,{...s,...r,ref:e})});oq.displayName=iq;var aq="MenubarSubTrigger",lq=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(O7,{"data-radix-menubar-subtrigger":"",...s,...r,ref:e})});lq.displayName=aq;var cq="MenubarSubContent",uq=A.forwardRef((n,e)=>{const{__scopeMenubar:t,...r}=n,s=Jn(t);return x.jsx(F7,{...s,"data-radix-menubar-content":"",...r,ref:e,style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});uq.displayName=cq;function hq(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var TR=O2,CR=V2,ms=j2;const dq="/assets/my_dp-CLCiIRTc.png",B2="/assets/light-mode2-CXNY-Y5o.png",U2="/assets/dark-mode-DCiUdDtp.png",fq="/assets/hamburger-Dk39ClP9.png",pq="/assets/close-WHyibIIa.png";function $2({appearance:n,toggleAppearance:e,isMobile:t}){const r=wj(),s=Xy(),[i,o]=A.useState(!1),a=g=>s.pathname===g,l=n==="dark",c=(g,y)=>{UC(s.pathname,g,"navbar_click"),Oi(y,"navbar"),r(g),t&&o(!1)},u=(g,y)=>{Oi(y,"navbar",{external_url:g,link_type:"external"}),Mg("external_link_click",y,{url:g}),window.open(g,"_blank")},f=()=>{const g=l?"light":"dark";Mg("theme_toggle",`${n}_to_${g}`,{from_theme:n,to_theme:g,device_type:t?"mobile":"desktop"}),e(g)},p=g=>{Mg("mobile_menu",g),o(g==="open")},m=()=>{UC(s.pathname,"/","avatar_click"),Oi("Avatar/Logo","navbar"),r("/")};return x.jsxs("div",{className:`navbar ${t?"mweb":""}`,children:[t&&x.jsx("img",{src:fq,alt:"open Menu",className:"mweb_menu",onClick:()=>p("open")}),t&&i&&x.jsxs("div",{className:"mobileMenu",children:[x.jsx("img",{src:pq,alt:"Close Menu",className:"closeMenu",onClick:()=>p("close")}),x.jsx(TR,{className:"MenubarRoot",children:x.jsxs(CR,{children:[x.jsx(ms,{className:`MenubarTrigger ${a("/")?"active":""}`,onClick:()=>c("/","Home"),children:"Home"}),x.jsx(ms,{className:`MenubarTrigger ${a("/resume")?"active":""}`,onClick:()=>c("/resume","Resume"),children:"Resume"}),x.jsx(ms,{className:`MenubarTrigger ${a("/projects")?"active":""}`,onClick:()=>c("/projects","Projects"),children:"Projects"}),x.jsx(ms,{className:"MenubarTrigger",onClick:()=>u("https://www.youtube.com/@g_adarsh_sonu","YouTube"),children:"YouTube"}),x.jsx(ms,{className:`MenubarTrigger ${a("/contact")?"active":""}`,onClick:()=>c("/contact","Contact"),children:"Contact"})]})})]}),x.jsx("div",{className:"avatar",children:x.jsx(TB,{className:"AvatarRoot",onClick:m,children:x.jsx(CB,{className:"AvatarImage",src:dq,alt:"G Adarsh Sonu"})})}),!t&&x.jsx("div",{className:"menu",children:x.jsx(TR,{className:"MenubarRoot",children:x.jsxs(CR,{children:[x.jsx(ms,{className:`MenubarTrigger ${a("/")?"active":""}`,onClick:()=>c("/","Home"),children:"Home"}),"|",x.jsx(ms,{className:`MenubarTrigger ${a("/resume")?"active":""}`,onClick:()=>c("/resume","Resume"),children:"Resume"}),"|",x.jsx(ms,{className:`MenubarTrigger ${a("/projects")?"active":""}`,onClick:()=>c("/projects","Projects"),children:"Projects"}),"|",x.jsx(ms,{className:"MenubarTrigger",onClick:()=>u("https://www.youtube.com/@g_adarsh_sonu","YouTube"),children:"Youtube"}),"|",x.jsx(ms,{className:`MenubarTrigger ${a("/contact")?"active":""}`,onClick:()=>c("/contact","Contact"),children:"Contact"})]})})}),s.pathname==="/"||t?null:x.jsx(x.Fragment,{children:x.jsx("div",{className:"toggleAppearance",onClick:f,children:x.jsx("div",{className:`themeToggleSwitch ${l?"dark":"light"}`,children:x.jsx("img",{src:l?U2:B2,alt:l?"Dark Mode":"Light Mode",className:"themeIcon"})})})})]})}$2.propTypes={appearance:ls.string,toggleAppearance:ls.func,isMobile:ls.bool};const xR="https://personal-chatbot-q2wp.onrender.com",mq=1e4,RR=5e3,nw=3;class gq{constructor(){this.isWakingUp=!1,this.wakeupPromise=null,this.retryCount=0}async wakeupChatbot(){if(this.isWakingUp)return this.wakeupPromise;this.isWakingUp=!0,console.log(" Waking up AI chatbot service..."),this.wakeupPromise=this.performWakeup();try{return await this.wakeupPromise}finally{this.isWakingUp=!1,this.wakeupPromise=null}}async performWakeup(){for(let e=1;e<=nw;e++){try{console.log(` Chatbot wakeup attempt ${e}/${nw}`);const t=new AbortController,r=setTimeout(()=>t.abort(),mq),s=await fetch(xR,{method:"GET",signal:t.signal,headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","User-Agent":"Portfolio-Wakeup-Service/1.0"}});if(clearTimeout(r),s.ok||s.status===404)return console.log(" Chatbot service is awake and ready!"),this.retryCount=0,!0;console.log(` Chatbot wakeup attempt ${e} returned status: ${s.status}`)}catch(t){t.name==="AbortError"?console.log(` Chatbot wakeup attempt ${e} timed out`):console.log(` Chatbot wakeup attempt ${e} failed:`,t.message)}e<nw&&(console.log(` Waiting ${RR/1e3}s before retry...`),await this.delay(RR))}return console.log(" Failed to wake up chatbot after all attempts"),!1}async checkChatbotStatus(){try{const e=new AbortController,t=setTimeout(()=>e.abort(),3e3),r=await fetch(xR,{method:"HEAD",signal:e.signal});return clearTimeout(t),r.ok||r.status===404}catch{return!1}}async smartWakeup(){return await this.checkChatbotStatus()?(console.log(" Chatbot is already awake!"),!0):this.wakeupChatbot()}delay(e){return new Promise(t=>setTimeout(t,e))}wakeupInBackground(){this.smartWakeup().catch(e=>{console.log("Background chatbot wakeup failed:",e.message)})}}const s1=new gq,vq=()=>{if(localStorage.getItem("disableChatbotWakeup")==="true"){console.log(" Chatbot wakeup disabled by user preference");return}console.log(" Initializing chatbot wakeup service..."),s1.wakeupInBackground()},yq=()=>s1.smartWakeup(),z2=()=>s1.isWakingUp,_q=()=>{const[n,e]=A.useState(!1),[t,r]=A.useState(null);return A.useEffect(()=>{let s;const i=()=>{const o=z2();o!==n&&(e(o),!o&&n&&r(new Date))};return n?s=setInterval(i,1e3):s=setInterval(i,5e3),i(),()=>{s&&clearInterval(s)}},[n]),{isWakingUp:n,lastWakeupTime:t,isRecentlyWokenUp:t&&Date.now()-t.getTime()<6e4}},wq=()=>{const{isWakingUp:n,isRecentlyWokenUp:e}=_q();return!n&&!e?null:x.jsxs("div",{className:"wakeup-status",children:[n&&x.jsxs("div",{className:"wakeup-indicator waking",children:[x.jsx("div",{className:"wakeup-spinner"}),x.jsx("span",{children:"Waking up AI assistant..."})]}),e&&!n&&x.jsxs("div",{className:"wakeup-indicator ready",children:[x.jsx("div",{className:"ready-icon",children:""}),x.jsx("span",{children:"AI assistant is ready!"})]})]})},Eq=()=>{const[n,e]=A.useState(!1),[t,r]=A.useState(!1),[s,i]=A.useState([{id:1,text:"Hi! I'm Adarsh's AI assistant. Ask me about his skills, projects, or experience! ",isBot:!0,timestamp:new Date}]),[o,a]=A.useState(""),[l,c]=A.useState(!1),[u,f]=A.useState(!1),[p,m]=A.useState(window.innerWidth<=736),g=A.useRef(null),y=A.useRef(null),w=A.useRef(null),v=A.useRef(null);A.useEffect(()=>{const V=()=>{m(window.innerWidth<=736)};return window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V),w.current&&clearTimeout(w.current)}},[]),A.useEffect(()=>{const V=setTimeout(()=>{!n&&!t&&r(!0)},3e3);return()=>clearTimeout(V)},[n,t]),A.useEffect(()=>{E()},[s]);const E=()=>{setTimeout(()=>{var V;(V=g.current)==null||V.scrollIntoView({behavior:"smooth"})},100)},S=()=>{const V=n;e(!n),Jh(V?"close":"open"),t&&r(!1),!n&&!z2()&&yq().then(D=>{console.log(D?" Chatbot is ready for conversation!":" Chatbot wakeup failed, but you can still try chatting")}),n||setTimeout(()=>{var D;(D=y.current)==null||D.focus()},100)},R=(V,D)=>{const z={id:Date.now(),text:V,isBot:D==="bot",timestamp:new Date};i($=>[...$,z]),!n&&D==="bot"&&r(!0)},O=()=>{c(!0)},j=()=>{c(!1)},C=()=>{f(!0)},T=()=>{f(!1)},P=async()=>{const V=o.trim();if(!(V===""||l||u)){Jh("message_sent",V),v.current=Date.now(),R(V,"user"),a(""),O(),w.current=setTimeout(()=>{l&&(j(),C())},3e3);try{const z=await(await fetch("https://personal-chatbot-q2wp.onrender.com/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:V})})).json(),$=v.current?Date.now()-v.current:null;w.current&&clearTimeout(w.current),j(),T(),R(z.response,"bot"),Jh("response_received",z.response,$)}catch(D){console.error("Error:",D),w.current&&clearTimeout(w.current),j(),T(),R("Sorry, I'm having trouble connecting. Please try again!","bot"),Jh("error",D.message)}}},M=V=>{l||u||(Jh("quick_action",V),Oi(`Quick: ${V}`,"chatbot_widget"),a(V),setTimeout(()=>{P()},100))},F=V=>{V.key==="Enter"&&!l&&!u&&P()};return x.jsxs("div",{className:"adarsh-chat-widget",children:[x.jsxs("button",{className:"chat-toggle",onClick:S,children:[x.jsx("span",{children:n?"":""}),t&&!n&&x.jsx("div",{className:"notification-badge",children:"1"})]}),x.jsxs("div",{className:`chat-modal ${n?"open":""}`,children:[x.jsxs("div",{className:"chat-header",children:[x.jsx("div",{className:"portfolio-badge",children:"AI Assistant"}),x.jsxs("div",{className:"chat-header-info",children:[x.jsx("div",{className:"chat-avatar",children:"A"}),x.jsxs("div",{className:"chat-info",children:[x.jsx("h3",{children:"Adarsh AI"}),x.jsx("p",{children:"Resume Assistant"})]})]}),x.jsx("button",{className:"close-btn",onClick:S,children:""})]}),x.jsxs("div",{className:"chat-messages",children:[x.jsx(wq,{}),s.map(V=>x.jsxs("div",{className:`message ${V.isBot?"bot":"user"}`,children:[x.jsx("div",{className:"message-avatar",children:V.isBot?"A":"Y"}),x.jsx("div",{className:"message-content",children:x.jsx("div",{dangerouslySetInnerHTML:{__html:V.text}})})]},V.id)),l&&x.jsxs("div",{className:"message bot",children:[x.jsx("div",{className:"message-avatar",children:"A"}),x.jsx("div",{className:"typing-indicator",children:x.jsxs("div",{className:"typing-dots",children:[x.jsx("span",{}),x.jsx("span",{}),x.jsx("span",{})]})})]}),u&&x.jsxs("div",{className:"message bot",children:[x.jsx("div",{className:"message-avatar",children:"A"}),x.jsx("div",{className:"initializing-screen",children:x.jsxs("div",{className:"initializing-content",children:[x.jsx("div",{className:"initializing-spinner"}),x.jsxs("div",{className:"initializing-text",children:[x.jsx("p",{children:x.jsx("strong",{children:"Starting up the AI assistant..."})}),x.jsx("p",{children:"The chatbot is waking up from sleep mode. This may take up to 50 seconds."}),x.jsx("p",{children:"Thanks for your patience! "})]})]})})]}),x.jsx("div",{ref:g})]}),x.jsxs("div",{className:"quick-actions",children:[x.jsx("div",{className:"quick-actions-title",children:"Quick questions:"}),x.jsxs("div",{className:"quick-buttons",children:[x.jsx("button",{className:"quick-btn",onClick:()=>M("What are your skills?"),disabled:l||u,children:"Skills"}),x.jsx("button",{className:"quick-btn",onClick:()=>M("Tell me about your projects"),disabled:l||u,children:"Projects"}),x.jsx("button",{className:"quick-btn",onClick:()=>M("How can I contact you?"),disabled:l||u,children:"Contact"})]})]}),x.jsxs("div",{className:"chat-input",children:[x.jsx("input",{ref:y,type:"text",value:o,onChange:V=>a(V.target.value),onKeyPress:F,placeholder:"Ask me anything...",disabled:l||u}),x.jsx("button",{className:"send-btn",onClick:P,disabled:!o.trim()||l||u,children:u?"Starting...":"Send"})]})]}),n&&p&&x.jsx("div",{className:"chat-overlay",onClick:S})]})},Aq="/assets/light-mode-B0-5GaYb.png",bq="/assets/brush-6nHCPmni.png",Sq="/assets/bath-DT5GXwEh.png",Tq="/assets/breakfast-BOywOTvR.png",nd="/assets/classRoom-DTFPcRHP.png",PR="/assets/foodTime-BDOKPLRj.png",Cq="/assets/sleep-DW-tJ3K_.png",xq="/assets/gym-CypTUB6A.png",vg="/assets/socialMedia-Iw7xUF9y.png",Rq="/assets/myRoutine-BgeV5gtg.png";function H2({appearance:n,toggleAppearance:e}){const[t,r]=A.useState(21),[s,i]=A.useState(t),o=A.useRef(null),[a,l]=A.useState(!1),c=Xy();A.useEffect(()=>{const w=setTimeout(()=>l(!0),0);return()=>clearTimeout(w)},[]);const u=w=>{o.current&&clearTimeout(o.current),i(w.target.id)},f=()=>{o.current=setTimeout(()=>i(t),300)},p=(w,v)=>w===v||v===t?"80%":v===w+1||v===w-1?"50%":"30%",m=w=>{r(w),w<8||w>20?e("dark"):e("light")},g=w=>{if(t!==parseInt(w))return null;const v={8:{icon:bq,text:"Morning Me: Debug Mode"},9:{icon:Sq,text:"Shower Karaoke Time"},10:{icon:Tq,text:"Cereal > Life Decisions"},11:{icon:nd,text:"Pretending to Work Hard"},12:{icon:nd,text:"Daydreaming in Class"},13:{icon:PR,text:"Lunch: My True Love"},14:{icon:nd,text:"Counting Minutes to Freedom"},15:{icon:nd,text:"Brain.exe Has Crashed"},16:{icon:nd,text:"Doodling Masterpieces"},17:{icon:vg,text:"Doomscrolling Begins"},18:{icon:vg,text:"Stuck in Meme Hell"},19:{icon:xq,text:"Gym? Am I dedicated to this?"},20:{icon:vg,text:"Insta Ate My Soul"},21:{icon:vg,text:"Hustling Code, Trending Reels"},22:{icon:PR,text:"Dinner: Scroll & Chew"}},E=n==="dark"?Cq:Aq,S=n==="dark"?"Sleep":"Idle",{icon:R,text:O}=v[w]||{icon:E,text:S};return x.jsxs(x.Fragment,{children:[x.jsx("img",{className:"modeImage",src:R,alt:O}),x.jsxs("div",{className:"routineContainer",children:[x.jsx("img",{className:"myRoutine",src:Rq,alt:"My Routine"}),x.jsx("span",{className:"routineText",children:O})]})]})},y=[{id:"1",time:"1am"},{id:"2",time:"2am"},{id:"3",time:"3am"},{id:"4",time:"4am"},{id:"5",time:"5am"},{id:"6",time:"6am"},{id:"7",time:"7am"},{id:"8",color:"teal",time:"8am"},{id:"9",color:"teal",time:"9am"},{id:"10",color:"teal",time:"10am"},{id:"11",color:"teal",time:"11am"},{id:"12",color:"teal",time:"12pm"},{id:"13",color:"teal",time:"1pm"},{id:"14",color:"teal",time:"2pm"},{id:"15",color:"teal",time:"3pm"},{id:"16",color:"teal",time:"4pm"},{id:"17",color:"teal",time:"5pm"},{id:"18",color:"teal",time:"6pm"},{id:"19",color:"teal",time:"7pm"},{id:"20",color:"teal",time:"8pm"},{id:"21",time:"9pm"},{id:"22",time:"10pm"},{id:"23",time:"11pm"},{id:"24",time:"12am"}];return a&&c.pathname==="/"?x.jsx(oh,{justify:"center",className:"circadian",children:y.map(({id:w,color:v,time:E})=>x.jsxs("div",{id:w,className:"circadian-seperatorBlock",onMouseEnter:S=>{m(parseInt(w)),u(S)},onMouseLeave:f,children:[x.jsx("div",{className:"modelImageContainer",children:g(w)}),x.jsx(pL,{className:"seperator",orientation:"vertical",style:{height:p(parseInt(s),parseInt(w)),backgroundColor:v}}),String(w)===String(s)&&x.jsx("span",{style:{position:"absolute",bottom:"-25px",width:"max-content"},children:x.jsxs($v,{children:["My ",E," Vibe"]})})]},w))}):null}H2.propTypes={appearance:ls.string,toggleAppearance:ls.func};RS.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();function W2(){const[n,e]=A.useState("dark"),[t,r]=A.useState(window.innerWidth<=736),s=n==="dark",i=()=>{r(window.innerWidth<=736)};A.useEffect(()=>(AU(),bU(),om(window.location.pathname,document.title),window.addEventListener("resize",i),i(),vq(),()=>{window.removeEventListener("resize",i)}),[]);const o=a=>{e(a)};return x.jsx(Qk,{accentColor:"grass",appearance:n,className:"container",children:x.jsx(Vj,{basename:"/",children:x.jsxs(x.Fragment,{children:[x.jsx($2,{appearance:n,toggleAppearance:o,isMobile:t}),x.jsx("br",{}),x.jsx(r2,{isMobile:t}),x.jsx("br",{}),t?x.jsx(x.Fragment,{children:x.jsx("div",{className:"mwebToggleAppearance",style:{position:"fixed",bottom:"25px",right:"25px"},onClick:()=>o(s?"light":"dark"),children:x.jsx("div",{className:`themeToggleSwitch ${s?"dark":"light"}`,style:{width:"30px",backgroundColor:"darkslategray"},children:x.jsx("img",{src:s?U2:B2,alt:s?"Dark Mode":"Light Mode",className:"themeIcon"})})})}):x.jsxs(x.Fragment,{children:[x.jsx(H2,{appearance:n,toggleAppearance:o}),x.jsx("br",{})]}),x.jsx(Eq,{})]})})})}W2.propTypes={appearance:ls.string};WI(document.getElementById("root")).render(x.jsx(A.StrictMode,{children:x.jsx(W2,{})}));
